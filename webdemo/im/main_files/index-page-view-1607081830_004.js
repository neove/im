/*! tita-web-v4 - v0.4.0 - 2016-07-08 18:31 */function NoticeSettingTita(a){this.conf=a,this._init()}function NoticeSettingTitaSingleton(a){return new NoticeSettingTita(a)}define("templates/daily",[],function(){return this.JST=this.JST||{},this.JST["daily/daily-completion"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){var isShowEmptyView=Boolean(!is_have_subordinates&&"group"==routerData.type);if(__p+='\n<div class="tt_tab_page tt_daily_tab_page">\n	<ul class="tab_tp" data-name="daily-tab">\n		<li  class="'+(null==(__t=1==routerData.dailyType?"active":"")?"":__t)+'" data-type="1"><a href="javascript:void(0)" data-trigger="false">日报</a></li>\n		<li  class="'+(null==(__t=2==routerData.dailyType?"active":"")?"":__t)+'" data-type="2"><a href="javascript:void(0)" data-trigger="false">周报</a></li>\n		<li  class="'+(null==(__t=3==routerData.dailyType?"active":"")?"":__t)+'" data-type="3"><a href="javascript:void(0)" data-trigger="false">月报</a></li>\n	</ul>\n</div>\n<div class="tt_page_container">\n	<div class="tt_daily_goback">\n	',0==routerData.isMySelf?(__p+="\n		","undefined"!=typeof team_navigation&&team_navigation&&"personal"==routerData.type&&(__p+='\n		<a href="'+(null==(__t=team_navigation.team_url+"&date="+date+(2==routerData.dailyType?"&from_message=1":""))?"":__t)+'"><span class="icon-arrow-left"></span><span class="text_dg">'+(null==(__t=team_navigation.name)?"":__t)+"</span></a>\n		"),__p+="\n	"):(__p+="\n		",__p+="personal"==routerData.type?'\n		<a href="#daily?type=group&dailyType='+(null==(__t=routerData.dailyType)?"":__t)+"&date="+(null==(__t=date)?"":__t)+(null==(__t=2==routerData.dailyType?"&from_message=1":"")?"":__t)+'"><span class="text_dg">我团队的'+(null==(__t=dailyName)?"":__t)+'</span><span class="icon-arrow-right"></span></a>\n		':'\n		<a href="#daily?dailyType='+(null==(__t=routerData.dailyType)?"":__t)+"&date="+(null==(__t=date)?"":__t)+(null==(__t=2==routerData.dailyType?"&from_message=1":"")?"":__t)+'"><span class="icon-arrow-left"></span><span class="text_dg">返回我的'+(null==(__t=dailyName)?"":__t)+"</span></a>\n		",__p+="\n	"),__p+="\n	</div>\n	<div class='tt_daily_completion'>\n		",__p+="personal"==routerData.type?'\n		<div class="title_dc">'+(null==(__t=user_daily.daily_name)?"":__t)+"</div>\n		":'\n		<div class="title_dc">'+(null==(__t=daily_name)?"":__t)+"</div>\n		",__p+="\n\n		",isShowEmptyView){__p+='\n			<div class="tt_common_emptyinit">\n				<div class="content_emptyinit">\n					<div class="className">\n						如果您设置过团队成员，将呈现如下统计图表\n						<br>现在就去<a href="#set?page_id=plan">设置团队成员</a>\n					</div>\n					';var names=["day","week","month"];__p+='\n					<img src="'+(null==(__t=Talent.Context.getStaticUrl("images/plan/"+names[routerData.dailyType-1]+"_no_sub.png"))?"":__t)+'">\n				</div>\n			</div>\n		'}else __p+='\n			<div class="cont_cd">\n				<div class="left_dc">\n					<div class="action_dc">\n						',set_enable.write_daily&&(__p+='\n						<a href="javascript:void(0);" class="btn btn-sure btn_dc" data-name="send-message">\n							',__p+="personal"==routerData.type?"\n								提醒ta写"+(null==(__t=dailyName)?"":__t)+"\n							":"\n								提醒大家写"+(null==(__t=dailyName)?"":__t)+"\n							",__p+="\n						</a>\n						"),__p+="\n						",set_enable.set_time&&(__p+='<a href="#set?page_id=plan" class="btn btn_dc">设置自动提醒团队</a>'),__p+='\n					</div>\n					<div data-name="today－submit-situation"></div>\n				</div>\n			</div>\n		';__p+='\n	</div>\n	<div data-name="group-member"></div>\n	<div data-name="pub-daily" class="tt_daily_pub" ',isShowEmptyView&&(__p+='style="display:none"'),__p+='></div>\n	<div data-name="feed-list" class="tt_daily_feedlist"></div>\n	<div data-name="share"></div>\n</div>\n\n'}return __p},this.JST["daily/daily-group-member-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<td class="col1_gms">'+(null==(__t=_.convertImage({className:"",src:user.Avatar.Small,size:30,shape:"radius",name:user.Name,bgColor:user.Avatar.Color}))?"":__t)+'</td>\n<td class="col2_gms">'+(null==(__t=_.substringWithM(user.Name,8,!0))?"":__t)+'</td>\n<td class="col3_gms"><span class="',__p+=3==user_daily.daily_submit.submit_type?"icon-dialog-closed-warn":"icon-right",__p+='"></span></td>\n<td class="col4_gms">\n	<span ',2==user_daily.daily_submit.submit_type&&(__p+='class="warn_gsm"'),__p+=">"+(null==(__t=user_daily.daily_submit.submit_content)?"":__t)+'</span></td>\n<td class="col5_gms">\n	',user_daily.evaluation?__p+='\n		<div data-name="eidt-evaluation" id="'+(null==(__t=user_daily.daily_Id)?"":__t)+'">'+(null==(__t=_.evaluation(user_daily.evaluation))?"":__t)+"</div>\n	":(__p+="\n		",user_daily.evaluation_enable?(__p+="\n		",__p+=3==user_daily.daily_submit.submit_type?'\n			<a href="javascript:void(0);" id="'+(null==(__t=user.UserId)?"":__t)+'" data-name="send-item-message">\n				提醒ta写'+(null==(__t=dailyName)?"":__t)+"\n			</a>\n		":'\n			<a href="javascript:void(0);" id="'+(null==(__t=user_daily.daily_Id)?"":__t)+'"  data-name="go-evaluation">去评价</a>\n		',__p+="\n		"):__p+="\n		评价：暂无\n		",__p+="\n	"),__p+="\n</td>";return __p},this.JST["daily/daily-group-member-today-submit-situation"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){__p+='\n	<div class="title_gms">';var txt=["当天","本周","本月"];__p+=(null==(__t=txt[dailyType-1])?"":__t)+'递交情况和评价</div>\n	<table class="list_gms">\n		\n	</table>\n\n'}return __p},this.JST["daily/daily-group-today-submit-situation"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="todaystatus_dc">\n	团队提交情况：\n	<div data-name="group-chart"></div>\n	总人数：'+(null==(__t=total)?"":__t)+"人&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;单位：份数 \n</div>";return __p},this.JST["daily/daily-sidebar-top"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)"personal"==routerData.type?(__p+='\n<div class="_tt_selectyearplan">\n	<a href="#italent/home?appid=1&apptype=1&name=TalentProfile-record&to_user_id='+(null==(__t=user.Id)?"":__t)+'" class="avatar_ttsyp" title="'+(null==(__t=user.Name)?"":__t)+'">\n		',__p+="undefined"!=typeof user.UserAvatar&&user.UserAvatar.HasAvatar===!1?"\n			"+(null==(__t=_.convertImage({className:"",src:"qqq",size:50,shape:"radius",name:user.Name,bgColor:user.UserAvatar.Color}))?"":__t)+"\n		":'\n			<img class="radius_img50" src="'+(null==(__t=user.UserAvatar.Medium)?"":__t)+'" width="50" height="50">\n		',__p+='\n	</a>\n	<div class="wrap">  \n		<a class="name_ttsyp" href="#italent/home?appid=1&apptype=1&name=TalentProfile-record&to_user_id='+(null==(__t=user.Id)?"":__t)+'">'+(null==(__t=user.Name)?"":__t)+'</a>\n		<span class="department_ttsyp">'+(null==(__t=user.Department)?"":__t)+"</span>\n		\n    </div>	\n</div>\n"):__p+='\n<div class="tt_side_subnav_group">\n	<span class="ico_ssg"></span>\n	<div class="text_ssg">'+(null==(__t=team_name)?"":__t)+"</div>\n</div>\n";return __p},this.JST["daily/daily-sidebar"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="tt_side_subnav_wrap">\r\n	',"personal"==routerData.type&&(__p+='\r\n	<div class="subtab_ssw">\r\n		',isShowPlan&&(__p+='\r\n		<li><a href="#plan?to_user_id='+(null==(__t=routerData.to_user_id)?"":__t)+'" title=""><span>'+(null==(__t=i18n.plan_1)?"":__t)+"</span></a></li>\r\n		"),__p+='\r\n		<li class="active"><a href="#daily?to_user_id='+(null==(__t=routerData.to_user_id)?"":__t)+'" title=""><span>总结</span></a></li>\r\n	</div>\r\n	'),__p+="\r\n	",groupDatas.length&&(__p+='\r\n	<div class="year_ssw" data-name="year-list">\r\n		<a href="javascript:void(0)" class="dropdown-toggle" data-name="change-group"><span>'+(null==(__t=routerData.group_name)?"":__t)+'</span><b class="caret"></b></a>\r\n		<ul class="dropdown_ssw" data-name=\'group-list\'>\r\n			',_.each(groupDatas,function(a){__p+='\r\n			<li><a href="#daily?group_id='+(null==(__t=a.GroupId)?"":__t)+"&to_user_id="+(null==(__t=routerData.to_user_id)?"":__t)+'" title="" groupid="'+(null==(__t=a.GroupId)?"":__t)+'">'+(null==(__t=a.GroupName)?"":__t)+"</a></li>\r\n			"}),__p+="\r\n		</ul>\r\n	</div>\r\n	"),__p+='\r\n	<ul class="_tt_side_subnav" data-name="side-bar-nav">			\r\n		',_.each(navData,function(a){__p+="\r\n				\r\n				<li ",a.Active&&(__p+='class="active"'),__p+='>\r\n					<a data-trigger="false" href="#daily?to_user_id='+(null==(__t=routerData.to_user_id)?"":__t)+"&group_id="+(null==(__t=routerData.group_id)?"":__t)+"&tag_type="+(null==(__t=a.TagType)?"":__t)+"&date="+(null==(__t=a.Date)?"":__t)+"&tag_id="+(null==(__t=a.TagId)?"":__t)+'">'+(null==(__t=a.TagName)?"":__t)+"</a>			\r\n				</li>\r\n				\r\n		"}),__p+="\r\n	</ul>\r\n</div>";return __p},this.JST["daily/daily-today-submit-situation"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="\n	<dt>个人提交情况</dt>\n	<dd>\n		<p>\n			",daily_submit?(__p+="\n				",__p+=3==daily_submit.submit_type?'\n					<span class="icon-dialog-closed-warn icon_dc"></span>\n				':2==daily_submit.submit_type?'\n					<span class="icon-right-delay icon_dc"></span>\n				':'\n					<span class="icon-right icon_dc"></span>\n				',__p+='\n				<span class="status_dc">'+(null==(__t=daily_submit.submit_content)?"":__t)+"</span>\n				<span>"+(null==(__t=daily_submit.submit_date)?"":__t)+"</span>\n			"):__p+='\n				<span class="icon-dialog-closed-warn icon_dc"></span><span class="status_dc">未提交</span>\n			',__p+="\n		</p>\n		",evaluation?(__p+='\n			<div class="evaluation_dc ',evaluation_enable&&(__p+="point_dc"),__p+='" ',evaluation_enable&&(__p+='data-name="personal-edit-evaluation" id="'+(null==(__t=daily_Id)?"":__t)+'" '),__p+=" ><span>评价：</span>\n				"+(null==(__t=_.evaluation(evaluation))?"":__t)+"</div>\n		"):(__p+='\n			<div class="evaluation_dc">\n				',__p+=evaluation_enable?'\n				<a href="javascript:void(0);" id="'+(null==(__t=daily_Id)?"":__t)+'" data-name="personal-do-evaluation">去评价</a>\n				':"\n				评价：暂无\n				",__p+="\n			</div>\n		"),__p+="\n	</dd>\n";return __p},this.JST["daily/detail/detail-evaluation"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)if(evaluateInfos.length&&(showScore||showMedal)){if(__p+="\n","detail"==viewMode){if(__p+='\n	<div class="tt-eval-task-preitem">\n		',evaluation_enable&&(__p+='\n			<div class="tt-eval-operate" style="margin-top:0;">\n				<span class="btn btn-sure edit-task-eval">修改评价</span>\n			</div>\n		'),__p+='\n		<div class="tt-eval-detail">\n			<div class="tt-person-photo" original-title="'+__e(user.Name)+'">\n			    ',__p+=user&&user.Avatar.HasAvatar===!1?"\n					"+(null==(__t=_.convertImage({className:"",src:user.Avatar.Small,size:30,shape:"radius",name:user.Name,bgColor:user.Avatar.Color}))?"":__t)+"\n				":'\n					<img src="'+(null==(__t=user.Avatar.Small)?"":__t)+'" width="30" height="30">\n				',__p+='\n		    </div>\n		    <ul class="tt-eval-preitem">\n		    	<li class="tt-eval-pre-score">\n		    		',showMedal)__p+='\n		    		    <label class="label-name">奖章</label>\n			    		<div class="tt-eval-result">\n			    			'+(null==(__t=_.evaluationMedal(showMedal.value,showMedal.name))?"":__t)+"\n			    		</div>\n		    		";else{__p+='\n						<label class="label-name">评分</label>\n			    		<div class="tt-eval-result">\n			    			<ul class="tt-star-score-list">\n								';var selectIndex=Number(showScore.value)/(showScore.goal||settings[1][0].goal),halfSelectIndex=0;2==showScore.goal&&String(selectIndex).indexOf(".5")>=0&&(halfSelectIndex=parseInt(selectIndex)+1);for(var i=1;i<=showScore.lvl;i++)__p+="\n									",__p+=selectIndex>=i?'\n									<li class="icon-star-m-active"></li>\n									':i==halfSelectIndex?'\n									<li class="icon-star-m-half-active"></li>\n									':'\n									<li class="icon-star-m"></li>\n								';__p+='\n							</ul>\n							<div class="last-score">\n								<span class="score-value">'+__e(showScore.value)+'</span><span class="value-unit">分</span>\n							</div>\n			    		</div>\n		    		'}__p+='\n		    	</li>\n		    	<li class="tt-eval-pre-comment">\n		    		<label class="label-name">评语</label>\n		    		<p class="tt-eval-result">\n		    			',_.calChineseLen(remark)>300?(__p+="\n			    		     ",__p+=0==commentShowAll?"\n			    		        "+__e(_.substring(remark,300,!0))+'<a href="javascript:void(0);"  class="showAll">展开</a>	\n			    		     ':"\n			    		        "+__e(remark)+'<a href="javascript:void(0);" class="showAll">收起</a>	\n			    		     ',__p+="\n						"):__p+="\n						  "+__e(remark||"完成的不错，继续努力！")+"\n						",__p+="\n		    		</p>\n		    	</li>\n		    </ul>\n		</div>\n		\n		",showDimension&&showDimension.length>0&&(__p+='\n			<div class="tt-eval-operate" style="margin-top:40px;">\n			  <a href="javascript:void(0)" class="show-demension">维度评分<span class="icon-arrow-up-double"></span></a>\n			</div>\n		'),__p+="\n		\n		",showDimension&&showDimension.length>0&&(__p+='\n		<ul class="tt-eval-dimension">\n			',_.each(showDimension,function(a){__p+='\n       			<li class="tt-dimension-item">\n					<label>'+__e(a.name||_.findWhere(settings[4],{cType:a.cType}).name)+'：</label>\n					<span class="item-value"><span class="score-value">'+__e(a.value)+"</span>分</span>\n				</li>\n			"}),__p+="\n		</ul>\n		"),__p+="\n	</div>\n	"}else if("simple"==viewMode){if(__p+='\n	<div class="tt-eval-task-preitem">\n		\n		    <div class="tt-eval-operate" style="margin-top:0;">\n		    	',evaluation_enable&&(__p+='\n				<span class="btn btn-sure edit-task-eval">修改评价</span>\n				'),__p+="\n				",showDimension&&showDimension.length>0&&(__p+='\n				<a href="javascript:void(0)" class="show-demension">维度评分<span class="icon-arrow-down-double"></span></a>\n				'),__p+='\n             </div>\n		\n		<div class="tt-eval-detail">\n			<div class="tt-person-photo" original-title="'+__e(user.Name)+'">\n			   ',__p+=user&&user.Avatar.HasAvatar===!1?"\n					"+(null==(__t=_.convertImage({className:"",src:user.Avatar.Small,size:30,shape:"radius",name:user.Name,bgColor:user.Avatar.Color}))?"":__t)+"\n				":'\n					<img src="'+(null==(__t=user.Avatar.Small)?"":__t)+'" width="30" height="30">\n				',__p+='\n		    </div>\n		    <ul class="tt-eval-preitem">\n		    	<li class="tt-eval-pre-score">\n		    		',showMedal)__p+='\n		    		    <label class="label-name">奖章</label>\n			    		<div class="tt-eval-result">\n			    			'+(null==(__t=_.evaluationMedal(showMedal.value,showMedal.name))?"":__t)+"\n			    		</div>\n		    		";else{__p+='\n						<label class="label-name">评分</label>\n			    		<div class="tt-eval-result">\n			    			<ul class="tt-star-score-list">\n								';var selectIndex=Number(showScore.value)/(showScore.goal||settings[1][0].goal),halfSelectIndex=0;2==showScore.goal&&String(selectIndex).indexOf(".5")>=0&&(halfSelectIndex=parseInt(selectIndex)+1);for(var i=1;i<=showScore.lvl;i++)__p+="\n									",__p+=selectIndex>=i?'\n									<li class="icon-star-m-active"></li>\n									':i==halfSelectIndex?'\n									<li class="icon-star-m-half-active"></li>\n									':'\n									<li class="icon-star-m"></li>\n								';__p+='\n							</ul>\n							<div class="last-score">\n								<span class="score-value">'+__e(showScore.value)+'</span><span class="value-unit">分</span>\n\n							</div>\n			    		</div>\n		    		'}__p+='\n		    	</li>\n		    	<li class="tt-eval-pre-comment">\n		    		<label class="label-name">评语</label>\n		    		<p class="tt-eval-result">\n		    		    ',_.calChineseLen(remark)>300?(__p+="\n			    		     ",__p+=0==commentShowAll?"\n			    		        "+__e(_.substring(remark,300,!0))+'<a href="javascript:void(0);" class="showAll">展开</a>	\n			    		     ':"\n			    		        "+__e(remark)+'<a href="javascript:void(0);" class="showAll">收起</a>	\n			    		     ',__p+="\n						"):__p+="\n						  "+__e(remark||"完成的不错，继续努力！")+"\n						",__p+="\n		    		</p>\n		    	</li>\n		    </ul>\n		</div>\n	</div>\n	"}__p+="\n"}else __p+='\n	<div class="none_de">\n		<span class="text_nde">还没有进行评价</span>\n		',evaluation_enable&&(__p+='\n		<span class="btn btn-sure" data-name="do-evaluation">现在评价</span>\n		'),__p+="\n	</div>\n";return __p},this.JST["daily/detail/detail-feed"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="_tt_moduletitle">\r\n	<div class="icon share"><b></b><em></em></div>\r\n	<div class="text">沟通</div>\r\n</div>\r\n<div class="_tt_modulecontent" data-name="comment-list">\r\n	<div class="loadfeed">\r\n		<div class="img_loadfed">\r\n			<span>tita努力加载中...</span>\r\n		</div>\r\n	</div>\r\n</div>';return __p},this.JST["daily/detail/detail-index-page"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div data-name=\'top-bar\'></div>\n<div data-name="container">\n	<div data-name="info"></div>\n	<div data-name="evaluation-daily"></div>\n	<div data-name="reward" style="margin:0 10px 0 10px;"></div>\n	<div data-name="feed" style="margin:0 10px 0 10px;"></div>\n	<div style="padding-bottom:25px;margin:0 10px 0 10px;" data-name="daily-operation">\n		<div class="_tt_moduletitle">\n			<div class="icon do_icon"><b></b><em></em></div>\n			<div class="text">操作记录</div>\n		</div>\n		<div data-name="daily-operate" class="project_detail_content project_detail_content_notop" style="margin-top:20px;padding-bottom:30px;">\n		</div>\n	</div>	\n</div>\n';return __p},this.JST["daily/detail/detail-info"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\r\n<span class="planname_ttpi">'+(null==(__t=daily_name)?"":__t)+'</span>\r\n<div class="time_ttpi">\r\n	<span class="title_ttpi">提交时间</span><span class="start_ttpi">'+(null==(__t=submit_date)?"":__t)+'</span>\r\n</div>\r\n<div class="time_ttpi">\r\n	<span class="title_ttpi">提交人</span><span class="start_ttpi">'+(null==(__t=_.substringWithM(publisher.Name,12,!0))?"":__t)+'</span>\r\n</div>\r\n<div class="time_ttpi">\r\n	<div class="title_ttpi" style="line-height:30px;">内容</div>\r\n	<div class="description_ttpi" style="margin-top:0">\r\n	',""!=description&&null!=description?(__p+='\r\n		<div class="plandetaildescript content_dttpi" ',enitable&&(__p+='data-name="description"'),__p+=">"+(null==(__t=description)?"":__t)+"</div>\r\n	"):(__p+="\r\n		",enitable&&(__p+='\r\n		<a href="javascript:void(0);" class="add_dttpi"  data-name="description-add">点击添加</a>\r\n		'),__p+="\r\n	"),__p+='\r\n	<div class="text_dttpi"  data-name="description-input-wrap" style="float:left;">\r\n		<div class="input-default input-focus"><textarea style="resize:none;" data-name="description-input">'+(null==(__t=edit_description)?"":__t)+'</textarea>\r\n	</div>\r\n	</div>\r\n</div>\r\n</div>\r\n<div class="time_ttpi">\r\n	',enitable?(__p+='\r\n		<div class="title_ttpi">可见范围</div>\r\n		<div class="start_ttpi">\r\n			<div class="daily_visible" data-name="daily-visible">\r\n				<a href="javascript:void(0);" title="" class="radio ',2!=visibility||objId||(__p+="radio-checked"),__p+='" visibility="2"></a><label>仅上级可见</label>\r\n			</div>\r\n			',0!=DepartmentId&&(__p+='\r\n				<div class="daily_visible" data-name="daily-visible">\r\n					<a href="javascript:void(0);" title="" class="radio ',2==visibility&&objId&&(__p+="radio-checked"),__p+='" objId="'+(null==(__t=DepartmentId)?"":__t)+'" objType="15" visibility="2"></a><label>仅我的部门可见</label>\r\n				</div>\r\n			'),__p+='\r\n			\r\n			<div class="daily_visible" data-name="daily-visible">\r\n				<a href="javascript:void(0);" title="" class="radio ',1==visibility&&(__p+="radio-checked"),__p+='" visibility="1"></a><label>所有人可见</label>\r\n			</div>\r\n		</div>\r\n	'):(__p+='\r\n		<span class="title_ttpi">可见范围</span>\r\n		<span class="start_ttpi">\r\n			',1==visibility?__p+="\r\n				所有人可见\r\n			":2==visibility&&objId?__p+="\r\n				仅我的部门可见\r\n			":2!=visibility||objId||(__p+="\r\n				仅上级可见\r\n			"),__p+="\r\n		</span>\r\n	"),__p+='\r\n</div>\r\n\r\n<div class="time_ttpi" data-name="attachment">\r\n	<span class="title_ttpi">附件</span>\r\n	<div class="start_ttpi" style="width:80%;">\r\n		<div class="uploader_container" data-name="task-detail-attachment-button"></div>\r\n	</div>\r\n	<div class="attachments" data-name="task-detail-attachment-list"></div>\r\n</div>\r\n\r\n\r\n\r\n\r\n';return __p},this.JST["daily/detail/detail-topbar"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="tt_plandetailtopbar">\n	<a class="close_pdtb" href="javascript:void(0)" data-name="closed">关闭</a>\n	<ul class="btnlist_pdtb">\n		',__p+=is_remind?'\n			<li><a href="javascript:void(0);" class="icon-action-alarm-clock-over icon-action-alarm-clock-highlight-over" title="已设提醒" data=\'{"objid":"'+(null==(__t=daily_Id)?"":__t)+'","objType":"8"}\' data-name="remind"></a></li>\n		':'\n			<li><a href="javascript:void(0);" class="icon-action-alarm-clock-over" title="设置提醒" data=\'{"objid":"'+(null==(__t=daily_Id)?"":__t)+'","objType":"8"}\' data-name="remind"></a></li>\n		',__p+="\n		\n		\n	</ul>\n</div>";return __p},this.JST["daily/highlight-date"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="highlightDate">\r\n	<div class="date_hd" data-name="date-picker"></div>\r\n	<div class="remark">\r\n		<h2 data-name="title">'+(null==(__t=title)?"":__t)+'</h2>\r\n		<div class="statics">\r\n			',_.each(labels,function(a,b){__p+="\r\n				",__p+=0==b?'\r\n				<span class="comStyle borderAll"></span>\r\n				':1==b?'\r\n				<span class="comStyle borderIn"></span>\r\n				':'\r\n				<span class="comStyle borderPart"></span>\r\n				',__p+="\r\n				<span>"+(null==(__t=a)?"":__t)+"</span>\r\n			"}),__p+="\r\n			\r\n		</div>\r\n	</div>\r\n</div>";return __p},this.JST["daily/index-page"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='\n	<!-- side sub nav -->\n	<div class="tt_layout_tabnav tu-col-3" data-tu-submenu="tu-submenu">\n		<div data-name="side-bar-user-info" class="tt_side_subnav_userinfo"></div>\n		<div data-name="side-bar-nav"></div>\n	</div>\n	<!-- side sub nav end -->\n	<div class="tt_layout_container  tu-col-13" data-name="container">\n\n		<div class="tt_daily_container">\n<!-- 			<div class="_tt_loading_m">努力加载中…</div>\n -->		<div class="tt_daily_top">\n 				<div data-name="datepicker-statistics" class="date_dt"></div>\n				<div data-name="completion" class="basic_dt"></div>\n			</div>\n			\n		</div>		\n	</div>\n	<div class="tt_daily_detail_container" data-name="detail-container"></div>\n	';return __p},this.JST}),define("views/daily/daily-today-submit-situation-view",["talent","templates/daily"],function(a,b){return a.ItemView.extend({template:b["daily/daily-today-submit-situation"],tagName:"dl",className:"todaystatus_dc",onRender:function(){this.routerData=this.model.get("routerData")},ui:{doE:"a[data-name=personal-do-evaluation]",editEvaluation:"div[data-name=personal-edit-evaluation]"},events:function(){var a={};return a["click "+this.ui.doE]="_clickDoEHandler",a["click "+this.ui.editEvaluation]="_editEvaluationHandler",a},_clickDoEHandler:function(b){var c=a.$(b.currentTarget),d=c.attr("id"),e=this._changHash(d);this.routerData.daily_id=d,a.app.execute("history:navigate",e,!1),this.trigger("edit-evaluation",d)},_editEvaluationHandler:function(b){var c=a.$(b.currentTarget),d=c.attr("id"),e=this._changHash(d);this.trigger("edit-evaluation",c.attr("id")),a.app.execute("history:navigate",e,!1)},_changHash:function(a){var b=decodeURIComponent(location.hash);return b.indexOf("?")>0?b.indexOf("daily_id")>0?b=b.replace(/daily_id=\d+/,"daily_id="+a):b+="&daily_id="+a:b+="?daily_id="+a,b}})}),define("views/daily/daily-group-member-today-submit-situation-view",["talent","templates/daily"],function(a,b){var c=a.ItemView.extend({template:b["daily/daily-group-member-item"],tagName:"tr",initialize:function(b){this.setting=a._.extend({},b)},templateHelpers:function(){return this.setting}});return a.CompositeView.extend({template:b["daily/daily-group-member-today-submit-situation"],className:"tt_daily_groupmemberstatus",itemView:c,itemViewContainer:".list_gms",ui:{sendMsg:"a[data-name=send-item-message]",editEval:"div[data-name=eidt-evaluation]",goEval:"a[data-name=go-evaluation]"},itemViewOptions:function(){var a=this.model.get("dailyType")||1,b=["日报","周报","月报"],c=b[a-1];return{dailyType:a,dailyName:c}},events:function(){var a={};return a["click "+this.ui.sendMsg]="_sendMsgHandler",a["click "+this.ui.editEval]="_editEvaluationHandler",a["click "+this.ui.goEval]="_editEvaluationHandler",a},_sendMsgHandler:function(b){var c=a.$(b.currentTarget);this.trigger("remind",b,c)},_editEvaluationHandler:function(b){var c=a.$(b.currentTarget),d=c.attr("id");this.trigger("edit-evaluation",b,c,d)}})}),define("views/common/send-notice/send-notice-user-list-view",["talent","templates/common","$.tipsy","tdialog"],function(a,b,c,d){var e=a.ItemView.extend({tagName:"li",template:b["common/send-notice/send-notice-user-list-item"],initialize:function(){this.isDisableSelect=this.options.isDisableSelect||!1},onRender:function(){var b=this;a.$(this.el).addClass("active"),this.model.set("isActive",!0),a.$(this.el).attr("Id",this.model.get("userId")),$(".tipsy").hide(),this.$el.tipsy({gravity:"s",title:function(){return b.model.get("name")}})},onClose:function(){$(".tipsy").hide()},modelEvents:{"change:isActive":"_toggleStatus"},_toggleStatus:function(){var b=this.model.get("isActive");b?a.$(this.el).addClass("active"):a.$(this.el).removeClass("active")}});return a.CompositeView.extend({template:a._.template("<ul/>"),itemViewContainer:"ul",itemView:e,events:function(){var a={};return a["click li"]="_selectUser",a},onRender:function(){this.selectUsers=this.collection.toJSON(),this.model.set("selectUsers",a._.pluck(this.selectUsers,"userId")),1==this.collection.length&&this.$el.find("li:first").addClass("disable")},_selectUser:function(b){if(1!=this.collection.length){var c=a.$(b.currentTarget),e=c.index(),f=this.collection.at(e);this.selectUserTipView&&this.selectUserTipView.$el.remove(),f.get("isActive")?f.set("isActive",!1):f.set("isActive",!0);var g=a._.filter(this.collection.toJSON(),function(a){return a.isActive?a.isActive:void 0});return 0==g.length?(f.set("isActive",!0),this.selectUserTipView=new d({fixed:!1,type:"modal",cancel:!1,sure:!1}),this.selectUserTipView.render().$el.appendTo("body"),void this.selectUserTipView.show(c,'<div class="innerhtml_dialog">请至少选择一个通知对象</div>',{arrow:!1,autoHide:!0,pos:"bottomCenter"})):void this.model.set("selectUsers",a._.pluck(g,"userId"))}},addAttr:function(a){for(var b=0;b<a.length;b++)a[b].isActive=!0;return a},reset:function(){this.collection.reset(this.addAttr(this.userListData))}})}),define("views/common/send-notice/send-notice-auto-user-list-view",["talent","templates/common","UserSelector","collections/smember-group-collection","$.tipsy","tdialog"],function(a,b,c,d,e,f){var g=a.ItemView.extend({template:b["common/send-notice/add-user"],tagName:"li",ui:{uxUserArea:".ux_user_area"},initialize:function(){},onRender:function(){this.model.has("UserAvatar")?(this.userAvatar=this.model.get("UserAvatar"),this.userAvatar.HasAvatar&&this.$el.find("img").addClass("radius_img30")):this.userAvatar="",this.$el.find("a").tipsy({gravity:"s"})},events:function(){var a={};return a["mouseover "+this.ui.uxUserArea]="changeHideNode",a["mouseout "+this.ui.uxUserArea]="changeShowNode",a["click "+this.ui.uxUserArea]="deleteUser",a},deleteUser:function(){this.trigger("deleteUser",this.model)},changeHideNode:function(b){var c=a.$(b.currentTarget);this.userAvatar.HasAvatar?c.find("img").hide():c.find("span").hide()},changeShowNode:function(b){var c=a.$(b.currentTarget);this.userAvatar.HasAvatar?c.find("img").show():c.find("span").show()}}),h=a.CompositeView.extend({itemView:g,itemViewContainer:"ul",template:b["common/send-notice/add-user-list"],className:"add_user_list",ui:{addUserBtn:".ux_add_btn"},initialize:function(){},modelEvents:{change:"render"},onRender:function(){var a=this;this.on("itemview:deleteUser",function(b){a.collection.remove(b.model),$("body .tipsy").remove()}),this.userSelectorView=new c({collection:new d}),this.userSelectorView.addNode(this.$el.find(".ux_add_btn"),this.addUserSelectonOptions),this.$el.find(".ux_add_btn").on("submit",function(b,c){b.stopPropagation(),a.smemberSelect(c)})},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a),d=Marionette.getOption(this,"itemViewOptions");_.isFunction(d)&&(d=d.call(this,a,c));var e=this.buildItemView(a,b,d);this.addChildViewEventForwarding(e),this.children.add(e),e.render(),this.$el.find(this.itemViewContainer).find("li:first-child").length?this.$el.find(this.itemViewContainer).find("li:first-child").before(e.el):this.$el.find(this.itemViewContainer).append(e.el),this._isShown&&Marionette.triggerMethod.call(e,"show"),this.triggerMethod("after:item:added",e)},smemberSelect:function(a){var a=a||{},b=this.collection.where({Id:a.Id});b.length>0?this.showDialogArrow(this.ui.addUserBtn,"该联系人已存在","warn"):this.collection.add(a)},showDialogArrow:function(b,c,d){var e=this;e.tDialogViewError||(e.tDialogViewError=new f({fixed:!1,type:"tipsy",cancel:!1,sure:!1}),e.tDialogViewError.render().$el.appendTo("body")),e.tDialogViewError.show(a.$(b),c,{arrow:1,pos:"bottomCenter",height:300,topBias:8,leftBias:0,arrowBias:10,className:d,autoHide:!0})}});return h}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(require("../moment")):"function"==typeof define&&define.amd?define("momentZH",["moment"],b):b(a.moment)}(this,function(a){var b=a.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm分",LTS:"Ah点m分s秒",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(a,b){return 12===a&&(a=0),"凌晨"===b||"早上"===b||"上午"===b?a:"下午"===b||"晚上"===b?a+12:a>=11?a:a+12},meridiem:function(a,b){var c=100*a+b;return 600>c?"凌晨":900>c?"早上":1130>c?"上午":1230>c?"中午":1800>c?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var b,c;return b=a().startOf("week"),c=this.unix()-b.unix()>=604800?"[下]":"[本]",0===this.minutes()?c+"dddAh点整":c+"dddAh点mm"},lastWeek:function(){var b,c;return b=a().startOf("week"),c=this.unix()<b.unix()?"[上]":"[本]",0===this.minutes()?c+"dddAh点整":c+"dddAh点mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(日|月|周)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"日";case"M":return a+"月";case"w":case"W":return a+"周";default:return a}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}});return b}),define("views/common/send-notice/send-notice-component",["talent","templates/common","views/common/send-notice/send-notice-user-list-view","views/common/send-notice/send-notice-auto-user-list-view","moment","momentZH","tdialog"],function(a,b,c,d,e,f,g){return a.Layout.extend({defaults:{title:"提醒大家写日报",isMailEdit:"true",mailContent:"",checkedSendMail:!0,isEditCopySelf:!0,checkedCopySelf:!0,isShowWithStatistics:!1,checkedWidthStatistics:!0,isShowSystemNotice:!0,isShowFormalNotice:!1,autoSubShow:!1,editFormalNotice:!1},className:"noticemessage",template:b["common/send-notice/send-notice-component"],regions:{userList:"div[data-name=user-list]"},ui:{item:"li",title:"div[data-name=title]",inputWrap:"div[data-name=mail-cont]",input:"div[data-name=mail-cont] textarea",copyMy:"a[data-name=copy-my]",withStatistics:"a[data-name=with-statistics]"},events:function(){var a={};return a["click "+this.ui.item]="_selectUser",a["keyup "+this.ui.input]="_keyupInputHandler",a["click "+this.ui.copyMy]="_clickCopyMyHandler",a["click "+this.ui.withStatistics]="_clickWidthStatistics",a
},initialize:function(){var b=this;this.settings=a._.extend({},this.defaults,this.options),this.model.set(this.settings),this.loginUser=a.Context.getUserInfo(),this.model.set("user",this.loginUser);var d=e().format("YYYY年M月D日");this.model.set("SendTime",d),this.settings.autoSubShow||(this.collection.each(function(a){a.set("Id",a.get("userId"))}),this.sendNoticeUserListView=new c({collection:this.collection})),a.$(document).off("click.Send-Notice-Componet-View"),a.$(document).on("click.Send-Notice-Componet-View",function(){b.hideDialog()})},templateHelpers:function(){return{isShowFormalNotice:this.settings.isShowFormalNotice,isShowSystemNotice:this.settings.isShowSystemNotice}},onRender:function(){var a=this;this.ui.input.val(this.model.get("mailContent")),this.settings.autoSubShow?(_.map(this.collection.models,function(b){var c=a._returnImgTemplate(b.toJSON());b.set("imgTemplate",c)}),this.collection.each(function(a){a.set("Id",a.get("userId"))}),this.sendNoticeAutoUserListView=new d({collection:this.collection}),this.userList.show(this.sendNoticeAutoUserListView)):this.userList.show(this.sendNoticeUserListView)},_returnImgTemplate:function(a){var b="";if(a.avatar.HasAvatar)var b='<img class="radius_img30" width="30" height="30" src="'+a.avatar.Small+'" />';else var b='<span class="radius_img30" style="background-color:'+a.avatar.Color+'">'+_.substring(a.name,2,!1)+"</span>";return b},onClose:function(){a.$(document).off("click.Send-Notice-Componet-View")},showDialog:function(b,c,d){var e=this;this.dialogView=new g({type:"defaults",sure:function(){var a=e.model.get("checkedCopySelf");if(e.settings.autoSubShow)var b=_.map(e.sendNoticeAutoUserListView.collection.models,function(a){return a.get("Id")});else var b=e.sendNoticeUserListView.model.get("selectUsers");if(a)if(b)b.push(e.loginUser.Id);else{var b=[];b.push(e.loginUser.Id)}var c=e.model.toJSON();c.selectUsers=b,e.dialogView.hide(),e.trigger("submit",c)},cancel:function(){e.hideDialog()}});var f="";f=d?d:$("body"),this.dialogView.render().$el.appendTo(f);var h=this.render().el,i={pos:"bottom",x:0,y:0,title:"提醒大家写日报"};c.title&&this.ui.title.html(c.title),this.dialogView.show(b,h,a._.extend({arrow:!1,autoHide:!1,autoFrames:f,container:f},i,c))},hideDialog:function(){this.dialogView&&this.dialogView.close(),this.$el.remove()},_keyupInputHandler:function(b){var c=a.$(b.currentTarget),d=$.trim(c.val());this.model.set("mailContent",d)},_clickCopyMyHandler:function(b){if(this.model.get("checkedSendMail")){var c=a.$(b.currentTarget),d=this.model.get("checkedCopySelf");d?(this.model.set("checkedCopySelf",!1),c.removeClass("checkbox-checked")):(this.model.set("checkedCopySelf",!0),c.addClass("checkbox-checked"))}},_clickWidthStatistics:function(b){var c=a.$(b.currentTarget),d=this.model.get("checkedWidthStatistics");d?(this.model.set("checkedWidthStatistics",!1),c.removeClass("checkbox-checked")):(this.model.set("checkedWidthStatistics",!0),c.addClass("checkbox-checked"))}})}),define("views/common/plugins/pubdaily/pubdaily-view",["talent","templates/common","tdialog","views/common/send-notice/send-notice-component","TitaWidget"],function(a,b,c,d,e){return a.CompositeView.extend({defaults:{inputDefatutValue:"",shape:"defaults",dialogTilte:"工作日报",autoSubShow:!1,report_type:8,dailyType:1},template:b["common/pubdaily/pubdaily"],className:"tt_daily_pub_view",ui:{pubDailyArea:"div[data-name=pub-daily-form]",buttonGenerate:"button[data-name=generate]",buttonClosed:"span[data-name=closed]",buttonAutoSend:'button[data-name="auto-send"]'},templateHelpers:function(){return this.settings},modelEvents:{},events:function(){var a={};return a["click "+this.ui.buttonGenerate]="_clickButtonGenHandler",a["click "+this.ui.buttonClosed]="_closedHandler",a["click "+this.ui.buttonAutoSend]="_clickButtonAutoSend",a},initialize:function(b){var c=this;this.options=b||{},this.settings=a._.extend({},this.defaults,this.options),this.userInfo=a.Context.getUserInfo(),this.i18n=a.Context.getI18n(),this.model.set("generateType",[1,2]),"dialog"==this.settings.shape&&(a.$(document).off("click.Pubdaily-View"),a.$(document).on("click.Pubdaily-View",function(){c.close()}),this.$el.on("click",function(a){a.stopPropagation()}))},onClose:function(){"dialog"==this.settings.shape&&a.$(document).off("click.Pubdaily-View")},onShow:function(){var b=(this._rendBlogView(),this);"dialog"==b.settings.shape?(a.$(b.ui.pubDailyArea).append(b.mBlogView.render().$el),b.$el.addClass("tt_dialog_daily_pub")):a.$(b.ui.pubDailyArea).append(b.mBlogView.render().$el)},_clickButtonAutoSend:function(b){{var c=this,c=this;new a.$.Deferred}a.app.request("UserSubordinate:getDirectSuperior").done(function(e){var f=a._.pluck(e,"parentUser");c.superiorUser=a._.filter(f,function(b){return b&&b.userId?b.userId!=a.Context.getUserInfo().Id:void 0});var g=a.$(b.currentTarget);c.sendNoticeComponent&&c.sendNoticeComponent.hideDialog();var h="发送邮件",i=c.model.get("date"),j=c.model.get("generateType");a.app.request("Daily:getAutoDaily",{types:j.join(","),date:i,report_type:c.settings.report_type,plan_table_id:c.model.get("plan_table_id")}).done(function(b){return b?(c.sendNoticeComponent&&c.sendNoticeComponent.close(),c.sendNoticeComponent=new d({collection:new a.Collection(c.superiorUser),mailContent:b,isShowWithStatistics:!1,title:h,isShowSystemNotice:!1,autoSubShow:c.settings.autoSubShow}),c.sendNoticeComponent.showDialog(g,{title:h}),void c.listenTo(c.sendNoticeComponent,"submit",function(b){var d=c.settings.dailyType;return 1==b.selectUsers.length&&b.selectUsers[0]==c.userInfo.Id||0==b.selectUsers.length?void c._tipDialog(g,"通知对象不能为空"):void a.app.request("PlanCommmon:postSendNotice",{UserIds:b.selectUsers.join(","),EmailContent:1==b.checkedSendMail?b.mailContent:"",Date:c.model.get("date"),MessageContent:"",MessageType:1==d?15:18,PlanTableId:this.model.get("plan_table_id")}).done(function(){c._tipDialog(g,"发送邮件成功","success")}).fail(function(a){c._tipDialog(g,a)})})):void c._tipDialog(g,"您还没有工作汇总，工时汇总")})})},setPosition:function(a){var b=a.offset(),c=a.outerWidth(),d=(a.outerHeight(),this.$el.outerWidth());this.$el.css({position:"absolute",left:b.left-d+c,top:b.top})},_clickButtonGenHandler:function(b){var c=a.$(b.currentTarget),d=this.model.get("generateType");d.length&&this._requestAutoDialy(c)},_closedHandler:function(){this.close()},_rendBlogView:function(){var b={publicOptions:{name:"公开",des:"所有人可见"},privateOptions:{name:"私密",des:"仅我的上级可见"},departmentOptions:{name:"部门可见",des:"仅我的部门可见"}},c=this,d=a.Context.getGlobal("tenantBehavior").TaskPushlishPrivateType||3,f="";f=1==d?"公开":2==d?"私密":"部门可见";var g=this.settings.dailyType,h=this.model.get(1==g?"date":"plan_table_id");this.mBlogView=new e.PublistMblogView({id:"Daily"+h,type:"feed",maxlength:"4000",isLimit:!0,defaultValue:this.settings.inputDefatutValue,value:"",submitText:"发布",shape:"default",defaultHide:!1,inFocus:!0,isShowAtAll:!1,atAllText:"所有同事",atAllValue:"@[所有同事:all_members] ",atAllTipText:"所有同事将收到本条消息",privateDropDownOptions:b,isShowAt:!0,atText:"同事",atTipText:"想确保谁看到就@这个成员",isShowAttachment:!0,isShowEmotion:!1,isShowRange:!0,privateText:f,privateValue:d,isShowRangeDropDown:!0,isShowSendSms:!1,submitRequest:function(b,d){var e=new Talent.$.Deferred;return a.app.request("Daily:planDialyAdd",{content:d.context,visibility:d.visibility||1,fileUrls:d.files.join(","),objId:d.privateObjId,objType:d.privateObjType,dateTime:c.settings.model.get("date"),reportType:c.settings.report_type,planTableId:c.settings.model.get("plan_table_id"),otherDocuments:d.YFYDocuments}).done(function(a){c.trigger("submitSuccess",b,a),e.resolve(a)}).fail(function(a){e.reject(a)}),e}})},requestDailyData:function(b){var c=new a.$.Deferred;return a.app.request("Daily:postAddDailyData",{content:b.content,fileUrls:b.FileUrls,dateTime:self.routerData.date,visibility:b.visibility||1,objId:b.ObjId,objType:b.ObjType}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},_requestAutoDialyContent:function(){},_requestAutoDialy:function(b){var c=this.model.get("date"),d=this,e=this.model.get("generateType");a.app.request("Daily:getAutoDaily",{types:e.join(","),date:c,report_type:d.settings.report_type,plan_table_id:d.model.get("plan_table_id")}).done(function(a){if(!a)return void d._tipDialog(b,"您还没有工作汇总，工时汇总");var c=d.mBlogView.ui.input;c.val(a).trigger("keyup").autosize(),d._cursorMoveEnd(c)})},_cursorMoveEnd:function(a){var b=$(a).val().length,c=$(a)[0];if($.browser.msie){var d=c.createTextRange();d.moveStart("character",b),d.collapse(!0),d.select()}else c.setSelectionRange(b,b),c.focus()},_tipDialog:function(a,b,d){this.tipDialog=new c({type:"tipsy",sure:!1,cancel:!1}),$("body").append(this.tipDialog.render().$el),this.tipDialog.show(a,b,{pos:"topRight",className:d||"warn",arrow:!1,autoHide:!0})}})}),define("views/common/empty-view",["talent","templates/common"],function(a,b){return a.ItemView.extend({defaults:{emptyContext:""},template:b["common/empty"],className:"tt_common_emptyinit",initialize:function(a){this.settings=Talent._.extend({},this.defaults,a)},templateHelpers:function(){var a=this.settings.emptyContext?this.settings.emptyContext:this.model.get("emptyContext"),b=0;return a&&(b=a.replace(/<[^>].*?>/g,"").replace(/[&nbsp;]/g,"").length),{emptyContext:a,className:b>24?"small_content_emptyinit":"content_emptyinit"}}})}),define("views/common/share-range/share-range-view",["talent","templates/common","tdialog","UserSelector","collections/smember-group-collection","$.tipsy"],function(a,b,c,d,e){var f=a.ItemView.extend({tagName:"li",className:"item_sr",template:b["common/share-range/share-range-item"],onRender:function(){var a=this;1==this.model.get("Type")&&this.$el.addClass("disable"),this.$el.tipsy({gravity:"s",title:function(){var b=a.$el.hasClass("disable")?"":"删除：";return b+a.model.get("User").Name}})}}),g=a.ItemView.extend({template:a._.template("<%= emptyText%>"),defaults:{},tagName:"li",className:"empty_sr",templateHelpers:function(){return this.settings},initialize:function(){this.settings=a._.extend({},this.defaults,this.options)}});return a.CompositeView.extend({className:"tt_sharerange",defaults:{deleteTip:"确定把ta共享里删除",addBtnTips:"添加共享人，将本月或本周计划共享给ta",title:"共享给谁？",isEdit:!1,emptyText:"暂无共享者",userSelectOptions:{viewType:"single",input:!0,stringLen:{Name:34,Email:30,DepartmentName:30},bias:{left:30,top:-302},muti:!0}},template:b["common/share-range/share-range"],itemView:f,itemViewContainer:"ul",ui:{add:"a[data-name=add]","delete":"span[data-name=delete]"},events:{"mouseenter li":"_liOverHandler","mouseleave li":"_liOutHandler","click span[data-name=delete]":"_deleteShareItem"},modelEvents:{"change:isEdit":"render"},templateHelpers:function(){return this.settings},onRender:function(){var a=this;if(!this.collection.length&&!this.model.get("isEdit")){var b=new g({emptyText:this.settings.emptyText});this.$el.find("ul").html(b.render().$el)}this._addShareUser(),this.ui.add.tipsy({gravity:"s",title:function(){return a.settings.addBtnTips}})},initialize:function(){this.settings=a.$.extend({},this.defaults,this.options),this.settings.userSelectOptions=a._.extend({},this.defaults.userSelectOptions,this.options.userSelectOptions),this.model.set(this.settings)},appendHtml:function(a,b){this.model.get("isEdit")?a.$el.find("li:last").before(b.el):(b.$el.addClass("disable"),b.$el.find(".del_sr").remove(),a.$el.find("ul").append(b.el))},_addShareUser:function(){var b=this,c=this.ui.add;this.memberSmemberView=new d({collection:new e}),this.memberSmemberView.addNode(c,this.settings.userSelectOptions),c.on("submit",function(d,e){var f,g=[];f=e.data?e.data:[e],a._.each(f,function(a){g.push("department"==a.type?{Id:a.id,Name:a.name,Email:a.name+":"+a.id+":dep_members"}:{Id:a.Id,Name:a.Name,Email:a.Email})}),b.trigger("add",c,g)})},_liOverHandler:function(b){var c=a.$(b.currentTarget);c.find(".del_sr").show()},_liOutHandler:function(b){var c=a.$(b.currentTarget);c.find(".del_sr").hide()},_deleteShareItem:function(b){var c=a.$(b.currentTarget),d=c.attr("Id");a.$(".tipsy").remove(),this._deleteDialog(c,this.settings.deleteTip,d)},_deleteDialog:function(a,b,d){var e=this;this.delDialog=new c({type:"tipsy",sure:function(){e.trigger("delete",a,d),e.delDialog.remove()},cancel:!0}),$("body").append(this.delDialog.render().$el),this.delDialog.show(a,b,{pos:"top",className:"ask",arrow:!1})},onClose:function(){this.delDialog&&this.delDialog.close()}})}),define("views/daily/daily-completion-view",["talent","templates/daily","views/daily/daily-today-submit-situation-view","views/daily/daily-group-member-today-submit-situation-view","views/common/send-notice/send-notice-component","views/common/plugins/pubdaily/pubdaily-view","views/common/empty-view","views/common/share-range/share-range-view","tdialog","TitaWidget","moment","momentZH"],function(a,b,c,d,e,f,g,h,i,j,k){return a.Layout.extend({template:b["daily/daily-completion"],groupTemplate:b["daily/daily-group-today-submit-situation"],regions:{todaySubmitSituation:"div[data-name=today－submit-situation]",date:"div[data-name=date]",groupMember:"div[data-name=group-member]",feedList:"div[data-name=feed-list]",share:"div[data-name=share]",pubDaily:"div[data-name=pub-daily]"},ui:{todaySubmitSituation:"div[data-name=today－submit-situation]",sendMsg:"a[data-name=send-message]",pubDaily:"div[data-name=pub-daily]",editPubDialy:"button[data-name=edit-pub-daily]",dailyType:'[data-name="daily-tab"] li'},templateHelpers:function(){var a=this.model.get("routerData"),b=a.dailyType,c=["日报","周报","月报"];return{dailyName:c[b-1]}},modelEvents:{change:"render"},events:function(){var a={};return a["click "+this.ui.sendMsg]="_sendMsgHandler",a["click "+this.ui.editPubDialy]="_editPubDailygHandler",a["click "+this.ui.dailyType]="_changeDailyType",a},initialize:function(){void 0==this.model.get("is_have_subordinates")&&this.model.set({is_have_subordinates:!1}),this.userInfo=a.Context.getUserInfo(),this.i18n=a.Context.getI18n(),this.routerData=this.model.get("routerData"),this.dailyTodaySubmitSituationView=new c({model:new a.Model({dailyType:this.routerData.dailyType})}),this.shareRangeView=new h,this.listenTo(this.dailyTodaySubmitSituationView,"edit-evaluation",function(a){this.trigger("edit-daily",a||this.routerData.daily_id)},this)},_changeDailyType:function(b){var c=$(b.currentTarget),d=c.attr("data-type");this.ui.dailyType.removeClass("active"),c.addClass("active"),this.trigger("typeChange",d),a.Context.changeHash({dailyType:d})},onRender:function(){var b=this.model.get("is_have_subordinates"),c=this.model.get("routerData"),d=Boolean(!b&&"group"==c.type),e=this.model.get("set_enable");e.write_daily&&this._getSubordinateData(),this.sendNoticeComponent&&this.sendNoticeComponent.hideDialog();var f=this.model.get("user_daily");if(d){var g=a.$(".date_dt");return void(g&&g.length&&g.empty())}if("personal"==this.routerData.type)this.dailyTodaySubmitSituationView.model.set(f),this.dailyTodaySubmitSituationView.model.set("routerData",this.routerData),this.todaySubmitSituation.show(this.dailyTodaySubmitSituationView),this.routerData.isMySelf&&this._renderPubblogView(),this._getDialyShareData();else{var h=this.model.get("submit_statistics");if(h.dailyType=this.routerData.dailyType,!h)return void this._rendEmptyView();var i=this;require(["highCharts"],function(){i._renderGourpStatistical(h)}),this._renderGroupMemberStatistical()}this._rendFeedListView()},onClose:function(){this.sendNoticeComponent&&this.sendNoticeComponent.hideDialog()},_editPubDailygHandler:function(b){var c=a.$(b.currentTarget),d=c.attr("id"),e=decodeURIComponent(location.hash);e.indexOf("?")>0?e.indexOf("daily_id")>0?e=e.replace(/daily_id=[\d+_\d+]+/,"daily_id="+d):e+="&daily_id="+d:e+="?daily_id="+d,this.routerData.daily_id=d,a.app.execute("history:navigate",e,!1),this.trigger("edit-daily",d)},_renderGourpStatistical:function(a){this.ui.todaySubmitSituation.html(this.groupTemplate(a));var b=a.total;this.ui.todaySubmitSituation.find("div[data-name=group-chart]").highcharts({chart:{type:"bar",height:150,width:500},title:{text:""},xAxis:{categories:["已提交","未提交"],title:{text:null},labels:{align:"right",style:{color:"#555"}},lineColor:"#697791",gridZIndex:2},yAxis:{title:{text:null},minTickInterval:1,max:b},tooltip:{formatter:function(){var a=Math.round(this.y/b*100)+"%";return this.x+"："+this.y+"份 &nbsp;&nbsp;占"+a},useHTML:!0},plotOptions:{bar:{dataLabels:{enabled:!0,formatter:function(){var a=Math.round(this.y/b*100)+"%";return a}}}},legend:{enabled:!1,layout:"vertical",align:"right",verticalAlign:"top",x:-40,y:10,floating:!0,borderWidth:1,backgroundColor:"#FFFFFF",shadow:!0},credits:{enabled:!1},series:[{data:[{color:"#18cfdd",y:a.submitted},{color:"#eb6100",y:a.no_submitted}]}]})},_renderGroupMemberStatistical:function(){var b=this.model.get("team_daily");this.dailyGroupMemberTodaySubmitSituationView=new d({collection:new a.Collection(b),model:new a.Model({dailyType:this.routerData.dailyType})}),this.listenTo(this.dailyGroupMemberTodaySubmitSituationView,"remind",function(a,b){var c=b.attr("id");this._sendMsgHandler(a,c)},this),this.listenTo(this.dailyGroupMemberTodaySubmitSituationView,"edit-evaluation",function(a){this._editPubDailygHandler(a)},this),this.groupMember.show(this.dailyGroupMemberTodaySubmitSituationView)},_getSubordinateData:function(){var b=this,c=new a.$.Deferred;return a.app.request("Bench:getModuleData",{channel_type:2,view_name:"Team"}).done(function(d){var e=a._.pluck(d.members,"user");e=a._.filter(e,function(a){return a.userId!=b.userInfo.Id}),b.subordinateData=e,c.resolve(e)}),c},_sendMsgHandler:function(b,c){var d=a.$(b.currentTarget),e=this;a.app.request("Daily:getMySubmitDailySetting",{dailyType:this.routerData.dailyType}).done(function(a){c?e._renderNotice(d,a,c):e._renderNotice(d,a)})},_renderNotice:function(b,c,d){var f=this,g=this.i18n.plan_1,h=this.subordinateData,i=1==c.PeriodType?"今天":"明天",j=this.routerData,l=j.dailyType,m=["日报","周报","月报"],n=m[l-1],o=["一","二","三","四","五","六","日"],p=c.SetTime,q=c.Date>7?c.Date:c.Date-1,r=this.model.get("is_now_report_date"),s=k(new Date(this.model.get("plan_table_date"))),t=s.year(),u=s.month()+1,v="请在今天"+p+" 前及时交付"+j.date+"的日报，内容包括：\n1.总结今天完成了哪些"+g+"，还有哪些"+g+"没有完成，原因是什么，预计什么时间能做完\n2.今天要完成哪些事情\n请同步更新"+g+"表中的状态。\n";if(r&&(v="请在"+i+p+"前及时交付今天的日报，内容包括：\n1.总结今天完成了哪些"+g+"，还有哪些"+g+"没有完成，原因是什么，预计什么时间能做完\n2.明天要完成哪些事情\n请同步更新"+g+"表中的状态。超过"+c.SetTime+"未提交日报的，都算迟交。\n"),2==l&&(v="请及时交付"+t+"年"+u+"月第"+s.date()+"周周报，内容包括：\n1.总结本周完成了哪些"+g+"，还有哪些"+g+"没有完成，原因是什么，预计什么时间能完成 \n2.下周的计划和要完成哪些事情\n请同步更新"+g+"表中的状态。",r&&(v="请在本周"+o[q]+p+"前及时交付本周周报，内容包括：\n1.总结本周完成了哪些"+g+"，还有哪些"+g+"没有完成，原因是什么，预计什么时间能完成 \n2.下周的计划和要完成哪些事情\n请同步更新"+g+"表中的状态。超过周"+o[q]+p+"未提交周报的，都算迟交。")),3==l&&(v="请及时交付"+t+"年"+u+"月月报，内容包括：\n1.总结本月完成了哪些"+g+"，还有哪些"+g+"没有完成，原因是什么，预计什么时间能完成 \n2.下月的计划和要完成哪些事情\n请同步更新"+g+"表中的状态。",r&&(v="请在本月"+q+"号"+p+"前及时交付本月月报，内容包括：\n1.总结本月完成了哪些"+g+"，还有哪些"+g+"没有完成，原因是什么，预计什么时间能完成 \n2.下月的计划和要完成哪些事情\n请同步更新"+g+"表中的状态。超过本月"+q+"号"+p+"未提交月报的，都算迟交。")),"personal"==this.routerData.type&&this.routerData.to_user_id){var w=parseInt(this.routerData.to_user_id);h=a._.where(h,{userId:w})}if(d&&(h=a._.where(h,{userId:parseInt(d)})),!h)return void alert("获取不到下属信息");var x="提醒大家写"+n;1==h.length&&(x="提醒ta写"+n),this.sendNoticeComponent=new e({collection:new a.Collection(h),mailContent:v,isShowWithStatistics:!0,title:x});var y=[13,16,17],z=y[l-1];this.listenTo(this.sendNoticeComponent,"submit",function(c){a._.pluck(c.selectUsers,"Id");a.app.request("PlanCommmon:postSendNotice",{UserIds:c.selectUsers.join(","),MessageContent:"",EmailContent:1==c.checkedSendMail?c.mailContent:"",GroupId:this.routerData.group_id,TagId:this.routerData.tag_id,PlanTableId:f.model.get("plan_table_id"),MessageType:z,Date:this.routerData.date,IsStatistics:1==c.checkedWidthStatistics?1:0}).done(function(){f._tipDialog(b,"已发送通知","success")})});var A="";A="send-item-message"==$(b).attr("data-name")?"bottomCenter":"bottom",this.sendNoticeComponent.showDialog(b,{title:x,pos:A},this.$el)},_renderPubblogView:function(){var b=this.model.get("newFeeds");if(b)return void this._donePubDaily();var c=this,d=this.routerData.date;d=d.split("/"),d=d[0]+"年"+d[1]+"月"+d[2]+"日";var e=this.routerData.dailyType,g=["日报","周报","月报"],h=[d+"日报，您可以汇报：1) 今日工作完成情况； 2）工作中遇到的问题； 3）有什么建议或下一步的工作安排","本周的工作总结，您可以撰写：1) 本周工作完成情况； 2）工作中遇到的问题； 3）有什么建议或下一步的工作安排。","本月的工作总结，您可以撰写：1) 本月工作完成情况； 2）工作中遇到的问题； 3）有什么建议或下一步的工作安排"],i=g[e-1],j=[8,26,27],k=j[e-1],l=h[e-1],m=this.pubdailyView=new f({inputDefatutValue:l,model:new a.Model({date:this.model.get("plan_table_date"),plan_table_id:this.model.get("plan_table_id")}),routerData:this.routerData,autoSubShow:!0,dialogTilte:"工作"+i,report_type:k,dailyType:e});this.listenTo(this.pubdailyView,"submitSuccess",function(a,b){c.model.set("newFeeds",[b]),c._rendFeedListView(),c._donePubDaily()}),this.pubDaily.show(m)},_donePubDaily:function(){var b=this.model.get("newFeeds"),c=this.model.get("user_daily").evaluation;if(b&&b.length){var d=b[0].dailyId,e=this.routerData.dailyType,f=["日报","周报","月报"],g=f[e-1],h=['<div class="tt_daily_pub_view">','<div class="action_dp">','<div class="left_dp">已写'+g+"</div>",'<div class="right_dp">','<button class="btn" id="'+d+'"  data-name="edit-pub-daily">修改</button>',"</div>","</div>","</div>"];(1!=this.routerData.isMySelf||c)&&(h[3]="",h[4]="",h[5]=""),a.$(this.ui.pubDaily).html(h.join(""))}},_rendFeedListView:function(){var b=this.model.get("newFeeds"),c=this.routerData.dailyType,d=["日报","周报","月报"],e=d[c-1],f=!1;if("personal"==this.routerData.type){var h="请在上面发布您的"+e+"内容";this.routerData.isMySelf||(f=!0,h="ta还没有发布自己的"+e)}else f=!0,h="您的团队还没有发布自己的"+e;if(!b){var i=new g({emptyContext:h});return void this.feedList.show(i)}var b={IsEnd:!0,LastId:"",feeds:b};this.feedCompositeView=new j.FeedListView({actionMore:{detail:!1,"delete":!0,setTop:!0},actionMore:{detail:!1,"delete":!0,setTop:!1},model:new a.Model(b)}),this.feedList.show(this.feedCompositeView)},_getDialyShareData:function(){var b=this;a.app.request("Daily:getDailyShareUser",{to_user_id:this.routerData.to_user_id}).done(function(a){a&&a.length&&(b.shareRangeView.model.set("isEidt",!1),b.shareRangeView.collection.reset(a),b.share&&b.share.show(b.shareRangeView))})},_rendEmptyView:function(){var b=a.Context.getStaticUrl("images/plan/daily_init.jpg"),c='<img src="'+b+'">',d=a.Context.getGlobal("tenant_function");if(d.IsUseSetOrg)var e='如果您设置过团队成员，将呈现如下统计图表<br/>现在就去&nbsp;&nbsp;<a href="#set?page_id=plan">设置团队成员</a><br/><br/>'+c;else var e="如果您设置过团队成员，将呈现如下统计图表<br/>您还没设置团队成员，请联系超管设置<br/><br/>"+c;var f=new g({emptyContext:e});this.feedList.show(f)},_tipDialog:function(a,b,c){this.tipDialog=new i({type:"tipsy",sure:!1,cancel:!1}),$("body").append(this.tipDialog.render().$el),this.tipDialog.show(a,b,{pos:"topCenter",className:c||"warn",arrow:!1,autoHide:!0})}})}),define("views/daily/dialy-sidebar-view",["talent","templates/daily"],function(a,b){return a.Layout.extend({template:b["daily/daily-sidebar"],ui:{activeGroup:"a[data-name=change-group]",groupList:"ul[data-name=group-list]"},regions:{userInfo:"div[data-name=user-info]"},modelEvents:{"change:navData":"render"},events:function(){var a={};return a["click "+this.ui.activeGroup]="_clickChangeGroupHandler",a},templateHelpers:function(){var b=a.Context.customModuleIsShow();return{i18n:this.i18n,isShowPlan:b.plan}},initialize:function(){this.i18n=a.Context.getI18n()},onRender:function(){var b=this;a.$(document).on("click.Daily-Sidebar-View",function(){b.ui.groupList.hide()})},onClose:function(){a.$(document).off("click.Daily-Sidebar-View")},_clickChangeGroupHandler:function(a){a.stopPropagation();var b=this.ui.groupList;b.is(":hidden")?(b.show(),b.css({position:"absolute",top:30,right:-4,"z-index":"999"})):b.hide()}})}),!function(a){function b(){return new Date(Date.UTC.apply(Date,arguments))}var c=function(b,c){var f=this;this.element=a(b),this.language=c.language||this.element.data("date-language")||"en",this.language=this.language in d?this.language:"en",this.isRTL=d[this.language].rtl||!1,this.formatType=c.formatType||this.element.data("format-type")||"standard",this.format=e.parseFormat(c.format||this.element.data("date-format")||d[this.language].format||e.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar").parent():!1,this.componentReset=this.element.is(".date")?this.element.find(".add-on .icon-remove").parent():!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.linkField=c.linkField||this.element.data("link-field")||!1,this.linkFormat=e.parseFormat(c.linkFormat||this.element.data("link-format")||e.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=c.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=c.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=c.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=c.initialDate||new Date,this._attachEvents(),this.formatViewType="datetime","formatViewType"in c?this.formatViewType=c.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in c?this.minView=c.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=e.convertViewMode(this.minView),this.maxView=e.modes.length-1,"maxView"in c?this.maxView=c.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=e.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,"wheelViewModeNavigation"in c?this.wheelViewModeNavigation=c.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,"wheelViewModeNavigationInverseDirection"in c?this.wheelViewModeNavigationInverseDirection=c.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,"wheelViewModeNavigationDelay"in c?this.wheelViewModeNavigationDelay=c.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,"startView"in c?this.startViewMode=c.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=e.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in c?this.viewSelect=c.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=e.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in c?this.forceParse=c.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse")),this.picker=a(e.template).appendTo(this.isInline?this.element:"body").on({click:a.proxy(this.click,this),mousedown:a.proxy(this.mousedown,this)}),this.wheelViewModeNavigation&&(a.fn.mousewheel?this.picker.on({mousewheel:a.proxy(this.mousewheel,this)}):console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")),this.picker.addClass(this.isInline?"datetimepicker-inline":"datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu"),this.isRTL&&(this.picker.addClass("datetimepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),a(document).on("mousedown",function(b){0===a(b.target).closest(".datetimepicker").length&&f.hide()}),this.autoclose=!1,"autoclose"in c?this.autoclose=c.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in c?this.keyboardNavigation=c.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=c.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=c.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(c.weekStart||this.element.data("date-weekstart")||d[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-1/0,this.endDate=1/0,this.daysOfWeekDisabled=[],this.setStartDate(c.startDate||this.element.data("date-startdate")),this.setEndDate(c.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(c.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};c.prototype={constructor:c,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:a.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]];for(var b,c,d=0;d<this._events.length;d++)b=this._events[d][0],c=this._events[d][1],b.on(c)},_detachEvents:function(){for(var a,b,c=0;c<this._events.length;c++)a=this._events[c][0],b=this._events[c][1],a.off(b);this._events=[]},show:function(b){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),a(window).on("resize",a.proxy(this.place,this)),b&&(b.stopPropagation(),b.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(){this.isVisible&&(this.isInline||(this.picker.hide(),a(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||a(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.picker,delete this.element.data().datetimepicker},getDate:function(){var a=this.getUTCDate();return new Date(a.getTime()+6e4*a.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(a){this.setUTCDate(new Date(a.getTime()-6e4*a.getTimezoneOffset()))},setUTCDate:function(a){a>=this.startDate&&a<=this.endDate?(this.date=a,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:a,startDate:this.startDate,endDate:this.endDate})},setFormat:function(a){this.format=e.parseFormat(a,this.formatType);var b;this.isInput?b=this.element:this.component&&(b=this.element.find("input")),b&&b.val()&&this.setValue()},setValue:function(){var b=this.getFormattedDate();this.isInput?this.element.val(b):(this.component&&this.element.find("input").val(b),this.element.data("date",b)),this.linkField&&a("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(a){return void 0==a&&(a=this.format),e.formatDate(this.date,a,this.language,this.formatType)},setStartDate:function(a){this.startDate=a||-1/0,this.startDate!==-1/0&&(this.startDate=e.parseDate(this.startDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setEndDate:function(a){this.endDate=a||1/0,1/0!==this.endDate&&(this.endDate=e.parseDate(this.endDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()
},setDaysOfWeekDisabled:function(b){this.daysOfWeekDisabled=b||[],a.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=a.map(this.daysOfWeekDisabled,function(a){return parseInt(a,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var b,c,d,e=parseInt(this.element.parents().filter(function(){return"auto"!=a(this).css("z-index")}).first().css("z-index"))+10;this.component?(b=this.component.offset(),d=b.left,("bottom-left"==this.pickerPosition||"top-left"==this.pickerPosition)&&(d+=this.component.outerWidth()-this.picker.outerWidth())):(b=this.element.offset(),d=b.left),c="top-left"==this.pickerPosition||"top-right"==this.pickerPosition?b.top-this.picker.outerHeight():b.top+this.height,this.picker.css({top:c,left:d,zIndex:e})}},update:function(){var a,b=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(a=arguments[0],b=!0):a=this.element.data("date")||(this.isInput?this.element.val():this.element.find("input").val())||this.initialDate,a||(a=new Date,b=!1),this.date=e.parseDate(a,this.format,this.language,this.formatType),b&&this.setValue(),this.viewDate=new Date(this.date<this.startDate?this.startDate:this.date>this.endDate?this.endDate:this.date),this.fill()},fillDow:function(){for(var a=this.weekStart,b="<tr>";a<this.weekStart+7;)b+='<th class="dow">'+d[this.language].daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datetimepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+d[this.language].monthsShort[b++]+"</span>";this.picker.find(".datetimepicker-months td").html(a)},fill:function(){if(null!=this.date&&null!=this.viewDate){var c=new Date(this.viewDate),f=c.getUTCFullYear(),g=c.getUTCMonth(),h=c.getUTCDate(),i=c.getUTCHours(),j=c.getUTCMinutes(),k=this.startDate!==-1/0?this.startDate.getUTCFullYear():-1/0,l=this.startDate!==-1/0?this.startDate.getUTCMonth():-1/0,m=1/0!==this.endDate?this.endDate.getUTCFullYear():1/0,n=1/0!==this.endDate?this.endDate.getUTCMonth():1/0,o=new b(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),p=new Date;if(this.picker.find(".datetimepicker-days thead th:eq(1)").text(d[this.language].months[g]+" "+f),"zh-CN"==this.language&&this.picker.find(".datetimepicker-days thead th:eq(1)").text(f+"年"+d[this.language].months[g]),"time"==this.formatViewType){var q=i%12?i%12:12,r=(10>q?"0":"")+q,s=(10>j?"0":"")+j,t=d[this.language].meridiem[12>i?0:1];this.picker.find(".datetimepicker-hours thead th:eq(1)").text(r+":"+s+" "+t.toUpperCase()),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(r+":"+s+" "+t.toUpperCase())}else this.picker.find(".datetimepicker-hours thead th:eq(1)").text(h+" "+d[this.language].months[g]+" "+f),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(h+" "+d[this.language].months[g]+" "+f),"zh-CN"==this.language&&(this.picker.find(".datetimepicker-hours thead th:eq(1)").text(f+"年"+d[this.language].months[g]+h+"日"),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(f+"年"+d[this.language].months[g]+h+"日"));this.picker.find("tfoot th.today").text(d[this.language].today).toggle(this.todayBtn!==!1),this.updateNavArrows(),this.fillMonths();var u=b(f,g-1,28,0,0,0,0),v=e.getDaysInMonth(u.getUTCFullYear(),u.getUTCMonth());u.setUTCDate(v),u.setUTCDate(v-(u.getUTCDay()-this.weekStart+7)%7);var w=new Date(u);w.setUTCDate(w.getUTCDate()+42),w=w.valueOf();for(var x,y=[];u.valueOf()<w;)u.getUTCDay()==this.weekStart&&y.push("<tr>"),x="",u.getUTCFullYear()<f||u.getUTCFullYear()==f&&u.getUTCMonth()<g?x+=" old":(u.getUTCFullYear()>f||u.getUTCFullYear()==f&&u.getUTCMonth()>g)&&(x+=" new"),this.todayHighlight&&u.getUTCFullYear()==p.getFullYear()&&u.getUTCMonth()==p.getMonth()&&u.getUTCDate()==p.getDate()&&(x+=" today"),u.valueOf()==o&&(x+=" active"),(u.valueOf()+864e5<=this.startDate||u.valueOf()>this.endDate||-1!==a.inArray(u.getUTCDay(),this.daysOfWeekDisabled))&&(x+=" disabled"),y.push('<td class="day'+x+'">'+u.getUTCDate()+"</td>"),u.getUTCDay()==this.weekEnd&&y.push("</tr>"),u.setUTCDate(u.getUTCDate()+1);this.picker.find(".datetimepicker-days tbody").empty().append(y.join("")),y=[];for(var z="",A="",B="",C=0;24>C;C++){var D=b(f,g,h,C);x="",D.valueOf()+36e5<=this.startDate||D.valueOf()>this.endDate?x+=" disabled":i==C&&(x+=" active"),this.showMeridian&&2==d[this.language].meridiem.length?(A=12>C?d[this.language].meridiem[0]:d[this.language].meridiem[1],A!=B&&(""!=B&&y.push("</fieldset>"),y.push('<fieldset class="hour"><legend>'+A.toUpperCase()+"</legend>")),B=A,z=C%12?C%12:12,y.push('<span class="hour'+x+" hour_"+(12>C?"am":"pm")+'">'+z+"</span>"),23==C&&y.push("</fieldset>")):(z=C+":00",y.push('<span class="hour'+x+'">'+z+"</span>"))}this.picker.find(".datetimepicker-hours td").html(y.join("")),y=[],z="",A="",B="";for(var C=0;60>C;C+=this.minuteStep){var D=b(f,g,h,i,C,0);x="",D.valueOf()<this.startDate||D.valueOf()>this.endDate?x+=" disabled":Math.floor(j/this.minuteStep)==Math.floor(C/this.minuteStep)&&(x+=" active"),this.showMeridian&&2==d[this.language].meridiem.length?(A=12>i?d[this.language].meridiem[0]:d[this.language].meridiem[1],A!=B&&(""!=B&&y.push("</fieldset>"),y.push('<fieldset class="minute"><legend>'+A.toUpperCase()+"</legend>")),B=A,z=i%12?i%12:12,y.push('<span class="minute'+x+'">'+z+":"+(10>C?"0"+C:C)+"</span>"),59==C&&y.push("</fieldset>")):(z=C+":00",y.push('<span class="minute'+x+'">'+i+":"+(10>C?"0"+C:C)+"</span>"))}this.picker.find(".datetimepicker-minutes td").html(y.join(""));var E=this.date.getUTCFullYear(),F=this.picker.find(".datetimepicker-months").find("th:eq(1)").text(f).end().find("span").removeClass("active");E==f&&F.eq(this.date.getUTCMonth()).addClass("active"),(k>f||f>m)&&F.addClass("disabled"),f==k&&F.slice(0,l).addClass("disabled"),f==m&&F.slice(n+1).addClass("disabled"),y="",f=10*parseInt(f/10,10);var G=this.picker.find(".datetimepicker-years").find("th:eq(1)").text(f+"-"+(f+9)).end().find("td");f-=1;for(var C=-1;11>C;C++)y+='<span class="year'+(-1==C||10==C?" old":"")+(E==f?" active":"")+(k>f||f>m?" disabled":"")+'">'+f+"</span>",f+=1;G.html(y),this.place()}},updateNavArrows:function(){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth(),d=a.getUTCDate(),e=a.getUTCHours();switch(this.viewMode){case 0:this.picker.find(".prev").css(this.startDate!==-1/0&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()&&d<=this.startDate.getUTCDate()&&e<=this.startDate.getUTCHours()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.endDate&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()&&d>=this.endDate.getUTCDate()&&e>=this.endDate.getUTCHours()?{visibility:"hidden"}:{visibility:"visible"});break;case 1:this.picker.find(".prev").css(this.startDate!==-1/0&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()&&d<=this.startDate.getUTCDate()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.endDate&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()&&d>=this.endDate.getUTCDate()?{visibility:"hidden"}:{visibility:"visible"});break;case 2:this.picker.find(".prev").css(this.startDate!==-1/0&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.endDate&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"});break;case 3:case 4:this.picker.find(".prev").css(this.startDate!==-1/0&&b<=this.startDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.endDate&&b>=this.endDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"})}},mousewheel:function(b){if(b.preventDefault(),b.stopPropagation(),!this.wheelPause){this.wheelPause=!0;var c=b.originalEvent,d=c.wheelDelta,e=d>0?1:0===d?0:-1;this.wheelViewModeNavigationInverseDirection&&(e=-e),this.showMode(e),setTimeout(a.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)}},click:function(c){c.stopPropagation(),c.preventDefault();var d=a(c.target).closest("span, td, th, legend");if(1==d.length){if(d.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var f=e.modes[this.viewMode].navStep*("prev"==d[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,f);break;case 1:this.viewDate=this.moveDate(this.viewDate,f);break;case 2:this.viewDate=this.moveMonth(this.viewDate,f);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,f)}this.fill();break;case"today":var g=new Date;g=b(g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds(),0),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(g),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!d.is(".disabled")){var h=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),j=this.viewDate.getUTCDate(),k=this.viewDate.getUTCHours(),l=this.viewDate.getUTCMinutes(),m=this.viewDate.getUTCSeconds();if(d.is(".month")?(this.viewDate.setUTCDate(1),i=d.parent().find("span").index(d),j=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(i),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(b(h,i,j,k,l,m,0))):d.is(".year")?(this.viewDate.setUTCDate(1),h=parseInt(d.text(),10)||0,this.viewDate.setUTCFullYear(h),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(b(h,i,j,k,l,m,0))):d.is(".hour")?(k=parseInt(d.text(),10)||0,(d.hasClass("hour_am")||d.hasClass("hour_pm"))&&(12==k&&d.hasClass("hour_am")?k=0:12!=k&&d.hasClass("hour_pm")&&(k+=12)),this.viewDate.setUTCHours(k),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(b(h,i,j,k,l,m,0))):d.is(".minute")&&(l=parseInt(d.text().substr(d.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(l),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(b(h,i,j,k,l,m,0))),0!=this.viewMode){var n=this.viewMode;this.showMode(-1),this.fill(),n==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(d.is(".day")&&!d.is(".disabled")){var j=parseInt(d.text(),10)||1,h=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),k=this.viewDate.getUTCHours(),l=this.viewDate.getUTCMinutes(),m=this.viewDate.getUTCSeconds();d.is(".old")?0===i?(i=11,h-=1):i-=1:d.is(".new")&&(11==i?(i=0,h+=1):i+=1),this.viewDate.setUTCFullYear(h),this.viewDate.setUTCDate(j),this.viewDate.setUTCMonth(i),this.element.trigger({type:"changeDay",date:this.viewDate}),this.viewSelect>=2&&this._setDate(b(h,i,j,k,l,m,0))}var n=this.viewMode;this.showMode(-1),this.fill(),n==this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(a,b){b&&"date"!=b||(this.date=a),b&&"view"!=b||(this.viewDate=a),this.fill(),this.setValue();var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&(c.change(),this.autoclose&&(!b||"date"==b)),this.element.trigger({type:"changeDate",date:this.date})},moveMinute:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCMinutes(c.getUTCMinutes()+b*this.minuteStep),c},moveHour:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCHours(c.getUTCHours()+b),c},moveDate:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCDate(c.getUTCDate()+b),c},moveMonth:function(a,b){if(!b)return a;var c,d,e=new Date(a.valueOf()),f=e.getUTCDate(),g=e.getUTCMonth(),h=Math.abs(b);if(b=b>0?1:-1,1==h)d=-1==b?function(){return e.getUTCMonth()==g}:function(){return e.getUTCMonth()!=c},c=g+b,e.setUTCMonth(c),(0>c||c>11)&&(c=(c+12)%12);else{for(var i=0;h>i;i++)e=this.moveMonth(e,b);c=e.getUTCMonth(),e.setUTCDate(f),d=function(){return c!=e.getUTCMonth()}}for(;d();)e.setUTCDate(--f),e.setUTCMonth(c);return e},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.startDate&&a<=this.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))return void(27==a.keyCode&&this.show());var b,c,d,e=!1;switch(a.keyCode){case 27:this.hide(),a.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;b=37==a.keyCode?-1:1,viewMode=this.viewMode,a.ctrlKey?viewMode+=2:a.shiftKey&&(viewMode+=1),4==viewMode?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):3==viewMode?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):2==viewMode?(c=this.moveDate(this.date,b),d=this.moveDate(this.viewDate,b)):1==viewMode?(c=this.moveHour(this.date,b),d=this.moveHour(this.viewDate,b)):0==viewMode&&(c=this.moveMinute(this.date,b),d=this.moveMinute(this.viewDate,b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;b=38==a.keyCode?-1:1,viewMode=this.viewMode,a.ctrlKey?viewMode+=2:a.shiftKey&&(viewMode+=1),4==viewMode?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):3==viewMode?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):2==viewMode?(c=this.moveDate(this.date,7*b),d=this.moveDate(this.viewDate,7*b)):1==viewMode?this.showMeridian?(c=this.moveHour(this.date,6*b),d=this.moveHour(this.viewDate,6*b)):(c=this.moveHour(this.date,4*b),d=this.moveHour(this.viewDate,4*b)):0==viewMode&&(c=this.moveMinute(this.date,4*b),d=this.moveMinute(this.viewDate,4*b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 13:if(0!=this.viewMode){var f=this.viewMode;this.showMode(-1),this.fill(),f==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();a.preventDefault();break;case 9:this.hide()}if(e){var g;this.isInput?g=this.element:this.component&&(g=this.element.find("input")),g&&g.change(),this.element.trigger({type:"changeDate",date:this.date})}},showMode:function(a){if(a){var b=Math.max(0,Math.min(e.modes.length-1,this.viewMode+a));b>=this.minView&&b<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:b}),this.viewMode=b)}this.picker.find(">div").hide().filter(".datetimepicker-"+e.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(){this._setDate(null,"date")}},a.fn.datetimepicker=function(b){var d=Array.apply(null,arguments);return d.shift(),this.each(function(){var e=a(this),f=e.data("datetimepicker"),g="object"==typeof b&&b;f||e.data("datetimepicker",f=new c(this,a.extend({},a.fn.datetimepicker.defaults,g))),"string"==typeof b&&"function"==typeof f[b]&&f[b].apply(f,d)})},a.fn.datetimepicker.defaults={},a.fn.datetimepicker.Constructor=c;var d=a.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today"}},e={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,e.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},getDefaultFormat:function(a,b){if("standard"==a)return"input"==b?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if("php"==a)return"input"==b?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(a){if("standard"==a)return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if("php"==a)return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(a,b){var c=a.replace(this.validParts(b),"\x00").split("\x00"),d=a.match(this.validParts(b));if(!c||!c.length||!d||0==d.length)throw new Error("Invalid date format.");return{separators:c,parts:d}},parseDate:function(e,f,g,h){if(e instanceof Date){var i=new Date(e.valueOf()-6e4*e.getTimezoneOffset());return i.setMilliseconds(0),i}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(e)&&(f=this.parseFormat("yyyy-mm-dd",h)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(e)&&(f=this.parseFormat("yyyy-mm-dd hh:ii",h)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(e)&&(f=this.parseFormat("yyyy-mm-dd hh:ii:ss",h)),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(e)){var j,k,l=/([-+]\d+)([dmwy])/,m=e.match(/([-+]\d+)([dmwy])/g);e=new Date;for(var n=0;n<m.length;n++)switch(j=l.exec(m[n]),k=parseInt(j[1]),j[2]){case"d":e.setUTCDate(e.getUTCDate()+k);break;case"m":e=c.prototype.moveMonth.call(c.prototype,e,k);break;case"w":e.setUTCDate(e.getUTCDate()+7*k);break;case"y":e=c.prototype.moveYear.call(c.prototype,e,k)}return b(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),0)}var o,p,j,m=e&&e.match(this.nonpunctuation)||[],e=new Date(0,0,0,0,0,0,0),q={},r=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P"],s={hh:function(a,b){return a.setUTCHours(b)},h:function(a,b){return a.setUTCHours(b)},HH:function(a,b){return a.setUTCHours(12==b?0:b)},H:function(a,b){return a.setUTCHours(12==b?0:b)},ii:function(a,b){return a.setUTCMinutes(b)},i:function(a,b){return a.setUTCMinutes(b)},ss:function(a,b){return a.setUTCSeconds(b)},s:function(a,b){return a.setUTCSeconds(b)},yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2e3+b)},m:function(a,b){for(b-=1;0>b;)b+=12;for(b%=12,a.setUTCMonth(b);a.getUTCMonth()!=b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)},p:function(a,b){return a.setUTCHours(1==b?a.getUTCHours()+12:a.getUTCHours())}};if(s.M=s.MM=s.mm=s.m,s.dd=s.d,s.P=s.p,e=b(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()),m.length==f.parts.length){for(var n=0,t=f.parts.length;t>n;n++){if(o=parseInt(m[n],10),j=f.parts[n],isNaN(o))switch(j){case"MM":p=a(d[g].months).filter(function(){var a=this.slice(0,m[n].length),b=m[n].slice(0,a.length);return a==b}),o=a.inArray(p[0],d[g].months)+1;break;case"M":p=a(d[g].monthsShort).filter(function(){var a=this.slice(0,m[n].length),b=m[n].slice(0,a.length);return a==b}),o=a.inArray(p[0],d[g].monthsShort)+1;break;case"p":case"P":o=a.inArray(m[n].toLowerCase(),d[g].meridiem)}q[j]=o}for(var u,n=0;n<r.length;n++)u=r[n],u in q&&!isNaN(q[u])&&s[u](e,q[u])}return e},formatDate:function(b,c,f,g){if(null==b)return"";var h;if("standard"==g)h={yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear(),m:b.getUTCMonth()+1,M:d[f].monthsShort[b.getUTCMonth()],MM:d[f].months[b.getUTCMonth()],d:b.getUTCDate(),D:d[f].daysShort[b.getUTCDay()],DD:d[f].days[b.getUTCDay()],p:2==d[f].meridiem.length?d[f].meridiem[b.getUTCHours()<12?0:1]:"",h:b.getUTCHours(),i:b.getUTCMinutes(),s:b.getUTCSeconds()},h.H=h.h%12==0?12:h.h%12,h.HH=(h.H<10?"0":"")+h.H,h.P=h.p.toUpperCase(),h.hh=(h.h<10?"0":"")+h.h,h.ii=(h.i<10?"0":"")+h.i,h.ss=(h.s<10?"0":"")+h.s,h.dd=(h.d<10?"0":"")+h.d,h.mm=(h.m<10?"0":"")+h.m;else{if("php"!=g)throw new Error("Invalid format type.");h={y:b.getUTCFullYear().toString().substring(2),Y:b.getUTCFullYear(),F:d[f].months[b.getUTCMonth()],M:d[f].monthsShort[b.getUTCMonth()],n:b.getUTCMonth()+1,t:e.getDaysInMonth(b.getUTCFullYear(),b.getUTCMonth()),j:b.getUTCDate(),l:d[f].days[b.getUTCDay()],D:d[f].daysShort[b.getUTCDay()],w:b.getUTCDay(),N:0==b.getUTCDay()?7:b.getUTCDay(),S:b.getUTCDate()%10<=d[f].suffix.length?d[f].suffix[b.getUTCDate()%10-1]:"",a:2==d[f].meridiem.length?d[f].meridiem[b.getUTCHours()<12?0:1]:"",g:b.getUTCHours()%12==0?12:b.getUTCHours()%12,G:b.getUTCHours(),i:b.getUTCMinutes(),s:b.getUTCSeconds()},h.m=(h.n<10?"0":"")+h.n,h.d=(h.j<10?"0":"")+h.j,h.A=h.a.toString().toUpperCase(),h.h=(h.g<10?"0":"")+h.g,h.H=(h.G<10?"0":"")+h.G,h.i=(h.i<10?"0":"")+h.i,h.s=(h.s<10?"0":"")+h.s}for(var b=[],i=a.extend([],c.separators),j=0,k=c.parts.length;k>j;j++)i.length&&b.push(i.shift()),b.push(h[c.parts[j]]);return b.join("")},convertViewMode:function(a){switch(a){case 4:case"decade":a=4;break;case 3:case"year":a=3;break;case 2:case"month":a=2;break;case 1:case"day":a=1;break;case 0:case"hour":a=0}return a},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};e.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+e.headTemplate+e.contTemplate+e.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+e.headTemplate+e.contTemplate+e.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+e.headTemplate+"<tbody></tbody>"+e.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+e.headTemplate+e.contTemplate+e.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+e.headTemplate+e.contTemplate+e.footTemplate+"</table></div></div>",a.fn.datetimepicker.DPGlobal=e,a.fn.datetimepicker.noConflict=function(){return a.fn.datetimepicker=old,this},a(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(b){var c=a(this);c.data("datetimepicker")||(b.preventDefault(),c.datetimepicker("show"))}),a(function(){a('[data-provide="datetimepicker-inline"]').datetimepicker()})}(window.jQuery),define("bootstrap-datetimepicker",function(){}),function(a){a.fn.datetimepicker.dates["zh-CN"]={days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["周日","周一","周二","周三","周四","周五","周六","周日"],daysMin:["日","一","二","三","四","五","六","日"],months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],today:"今日",suffix:[],meridiem:[]}}(jQuery),define("$.bootstrapDatetimepicker",["jquery","bootstrap-datetimepicker"],function(a){return function(){var b;return b||a.$.bootstrapDatetimepicker}}(this)),define("views/daily/highlight-date-view",["talent","templates/daily","moment","momentZH","$.bootstrapDatetimepicker"],function(a,b,c){var d=a.ItemView.extend({defaults:{year:"2013",month:"12",day:"1",maxDate:"2020/12/31",minDate:"2013/01/01",title:"团队月统计：",labels:["已交","未交","补交"]},template:b["daily/highlight-date"],ui:{datePicker:"div[data-name=date-picker]"},initialize:function(){this.settings=a._.extend({},this.defaults,this.options),this.model.set(this.settings),this.listenTo(this.options.collection,"reset",function(){this._addClassDom()},this)},onRender:function(){var a=this;this._timeBindPicker(),this._addClassDom(),this.$el.find(".datetimepicker-days").off("click"),this.$el.find(".datetimepicker-days").on("click",".prev",function(){setTimeout(function(){var b=a._getRegCurrentMonth();a.model.set({month:b.month,year:b.year},{silent:!0}),a.trigger("prev",a.model.toJSON())})}).on("click",".next",function(){setTimeout(function(){var b=a._getRegCurrentMonth();a.model.set({month:b.month,year:b.year},{silent:!0}),a.trigger("next",a.model.toJSON())})})},onShow:function(){this.ui.datePicker.trigger("click.daterangepicker")},_addClassDom:function(){var a,b=this.$el.find(".datetimepicker-days tbody td"),c=this.options.collection;b.removeClass("complete partcomplete incomplete"),$.each(b,function(d){var e={0:"",1:"complete",2:"partcomplete",3:"incomplete",4:"complete",5:"partcomplete",6:"incomplete"};if(d<c.length){var f=c.models[d],g=f.get("status");e[g]&&(b.eq(d).addClass(e[g]),0==d?(a=g,b.eq(d).addClass("startBorder")):g!=a&&(b.eq(d-1).addClass("endBorder"),b.eq(d).addClass("startBorder")))}})},_getRegCurrentMonth:function(){var a=this.$el.find(".datetimepicker-days .switch").text(),b=a.match(/\d+/g);return{year:b[0],month:b[1]<10?"0"+b[1]:b[1]}},_timeBindPicker:function(){var a=this,b=this.model.get("year")+"/"+this.model.get("month")+"/"+this.model.get("day");e=c(new Date(b));var d={dateFormat:"YYYY/MM/DD",startView:2,minView:2,maxView:2,todayHighlight:!1,keyboardNavigation:!0,autoclose:!0,language:"zh-CN"};if(this.settings.startDate){var e=this.settings.startDate;d.startDate=c(new Date(e)).format("YYYY-MM-DD")}if(this.settings.endDate){var f=this.settings.endDate;d.endDate=c(new Date(f)).format("YYYY-MM-DD")}this.ui.datePicker.datetimepicker(d),this.ui.datePicker.datetimepicker("setDate",new Date(b)),this.ui.datePicker.off("changeDate"),this.ui.datePicker.on("changeDate",function(b){var d=c(b.date),e=d.get("month")+1,f=d.get("date");a.model.set({year:d.get("year"),month:10>e?"0"+e:e,day:10>f?"0"+f:f},{silent:!0}),setTimeout(function(){a._addClassDom()},0),a.trigger("clickDate",a.model.toJSON())})},onClose:function(){this.ui.datePicker.data("datetimepicker")&&this.ui.datePicker.data("datetimepicker").remove()}});return d}),define("views/common/bs-tab/bs-tab",["talent"],function(a){return a.ItemView.extend({template:_.template(),initialize:function(a){this.$el=a.el,a.getActiveNodeByData&&(this.getActiveNodeByData=a.getActiveNodeByData),a.getActiveNodeByNode&&(this.getActiveNodeByNode=a.getActiveNodeByNode),a.getEventTriggerNode&&(this.getEventTriggerNode=a.getEventTriggerNode);var b=a.eventNode||"a",c=_.debounce(this.onTabClick,300,!0),d=this.$el.data("bb-cid");d&&this.$el.off(".delegateEvents"+d),this.$el.data("bb-cid",this.cid),this.events=function(){var a={};return a["click "+b]=c,a},this.activeClassName=a.activeClassName?a.activeClassName:"active"},setDefault:function(a){this.$el.find("."+this.activeClassName).removeClass(this.activeClassName);var b=this.getActiveNodeByData(a);this.activeNode=b,b.addClass(this.activeClassName)},onTabClick:function(b){var c=this,d=a.$(b.currentTarget);d.attr("outside")||(c.activeNode&&c.activeNode.removeClass(c.activeClassName),c.activeNode=c.getActiveNodeByNode(d),c.activeNode.addClass(c.activeClassName),c.options.eventTriggerName&&a.app.vent.trigger("tab:"+c.options.eventTriggerName+":change",c.getEventTriggerNode(d)))},getEventTriggerNode:function(a){return a},getActiveNodeByData:function(b){var c="";a._.each(b,function(a,b){c+=b+"="+a+"&"}),c=c.slice(0,c.length-1);var d=this.getActiveNodeByNode(this.$el.find('a[href$="'+c+'"]'));return d},getActiveNodeByNode:function(a){return a.parent()},getActiveNode:function(){return this.activeNode}})}),define("views/common/plugins/notice/notice-user-view",["talent","templates/common","UserSelector","collections/smember-group-collection","$.tipsy","tdialog"],function(a,b,c,d,e,f){var g=a.ItemView.extend({template:b["common/plugins/notice/add-user"],tagName:"li",ui:{uxUserArea:".ux_user_area"},initialize:function(){},onRender:function(){this.$el.find("a").tipsy({gravity:"s"})},events:function(){var a={};return a["mouseover "+this.ui.uxUserArea]="changeHideNode",a["mouseout "+this.ui.uxUserArea]="changeShowNode",a["click "+this.ui.uxUserArea]="deleteUser",a},deleteUser:function(){this.trigger("deleteUser",this.model)},changeHideNode:function(b){var c=a.$(b.currentTarget),d=this.model.get("Avatar");d.HasAvatar?c.find("img").hide():c.find("span").hide()},changeShowNode:function(b){var c=a.$(b.currentTarget),d=this.model.get("Avatar");d.HasAvatar?c.find("img").show():c.find("span").show()}}),h=a.CompositeView.extend({itemView:g,itemViewContainer:"ul",className:"person-list",template:b["common/plugins/notice/add-user-list"],ui:{addUserBtn:".ux_add_btn"},defaults:{title:"提醒对象"},initialize:function(b){this.settings=a._.extend({},this.defaults,this.options),this.addUserSelectonOptions=b.addUserSelectonOptions},templateHelpers:function(){return{title:this.settings.title}},modelEvents:{change:"render"},collectionEvents:{add:"_changeLength",remove:"_changeLength",reset:"_changeLength"},_changeLength:function(){this.trigger("changeLength")},onRender:function(){var a=this;this.on("itemview:deleteUser",function(b){a.collection.remove(b.model),$("body .tipsy").remove()}),this.userSelectorView=new c({collection:new d}),this.userSelectorView.addNode(this.$el.find(".ux_add_btn"),this.addUserSelectonOptions),this.$el.find(".ux_add_btn").on("submit",function(b,c){b.stopPropagation(),a.changeResponsible(c)})},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a),d=Marionette.getOption(this,"itemViewOptions");_.isFunction(d)&&(d=d.call(this,a,c));var e=this.buildItemView(a,b,d);this.addChildViewEventForwarding(e),this.children.add(e),e.render(),this.$el.find(this.itemViewContainer).find("li:first-child").length?this.$el.find(this.itemViewContainer).find("li:first-child").before(e.el):this.$el.find(this.itemViewContainer).append(e.el),this._isShown&&Marionette.triggerMethod.call(e,"show"),this.triggerMethod("after:item:added",e)},changeResponsible:function(a){this.smemberSelect(a)},smemberSelect:function(a){a=a||{};var b=this.collection.where({Id:a.Id});b.length>0?this.showDialogArrow(this.ui.addUserBtn,"该联系人已存在","warn"):(a.Avatar=a.UserAvatar,this.collection.add(a))},showDialogArrow:function(b,c,d){var e=this;e.tDialogViewError||(e.tDialogViewError=new f({fixed:!1,type:"tipsy",cancel:!1,sure:!1}),e.tDialogViewError.render().$el.appendTo("body")),e.tDialogViewError.show(a.$(b),c,{arrow:1,pos:"bottomCenter",height:300,topBias:8,leftBias:0,arrowBias:10,className:d,autoHide:!0})}});return h}),function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)
})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;d<e.length;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}})}(jQuery),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(c[e]=a.isPlainObject(f)?a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,this.each(h?function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}:function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;g<e.length-1;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),d===b)return f[c]===b?null:f[c];f[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1===c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a,b){function c(a,b,c){return[parseFloat(a[0])*(n.test(a[0])?b/100:1),parseFloat(a[1])*(n.test(a[1])?c/100:1)]}function d(b,c){return parseInt(a.css(b,c),10)||0}function e(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var f,g=Math.max,h=Math.abs,i=Math.round,j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,n=/%$/,o=a.fn.position;a.position={scrollbarWidth:function(){if(f!==b)return f;var c,d,e=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=e.children()[0];return a("body").append(e),c=g.offsetWidth,e.css("overflow","scroll"),d=g.offsetWidth,c===d&&(d=e[0].clientWidth),e.remove(),f=c-d},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]);return{element:c,isWindow:d,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return o.apply(this,arguments);b=a.extend({},b);var f,n,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};return s=e(t),t[0].preventDefault&&(b.at="left top"),n=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var a,c,d=(b[this]||"").split(" ");1===d.length&&(d=j.test(d[0])?d.concat(["center"]):k.test(d[0])?["center"].concat(d):["center","center"]),d[0]=j.test(d[0])?d[0]:"center",d[1]=k.test(d[1])?d[1]:"center",a=l.exec(d[0]),c=l.exec(d[1]),x[this]=[a?a[0]:0,c?c[0]:0],b[this]=[m.exec(d[0])[0],m.exec(d[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===b.at[0]?r.left+=n:"center"===b.at[0]&&(r.left+=n/2),"bottom"===b.at[1]?r.top+=p:"center"===b.at[1]&&(r.top+=p/2),f=c(x.at,n,p),r.left+=f[0],r.top+=f[1],this.each(function(){var e,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),o=d(this,"marginLeft"),s=d(this,"marginTop"),y=l+o+d(this,"marginRight")+v.width,z=m+s+d(this,"marginBottom")+v.height,A=a.extend({},r),B=c(x.my,k.outerWidth(),k.outerHeight());"right"===b.my[0]?A.left-=l:"center"===b.my[0]&&(A.left-=l/2),"bottom"===b.my[1]?A.top-=m:"center"===b.my[1]&&(A.top-=m/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=i(A.left),A.top=i(A.top)),e={marginLeft:o,marginTop:s},a.each(["left","top"],function(c,d){a.ui.position[w[c]]&&a.ui.position[w[c]][d](A,{targetWidth:n,targetHeight:p,elemWidth:l,elemHeight:m,collisionPosition:e,collisionWidth:y,collisionHeight:z,offset:[f[0]+B[0],f[1]+B[1]],my:b.my,at:b.at,within:u,elem:k})}),b.using&&(j=function(a){var c=q.left-A.left,d=c+n-l,e=q.top-A.top,f=e+p-m,i={target:{element:t,left:q.left,top:q.top,width:n,height:p},element:{element:k,left:A.left,top:A.top,width:l,height:m},horizontal:0>d?"left":c>0?"right":"center",vertical:0>f?"top":e>0?"bottom":"middle"};l>n&&h(c+d)<n&&(i.horizontal="center"),m>p&&h(e+f)<p&&(i.vertical="middle"),i.important=g(h(c),h(d))>g(h(e),h(f))?"horizontal":"vertical",b.using.call(this,a,i)}),k.offset(a.extend(A,{using:j}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-f-e;b.collisionWidth>f?i>0&&0>=j?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):a.left=j>0&&0>=i?e:i>j?e+f-b.collisionWidth:e:i>0?a.left+=i:j>0?a.left-=j:a.left=g(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&0>=j?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):a.top=j>0&&0>=i?e:i>j?e+f-b.collisionHeight:e:i>0?a.top+=i:j>0?a.top-=j:a.top=g(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-g-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-g-f,(0>c||c<h(k))&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||h(d)<l)&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-g-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-g-f,a.top+n+o+p>k&&(0>d||d<h(k))&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,a.top+n+o+p>l&&(c>0||h(c)<l)&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(jQuery),function(a){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"original"!==this.options.helper||a.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1):!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;return e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(document).width()-this.helperProportions.width-this.margins.left,(a(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c))):void(this.containment=null)},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:e.scrollTop(),left:e.scrollLeft()}),{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*d}},_generatePosition:function(b){var c,d,e,f,g=this.options,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=b.pageX,j=b.pageY;return this.offset.scroll||(this.offset.scroll={top:h.scrollTop(),left:h.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(d=this.relative_container.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,b.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),b.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),b.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),b.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("ui-draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"ui-sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("ui-draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("ui-draggable"),e=this;a.each(d.sortables,function(){var f=!1,g=this;this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(g.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("ui-draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("ui-draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("ui-draggable");b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("ui-draggable"),d=c.options,e=!1;c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName?(d.axis&&"x"===d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"===d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"===d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"===d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)
}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("ui-draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!==String?c.snap.items||":data(ui-draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!==b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){var d,e,f,g,h,i,j,k,l,m,n=a(this).data("ui-draggable"),o=n.options,p=o.snapTolerance,q=c.offset.left,r=q+n.helperProportions.width,s=c.offset.top,t=s+n.helperProportions.height;for(l=n.snapElements.length-1;l>=0;l--)h=n.snapElements[l].left,i=h+n.snapElements[l].width,j=n.snapElements[l].top,k=j+n.snapElements[l].height,h-p>r||q>i+p||j-p>t||s>k+p||!a.contains(n.snapElements[l].item.ownerDocument,n.snapElements[l].item)?(n.snapElements[l].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=!1):("inner"!==o.snapMode&&(d=Math.abs(j-t)<=p,e=Math.abs(k-s)<=p,f=Math.abs(h-r)<=p,g=Math.abs(i-q)<=p,d&&(c.position.top=n._convertPositionTo("relative",{top:j-n.helperProportions.height,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i}).left-n.margins.left)),m=d||e||f||g,"outer"!==o.snapMode&&(d=Math.abs(j-s)<=p,e=Math.abs(k-t)<=p,f=Math.abs(h-q)<=p,g=Math.abs(i-r)<=p,d&&(c.position.top=n._convertPositionTo("relative",{top:j,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k-n.helperProportions.height,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i-n.helperProportions.width}).left-n.margins.left)),!n.snapElements[l].snapping&&(d||e||f||g||m)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=d||e||f||g||m)}}),a.ui.plugin.add("draggable","stack",{start:function(){var b,c=this.data("ui-draggable").options,d=a.makeArray(a(c.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});d.length&&(b=parseInt(a(d[0]).css("zIndex"),10)||0,a(d).each(function(c){a(this).css("zIndex",b+c)}),this.css("zIndex",b+d.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a){function b(a,b,c){return a>b&&b+c>a}a.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b=this.options,c=b.accept;this.isover=!1,this.isout=!0,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var b=0,c=a.ui.ddmanager.droppables[this.options.scope];b<c.length;b++)c[b]===this&&c.splice(b,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,c){"accept"===b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,e=!1;return d&&(d.currentItem||d.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"ui-droppable");return b.options.greedy&&!b.options.disabled&&b.options.scope===d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.ui.intersect=function(a,c,d){if(!c.offset)return!1;var e,f,g=(a.positionAbs||a.position.absolute).left,h=g+a.helperProportions.width,i=(a.positionAbs||a.position.absolute).top,j=i+a.helperProportions.height,k=c.offset.left,l=k+c.proportions.width,m=c.offset.top,n=m+c.proportions.height;switch(d){case"fit":return g>=k&&l>=h&&i>=m&&n>=j;case"intersect":return k<g+a.helperProportions.width/2&&h-a.helperProportions.width/2<l&&m<i+a.helperProportions.height/2&&j-a.helperProportions.height/2<n;case"pointer":return e=(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,f=(a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,b(f,m,c.proportions.height)&&b(e,k,c.proportions.width);case"touch":return(i>=m&&n>=i||j>=m&&n>=j||m>i&&j>n)&&(g>=k&&l>=g||h>=k&&l>=h||k>g&&h>l);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();a:for(d=0;d<f.length;d++)if(!(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element))){for(e=0;e<h.length;e++)if(h[e]===f[d].element[0]){f[d].proportions.height=0;continue a}f[d].visible="none"!==f[d].element.css("display"),f[d].visible&&("mousedown"===g&&f[d]._activate.call(f[d],c),f[d].offset=f[d].element.offset(),f[d].proportions={width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight})}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,e,f,g=a.ui.intersect(b,this,this.options.tolerance),h=!g&&this.isover?"isout":g&&!this.isover?"isover":null;h&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return a.data(this,"ui-droppable").options.scope===e}),f.length&&(d=a.data(f[0],"ui-droppable"),d.greedyChild="isover"===h)),d&&"isover"===h&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[h]=!0,this["isout"===h?"isover":"isout"]=!1,this["isover"===h?"_over":"_out"].call(this,c),d&&"isout"===h&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a){function b(a){return parseInt(a,10)||0}function c(a){return!isNaN(parseInt(a,10))}a.widget("ui.resizable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var b,c,d,e,f,g=this,h=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;c<b.length;c++)d=a.trim(b[c]),f="ui-resizable-"+d,e=a("<div class='ui-resizable-handle "+f+"'></div>"),e.css({zIndex:h.zIndex}),"se"===d&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(e);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),a(this.handles[c]).length},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){g.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=e&&e[1]?e[1]:"se")}),h.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(a(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){h.disabled||g.resizing||(a(this).addClass("ui-resizable-autohide"),g._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(c){var d,e,f,g=this.options,h=this.element.position(),i=this.element;return this.resizing=!0,/absolute/.test(i.css("position"))?i.css({position:"absolute",top:i.css("top"),left:i.css("left")}):i.is(".ui-draggable")&&i.css({position:"absolute",top:h.top,left:h.left}),this._renderProxy(),d=b(this.helper.css("left")),e=b(this.helper.css("top")),g.containment&&(d+=a(g.containment).scrollLeft()||0,e+=a(g.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:d,top:e},this.size=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalPosition={left:d,top:e},this.sizeDiff={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()},this.originalMousePosition={left:c.pageX,top:c.pageY},this.aspectRatio="number"==typeof g.aspectRatio?g.aspectRatio:this.originalSize.width/this.originalSize.height||1,f=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===f?this.axis+"-resize":f),i.addClass("ui-resizable-resizing"),this._propagate("start",c),!0},_mouseDrag:function(b){var c,d=this.helper,e={},f=this.originalMousePosition,g=this.axis,h=this.position.top,i=this.position.left,j=this.size.width,k=this.size.height,l=b.pageX-f.left||0,m=b.pageY-f.top||0,n=this._change[g];return n?(c=n.apply(this,[b,l,m]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),this.position.top!==h&&(e.top=this.position.top+"px"),this.position.left!==i&&(e.left=this.position.left+"px"),this.size.width!==j&&(e.width=this.size.width+"px"),this.size.height!==k&&(e.height=this.size.height+"px"),d.css(e),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(e)||this._trigger("resize",b,this.ui()),!1):!1},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&a.ui.hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,d,e,f,g,h=this.options;g={minWidth:c(h.minWidth)?h.minWidth:0,maxWidth:c(h.maxWidth)?h.maxWidth:1/0,minHeight:c(h.minHeight)?h.minHeight:0,maxHeight:c(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||a)&&(b=g.minHeight*this.aspectRatio,e=g.minWidth/this.aspectRatio,d=g.maxHeight*this.aspectRatio,f=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),e>g.minHeight&&(g.minHeight=e),d<g.maxWidth&&(g.maxWidth=d),f<g.maxHeight&&(g.maxHeight=f)),this._vBoundaries=g},_updateCache:function(a){this.offset=this.helper.offset(),c(a.left)&&(this.position.left=a.left),c(a.top)&&(this.position.top=a.top),c(a.height)&&(this.size.height=a.height),c(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,d=this.size,e=this.axis;return c(a.height)?a.width=a.height*this.aspectRatio:c(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===e&&(a.left=b.left+(d.width-a.width),a.top=null),"nw"===e&&(a.top=b.top+(d.height-a.height),a.left=b.left+(d.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,d=this.axis,e=c(a.width)&&b.maxWidth&&b.maxWidth<a.width,f=c(a.height)&&b.maxHeight&&b.maxHeight<a.height,g=c(a.width)&&b.minWidth&&b.minWidth>a.width,h=c(a.height)&&b.minHeight&&b.minHeight>a.height,i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,k=/sw|nw|w/.test(d),l=/nw|ne|n/.test(d);return g&&(a.width=b.minWidth),h&&(a.height=b.minHeight),e&&(a.width=b.maxWidth),f&&(a.height=b.maxHeight),g&&k&&(a.left=i-b.minWidth),e&&k&&(a.left=i-b.maxWidth),h&&l&&(a.top=j-b.minHeight),f&&l&&(a.top=j-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,c,d,e,f=this.helper||this.element;for(a=0;a<this._proportionallyResizeElements.length;a++){if(e=this._proportionallyResizeElements[a],!this.borderDif)for(this.borderDif=[],c=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],d=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")],b=0;b<c.length;b++)this.borderDif[b]=(parseInt(c[b],10)||0)+(parseInt(d[b],10)||0);e.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("ui-resizable"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var c,d,e,f,g,h,i,j=a(this).data("ui-resizable"),k=j.options,l=j.element,m=k.containment,n=m instanceof a?m.get(0):/parent/.test(m)?l.parent().get(0):m;n&&(j.containerElement=a(n),/document/.test(m)||m===document?(j.containerOffset={left:0,top:0},j.containerPosition={left:0,top:0},j.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(c=a(n),d=[],a(["Top","Right","Left","Bottom"]).each(function(a,e){d[a]=b(c.css("padding"+e))}),j.containerOffset=c.offset(),j.containerPosition=c.position(),j.containerSize={height:c.innerHeight()-d[3],width:c.innerWidth()-d[1]},e=j.containerOffset,f=j.containerSize.height,g=j.containerSize.width,h=a.ui.hasScroll(n,"left")?n.scrollWidth:g,i=a.ui.hasScroll(n)?n.scrollHeight:f,j.parentData={element:n,left:e.left,top:e.top,width:h,height:i}))},resize:function(b){var c,d,e,f,g=a(this).data("ui-resizable"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement;m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio),g.position.top=g._helper?i.top:0),g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top,c=Math.abs((g._helper?g.offset.left-l.left:g.offset.left-l.left)+g.sizeDiff.width),d=Math.abs((g._helper?g.offset.top-l.top:g.offset.top-i.top)+g.sizeDiff.height),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f&&(c-=g.parentData.left),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio))},stop:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).data("ui-resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("ui-resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).data("ui-resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("ui-resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size,e=b.originalSize,f=b.originalPosition,g=b.axis,h="number"==typeof c.grid?[c.grid,c.grid]:c.grid,i=h[0]||1,j=h[1]||1,k=Math.round((d.width-e.width)/i)*i,l=Math.round((d.height-e.height)/j)*j,m=e.width+k,n=e.height+l,o=c.maxWidth&&c.maxWidth<m,p=c.maxHeight&&c.maxHeight<n,q=c.minWidth&&c.minWidth>m,r=c.minHeight&&c.minHeight>n;c.grid=h,q&&(m+=i),r&&(n+=j),o&&(m-=i),p&&(n-=j),/^(se|s|e)$/.test(g)?(b.size.width=m,b.size.height=n):/^(ne)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.top=f.top-l):/^(sw)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.left=f.left-k):(b.size.width=m,b.size.height=n,b.position.top=f.top-l,b.position.left=f.left-k)}})}(jQuery),function(a){a.widget("ui.selectable",a.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b,c=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){b=a(c.options.filter,c.element[0]),b.addClass("ui-selectee"),b.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=b.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(b){var c=this,d=this.options;this.opos=[b.pageX,b.pageY],this.options.disabled||(this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,b.metaKey||b.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().addBack().each(function(){var d,e=a.data(this,"selectable-item");return e?(d=!b.metaKey&&!b.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting"),e.unselecting=!d,e.selecting=d,e.selected=d,d?c._trigger("selecting",b,{selecting:e.element}):c._trigger("unselecting",b,{unselecting:e.element}),!1):void 0}))},_mouseDrag:function(b){if(this.dragged=!0,!this.options.disabled){var c,d=this,e=this.options,f=this.opos[0],g=this.opos[1],h=b.pageX,i=b.pageY;return f>h&&(c=h,h=f,f=c),g>i&&(c=i,i=g,g=c),this.helper.css({left:f,top:g,width:h-f,height:i-g}),this.selectees.each(function(){var c=a.data(this,"selectable-item"),j=!1;c&&c.element!==d.element[0]&&("touch"===e.tolerance?j=!(c.left>h||c.right<f||c.top>i||c.bottom<g):"fit"===e.tolerance&&(j=c.left>f&&c.right<h&&c.top>g&&c.bottom<i),j?(c.selected&&(c.$element.removeClass("ui-selected"),c.selected=!1),c.unselecting&&(c.$element.removeClass("ui-unselecting"),c.unselecting=!1),c.selecting||(c.$element.addClass("ui-selecting"),c.selecting=!0,d._trigger("selecting",b,{selecting:c.element}))):(c.selecting&&((b.metaKey||b.ctrlKey)&&c.startselected?(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.$element.addClass("ui-selected"),c.selected=!0):(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.startselected&&(c.$element.addClass("ui-unselecting"),c.unselecting=!0),d._trigger("unselecting",b,{unselecting:c.element}))),c.selected&&(b.metaKey||b.ctrlKey||c.startselected||(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),c.unselecting=!0,d._trigger("unselecting",b,{unselecting:c.element})))))}),!1}},_mouseStop:function(b){var c=this;return this.dragged=!1,a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}})}(jQuery),function(a){function b(a,b,c){return a>b&&b+c>a}function c(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))}a.widget("ui.sortable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||c(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget().toggleClass("ui-sortable-disabled",!!c)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),d&&(!this.options.handle||c||(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),e))?(this.currentItem=d,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(b,c,d){var e,f,g=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),g.containment&&this._setContainment(),g.cursor&&"auto"!==g.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",g.cursor),this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)),g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity)),g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",g.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));
return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-a(document).scrollTop()<g.scrollSensitivity?h=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<g.scrollSensitivity&&(h=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)),b.pageX-a(document).scrollLeft()<g.scrollSensitivity?h=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<g.scrollSensitivity&&(h=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed))),h!==!1&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],e):!0)){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&i>d+j,m="y"===this.options.axis||b+k>f&&g>b+k,n=l&&m;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(a){var c="x"===this.options.axis||b(this.positionAbs.top+this.offset.click.top,a.top,a.height),d="y"===this.options.axis||b(this.positionAbs.left+this.offset.click.left,a.left,a.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&"right"===g||"down"===f?2:1:f&&("down"===f?2:1):!1},_intersectsWithSides:function(a){var c=b(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),d=b(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"===f&&d||"left"===f&&!d:e&&("down"===e&&c||"up"===e&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c,d,e,f,g=[],h=[],i=this._connectWith();if(i&&b)for(c=i.length-1;c>=0;c--)for(e=a(i[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&h.push([a.isFunction(f.options.items)?f.options.items.call(f.element):a(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f]);for(h.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),c=h.length-1;c>=0;c--)h[c][0].each(function(){g.push(this)});return a(g)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;c<b.length;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(c=m.length-1;c>=0;c--)for(e=a(m[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&(l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));for(c=l.length-1;c>=0;c--)for(g=l[c][1],h=l[c][0],d=0,j=h.length;j>d;d++)i=a(h[d]),i.data(this.widgetName+"-item",g),k.push({item:i,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;c>=0;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===d?b.currentItem.children().each(function(){a("<td>&#160;</td>",b.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(e)}):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){(!c||d.forcePlaceholderSize)&&(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),d.placeholder.update(b,b.placeholder)},_contactContainers:function(d){var e,f,g,h,i,j,k,l,m,n,o=null,p=null;for(e=this.containers.length-1;e>=0;e--)if(!a.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(o&&a.contains(this.containers[e].element[0],o.element[0]))continue;o=this.containers[e],p=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",d,this._uiHash(this)),this.containers[e].containerCache.over=0);if(o)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",d,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(g=1e4,h=null,n=o.floating||c(this.currentItem),i=n?"left":"top",j=n?"width":"height",k=this.positionAbs[i]+this.offset.click[i],f=this.items.length-1;f>=0;f--)a.contains(this.containers[p].element[0],this.items[f].item[0])&&this.items[f].item[0]!==this.currentItem[0]&&(!n||b(this.positionAbs.top+this.offset.click.top,this.items[f].top,this.items[f].height))&&(l=this.items[f].item.offset()[i],m=!1,Math.abs(l-k)>Math.abs(l+this.items[f][j]-k)&&(m=!0,l+=this.items[f][j]),Math.abs(l-k)<g&&(g=Math.abs(l-k),h=this.items[f],this.direction=m?"up":"down"));if(!h&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return;h?this._rearrange(d,h,null,!0):this._rearrange(d,null,this.containers[p].element,!0),this._trigger("change",d,this._uiHash()),this.containers[p]._trigger("change",d,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",d,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(!d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){this.reverting=!1;var c,d=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(c in this._storedCSS)("auto"===this._storedCSS[c]||"static"===this._storedCSS[c])&&(this._storedCSS[c]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||d.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(d.push(function(a){this._trigger("remove",a,this._uiHash())}),d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),c=this.containers.length-1;c>=0;c--)b||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[c])),this.containers[c].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[c])),this.containers[c].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!b){for(this._trigger("beforeStop",a,this._uiHash()),c=0;c<d.length;c++)d[c].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!1}if(b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!b){for(c=0;c<d.length;c++)d[c].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}})}(jQuery),function(a){var b=0,c={},d={};c.height=c.paddingTop=c.paddingBottom=c.borderTopWidth=c.borderBottomWidth="hide",d.height=d.paddingTop=d.paddingBottom=d.borderTopWidth=d.borderBottomWidth="show",a.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var b=this.options;this.prevShow=this.prevHide=a(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),b.collapsible||b.active!==!1&&null!=b.active||(b.active=0),this._processPanels(),b.active<0&&(b.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():a(),content:this.active.length?this.active.next():a()}},_createIcons:function(){var b=this.options.icons;b&&(a("<span>").addClass("ui-accordion-header-icon ui-icon "+b.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var a;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),a=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){return"active"===a?void this._activate(b):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(b)),this._super(a,b),"collapsible"!==a||b||this.options.active!==!1||this._activate(0),"icons"===a&&(this._destroyIcons(),b&&this._createIcons()),void("disabled"===a&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!b)))},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._eventHandler(b);break;case c.HOME:f=this.headers[0];break;case c.END:f=this.headers[d-1]}f&&(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().focus()},refresh:function(){var b=this.options;this._processPanels(),b.active===!1&&b.collapsible===!0||!this.headers.length?(b.active=!1,this.active=a()):b.active===!1?this._activate(0):this.active.length&&!a.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(b.active=!1,this.active=a()):this._activate(Math.max(0,b.active-1)):b.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var c,d=this.options,e=d.heightStyle,f=this.element.parent(),g=this.accordionId="ui-accordion-"+(this.element.attr("id")||++b);this.active=this._findActive(d.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(b){var c=a(this),d=c.attr("id"),e=c.next(),f=e.attr("id");d||(d=g+"-header-"+b,c.attr("id",d)),f||(f=g+"-panel-"+b,e.attr("id",f)),c.attr("aria-controls",f),e.attr("aria-labelledby",d)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(d.event),"fill"===e?(c=f.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.headers.each(function(){c-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===e&&(c=0,this.headers.next().each(function(){c=Math.max(c,a(this).css("height","").height())}).height(c))},_activate:function(b){var c=this._findActive(b)[0];c!==this.active[0]&&(c=c||this.active[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return"number"==typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var c={keydown:"_keydown"};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,c),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e[0]===d[0],g=f&&c.collapsible,h=g?a():e.next(),i=d.next(),j={oldHeader:d,oldPanel:i,newHeader:g?a():e,newPanel:h};b.preventDefault(),f&&!c.collapsible||this._trigger("beforeActivate",b,j)===!1||(c.active=g?!1:this.headers.index(e),this.active=f?a():e,this._toggle(j),d.removeClass("ui-accordion-header-active ui-state-active"),c.icons&&d.children(".ui-accordion-header-icon").removeClass(c.icons.activeHeader).addClass(c.icons.header),f||(e.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),c.icons&&e.children(".ui-accordion-header-icon").removeClass(c.icons.header).addClass(c.icons.activeHeader),e.next().addClass("ui-accordion-content-active")))},_toggle:function(b){var c=b.newPanel,d=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=c,this.prevHide=d,this.options.animate?this._animate(c,d,b):(d.hide(),c.show(),this._toggleComplete(b)),d.attr({"aria-expanded":"false","aria-hidden":"true"}),d.prev().attr("aria-selected","false"),c.length&&d.length?d.prev().attr("tabIndex",-1):c.length&&this.headers.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),c.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(a,b,e){var f,g,h,i=this,j=0,k=a.length&&(!b.length||a.index()<b.index()),l=this.options.animate||{},m=k&&l.down||l,n=function(){i._toggleComplete(e)};return"number"==typeof m&&(h=m),"string"==typeof m&&(g=m),g=g||m.easing||l.easing,h=h||m.duration||l.duration,b.length?a.length?(f=a.show().outerHeight(),b.animate(c,{duration:h,easing:g,step:function(a,b){b.now=Math.round(a)}}),void a.hide().animate(d,{duration:h,easing:g,complete:n,step:function(a,c){c.now=Math.round(a),"height"!==c.prop?j+=c.now:"content"!==i.options.heightStyle&&(c.now=Math.round(f-b.outerHeight()-j),j=0)}})):b.animate(c,h,g,n):a.animate(d,h,g,n)},_toggleComplete:function(a){var b=a.oldPanel;b.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),b.length&&(b.parent()[0].className=b.parent()[0].className),this._trigger("activate",null,a)}})}(jQuery),function(a){var b=0;a.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var b,c,d,e=this.element[0].nodeName.toLowerCase(),f="textarea"===e,g="input"===e;this.isMultiLine=f?!0:g?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[f||g?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))return b=!0,d=!0,void(c=!0);b=!1,d=!1,c=!1;var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:b=!0,this._move("previousPage",e);break;case f.PAGE_DOWN:b=!0,this._move("nextPage",e);break;case f.UP:b=!0,this._keyEvent("previous",e);break;case f.DOWN:b=!0,this._keyEvent("next",e);break;case f.ENTER:case f.NUMPAD_ENTER:this.menu.active&&(b=!0,e.preventDefault(),this.menu.select(e));break;case f.TAB:this.menu.active&&this.menu.select(e);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}},keypress:function(d){if(b)return b=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&d.preventDefault());if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){return d?(d=!1,void a.preventDefault()):void this._searchTimeout(a)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(a){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),void this._change(a))}}),this._initSource(),this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(b){b.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||a.contains(c,d.target)||b.close()})})},menufocus:function(b,c){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)});var d=c.item.data("ui-autocomplete-item");!1!==this._trigger("focus",b,{item:d})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(d.value):this.liveRegion.text(d.value)},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d,this.selectedItem=c})),!1!==this._trigger("select",a,{item:c})&&this._value(c.value),this.term=this._value(),this.close(a),this.selectedItem=c}}),this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")
}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b),"source"===a&&this._initSource(),"appendTo"===a&&this.menu.element.appendTo(this._appendTo()),"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b||(b=this.element.closest(".ui-front")),b.length||(b=this.document[0].body),b},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.neoajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){return a=null!=a?a:this._value(),this.term=this._value(),a.length<this.options.minLength?this.close(b):this._trigger("search",b)!==!1?this._search(a):void 0},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:a},this._response())},_response:function(){var a=this,c=++b;return function(d){c===b&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){a&&(a=this._normalize(a)),this._trigger("response",null,{content:a}),!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0,this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b),this.isNewMenu=!0,this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<a>").text(c.label)).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)?(this._value(this.term),void this.menu.blur()):void this.menu[a](b):void this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}}),a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(a>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(a){var b;this._superApply(arguments),this.options.disabled||this.cancelSearch||(b=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults,this.liveRegion.text(b))}})}(jQuery),function(a){var b,c,d,e,f="ui-button ui-widget ui-state-default ui-corner-all",g="ui-state-hover ui-state-active ",h="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",i=function(){var b=a(this);setTimeout(function(){b.find(":ui-button").button("refresh")},1)},j=function(b){var c=b.name,d=b.form,e=a([]);return c&&(c=c.replace(/'/g,"\\'"),e=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,i),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var g=this,h=this.options,k="checkbox"===this.type||"radio"===this.type,l=k?"":"ui-state-active",m="ui-state-focus";null===h.label&&(h.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(f).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){h.disabled||this===b&&a(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){h.disabled||a(this).removeClass(l)}).bind("click"+this.eventNamespace,function(a){h.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){g.buttonElement.addClass(m)}).bind("blur"+this.eventNamespace,function(){g.buttonElement.removeClass(m)}),k&&(this.element.bind("change"+this.eventNamespace,function(){e||g.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(a){h.disabled||(e=!1,c=a.pageX,d=a.pageY)}).bind("mouseup"+this.eventNamespace,function(a){h.disabled||(c!==a.pageX||d!==a.pageY)&&(e=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return h.disabled||e?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(h.disabled||e)return!1;a(this).addClass("ui-state-active"),g.buttonElement.attr("aria-pressed","true");var b=g.element[0];j(b).not(b).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return h.disabled?!1:(a(this).addClass("ui-state-active"),b=this,void g.document.one("mouseup",function(){b=null}))}).bind("mouseup"+this.eventNamespace,function(){return h.disabled?!1:void a(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(b){return h.disabled?!1:void((b.keyCode===a.ui.keyCode.SPACE||b.keyCode===a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){var a,b,c;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),c=this.element.is(":checked"),c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",c)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(f+" "+g+" "+h).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){return this._super(a,b),"disabled"===a?void(b?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var b=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b),"radio"===this.type?j(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var b=this.buttonElement.removeClass(h),c=a("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",a.trim(c)))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b),this._super(a,b)},refresh:function(){var b="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(a,b){function c(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},a.extend(this._defaults,this.regional[""]),this.dpDiv=d(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function d(b){var c="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.delegate(c,"mouseout",function(){a(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate(c,"mouseover",function(){a.datepicker._isDisabledDatepicker(f.inline?b.parent()[0]:f.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))})}function e(b,c){a.extend(b,c);for(var d in c)null==c[d]&&(b[d]=c[d]);return b}a.extend(a.ui,{datepicker:{version:"1.10.3"}});var f,g="datepicker";a.extend(c.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return e(this._defaults,a||{}),this},_attachDatepicker:function(b,c){var d,e,f;d=b.nodeName.toLowerCase(),e="div"===d||"span"===d,b.id||(this.uuid+=1,b.id="dp"+this.uuid),f=this._newInst(a(b),e),f.settings=a.extend({},c||{}),"input"===d?this._connectDatepicker(b,f):e&&this._inlineDatepicker(b,f)},_newInst:function(b,c){var e=b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:e,input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?d(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]),c.trigger=a([]),d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(c),a.data(b,g,c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d,e,f,g=this._get(c,"appendText"),h=this._get(c,"isRTL");c.append&&c.append.remove(),g&&(c.append=a("<span class='"+this._appendClass+"'>"+g+"</span>"),b[h?"before":"after"](c.append)),b.unbind("focus",this._showDatepicker),c.trigger&&c.trigger.remove(),d=this._get(c,"showOn"),("focus"===d||"both"===d)&&b.focus(this._showDatepicker),("button"===d||"both"===d)&&(e=this._get(c,"buttonText"),f=this._get(c,"buttonImage"),c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):a("<button type='button'></button>").addClass(this._triggerClass).html(f?a("<img/>").attr({src:f,alt:e,title:e}):e)),b[h?"before":"after"](c.trigger),c.trigger.click(function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0])):a.datepicker._showDatepicker(b[0]),!1}))},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,e,f=new Date(2009,11,20),g=this._get(a,"dateFormat");g.match(/[DM]/)&&(b=function(a){for(c=0,d=0,e=0;e<a.length;e++)a[e].length>c&&(c=a[e].length,d=e);return d},f.setMonth(b(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort"))),f.setDate(b(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())),a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv),a.data(b,g,c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,d,f,h){var i,j,k,l,m,n=this._dialogInst;return n||(this.uuid+=1,i="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+i+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),n=this._dialogInst=this._newInst(this._dialogInput,!1),n.settings={},a.data(this._dialogInput[0],g,n)),e(n.settings,f||{}),c=c&&c.constructor===Date?this._formatDate(n,c):c,this._dialogInput.val(c),this._pos=h?h.length?h:[h.pageX,h.pageY]:null,this._pos||(j=document.documentElement.clientWidth,k=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,m=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[j/2-100+l,k/2-150+m]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),n.settings.onSelect=d,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],g,n),this},_destroyDatepicker:function(b){var c,d=a(b),e=a.data(b,g);d.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),a.removeData(b,g),"input"===c?(e.append.remove(),e.trigger.remove(),d.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===c||"span"===c)&&d.removeClass(this.markerClassName).empty())},_enableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,g);e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}))},_disableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,g);e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,g)}catch(c){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(c,d,f){var g,h,i,j,k=this._getInst(c);return 2===arguments.length&&"string"==typeof d?"defaults"===d?a.extend({},a.datepicker._defaults):k?"all"===d?a.extend({},k.settings):this._get(k,d):null:(g=d||{},"string"==typeof d&&(g={},g[d]=f),void(k&&(this._curInst===k&&this._hideDatepicker(),h=this._getDateDatepicker(c,!0),i=this._getMinMaxDate(k,"min"),j=this._getMinMaxDate(k,"max"),e(k.settings,g),null!==i&&g.dateFormat!==b&&g.minDate===b&&(k.settings.minDate=this._formatDate(k,i)),null!==j&&g.dateFormat!==b&&g.maxDate===b&&(k.settings.maxDate=this._formatDate(k,j)),"disabled"in g&&(g.disabled?this._disableDatepicker(c):this._enableDatepicker(c)),this._attachments(a(c),k),this._autoSize(k),this._setDate(k,h),this._updateAlternate(k),this._updateDatepicker(k))))},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(b){var c,d,e,f=a.datepicker._getInst(b.target),g=!0,h=f.dpDiv.is(".ui-datepicker-rtl");if(f._keyEvent=!0,a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker(),g=!1;break;case 13:return e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv),e[0]&&a.datepicker._selectDay(b.target,f.selectedMonth,f.selectedYear,e[0]),c=a.datepicker._get(f,"onSelect"),c?(d=a.datepicker._formatDate(f),c.apply(f.input?f.input[0]:null,[d,f])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target),g=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target),g=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?1:-1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D"),g=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?-1:1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D"),g=b.ctrlKey||b.metaKey;break;default:g=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):g=!1;g&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(b){var c,d,e=a.datepicker._getInst(b.target);return a.datepicker._get(e,"constrainInput")?(c=a.datepicker._possibleChars(a.datepicker._get(e,"dateFormat")),d=String.fromCharCode(null==b.charCode?b.keyCode:b.charCode),b.ctrlKey||b.metaKey||" ">d||!c||c.indexOf(d)>-1):void 0},_doKeyUp:function(b){var c,d=a.datepicker._getInst(b.target);if(d.input.val()!==d.lastVal)try{c=a.datepicker.parseDate(a.datepicker._get(d,"dateFormat"),d.input?d.input.val():null,a.datepicker._getFormatConfig(d)),c&&(a.datepicker._setDateFromField(d),a.datepicker._updateAlternate(d),a.datepicker._updateDatepicker(d))}catch(e){}return!0},_showDatepicker:function(b){if(b=b.target||b,"input"!==b.nodeName.toLowerCase()&&(b=a("input",b.parentNode)[0]),!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!==b){var c,d,f,g,h,i,j;c=a.datepicker._getInst(b),a.datepicker._curInst&&a.datepicker._curInst!==c&&(a.datepicker._curInst.dpDiv.stop(!0,!0),c&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0])),d=a.datepicker._get(c,"beforeShow"),f=d?d.apply(b,[b,c]):{},f!==!1&&(e(c.settings,f),c.lastVal=null,a.datepicker._lastInput=b,a.datepicker._setDateFromField(c),a.datepicker._inDialog&&(b.value=""),a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight),g=!1,a(b).parents().each(function(){return g|="fixed"===a(this).css("position"),!g}),h={left:a.datepicker._pos[0],top:a.datepicker._pos[1]},a.datepicker._pos=null,c.dpDiv.empty(),c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),a.datepicker._updateDatepicker(c),h=a.datepicker._checkOffset(c,h,g),c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":g?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),c.inline||(i=a.datepicker._get(c,"showAnim"),j=a.datepicker._get(c,"duration"),c.dpDiv.zIndex(a(b).zIndex()+1),a.datepicker._datepickerShowing=!0,a.effects&&a.effects.effect[i]?c.dpDiv.show(i,a.datepicker._get(c,"showOptions"),j):c.dpDiv[i||"show"](i?j:null),a.datepicker._shouldFocusInput(c)&&c.input.focus(),a.datepicker._curInst=c))}},_updateDatepicker:function(b){this.maxRows=4,f=b,b.dpDiv.empty().append(this._generateHTML(b)),this._attachHandlers(b),b.dpDiv.find("."+this._dayOverClass+" a").mouseover();var c,d=this._getNumberOfMonths(b),e=d[1],g=17;b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),e>1&&b.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",g*e+"em"),b.dpDiv[(1!==d[0]||1!==d[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)&&b.input.focus(),b.yearshtml&&(c=b.yearshtml,setTimeout(function(){c===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml),c=b.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,i=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),j=document.documentElement.clientHeight+(d?0:a(document).scrollTop());return c.left-=this._get(b,"isRTL")?e-g:0,c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0,c.top-=d&&c.top===b.input.offset().top+h?a(document).scrollTop():0,c.left-=Math.min(c.left,c.left+e>i&&i>e?Math.abs(c.left+e-i):0),c.top-=Math.min(c.top,c.top+f>j&&j>f?Math.abs(f+h):0),c},_findPos:function(b){for(var c,d=this._getInst(b),e=this._get(d,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||a.expr.filters.hidden(b));)b=b[e?"previousSibling":"nextSibling"];return c=a(b).offset(),[c.left,c.top]},_hideDatepicker:function(b){var c,d,e,f,h=this._curInst;!h||b&&h!==a.data(b,g)||this._datepickerShowing&&(c=this._get(h,"showAnim"),d=this._get(h,"duration"),e=function(){a.datepicker._tidyDialog(h)},a.effects&&(a.effects.effect[c]||a.effects[c])?h.dpDiv.hide(c,a.datepicker._get(h,"showOptions"),d,e):h.dpDiv["slideDown"===c?"slideUp":"fadeIn"===c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1,f=this._get(h,"onClose"),f&&f.apply(h.input?h.input[0]:null,[h.input?h.input.val():"",h]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){var c=a(b.target),d=a.datepicker._getInst(c[0]);(c[0].id!==a.datepicker._mainDivId&&0===c.parents("#"+a.datepicker._mainDivId).length&&!c.hasClass(a.datepicker.markerClassName)&&!c.closest("."+a.datepicker._triggerClass).length&&a.datepicker._datepickerShowing&&(!a.datepicker._inDialog||!a.blockUI)||c.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!==d)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){var e=a(b),f=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(f,c+("M"===d?this._get(f,"showCurrentAtPos"):0),d),this._updateDatepicker(f))},_gotoToday:function(b){var c,d=a(b),e=this._getInst(d[0]);this._get(e,"gotoCurrent")&&e.currentDay?(e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear):(c=new Date,e.selectedDay=c.getDate(),e.drawMonth=e.selectedMonth=c.getMonth(),e.drawYear=e.selectedYear=c.getFullYear()),this._notifyChange(e),this._adjustDate(d)},_selectMonthYear:function(b,c,d){var e=a(b),f=this._getInst(e[0]);f["selected"+("M"===d?"Month":"Year")]=f["draw"+("M"===d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10),this._notifyChange(f),this._adjustDate(e)},_selectDay:function(b,c,d,e){var f,g=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(f=this._getInst(g[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(b){var c=a(b);this._selectDate(c,"")},_selectDate:function(b,c){var d,e=a(b),f=this._getInst(e[0]);c=null!=c?c:this._formatDate(f),f.input&&f.input.val(c),this._updateAlternate(f),d=this._get(f,"onSelect"),d?d.apply(f.input?f.input[0]:null,[c,f]):f.input&&f.input.trigger("change"),f.inline?this._updateDatepicker(f):(this._hideDatepicker(),this._lastInput=f.input[0],"object"!=typeof f.input[0]&&f.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var c,d,e,f=this._get(b,"altField");f&&(c=this._get(b,"altFormat")||this._get(b,"dateFormat"),d=this._getDate(b),e=this.formatDate(c,d,this._getFormatConfig(b)),a(f).each(function(){a(this).val(e)}))},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b,c=new Date(a.getTime());return c.setDate(c.getDate()+4-(c.getDay()||7)),b=c.getTime(),c.setMonth(0),c.setDate(1),Math.floor(Math.round((b-c)/864e5)/7)+1},parseDate:function(b,c,d){if(null==b||null==c)throw"Invalid arguments";if(c="object"==typeof c?c.toString():c+"",""===c)return null;var e,f,g,h,i=0,j=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,k="string"!=typeof j?j:(new Date).getFullYear()%100+parseInt(j,10),l=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,m=(d?d.dayNames:null)||this._defaults.dayNames,n=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,o=(d?d.monthNames:null)||this._defaults.monthNames,p=-1,q=-1,r=-1,s=-1,t=!1,u=function(a){var c=e+1<b.length&&b.charAt(e+1)===a;return c&&e++,c},v=function(a){var b=u(a),d="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=c.substring(i).match(e);if(!f)throw"Missing number at position "+i;return i+=f[0].length,parseInt(f[0],10)},w=function(b,d,e){var f=-1,g=a.map(u(b)?e:d,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(g,function(a,b){var d=b[1];return c.substr(i,d.length).toLowerCase()===d.toLowerCase()?(f=b[0],i+=d.length,!1):void 0}),-1!==f)return f+1;throw"Unknown name at position "+i},x=function(){if(c.charAt(i)!==b.charAt(e))throw"Unexpected literal at position "+i;i++};for(e=0;e<b.length;e++)if(t)"'"!==b.charAt(e)||u("'")?x():t=!1;else switch(b.charAt(e)){case"d":r=v("d");break;case"D":w("D",l,m);break;case"o":s=v("o");break;case"m":q=v("m");break;case"M":q=w("M",n,o);break;case"y":p=v("y");break;case"@":h=new Date(v("@")),p=h.getFullYear(),q=h.getMonth()+1,r=h.getDate();break;case"!":h=new Date((v("!")-this._ticksTo1970)/1e4),p=h.getFullYear(),q=h.getMonth()+1,r=h.getDate();break;case"'":u("'")?x():t=!0;break;default:x()}if(i<c.length&&(g=c.substr(i),!/^\s+/.test(g)))throw"Extra/unparsed characters found in date: "+g;if(-1===p?p=(new Date).getFullYear():100>p&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(k>=p?0:-100)),s>-1)for(q=1,r=s;;){if(f=this._getDaysInMonth(p,q-1),f>=r)break;q++,r-=f}if(h=this._daylightSavingAdjust(new Date(p,q-1,r)),h.getFullYear()!==p||h.getMonth()+1!==q||h.getDate()!==r)throw"Invalid date";
return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=function(b){var c=d+1<a.length&&a.charAt(d+1)===b;return c&&d++,c},j=function(a,b,c){var d=""+b;if(i(a))for(;d.length<c;)d="0"+d;return d},k=function(a,b,c,d){return i(a)?d[b]:c[b]},l="",m=!1;if(b)for(d=0;d<a.length;d++)if(m)"'"!==a.charAt(d)||i("'")?l+=a.charAt(d):m=!1;else switch(a.charAt(d)){case"d":l+=j("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=j("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=j("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),g,h);break;case"y":l+=i("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=1e4*b.getTime()+this._ticksTo1970;break;case"'":i("'")?l+="'":m=!0;break;default:l+=a.charAt(d)}return l},_possibleChars:function(a){var b,c="",d=!1,e=function(c){var d=b+1<a.length&&a.charAt(b+1)===c;return d&&b++,d};for(b=0;b<a.length;b++)if(d)"'"!==a.charAt(b)||e("'")?c+=a.charAt(b):d=!1;else switch(a.charAt(b)){case"d":case"m":case"y":case"@":c+="0123456789";break;case"D":case"M":return null;case"'":e("'")?c+="'":d=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,c){return a.settings[c]!==b?a.settings[c]:this._defaults[c]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e=this._getDefaultDate(a),f=e,g=this._getFormatConfig(a);try{f=this.parseDate(c,d,g)||e}catch(h){d=b?"":d}a.selectedDay=f.getDate(),a.drawMonth=a.selectedMonth=f.getMonth(),a.drawYear=a.selectedYear=f.getFullYear(),a.currentDay=d?f.getDate():0,a.currentMonth=d?f.getMonth():0,a.currentYear=d?f.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(d){}for(var e=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth(),h=e.getDate(),i=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=i.exec(c);j;){switch(j[2]||"d"){case"d":case"D":h+=parseInt(j[1],10);break;case"w":case"W":h+=7*parseInt(j[1],10);break;case"m":case"M":g+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g));break;case"y":case"Y":f+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g))}j=i.exec(c)}return new Date(f,g,h)},g=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime());return g=g&&"Invalid Date"===g.toString()?d:g,g&&(g.setHours(0),g.setMinutes(0),g.setSeconds(0),g.setMilliseconds(0)),this._daylightSavingAdjust(g)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),e===a.selectedMonth&&f===a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){var b={prev:function(){a.datepicker._adjustDate(d,-c,"M")},next:function(){a.datepicker._adjustDate(d,+c,"M")},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(d)},selectDay:function(){return a.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return a.datepicker._selectMonthYear(d,this,"M"),!1},selectYear:function(){return a.datepicker._selectMonthYear(d,this,"Y"),!1}};a(this).bind(this.getAttribute("data-event"),b[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=new Date,P=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),Q=this._get(a,"isRTL"),R=this._get(a,"showButtonPanel"),S=this._get(a,"hideIfNoPrevNext"),T=this._get(a,"navigationAsDateFormat"),U=this._getNumberOfMonths(a),V=this._get(a,"showCurrentAtPos"),W=this._get(a,"stepMonths"),X=1!==U[0]||1!==U[1],Y=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(a,"min"),$=this._getMinMaxDate(a,"max"),_=a.drawMonth-V,ab=a.drawYear;if(0>_&&(_+=12,ab--),$)for(b=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-U[0]*U[1]+1,$.getDate())),b=Z&&Z>b?Z:b;this._daylightSavingAdjust(new Date(ab,_,1))>b;)_--,0>_&&(_=11,ab--);for(a.drawMonth=_,a.drawYear=ab,c=this._get(a,"prevText"),c=T?this.formatDate(c,this._daylightSavingAdjust(new Date(ab,_-W,1)),this._getFormatConfig(a)):c,d=this._canAdjustMonth(a,-1,ab,_)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>":S?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>",e=this._get(a,"nextText"),e=T?this.formatDate(e,this._daylightSavingAdjust(new Date(ab,_+W,1)),this._getFormatConfig(a)):e,f=this._canAdjustMonth(a,1,ab,_)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>":S?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>",g=this._get(a,"currentText"),h=this._get(a,"gotoCurrent")&&a.currentDay?Y:P,g=T?this.formatDate(g,h,this._getFormatConfig(a)):g,i=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>",j=R?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Q?i:"")+(this._isInRange(a,h)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+g+"</button>":"")+(Q?"":i)+"</div>":"",k=parseInt(this._get(a,"firstDay"),10),k=isNaN(k)?0:k,l=this._get(a,"showWeek"),m=this._get(a,"dayNames"),n=this._get(a,"dayNamesMin"),o=this._get(a,"monthNames"),p=this._get(a,"monthNamesShort"),q=this._get(a,"beforeShowDay"),r=this._get(a,"showOtherMonths"),s=this._get(a,"selectOtherMonths"),t=this._getDefaultDate(a),u="",w=0;w<U[0];w++){for(x="",this.maxRows=4,y=0;y<U[1];y++){if(z=this._daylightSavingAdjust(new Date(ab,_,a.selectedDay)),A=" ui-corner-all",B="",X){if(B+="<div class='ui-datepicker-group",U[1]>1)switch(y){case 0:B+=" ui-datepicker-group-first",A=" ui-corner-"+(Q?"right":"left");break;case U[1]-1:B+=" ui-datepicker-group-last",A=" ui-corner-"+(Q?"left":"right");break;default:B+=" ui-datepicker-group-middle",A=""}B+="'>"}for(B+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+A+"'>"+(/all|left/.test(A)&&0===w?Q?f:d:"")+(/all|right/.test(A)&&0===w?Q?d:f:"")+this._generateMonthYearHeader(a,_,ab,Z,$,w>0||y>0,o,p)+"</div><table class='ui-datepicker-calendar'><thead><tr>",C=l?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"",v=0;7>v;v++)D=(v+k)%7,C+="<th"+((v+k+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+m[D]+"'>"+n[D]+"</span></th>";for(B+=C+"</tr></thead><tbody>",E=this._getDaysInMonth(ab,_),ab===a.selectedYear&&_===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,E)),F=(this._getFirstDayOfMonth(ab,_)-k+7)%7,G=Math.ceil((F+E)/7),H=X&&this.maxRows>G?this.maxRows:G,this.maxRows=H,I=this._daylightSavingAdjust(new Date(ab,_,1-F)),J=0;H>J;J++){for(B+="<tr>",K=l?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(I)+"</td>":"",v=0;7>v;v++)L=q?q.apply(a.input?a.input[0]:null,[I]):[!0,""],M=I.getMonth()!==_,N=M&&!s||!L[0]||Z&&Z>I||$&&I>$,K+="<td class='"+((v+k+6)%7>=5?" ui-datepicker-week-end":"")+(M?" ui-datepicker-other-month":"")+(I.getTime()===z.getTime()&&_===a.selectedMonth&&a._keyEvent||t.getTime()===I.getTime()&&t.getTime()===z.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(M&&!r?"":" "+L[1]+(I.getTime()===Y.getTime()?" "+this._currentClass:"")+(I.getTime()===P.getTime()?" ui-datepicker-today":""))+"'"+(M&&!r||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(M&&!r?"&#xa0;":N?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===P.getTime()?" ui-state-highlight":"")+(I.getTime()===Y.getTime()?" ui-state-active":"")+(M?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);B+=K+"</tr>"}_++,_>11&&(_=0,ab++),B+="</tbody></table>"+(X?"</div>"+(U[0]>0&&y===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=B}u+=x}return u+=j,a._keyEvent=!1,u},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q=this._get(a,"changeMonth"),r=this._get(a,"changeYear"),s=this._get(a,"showMonthAfterYear"),t="<div class='ui-datepicker-title'>",u="";if(f||!q)u+="<span class='ui-datepicker-month'>"+g[b]+"</span>";else{for(i=d&&d.getFullYear()===c,j=e&&e.getFullYear()===c,u+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",k=0;12>k;k++)(!i||k>=d.getMonth())&&(!j||k<=e.getMonth())&&(u+="<option value='"+k+"'"+(k===b?" selected='selected'":"")+">"+h[k]+"</option>");u+="</select>"}if(s||(t+=u+(!f&&q&&r?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!r)t+="<span class='ui-datepicker-year'>"+c+"</span>";else{for(l=this._get(a,"yearRange").split(":"),m=(new Date).getFullYear(),n=function(a){var b=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?m+parseInt(a,10):parseInt(a,10);return isNaN(b)?m:b},o=n(l[0]),p=Math.max(o,n(l[1]||"")),o=d?Math.max(o,d.getFullYear()):o,p=e?Math.min(p,e.getFullYear()):p,a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p>=o;o++)a.yearshtml+="<option value='"+o+"'"+(o===c?" selected='selected'":"")+">"+o+"</option>";a.yearshtml+="</select>",t+=a.yearshtml,a.yearshtml=null}return t+=this._get(a,"yearSuffix"),s&&(t+=(!f&&q&&r?"":"&#xa0;")+u),t+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"===c?b:0),e=a.drawMonth+("M"===c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"===c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"===c||"Y"===c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c,d,e=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),g=null,h=null,i=this._get(a,"yearRange");return i&&(c=i.split(":"),d=(new Date).getFullYear(),g=parseInt(c[0],10),h=parseInt(c[1],10),c[0].match(/[+\-].*/)&&(g+=d),c[1].match(/[+\-].*/)&&(h+=d)),(!e||b.getTime()>=e.getTime())&&(!f||b.getTime()<=f.getTime())&&(!g||b.getFullYear()>=g)&&(!h||b.getFullYear()<=h)},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick),a.datepicker.initialized=!0),0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))},a.datepicker=new c,a.datepicker.initialized=!1,a.datepicker.uuid=(new Date).getTime(),a.datepicker.version="1.10.3"}(jQuery),function(a){var b={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},c={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&a.fn.draggable&&this._makeDraggable(),this.options.resizable&&a.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;return b&&(b.jquery||b.nodeType)?a(b):this.document.find(b||"body").eq(0)},_destroy:function(){var a,b=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),a=b.parent.children().eq(b.index),a.length&&a[0]!==this.element[0]?a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},disable:a.noop,enable:a.noop,close:function(b){var c=this;this._isOpen&&this._trigger("beforeClose",b)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||a(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){c._trigger("close",b)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(a,b){var c=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return c&&!b&&this._trigger("focus",a),c},open:function(){var b=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=a(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){b._focusTabbable(),b._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var a=this.element.find("[autofocus]");a.length||(a=this.element.find(":tabbable")),a.length||(a=this.uiDialogButtonPane.find(":tabbable")),a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable")),a.length||(a=this.uiDialog),a.eq(0).focus()},_keepFocus:function(b){function c(){var b=this.document[0].activeElement,c=this.uiDialog[0]===b||a.contains(this.uiDialog[0],b);c||this._focusTabbable()}b.preventDefault(),c.call(this),this._delay(c)},_createWrapper:function(){this.uiDialog=a("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)return b.preventDefault(),void this.close(b);if(b.keyCode===a.ui.keyCode.TAB){var c=this.uiDialog.find(":tabbable"),d=c.filter(":first"),e=c.filter(":last");b.target!==e[0]&&b.target!==this.uiDialog[0]||b.shiftKey?b.target!==d[0]&&b.target!==this.uiDialog[0]||!b.shiftKey||(e.focus(1),b.preventDefault()):(d.focus(1),b.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var b;this.uiDialogTitlebar=a("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(b){a(b.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=a("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault(),this.close(a)}}),b=a("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(b),this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(a){this.options.title||a.html("&#160;"),a.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=a("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=a("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var b=this,c=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),a.isEmptyObject(c)||a.isArray(c)&&!c.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(a.each(c,function(c,d){var e,f;d=a.isFunction(d)?{click:d,text:c}:d,d=a.extend({type:"button"},d),e=d.click,d.click=function(){e.apply(b.element[0],arguments)},f={icons:d.icons,text:d.showText},delete d.icons,delete d.showText,a("<button></button>",d).button(f).appendTo(b.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,e){a(this).addClass("ui-dialog-dragging"),c._blockFrames(),c._trigger("dragStart",d,b(e))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(e,f){d.position=[f.position.left-c.document.scrollLeft(),f.position.top-c.document.scrollTop()],a(this).removeClass("ui-dialog-dragging"),c._unblockFrames(),c._trigger("dragStop",e,b(f))}})},_makeResizable:function(){function b(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var c=this,d=this.options,e=d.resizable,f=this.uiDialog.css("position"),g="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:g,start:function(d,e){a(this).addClass("ui-dialog-resizing"),c._blockFrames(),c._trigger("resizeStart",d,b(e))},resize:function(a,d){c._trigger("resize",a,b(d))},stop:function(e,f){d.height=a(this).height(),d.width=a(this).width(),a(this).removeClass("ui-dialog-resizing"),c._unblockFrames(),c._trigger("resizeStop",e,b(f))}}).css("position",f)},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show(),this.uiDialog.position(this.options.position),a||this.uiDialog.hide()},_setOptions:function(d){var e=this,f=!1,g={};a.each(d,function(a,d){e._setOption(a,d),a in b&&(f=!0),a in c&&(g[a]=d)}),f&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",g)},_setOption:function(a,b){var c,d,e=this.uiDialog;"dialogClass"===a&&e.removeClass(this.options.dialogClass).addClass(b),"disabled"!==a&&(this._super(a,b),"appendTo"===a&&this.uiDialog.appendTo(this._appendTo()),"buttons"===a&&this._createButtons(),"closeText"===a&&this.uiDialogTitlebarClose.button({label:""+b}),"draggable"===a&&(c=e.is(":data(ui-draggable)"),c&&!b&&e.draggable("destroy"),!c&&b&&this._makeDraggable()),"position"===a&&this._position(),"resizable"===a&&(d=e.is(":data(ui-resizable)"),d&&!b&&e.resizable("destroy"),d&&"string"==typeof b&&e.resizable("option","handles",b),d||b===!1||this._makeResizable()),"title"===a&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var a,b,c,d=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),d.minWidth>d.width&&(d.width=d.minWidth),a=this.uiDialog.css({height:"auto",width:d.width}).outerHeight(),b=Math.max(0,d.minHeight-a),c="number"==typeof d.maxHeight?Math.max(0,d.maxHeight-a):"none","auto"===d.height?this.element.css({minHeight:b,maxHeight:c,height:"auto"}):this.element.height(Math.max(0,d.height-a)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=a(this);return a("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){return a(b.target).closest(".ui-dialog").length?!0:!!a(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var b=this,c=this.widgetFullName;a.ui.dialog.overlayInstances||this._delay(function(){a.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(d){b._allowInteraction(d)||(d.preventDefault(),a(".ui-dialog:visible:last .ui-dialog-content").data(c)._focusTabbable())})}),this.overlay=a("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),a.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(a.ui.dialog.overlayInstances--,a.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),a.ui.dialog.overlayInstances=0,a.uiBackCompat!==!1&&a.widget("ui.dialog",a.ui.dialog,{_position:function(){var b,c=this.options.position,d=[],e=[0,0];c?(("string"==typeof c||"object"==typeof c&&"0"in c)&&(d=c.split?c.split(" "):[c[0],c[1]],1===d.length&&(d[1]=d[0]),a.each(["left","top"],function(a,b){+d[a]===d[a]&&(e[a]=d[a],d[a]=b)}),c={my:d[0]+(e[0]<0?e[0]:"+"+e[0])+" "+d[1]+(e[1]<0?e[1]:"+"+e[1]),at:d.join(" ")}),c=a.extend({},a.ui.dialog.prototype.options.position,c)):c=a.ui.dialog.prototype.options.position,b=this.uiDialog.is(":visible"),b||this.uiDialog.show(),this.uiDialog.position(c),b||this.uiDialog.hide()}})}(jQuery),function(a){a.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,a.proxy(function(a){this.options.disabled&&a.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(b){var c=a(b.target).closest(".ui-menu-item");!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(b),c.has(".ui-menu").length?this.expand(b):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var d,e,f,g,h,i=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:i=!1,e=this.previousFilter||"",f=String.fromCharCode(b.keyCode),g=!1,clearTimeout(this.filterTimer),f===e?g=!0:f=e+f,h=new RegExp("^"+c(f),"i"),d=this.activeMenu.children(".ui-menu-item").filter(function(){return h.test(a(this).children("a").text())}),d=g&&-1!==d.index(this.active.next())?this.active.nextAll(".ui-menu-item"):d,d.length||(f=String.fromCharCode(b.keyCode),h=new RegExp("^"+c(f),"i"),d=this.activeMenu.children(".ui-menu-item").filter(function(){return h.test(a(this).children("a").text())})),d.length?(this.focus(b,d),d.length>1?(this.previousFilter=f,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}i&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c=this.options.icons.submenu,d=this.element.find(this.options.menus);d.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),d=b.prev("a"),e=a("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);d.attr("aria-haspopup","true").prepend(e),b.attr("aria-labelledby",d.attr("id"))}),b=d.add(this.element),b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),b.children(":not(.ui-menu-item)").each(function(){var b=a(this);/[^\-\u2014\u2013\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")}),b.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu),this._super(a,b)},focus:function(a,b){var c,d;this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),d=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),c=b.children(".ui-menu"),c.length&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.height(),0>e?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))
},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer),this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element),this._close(d),this.blur(b),this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.children(".ui-menu-item")[b]()),this.focus(c,d)},nextPage:function(b){var c,d,e;return this.active?void(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d-e<0}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(b)},previousPage:function(b){var c,d,e;return this.active?void(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d+e>0}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item").first()))):void this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,c)}})}(jQuery),function(a,b){a.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(a){return a===b?this.options.value:(this.options.value=this._constrainedValue(a),void this._refreshValue())},_constrainedValue:function(a){return a===b&&(a=this.options.value),this.indeterminate=a===!1,"number"!=typeof a&&(a=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,a))},_setOptions:function(a){var b=a.value;delete a.value,this._super(a),this.options.value=this._constrainedValue(b),this._refreshValue()},_setOption:function(a,b){"max"===a&&(b=Math.max(this.min,b)),this._super(a,b)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var b=this.options.value,c=this._percentage();this.valueDiv.toggle(this.indeterminate||b>this.min).toggleClass("ui-corner-right",b===this.options.max).width(c.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=a("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":b}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==b&&(this.oldValue=b,this._trigger("change")),b===this.options.max&&this._trigger("complete")}})}(jQuery),function(a){var b=5;a.widget("ui.slider",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var b,c,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=[];for(c=d.values&&d.values.length||1,e.length>c&&(e.slice(c).remove(),e=e.slice(0,c)),b=e.length;c>b;b++)g.push(f);this.handles=e.add(a(g.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)})},_createRange:function(){var b=this.options,c="";b.range?(b.range===!0&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=a("<div></div>").appendTo(this.element),c="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(c+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))):this.range=a([])},_setupEvents:function(){var a=this.handles.add(this.range).filter("a");this._off(a),this._on(a,this._handleEvents),this._hoverable(a),this._focusable(a)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k=this,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var c=Math.abs(d-k.values(b));(e>c||e===c&&(b===k._lastChangedValue||k.values(b)===l.min))&&(e=c,f=a(this),g=b)}),h=this._start(b,g),h===!1?!1:(this._mouseSliding=!0,this._handleIndex=g,f.addClass("ui-state-active").focus(),i=f.offset(),j=!a(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=j?{left:0,top:0}:{left:b.pageX-i.left-f.width()/2,top:b.pageY-i.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,g,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._lastChangedValue=b,this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),void this._change(null,0)):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),void this._change(null,b);if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch("range"===b&&this.options.range===!0&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);if(this.options.values&&this.options.values.length){for(c=this.options.values.slice(),d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c}return[]},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){c=(i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())*100,k["horizontal"===i.orientation?"left":"bottom"]=c+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:h.animate}))),b=c}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),c=f!==e?(d-e)/(f-e)*100:0,k["horizontal"===this.orientation?"left":"bottom"]=c+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:c+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:c+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:h.animate}))},_handleEvents:{keydown:function(c){var d,e,f,g,h=a(c.target).data("ui-slider-handle-index");switch(c.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(c.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(c.target).addClass("ui-state-active"),d=this._start(c,h),d===!1))return}switch(g=this.options.step,e=f=this.options.values&&this.options.values.length?this.values(h):this.value(),c.keyCode){case a.ui.keyCode.HOME:f=this._valueMin();break;case a.ui.keyCode.END:f=this._valueMax();break;case a.ui.keyCode.PAGE_UP:f=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/b);break;case a.ui.keyCode.PAGE_DOWN:f=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/b);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(e===this._valueMax())return;f=this._trimAlignValue(e+g);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(e===this._valueMin())return;f=this._trimAlignValue(e-g)}this._slide(c,h,f)},click:function(a){a.preventDefault()},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}}})}(jQuery),function(a){function b(a){return function(){var b=this.element.val();a.apply(this,arguments),this._refresh(),b!==this.element.val()&&this._trigger("change")}}a.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b={},c=this.element;return a.each(["min","max","step"],function(a,d){var e=c.attr(d);void 0!==e&&e.length&&(b[d]=e)}),b},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(a){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",a)))},mousewheel:function(a,b){if(b){if(!this.spinning&&!this._start(a))return!1;this._spin((b>0?1:-1)*this.options.step,a),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100),a.preventDefault()}},"mousedown .ui-spinner-button":function(b){function c(){var a=this.element[0]===this.document[0].activeElement;a||(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d}))}var d;d=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),b.preventDefault(),c.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,c.call(this)}),this._start(b)!==!1&&this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){return a(b.currentTarget).hasClass("ui-state-active")?this._start(b)===!1?!1:void this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=a.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*a.height())&&a.height()>0&&a.height(a.height()),this.options.disabled&&this.disable()},_keydown:function(b){var c=this.options,d=a.ui.keyCode;switch(b.keyCode){case d.UP:return this._repeat(null,1,b),!0;case d.DOWN:return this._repeat(null,-1,b),!0;case d.PAGE_UP:return this._repeat(null,c.page,b),!0;case d.PAGE_DOWN:return this._repeat(null,-c.page,b),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(a){return this.spinning||this._trigger("start",a)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(a,b,c){a=a||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,b,c)},a),this._spin(b*this.options.step,c)},_spin:function(a,b){var c=this.value()||0;this.counter||(this.counter=1),c=this._adjustValue(c+a*this._increment(this.counter)),this.spinning&&this._trigger("spin",b,{value:c})===!1||(this._value(c),this.counter++)},_increment:function(b){var c=this.options.incremental;return c?a.isFunction(c)?c(b):Math.floor(b*b*b/5e4-b*b/500+17*b/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(a){var b=a.toString(),c=b.indexOf(".");return-1===c?0:b.length-c-1},_adjustValue:function(a){var b,c,d=this.options;return b=null!==d.min?d.min:0,c=a-b,c=Math.round(c/d.step)*d.step,a=b+c,a=parseFloat(a.toFixed(this._precision())),null!==d.max&&a>d.max?d.max:null!==d.min&&a<d.min?d.min:a},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(a,b){if("culture"===a||"numberFormat"===a){var c=this._parse(this.element.val());return this.options[a]=b,void this.element.val(this._format(c))}("max"===a||"min"===a||"step"===a)&&"string"==typeof b&&(b=this._parse(b)),"icons"===a&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(b.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(b.down)),this._super(a,b),"disabled"===a&&(b?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:b(function(a){this._super(a),this._value(this.element.val())}),_parse:function(a){return"string"==typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):+a),""===a||isNaN(a)?null:a},_format:function(a){return""===a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(a,b){var c;""!==a&&(c=this._parse(a),null!==c&&(b||(c=this._adjustValue(c)),a=this._format(c))),this.element.val(a),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:b(function(a){this._stepUp(a)}),_stepUp:function(a){this._start()&&(this._spin((a||1)*this.options.step),this._stop())},stepDown:b(function(a){this._stepDown(a)}),_stepDown:function(a){this._start()&&(this._spin((a||1)*-this.options.step),this._stop())},pageUp:b(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:b(function(a){this._stepDown((a||1)*this.options.page)}),value:function(a){return arguments.length?void b(this._value).call(this,a):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(a,b){function c(){return++e}function d(a){return a.hash.length>1&&decodeURIComponent(a.href.replace(f,""))===decodeURIComponent(location.href.replace(f,""))}var e=0,f=/#.*$/;a.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var b=this,c=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",c.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),c.active=this._initialActive(),a.isArray(c.disabled)&&(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(c.active):a(),this._refresh(),this.active.length&&this.load(c.active)},_initialActive:function(){var b=this.options.active,c=this.options.collapsible,d=location.hash.substring(1);return null===b&&(d&&this.tabs.each(function(c,e){return a(e).attr("aria-controls")===d?(b=c,!1):void 0}),null===b&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===b||-1===b)&&(b=this.tabs.length?0:!1)),b!==!1&&(b=this.tabs.index(this.tabs.eq(b)),-1===b&&(b=c?!1:0)),!c&&b===!1&&this.anchors.length&&(b=0),b},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var c=a(this.document[0].activeElement).closest("li"),d=this.tabs.index(c),e=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:d++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=!1,d--;break;case a.ui.keyCode.END:d=this.anchors.length-1;break;case a.ui.keyCode.HOME:d=0;break;case a.ui.keyCode.SPACE:return b.preventDefault(),clearTimeout(this.activating),void this._activate(d);case a.ui.keyCode.ENTER:return b.preventDefault(),clearTimeout(this.activating),void this._activate(d===this.options.active?!1:d);default:return}b.preventDefault(),clearTimeout(this.activating),d=this._focusNextTab(d,e),b.ctrlKey||(c.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(b){this._handlePageNav(b)||b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.focus())},_handlePageNav:function(b){return b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(b,c){function d(){return b>e&&(b=0),0>b&&(b=e),b}for(var e=this.tabs.length-1;-1!==a.inArray(d(),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){return a=this._findNextTab(a,b),this.tabs.eq(a).focus(),a},_setOption:function(a,b){return"active"===a?void this._activate(b):"disabled"===a?void this._setupDisabled(b):(this._super(a,b),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",b),b||this.options.active!==!1||this._activate(0)),"event"===a&&this._setupEvents(b),void("heightStyle"===a&&this._setupHeightStyle(b)))},_tabId:function(a){return a.attr("aria-controls")||"ui-tabs-"+c()},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)}),this._processTabs(),b.active!==!1&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=a(),this.anchors.each(function(c,e){var f,g,h,i=a(e).uniqueId().attr("id"),j=a(e).closest("li"),k=j.attr("aria-controls");d(e)?(f=e.hash,g=b.element.find(b._sanitizeSelector(f))):(h=b._tabId(j),f="#"+h,g=b.element.find(f),g.length||(g=b._createPanel(h),g.insertAfter(b.panels[c-1]||b.tablist)),g.attr("aria-live","polite")),g.length&&(b.panels=b.panels.add(g)),k&&j.data("ui-tabs-aria-controls",k),j.attr({"aria-controls":f.substring(1),"aria-labelledby":i}),g.attr("aria-labelledby",i)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var c,d=0;c=this.tabs[d];d++)b===!0||-1!==a.inArray(d,b)?a(c).addClass("ui-state-disabled").attr("aria-disabled","true"):a(c).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=b},_setupEvents:function(b){var c={click:function(a){a.preventDefault()}};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,c),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d=this.element.parent();"fill"===b?(c=d.height(),c-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e.closest("li"),g=f[0]===d[0],h=g&&c.collapsible,i=h?a():this._getPanelForTab(f),j=d.length?this._getPanelForTab(d):a(),k={oldTab:d,oldPanel:j,newTab:h?a():f,newPanel:i};b.preventDefault(),f.hasClass("ui-state-disabled")||f.hasClass("ui-tabs-loading")||this.running||g&&!c.collapsible||this._trigger("beforeActivate",b,k)===!1||(c.active=h?!1:this.tabs.index(f),this.active=g?a():f,this.xhr&&this.xhr.abort(),j.length||i.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),i.length&&this.load(this.tabs.index(f),b),this._toggle(b,k))},_toggle:function(b,c){function d(){f.running=!1,f._trigger("activate",b,c)}function e(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),g.length&&f.options.show?f._show(g,f.options.show,d):(g.show(),d())}var f=this,g=c.newPanel,h=c.oldPanel;this.running=!0,h.length&&this.options.hide?this._hide(h,this.options.hide,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),e()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),h.hide(),e()),h.attr({"aria-expanded":"false","aria-hidden":"true"}),c.oldTab.attr("aria-selected","false"),g.length&&h.length?c.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),g.attr({"aria-expanded":"true","aria-hidden":"false"}),c.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(b){var c,d=this._findActive(b);d[0]!==this.active[0]&&(d.length||(d=this.active),c=d.find(".ui-tabs-anchor")[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return b===!1?a():this.tabs.eq(b)},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");c?b.attr("aria-controls",c).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(c){var d=this.options.disabled;
d!==!1&&(c===b?d=!1:(c=this._getIndex(c),d=a.isArray(d)?a.map(d,function(a){return a!==c?a:null}):a.map(this.tabs,function(a,b){return b!==c?b:null})),this._setupDisabled(d))},disable:function(c){var d=this.options.disabled;if(d!==!0){if(c===b)d=!0;else{if(c=this._getIndex(c),-1!==a.inArray(c,d))return;d=a.isArray(d)?a.merge([c],d).sort():[c]}this._setupDisabled(d)}},load:function(b,c){b=this._getIndex(b);var e=this,f=this.tabs.eq(b),g=f.find(".ui-tabs-anchor"),h=this._getPanelForTab(f),i={tab:f,panel:h};d(g[0])||(this.xhr=a.neoajax(this._neoajaxSettings(g,c,i)),this.xhr&&"canceled"!==this.xhr.statusText&&(f.addClass("ui-tabs-loading"),h.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){h.html(a),e._trigger("load",c,i)},1)}).complete(function(a,b){setTimeout(function(){"abort"===b&&e.panels.stop(!1,!0),f.removeClass("ui-tabs-loading"),h.removeAttr("aria-busy"),a===e.xhr&&delete e.xhr},1)})))},_neoajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,neoajaxSettings:f},d))}}},_getPanelForTab:function(b){var c=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+c))}})}(jQuery),function(a){function b(b,c){var d=(b.attr("aria-describedby")||"").split(/\s+/);d.push(c),b.data("ui-tooltip-id",c).attr("aria-describedby",a.trim(d.join(" ")))}function c(b){var c=b.data("ui-tooltip-id"),d=(b.attr("aria-describedby")||"").split(/\s+/),e=a.inArray(c,d);-1!==e&&d.splice(e,1),b.removeData("ui-tooltip-id"),d=a.trim(d.join(" ")),d?b.attr("aria-describedby",d):b.removeAttr("aria-describedby")}var d=0;a.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var b=a(this).attr("title")||"";return a("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(b,c){var d=this;return"disabled"===b?(this[c?"_disable":"_enable"](),void(this.options[b]=c)):(this._super(b,c),void("content"===b&&a.each(this.tooltips,function(a,b){d._updateContent(b)})))},_disable:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0],b.close(e,!0)}),this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var c=this,d=a(b?b.target:this.element).closest(this.options.items);d.length&&!d.data("ui-tooltip-id")&&(d.attr("title")&&d.data("ui-tooltip-title",d.attr("title")),d.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&d.parents().each(function(){var b,d=a(this);d.data("ui-tooltip-open")&&(b=a.Event("blur"),b.target=b.currentTarget=this,c.close(b,!0)),d.attr("title")&&(d.uniqueId(),c.parents[this.id]={element:this,title:d.attr("title")},d.attr("title",""))}),this._updateContent(d,b))},_updateContent:function(a,b){var c,d=this.options.content,e=this,f=b?b.type:null;return"string"==typeof d?this._open(b,a,d):(c=d.call(a[0],function(c){a.data("ui-tooltip-open")&&e._delay(function(){b&&(b.type=f),this._open(b,a,c)})}),void(c&&this._open(b,a,c)))},_open:function(c,d,e){function f(a){j.of=a,g.is(":hidden")||g.position(j)}var g,h,i,j=a.extend({},this.options.position);if(e){if(g=this._find(d),g.length)return void g.find(".ui-tooltip-content").html(e);d.is("[title]")&&(c&&"mouseover"===c.type?d.attr("title",""):d.removeAttr("title")),g=this._tooltip(d),b(d,g.attr("id")),g.find(".ui-tooltip-content").html(e),this.options.track&&c&&/^mouse/.test(c.type)?(this._on(this.document,{mousemove:f}),f(c)):g.position(a.extend({of:d},this.options.position)),g.hide(),this._show(g,this.options.show),this.options.show&&this.options.show.delay&&(i=this.delayedShow=setInterval(function(){g.is(":visible")&&(f(j.of),clearInterval(i))},a.fx.interval)),this._trigger("open",c,{tooltip:g}),h={keyup:function(b){if(b.keyCode===a.ui.keyCode.ESCAPE){var c=a.Event(b);c.currentTarget=d[0],this.close(c,!0)}},remove:function(){this._removeTooltip(g)}},c&&"mouseover"!==c.type||(h.mouseleave="close"),c&&"focusin"!==c.type||(h.focusout="close"),this._on(!0,d,h)}},close:function(b){var d=this,e=a(b?b.currentTarget:this.element),f=this._find(e);this.closing||(clearInterval(this.delayedShow),e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title")),c(e),f.stop(!0),this._hide(f,this.options.hide,function(){d._removeTooltip(a(this))}),e.removeData("ui-tooltip-open"),this._off(e,"mouseleave focusout keyup"),e[0]!==this.element[0]&&this._off(e,"remove"),this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&a.each(this.parents,function(b,c){a(c.element).attr("title",c.title),delete d.parents[b]}),this.closing=!0,this._trigger("close",b,{tooltip:f}),this.closing=!1)},_tooltip:function(b){var c="ui-tooltip-"+d++,e=a("<div>").attr({id:c,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return a("<div>").addClass("ui-tooltip-content").appendTo(e),e.appendTo(this.document[0].body),this.tooltips[c]=b,e},_find:function(b){var c=b.data("ui-tooltip-id");return c?a("#"+c):a()},_removeTooltip:function(a){a.remove(),delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0],b.close(e,!0),a("#"+c).remove(),d.data("ui-tooltip-title")&&(d.attr("title",d.data("ui-tooltip-title")),d.removeData("ui-tooltip-title"))})}})}(jQuery),function(a,b){var c="ui-effects-";a.effects={effect:{}},function(a,b){function c(a,b,c){var d=l[b.type]||{};return null==a?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a)}function d(b){var c=j(),d=c._rgba=[];return b=b.toLowerCase(),o(i,function(a,e){var f,g=e.re.exec(b),h=g&&e.parse(g),i=e.space||"rgba";return h?(f=c[i](h),c[k[i].cache]=f[k[i].cache],d=c._rgba=f._rgba,!1):void 0}),d.length?("0,0,0,0"===d.join()&&a.extend(d,f.transparent),c):f[b]}function e(a,b,c){return c=(c+1)%1,1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}var f,g="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",h=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],j=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},k={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},l={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},m=j.support={},n=a("<p>")[0],o=a.each;n.style.cssText="background-color:rgba(1,1,1,.5)",m.rgba=n.style.backgroundColor.indexOf("rgba")>-1,o(k,function(a,b){b.cache="_"+a,b.props.alpha={idx:3,type:"percent",def:1}}),j.fn=a.extend(j.prototype,{parse:function(e,g,h,i){if(e===b)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=a(e).css(g),g=b);var l=this,m=a.type(e),n=this._rgba=[];return g!==b&&(e=[e,g,h,i],m="array"),"string"===m?this.parse(d(e)||f._default):"array"===m?(o(k.rgba.props,function(a,b){n[b.idx]=c(e[b.idx],b)}),this):"object"===m?(e instanceof j?o(k,function(a,b){e[b.cache]&&(l[b.cache]=e[b.cache].slice())}):o(k,function(b,d){var f=d.cache;o(d.props,function(a,b){if(!l[f]&&d.to){if("alpha"===a||null==e[a])return;l[f]=d.to(l._rgba)}l[f][b.idx]=c(e[a],b,!0)}),l[f]&&a.inArray(null,l[f].slice(0,3))<0&&(l[f][3]=1,d.from&&(l._rgba=d.from(l[f])))}),this):void 0},is:function(a){var b=j(a),c=!0,d=this;return o(k,function(a,e){var f,g=b[e.cache];return g&&(f=d[e.cache]||e.to&&e.to(d._rgba)||[],o(e.props,function(a,b){return null!=g[b.idx]?c=g[b.idx]===f[b.idx]:void 0})),c}),c},_space:function(){var a=[],b=this;return o(k,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var d=j(a),e=d._space(),f=k[e],g=0===this.alpha()?j("transparent"):this,h=g[f.cache]||f.to(g._rgba),i=h.slice();return d=d[f.cache],o(f.props,function(a,e){var f=e.idx,g=h[f],j=d[f],k=l[e.type]||{};null!==j&&(null===g?i[f]=j:(k.mod&&(j-g>k.mod/2?g+=k.mod:g-j>k.mod/2&&(g-=k.mod)),i[f]=c((j-g)*b+g,e)))}),this[e](i)},blend:function(b){if(1===this._rgba[3])return this;var c=this._rgba.slice(),d=c.pop(),e=j(b)._rgba;return j(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?b>2?1:0:a});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return null==a&&(a=b>2?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(255*d)),"#"+a.map(c,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),j.fn.parse.prototype=j.fn,k.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,g=a[3],h=Math.max(d,e,f),i=Math.min(d,e,f),j=h-i,k=h+i,l=.5*k;return b=i===h?0:d===h?60*(e-f)/j+360:e===h?60*(f-d)/j+120:60*(d-e)/j+240,c=0===j?0:.5>=l?j/k:j/(2-k),[Math.round(b)%360,c,l,null==g?1:g]},k.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],f=a[3],g=.5>=d?d*(1+c):d+c-d*c,h=2*d-g;return[Math.round(255*e(h,g,b+1/3)),Math.round(255*e(h,g,b)),Math.round(255*e(h,g,b-1/3)),f]},o(k,function(d,e){var f=e.props,g=e.cache,i=e.to,k=e.from;j.fn[d]=function(d){if(i&&!this[g]&&(this[g]=i(this._rgba)),d===b)return this[g].slice();var e,h=a.type(d),l="array"===h||"object"===h?d:arguments,m=this[g].slice();return o(f,function(a,b){var d=l["object"===h?a:b.idx];null==d&&(d=m[b.idx]),m[b.idx]=c(d,b)}),k?(e=j(k(m)),e[g]=m,e):j(m)},o(f,function(b,c){j.fn[b]||(j.fn[b]=function(e){var f,g=a.type(e),i="alpha"===b?this._hsla?"hsla":"rgba":d,j=this[i](),k=j[c.idx];return"undefined"===g?k:("function"===g&&(e=e.call(this,k),g=a.type(e)),null==e&&c.empty?this:("string"===g&&(f=h.exec(e),f&&(e=k+parseFloat(f[2])*("+"===f[1]?1:-1))),j[c.idx]=e,this[i](j)))})})}),j.hook=function(b){var c=b.split(" ");o(c,function(b,c){a.cssHooks[c]={set:function(b,e){var f,g,h="";if("transparent"!==e&&("string"!==a.type(e)||(f=d(e)))){if(e=j(f||e),!m.rgba&&1!==e._rgba[3]){for(g="backgroundColor"===c?b.parentNode:b;(""===h||"transparent"===h)&&g&&g.style;)try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(i){}e=e.blend(h&&"transparent"!==h?h:"_default")}e=e.toRgbaString()}try{b.style[c]=e}catch(i){}}},a.fx.step[c]=function(b){b.colorInit||(b.start=j(b.elem,c),b.end=j(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})},j.hook(g),a.cssHooks.borderColor={expand:function(a){var b={};return o(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}},f=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function c(b){var c,d,e=b.ownerDocument.defaultView?b.ownerDocument.defaultView.getComputedStyle(b,null):b.currentStyle,f={};if(e&&e.length&&e[0]&&e[e[0]])for(d=e.length;d--;)c=e[d],"string"==typeof e[c]&&(f[a.camelCase(c)]=e[c]);else for(c in e)"string"==typeof e[c]&&(f[c]=e[c]);return f}function d(b,c){var d,e,g={};for(d in c)e=c[d],b[d]!==e&&(f[d]||(a.fx.step[d]||!isNaN(parseFloat(e)))&&(g[d]=e));return g}var e=["add","remove","toggle"],f={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=function(a){("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)&&(jQuery.style(a.elem,c,a.end),a.setAttr=!0)}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a.effects.animateClass=function(b,f,g,h){var i=a.speed(f,g,h);return this.queue(function(){var f,g=a(this),h=g.attr("class")||"",j=i.children?g.find("*").addBack():g;j=j.map(function(){var b=a(this);return{el:b,start:c(this)}}),f=function(){a.each(e,function(a,c){b[c]&&g[c+"Class"](b[c])})},f(),j=j.map(function(){return this.end=c(this.el[0]),this.diff=d(this.start,this.end),this}),g.attr("class",h),j=j.map(function(){var b=this,c=a.Deferred(),d=a.extend({},i,{queue:!1,complete:function(){c.resolve(b)}});return this.el.animate(this.diff,d),c.promise()}),a.when.apply(a,j.get()).done(function(){f(),a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})}),i.complete.call(g[0])})})},a.fn.extend({addClass:function(b){return function(c,d,e,f){return d?a.effects.animateClass.call(this,{add:c},d,e,f):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(c,d,e,f){return arguments.length>1?a.effects.animateClass.call(this,{remove:c},d,e,f):b.apply(this,arguments)}}(a.fn.removeClass),toggleClass:function(c){return function(d,e,f,g,h){return"boolean"==typeof e||e===b?f?a.effects.animateClass.call(this,e?{add:d}:{remove:d},f,g,h):c.apply(this,arguments):a.effects.animateClass.call(this,{toggle:d},e,f,g)}}(a.fn.toggleClass),switchClass:function(b,c,d,e,f){return a.effects.animateClass.call(this,{add:c,remove:b},d,e,f)}})}(),function(){function d(b,c,d,e){return a.isPlainObject(b)&&(c=b,b=b.effect),b={effect:b},null==c&&(c={}),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c&&a.extend(b,c),d=d||c.duration,b.duration=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,b.complete=e||c.complete,b}function e(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects.effect[b]?a.isFunction(b)?!0:"object"!=typeof b||b.effect?!1:!0:!0}a.extend(a.effects,{version:"1.10.3",save:function(a,b){for(var d=0;d<b.length;d++)null!==b[d]&&a.data(c+b[d],a[0].style[b[d]])},restore:function(a,d){var e,f;for(f=0;f<d.length;f++)null!==d[f]&&(e=a.data(c+d[f]),e===b&&(e=""),a.css(d[f],e))},setMode:function(a,b){return"toggle"===b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},f=document.activeElement;try{f.id}catch(g){f=document.body}return b.wrap(d),(b[0]===f||a.contains(b[0],f))&&a(f).focus(),d=b.parent(),"static"===b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),b.css(e),d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;return b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus()),b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(){function b(b){function d(){a.isFunction(f)&&f.call(e[0]),a.isFunction(b)&&b()}var e=a(this),f=c.complete,h=c.mode;(e.is(":hidden")?"hide"===h:"show"===h)?(e[h](),d()):g.call(e[0],c,d)}var c=d.apply(this,arguments),e=c.mode,f=c.queue,g=a.effects.effect[c.effect];return a.fx.off||!g?e?this[e](c.duration,c.complete):this.each(function(){c.complete&&c.complete.call(this)}):f===!1?this.each(b):this.queue(f||"fx",b)},show:function(a){return function(b){if(e(b))return a.apply(this,arguments);var c=d.apply(this,arguments);return c.mode="show",this.effect.call(this,c)}}(a.fn.show),hide:function(a){return function(b){if(e(b))return a.apply(this,arguments);var c=d.apply(this,arguments);return c.mode="hide",this.effect.call(this,c)}}(a.fn.hide),toggle:function(a){return function(b){if(e(b)||"boolean"==typeof b)return a.apply(this,arguments);var c=d.apply(this,arguments);return c.mode="toggle",this.effect.call(this,c)}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}})}(),function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,c){b[c]=function(b){return Math.pow(b,a+2)}}),a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(b,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:1-c(-2*a+2)/2}})}()}(jQuery),function(a){var b=/up|down|vertical/,c=/up|left|vertical|horizontal/;a.effects.effect.blind=function(d,e){var f,g,h,i=a(this),j=["position","top","bottom","left","right","height","width"],k=a.effects.setMode(i,d.mode||"hide"),l=d.direction||"up",m=b.test(l),n=m?"height":"width",o=m?"top":"left",p=c.test(l),q={},r="show"===k;i.parent().is(".ui-effects-wrapper")?a.effects.save(i.parent(),j):a.effects.save(i,j),i.show(),f=a.effects.createWrapper(i).css({overflow:"hidden"}),g=f[n](),h=parseFloat(f.css(o))||0,q[n]=r?g:0,p||(i.css(m?"bottom":"right",0).css(m?"top":"left","auto").css({position:"absolute"}),q[o]=r?h:g+h),r&&(f.css(n,0),p||f.css(o,h+g)),f.animate(q,{duration:d.duration,easing:d.easing,queue:!1,complete:function(){"hide"===k&&i.hide(),a.effects.restore(i,j),a.effects.removeWrapper(i),e()}})}}(jQuery),function(a){a.effects.effect.bounce=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","height","width"],i=a.effects.setMode(g,b.mode||"effect"),j="hide"===i,k="show"===i,l=b.direction||"up",m=b.distance,n=b.times||5,o=2*n+(k||j?1:0),p=b.duration/o,q=b.easing,r="up"===l||"down"===l?"top":"left",s="up"===l||"left"===l,t=g.queue(),u=t.length;for((k||j)&&h.push("opacity"),a.effects.save(g,h),g.show(),a.effects.createWrapper(g),m||(m=g["top"===r?"outerHeight":"outerWidth"]()/3),k&&(f={opacity:1},f[r]=0,g.css("opacity",0).css(r,s?2*-m:2*m).animate(f,p,q)),j&&(m/=Math.pow(2,n-1)),f={},f[r]=0,d=0;n>d;d++)e={},e[r]=(s?"-=":"+=")+m,g.animate(e,p,q).animate(f,p,q),m=j?2*m:m/2;j&&(e={opacity:0},e[r]=(s?"-=":"+=")+m,g.animate(e,p,q)),g.queue(function(){j&&g.hide(),a.effects.restore(g,h),a.effects.removeWrapper(g),c()}),u>1&&t.splice.apply(t,[1,0].concat(t.splice(u,o+1))),g.dequeue()}}(jQuery),function(a){a.effects.effect.clip=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","height","width"],i=a.effects.setMode(g,b.mode||"hide"),j="show"===i,k=b.direction||"vertical",l="vertical"===k,m=l?"height":"width",n=l?"top":"left",o={};a.effects.save(g,h),g.show(),d=a.effects.createWrapper(g).css({overflow:"hidden"}),e="IMG"===g[0].tagName?d:g,f=e[m](),j&&(e.css(m,0),e.css(n,f/2)),o[m]=j?f:0,o[n]=j?0:f/2,e.animate(o,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){j||g.hide(),a.effects.restore(g,h),a.effects.removeWrapper(g),c()}})}}(jQuery),function(a){a.effects.effect.drop=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","opacity","height","width"],g=a.effects.setMode(e,b.mode||"hide"),h="show"===g,i=b.direction||"left",j="up"===i||"down"===i?"top":"left",k="up"===i||"left"===i?"pos":"neg",l={opacity:h?1:0};a.effects.save(e,f),e.show(),a.effects.createWrapper(e),d=b.distance||e["top"===j?"outerHeight":"outerWidth"](!0)/2,h&&e.css("opacity",0).css(j,"pos"===k?-d:d),l[j]=(h?"pos"===k?"+=":"-=":"pos"===k?"-=":"+=")+d,e.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}})}}(jQuery),function(a){a.effects.effect.explode=function(b,c){function d(){t.push(this),t.length===l*m&&e()}function e(){n.css({visibility:"visible"}),a(t).remove(),p||n.hide(),c()}var f,g,h,i,j,k,l=b.pieces?Math.round(Math.sqrt(b.pieces)):3,m=l,n=a(this),o=a.effects.setMode(n,b.mode||"hide"),p="show"===o,q=n.show().css("visibility","hidden").offset(),r=Math.ceil(n.outerWidth()/m),s=Math.ceil(n.outerHeight()/l),t=[];for(f=0;l>f;f++)for(i=q.top+f*s,k=f-(l-1)/2,g=0;m>g;g++)h=q.left+g*r,j=g-(m-1)/2,n.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-g*r,top:-f*s}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:r,height:s,left:h+(p?j*r:0),top:i+(p?k*s:0),opacity:p?0:1}).animate({left:h+(p?0:j*r),top:i+(p?0:k*s),opacity:p?1:0},b.duration||500,b.easing,d)}}(jQuery),function(a){a.effects.effect.fade=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"toggle");d.animate({opacity:e},{queue:!1,duration:b.duration,easing:b.easing,complete:c})}}(jQuery),function(a){a.effects.effect.fold=function(b,c){var d,e,f=a(this),g=["position","top","bottom","left","right","height","width"],h=a.effects.setMode(f,b.mode||"hide"),i="show"===h,j="hide"===h,k=b.size||15,l=/([0-9]+)%/.exec(k),m=!!b.horizFirst,n=i!==m,o=n?["width","height"]:["height","width"],p=b.duration/2,q={},r={};a.effects.save(f,g),f.show(),d=a.effects.createWrapper(f).css({overflow:"hidden"}),e=n?[d.width(),d.height()]:[d.height(),d.width()],l&&(k=parseInt(l[1],10)/100*e[j?0:1]),i&&d.css(m?{height:0,width:k}:{height:k,width:0}),q[o[0]]=i?e[0]:k,r[o[1]]=i?e[1]:0,d.animate(q,p,b.easing).animate(r,p,b.easing,function(){j&&f.hide(),a.effects.restore(f,g),a.effects.removeWrapper(f),c()})}}(jQuery),function(a){a.effects.effect.highlight=function(b,c){var d=a(this),e=["backgroundImage","backgroundColor","opacity"],f=a.effects.setMode(d,b.mode||"show"),g={backgroundColor:d.css("backgroundColor")};"hide"===f&&(g.opacity=0),a.effects.save(d,e),d.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(g,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide(),a.effects.restore(d,e),c()}})}}(jQuery),function(a){a.effects.effect.pulsate=function(b,c){var d,e=a(this),f=a.effects.setMode(e,b.mode||"show"),g="show"===f,h="hide"===f,i=g||"hide"===f,j=2*(b.times||5)+(i?1:0),k=b.duration/j,l=0,m=e.queue(),n=m.length;for((g||!e.is(":visible"))&&(e.css("opacity",0).show(),l=1),d=1;j>d;d++)e.animate({opacity:l},k,b.easing),l=1-l;e.animate({opacity:l},k,b.easing),e.queue(function(){h&&e.hide(),c()}),n>1&&m.splice.apply(m,[1,0].concat(m.splice(n,j+1))),e.dequeue()}}(jQuery),function(a){a.effects.effect.puff=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"hide"),f="hide"===e,g=parseInt(b.percent,10)||150,h=g/100,i={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()};a.extend(b,{effect:"scale",queue:!1,fade:!0,mode:e,complete:c,percent:f?g:100,from:f?i:{height:i.height*h,width:i.width*h,outerHeight:i.outerHeight*h,outerWidth:i.outerWidth*h}}),d.effect(b)},a.effects.effect.scale=function(b,c){var d=a(this),e=a.extend(!0,{},b),f=a.effects.setMode(d,b.mode||"effect"),g=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"hide"===f?0:100),h=b.direction||"both",i=b.origin,j={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()},k={y:"horizontal"!==h?g/100:1,x:"vertical"!==h?g/100:1};e.effect="size",e.queue=!1,e.complete=c,"effect"!==f&&(e.origin=i||["middle","center"],e.restore=!0),e.from=b.from||("show"===f?{height:0,width:0,outerHeight:0,outerWidth:0}:j),e.to={height:j.height*k.y,width:j.width*k.x,outerHeight:j.outerHeight*k.y,outerWidth:j.outerWidth*k.x},e.fade&&("show"===f&&(e.from.opacity=0,e.to.opacity=1),"hide"===f&&(e.from.opacity=1,e.to.opacity=0)),d.effect(e)},a.effects.effect.size=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","width","height","overflow","opacity"],i=["position","top","bottom","left","right","overflow","opacity"],j=["width","height","overflow"],k=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],m=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],n=a.effects.setMode(g,b.mode||"effect"),o=b.restore||"effect"!==n,p=b.scale||"both",q=b.origin||["middle","center"],r=g.css("position"),s=o?h:i,t={height:0,width:0,outerHeight:0,outerWidth:0};"show"===n&&g.show(),d={height:g.height(),width:g.width(),outerHeight:g.outerHeight(),outerWidth:g.outerWidth()},"toggle"===b.mode&&"show"===n?(g.from=b.to||t,g.to=b.from||d):(g.from=b.from||("show"===n?t:d),g.to=b.to||("hide"===n?t:d)),f={from:{y:g.from.height/d.height,x:g.from.width/d.width},to:{y:g.to.height/d.height,x:g.to.width/d.width}},("box"===p||"both"===p)&&(f.from.y!==f.to.y&&(s=s.concat(l),g.from=a.effects.setTransition(g,l,f.from.y,g.from),g.to=a.effects.setTransition(g,l,f.to.y,g.to)),f.from.x!==f.to.x&&(s=s.concat(m),g.from=a.effects.setTransition(g,m,f.from.x,g.from),g.to=a.effects.setTransition(g,m,f.to.x,g.to))),("content"===p||"both"===p)&&f.from.y!==f.to.y&&(s=s.concat(k).concat(j),g.from=a.effects.setTransition(g,k,f.from.y,g.from),g.to=a.effects.setTransition(g,k,f.to.y,g.to)),a.effects.save(g,s),g.show(),a.effects.createWrapper(g),g.css("overflow","hidden").css(g.from),q&&(e=a.effects.getBaseline(q,d),g.from.top=(d.outerHeight-g.outerHeight())*e.y,g.from.left=(d.outerWidth-g.outerWidth())*e.x,g.to.top=(d.outerHeight-g.to.outerHeight)*e.y,g.to.left=(d.outerWidth-g.to.outerWidth)*e.x),g.css(g.from),("content"===p||"both"===p)&&(l=l.concat(["marginTop","marginBottom"]).concat(k),m=m.concat(["marginLeft","marginRight"]),j=h.concat(l).concat(m),g.find("*[width]").each(function(){var c=a(this),d={height:c.height(),width:c.width(),outerHeight:c.outerHeight(),outerWidth:c.outerWidth()};o&&a.effects.save(c,j),c.from={height:d.height*f.from.y,width:d.width*f.from.x,outerHeight:d.outerHeight*f.from.y,outerWidth:d.outerWidth*f.from.x},c.to={height:d.height*f.to.y,width:d.width*f.to.x,outerHeight:d.height*f.to.y,outerWidth:d.width*f.to.x},f.from.y!==f.to.y&&(c.from=a.effects.setTransition(c,l,f.from.y,c.from),c.to=a.effects.setTransition(c,l,f.to.y,c.to)),f.from.x!==f.to.x&&(c.from=a.effects.setTransition(c,m,f.from.x,c.from),c.to=a.effects.setTransition(c,m,f.to.x,c.to)),c.css(c.from),c.animate(c.to,b.duration,b.easing,function(){o&&a.effects.restore(c,j)})})),g.animate(g.to,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){0===g.to.opacity&&g.css("opacity",g.from.opacity),"hide"===n&&g.hide(),a.effects.restore(g,s),o||("static"===r?g.css({position:"relative",top:g.to.top,left:g.to.left}):a.each(["top","left"],function(a,b){g.css(b,function(b,c){var d=parseInt(c,10),e=a?g.to.left:g.to.top;return"auto"===c?e+"px":d+e+"px"})})),a.effects.removeWrapper(g),c()}})}}(jQuery),function(a){a.effects.effect.shake=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","height","width"],g=a.effects.setMode(e,b.mode||"effect"),h=b.direction||"left",i=b.distance||20,j=b.times||3,k=2*j+1,l=Math.round(b.duration/k),m="up"===h||"down"===h?"top":"left",n="up"===h||"left"===h,o={},p={},q={},r=e.queue(),s=r.length;for(a.effects.save(e,f),e.show(),a.effects.createWrapper(e),o[m]=(n?"-=":"+=")+i,p[m]=(n?"+=":"-=")+2*i,q[m]=(n?"-=":"+=")+2*i,e.animate(o,l,b.easing),d=1;j>d;d++)e.animate(p,l,b.easing).animate(q,l,b.easing);e.animate(p,l,b.easing).animate(o,l/2,b.easing).queue(function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}),s>1&&r.splice.apply(r,[1,0].concat(r.splice(s,k+1))),e.dequeue()}}(jQuery),function(a){a.effects.effect.slide=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","width","height"],g=a.effects.setMode(e,b.mode||"show"),h="show"===g,i=b.direction||"left",j="up"===i||"down"===i?"top":"left",k="up"===i||"left"===i,l={};a.effects.save(e,f),e.show(),d=b.distance||e["top"===j?"outerHeight":"outerWidth"](!0),a.effects.createWrapper(e).css({overflow:"hidden"}),h&&e.css(j,k?isNaN(d)?"-"+d:-d:d),l[j]=(h?k?"+=":"-=":k?"-=":"+=")+d,e.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}})}}(jQuery),function(a){a.effects.effect.transfer=function(b,c){var d=a(this),e=a(b.to),f="fixed"===e.css("position"),g=a("body"),h=f?g.scrollTop():0,i=f?g.scrollLeft():0,j=e.offset(),k={top:j.top-h,left:j.left-i,height:e.innerHeight(),width:e.innerWidth()},l=d.offset(),m=a("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(b.className).css({top:l.top-h,left:l.left-i,height:d.innerHeight(),width:d.innerWidth(),position:f?"fixed":"absolute"}).animate(k,b.duration,b.easing,function(){m.remove(),c()})}}(jQuery),define("jquery.ui",function(){}),jQuery(function(a){a.datepicker.regional["zh-CN"]={clearText:"清除",clearStatus:"清除已选日期",closeText:"关闭",closeStatus:"不改变当前选择",prevText:"<上月",prevStatus:"显示上月",prevBigText:"<<",prevBigStatus:"显示上一年",nextText:"下月>",nextStatus:"显示下月",nextBigText:">>",nextBigStatus:"显示下一年",currentText:"今天",currentStatus:"显示本月",monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthNamesShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthStatus:"选择月份",yearStatus:"选择年份",weekHeader:"周",weekStatus:"年内周次",dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],dayStatus:"设置 DD 为一周起始",dateStatus:"选择 m月 d日, DD",dateFormat:"yy/mm/dd",firstDay:1,initStatus:"请选择日期",chooseTime:"请选择时间",timeText:"时间：",hourText:"小时：",minuteText:"分钟：",secondText:"秒：",isRTL:!1},a.datepicker.setDefaults(a.datepicker.regional["zh-CN"])}),define("datePickerZH",["jquery.ui"],function(a){return function(){var b;return b||a.$.datePicker}}(this));var curTrigger="";NoticeSettingTita.prototype={_define:function(){this.id=this.conf.id||"tita",this.wrap=this.conf.wrap,this.trigger=this.conf.trigger,this.loginUserId=this.conf.loginUserId,this.tenantId=this.conf.tenantId,this.apiPath=this.conf.apiPath,this.submitCallback=this.conf.submitCallback&&"function"==typeof this.conf.submitCallback?this.conf.submitCallback:null,this.setTimeCallback=this.conf.setTimeCallback&&"function"==typeof this.conf.setTimeCallback?this.conf.setTimeCallback:null,this.resetTimeCallback=this.conf.resetTimeCallback&&"function"==typeof this.conf.resetTimeCallback?this.conf.resetTimeCallback:null,this.timer=null,this.cacheData={},this.notice=!1,this.curTrigger,this.triggerData={},this.opsType="add",this.conf.fetchNotice&&(this.fetchNotice=this.conf.fetchNotice)
},_init:function(){this._define(),this.render(),this.addPublicEvent()},getApiUrl:function(a){var b=this.loginUserId,c=this.tenantId,d=this.apiPath;return d+"/api/v1/"+c+"/"+b+"/"+a},render:function(){if(!this.wrap||!this.wrap.length){this.wrap=$(this.tplLayout()).attr("id","noticesetting_"+this.id);var a=$("body").find("#noticesetting_"+this.id);a.length?this.wrap=a:this.wrap.appendTo(document.body)}this.build()},build:function(){this.wrap.html(this.tpl()),this.dayE=this.wrap.find(".day_time_nst"),this.dayinputE=this.dayE.find("label"),this.daytimewrapE=this.dayE.find(".day_timewrap_nst"),this.dayvaluesE=this.dayE.find(".dayvalues_nst"),this.weektimevalueE=this.dayE.find(".weektimevalue_nst"),this.monthtimevalueE=this.dayE.find(".monthtimevalue_nst"),this.dayTimepickerE=this.dayE.find(".day_timepicker_nst"),this.nomoretimeE=this.dayE.find(".nomoretime_nst"),this.hisE=this.wrap.find(".his_time_nst"),this.timeinputE=this.wrap.find(".timecur_nst"),this.timevaluesE=this.hisE.find(".timevalues_nst"),this.miniteE=this.wrap.find(".minite_time_nst"),this.minitecurE=this.wrap.find(".minitecur_nst"),this.miniteinputE=this.wrap.find(".minitecur_nst"),this.minitevaluesE=this.wrap.find(".minitevalues_nst"),this.descE=this.wrap.find(".desc_nst"),this.descInput=this.wrap.find("textarea"),this.sureE=this.wrap.find(".sure_btn_nst"),this.cancelE=this.wrap.find(".cancel_btn_nst"),this.clearE=this.wrap.find(".clear_btn_nst"),this.tipE=this.wrap.find(".tip_nst");var a=new Date,b=a.getFullYear(),c=a.getMonth(),d=a.getDate(),e=a.getHours(),f=this._cumsumTime();23==e&&(d+=1);var g=this;this.dayTimepickerE.datepicker({minDate:new Date(b,c,d),maxDate:new Date(f.year,f.month,f.day,0,0),dateFormat:"yy/mm/dd",onSelect:function(a){g.dayinputE.html(a),g.dayinputE.attr({cyctype:0,uservalue:a}),g.dayvaluesE.find("li,dd").removeClass("cur_nst"),g.dayvaluesE.find("li[uservalue^='"+a+"']").addClass("cur_nst"),g.hideSubview()},onClose:function(){}}),this._addPrivateEvent()},addPublicEvent:function(){var a=this;this.trigger.off("click.notice"),this.trigger.off("focus"),this.trigger.on("click.notice",function(b){var c=$(this);if(b.stopPropagation(),a.curTrigger=c,curTrigger=c,a.notice=c.attr("notice"),a.notice)a.notice=!0,a.fetchNotice(),a.wrap.find(".cancel_btn_nst").html("清除");else{var d=c.attr("data");if(!d)return;d=$.parseJSON(d),a.triggerData=d,a.fetchNotice({obj_id:d.objid,obj_type:d.objType},c)}var e=a.curTrigger.parents(".name_mltali");e.length&&a.curTrigger.css("visibility","visible")}).bind("focus",function(){var a=$(this);a.blur()}),this.wrap.unbind("mouseover"),this.wrap.bind("mouseover",function(){$(this)})},fetchNotice:function(a,b){var c=this;$.neoajax({url:c.getApiUrl("RemindV2/Get"),type:"get",dataType:"json",data:a,success:function(d){if(1==d.Code){var e=d.Data;if(d.Data){e=d.Data[0];var f=c.wrap.attr("id"),g="Notice:"+f;$(document).trigger(g,e.Users)}c.resetData(e,a),c.resetView(e,b)}}})},resetData:function(a){if(0==a.Id)this.opsType="add",this.build(),this.wrap.attr("opsType","add"),this.wrap.attr("noticeid","0"),this.wrap.find(".clear_btn_nst").hide();else{this.opsType="update",this.wrap.attr("opsType","update"),this.wrap.attr("noticeid",a.Id),this.wrap.attr({objType:a.ObjType,objid:a.OjbId});var b=a.Content.split("<b>");1==b.length&&(b=a.Content.split("(")),this.wrap.find("textarea").val($.trim(b[0])),this.wrap.find(".clear_btn_nst").show();var c=a.CycType;c||(c="0"),c=""+c;var d=c.split("_");c=d[0];var e,f,g,h,i=a.Date;if(i&&(dateArr=i.split(" "),e=dateArr[0].replace(/-/g,"/"),f=dateArr[1].substr(0,2),h=dateArr[1].substr(3,5)),1==c)this.dayE.find(".everyday_nst").trigger("click"),g=e;else if(2==c)this.dayE.find(".everyworkday_nst").trigger("click");else if(3==c)this.weektimevalueE.find("dd[uservalue='"+d[1]+"']").trigger("click");else if(4==c)this.monthtimevalueE.find("dd[uservalue='"+d[1]+"']").trigger("click");else{ymdArr=e.split("/"),hArr=f.split(":");var j=new Date(ymdArr[0],parseInt(ymdArr[1])-1,ymdArr[2],hArr[0]);j<new Date;var k=e;this.wrap.find(".day_time_nst label").html(k).attr({uservalue:k,cyctype:0});var l=this.wrap.find(".dayvalues_nst li[uservalue='"+e+" 00:00']");l.length?l.trigger("click"):this.dayTimepickerE.datepicker("setDate",e)}this.wrap.find(".timevalues_nst li[label='"+f+"']").trigger("click"),this.minitevaluesE.find("li[label='"+h+"']").trigger("click");{a.Date}}},hideView:function(){if(this.hideSubview(),this.wrap.hide(),this.curTrigger&&this.curTrigger.length){var a=this.curTrigger.parents(".name_mltali");a.length&&this.curTrigger.css("visibility","")}},_addPrivateEvent:function(){var a=this,b=this.dayvaluesE.find(".other_nst"),c=this.dayvaluesE.find(".weektime_nst"),d=this.dayvaluesE.find(".monthtime_nst");this.dayE.bind("click",function(b){var c=$(this);b.stopPropagation(),c.addClass("cur_day_time_nst"),a.dayinputE.focus(),a.hideSubview(),a.daytimewrapE.show()}),this.dayinputE.bind("blur",function(){a.dayE.removeClass("cur_day_time_nst")});var e=this.dayvaluesE.find("li,dd"),f=this.dayvaluesE.find("li:not(.other_nst,.weektime_nst,.monthtime_nst)");f.bind("click",function(b){var c=$(this);b.stopPropagation(),a.dayE.removeClass("cur_day_time_nst");var d=c.attr("uservalue"),f=d.split(" ");a.descE.css("visibility","visible"),a.hisE.css("visibility","visible"),c.hasClass("everyday_nst")?(a.dayinputE.html(c.attr("label")),a.dayinputE.attr({cyctype:1,uservalue:a.formatDate(new Date,"yyyy/MM/dd")})):c.hasClass("everyworkday_nst")?(a.dayinputE.html(c.attr("label")),a.dayinputE.attr({cyctype:2,uservalue:a.formatDate(new Date,"yyyy/MM/dd")})):c.hasClass("nomoretime_nst")?(a.dayinputE.val(c.attr("label")),a.dayinputE.attr({cyctype:-1,uservalue:0}),a.descE.css("visibility","hidden"),a.hisE.css("visibility","hidden")):(a.dayinputE.html(f[0]),a.dayinputE.attr({cyctype:0,uservalue:f[0]})),a.daytimewrapE.hide(),e.removeClass("cur_nst"),c.addClass("cur_nst")}).bind("mouseover",function(e){e.stopPropagation(),a.weektimevalueE.hide(),a.monthtimevalueE.hide(),a.dayTimepickerE.hide(),b.find("a:first").removeClass("a_hover"),c.find("a:first").removeClass("a_hover"),d.find("a:first").removeClass("a_hover")}),b.bind("mouseover",function(e){$(this);e.stopPropagation(),a.weektimevalueE.hide(),a.monthtimevalueE.hide(),a.dayTimepickerE.show(),b.find("a:first").addClass("a_hover"),c.find("a:first").removeClass("a_hover"),d.find("a:first").removeClass("a_hover"),a.dayE.removeClass("cur_day_time_nst")}),c.bind("mouseover",function(e){$(this);e.stopPropagation(),a.weektimevalueE.show(),a.monthtimevalueE.hide(),a.dayTimepickerE.hide(),b.find("a:first").removeClass("a_hover"),c.find("a:first").addClass("a_hover"),d.find("a:first").removeClass("a_hover"),a.dayE.removeClass("cur_day_time_nst")}),d.bind("mouseover",function(e){$(this);e.stopPropagation(),a.weektimevalueE.hide(),a.monthtimevalueE.show(),a.dayTimepickerE.hide(),b.find("a:first").removeClass("a_hover"),c.find("a:first").removeClass("a_hover"),d.find("a:first").addClass("a_hover"),a.dayE.removeClass("cur_day_time_nst")});var g=c.find("dd");g.bind("click",function(b){var d=$(this);b.stopPropagation(),a.dayinputE.html("每"+d.attr("label")),a.dayinputE.attr({cyctype:3,uservalue:d.attr("uservalue")}),a.daytimewrapE.hide(),e.removeClass("cur_nst"),d.addClass("cur_nst"),c.find("a:first").addClass("a_hover"),a.dayE.removeClass("cur_day_time_nst")});var h=d.find("dd");h.bind("click",function(b){var c=$(this);b.stopPropagation(),a.dayinputE.html("每月"+c.attr("uservalue")+"号"),a.dayinputE.attr({cyctype:4,uservalue:c.attr("uservalue")}),a.daytimewrapE.hide(),e.removeClass("cur_nst"),c.addClass("cur_nst"),d.find("a:first").addClass("a_hover"),a.dayE.removeClass("cur_day_time_nst")});var i=this.timevaluesE.find("li");this.hisE.bind("click",function(b){var c=$(this);b.stopPropagation(),c.addClass("cur_his_time_nst"),a.timeinputE.focus(),a.hideSubview(),a.timevaluesE.show()}),this.timeinputE.bind("blur",function(){a.hisE.removeClass("cur_his_time_nst")}),i.bind("click",function(b){var c=$(this);b.stopPropagation(),a.timeinputE.attr({label:c.attr("label"),uservalue:c.attr("uservalue")}).html(c.attr("label")),a.timevaluesE.hide(),i.removeClass("cur_nst"),c.addClass("cur_nst"),a.hisE.removeClass("cur_his_time_nst")}),this.miniteE.bind("click",function(b){var c=$(this);b.stopPropagation(),c.addClass("cur_minite_time_nst"),a.miniteinputE.focus(),a.hideSubview(),a.minitevaluesE.show()}),this.miniteinputE.bind("blur",function(){a.miniteE.removeClass("cur_minite_time_nst")});var j=this.minitevaluesE.find("li");j.bind("click",function(b){var c=$(this);b.stopPropagation(),a.miniteinputE.attr({label:c.attr("label"),uservalue:c.attr("uservalue")}).html(c.attr("label")),a.minitevaluesE.hide(),j.removeClass("cur_nst"),c.addClass("cur_nst"),a.miniteE.removeClass("cur_minite_time_nst")}),this.descInput.bind("focus",function(){var a=$(this),b=a.val(),c=a.attr("defaultvalue");b==c&&a.val(""),a.removeClass("default_nst"),a.addClass("cur_desc_nst")}).bind("blur",function(){var a=$(this),b=a.val();""==b&&(a.val(a.attr("defaultvalue")),a.addClass("default_nst")),a.removeClass("cur_desc_nst")}),this.sureE.bind("click",function(){var b=a.validateData(),c=a.wrap.attr("opsType");if(b.isValidate){var d="";a.notice?(a.tipE.html(""),a.hideView(),a.setTimeCallback(b.data)):(d=a.getApiUrl("update"==c?"RemindV2/UpdateReminds":"RemindV2/Add"),a._submit(b.data,d))}}),this.cancelE.bind("click",function(){a.hideView(),a.notice&&a.resetTimeCallback()}),this.clearE.bind("click",function(){var b=a.getApiUrl("RemindV2/DeleteReminds"),c=a.wrap.attr("objtype"),d=a.wrap.attr("objid");a.clearDate({obj_id:d,obj_type:c},b)}),this.wrap.bind("click",function(b){b.stopPropagation(),a.hideSubview()}),this.daytimewrapE.bind("click",function(a){a.stopPropagation()})},clearDate:function(a,b){var c=this,d=this.triggerData.objid,e=this.triggerData.objType;d&&e||(d=a.obj_id,e=a.obj_type),$.neoajax({url:b+"?obj_id="+d+"&obj_type="+e,dataType:"json",type:"get",success:function(){c.hideView(),curTrigger.removeClass("notice_settinged"),"function"==typeof c.submitCallback&&(curTrigger.time="",c.submitCallback(curTrigger))},error:function(a){c._showErrorTip(a)}})},_showErrorTip:function(a){var b=this;this.tipE.html('<span class="error">'+a+"</span>"),setTimeout(function(){b.tipE.html("")},1e3)},validateData:function(){var a={isValidate:!0,data:{}},b=$.trim(this.descInput.val()),c=this;if(b.replace(/[^\x00-\xff]/g,"**").length>40)return this.tipE.html('<span class="error">提醒内容不能超过20个汉字或40个字符</span>'),setTimeout(function(){c.tipE.html("")},1e3),a.isValidate=!1,a;var d=this.descInput.attr("defaultvalue");b==d&&(b=""),a.data.content=b;var e=this.dayinputE.attr("cyctype"),f=this.timeinputE.attr("label"),g=this.dayinputE.attr("uservalue"),h=this.miniteinputE.attr("uservalue"),i=f+":"+h;if(1==e||2==e)a.data.cyc_type=e,a.data.time=g+" "+i;else if(3==e||4==e){var j=new Date,k=j.getFullYear(),l=j.getMonth()+1,m=j.getDate();10>l&&(l="0"+l),10>m&&(m="0"+m);var n=k+"/"+l+"/"+m+" ";a.data.cyc_type=e+"_"+g,a.data.time=n+i}else if(-1==e)a.data.cyc_type=e,a.data.time="";else if(a.data.cyc_type=e,a.data.time=g+" "+i+":00",new Date>new Date(a.data.time))return this.tipE.html('<span class="error">不能设置过去的时间</span>'),setTimeout(function(){c.tipE.html("")},1e3),a.isValidate=!1,a;return a},_submit:function(a,b){var c=this,d=a,e=new Array,f=this.wrap.find(".ux_user_area");curTrigger.idLen=f.length;for(var g=0;g<f.length;g++)e.push(f[g].id);var h=e.join(",");d.obj_id=this.triggerData.objid,d.obj_type=this.triggerData.objType,d.obj_id||d.obj_type||(d.obj_id=this.wrap.attr("objid"),d.obj_type=this.wrap.attr("objtype")),d.remind_user_ids=h,$.neoajax({url:b+"?time="+d.time,dataType:"json",type:"post",data:d,success:function(a){return 0==a.Code?void c.tipE.html('<span class="success">'+a.Message+"</span>"):(c.tipE.html('<span class="success">设置提醒成功</span>'),void setTimeout(function(){c.tipE.html(""),c.hideView(),d.remind_user_ids||(d.time=""),c.setTrigger(d),"function"==typeof c.submitCallback&&(curTrigger.time=d.time,c.submitCallback(curTrigger))},1e3))},error:function(){}})},setTrigger:function(a){a.time?curTrigger.addClass("notice_settinged"):curTrigger.removeClass("notice_settinged"),this.notice&&this.trigger("setTime",a)},resetView:function(a,b){this.wrap.show();{var c=this.wrap.width(),d=b.offset(),e=b.innerWidth(),f=b.innerHeight(),g=this.wrap.find(".sa_nst"),h=g.position().left,i=g.find("em").innerWidth(),j=g.find("em").innerHeight(),k=d.left+e/2-h-i/2,l=d.top+f+j/2,m=document.documentElement||document.body,n=m.clientWidth;m.clientHeight}0>k&&(g.css({left:d.left+e/2}),k=0),c+k>n&&(k=n-c,g.css({left:d.left-k-2.5})),this.wrap.css({left:k,top:l}),this.tipE.html("")},hideSubview:function(){this.daytimewrapE.hide(),this.weektimevalueE.hide(),this.monthtimevalueE.hide(),this.dayTimepickerE.hide(),this.timevaluesE.hide(),this.minitevaluesE.hide()},showView:function(){},_cumsumTime:function(){var a=new Date,b=432e8,c=a.getTime()+b;a.setTime(c);var d=a.getFullYear(),e=a.getMonth(),f=a.getDate();return{year:d,month:e,day:f}},tpl:function(){for(var a="yyyy/MM/dd hh:mm",b=new Date,c=b.getFullYear(),d=b.getMonth(),e=b.getDate(),f=b.getHours(),g=(b.getSeconds(),b.getDay()),h=f,i=[],j={6:"六",0:"日",1:"一",2:"二",3:"三",4:"四",5:"五"},k="",l="",m=0;7>m;m++){var n=new Date(c,d,e+m).getDay();l="",23==h?g>n?k="下周"+j[n]:n==g?(l="cur_nst",k="明天"):k="本周"+j[n]:g>n?k="下周"+j[n]:n==g?(l="cur_nst",k="今天"):k=n==g+1?"明天":"本周"+j[n],i.push('<li class="'+l+'" label="'+k+'" uservalue="'+this.formatDate(new Date(c,d,e+m),a)+'"><a href="javascript:void(0)">'+k+"</a></li>")}for(var o=[],m=0;31>m;m++)o.push('<dd uservalue="'+(m+1)+'" label="'+(m+1)+'"><a href="javascript:void(0)">'+(m+1)+"</a></dd>");for(var p=[],q="",m=0;24>m;m++)q=10>m?"0"+m:m,p.push('<li label="'+q+'" uservalue="'+m+'"><a href="javascript:void(0)">'+q+"</a></li>");for(var r=["00","05","10","15","20","25","30","35","40","45","50","55"],s=[],m=0;m<r.length;m++)s.push('<li label="'+r[m]+'" uservalue="'+r[m]+'"><a href="javascript:void(0)">'+r[m]+"</a></li>");var t=this.formatDate(new Date(c,d,e,f,m),"yyyy/MM/dd"),u=23==h?f:f+1,v=10>u?"0"+u:u,w=['	<div class="outer_nst">','		<div class="sa_nst"><em>◆</em><span>◆</span></div>','		<div class="content_nst">','			<div class="wrap_time_nst clearfix">','				<span class="timelabel_nst mylock">提醒时间</span>','				<div class="day_time_nst">','					<a class="triday_nst" href="javascript:void(0)"></a>','					<label cyctype="0" uservalue="'+t+'">'+t+"</label>",'					<div class="day_timewrap_nst">','						<div class="day_timepicker_nst"></div>','						<ul class="dayvalues_nst">',i.join(""),'							<li label="其它日期" uservalue="0" class="other_nst">','								<a href="javascript:void(0)">其它日期</a>',"							</li>",'							<li class="everyday_nst" label="每天" uservalue="1"><a href="javascript:void(0)">每天</a></li>','							<li class="everyworkday_nst" label="每个工作日" uservalue="2"><a href="javascript:void(0)">每个工作日</a></li>','							<li label="每周" uservalue="3" class="weektime_nst">','								<a href="javascript:void(0)">每周</a>','								<dl class="weektimevalue_nst">','									<dd uservalue="2" label="周一"><a href="javascript:void(0)">周一</a></dd>','									<dd uservalue="3" label="周二"><a href="javascript:void(0)">周二</a></dd>','									<dd uservalue="4" label="周三"><a href="javascript:void(0)">周三</a></dd>','									<dd uservalue="5" label="周四"><a href="javascript:void(0)">周四</a></dd>','									<dd uservalue="6" label="周五"><a href="javascript:void(0)">周五</a></dd>','									<dd uservalue="7" label="周六"><a href="javascript:void(0)">周六</a></dd>','									<dd uservalue="1" label="周日"><a href="javascript:void(0)">周日</a></dd>',"								</dl>","							</li>",'							<li label="每月" uservalue="11" class="monthtime_nst">','								<a href="javascript:void(0)">每月</a>','								<dl class="monthtimevalue_nst">',o.join(""),"								</dl>","							</li>","						</ul>","					</div>","				</div>",'				<div class="his_time_nst">					','					<a class="tritime_nst" href="javascript:void(0)"></a>','					<label class="timecur_nst" uservalue="'+u+'" label="'+v+'">'+v+"</label>",'					<ul class="timevalues_nst">',p.join(""),"					</ul>					",'				</div><div style="float:left;font-weight:bold;line-height:30px;margin-left:3px;margin-right:-7px;">:</div>','				<div class="minite_time_nst">','					<a class="triminite_nst" href="javascript:void(0)"></a>','					<label class="minitecur_nst" uservalue = "00" label="00">00</label>','					<ul class="minitevalues_nst">',s.join(""),"					</ul>","				</div>","			</div>",'			<div data-name="person-list"></div>','			<div class="desc_nst">','				<textarea class="default_nst" defaultValue="提醒内容">提醒内容</textarea>',"			</div>",'			<div class="tip_nst"></div>','			<div class="btn_nst">','				<a class="clear_btn_nst" href="javascript:void(0)">取消提醒</a>','				<a class="sure_btn_nst" href="javascript:void(0)">确定</a>','				<a class="cancel_btn_nst" href="javascript:void(0)">取消</a>',"			</div>","		</div>","	</div>"];return w.join("")},tplLayout:function(){var a=['<div class="wrap_noticesetting_tita" noticeid="0">',"</div>"];return a.join("")},formatDate:function(a,b){var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b}},define("$.notice.set",["jquery.ui","datePickerZH"],function(a){return function(){var b;return b||a.NoticeSettingTitaSingleton}}(this)),define("views/common/plugins/notice/set-notice-view",["talent","templates/common","views/common/plugins/notice/notice-user-view","$.notice.set"],function(a,b,c,d){return a.Layout.extend({template:_.template(),defaults:{id:"tita"},initialize:function(){var b=this;this.settings=a._.extend({},this.defaults,this.options),this.noticeView=new d({id:this.settings.id,trigger:this.model.get("trigger"),apiPath:a.Context.getApiHost(),tenantId:a.Context.getTenantInfo().Id,loginUserId:a.Context.getUserInfo().Id,submitCallback:function(a){b.trigger("submitCallback",a)}}),$(document).off("Notice:noticesetting_"+this.settings.id),$(document).on("Notice:noticesetting_"+this.settings.id,function(){for(var a=arguments,c=[],d=1;d<a.length;d++){var e=a[d];e.Id=e.UserId,e.name=e.Name,e.UserAvatar=e.Avatar,c.push(e)}b._setNoticeUser(c)})},_setNoticeUser:function(b){var d=this,e=new a.Collection(b),f=new c({addUserSelectonOptions:{muti:!1},collection:e});setTimeout(function(){d.noticeView.wrap.find('div[data-name="person-list"]').html(f.render().el)},0)},onClose:function(){this.noticeView&&this.noticeView.hideView(),$(document).off("Notice:noticesetting_"+this.settings.id)}})}),define("views/daily/detail/detail-top-bar-view",["talent","templates/daily","tdialog","$.tipsy","views/common/plugins/notice/set-notice-view"],function(a,b,c,d,e){return a.ItemView.extend({template:b["daily/detail/detail-topbar"],ui:{closed:"a[data-name=closed]",remind:"a[data-name=remind]"},initialize:function(){},events:function(){var a={};return a["click "+this.ui.closed]="_clickClosedHandler",a},modelEvents:{"change:is_remind":"render"},onRender:function(){var b=this;this.ui.remind.tipsy({gravity:"n"}),this.setNoticeView=new e({model:new a.Model({trigger:this.ui.remind}),id:"dailyDetail"}),this.listenTo(this.setNoticeView,"submitCallback",function(a){var c=a.hasClass("notice_settinged")?!0:!1;b.model.set("is_remind",c)})},onClose:function(){a.$(".tipsy").remove(),this.setNoticeView&&this.setNoticeView.close()},_clickClosedHandler:function(){this.trigger("closed")}})}),define("views/common/plugins/evaluation/star-item-view",["talent","templates/common","$.tipsy"],function(a,b){return a.ItemView.extend({template:b["common/plugins/evaluation/star-item"],ui:{iconStar:".tt-star-score-list>li"},events:function(){var a={};return a["click "+this.ui.iconStar]="_selectStar",a["mouseenter "+this.ui.iconStar]="_mouseOverStar",a["mouseleave "+this.ui.iconStar]="_mouseOutStar",a},initialize:function(a){this.model.set(a)},_mouseOverStar:function(a){var b=$(a.currentTarget);a.stopPropagation(),this.ui.iconStar.each(function(a,c){$(c).data("index")<=b.data("index")?$(c).attr("class","icon-star-m-hover"):$(c).attr("class","icon-star-m")})},_mouseOutStar:function(a){$(a.currentTarget);this.render()},_selectStar:function(a){var b=$(a.currentTarget);a.stopPropagation(),this.model.set("selectedValue",b.data("value")),this.trigger("selectStar",b.data("value")),this.render()},getSelectedScore:function(){return this.model.get("selectedValue")},onRender:function(){a.$(".tipsy").remove(),this.ui.iconStar.tipsy({gravity:"s"})},onClose:function(){}})}),define("views/common/plugins/evaluation/dimension-item-view",["talent","templates/common","views/common/plugins/evaluation/star-item-view"],function(a,b,c){return a.CompositeView.extend({template:b["common/plugins/evaluation/dimension-item"],className:"dimension-item",tagName:"li",events:{},initialize:function(){},getScore:function(){return this.model.get("selectedValue")},onRender:function(){var a=this;this.starItemView=new c(this.model.toJSON()),this.starItemView.setElement(this.$el.find(".star-list-container")),this.listenTo(this.starItemView,"selectStar",function(b){a.model.set("selectedValue",b),a.trigger("selectStar",a.model.toJSON())}),this.starItemView.render()}})}),define("views/common/plugins/evaluation/evaluation-dimension-composite-view",["talent","templates/common","views/common/plugins/evaluation/dimension-item-view"],function(a,b,c){return a.CompositeView.extend({template:b["common/plugins/evaluation/evaluation-dimension-composite"],className:"tt-eval-task-item",itemView:c,itemViewContainer:"ul",initialize:function(b){$(b.settings).each(function(a,c){c.index=a;var d=_.findWhere(b.showDimension,{cType:c.cType});c.selectedValue=d&&c.goal==d.goal&&c.lvl==d.lvl?Number(d.value):0}),this.collection=new a.Collection(b.settings);var c={showRadio:b.showRadio,radioChecked:!1};b.showScore&&(c.radioChecked=!0),this.model.set(c)},onAfterItemAdded:function(a){var b=this,c=this.collection.toJSON();this.listenTo(a,"selectStar",function(a){c[a.index]=a,a.type=4,b.trigger("selectValue",a)})},getSelectData:function(){return this.collection.toJSON()},onRender:function(){}})}),define("views/common/plugins/evaluation/evaluation-score-item-view",["talent","templates/common","views/common/plugins/evaluation/star-item-view"],function(a,b,c){return a.ItemView.extend({template:b["common/plugins/evaluation/evaluation-score-item"],className:"tt-eval-task-item",ui:{radio:".radio"},events:function(){var a={};return a["click "+this.ui.radio]="_selectRadio",a},initialize:function(a){var b={name:"综合评分",lvl:5,goal:2,showRadio:a.showRadio,radioChecked:!1,selectedValue:""};(a.showScore||!a.showScore&&!a.showMedal)&&(b.radioChecked=!0),a.showScore&&a.showScore.goal==a.settings[0].goal&&a.showScore.lvl==a.settings[0].lvl&&(b.selectedValue=a.showScore.value);var c=$.extend(b,a.settings[0]);this.model.set(c)},getScore:function(){return this.model.get("selectedValue")},onRender:function(){var a=this;this.starItemView=new c(this.model.toJSON()),this.starItemView.setElement(this.$el.find(".tt-eval-item")),this.listenTo(this.starItemView,"selectStar",function(b){a.model.set({selectedValue:b,type:1}),this.trigger("selectValue",this.model.toJSON())}),this.starItemView.render()},_selectRadio:function(a){a.stopPropagation(),this.trigger("selectValue",{selectedValue:this.model.get("selectedValue"),type:1})}})}),define("views/common/plugins/evaluation/evaluation-medal-item-view",["talent","templates/common"],function(a,b){return a.ItemView.extend({template:b["common/plugins/evaluation/evaluation-medal-item"],className:"tt-eval-task-item",ui:{medal:".medal",radio:".radio"},events:function(){var a={};return a["click "+this.ui.radio]="_selectRadio",a["click "+this.ui.medal]="_selectMedal",a},initialize:function(a){var b={radioChecked:!1,showRadio:a.showRadio,medals:a.settings,cType:null,selectedValue:null,cTypeClass:["medal-grade-one","medal-grade-two","medal-grade-three"]};a.showMedal&&(b.radioChecked=!0,a.showMedal&&a.showMedal.name&&(b.selectedValue=a.showMedal.cType,b.cType=a.showMedal.cType)),this.model.set(b)},_selectMedal:function(a){var b=$(a.currentTarget);return a.stopPropagation(),b.hasClass("active")?!1:(this.model.set({selectedValue:b.data("value"),cType:b.data("ctype")}),this.render(),this.trigger("selectValue",{selectedValue:b.data("value"),cType:b.data("ctype"),type:2,name:b.data("name"),lvl:0,goal:0}),void 0)},_selectRadio:function(a){a.stopPropagation(),this.trigger("selectValue",{selectedValue:this.model.get("selectedValue"),cType:this.model.get("cType"),type:2,name:"",lvl:0,goal:0})},getSelectMedal:function(){return this.model.get("selectedValue")}})}),define("views/common/plugins/evaluation/evaluation-task-item-view",["talent","templates/common","views/common/plugins/evaluation/evaluation-dimension-composite-view","views/common/plugins/evaluation/evaluation-score-item-view","views/common/plugins/evaluation/evaluation-medal-item-view"],function(a,b,c,d,e){return a.ItemView.extend({template:b["common/plugins/evaluation/evaluation-task-item"],className:"tt-task-edit",ui:{input_comment:"textarea",saveTaskEval:".save-task-eval",cancel:".btn-cancel",evalItem:".tt-eval-task-item"},events:function(){var a={};return a["keyup "+this.ui.input_comment]="_keyupHandler",a["click "+this.ui.saveTaskEval]="_saveEval",a["click "+this.ui.cancel]="_cancelEdit",a},initialize:function(a){if(a.settings[4]&&a.settings[4].length){var b=[];$(a.evaluateInfos).each(function(c,d){if(4==d.type){var e=_.findWhere(a.settings[4],{goal:d.goal,lvl:d.lvl,cType:d.cType});e&&(e.name!=d.name&&(d.name=e.name),b.push(d))}else b.push(d)}),a.evaluateInfos=b}else a.evaluateInfos=_.filter(a.evaluateInfos,function(a){return 4!=a.type});this.submitParam={evaluateInfos:a.evaluateInfos},this.model.set(a);var c=a.settings.types.join(",");this.showRadio=c.indexOf("1")>=0&&c.indexOf("2")>=0?!0:!1,this.showRadio&&this.$el.addClass("double-item")},_keyupHandler:function(a){var b=$(a.currentTarget);return b.val().length>1e3?!1:void b.removeClass("input-error").addClass("input-focus")},_itemCheck:function(a){if(this.showRadio)if(2!=a.type)this.medalView&&(this.medalView.model.set("radioChecked",!1),this.medalView.$el.addClass("checked").find(".radio-checked").attr("class","tt-eval-title radio"),this.medalView.model.set({selectedValue:null,cType:null}),this.medalView.render()),this.scoreView&&(this.scoreView.model.set("radioChecked",!0),this.scoreView.$el.removeClass("checked").find(".radio").attr("class","tt-eval-title radio-checked")),this.dimensionView&&this.dimensionView.$el.removeClass("checked");else if(this.medalView&&(this.medalView.model.set("radioChecked",!0),this.medalView.$el.removeClass("checked").find(".radio").attr("class","tt-eval-title radio-checked"),this.medalView.model.set("selectedValue",null),this.medalView.render()),this.scoreView&&(this.scoreView.model.set("radioChecked",!1),this.scoreView.$el.addClass("checked").find(".radio-checked").attr("class","tt-eval-title radio"),this.scoreView.model.set("selectedValue",""),this.scoreView.render()),this.dimensionView){var b=this.dimensionView.collection.toJSON();$(b).each(function(a,b){b.selectedValue=""}),this.dimensionView.$el.addClass("checked"),this.dimensionView.collection.reset(b),this.dimensionView.render()}var c=[];4==a.type?$(this.submitParam.evaluateInfos).each(function(b,d){(4==d.type&&a.cType!=d.cType||1==d.type)&&c.push(d)}):1==a.type&&$(this.submitParam.evaluateInfos).each(function(a,b){4==b.type&&c.push(b)}),c.push({type:a.type,cType:a.cType,value:a.selectedValue,name:a.name,goal:a.goal,lvl:a.lvl});var d=!1;$(c).each(function(a,b){1!=b.type&&2!=b.type||!b.value||(d=!0)}),d?this.ui.saveTaskEval.removeClass("btn-disabled").addClass("btn-sure"):this.ui.saveTaskEval.removeClass("btn-sure").addClass("btn-disabled"),this.submitParam.evaluateInfos=c},_cancelEdit:function(a){this.trigger("cancel"),a.stopPropagation()},_saveEval:function(a){if($(a.currentTarget).hasClass("btn-disabled"))return!1;var b=this.$el.find("textarea");this.submitParam.remark=b.val()==b.attr("placeholder")?"":b.val();var c=_.where(this.submitParam.evaluateInfos,{type:2});c.length?(this.submitParam.evaluateInfos=c,this.trigger("submit",this.submitParam)):this.trigger("submit",this.submitParam)},showMedalItemView:function(){this.medalView=new e({showRadio:this.showRadio,showMedal:this.model.get("showMedal"),settings:this.model.get("settings")[2]}),this.listenTo(this.medalView,"selectValue",this._itemCheck),this.medalView.setElement(this.$el.find(".medal-item")),this.medalView.render()},showScoreItemView:function(){this.scoreView=new d({showRadio:this.showRadio,showMedal:this.model.get("showMedal"),showScore:this.model.get("showScore"),settings:this.model.get("settings")[1]}),this.listenTo(this.scoreView,"selectValue",this._itemCheck),this.scoreView.setElement(this.$el.find(".score-composite")),this.scoreView.render()},showDimensionView:function(){this.dimensionView=new c({showRadio:this.showRadio,showDimension:this.model.get("showDimension"),showScore:this.model.get("showScore"),settings:this.model.get("settings")[4]}),this.listenTo(this.dimensionView,"selectValue",this._itemCheck),this.dimensionView.setElement(this.$el.find(".muti-score")),this.dimensionView.render()},onRender:function(){var a=this.model.get("settings").types.join(",");a.indexOf("1")>=0&&(this.showScoreItemView(),a.indexOf("4")>=0&&this.showDimensionView()),a.indexOf("2")>=0&&this.showMedalItemView(),this.model.get("showMedal")?(this.medalView&&this.medalView.$el.removeClass("checked"),this.scoreView&&this.scoreView.$el.addClass("checked"),this.dimensionView&&this.dimensionView.$el.addClass("checked")):(this.medalView&&this.medalView.$el.addClass("checked"),this.scoreView&&this.scoreView.$el.removeClass("checked"),this.dimensionView&&this.dimensionView.$el.removeClass("checked")),"placeholder"in document.createElement("input")?(window.ActiveXObject||"ActiveXObject"in window)&&this.$el.find("textarea").focus(function(a){var b=$(a.currentTarget);b.removeClass("placeholder")}).blur(function(a){var b=$(a.currentTarget);""==b.val()&&b.addClass("placeholder")}).each(function(a,b){($(b).val()==$(b).attr("placeholder")||""==$(b).val())&&$(b).addClass("placeholder")}):this.$el.find("textarea").focus(function(a){var b=$(a.currentTarget);b.val()==b.attr("placeholder")&&b.val("").removeClass("placeholder")}).blur(function(a){var b=$(a.currentTarget);""==b.val()&&b.val(b.attr("placeholder")).addClass("placeholder")}).each(function(a,b){""==$(b).val()&&$(b).val($(b).attr("placeholder")).addClass("placeholder")})}})}),define("views/daily/detail/detail-evaluation-view",["talent","templates/common","views/common/plugins/evaluation/evaluation-task-item-view","$.tipsy"],function(a,b,c){var d=a.ItemView.extend({className:"tt_task_evaluation",template:b["daily/detail/detail-evaluation"],ui:{doE:"span[data-name=do-evaluation]",showDemension:".show-demension",editTaskEval:".edit-task-eval",showAll:".showAll"},events:function(){var a={};return a["click "+this.ui.doE]="_renderEvaluationView",a["click "+this.ui.editTaskEval]="_renderEvaluationView",a["click "+this.ui.showDemension]="_viewDimension",a["click "+this.ui.showAll]="showAll",a},modelEvents:{"change:commentShowAll":"render","change:viewMode":"render"},showAll:function(a){a.stopPropagation(),1==this.model.get("commentShowAll")?this.model.set("commentShowAll",!1):this.model.set("commentShowAll",!0)},_viewDimension:function(a){a.stopPropagation(),"detail"==this.model.get("viewMode")?this.model.set("viewMode","simple"):this.model.set("viewMode","detail")},initialize:function(b){var c=a.Context.getI18n();this.model.set("task",c.task_1),this.options=b,this.settingData()},settingData:function(){var a=_.where(this.model.get("evaluateInfos"),{type:4}),b=_.findWhere(this.model.get("evaluateInfos"),{type:2}),c=_.findWhere(this.model.get("evaluateInfos"),{type:1});
this.model.set({showDimension:a,viewMode:"simple",showMedal:b,commentShowAll:!1,showScore:c})},onRender:function(){a.$(".tipsy").remove(),this.$el.find("[original-title]").tipsy({gravity:"s"})},_renderEvaluationView:function(b){var d=(a.$(b.currentTarget),this);b.stopPropagation();var e={},f=this.model.get("evaluation");f&&(e={type:parseInt(f.type),value:parseInt(f.value)}),this.evaluationView=new c(this.model.toJSON()),this.listenTo(this.evaluationView,"submit",function(b){var c=[];$(b.evaluateInfos).each(function(a,b){c.push({evaluateType:b.type,cType:b.cType,value:b.value,name:b.name,goal:b.goal,lvl:b.lvl})}),a.app.request("Daily:EvaluateDaily",{objId:d.options.feed_Id,objType:8,evaluateInfo:c,remark:b.remark}).done(function(a){var b=[];$(a.evaluateInfos).each(function(a,c){b.push({cType:c.cType,goal:c.goal,lvl:c.lvl,name:c.name,type:c.type,value:c.value})}),d.model.set({evaluation_enable:a.editable,evaluateInfos:b,remark:a.remark,user:a.user}),d.settingData(),d.render(),d.$el.removeClass("active"),d.trigger("edit-evaluation")})},this),this.listenTo(this.evaluationView,"cancel",function(){d.$el.html(d.template(d.model.toJSON())),d.$el.removeClass("active")}),this.$el.html(this.evaluationView.render().$el).addClass("active")}}),e=a.CompositeView.extend({itemView:d,itemViewContainer:"div[data-name='daily_evaluation']",template:_.template('<div data-name="daily_evaluation"></div>'),initialize:function(){},events:function(){var a={};return a},onRender:function(){},itemViewOptions:function(){return{feed_Id:this.model.get("feed_Id")}}});return e}),define("views/daily/detail/detail-feed-view",["talent","templates/daily","TitaWidget"],function(a,b,c){return a.ItemView.extend({tagName:"div",template:b["daily/detail/detail-feed"],ui:{feedlist:"div[data-name=comment-list]",total:"span[data-name=comment-list-total]"},initialize:function(){},onShow:function(){this.renderFeed()},renderFeed:function(){var b=this,d=this.model.get("feedData");if(!d.feedComments)return void(this.ui.feedlist&&this.ui.feedlist.html(""));var e=d.feedComments.comments||[];this.feedItemCompositeView=new c.CommentListView({isInAppPage:!1,onlyComment:!0,mBlogOptions:{defaultHide:!1,defaultValue:"",isShowSendSms:!1},custom:{more:!0,remind:!0,collect:!0,reply:!0},actionMore:{detail:!0,"delete":!0,setTop:!0},isPrivate:!1,privateTipText:"",feedId:d.feedId,defaultCount:5,model:new a.Model({total:d.feedComments.total,comments:e})}),this.listenTo(this.feedItemCompositeView,"more",function(){a.app.request("Comment:getFeedItemComment",{feed_id:b.model.get("feed_Id"),comment_type:0}).done(function(a){b.feedItemCompositeView.feedCommentListView.collection.reset(a.comments)})}),this.ui.feedlist&&"function"==typeof this.ui.feedlist.html&&this.ui.feedlist&&this.ui.feedlist.html(this.feedItemCompositeView.render().$el)},onClose:function(){this.feedItemCompositeView&&this.feedItemCompositeView.close()}})}),define("views/daily/detail/detail-info-view",["talent","templates/daily","tdialog","$.tipsy","TitaWidget"],function(a,b,c,d,e){return a.ItemView.extend({defaults:{nameLen:4e3},template:b["daily/detail/detail-info"],className:"_tt_plandetailinfo",ui:{description:"div[data-name=description]",addDescription:"a[data-name=description-add]",inputDescription:"textarea[data-name=description-input]",inputWrapDescription:"div[data-name=description-input-wrap]",attachment:'div[data-name="attachment"] .start_ttpi',attachemntList:"div[data-name=task-detail-attachment-list]",visibleRadio:'div[data-name="daily-visible"] .radio'},initialize:function(b){this.initAttachment=a._.clone(this.model.get("Attachments")),this.setting=a._.extend({},this.defaults,b);var c=this.model.get("edit_description");c&&(c=c.replace(/<br\/>/g,"\r\n"),this.model.set("edit_description",c))},templateHelpers:function(){var b=this.model.get("description");b&&(b=b.replace(/(!%nr%!)/g,"<br>").replace(/(&lt;br&gt;)/g,"\n"));{var c=a.Context.getGlobal("loginUserInfo");this.model.get("Attachments")}return{description:b,DepartmentId:c.DepartmentId}},events:function(){var a={};return a["mouseover "+this.ui.description]="_hoverDesHandler",a["mouseleave "+this.ui.description]="_leaveDesHandler",a["click "+this.ui.description]="_clickDesHandler",a["click "+this.ui.addDescription]="_addDesHandler",a["focus "+this.ui.inputDescription]="_focusDesHandler",a["keyup "+this.ui.inputDescription]="_keyupDesHandler",a["blur "+this.ui.inputDescription]="_blurDesHandler",a["click "+this.ui.visibleRadio]="_checkedVisibleRadio",a},onRender:function(){this.edit_description=this.model.get("edit_description");var a=this.model.get("enitable");a&&this._renderFileUploadView(),this._renderAttachmentList(this.model.get("Attachments")||[])},_dealData:function(){var b=this.model.get("Attachments");return b||(b=[]),a._.map(b,function(b){var c=b.FileType;if(/^jpg|png|gif|jpeg|JPG|PNG|GIF|JPEG$/.test(c)){var d=b.PreviewUrl.lastIndexOf(".");b.imageUrl=b.PreviewUrl.substr(0,d)+"_s."+b.PreviewUrl.substr(d+1),"gif"==b.FileType&&(b.imageUrl=b.PreviewUrl)}else fileIconName=/^(rar|zip|exe|pdf|txt|doc|docx|ppt|pptx|xls|xlsx)$/.test(c)?c:/^(mp3|wma|wav|flac|ape|ogg|aac|m4a)$/.test(c)?"music":/^(mp4|mkv|rm|rmvb|avi|3gp|flv|wmv|asf|mpeg|mpg|mov|ts|m4v)$/.test(c)?"video":"file",b.imageUrl=a.Context.getStaticUrl("images/feed/"+fileIconName+".png");return b.timestamp=(new Date).getTime(),b}),b},_checkedVisibleRadio:function(b){var c=this,d=a.$(b.currentTarget),e=d.attr("visibility");if(2==e){var f=d.attr("objType");if(f&&15==f)var g=d.attr("objId")}a.app.request("Daily:updateVisibility",{plan_item_id:this.model.get("daily_Id"),visibility:e,obj_id:g?g:"",obj_type:f?f:0}).done(function(){c.model.set({objId:g,objType:15}),c.$el.find(".daily_visible a.radio-checked").removeClass("radio-checked"),d.addClass("radio-checked")}).fail(function(a){c._tipDialog(d,a)})},_renderFileUploadView:function(){var b=['<a href="javascript:void(0);" title="" data-name="file" class="upload_node <%if(!openYFY){%>upload_new_file<%}%>">点击添加</a>',"<%if(openYFY){%>",'<div class="tt_upload_type_container" data-name="upload-type">','<dl class="upload_type_item"><span class="upload_new_file">本地上传</span></dl>','<dl class="upload_type_item"><span id="fc_upload" class="fang_cloud_btn">亿方云</span></dl>',"</div>","<%}%>"].join(""),c=e.UploaderComponentView.extend({template:Talent._.template(b)}),d=a.Context.IsOpenYifangyun();this.fileUploadView=new c({container:this.$el,openYFY:d}),this.listenTo(this.fileUploadView,"uploadEnd",function(a,b){this._addAttachment(b.dfs,b.YFYresp)},this),this.fileUploadView.render()},_deleteAttachment:function(b){a.app.request("Daily:deleteAttachment",{plan_item_id:this.model.get("daily_Id"),document_id:b}).done(function(){}).fail(function(){})},_addAttachment:function(b,c){var d=this;a.app.request("Daily:addAttachment",{objId:this.model.get("daily_Id"),dfsUrls:b.join(","),documents:c}).done(function(a){a=d._dealOldResp(a),d.attachmentListView.collection.add(a)}).fail(function(){})},_dealOldResp:function(b){if(b&&b.length){var c=a._.map(b,function(a){var b={};for(var c in a){var d=c.substring(0,1).toLowerCase()+c.substring(1);b[d]=a[c]}return b});return c}},_renderAttachmentList:function(a){this.attachmentListView&&this.attachmentListView.close(),this.attachmentListView=new e.AttachmentListView({collection:new Talent.Collection(a)}),this.listenTo(this.attachmentListView,"delete",function(a){this._deleteAttachment(a)}),this.ui.attachemntList.html(this.attachmentListView.render().el)},_hoverDesHandler:function(b){var c=a.$(b.currentTarget);c.addClass("hover")},_leaveDesHandler:function(b){var c=a.$(b.currentTarget);c.removeClass("hover")},_clickDesHandler:function(b){var c=a.$(b.currentTarget);c.hide(),this.ui.inputWrapDescription.show(),this.ui.inputDescription.focus()},_addDesHandler:function(b){var c=a.$(b.currentTarget);c.hide(),this.ui.inputWrapDescription.show(),this.ui.inputDescription.focus()},_focusDesHandler:function(b){var c=a.$(b.currentTarget),d=a.$.trim(c.val()).replace(/(<br>)/g,"\n").replace(/(!%nr%!)/g,"\n");c.val(d),this.ui.inputDescription.autosize(),this.cursorMoveEnd(b)},_keyupDesHandler:function(b){var c=a.$(b.currentTarget),d=a.$.trim(c.val());""==d?this.ui.inputWrapDescription.find(".input-default").addClass("input-error"):this.ui.inputWrapDescription.find(".input-default").removeClass("input-error")},_blurDesHandler:function(b){var c=a.$(b.currentTarget),d=a.$.trim(c.val()).replace(/(<br>)/g,"\n");""==d?(this.ui.description.show(),c.val(this.edit_description),this._tipDialog(c,"日报内容不能为空"),this.ui.inputWrapDescription.find(".input-default").removeClass("input-error"),this.ui.inputWrapDescription.hide()):a.$.trim(c.val()).length>this.setting.nameLen?this._tipDialog(c,"超过"+this.setting.nameLen+"字不能编辑",{pos:"bottomCenter"}):(this.edit_description!=d&&this.trigger("submit:description",{edit_description:Talent._.escape(d)}),this.ui.description.show(),this.ui.inputWrapDescription.find(".input-default").removeClass("input-error"),this.ui.inputWrapDescription.hide())},cursorMoveEnd:function(b){var c=b.srcElement?b.srcElement:b.target,d=a.$(b.currentTarget),e=d.val().length;if(c.createTextRange){var f=c.createTextRange();f.moveStart("character",e),f.collapse(!0),f.select()}else c.setSelectionRange(e,e),c.focus()},_tipDialog:function(b,d,e){var e=e||{};this.tipDialog=new c({type:"tipsy",sure:!1,cancel:!1}),$("body").append(this.tipDialog.render().$el);var f={pos:"topCenter",className:"warn",arrow:!1,autoHide:!0},g=a._.extend({},f,e);this.tipDialog.show(b,d,g)}})}),define("views/daily/detail/detail-index-page-view",["talent","templates/daily","views/daily/detail/detail-top-bar-view","views/daily/detail/detail-evaluation-view","views/daily/detail/detail-feed-view","views/daily/detail/detail-info-view","tdialog","TitaWidget"],function(a,b,c,d,e,f,g,h){return a.Layout.extend({template:b["daily/detail/detail-index-page"],className:"tt_screen",ui:{topBar:"div[data-name=top-bar]",container:"div[data-name=container]",info:"div[data-name=info]",feed:"div[data-name=feed]",evaluation:"div[data-name=evaluation-daily]",dailyDoList:'div[data-name="daily-operate"]'},regions:{topBar:"div[data-name=top-bar]",container:"div[data-name=container]",info:"div[data-name=info]",feed:"div[data-name=feed]",evaluation:"div[data-name=evaluation-daily]",dailyDoList:'div[data-name="daily-operate"]',reward:"[data-name=reward]"},events:function(){var a={};return a["click "+this.ui.activeGroup]="_clickChangeGroupHandler",a},initialize:function(){},onRender:function(){var b=this;this.userInfo=a.Context.getUserInfo(),this._renderDetailInfoView();var c=this.model.get("publisher"),d=this.model.get("evaluateModels");this.userInfo.Id==c.UserId&&d.length&&this._renderDetailEView(),this.userInfo.Id!=c.UserId&&this._renderDetailEView(),this._renderTopBarView(),a.app.request("Feed:getItemFeed",{feed_id:this.model.get("feed_Id"),comment_count:5}).done(function(a){b.model.set("feedData",a),b._renderRewardUserListView(),b._renderFeedView(),b._renderOperateView()}),this.$el.on("click",function(a){a.stopPropagation()})},onShow:function(){var b=this;this._setPosition(),a.$(window).off("resize.Detail-Index-Page-View"),a.$(window).on("resize.Detail-Index-Page-View",function(){b._setPosition()})},onClose:function(){a.$(window).off("resize.Detail-Index-Page-View"),this.tipDialog&&this.tipDialog.close()},_renderRewardUserListView:function(){var a=this.model.get("feedData");this.rewardDetailView=new h.RewardDetailView({feedId:a.feedId,feedType:a.feedType,user:a.publishUser}),this.reward.show(this.rewardDetailView)},_renderDetailInfoView:function(){this.detailInfoView||(this.detailInfoView=new f({model:this.model}),this.listenTo(this.detailInfoView,"submit:description",function(a){this._updataDaily(a)},this),this.info.show(this.detailInfoView))},_renderDetailEView:function(){var b=this;if(!this.detailEvaluationView){var c=this.model.get("evaluateModels");a._.map(c,function(a){a.settings=b.model.get("evaluateSettingsModel"),a.evaluation_enable=b.model.get("evaluation_enable")}),this.detailEvaluationView=new d({model:this.model,collection:new a.Collection(c)}),this.listenTo(this.detailEvaluationView,"edit-evaluation",function(){this._renderFeedView()},this),this.evaluation.show(this.detailEvaluationView)}},_renderOperateView:function(){var b=this,c=this.model.get("feedData"),d=c.feedOperations.comments||[];this.trackView=new h.TrackView({defaultCount:5,model:new a.Model({total:c.feedOperations.total,comments:d})}),this.listenTo(this.trackView,"showAll",function(){a.app.request("Comment:getFeedItemComment",{feed_id:this.model.get("feed_Id"),comment_type:1}).done(function(a){b.trackView.model.set("comments",a.comments)})},b),this.dailyDoList.show(this.trackView)},_renderTopBarView:function(){this.detailTopBarView||(this.detailTopBarView=new c({model:this.model}),this.listenTo(this.detailTopBarView,"delete",function(){this.trigger("delete")}),this.listenTo(this.detailTopBarView,"closed",function(){this.trigger("closed")})),this.topBar.show(this.detailTopBarView)},_renderFeedView:function(){var b=a.Context.getGlobal("tenant_function");b.social&&(this.detailFeedView=new e({model:this.model}),this.feed&&this.feed.show(this.detailFeedView))},_updataDaily:function(b){var c=this;a.app.request("Daily:postUpdateDaily",{daily_id:this.model.get("daily_Id"),content:b.edit_description,fileUrls:""}).done(function(a){c.detailInfoView.model.set({description:a.description,edit_description:a.description}),c.detailInfoView&&c.detailInfoView.render(),c._renderFeedView()}).fail(function(a){c.detailInfoView&&c.detailInfoView.render(),c._tipDialog(c.$el.find(".plandetaildescript"),a)})},_setPosition:function(){var b=a.$(window).height(),c=a.$("#header-region").outerHeight(),d=(a.$(document).scrollTop(),this.ui.topBar.outerHeight());this.$el.css({height:b-c}),this.ui.container.css({height:b-c-d,"overflow-y":"scroll"})},_tipDialog:function(a,b){this.tipDialog=new g({type:"tipsy",sure:!1,cancel:!1}),$("body").append(this.tipDialog.render().$el),this.tipDialog.show(a,b,{pos:"topCenter",className:"warn",arrow:!1,autoHide:!0})}})}),define("views/common/membership/membership-tab-composite-view",["talent","templates/common"],function(a,b){var c=a.CompositeView.extend({template:b["common/membership/membership-tab-composite"],tagName:"ul",initialize:function(a){this.options=a||{},this.itemViewOptions={direction:this.options.direction,middleId:this.options.middleId,activeId:this.options.activeId,hasSuperior:"0"==this.model.get("Id")?!1:!0},this.dealData(),this.collection=this.model.subordinate},onRender:function(){1==this.model.get("level")&&this.$el.addClass("first_ul"),2==this.model.get("level")&&this.$el.addClass("second_ul"),this.model.get("Id")==this.options.activeId&&this.$el.find("div:first").addClass("active"),this.options.hasSuperior?"0"==this.model.get("subordinateCount")&&"3"!=this.model.get("level")&&this.$el.find(".membership_line").addClass("membership_line_last"):"0"==this.model.get("subordinateCount")&&(this.$el.find(".membership_line").addClass("membership_line_last"),this.$el.find(".membership_line").css({width:0}))},appendHtml:function(a,b){a.$("li:first").find(".membership_subordinate_container").append(b.el)},dealData:function(){var a=12;(1==this.model.get("level")||2==this.model.get("level"))&&(a=6),this.model.set("subName",this.subString(this.model.get("Name"),a,!0))},subString:function(a,b,c){for(var d=0,e="",f=/[^\x00-\xff]/g,g="",a=a||"",h=a.replace(f,"**").length,i=0;h>i&&(g=a.charAt(i).toString(),null!=g.match(f)?d+=2:d++,!(d>b));i++)e+=g;return c&&h>b&&(e+="..."),e}});return a.CollectionView.extend({itemView:c,events:{"click .membreship_subordinate_btn":"changeActiveId","click .membership_item_short":"changeActiveId","click .membership_item_long":"changeProfileId"},initialize:function(a){this.itemViewOptions=this.model.toJSON()},changeActiveId:function(b){var c=this,d=a.$(b.target).parents("li"),e=d.attr("data-id"),f=d.attr("level");if(3!=f){var g=a.app.request("Membership:getSuperior",{id:e}),h="1"==f?"1-3":"2-3";g.done(function(a){c.trigger("changeActiveId",{middleId:a,direction:h,activeId:e})})}else this.trigger("changeActiveId",{middleId:e,direction:"3-2",activeId:e});b.stopPropagation()},changeProfileId:function(b){{var c=a.$(b.target).parents("li"),d=c.attr("data-id");c.attr("")}this.trigger("changeProfileId",{profileId:d,activeId:d,middleId:this.model.get("middleId")})},onRender:function(){this.$el.find(".second_ul .membership_subordinate_container>ul:last").find(".membership_line").addClass("membership_line_last")},onShow:function(){this.trigger("allItemShow")}})}),function(a){var b=function(b){function c(){!E.find("#BS_scroll").length>0&&(F.style.position="relative",F.style.overflow="hidden",E.append(b.setStyle?['<div style="display:none;top:0;position: absolute;" id="BS_scroll"  >','<em style="min-height: 15px;display:inline-block;" id="BS_scroll_main"></em>',"</div>"].join(""):['<div style="display:none;top:0;position: absolute;right: 1px;width: 11px;" id="BS_scroll"  >','<em style="height:0;background-image: url('+A+'/webim_scroll_bg.png);background-position: -9px 0;background-repeat: repeat-y;width: 11px;min-height: 5px;border-radius: 4px;display:inline-block;" id="BS_scroll_main"></em>',"</div>"].join(""))),s=E.find("#BS_scroll")[0],s.style.zIndex=1e3,t=E.find("#BS_scroll_main")[0],o(F),n(F),d()}function d(){if(containerClientHeight=F.clientHeight,C&&0==containerClientHeight&&(containerClientHeight=F.offsetHeight),containerScrollHeight=E.find("ul").height(),u=containerClientHeight<containerScrollHeight){var a=containerClientHeight/containerScrollHeight,b=parseInt(containerClientHeight*a>D?containerClientHeight*a:D);t.style.height=b-7+"px",x=containerClientHeight-b,w=containerScrollHeight-containerClientHeight;var c=F.scrollTop/w;c>1&&(c=1),0>c&&(c=0),m(c),f()}}function e(){s.style.display="none"}function f(){s.style.display=""}function g(a){H||(H=!0,a=a||widow.event,y=a.clientY,r(a))}function h(a){if(H){a=a||window.event;var b=a.clientY;v=(b-y)/x+G,v>1&&(v=1),0>v&&(v=0),m(v),r(a)}}function i(){H&&(H=!1,G=v)}function j(b){{var b=b||window.event;b.srcElement||b.target}z&&clearTimeout(z),!u||(z=setTimeout(function(){f(),p(document,"mousemove",h),a(document).on("selectstart.sortable",function(){return!1})},300))}function k(){z&&clearTimeout(z),z=setTimeout(function(){e(),q(document,"mousemove",h),a(document).off("selectstart.sortable")},500)}function l(a){if(u){var b=B?a.detail:-a.wheelDelta/40;G=(F.scrollTop+16*b)/w,G>1&&(G=1,d()),0>G&&(G=0),m(G),r(a)}}function m(a){F.scrollTop=a*w,s.style.top=a*x+F.scrollTop+"px",v=a}function n(){p(F,B?"DOMMouseScroll":"mousewheel",l),p(t,"mousedown",g),p(document,"mouseup",i),p(F,"mouseover",j),p(F,"mouseout",k)}function o(){q(F,B?"DOMMouseScroll":"mousewheel",l),q(t,"mousedown",g),q(document,"mouseup",i),q(F,"mouseover",j),q(F,"mouseout",k)}function p(a,b,c){return window.addEventListener?a.addEventListener(b,c,!1):window.attachEvent?a.attachEvent("on"+b,c):{}}function q(a,b,c){return window.addEventListener?a.removeEventListener(b,c,!1):window.detachEvent?a.detachEvent("on"+b,c):{}}function r(a){a.preventDefault?a.preventDefault():a.returnValue=!1}var s,t,u,v,w,x,y,z,A=b.imgUrl||"",B=(b.setStyle,navigator.userAgent.toLowerCase().match(/firefox\/([\d.]+)/)),C=!window.XMLHttpRequest&&window.ActiveXObject,D=20,E=this,F=this[0],G=0,H=!1;c()};a.fn.extend({scrollable:b})}(jQuery),define("$.scrollable",function(){}),function(a,b){function c(a){return""===f?a:(a=a.charAt(0).toUpperCase()+a.substr(1),f+a)}var d=Math,e=b.createElement("div").style,f=function(){for(var a,b="t,webkitT,MozT,msT,OT".split(","),c=0,d=b.length;d>c;c++)if(a=b[c]+"ransform",a in e)return b[c].substr(0,b[c].length-1);return!1}(),g=f?"-"+f.toLowerCase()+"-":"",h=c("transform"),i=c("transitionProperty"),j=c("transitionDuration"),k=c("transformOrigin"),l=c("transitionTimingFunction"),m=c("transitionDelay"),n=/android/gi.test(navigator.appVersion),o=/iphone|ipad/gi.test(navigator.appVersion),p=/hp-tablet/gi.test(navigator.appVersion),q=c("perspective")in e,r="ontouchstart"in a&&!p,s=f!==!1,t=c("transition")in e,u="onorientationchange"in a?"orientationchange":"resize",v=r?"touchstart":"mousedown",w=r?"touchmove":"mousemove",x=r?"touchend":"mouseup",y=r?"touchcancel":"mouseup",z=function(){if(f===!1)return!1;var a={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return a[f]}(),A=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(a){return setTimeout(a,1)}}(),B=function(){return a.cancelRequestAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||clearTimeout}(),C=q?" translateZ(0)":"",D=function(c,d){var e,f=this;f.wrapper="object"==typeof c?c:b.getElementById(c),f.wrapper.style.overflow="hidden",f.scroller=f.wrapper.children[0],f.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:n,hideScrollbar:o,fadeScrollbar:o&&q,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(e in d)f.options[e]=d[e];f.x=f.options.x,f.y=f.options.y,f.options.useTransform=s&&f.options.useTransform,f.options.hScrollbar=f.options.hScroll&&f.options.hScrollbar,f.options.vScrollbar=f.options.vScroll&&f.options.vScrollbar,f.options.zoom=f.options.useTransform&&f.options.zoom,f.options.useTransition=t&&f.options.useTransition,f.options.zoom&&n&&(C=""),f.scroller.style[i]=f.options.useTransform?g+"transform":"top left",f.scroller.style[j]="0",f.scroller.style[k]="0 0",f.options.useTransition&&(f.scroller.style[l]="cubic-bezier(0.33,0.66,0.66,1)"),f.options.useTransform?f.scroller.style[h]="translate("+f.x+"px,"+f.y+"px)"+C:f.scroller.style.cssText+=";position:absolute;top:"+f.y+"px;left:"+f.x+"px",f.options.useTransition&&(f.options.fixedScrollbar=!0),f.refresh(),f._bind(u,a),f._bind(v),r||"none"!=f.options.wheelAction&&(f._bind("DOMMouseScroll"),f._bind("mousewheel")),f.options.checkDOMChanges&&(f.checkDOMTime=setInterval(function(){f._checkDOMChanges()},500))};D.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(a){var b=this;switch(a.type){case v:if(!r&&0!==a.button)return;b._start(a);break;case w:b._move(a);break;case x:case y:b._end(a);break;case u:b._resize();break;case"DOMMouseScroll":case"mousewheel":b._wheel(a);break;case z:b._transitionEnd(a)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(a){var c,e=this;return e[a+"Scrollbar"]?(e[a+"ScrollbarWrapper"]||(c=b.createElement("div"),e.options.scrollbarClass?c.className=e.options.scrollbarClass+a.toUpperCase():c.style.cssText="position:absolute;z-index:100;"+("h"==a?"height:7px;bottom:1px;left:2px;right:"+(e.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(e.hScrollbar?"7":"2")+"px;top:2px;right:1px"),c.style.cssText+=";pointer-events:none;"+g+"transition-property:opacity;"+g+"transition-duration:"+(e.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(e.options.hideScrollbar?"0":"1"),e.wrapper.appendChild(c),e[a+"ScrollbarWrapper"]=c,c=b.createElement("div"),e.options.scrollbarClass||(c.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+g+"background-clip:padding-box;"+g+"box-sizing:border-box;"+("h"==a?"height:100%":"width:100%")+";"+g+"border-radius:3px;border-radius:3px"),c.style.cssText+=";pointer-events:none;"+g+"transition-property:"+g+"transform;"+g+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+g+"transition-duration:0;"+g+"transform: translate(0,0)"+C,e.options.useTransition&&(c.style.cssText+=";"+g+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),e[a+"ScrollbarWrapper"].appendChild(c),e[a+"ScrollbarIndicator"]=c),"h"==a?(e.hScrollbarSize=e.hScrollbarWrapper.clientWidth,e.hScrollbarIndicatorSize=d.max(d.round(e.hScrollbarSize*e.hScrollbarSize/e.scrollerW),8),e.hScrollbarIndicator.style.width=e.hScrollbarIndicatorSize+"px",e.hScrollbarMaxScroll=e.hScrollbarSize-e.hScrollbarIndicatorSize,e.hScrollbarProp=e.hScrollbarMaxScroll/e.maxScrollX):(e.vScrollbarSize=e.vScrollbarWrapper.clientHeight,e.vScrollbarIndicatorSize=d.max(d.round(e.vScrollbarSize*e.vScrollbarSize/e.scrollerH),8),e.vScrollbarIndicator.style.height=e.vScrollbarIndicatorSize+"px",e.vScrollbarMaxScroll=e.vScrollbarSize-e.vScrollbarIndicatorSize,e.vScrollbarProp=e.vScrollbarMaxScroll/e.maxScrollY),void e._scrollbarPos(a,!0)):void(e[a+"ScrollbarWrapper"]&&(s&&(e[a+"ScrollbarIndicator"].style[h]=""),e[a+"ScrollbarWrapper"].parentNode.removeChild(e[a+"ScrollbarWrapper"]),e[a+"ScrollbarWrapper"]=null,e[a+"ScrollbarIndicator"]=null))},_resize:function(){var a=this;setTimeout(function(){a.refresh()},n?200:0)},_pos:function(a,b){this.zoomed||(a=this.hScroll?a:0,b=this.vScroll?b:0,this.options.useTransform?this.scroller.style[h]="translate("+a+"px,"+b+"px) scale("+this.scale+")"+C:(a=d.round(a),b=d.round(b),this.scroller.style.left=a+"px",this.scroller.style.top=b+"px"),this.x=a,this.y=b,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(a,b){var c,e=this,f="h"==a?e.x:e.y;e[a+"Scrollbar"]&&(f=e[a+"ScrollbarProp"]*f,0>f?(e.options.fixedScrollbar||(c=e[a+"ScrollbarIndicatorSize"]+d.round(3*f),8>c&&(c=8),e[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=c+"px"),f=0):f>e[a+"ScrollbarMaxScroll"]&&(e.options.fixedScrollbar?f=e[a+"ScrollbarMaxScroll"]:(c=e[a+"ScrollbarIndicatorSize"]-d.round(3*(f-e[a+"ScrollbarMaxScroll"])),8>c&&(c=8),e[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=c+"px",f=e[a+"ScrollbarMaxScroll"]+(e[a+"ScrollbarIndicatorSize"]-c))),e[a+"ScrollbarWrapper"].style[m]="0",e[a+"ScrollbarWrapper"].style.opacity=b&&e.options.hideScrollbar?"0":"1",e[a+"ScrollbarIndicator"].style[h]="translate("+("h"==a?f+"px,0)":"0,"+f+"px)")+C)},_start:function(b){var c,e,f,g,i,j=this,k=r?b.touches[0]:b;j.enabled&&(j.options.onBeforeScrollStart&&j.options.onBeforeScrollStart.call(j,b),(j.options.useTransition||j.options.zoom)&&j._transitionTime(0),j.moved=!1,j.animating=!1,j.zoomed=!1,j.distX=0,j.distY=0,j.absDistX=0,j.absDistY=0,j.dirX=0,j.dirY=0,j.options.zoom&&r&&b.touches.length>1&&(g=d.abs(b.touches[0].pageX-b.touches[1].pageX),i=d.abs(b.touches[0].pageY-b.touches[1].pageY),j.touchesDistStart=d.sqrt(g*g+i*i),j.originX=d.abs(b.touches[0].pageX+b.touches[1].pageX-2*j.wrapperOffsetLeft)/2-j.x,j.originY=d.abs(b.touches[0].pageY+b.touches[1].pageY-2*j.wrapperOffsetTop)/2-j.y,j.options.onZoomStart&&j.options.onZoomStart.call(j,b)),j.options.momentum&&(j.options.useTransform?(c=getComputedStyle(j.scroller,null)[h].replace(/[^0-9\-.,]/g,"").split(","),e=+(c[12]||c[4]),f=+(c[13]||c[5])):(e=+getComputedStyle(j.scroller,null).left.replace(/[^0-9-]/g,""),f=+getComputedStyle(j.scroller,null).top.replace(/[^0-9-]/g,"")),(e!=j.x||f!=j.y)&&(j.options.useTransition?j._unbind(z):B(j.aniTime),j.steps=[],j._pos(e,f),j.options.onScrollEnd&&j.options.onScrollEnd.call(j))),j.absStartX=j.x,j.absStartY=j.y,j.startX=j.x,j.startY=j.y,j.pointX=k.pageX,j.pointY=k.pageY,j.startTime=b.timeStamp||Date.now(),j.options.onScrollStart&&j.options.onScrollStart.call(j,b),j._bind(w,a),j._bind(x,a),j._bind(y,a))},_move:function(a){var b,c,e,f=this,g=r?a.touches[0]:a,i=g.pageX-f.pointX,j=g.pageY-f.pointY,k=f.x+i,l=f.y+j,m=a.timeStamp||Date.now();return f.options.onBeforeScrollMove&&f.options.onBeforeScrollMove.call(f,a),f.options.zoom&&r&&a.touches.length>1?(b=d.abs(a.touches[0].pageX-a.touches[1].pageX),c=d.abs(a.touches[0].pageY-a.touches[1].pageY),f.touchesDist=d.sqrt(b*b+c*c),f.zoomed=!0,e=1/f.touchesDistStart*f.touchesDist*this.scale,e<f.options.zoomMin?e=.5*f.options.zoomMin*Math.pow(2,e/f.options.zoomMin):e>f.options.zoomMax&&(e=2*f.options.zoomMax*Math.pow(.5,f.options.zoomMax/e)),f.lastScale=e/this.scale,k=this.originX-this.originX*f.lastScale+this.x,l=this.originY-this.originY*f.lastScale+this.y,this.scroller.style[h]="translate("+k+"px,"+l+"px) scale("+e+")"+C,void(f.options.onZoom&&f.options.onZoom.call(f,a))):(f.pointX=g.pageX,f.pointY=g.pageY,(k>0||k<f.maxScrollX)&&(k=f.options.bounce?f.x+i/2:k>=0||f.maxScrollX>=0?0:f.maxScrollX),(l>f.minScrollY||l<f.maxScrollY)&&(l=f.options.bounce?f.y+j/2:l>=f.minScrollY||f.maxScrollY>=0?f.minScrollY:f.maxScrollY),f.distX+=i,f.distY+=j,f.absDistX=d.abs(f.distX),f.absDistY=d.abs(f.distY),void(f.absDistX<6&&f.absDistY<6||(f.options.lockDirection&&(f.absDistX>f.absDistY+5?(l=f.y,j=0):f.absDistY>f.absDistX+5&&(k=f.x,i=0)),f.moved=!0,f._pos(k,l),f.dirX=i>0?-1:0>i?1:0,f.dirY=j>0?-1:0>j?1:0,m-f.startTime>300&&(f.startTime=m,f.startX=f.x,f.startY=f.y),f.options.onScrollMove&&f.options.onScrollMove.call(f,a))))},_end:function(c){if(!r||0===c.touches.length){var e,f,g,i,k,l,m,n=this,o=r?c.changedTouches[0]:c,p={dist:0,time:0},q={dist:0,time:0},s=(c.timeStamp||Date.now())-n.startTime,t=n.x,u=n.y;if(n._unbind(w,a),n._unbind(x,a),n._unbind(y,a),n.options.onBeforeScrollEnd&&n.options.onBeforeScrollEnd.call(n,c),n.zoomed)return m=n.scale*n.lastScale,m=Math.max(n.options.zoomMin,m),m=Math.min(n.options.zoomMax,m),n.lastScale=m/n.scale,n.scale=m,n.x=n.originX-n.originX*n.lastScale+n.x,n.y=n.originY-n.originY*n.lastScale+n.y,n.scroller.style[j]="200ms",n.scroller.style[h]="translate("+n.x+"px,"+n.y+"px) scale("+n.scale+")"+C,n.zoomed=!1,n.refresh(),void(n.options.onZoomEnd&&n.options.onZoomEnd.call(n,c));if(!n.moved)return r&&(n.doubleTapTimer&&n.options.zoom?(clearTimeout(n.doubleTapTimer),n.doubleTapTimer=null,n.options.onZoomStart&&n.options.onZoomStart.call(n,c),n.zoom(n.pointX,n.pointY,1==n.scale?n.options.doubleTapZoom:1),n.options.onZoomEnd&&setTimeout(function(){n.options.onZoomEnd.call(n,c)},200)):this.options.handleClick&&(n.doubleTapTimer=setTimeout(function(){for(n.doubleTapTimer=null,e=o.target;1!=e.nodeType;)e=e.parentNode;"SELECT"!=e.tagName&&"INPUT"!=e.tagName&&"TEXTAREA"!=e.tagName&&(f=b.createEvent("MouseEvents"),f.initMouseEvent("click",!0,!0,c.view,1,o.screenX,o.screenY,o.clientX,o.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,0,null),f._fake=!0,e.dispatchEvent(f))},n.options.zoom?250:0))),n._resetPos(400),void(n.options.onTouchEnd&&n.options.onTouchEnd.call(n,c));if(300>s&&n.options.momentum&&(p=t?n._momentum(t-n.startX,s,-n.x,n.scrollerW-n.wrapperW+n.x,n.options.bounce?n.wrapperW:0):p,q=u?n._momentum(u-n.startY,s,-n.y,n.maxScrollY<0?n.scrollerH-n.wrapperH+n.y-n.minScrollY:0,n.options.bounce?n.wrapperH:0):q,t=n.x+p.dist,u=n.y+q.dist,(n.x>0&&t>0||n.x<n.maxScrollX&&t<n.maxScrollX)&&(p={dist:0,time:0}),(n.y>n.minScrollY&&u>n.minScrollY||n.y<n.maxScrollY&&u<n.maxScrollY)&&(q={dist:0,time:0})),p.dist||q.dist)return k=d.max(d.max(p.time,q.time),10),n.options.snap&&(g=t-n.absStartX,i=u-n.absStartY,d.abs(g)<n.options.snapThreshold&&d.abs(i)<n.options.snapThreshold?n.scrollTo(n.absStartX,n.absStartY,200):(l=n._snap(t,u),t=l.x,u=l.y,k=d.max(l.time,k))),n.scrollTo(d.round(t),d.round(u),k),void(n.options.onTouchEnd&&n.options.onTouchEnd.call(n,c));if(n.options.snap)return g=t-n.absStartX,i=u-n.absStartY,d.abs(g)<n.options.snapThreshold&&d.abs(i)<n.options.snapThreshold?n.scrollTo(n.absStartX,n.absStartY,200):(l=n._snap(n.x,n.y),(l.x!=n.x||l.y!=n.y)&&n.scrollTo(l.x,l.y,l.time)),void(n.options.onTouchEnd&&n.options.onTouchEnd.call(n,c));n._resetPos(200),n.options.onTouchEnd&&n.options.onTouchEnd.call(n,c)
}},_resetPos:function(a){var b=this,c=b.x>=0?0:b.x<b.maxScrollX?b.maxScrollX:b.x,d=b.y>=b.minScrollY||b.maxScrollY>0?b.minScrollY:b.y<b.maxScrollY?b.maxScrollY:b.y;return c==b.x&&d==b.y?(b.moved&&(b.moved=!1,b.options.onScrollEnd&&b.options.onScrollEnd.call(b)),b.hScrollbar&&b.options.hideScrollbar&&("webkit"==f&&(b.hScrollbarWrapper.style[m]="300ms"),b.hScrollbarWrapper.style.opacity="0"),void(b.vScrollbar&&b.options.hideScrollbar&&("webkit"==f&&(b.vScrollbarWrapper.style[m]="300ms"),b.vScrollbarWrapper.style.opacity="0"))):void b.scrollTo(c,d,a||0)},_wheel:function(a){var b,c,d,e,f,g=this;if("wheelDeltaX"in a)b=a.wheelDeltaX/12,c=a.wheelDeltaY/12;else if("wheelDelta"in a)b=c=a.wheelDelta/12;else{if(!("detail"in a))return;b=c=3*-a.detail}return"zoom"==g.options.wheelAction?(f=g.scale*Math.pow(2,1/3*(c?c/Math.abs(c):0)),f<g.options.zoomMin&&(f=g.options.zoomMin),f>g.options.zoomMax&&(f=g.options.zoomMax),void(f!=g.scale&&(!g.wheelZoomCount&&g.options.onZoomStart&&g.options.onZoomStart.call(g,a),g.wheelZoomCount++,g.zoom(a.pageX,a.pageY,f,400),setTimeout(function(){g.wheelZoomCount--,!g.wheelZoomCount&&g.options.onZoomEnd&&g.options.onZoomEnd.call(g,a)},400)))):(d=g.x+b,e=g.y+c,d>0?d=0:d<g.maxScrollX&&(d=g.maxScrollX),e>g.minScrollY?e=g.minScrollY:e<g.maxScrollY&&(e=g.maxScrollY),void(g.maxScrollY<0&&g.scrollTo(d,e,0)))},_transitionEnd:function(a){var b=this;a.target==b.scroller&&(b._unbind(z),b._startAni())},_startAni:function(){var a,b,c,e=this,f=e.x,g=e.y,h=Date.now();if(!e.animating){if(!e.steps.length)return void e._resetPos(400);if(a=e.steps.shift(),a.x==f&&a.y==g&&(a.time=0),e.animating=!0,e.moved=!0,e.options.useTransition)return e._transitionTime(a.time),e._pos(a.x,a.y),e.animating=!1,void(a.time?e._bind(z):e._resetPos(0));c=function(){var i,j,k=Date.now();return k>=h+a.time?(e._pos(a.x,a.y),e.animating=!1,e.options.onAnimationEnd&&e.options.onAnimationEnd.call(e),void e._startAni()):(k=(k-h)/a.time-1,b=d.sqrt(1-k*k),i=(a.x-f)*b+f,j=(a.y-g)*b+g,e._pos(i,j),void(e.animating&&(e.aniTime=A(c))))},c()}},_transitionTime:function(a){a+="ms",this.scroller.style[j]=a,this.hScrollbar&&(this.hScrollbarIndicator.style[j]=a),this.vScrollbar&&(this.vScrollbarIndicator.style[j]=a)},_momentum:function(a,b,c,e,f){var g=6e-4,h=d.abs(a)/b,i=h*h/(2*g),j=0,k=0;return a>0&&i>c?(k=f/(6/(i/h*g)),c+=k,h=h*c/i,i=c):0>a&&i>e&&(k=f/(6/(i/h*g)),e+=k,h=h*e/i,i=e),i*=0>a?-1:1,j=h/g,{dist:i,time:d.round(j)}},_offset:function(a){for(var b=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;return a!=this.wrapper&&(b*=this.scale,c*=this.scale),{left:b,top:c}},_snap:function(a,b){var c,e,f,g,h,i,j=this;for(f=j.pagesX.length-1,c=0,e=j.pagesX.length;e>c;c++)if(a>=j.pagesX[c]){f=c;break}for(f==j.currPageX&&f>0&&j.dirX<0&&f--,a=j.pagesX[f],h=d.abs(a-j.pagesX[j.currPageX]),h=h?d.abs(j.x-a)/h*500:0,j.currPageX=f,f=j.pagesY.length-1,c=0;f>c;c++)if(b>=j.pagesY[c]){f=c;break}return f==j.currPageY&&f>0&&j.dirY<0&&f--,b=j.pagesY[f],i=d.abs(b-j.pagesY[j.currPageY]),i=i?d.abs(j.y-b)/i*500:0,j.currPageY=f,g=d.round(d.max(h,i))||200,{x:a,y:b,time:g}},_bind:function(a,b,c){(b||this.scroller).addEventListener(a,this,!!c)},_unbind:function(a,b,c){(b||this.scroller).removeEventListener(a,this,!!c)},destroy:function(){var b=this;b.scroller.style[h]="",b.hScrollbar=!1,b.vScrollbar=!1,b._scrollbar("h"),b._scrollbar("v"),b._unbind(u,a),b._unbind(v),b._unbind(w,a),b._unbind(x,a),b._unbind(y,a),b.options.hasTouch||(b._unbind("DOMMouseScroll"),b._unbind("mousewheel")),b.options.useTransition&&b._unbind(z),b.options.checkDOMChanges&&clearInterval(b.checkDOMTime),b.options.onDestroy&&b.options.onDestroy.call(b)},refresh:function(){var a,b,c,e,f=this,g=0,h=0;if(f.scale<f.options.zoomMin&&(f.scale=f.options.zoomMin),f.wrapperW=f.wrapper.clientWidth||1,f.wrapperH=f.wrapper.clientHeight||1,f.minScrollY=-f.options.topOffset||0,f.scrollerW=d.round(f.scroller.offsetWidth*f.scale),f.scrollerH=d.round((f.scroller.offsetHeight+f.minScrollY)*f.scale),f.maxScrollX=f.wrapperW-f.scrollerW,f.maxScrollY=f.wrapperH-f.scrollerH+f.minScrollY,f.dirX=0,f.dirY=0,f.options.onRefresh&&f.options.onRefresh.call(f),f.hScroll=f.options.hScroll&&f.maxScrollX<0,f.vScroll=f.options.vScroll&&(!f.options.bounceLock&&!f.hScroll||f.scrollerH>f.wrapperH),f.hScrollbar=f.hScroll&&f.options.hScrollbar,f.vScrollbar=f.vScroll&&f.options.vScrollbar&&f.scrollerH>f.wrapperH,a=f._offset(f.wrapper),f.wrapperOffsetLeft=-a.left,f.wrapperOffsetTop=-a.top,"string"==typeof f.options.snap)for(f.pagesX=[],f.pagesY=[],e=f.scroller.querySelectorAll(f.options.snap),b=0,c=e.length;c>b;b++)g=f._offset(e[b]),g.left+=f.wrapperOffsetLeft,g.top+=f.wrapperOffsetTop,f.pagesX[b]=g.left<f.maxScrollX?f.maxScrollX:g.left*f.scale,f.pagesY[b]=g.top<f.maxScrollY?f.maxScrollY:g.top*f.scale;else if(f.options.snap){for(f.pagesX=[];g>=f.maxScrollX;)f.pagesX[h]=g,g-=f.wrapperW,h++;for(f.maxScrollX%f.wrapperW&&(f.pagesX[f.pagesX.length]=f.maxScrollX-f.pagesX[f.pagesX.length-1]+f.pagesX[f.pagesX.length-1]),g=0,h=0,f.pagesY=[];g>=f.maxScrollY;)f.pagesY[h]=g,g-=f.wrapperH,h++;f.maxScrollY%f.wrapperH&&(f.pagesY[f.pagesY.length]=f.maxScrollY-f.pagesY[f.pagesY.length-1]+f.pagesY[f.pagesY.length-1])}f._scrollbar("h"),f._scrollbar("v"),f.zoomed||(f.scroller.style[j]="0",f._resetPos(400))},scrollTo:function(a,b,c,d){var e,f,g=this,h=a;for(g.stop(),h.length||(h=[{x:a,y:b,time:c,relative:d}]),e=0,f=h.length;f>e;e++)h[e].relative&&(h[e].x=g.x-h[e].x,h[e].y=g.y-h[e].y),g.steps.push({x:h[e].x,y:h[e].y,time:h[e].time||0});g._startAni()},scrollToElement:function(a,b){var c,e=this;a=a.nodeType?a:e.scroller.querySelector(a),a&&(c=e._offset(a),c.left+=e.wrapperOffsetLeft,c.top+=e.wrapperOffsetTop,c.left=c.left>0?0:c.left<e.maxScrollX?e.maxScrollX:c.left,c.top=c.top>e.minScrollY?e.minScrollY:c.top<e.maxScrollY?e.maxScrollY:c.top,b=void 0===b?d.max(2*d.abs(c.left),2*d.abs(c.top)):b,e.scrollTo(c.left,c.top,b))},scrollToPage:function(a,b,c){var d,e,f=this;c=void 0===c?400:c,f.options.onScrollStart&&f.options.onScrollStart.call(f),f.options.snap?(a="next"==a?f.currPageX+1:"prev"==a?f.currPageX-1:a,b="next"==b?f.currPageY+1:"prev"==b?f.currPageY-1:b,a=0>a?0:a>f.pagesX.length-1?f.pagesX.length-1:a,b=0>b?0:b>f.pagesY.length-1?f.pagesY.length-1:b,f.currPageX=a,f.currPageY=b,d=f.pagesX[a],e=f.pagesY[b]):(d=-f.wrapperW*a,e=-f.wrapperH*b,d<f.maxScrollX&&(d=f.maxScrollX),e<f.maxScrollY&&(e=f.maxScrollY)),f.scrollTo(d,e,c)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(w,a),this._unbind(x,a),this._unbind(y,a)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(z):B(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(a,b,c,d){var e=this,f=c/e.scale;e.options.useTransform&&(e.zoomed=!0,d=void 0===d?200:d,a=a-e.wrapperOffsetLeft-e.x,b=b-e.wrapperOffsetTop-e.y,e.x=a-a*f+e.x,e.y=b-b*f+e.y,e.scale=c,e.refresh(),e.x=e.x>0?0:e.x<e.maxScrollX?e.maxScrollX:e.x,e.y=e.y>e.minScrollY?e.minScrollY:e.y<e.maxScrollY?e.maxScrollY:e.y,e.scroller.style[j]=d+"ms",e.scroller.style[h]="translate("+e.x+"px,"+e.y+"px) scale("+c+")"+C,e.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},e=null,"undefined"!=typeof exports?exports.iScroll=D:a.iScroll=D}(window,document),define("iScroll",function(){}),define("views/common/membership/membership-tab-layout",["talent","templates/common","views/common/membership/membership-tab-composite-view","$.scrollable","iScroll"],function(a,b,c,d,e){function f(a,b,c,d,e,f){return e.level2.css(c),[function(){e.level1.css(a).animate(b,200,f)},function(){e.level2.animate(d,300,f)}]}function g(a,b,c,d,e,f){return e.level2.css(c),[function(){e.level1.hide().toggle("slow",f)},function(){e.level2.animate(d,200,f)}]}function h(a,b,c,d,e,f){return"0"==e.level1.parents("li").attr("data-id")?(e.level2.css(c),[function(){e.level1.hide().toggle("slow",f)},function(){e.level2.animate(d,200,f)}]):(e.level2.hide(),[function(){e.level1.hide().toggle("slow",f)},function(){e.level2.hide().toggle("slow",f)}])}function i(a,b){var c=a.model.get("direction"),d=j(a);d.line.hide(),d.level3.hide();var e=[],i=[function(){d.level3.toggle("slow",o)},function(){d.line.toggle("slow",o)},function(){b.resolve()}],k={"margin-left":10,"margin-top":10},l={"margin-left":-5,"margin-top":0};if("3-2"==c)var m={"margin-left":10,width:200,height:80,"margin-top":10},n={width:d.level2.width(),height:d.level2.height(),"margin-left":0,"margin-top":0};else var m={"margin-left":-20},n={"margin-left":0};var o=function(){a.$el.dequeue("slideList")};switch(c){case"3-2":e=f(k,l,m,n,d,o);break;case"2-3":e=g(k,l,m,n,d,o);break;default:e=h(k,l,m,n,d,o)}"0"==d.level1.parents("li").attr("data-id")&&(e=e.slice(1,e.length)),"0"==d.level1.parents("li").attr("data-id")&&0==a.$el.find(".second_ul li:first").attr("data-id")&&(d.level2.css(n),e=e.slice(1,e.length)),e=e.concat(i),a.$el.queue("slideList",e),o()}function j(a){var b=a.$el.find(".second_ul>li>div:first");return{level1:a.$el.find(".first_ul>li>div:first"),level2:b,level3:b.parent().find(".membership_subordinate_container"),line:a.$el.find(".membership_line")}}var k=a.Region.extend({show:function(a){var b=this;this.ensureEl();var c=a.isClosed||_.isUndefined(a.$el),d=a!==this.currentView;d&&this.close(),a.render(),d||c?this.open(a).done(function(){b.currentView=a,Marionette.triggerMethod.call(b,"show",a),Marionette.triggerMethod.call(a,"show")}):(this.currentView=a,Marionette.triggerMethod.call(this,"show",a),Marionette.triggerMethod.call(a,"show"))},open:function(a){var b=new $.Deferred;return this.$el.empty().append(a.el),i(a,b),b.promise()}}),l=a.Layout.extend({template:b["common/membership/membership-tab-layout"],className:"membership_tab_container",regions:{tab:{selector:".membership_tab_staff_container",regionType:k}},ui:{tab:".membership_tab_staff_container",backContainer:".membership_back",backBtn:".membership_back_btn"},events:{"click .membership_back_btn":"showTopStaffView"},modelEvents:{"change:middleId":"renderTabView","change:profileId":"renderProfileView","change:activeId":"renderActive"},initialize:function(){},onRender:function(){},getTabData:function(){var b=new $.Deferred,c=a.app.request("Membership:getDataType",{id:this.model.get("middleId"),activeId:this.model.get("activeId"),type:this.model.get("type")});return c.done(function(a){b.resolve(a)}),b.promise()},renderTabView:function(){var b=this,d=a.Model.extend({initialize:function(){var a=this.get("subordinate");a&&(this.subordinate=new e(a),this.unset("subordinate"))}}),e=a.Collection.extend({model:d});this.getTabData().done(function(a){b.membershipTabCompositeView=new c({collection:new e(a),model:b.model}),0==a[0].Id&&0==a[0].subordinate[0].Id?(b.ui.backBtn.slideUp("slow"),b.ui.tab.addClass("membership_top_staff")):(b.ui.backBtn.slideDown("slow"),b.ui.tab.removeClass("membership_top_staff")),b.renderTabBottomStaff(b.membershipTabCompositeView),b.bindEvents(b.membershipTabCompositeView)})},renderTabBottomStaff:function(a){var b=this;b.tab.show(a),b.topContainer=!1},bindEvents:function(a){var b=this;a.on("changeActiveId",function(a){b.model.set(a)}),a.on("changeProfileId",function(a){b.model.set(a)}),a.on("allItemShow",function(){b.afterTabAllRender()})},afterTabAllRender:function(){this.updateDimension();var b=this,c=a._.debounce(function(){b.updateDimension()},400);$(window).off("resize.membership_page"),$(window).on("resize.membership_page",c)},renderProfileView:function(){var a=this.model.get("profileId");this.trigger("detailIdChanged",a)},renderActive:function(){var a=this.model.get("activeId"),b=this.ui.tab.find('[data-id="'+a+'"]').find("div:first");b.hasClass("active")||(this.ui.tab.find(".active").removeClass("active"),b.addClass("active"))},onShow:function(){this.renderTabView()},showTopStaffView:function(){var b=a.Context.getUserInfo().Id;this.model.set({middleId:b,direction:"2-3"})},getIsMobile:function(){for(var a=navigator.userAgent,b=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),c=!0,d=0;d<b.length;d++)if(a.indexOf(b[d])>0){c=!1;break}return c},updateDimension:function(){var b=a.$("#header-region").outerHeight(),c=(a.$("#main-region").outerHeight(),a.$(window).height()-b),d=c-11-a.$(".membership_tab_top").outerHeight()-a.$(".membership_bottom").outerHeight()-a.$(".membership_back").outerHeight(),f=this.$el.find("#membership_scroll_container");f.height(d);var g=this.getIsMobile();g?f.scrollable({setStyle:!0}):this.tabScroll=new e("membership_scroll_container",{hScrollbar:!1,scrollbarClass:"myScrollbar"})}});return l}),define("views/common/membership/membership-tab-thumb-composite-view",["talent","templates/common","$.scrollable","iScroll","$.tipsy"],function(a,b,c,d){var e=a.ItemView.extend({template:b["common/membership/membership-tab-thumb-item"],tagName:"li",templateHelpers:function(){var a="narrow"==this.mode?30:"team"==this.mode?30:50;return{imgSize:a}},initialize:function(a){this.mode=a.mode||"team"},onRender:function(){this.$el.attr("data-id",this.model.get("Id")),this.$el.find(".membership_thumb_img").tipsy({gravity:"e",fallback:this.model.get("Name")});var a=this.model.get("Type")?this.model.get("Type"):0;a&&this.$el.addClass("dotted_radius_parent")}}),f=a.ItemView.extend({template:a._.template('<div class="membership_empty_tips"><%= text  %></div>'),initialize:function(a){var a=a||{};this.templateHelpers=a}});return a.CompositeView.extend({className:"membership_thumb_container",template:b["common/membership/membership-tab-thumb-composite"],itemView:e,itemViewContainer:".membership_thumb_container",emptyView:f,events:{"click .membership_thumb_img":"changeActiveId","click .membership_fold":"changeMode"},initialize:function(){if(0==this.collection.models.length){var a="membership"==this.model.get("viewName")?"暂无下属":"暂无共享";this.itemViewOptions={text:a}}else this.itemViewOptions={mode:this.model.get("mode")}},onAfterItemAdded:function(a){var b=parseInt(this.model.get("activeId"));(b==parseInt(a.model.get("Id"))||b==parseInt(a.model.get("id")))&&a.$el.find("img").addClass("active")},changeMode:function(){this.trigger("change:mode","wide")},changeActiveId:function(b){var c=a.$(b.currentTarget),d=c.parents("li").attr("data-id");this.$el.find(".membership_thumb_img").removeClass("active"),c.addClass("active"),this.trigger("detailIdChanged",d)},onRender:function(){"share"==this.model.get("viewName")&&this.$el.addClass("membership_share_container"),"membership"==this.model.get("viewName")&&this.$el.find("li").first().after('<div class="membership_fold_container"><div class="membership_fold"><span class="membership_fold_arrow"></span>展开</div></div>')},onShow:function(){this.updateDimension();var b=this,c=a._.debounce(function(){b.updateDimension()},400);$(window).off("resize.membership_page"),$(window).on("resize.membership_page",c)},updateDimension:function(){var b=a.$("#header-region").outerHeight(),c=(a.$("#main-region").outerHeight(),a.$(window).height()-b),e=c-1-a.$(".membership_tab_top").outerHeight()-a.$(".membership_bottom").outerHeight(),f=this.$el.find("#membership_scroll_container");f.height(e);var g=this.getIsMobile();g?f.scrollable({setStyle:!0}):this.tabScroll=new d("membership_scroll_container",{hScrollbar:!1,scrollbarClass:"myScrollbar"})},getIsMobile:function(){for(var a=navigator.userAgent,b=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),c=!0,d=0;d<b.length;d++)if(a.indexOf(b[d])>0){c=!1;break}return c}})}),define("templates/plan",[],function(){return this.JST=this.JST||{},this.JST["plan/g-chart/back-content"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<a class="legendIntroduce" style="display:none;" href="javascript:void(0)">图例说明</a><a class="gantt_btn" href="#plan">\n	<span class="gantt_small_bt"></span>\n\n\n\n\n\n',"personal"==type&&(__p+='\n		<img src="'+(null==(__t=Small)?"":__t)+'" />'+(null==(__t=UserName)?"":__t)+"的"+(null==(__t=year)?"":__t)+"年",month&&(__p+=(null==(__t=month)?"":__t)+"月"),week&&(__p+=" "+(null==(__t=week)?"":__t)),__p+=(null==(__t=i18n.plan_1)?"":__t)+"\n"),__p+=" \n\n","group"==type&&(__p+='\n		<span class="groupText">团队的'+(null==(__t=year)?"":__t)+"年",month&&(__p+=(null==(__t=month)?"":__t)+"月"),__p+="\n			",week&&(__p+=null==(__t=week)?"":__t),__p+=(null==(__t=i18n.plan_1)?"":__t)+"</span>\n"),__p+=" \n\n</a>";return __p},this.JST["plan/g-chart/index-page"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="gannt_navBack"></div>\n<div class="_tt_loading_m">努力加载中…</div>\n<div class="gantt-main _tt_plan_container"></div>';return __p},this.JST["plan/histroy/histroy-list-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)ThisYear||(__p+='\n<div class="year_hylt"><span>以下为'+(null==(__t=Year)?"":__t)+"年操作历史</span></div>\n"),__p+="\n<ul>\n	",_.each(Data,function(a,b){__p+='\n		<li class="item_hylt ',Data.length==b+1&&(__p+="noborder"),__p+='">\n		',__p+="undefined"!=typeof a.Today&&a.Today?'\n			<span class="data_hylt">'+(null==(__t=a.Today)?"":__t)+"</span>\n		":'\n			<span class="data_hylt">'+(null==(__t=a.Month)?"":__t)+"月"+(null==(__t=a.Day)?"":__t)+"日</span>\n		",__p+="\n\n		","undefined"!=typeof a.PlanOperationModelsByUser&&a.PlanOperationModelsByUser?(__p+="\n				",_.each(a.PlanOperationModelsByUser,function(a){__p+="\n				<table>\n					<tr> \n						","undefined"!=typeof IsShowAvatar&&IsShowAvatar&&(__p+='\n						<td class="avatar_hylt">\n							<a href="'+(null==(__t=a.User.HomeUrl)?"":__t)+'">\n\n								'+(null==(__t=_.convertImage({className:"",src:a.User.Avatar.Small,size:30,shape:"radius",name:a.User.Name,bgColor:a.User.Avatar.Color}))?"":__t)+"\n							</a>\n						</td>\n						"),__p+='\n						<td class="cont_hylt">\n							<ul>\n								',_.each(a.PlanOperationModels,function(b){__p+="\n									","1"==b.Source.TepId?(__p+='\n									<li>\n										<!--丹丹在 2013年12月第4周计划表中 添加了计划项 12月第四周的计划-->\n										<span class="hour_hylt">'+(null==(__t=b.Source.CreateDate)?"":__t)+'</span>\n										<a href="'+(null==(__t=a.User.HomeUrl)?"":__t)+'" title="" class="name_hylt">'+(null==(__t=a.User.Name)?"":__t)+"</a>","undefined"!=typeof b.Source.PlanTableName&&b.Source.PlanTableName&&(__p+="在&nbsp;"+(null==(__t=b.Source.PlanTableName)?"":__t)+"&nbsp;中"),__p+="&nbsp;"+(null==(__t=b.Source.Content1)?"":__t)+"&nbsp;"+(null==(__t=b.Source.PlanName)?"":__t)+"\n									</li>\n									"):"2"==b.Source.TepId?(__p+='\n									<li>\n										<!--刚刚 在2013年12月第4周计划表中 中 设置了计划项 30号的计划 的截止时间为 2013年11月22日 23:00-->\n										<span class="hour_hylt">'+(null==(__t=b.Source.CreateDate)?"":__t)+'</span>\n										<a href="'+(null==(__t=a.User.HomeUrl)?"":__t)+'" title="" class="name_hylt">'+(null==(__t=a.User.Name)?"":__t)+"</a>","undefined"!=typeof b.Source.PlanTableName&&b.Source.PlanTableName&&(__p+="在&nbsp;"+(null==(__t=b.Source.PlanTableName)?"":__t)+"中&nbsp;"),__p+="&nbsp;"+(null==(__t=b.Source.Content1)?"":__t)+"&nbsp;"+(null==(__t=b.Source.PlanName)?"":__t)+"&nbsp;"+(null==(__t=b.Source.Content2)?"":__t)+"\n									</li>\n									"):"3"==b.Source.TepId?__p+='\n										<li>\n											<!--丹丹 在2013年12月第4周计划表中 添加共享者 海海-->\n											<span class="hour_hylt">'+(null==(__t=b.Source.CreateDate)?"":__t)+'</span>\n											<a href="'+(null==(__t=a.User.HomeUrl)?"":__t)+'" title="" class="name_hylt">'+(null==(__t=a.User.Name)?"":__t)+"</a>&nbsp;在"+(null==(__t=b.Source.PlanName)?"":__t)+"&nbsp;中&nbsp;"+(null==(__t=b.Source.Content1)?"":__t)+'&nbsp;<a href="/u/'+(null==(__t=b.Source.ToUserId)?"":__t)+'" title="" class="link_hylt">'+(null==(__t=b.Source.ToUserName)?"":__t)+"</a>\n										</li>\n									":"4"==b.Source.TepId?__p+='\n										<li>\n											<!--丹丹 在12月第四周的计划 中 在计划项 2013年12月第4周计划表 下分解出任务 123-->\n											<span class="hour_hylt">'+(null==(__t=b.Source.CreateDate)?"":__t)+'</span>\n											<a href="'+(null==(__t=a.User.HomeUrl)?"":__t)+'" title="" class="name_hylt">'+(null==(__t=a.User.Name)?"":__t)+"</a>&nbsp;在"+(null==(__t=b.Source.PlanTableName)?"":__t)+"&nbsp;中&nbsp;"+(null==(__t=b.Source.Content1)?"":__t)+"&nbsp;"+(null==(__t=b.Source.PlanName)?"":__t)+"</a>&nbsp;"+(null==(__t=b.Source.Content2)?"":__t)+'&nbsp;<a href="'+(null==(__t=b.Source.TaskUrl)?"":__t)+'" title="" class="link_hylt" target="_blank">'+(null==(__t=b.Source.ObjName)?"":__t)+"</a>\n										</li>\n									":"5"==b.Source.TepId&&(__p+='www\n									<!--x 在xxx计划表中 通过任务xxx 生成了 计划项xxxx-->\n										<li>\n											<span class="hour_hylt">'+(null==(__t=b.Source.CreateDate)?"":__t)+'</span>\n											<a href="'+(null==(__t=a.User.HomeUrl)?"":__t)+'" title="" class="name_hylt">'+(null==(__t=a.User.Name)?"":__t)+"</a>&nbsp;在"+(null==(__t=b.Source.PlanTableName)?"":__t)+"&nbsp;中&nbsp;"+(null==(__t=b.Source.Content1)?"":__t)+'&nbsp;<a href="'+(null==(__t=b.Source.TaskUrl)?"":__t)+'" title="" class="link_hylt" target="_blank">'+(null==(__t=b.Source.ObjName)?"":__t)+"</a>&nbsp;"+(null==(__t=b.Source.Content2)?"":__t)+"&nbsp;"+(null==(__t=b.Source.PlanName)?"":__t)+"\n										</li>\n									"),__p+="\n								"}),__p+="\n							</ul>\n						</td>\n					</tr>\n				</table>\n				"}),__p+="\n			\n		"):(__p+='\n				<table>\n					<tr> \n						<td class="cont_hylt">\n							<ul>\n								',_.each(a.PlanOperationModels,function(a){__p+="\n								\n									","1"==a.Source.TepId?__p+='\n									<!--丹丹 添加了计划项 12月第四周的计划-->\n									<li>\n										<span class="hour_hylt">'+(null==(__t=a.Source.CreateDate)?"":__t)+'</span>\n										<span class="nolink_name_hylt">'+(null==(__t=a.Source.UserName)?"":__t)+"</span>&nbsp;"+(null==(__t=a.Source.Content1)?"":__t)+"&nbsp;"+(null==(__t=a.Source.PlanName)?"":__t)+"\n									</li>\n									":"2"==a.Source.TepId?__p+='\n									<!--刚刚  设置了计划项 30号的计划 的截止时间为 2013年11月22日 23:00-->\n									<li>\n										<span class="hour_hylt">'+(null==(__t=a.Source.CreateDate)?"":__t)+'</span>\n										<span class="nolink_name_hylt">'+(null==(__t=a.Source.UserName)?"":__t)+"</span>&nbsp;"+(null==(__t=a.Source.Content1)?"":__t)+"&nbsp;"+(null==(__t=a.Source.PlanName)?"":__t)+"&nbsp;"+(null==(__t=a.Source.Content2)?"":__t)+"\n									</li>\n									":"3"==a.Source.TepId?__p+='\n										<!--丹丹 添加共享者 海海-->\n										<li>\n											<span class="hour_hylt">'+(null==(__t=a.Source.CreateDate)?"":__t)+'</span>\n											<span class="nolink_name_hylt">'+(null==(__t=a.Source.UserName)?"":__t)+"</span>&nbsp;"+(null==(__t=a.Source.Content1)?"":__t)+'&nbsp;<a href="/u/'+(null==(__t=a.Source.ToUserId)?"":__t)+'" title="" class="link_hylt">'+(null==(__t=a.Source.ToUserName)?"":__t)+"</a>\n										</li>\n									":"4"==a.Source.TepId?__p+='\n										<!--XX 在计划项 XXX下分解出任务XXXX-->\n										<li>\n\n											<span class="hour_hylt">'+(null==(__t=a.Source.CreateDate)?"":__t)+'</span>\n											<span class="nolink_name_hylt">'+(null==(__t=a.Source.UserName)?"":__t)+"</span>&nbsp;"+(null==(__t=a.Source.Content1)?"":__t)+"&nbsp;"+(null==(__t=a.Source.PlanName)?"":__t)+"&nbsp;"+(null==(__t=a.Source.Content2)?"":__t)+'&nbsp;<a href="'+(null==(__t=a.Source.TaskUrl)?"":__t)+'" title="" class="link_hylt">'+(null==(__t=a.Source.ObjName)?"":__t)+"</a>\n										</li>\n									":"5"==a.Source.TepId&&(__p+='\n										<!--XX 通过任务XXX(objName)生成了计划项XXX-->\n										<li>\n											<span class="hour_hylt">'+(null==(__t=a.Source.CreateDate)?"":__t)+'</span>\n											<span class="nolink_name_hylt">'+(null==(__t=a.Source.UserName)?"":__t)+"</span>&nbsp;"+(null==(__t=a.Source.Content1)?"":__t)+'&nbsp;<a href="'+(null==(__t=a.Source.TaskUrl)?"":__t)+'" target="_blank" title="" class="link_hylt">'+(null==(__t=a.Source.ObjName)?"":__t)+"</a>&nbsp;"+(null==(__t=a.Source.Content2)?"":__t)+"&nbsp;"+(null==(__t=a.Source.PlanName)?"":__t)+"\n										</li>\n									"),__p+="\n								"}),__p+="\n							</ul>\n						</td>\n					</tr>\n				</table>\n			\n		"),__p+="\n		</li>\n	"}),__p+="\n</ul>\n\n\n";return __p},this.JST["plan/histroy/index-page"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="_tt_plan_histroy">\n	<div class="pagetitle"><h2>团队所有操作历史</h2></div>\n\n	<div class="_tt_plan_histroy_list">\n		<div class="_tt_loading_m">努力加载中…</div>\n	</div>\n</div>';return __p},this.JST["plan/index-page"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='\n	<!-- side sub nav -->\n	<div class="_tt_layout_tabnav tu-col-3" data-tu-submenu="tu-submenu">\n		<div data-name="side-bar-user-info" class="tt_side_subnav_userinfo"></div>\n		<div data-name="side-bar-nav"></div>\n	</div>\n	<!-- side sub nav end -->\n	<div class="_tt_layout_container  tu-col-13">\n		<div class="_tt_loading_m">努力加载中…</div>		\n	</div>\n	<div class="tt_plan_detail_container"></div>\n	';return __p},this.JST["plan/plan-list-data-nav"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<dl class="list">\r\n	',navData&&navData.length>0&&(__p+="\r\n		",_.each(navData,function(a,b){__p+='\r\n			<dd class="',0==b&&(__p+="noborder"),__p+='">\r\n			',__p+=routerData.isMySelf?'\r\n			<a data-trigger="false" href="#plan?type='+(null==(__t=routerData.type)?"":__t)+"&group_id="+(null==(__t=routerData.group_id)?"":__t)+"&tag_type="+(null==(__t=routerData.tag_type)?"":__t)+"&tag_id="+(null==(__t=routerData.tag_id)?"":__t)+"&plan_table_id="+(null==(__t=a.PlanTableId)?"":__t)+'" >\r\n				'+(null==(__t=a.Name)?"":__t)+"\r\n			</a>\r\n			":'\r\n			<a data-trigger="false" href="#plan?type='+(null==(__t=routerData.type)?"":__t)+"&to_user_id="+(null==(__t=routerData.to_user_id)?"":__t)+"&group_id="+(null==(__t=routerData.group_id)?"":__t)+"&tag_type="+(null==(__t=routerData.tag_type)?"":__t)+"&tag_id="+(null==(__t=routerData.tag_id)?"":__t)+"&plan_table_id="+(null==(__t=a.PlanTableId)?"":__t)+'">\r\n				'+(null==(__t=a.Name)?"":__t)+"\r\n			</a>\r\n			",__p+="\r\n			\r\n			</dd>\r\n		"}),__p+="\r\n	"),__p+="\r\n</dl>	\r\n";return __p},this.JST["plan/plan-list-empty"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="content">\r\n	',to_user_id!=loginUserId||"personal"!=type||isSearch?"group"!=type||isSearch?(__p+="\r\n		\r\n		","undefined"==typeof IsNotify||1!=IsNotify||isSearch?(__p+="\r\n			",__p+=isSearch?'\r\n				<span class="text">暂无数据</span>\r\n			':'\r\n				<span class="text">Ta还没有写'+(null==(__t=i18n.plan_1)?"":__t)+"</span>\r\n			",__p+="\r\n		"):__p+='\r\n		<span class="text">Ta还没有写'+(null==(__t=i18n.plan_1)?"":__t)+'，你可以</span>\r\n		<a user-id="'+(null==(__t=to_user_id)?"":__t)+'" href="javascript:void(0)" class="btnnotice btn btn-sure">正式通知Ta写'+(null==(__t=i18n.plan_1)?"":__t)+"</a>\r\n		",__p+="\r\n	"):__p+='\r\n		<span class="text">您的团队还没有发布自己的'+(null==(__t=i18n.plan_1)?"":__t)+"</span>\r\n	":__p+='\r\n\r\n		<span class="text">把'+(null==(__t=i18n.plan_1)?"":__t)+"写下来，你就已经成功了一半！</span>\r\n	",__p+="\r\n</div>";return __p},this.JST["plan/plan-list-feedback"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="loadfeed">\r\n	<div class="img_loadfed">\r\n		<span>tita努力加载中...</span>\r\n	</div>\r\n</div>\r\n\r\n';return __p},this.JST["plan/plan-list-layout"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='	<div class="_tt_plan_table"></div>\r\n	<div class="_tt_pagetab"></div>\r\n	<div data-name="plan-create-form"></div>\r\n	<div data-name="plan-data-filter">\r\n		<div class="_tt_loading_m">努力加载中…</div>\r\n	</div>\r\n	<div class="_tt_planlistcontanier">\r\n		<div class="_tt_loading_m">努力加载中…</div>\r\n	</div>\r\n	<div class="_tt_plan_tab_extra">\r\n		<ul class="tt_plan_feedback_histroy">\r\n			<li>\r\n				<a href="javascript:void(0);" data-trigger="false" type="feedBack">评价沟通</a>\r\n			</li>\r\n			<li><a href="javascript:void(0);" data-trigger="false" type="daily">工作总结</a></li>\r\n			<li><a href="javascript:void(0);" data-trigger="false" type="histroy">操作历史</a></li>\r\n		</ul>\r\n		<div class="_tt_feedback"></div>\r\n		<div class="tt_plan_tab_daily"></div>\r\n		<div class="_tt_tab_histroy"></div>\r\n	</div>\r\n	<div data-name="share-range"></div>\r\n<!--plan end-->';return __p},this.JST["plan/plan-list-sidebar"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="tt_side_subnav_wrap">\r\n	',"personal"==routerData.type&&(__p+='\r\n		<div class="subtab_ssw">\r\n			',isShowPlan&&(__p+='\r\n			<li class="active"><a href="#plan?to_user_id='+(null==(__t=routerData.to_user_id)?"":__t)+'" title=""><span>'+(null==(__t=i18n.plan_1)?"":__t)+"</span></a></li>\r\n			"),__p+="\r\n			",IsUsePlanDaily&&(__p+='\r\n			<li><a href="#daily?to_user_id='+(null==(__t=routerData.to_user_id)?"":__t)+'" title=""><span>总结</span></a></li>\r\n			'),__p+="\r\n			\r\n		</div>\r\n	"),__p+='\r\n	<div class="year_ssw" data-name="year-list">\r\n		<a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown"><span>'+(null==(__t=current_year)?"":__t)+'</span><b class="caret"></b></a>\r\n		<ul class="dropdown_ssw">\r\n			',_.each(groupDatas,function(a){__p+='\r\n				<li><a href="#plan?group_id='+(null==(__t=a.GroupId)?"":__t)+"&to_user_id="+(null==(__t=routerData.to_user_id)?"":__t)+'" title="" groupid="'+(null==(__t=a.GroupId)?"":__t)+'">'+(null==(__t=a.GroupName)?"":__t)+"</a></li>\r\n			"}),__p+='\r\n		</ul>\r\n	</div>\r\n	\r\n	<ul class="_tt_side_subnav">			\r\n		',_.each(navData,function(a){__p+="\r\n				",routerData.isMySelf||"personal"!=routerData.type?routerData.isMySelf&&"personal"==routerData.type?__p+='\r\n					<li>\r\n					<a data-trigger="false" href="#plan?group_id='+(null==(__t=routerData.group_id)?"":__t)+"&tag_type="+(null==(__t=a.TagType)?"":__t)+"&tag_id="+(null==(__t=a.TagId)?"":__t)+'">'+(null==(__t=a.TagName)?"":__t)+"</a>	\r\n					</li>\r\n				":"group"==routerData.type&&(__p+='\r\n					<li>\r\n					<a data-trigger="false" href="#plan?type=group&group_id='+(null==(__t=routerData.group_id)?"":__t)+"&tag_type="+(null==(__t=a.TagType)?"":__t)+"&tag_id="+(null==(__t=a.TagId)?"":__t)+'">'+(null==(__t=a.TagName)?"":__t)+"</a>	\r\n					</li>\r\n				"):__p+='\r\n				<li>\r\n					<a data-trigger="false" href="#plan?to_user_id='+(null==(__t=routerData.to_user_id)?"":__t)+"&group_id="+(null==(__t=routerData.group_id)?"":__t)+"&tag_type="+(null==(__t=a.TagType)?"":__t)+"&tag_id="+(null==(__t=a.TagId)?"":__t)+'">'+(null==(__t=a.TagName)?"":__t)+"</a>			\r\n				</li>\r\n				",__p+="	\r\n		"}),__p+="\r\n	</ul>\r\n</div>";return __p},this.JST["plan/plan-notice/index-page"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="userwho"></div>\r\n<div class="sendbox"></div>\r\n';return __p},this.JST["plan/plan-notice/sent-box"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="mailtemplate">\r\n	',__p+=IsSendMail?'\r\n	<div class="input-default">\r\n		<textarea name="" rows="" cols="">'+(null==(__t=MailContent)?"":__t)+"</textarea>\r\n	</div>\r\n	":'\r\n	<div class="input-default input-disable">\r\n		<textarea name="" rows="" cols="" disabled="true">'+(null==(__t=MailContent)?"":__t)+"</textarea>\r\n	</div>\r\n	",__p+='\r\n	<ul class="settype">\r\n		<li>\r\n			<a href="javascript:void(0);" class="disabel_check_st"><span class="ico"></span></a>\r\n			<strong>系统通知</strong><span>（内容为系统自动生成）</span>\r\n		</li>\r\n		<li>\r\n			',__p+=IsSendMail?'\r\n			<a href="javascript:void(0);" class="check_st check_check_st"><span class="ico"></span></a>\r\n			':'\r\n			<a href="javascript:void(0);" class="check_st"><span class="ico"></span></a>\r\n			',__p+='\r\n			<strong>正式邮件通知</strong><span>（内容需自行编辑）</span>\r\n		</li>\r\n	</ul>\r\n	<div class="senderwrap">\r\n		<ul class="copytoself">\r\n			',IsSendMail?(__p+="\r\n				",__p+=IsCopySelf?'\r\n				<li><a class="checkbox checkbox-checked" href="javascript:void(0);"><span class="ico"></span></a>\r\n				<span>同时抄送我自己</span></li>\r\n				':'\r\n				<li><a class="checkbox" href="javascript:void(0);"><span class="ico"></span></a>\r\n				<span>同时抄送我自己</span></li>\r\n				',__p+="\r\n			"):__p+='\r\n				<li><a class="disabel_check_st" href="javascript:void(0);"><span class="ico"></span></a>\r\n				<span>同时抄送我自己</span></li>\r\n			',__p+="\r\n		</div>\r\n	</div>\r\n</div>";
return __p},this.JST["plan/plan-notice/user-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+=(null==(__t=_.convertImage({className:"avatar_uw",src:UserAvatar.Small,size:30,shape:"radius",name:Name,bgColor:UserAvatar.Color}))?"":__t)+'\r\n\r\n<a href="javascript:void(0);" class="select_uw"><span class="ico"></span></a>\r\n';return __p},this.JST["plan/plan-notice/user-list"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="title_uw">通知对象：</div>\r\n<ul class="list_uw"></ul>';return __p},this.JST["plan/plan-sidebar-top"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)"personal"==routerData.type?(__p+='\n<div class="_tt_selectyearplan">\n	<a href="#italent/home?appid=1&apptype=1&name=TalentProfile-record&to_user_id='+(null==(__t=user.Id)?"":__t)+'" class="avatar_ttsyp" title="'+(null==(__t=user.Name)?"":__t)+'">\n		',__p+="undefined"!=typeof user.UserAvatar&&user.UserAvatar.HasAvatar===!1?"\n			"+(null==(__t=_.convertImage({className:"",src:"qqq",size:50,shape:"radius",name:user.Name,bgColor:user.UserAvatar.Color}))?"":__t)+"\n		":'\n			<img class="radius_img50" src="'+(null==(__t=user.UserAvatar.Medium)?"":__t)+'" width="50" height="50">\n		',__p+='\n	</a>\n	<div class="wrap">  \n		<a class="name_ttsyp" href="#italent/home?appid=1&apptype=1&name=TalentProfile-record&to_user_id='+(null==(__t=user.Id)?"":__t)+'">'+(null==(__t=user.Name)?"":__t)+'</a>\n		<span class="department_ttsyp">'+(null==(__t=user.Department)?"":__t)+"</span>\n		\n    </div>	\n</div>\n"):__p+='\n<div class="tt_side_subnav_group">\n	<span class="ico_ssg"></span>\n	<div class="text_ssg">'+(null==(__t=team_name)?"":__t)+"</div>\n</div>\n";return __p},this.JST["plan/table/index-page"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="tt_plan_table_container">\r\n	<div class="tt_plan_table_tab">\r\n	\r\n		<div class="_tt_plan_table_btn">\r\n			',14!=tag_id&&(__p+='\r\n			<a href="javascript:void(0)" class="btn" data-name="enter-group">\r\n				',__p+="group"==type?"\r\n					我的"+(null==(__t=i18n.plan_1)?"":__t)+"\r\n				":"\r\n					团队"+(null==(__t=i18n.plan_1)?"":__t)+"\r\n				",__p+='\r\n			</a>\r\n			<a href="#" class="btn gantt_btn">甘特图</a>\r\n			<a href="javascript:void(0)" class="btn btnnoticesuperior">提醒上级查看</a>\r\n			'),__p+='\r\n			<div class="tt_plan_table_btn_right">\r\n				',14!=tag_id&&(__p+='\r\n				<a href="javascript:void(0);" class="btn media_ptbr" data-name="level-view">隔级查看</a>\r\n				',IsUsePlanDaily&&(__p+='\r\n					<a href="#daily?type=group" class="btn media_ptbr">团队日报</a>\r\n				'),__p+='\r\n				<a href="#set?page_id=plan" class="btn media_ptbr">设置团队成员</a>\r\n				<a href="javascript:void(0)" data-trigger="false" class="btn media_ptbr" data-name="up-set">上级规定</a>\r\n				'),__p+='\r\n				<a href="javascript:void(0);" class="btn btnMore">更多<span class="icon-arrow-down-2t"></span></a>\r\n\r\n				<ul class="dropdown_ptbr" data-name="more-drop-down-box">\r\n					<li class="media_ptbr"><a href="javascript:void(0);" data-name="level-view">隔级查看</a></li>\r\n					',IsUsePlanDaily&&(__p+='\r\n						<li class="media_ptbr">\r\n							<a href="#daily?type=group" data-name="enter-group">团队日报</a>\r\n						</li>\r\n					'),__p+='\r\n					\r\n					<li class="media_ptbr"><a href="#set?page_id=plan">设置团队成员</a></li>\r\n					<li class="media_ptbr"><a href="javascript:void(0)" data-name="up-set" data-trigger="false">上级规定</a></li>\r\n					<li data-name="approval-group" class="disabled">\r\n						<a href="javascript:void(0)" data-name="enter-apply">团队'+(null==(__t=i18n.plan_1)?"":__t)+'审批</a>\r\n					</li>\r\n					<li data-type="notice" class="disabled">\r\n						<a href="javascript:void(0);">通知团队写'+(null==(__t=i18n.plan_1)?"":__t)+'</a>\r\n					</li>\r\n					<li data-type="history">\r\n						<a href="#plan/histroy">查看团队所有操作历史<span class="indicator" style="display: none;"></span></a>\r\n					</li>\r\n					<li><a href="'+(null==(__t=printUrl)?"":__t)+'" target="_blank" class="btnPrint">打印与导出</a></li>\r\n				</ul>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="tt_plan_table_list_container">\r\n		\r\n	</div>\r\n</div>\r\n\r\n';return __p},this.JST}),define("views/plan/plan-notice/send-view",["talent","templates/plan"],function(a,b){return a.CompositeView.extend({template:b["plan/plan-notice/sent-box"],ui:{inpuCheck:"a.check_st",textarea:".input-default",copyCheck:"a.checkbox"},events:function(){var a={};return a["click "+this.ui.inpuCheck]="_toggelTab",a["click "+this.ui.copyCheck]="onCopyCheck",a},initialize:function(){this.model.set("IsSendMail",!0),this.model.set("IsCopySelf",!0),this.i18n=a.Context.getI18n(),this.iPlan=this.i18n.plan_1},modelEvents:{change:"render"},templateHelpers:function(){var a=new Date,b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate(),e=new Date(a.getTime()+6048e5),f=e.getMonth()+1,g=e.getDate();return{MailContent:this.model.get("MailContent")||"各位：\n请尽快在tita上填写你的"+this.iPlan+",最晚于"+f+"月"+g+"号提交。",RecipientName:this.model.get("RecipientName")||"",SenderName:this.model.get("SenderName")||"",SendTime:this.model.get("SendTime")||b+"年"+c+"月"+d+"日"}},_toggelTab:function(){this.model.get("IsSendMail")?this.model.set("IsSendMail",!1):this.model.set("IsSendMail",!0)},onCopyCheck:function(){this.model.get("IsCopySelf")?this.model.set("IsCopySelf",!1):this.model.set("IsCopySelf",!0)},getCotent:function(){if(this.model.get("IsSendMail")){var b=a.$(this.ui.textarea).find("textarea").val();return b=b.replace(/[\n\r]/g,"</br>")}return""},reset:function(){this.model.set("IsSendMail",!0),this.model.set("IsCopySelf",!0)}})}),define("views/plan/plan-notice/user-item-view",["talent","templates/plan","$.tipsy"],function(a,b){return a.ItemView.extend({tagName:"li",template:b["plan/plan-notice/user-item"],initialize:function(){this.isDisableSelect=this.options.isDisableSelect||!1},onRender:function(){this.isDisableSelect&&a.$(this.el).addClass("disable"),this.model.get("IsActive")?a.$(this.el).addClass("active"):a.$(this.el).removeClass("active"),a.$(this.el).attr("Id",this.model.get("Id")),$(".tipsy").hide(),a.$(this.el).find(".avatar_uw").tipsy({gravity:"s"})},onClose:function(){$(".tipsy").hide()}})}),define("views/plan/plan-notice/user-composite-view",["talent","templates/plan","views/plan/plan-notice/user-item-view","tdialog"],function(a,b,c,d){return a.CompositeView.extend({template:b["plan/plan-notice/user-list"],itemViewContainer:"ul",itemView:c,ui:{item:"li"},events:function(){var a={};return a["click "+this.ui.item]="_selectUser",a["mouseenter "+this.ui.item]="_hoverUser",a["mouseleave "+this.ui.item]="_hoverUser",a},collectionEvents:{change:"render"},initialize:function(){this.userListData=[]},request:function(){{var b=this;a.app.request("UserSubordinate:getSubordinate",{level:2}).done(function(a){b.userListData=a,b.collection.reset(b.addAttr(a))})}},returnUserIds:function(){var b=[];return a._.filter(this.collection.toJSON(),function(c){if(c.IsActive){var d=a._.pick(c,"Id");b.push(a._.values(d))}}),b.join(",")},_selectUser:function(b){var c=this;if(this.model.get("isDisableSelect"))return!0;var e=a.$(b.currentTarget),f=e.index(),g=this.collection.at(f);c.selectUserTipView&&c.selectUserTipView.$el.remove();var h=a._.filter(this.collection.toJSON(),function(a){return a.IsActive?a.IsActive:void 0});return h.length<=1&&g.get("IsActive")?(this.selectUserTipView=new d({fixed:!1,type:"modal",cancel:!1,sure:!1,zindex:1001}),this.selectUserTipView.render().$el.appendTo("body"),this.selectUserTipView.show(e,'<div class="innerhtml_dialog">请至少选择一个通知对象</div>',{arrow:!1,pos:"bottomCenter"}),void setTimeout(function(){c.selectUserTipView.$el.remove()},3e3)):void(g.get("IsActive")?g.set("IsActive",!1):g.set("IsActive",!0))},_hoverUser:function(b){var c=a.$(b.currentTarget);c.toggleClass("hover")},addAttr:function(a){for(var b=0;b<a.length;b++)a[b].IsActive=!0;return a},reset:function(){this.collection.reset(this.addAttr(this.userListData))},itemViewOptions:function(){var a=this.model.get("isDisableSelect")||!1;return{isDisableSelect:a}}})}),define("views/plan/plan-notice/index-page-view",["talent","templates/common","views/plan/plan-notice/send-view","views/plan/plan-notice/user-composite-view"],function(a,b,c,d){var e=a.Layout.extend({tagName:"div",className:"noticemessage",template:b["plan/plan-notice/index-page"],regions:{userList:".userwho",sendbox:".sendbox"},initialize:function(){var b=this;this.i18n=a.Context.getI18n(),this.iPlan=this.i18n.plan_1,this.userIds=[],this.isShowUserList=0==this.options.isShowUserList?!1:!0,this.isToSubordinate=1==this.options.isToSubordinate?!0:!1,this.isToSuperior=1==this.options.isToSuperior?!0:!1,this.superiorUser=this.options.superiorUser&&this.options.superiorUser!={}?this.options.superiorUser:{},this.routerData=this.options.routerData||[],this.loginUser=a.Context.getUserInfo();var e=this.routerData.tag_id,f=this.routerData.startDate||"",g="";g=e&&e>1?e-1+"月":a._.substring(f,6),this.sendView=new c,this.userCompositeView=new d;a.app.request("UserSubordinate:getSubordinate",{level:2}).done(function(c){if(b.isToSuperior)var d=b.superiorUser;else if(b.isToSubordinate)var d=a._.filter(c,function(a){return a.Id==b.routerData.to_user_id});var e=new Date,f=e.getFullYear(),h=e.getMonth()+1,i=e.getDate(),j=new Date(e.getTime()+6048e5),k=(j.getMonth()+1,j.getDate(),"各位");if(b.isToSuperior){k=d[0].Name;var l="你好，我已填好"+g+b.routerData.plan_table_name+b.iPlan+"，请查阅。"}else{b.isToSubordinate&&(k=d[0].Name);var l="请及时交付"+g+b.routerData.plan_table_name+b.iPlan+"，务必严格执行。\n制定"+b.iPlan+"时请遵循以下几点：\n1.要具体、可达、可衡量，突出重点，详情中可以描述目标与措施。\n2.有未完成的，可酌情纳入本期"+b.iPlan+"。"}if(b.sendView.model.set("MailContent",l),b.sendView.model.set("RecipientName",k),b.sendView.model.set("SenderName",b.loginUser.Name),b.sendView.model.set("SendTime",f+"年"+h+"月"+i+"日"),b.isToSubordinate||b.isToSuperior){var m=b.userCompositeView.addAttr(d);b.userCompositeView.model.set("isDisableSelect",!0)}else var m=b.userCompositeView.addAttr(c);b.userCompositeView.collection.reset(m)});this.$el.bind("click",function(a){a.stopPropagation()})},onRender:function(){this.isShowUserList?this.userList.show(this.userCompositeView):this.$el.find(this.regions.userList).hide(),this.sendbox.show(this.sendView)},setuserIds:function(a){this.userIds=a},getUserIds:function(){if(!this.isShowUserList)return this.userIds;var a=this.userCompositeView.returnUserIds(),b=this.sendView.model.get("IsCopySelf")&&this.sendView.model.get("IsSendMail")?!0:!1;return b&&(a=a+","+this.loginUser.Id),a},getMailCont:function(){return this.sendView.getCotent()},getMailSender:function(){return this.loginUser.Name},reset:function(){this.sendView.reset(),this.userCompositeView.reset()}});return e}),define("views/common/membership/membership-tab-operate-view",["talent","templates/common","tdialog","views/plan/plan-notice/index-page-view","$.tipsy"],function(a,b,c,d){var e=a.ItemView.extend({tagName:"li",template:a._.template(['<% if(href != "") {%>',"	<a href=<%= href %>><%= name %></a>","<% } else { %>",'	<a href="javascript:void(0)"><%= name %></a>',"<% } %>"].join("")),initialize:function(){},onRender:function(){"history"==this.model.get("type")&&this.$el.find("a").append('<span class="indicator"></span>'),this.$el.attr("data-type",this.model.get("type"))}});return a.CompositeView.extend({template:b["common/membership/membership-tab-operate"],itemView:e,itemViewContainer:".menu-list",defaults:function(){return{data:[{name:"设置团队成员",href:"#set?page_id=plan",type:"set"},{name:"查看团队日报",href:"#daily?type=group",type:"daily-group"},{name:"通知大家写"+this.iPlan,href:"",type:"notice"},{name:"查看团队所有操作历史",href:"#plan/histroy",type:"history"}]}},events:{"click .membership_bottom_btn":"afterShowDropDownClick","mouseenter .membership_bottom_btn":"overShowDropDownClick","mouseleave .membership_bottom_btn":"leaveShowDropDownClick","click li[data-type=notice]":"renderNoticeDialogView","click li[data-type=daily-group]":"_dailyGroupClick"},modelEvents:{},initialize:function(){this.i18n=a.Context.getI18n(),this.iPlan=this.i18n.plan_1;var b=this.defaults();this.collection=new a.Collection(b.data)},changeMode:function(a){this.$el.find(".membership_bottom").removeClass("short"),this.$el.find(".membership_bottom_btn").tipsy("disable"),"wide"!=a&&(this.$el.find(".membership_bottom_btn").tipsy({gravity:"se",fallback:"团队操作"}),this.$el.find(".membership_bottom").addClass("short"))},onShow:function(){this.getHistroyIndicator();var b=this;a.$("body").off("click.membership_drop"),a.$("body").on("click.membership_drop",function(){b.$el.find(".dropdown-menu").hide(),b.$el.find(".membership_bottom_btn .indicator_all").show(),b.noticeDialogView&&b.noticeDialogView.$el.hide()})},afterShowDropDownClick:function(b){var c=this;b.stopPropagation();var d=a.$(b.currentTarget);a.app.request("Membership:getSubordinateData",{}).done(function(b){var e=a.Context.getUserInfo().Id;!b||!b.length||1==b.length&&b[0].Id==e?c.$el.find("li[data-type=notice]").addClass("disable"):c.$el.find("li[data-type=notice]").removeClass("disable"),d.find(".indicator_all").hide(),d.find(".dropdown-menu").show()})},overShowDropDownClick:function(b){var c=a.$(b.currentTarget);c.addClass("hover")},leaveShowDropDownClick:function(b){var c=a.$(b.currentTarget);c.removeClass("hover")},_dailyGroupClick:function(){var a=this;setTimeout(function(){a.$el.find(".dropdown-menu").hide()},300)},renderNoticeDialogView:function(b){b.stopPropagation();var e=a.$(b.currentTarget);if(!e.hasClass("disable")){this.$el.find(".dropdown-menu").hide();var f=this;this.noticeViewStatus=!0,this.planNoticeIndexPageView=new d({isShowUserList:!0,isToSubordinate:!1,routerData:this.model.get("routerData")});var g=this.planNoticeIndexPageView.render().el;this.noticeDialogView=new c({fixed:!0,type:"modal",sure:function(){f.sendNotce()},cancel:function(){f.planNoticeIndexPageView.close(),f.noticeDialogView.$el.remove()}}),this.noticeDialogView.render().$el.appendTo("body");var h=this.$el.find(".membership_bottom_btn").offset().top-$(document).scrollTop();this.noticeDialogView.show(this.$el.find(".membership_bottom_btn"),g,{arrow:!1,pos:"leftBottom",height:487,arrowBias:-2,domOffTop:h})}},sendNotce:function(){var b=this.model.get("routerData"),c=this,d=this.planNoticeIndexPageView.getUserIds(),e={GroupId:b.group_id,TagId:b.tag_id,PlanTableId:b.plan_table_id,MessageType:12,UserIds:d},f=this.planNoticeIndexPageView.getMailCont(),g="";b.tag_id>1&&(g=b.tag_id-1+"月"),f&&(e.EmailContent=f),e.MessageContent="通知你写计划&nbsp;"+g+b.plan_table_name;a.app.request("PlanCommmon:postSendNotice",e).done(function(){c.planNoticeIndexPageView.close(),c.noticeDialogView.hide(),c.showMsgDialog("通知已发送",c.$el.find(".membership_bottom"))}).fail(function(){c.planNoticeIndexPageView.close(),c.noticeDialogView.hide(),c.showMsgDialog(msg,c.$el.find(".membership_bottom"))})},showMsgDialog:function(a,b){this.dialogView=new c({fixed:!0,type:"tipsy",pos:"leftCenter",sure:!1,cancel:!1,arrow:!1});var d=this;this.dialogView.render().$el.appendTo("body"),this.dialogView.show(b,a,{arrow:1,pos:"leftBottom",arrowBias:-15,topBias:0,className:"success"}),setTimeout(function(){d.dialogView.$el.remove()},3e3)},getHistroyIndicator:function(){var b=this,c=b.$el.find(".indicator");a.app.request("Indicator:getPlanOperationData",{}).done(function(a){return!a||0==a||0>a?void c.hide():void c.show().html(a)})},onClose:function(){a.$("body").off("click.membership_drop"),a.$(".tipsy").remove(),this.dialogView&&this.dialogView.$el&&this.dialogView.$el.remove()}})}),define("views/common/membership/membership-tab-component",["talent","templates/common","views/common/membership/membership-tab-layout","views/common/membership/membership-tab-thumb-composite-view","views/common/membership/membership-tab-operate-view","$.tipsy"],function(a,b,c,d,e){return a.Layout.extend({defaults:{bottomView:"new bottomView()",showShare:!0,type:0},template:b["common/membership/membership-tab-component"],regions:{tabRegion:{selector:"#membership_tab"},operate:"#membership_bottom_container"},ui:{arrow:".membership_arrow_icon",arrowBtn:".membership_arrow",tab:".membership_tab_title",tabLi:".membership_tab_title li"},events:function(){var a={};return a["click "+this.ui.arrowBtn]="afterArrowClick",a["click "+this.ui.tabLi]="afterTabClick",a},modelEvents:{"change:mode":"afterViewModeChange","change:viewName":"afterViewNameChange"},initialize:function(b){var c=this;this.setting=a._.extend({},this.defaults,b);var d=a.app.request("history:getQueryObject");d.done(function(d){c.routerData=d;var f={mode:"narrow",viewName:"membership",showBottom:!1,showTab:!1,bottomView:new e};c.bottomView=b&&b.bottomView||new e;var g=a.$.extend({},f,b);"undefined"!=typeof c.routerData.viewName&&c.routerData.viewName&&(g.viewName=c.routerData.viewName),c.model=new a.Model(g),c.userInfo=a.Context.getUserInfo(),c.userInfo.MidAvatar=c.userInfo.Avatar.replace("_s","_m"),c.options.model&&c.listenTo(c.options.model,"change:viewName",function(){var a=c.options.model.get("viewName");c.model.set("viewName",a),c.$el.find(".membership_tab_title li").removeClass("active"),c.$el.find("li[data-name="+a+"]").addClass("active")})})},onRender:function(){var b=this;a.app.vent.off("membership:show:wide"),a.app.vent.on("membership:show:wide",function(){b.model.set("mode","wide")}),0==this.model.get("showTab")&&this.$el.find(".membership_tab_top").remove(),this.$el.find(".membership_tab_title li span").tipsy({gravity:"se"}),this.ui.arrowBtn.tipsy({title:function(){return"wide"==b.model.get("mode")?"收起隔级查看":"展开隔级查看"},gravity:"e"}),this.afterViewModeChange(!0)},getActiveId:function(){var b=this,c=new a.$.Deferred,d=a.app.request("history:getQueryObject");return d.done(function(d){b.activeId=d.to_user_id?d.to_user_id:a.Context.getUserInfo().Id,c.resolve(b.activeId)}),c.promise()},renderMembershipView:function(){"wide"==this.model.get("mode")?this.renderMembershipTabView():this.renderMembershipTabThumbView(),this.renderBottomOperateView()},renderBottomOperateView:function(){"membership"==this.model.get("viewName")&&1==this.model.get("showBottom")?(this.operate.show(this.bottomView),this.bottomView.changeMode&&this.bottomView.changeMode(this.model.get("mode"))):this.operate&&this.operate.close()},renderMembershipTabThumbView:function(){var b=this;this.getActiveId().done(function(c){var e=a.Context.getUserInfo().Id,f=a.app.request("Membership:getSubordinateData",{id:e,type:b.setting.type});f.done(function(e){var f=(e[0],e);f=1==f.length?[]:f,this.subordinate=f;var g=new d({collection:new a.Collection(f),model:new a.Model({activeId:c,viewName:"membership"})});g.on("change:mode",function(a){b.model.set("mode",a)}),b.tabRegion&&b.tabRegion.show(g),b.bindEvents(g)})})},renderMembershipTabView:function(){var b=this,d=a.Context.getUserInfo().Id;this.getActiveId().done(function(e){b.membershipTabLayout?(d==e&&b.membershipTabLayout.model.set({middleId:e,direction:"down",activeId:e,profileId:e,type:b.setting.type}),b.tabRegion.show(b.membershipTabLayout)):(b.membershipTabLayout=new c({model:new a.Model({middleId:e,direction:"down",activeId:e,profileId:e,type:b.setting.type})}),b.tabRegion.show(b.membershipTabLayout),b.bindEvents(b.membershipTabLayout))})},renderShareView:function(){var b=this;this.getActiveId().done(function(c){a.app.request("Plan:getShareWidthMeData",{}).done(function(a){var d=a;b.afterRenderShareView(c,d)})})},afterRenderShareView:function(b,c){var e=this.model.get("mode");c=c&&c.length?c:[];var f=new d({collection:new a.Collection(c),model:new a.Model({activeId:b,viewName:"share",mode:e})});this.tabRegion.show(f),this.bindEvents(f)},renderNarrowViewByData:function(){var b=this;this.$el.find(".membership_tab_title li span").tipsy("enable"),this.ui.arrow.removeClass("membership_arrow_right").addClass("membership_arrow_left"),this.$el.find(".membership_right").addClass("short"),this.$el.find(".membership_tab_title").fadeIn("fast"),this.getActiveId().done(function(c){a.app.request("Plan:getShareWidthMeData",{}).done(function(e){var f=e||[];a.app.request("Membership:getSubordinateData",{id:c}).done(function(e){b.renderBottomOperateView();var g=(e[0]&&e[0].subordinate,e),h="membership",i=g.length&&1!=g.length?g:[];(1==g.length||0==g.length)&&f.length&&(h="share",i=f);var j=new d({collection:new a.Collection(i),model:new a.Model({activeId:c,viewName:h})});b.tabRegion.show(j),b.bindEvents(j),b.model.set("viewName",h,{silent:!0}),"share"==h?(b.ui.tab.find(".active").removeClass("active"),b.ui.tab.find("li[data-name=share]").addClass("active")):(b.ui.tab.find(".active").removeClass("active"),b.ui.tab.find("li[data-name=membership]").addClass("active"))})})})},afterArrowClick:function(){var a="wide"==this.model.get("mode")?"narrow":"wide";this.model.set("mode",a)},afterViewModeChange:function(){this.tabRegion.close();{var a=this,b=this.model.get("mode");this.model.get("showTab")}"wide"==b?(this.$el.find(".membership_icon_st").tipsy("disable"),this.$el.find(".membership_icon_share").tipsy("disable"),this.ui.arrow.removeClass("membership_arrow_left").addClass("membership_arrow_right"),this.$el.find(".membership_right").removeClass("short"),this.$el.find(".membership_tab_title").removeClass("short").fadeIn("fast"),this.$el.find(".membership_right").animate({width:278},300,function(){a.afterViewNameChange()})):(this.$el.find(".membership_tab_title li span").tipsy("enable"),this.ui.arrow.removeClass("membership_arrow_right").addClass("membership_arrow_left"),this.$el.find(".membership_right").addClass("short"),this.$el.find(".membership_tab_title").fadeIn("fast"),this.$el.find(".membership_right").animate({width:65},300,function(){a.afterViewNameChange()}))},afterTabClick:function(b){a.$(".tipsy").remove();var c=a.$(b.currentTarget);if(!c.hasClass("active")){var d=c.attr("data-name");this.model.set("viewName",d),this.ui.tab.find(".active").removeClass("active"),c.addClass("active");var e=decodeURIComponent(location.hash);a.app.execute("history:navigate",e,!1)}},afterViewNameChange:function(){"membership"==this.model.get("viewName")?this.renderMembershipView():(this.renderShareView(),this.operate.close()),this.$el.find(".membership_tab_title li").removeClass("active"),this.$el.find("li[data-name="+this.model.get("viewName")+"]").addClass("active")},changeRoute:function(a){var b=this.model.get("viewName");return"share"==b?void this.changeShareRoute(a):void this.changeGroupRoute(a)},changeShareRoute:function(b){var c,d=decodeURIComponent(location.hash);c=d.indexOf("?")>0?d.split("?")[0]:d,d=c+"?to_user_id="+b+"&viewName=share",a.app.execute("history:navigate",d,!0)},changeGroupRoute:function(b){var c=decodeURIComponent(location.hash),d="to_user_id="+b;-1!=c.indexOf("to_user_id")?c=c.replace(/to_user_id=\w+/,d):c+=c.indexOf("?")<0?"?to_user_id="+b:"&to_user_id="+b,a.app.execute("history:navigate",c,!0)},routerDataChange:function(){this.ui.arrow.hasClass("membership_arrow_left")&&this.renderMembershipTabThumbView()},bindEvents:function(a){var b=this;a.off("detailIdChanged"),a.on("detailIdChanged",function(a){b.changeRoute(a)})},templateHelpers:function(){return{showShare:this.setting.showShare}},onClose:function(){a.app.vent.off("membership:show:wide")}})}),define("views/daily/daily-sidebar-top-view",["talent","templates/daily"],function(a,b){return a.ItemView.extend({template:b["daily/daily-sidebar-top"],modelEvents:{"change:user":"render"}})}),define("views/common/error-tracker-view",["talent","templates/common"],function(a,b){return a.ItemView.extend({template:b["common/error-tracker"],defaults:{content:"暂时没有查看权限",subContent:""},className:"_tt_errotracker",events:{"click #close":"clickClosed"},templateHelpers:function(){return{content:this.settings.content,subContent:this.settings.subContent||""}},initialize:function(){this.settings=a._.extend({},this.defaults,this.options)},onShow:function(){var a=3,b=this.$el.find("#secondNumClose"),c=null;c=setInterval(function(){b.html(a--),0>a&&clearInterval(c)},1e3)},clickClosed:function(){this.closeWindow()},closeWindow:function(){window.opener=null,window.open("","_self",""),window.close()}})}),define("views/common/plugins/calendar/calendar-view",["talent","templates/common","moment","momentZH"],function(a,b,c){return a.ItemView.extend({template:b["common/plugins/calendar/calendar"],className:"bs_calendar",defaults:{minDate:"2013/1/1",maxDate:"2020/12/31"},ui:{preMonth:"[data-name=pre]",nextMonth:"[data-name=next]",item:"[data-name=item]"},events:function(){var a={};return a["click "+this.ui.preMonth]="_pre",a["click "+this.ui.nextMonth]="_next",a["click "+this.ui.item]="_dateClick",a},modelEvents:{change:"render"},initialize:function(b){this.settings=a._.extend({},this.defaults,b)},templateHelpers:function(){var a=this.model.get("time"),b=c(new Date(a)),d=b.year(),e=b.month(),f=this.model.get("calendarType"),g=!1,h=!1;return 2==f?(c(new Date(a)).add(1,"month").format("YYYY/MM/30")>this.settings.maxDate&&(h=!0),c(new Date(a)).add(-1,"month").format("YYYY/MM/1")<this.settings.minDate&&(g=!0)):3==f&&(c(new Date(a)).add(1,"year").format("YYYY/12/30")>this.settings.maxDate&&(h=!0),c(new Date(a)).add(-1,"year").format("YYYY/1/1")<this.settings.minDate&&(g=!0)),{year:d,month:e,hidePre:g,hideNext:h,moment:c}},_dateClick:function(a){var b=this.$(a.currentTarget),c=b.attr("date"),d=b.attr("planTableId");this.trigger("dateclick",{time:c,plan_table_id:d})},_pre:function(){this._changeMonth(-1)},_next:function(){this._changeMonth(1)},_changeMonth:function(a){var b=this.model.get("time"),d="",e=this.model.get("calendarType");2==e?d=c(new Date(b)).add(a,"month").format("YYYY/MM/01"):3==e&&(d=c(new Date(b)).add(a,"year").format("YYYY/MM/01")),d>this.settings.maxDate?d=this.settings.maxDate:d<this.settings.minDate&&(d=this.settings.minDate),this.model.set({time:d},{silent:!0}),this.trigger("timechange",d)}})}),define("views/common/plugins/calendar/highlight-calendar-view",["talent","templates/common","views/common/plugins/calendar/calendar-view"],function(a,b,c){return a.ItemView.extend({defaults:{title:"团队月统计：",labels:["已交","未交","补交"],calendarType:2},className:"bs_highlight_calendar",template:b["common/plugins/calendar/highlight-calendar"],modelEvents:{change:"render"},ui:{datePicker:"div[data-name=date-picker]"},initialize:function(){this.settings=a._.extend({},this.defaults,this.options),this.model.set(this.settings)},onRender:function(){this.dailyPicker=new a.Region({el:this.ui.datePicker}),this.dailyPickerView=new c({model:this.model}),this.listenTo(this.dailyPickerView,"timechange",function(a){this.trigger("timechange",a)}),this.listenTo(this.dailyPickerView,"dateclick",function(a){this.trigger("dateclick",a)}),this.dailyPicker.show(this.dailyPickerView)}})}),define("views/daily/index-page-view",["talent","templates/daily","views/daily/daily-completion-view","views/daily/dialy-sidebar-view","views/daily/highlight-date-view","views/common/bs-tab/bs-tab","moment","momentZH","views/daily/detail/detail-index-page-view","views/common/membership/membership-tab-component","views/common/membership/membership-tab-operate-view","views/daily/daily-sidebar-top-view","views/common/error-tracker-view","views/common/plugins/calendar/highlight-calendar-view"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=new a.Model,p=new a.Model,q=a.Layout.extend({template:b["daily/index-page"],className:"tu-row-fuild",regions:{completion:"div[data-name=completion]",sideBarNav:"div[data-name=side-bar-nav]",sideBarUserInfo:"div[data-name=side-bar-user-info]",datePicker:"div[data-name=datepicker-statistics]"},ui:{sideBarNav:"div[data-name=side-bar-nav]",container:"div[data-name=container]"},templateHelpers:function(){return{i18n:this.i18n}},events:function(){var a={};return a["mouseenter "+this.ui.pubTab]="_overPubTabEventHandler",a["mouseleave "+this.ui.pubTab]="_leaverPubTabEventHandler",a},initialize:function(){this.userInfo=a.Context.getUserInfo(),this.i18n=a.Context.getI18n(),a.Context.setPageTitle("tita-总结"),this.dailySidebarView=new d,this.dailySidebarTopView=new l},onShow:function(){var b=this;this._getRouterData(),this.routerData.today=g().format("YYYY/MM/DD"),this.routerData.isMySelf?this._getMockData().done(function(){b._readyRenderView()}):this._getPageData(),this._setClientHeight(),a._.splash("daily")},_getRouterData:function(){var b=this,c=a.app.request("history:getQueryObject"),d=new a.$.Deferred;return c.done(function(a){if(b.routerData=a||{},b.routerData.to_user_id=a.to_user_id?a.to_user_id:b.userInfo.Id,b.routerData.date=a.date||g().format("YYYY/MM/DD"),b.routerData.group_id=parseInt(a.group_id)||0,b.routerData.isMySelf=b.routerData.to_user_id==b.userInfo.Id,b.routerData.type=b.routerData.type||"personal",b.routerData.report_type){var c={8:1,26:2,27:3};b.routerData.dailyType=c[b.routerData.report_type]||1}else b.routerData.dailyType=b.routerData.dailyType||1;b.routerData.plan_table_id&&o.set({plan_table_id:b.routerData.plan_table_id})}),d},_getMockData:function(){var b=this,c=new a.$.Deferred;return a.app.request("Daily:getMockDateData",{group_id:parseInt(b.routerData.group_id),date:this.routerData.date}).done(function(a){var d=a.Data;b.groupDatas=d.taglist,c.resolve(b.groupDatas)}).fail(function(a){c.reject(a)}),c},_getPageData:function(){var b=this;a.$.neoajax({url:a.Context.getWebUrl("Plan/"+this.userInfo.Id+"/Home/DailyIndex?toUserId="+this.routerData.to_user_id+"&groupId="+this.routerData.group_id),dataType:"jsonp"}).done(function(a){var c=a.Code;if(1==c){var d=a.Data;b.groupDatas=d.taglist,b._readyRenderView()}else b.groupDatas=[],b.tagDatas=[],b._rendNoLimits()})},_rendNoLimits:function(){this.errorTrackerView=new m({content:"哎呀~该日报暂时无法查看了",subContent:"只有建立了上下级关系或共享才能查看日报，请联系发日报者"}),this.completion.show(this.errorTrackerView)},_readyRenderView:function(){var b=this,c=this.groupDatas,d=this.routerData,e=(d.date,a._.findWhere(c,{GroupId:d.group_id}));e||(e=a._.findWhere(c,{Active:!0})),this.routerData.group_id=e.GroupId,this.routerData.group_name=e.GroupName,this.tagDatas=[],a._.each(e.PlanTableListModels,function(a){14!=a.TagId&&b.tagDatas.push(a)});var f;if(this.routerData.tag_id){var h=parseInt(d.tag_id);f=a._.findWhere(this.tagDatas,{TagId:h})}f||(f=a._.findWhere(this.tagDatas,{Active:!0})||this.tagDatas[0]),this.routerData.tag_id=f.TagId,this.routerData.tag_name=f.TagName,this.routerData.tag_type=f.TagType;var i=g().year();this.routerData.group_name!=i&&(this.routerData.date=f.Date),!this.routerData.isMySelf,this._renderSidebarView(),this._getAllDailyByDate()},_renderSidebarView:function(){this.dailySidebarView.model.set({routerData:this.routerData,navData:this.tagDatas,groupDatas:this.groupDatas}),this.sideBarNav.show(this.dailySidebarView),this._bindClickSideBar()},_bindClickSideBar:function(){this.sideBarTab=new f({el:this.$el.find("._tt_side_subnav"),eventTriggerName:"Dialy-Sidebar"}),this.sideBarTab.setDefault({tag_id:this.routerData.tag_id}),a.app.vent.off("tab:Dialy-Sidebar:change"),a.app.vent.on("tab:Dialy-Sidebar:change",function(b){o.set({plan_table_id:""},{silent:!0});var c=a.Context.parseUrl(b.attr("href"));this.routerData.to_user_id=c.to_user_id,this.routerData.group_id=c.group_id,this.routerData.tag_type=c.tag_type,this.routerData.tag_id=parseInt(c.tag_id),this.routerData.daily_id="";a._.findWhere(this.tagDatas,{TagId:this.routerData.tag_id});this.routerData.date=c.date,this._changeHash(),this._getAllDailyByDate()},this)},_renderUserInfoView:function(){this.dailySidebarTopView.model.set({user:o.get("user"),routerData:this.routerData,team_name:o.get("team_name")}),this.sideBarUserInfo&&this.sideBarUserInfo.show(this.dailySidebarTopView)},_getAllDailyByDate:function(){var b=this;a.app.request("Daily:getAllDailyByDate",{toUser_id:b.routerData.to_user_id,date:this.routerData.date,type:"personal"==this.routerData.type?1:2,dailyType:this.routerData.dailyType,plan_table_id:o.get("plan_table_id")}).done(function(a){a=a||{};var c=b.routerData,d=c.dailyType;a.plan_table_date=a.date,1==d&&(b.routerData.date=a.date),a.routerData=b.routerData,p.set({routerData:b.routerData},{silent:!0}),o.set(a,{silent:!0}),b._renderUserInfoView(),b._renderCompletionView(),b.routerData.daily_id&&b._getDetailData(b.routerData.daily_id)
})},_renderCompletionView:function(){var a=this;o.get("date")||o.set({date:g().format("YYYY/MM/DD")},{silent:!0}),this.dailyCompletionView=new c({model:o}),this.listenTo(this.dailyCompletionView,"typeChange",function(b){o.set({plan_table_id:""},{silent:!0}),this.routerData.dailyType=b;var c=a.routerData.date,d=g(),e=d.year(),f=d.month(),h=g(new Date(c)),i=h.year(),j=h.month();c=e==i&&f==j?d.format("YYYY/MM/DD"):h.format("YYYY/MM/01"),a.routerData.date=c,this._getAllDailyByDate()}),this.listenTo(this.dailyCompletionView,"edit-daily",function(a){this._getDetailData(a)},this),this.completion&&this.completion.show(this.dailyCompletionView);var b=o.toJSON(),d=b.routerData.type,e=b.is_have_subordinates;("group"!=d||e)&&this._renderDateStatistical()},_renderDateStatistical:function(){var b=this,c=this.routerData.dailyType,d=o.get("calendar");if(d&&d.length){var f="personal"==b.routerData.type?["已交","未交","补交"]:["全交","都没交","没交全"],g=(this.routerData.tag_id-1,this.routerData.date.split("/")),h=this.groupDatas,i=h[0].GroupName+"/01/01",j=h[h.length-1].GroupName+"/12/31";this.highLightDateView=new e({year:g[0],month:g[1],day:"1",title:"personal"==b.routerData.type?"个人统计：":"团队统计：",collection:new a.Collection(d),startDate:i,endDate:j,labels:f}),this.listenTo(this.highLightDateView,"clickDate",function(a){this._changeDate(a)}),this.listenTo(this.highLightDateView,"prev",function(a){b._getMonthCompleteStatusData(a)}),this.listenTo(this.highLightDateView,"next",function(a){b._getMonthCompleteStatusData(a)}),1==c?this.datePicker.show(this.highLightDateView):this._renderWeekMonthView()}},_changeDate:function(b){var c,d=this.routerData.dailyType;c=b.year+"/"+b.month+"/"+b.day;var e=this.routerData.tag_id,f=a._.findWhere(this.tagDatas,{TagId:e}),g=f.Date.split("/");if(this.routerData.date=c,g[0]==b.year&&g[1]==b.month)this._getByDayData(b);else if(g[0]==b.year&&g[1]!=b.month){var g=b.month+"月",f=a._.filter(this.tagDatas,function(a){var c=a.Date.split("/");return c[1]==b.month?a:void 0},this);f=f[0],this.routerData.tag_id=f.TagId,this.routerData.tag_name=f.TagName,this.routerData.tag_type=f.TagType,this.routerData.date=c,this._getByDayData(b),this.sideBarTab.setDefault({tag_id:this.routerData.tag_id}),this._getMonthCompleteStatusData(b)}else if(g[0]!=b.year){this.routerData.date=c;var h=this.groupDatas,i=b.year,j=b.month,k=a._.findWhere(h,{GroupName:i.toString()})||h[0];this.tagDatas=k.PlanTableListModels;var f=a._.findWhere(this.tagDatas,{TagId:j+1})||this.tagDatas[0];f.Active=!0,this.routerData.tag_id=f.TagId,this.routerData.group_id=k.GroupId,this.routerData.group_name=k.GroupName,this._renderSidebarView(),this._getByDayData(b),this._getMonthCompleteStatusData(b)}var l=decodeURIComponent(location.hash);l.indexOf("?")>0&&(l=l.substring(0,l.indexOf("?"))),l=l+"?to_user_id="+this.routerData.to_user_id+"&group_id="+this.routerData.group_id+"&tag_type="+this.routerData.tag_type+"&tag_id="+this.routerData.tag_id+"&type="+this.routerData.type+"&dailyType="+this.routerData.dailyType,l+=1==d?"&date="+this.routerData.date:"&plan_table_id="+o.get("plan_table_id"),a.app.execute("history:navigate",l,!1)},_renderWeekMonthView:function(){var a=this,b=o.toJSON(),c=a.routerData,d=c.type,e=c.dailyType,f=o.get("plan_table_date"),h="personal"==d?["已交","未交","补交"]:["全交","都没交","没交全"];a["dateView"+e]=new n({title:"personal"==d?"个人统计：":"团队统计：",time:f,labels:h,calendarType:e,calendar:b.calendar||[]}),a.listenTo(a["dateView"+e],"timechange",function(b){a._getDailyDataByDate(b).done(function(c){var d=a.routerData,e=d.dailyType;a["dateView"+e].model.set({time:b,calendar:c.calendar})})}),a.listenTo(a["dateView"+e],"dateclick",function(b){var c=g(new Date(b.time)),d=c.year(),e=c.month(),f=c.date();plan_table_id=b.plan_table_id,o.set({plan_table_id:plan_table_id},{silent:!0}),a._changeDate({year:d,month:e+1,day:f})}),a.datePicker.show(a["dateView"+e])},_diffTodyDate:function(a){var b=a||this.routerData.date,c=g(this.routerData.today.split("/")),a=g(b.split("/")),d=a.diff(c);return d>0?!1:!0},_getByDayData:function(b){var c,d=this,e=this.routerData.dailyType,f=o.get("plan_table_id");c=b.year+"/"+b.month+"/"+b.day,a.app.request("Daily:getAllDailyByDay",{toUser_id:d.routerData.to_user_id,date:c,type:"personal"==this.routerData.type?1:2,dailyType:e,plan_table_id:f}).done(function(a){a.plan_table_date=a.date,1==e&&(d.routerData.date=a.date),a.routerData=d.routerData,d.dailyCompletionView.model.set(a)})},_getMonthCompleteStatusData:function(b){var c=this,d=b.year+"/"+b.month+"/01";a.app.request("Daily:getMonthCompleteStatus",{toUser_id:c.routerData.to_user_id,date:d,type:"personal"==this.routerData.type?1:2,dailyType:this.routerData.dailyType}).done(function(a){c.highLightDateView.options.collection.reset(a.calendar)})},_getDailyDataByDate:function(b){return a.app.request("Daily:getMonthCompleteStatus",{toUser_id:this.routerData.to_user_id,date:b,type:"personal"==this.routerData.type?1:2,dailyType:this.routerData.dailyType})},_setClientHeight:function(){var b=this.ui.container,c=a.Context.setMainRegionsHeight;c(b);var d=a._.debounce(function(){c(b)},300);$(window).off("resize.Daily-Index-Page-View"),$(window).on("resize.Daily-Index-Page-View",d)},_getDetailData:function(b){var c=this;a.app.request("Daily:getDetailDaiyData",{daily_id:b||this.routerData.daily_id}).done(function(a){if(a){var d=c._dealOldResp(a.Attachments);a.Attachments={},a.Attachments=d,c._renderDetailIndexPageView(a,b)}})},_dealOldResp:function(b){if(b&&b.length){var c=a._.map(b,function(a){var b={};for(var c in a){var d=c.substring(0,1).toLowerCase()+c.substring(1);b[d]=a[c]}return b});return c}},_renderDetailIndexPageView:function(b,c){var d=this,e=c||this.routerData.daily_id;this.detailIndexPageView=new i({model:new a.Model(b)}),a.$(document).off("click.feedDailyReportPushScreen"),a.$(document).on("click.feedDailyReportPushScreen",function(){d._closeDetailIndexPageView()}),this.listenTo(this.detailIndexPageView,"closed",function(){this._closeDetailIndexPageView()},this),this.listenTo(this.detailIndexPageView,"delete",function(){this.detailIndexPageView.trigger("closed")},this),a.app.vent.trigger("global-pull-screen",e,this.detailIndexPageView,{changeUrl:!1}),a.app.vent.on("global-pull-screen:closed:"+e,function(){d._closeDetailIndexPageView()})},_closeDetailIndexPageView:function(){a.$(document).off("click.feedDailyReportPushScreen"),delete this.routerData.daily_id,this._changeHash()},_changeHash:function(){var b=decodeURIComponent(location.hash).split("?"),c=b[0].substring(1),d=a.app.request("history:getQueryObject");d.done(function(a){a.date&&(c=c+"?date="+a.date)}),a.app.execute("history:navigate",c,!1)},onClose:function(){a.app.vent.off("tab:Dialy-Sidebar:change"),a.$(document).off("click.feedDailyReportPushScreen"),a.$(".tipsy").remove()}}),r=new j({type:1,showTab:!0});return r.renderShareView=function(){var b=this;this.getActiveId().done(function(c){var d=[];a.app.request("Daily:getDailyShareMeUser",{}).done(function(a){var d=a;b.afterRenderShareView(c,d)}),b.afterRenderShareView(c,d)})},r.changeGroupRoute=function(b){var c,d=decodeURIComponent(location.hash);c=d.indexOf("?")>0?d.split("?")[0]:d,d=c+"?to_user_id="+b,a.app.execute("history:navigate",d,!0)},a.BasePageView.extend({mainViewClass:q,refreshSidebarRight:!0,layout:window.top==window?"master-layout":"empty-layout",hideSidebar:window.top==window?!1:!0,layoutViewOptions:{hideSubMenu:!1,showRightSidebar:function(){return{showRightSidebar:!0,refreshSidebarRight:!0,rightSidebarView:r}}}})});