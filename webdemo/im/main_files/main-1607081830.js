/*! tita-web-v4 - v0.4.0 - 2016-07-08 18:31 */function allowClick(){return clicked?!1:(clicked=!0,!0)}function windowExists(a){for(var b=0;b<windows.length;b++)try{if(windows[b].name==a)return!0}catch(c){}return!1}function getWindow(a){for(var b=0;b<windows.length;b++)try{if(windows[b].name==a)return windows[b]}catch(c){}}function removeWindow(a){for(var b=0;b<windows.length;b++)try{if(windows[b].name==a)return void windows.splice(b,1)}catch(c){}}function pushWin(a,b,c,d){var e="location=yes,status=yes,toolbar=no,personalbar=no,menubar=no,directories=no,";e+="scrollbars=yes,resizable=yes,",e+="width="+c+",height="+d,launchWinWithOptions(a,b,e)}function launchWin(a,b,c,d){var e="location=no,status=no,toolbar=no,personalbar=no,menubar=no,directories=no,",f=(screen.width-c)/2,g=(screen.height-d)/2;e+="scrollbars=no,resizable=yes,top="+g+",left="+f+",",e+="width="+c+",height="+d,launchWinWithOptions(a,b,e)}function launchWinWithOptions(a,b,c){if(!windowExists(a)){var d=window.open(b,a,c);return windows[windows.length]=d,d}var e=getWindow(a);e.focus()}function getTopLevelWindow(){var a=window;if(a.parent==a)return a;for(;a.parent!=a;)a=window.parent.window;return a}function closeWin(a){a.close()}function handleClose(a){return confirm(a)?(removeWindow(getTopLevelWindow().name),closeWin(getTopLevelWindow()),!0):!1}function confirmCancel(a){return confirm(a)?(getTopLevelWindow().location.href="userinfo.jsp",!0):!1}function cancelQueue(a,b){return getTopLevelWindow().location.href="userinfo.jsp?workgroup="+a+"&chatID="+b,!0}function confirmCancelAndClose(a){return confirm(a)?(getTopLevelWindow().location.href="userinfo.jsp",getTopLevelWindow().close(),!0):!1}function confirmCancel(a,b,c){return confirm(a)?(getTopLevelWindow().location.href="userinfo.jsp?workgroup="+b+"&chatID="+c,!0):!1}function closeAll(){removeWindow(getTopLevelWindow().name),closeWin(getTopLevelWindow())}function launchHelpWin(){launchWin("helpwin","helpwin.jsp",550,350)}function hide(a){document.layers?document.layers[a].visibility="hide":document.all?document.all[a].style.visibility="hidden":document.getElementById&&(document.getElementById(a).style.visibility="hidden")}function show(a){document.layers?document.layers[a].visibility="show":document.all?document.all[a].style.visibility="visible":document.getElementById&&(document.getElementById(a).style.visibility="visible")}function getDiv(a){return document.layers?document.layers[a]:document.all?document.all[a]:document.getElementById?document.getElementById(a):void 0}function getDivByDoc(a,b){return b.layers?b.layers[a]:b.all?b.all[a]:b.getElementById?b.getElementById(a):void 0}function showTypingIndicator(a){}function informConnectionClosed(){alert("Your support session has ended, you will be redirected to the transcript page."),parent.location.href="transcriptmain.jsp"}function addChatText(a,b,c){var d=a.document.getElementById("ytext"),e=""==b,f=d.childNodes.length,g=document.createElement("span"),h=document.createElement("span");e?(g.setAttribute("class","chat-announcement"),h.setAttribute("class","chat-announcement")):h.setAttribute("class","text");var i=!1;e||(i=nickname==b,i?g.setAttribute("class","client_name"):g.setAttribute("class","operator-name"));var j=document.createElement("div");j.setAttribute("class","chat-line");var k=!1;try{e||(g.innerHTML=b+": ",j.appendChild(g)),h.innerHTML=c,j.appendChild(h),d.appendChild(j)}catch(l){k=!0}if(k||(k=f==d.childNodes.length),k){var m=d.innerHTML;m+='<div class="chat-line">',e||(m+='<span class="',m+=e?"chat-announcement":i?"client_name":"operator-name",m+='">'+b+": </span>"),m+='<span class="',m+=e?'chat-announcement">':'chat_text">',m+=c+"</span></div>",d.innerHTML=m}}function scrollYakToEnd(a){var b=a.document.getElementById("enddiv");a.scrollTo(0,b.offsetTop)}function showChatButton(a,b,c){var d=new Date,e=(d.getSeconds()+""+d.getDay(),"http://support.tita.com/webchat/live?action=isAvailable&workgroup="+a),f="";f=b?"http://support.tita.com/webchat/start.jsp?workgroup="+a+"&location="+window.location.href+"&username="+b+"&email="+c:"http://support.tita.com/webchat/start.jsp?workgroup="+a+"&location="+window.location.href,$('<a  id="titaOnline" href="#" onclick="launchWin(\'framemain\',\''+f+'\',500, 400);return false;"><img border="0" src="'+e+'"></a>').appendTo("body")}function displayWorkgroup(a,b,c){var d=new Date,e=(d.getSeconds()+""+d.getDay(),"http://support.tita.com/webchat/live?action=isAvailable&workgroup="+a+"&online="+b+"&offline="+c),f="http://support.tita.com/webchat/start.jsp?workgroup="+a+"&location="+window.location.href;$('<a id="titaOnline" href="#" onclick="launchWin(\'framemain\',\''+f+'\',500, 400);return false;"><img border="0" src="'+e+'"></a>').appendTo("body")}function showChatButtonWithAgent(a,b){var c=new Date,d=(c.getSeconds()+""+c.getDay(),"http://support.tita.com/webchat/live?action=isAvailable&workgroup="+a),e="http://support.tita.com/webchat/start.jsp?workgroup="+a+"&agent="+b+"&location="+window.location.href;$('<a id="titaOnline" href="#" onclick="launchWin(\'framemain\',\''+e+'\',500, 400);return false;"><img border="0" src="'+d+'"></a>').appendTo("body")}function showButtonWithoutUI(a,b){var c=new Date,d=(c.getSeconds()+""+c.getDay(),"http://support.tita.com/webchat/live?action=isAvailable&workgroup="+a),e="http://support.tita.com/webchat/start.jsp?workgroup="+a+"&location="+window.location.href+"&noUI=true&"+b;$('<a id="titaOnline" href="#" onclick="launchWin(\'framemain\',\''+e+'\',500, 400);return false;"><img border="0" src="'+d+'"></a>').appendTo("body")}require.config({paths:{backbone:"empty:",$:"empty:",jquery:"empty:",json2:"empty:",marionette:"empty:",_:"empty:",requirejs:"empty:",talent:"empty:","$.tipsy":"empty:","$.slimscroll":"empty:","tita-common":"empty:","iTalent-header":"empty:","iTalent-sidebar":"empty:","tita-network":"empty:","$.cookie":"empty:",calendar:"vendor/components/calendar/index",richeditor:"vendor/components/rich-editor/index","$.slimScroll":"vendor/components/jquery.slimscroll/index",moment:"vendor/components/moment/index",momentZH:"vendor/components/moment/locales/zh-cn","jquery.ui":"vendor/components/jquery.ui/index",UserSelector:"vendor/components/user-selector/index",Uploader:"vendor/components/uploader/index","$.caret":"vendor/components/jquery.caret/index",customizePage:"vendor/components/customize-page/index",mockjax:"vendor/components/jquery.mockjax/index",simplemodal:"vendor/components/backbone.simplemodal/index",TitaWidget:"vendor/components/tita-widget/index",redRemind:"vendor/components/tita-widget/red-remind","$.scrollable":"vendor/plugins/jquery/jquery.scrollable","$.autoresize":"vendor/plugins/jquery/jquery.autoresize","$.dialog":"vendor/plugins/simplemodal-view","$.notice.show":"views/common/plugins/notice/notice","$.notice.set":"views/common/plugins/notice/set-notice",oldCommon:"views/common/plugins/common","$.attachmentLocal":"views/common/plugins/attachment/script","$.attachment":"views/common/plugins/attachment/selectupload","$.pubrange":"views/common/plugins/pubrange/script","$.artzoom":"vendor/plugins/jquery/jquery.artzoom",tdialog:"views/common/plugins/tdialog/tdialog",datePickerZH:"vendor/plugins/jquery/data-zh-cn",highCharts:"../extras/scripts/highcharts-v2.min","$.searchuserlist":"views/common/plugins/searchuserlist/script","$.dateTimePicker":"vendor/plugins/jquery/jquery-ui-timepicker-addon","bootstrap-datetimepicker":"vendor/plugins/jquery/bootstrap-datetimepicker","$.bootstrapDatetimepicker":"vendor/plugins/jquery/bootstrap-datetimepicker.zh-CN","$.paginate":"vendor/plugins/jquery/jquery.paginate",iScroll:"vendor/plugins/iscroll","$.mousewheel":"vendor/plugins/jquery/jquery.mousewheel",fileUploader:"views/common/plugins/attachment/fileUploader","$.daterangepicker":"vendor/plugins/jquery/daterangepicker/daterangepicker",ext:"../extras/scripts/ext/ext-all-v1.min",sch:"../extras/scripts/ext/sch-all-v1.min",notification:"vendor/plugins/notification",jscolor:"vendor/plugins/jscolor","$.tree":"vendor/plugins/jquery.ztree.core-3.5",gantt:"vendor/components/gantt/codebase/sources/dhtmlxgantt",ganttMarker:"vendor/components/gantt/codebase/ext/dhtmlxgantt_marker",ganttTips:"vendor/components/gantt/codebase/ext/dhtmlxgantt_tooltip",ganttCN:"vendor/components/gantt/codebase/locale/locale_cn",cutPicView:"vendor/components/cutpic/index","$.modal":"vendor/components/talentjs-ui/jquery.modal","$.infotip":"vendor/components/talentjs-ui/jquery.infotip","$.jquery.sortable":"vendor/plugins/jquery.sortable","$.pagination":"vendor/components/talentjs-ui/jquery.pagination","$.checkbox":"vendor/components/talentjs-ui/jquery.checkbox","$.jcrop":"vendor/plugins/jquery/jquery.Jcrop"},shim:{"jquery.ui":["$"],"$.pagination":["$"],"$.jquery.sortable":["$"],"$.modal":["$"],"$.infotip":["$"],"$.checkbox":["$"],"$.jcrop":["$"],backbone:{deps:["json2","_","$"],exports:"Backbone"},marionette:{deps:["backbone"],exports:"Marionette"},talent:{deps:["marionette"],exports:"Talent"},datePickerZH:{deps:["jquery.ui"],exports:"$.datePicker"},"$.dateTimePicker":{deps:["jquery.ui","datePickerZH"],exports:"$.dateTimePicker"},"$.notice.show":{deps:["jquery.ui","datePickerZH"],exports:"PositionNoticeElement"},"$.notice.set":{deps:["jquery.ui","datePickerZH"],exports:"NoticeSettingTitaSingleton"},"$.bootstrapDatetimepicker":{deps:["jquery","bootstrap-datetimepicker"],exports:"$.bootstrapDatetimepicker"},"$.at":["oldCommon"],fileUploader:["$.attachmentLocal"],"$.attachment":["oldCommon","$.attachmentLocal"],"$.artzoom":["$"],"$.marcopolo":["$","jquery.ui"],"$.manifest":["$","jquery.ui","$.marcopolo"],calendar:["jquery.ui"],"$.paginate":["$"],"$.caret":["$"],UserSelector:{deps:["talent","$.caret"],exports:"UserSelector"},Uploader:{deps:["$","_","backbone","marionette"],exports:"Uploader"},momentZH:["moment"],"$.daterangepicker":{deps:["$","moment"],exports:"$.daterangepicker"},richeditor:{deps:["$","Uploader"],exports:"richeditor"},sch:["ext"],customizePage:{deps:["jquery.ui","$.tree","jscolor","mockjax"]},gantt:{exports:"gantt"},ganttMarker:["gantt"],ganttTips:["gantt"],ganttCN:["gantt"],TitaWidget:["talent","$.tipsy","Uploader","UserSelector","simplemodal","$.slimscroll","moment","$.infotip"]}}),define("config",function(){}),require(["config"],function(){require(["talent","collections/index","routers/index","helpers/index","network/index","tita-network"],function(a,b,c,d,e,f){f.done(function(){$(function(){a.app.start(a._.extend({},window.BSGlobal||{}))})})})}),define("main",function(){}),define("collections/base-collection",["talent"],function(talent){return talent.Collection.extend({request:function(a){function b(a){var b=a.Code;if(1==b){var e=a.Data;a.ExtendedData&&(e=talent._.extend({},a.Data,a.ExtendedData)),d.resolve(e)}else 401==b&&c(),d.reject(a.Message)}function c(){throw location.href=talent.Context.getLoginUrl(),new Error("401")}var d=new talent.$.Deferred;return a=talent._.extend({},a),a.url=a.url||this.url,a.url&&a.url.indexOf("http://")<0&&(a.url=talent.Context.getApiUrl(a.url)),a.mockData?b(a.mockData):talent.$.ajax(a).done(b),d.promise()},request2:function(a){function b(a){var b=a.Code;if(1==b){var e=a.Data;a.ExtendedData&&(e=talent._.extend({},a.Data,a.ExtendedData)),d.resolve(e)}else 401==b&&c(),d.reject(a.Message)}function c(){throw location.href=talent.Context.getLoginUrl(),new Error("401")}var d=new talent.$.Deferred;return a=talent._.extend({},a),a.url=a.url||this.url,a.url=talent.Context.getApiUrlV2(a.url),a.mockData?b(a.mockData):talent.$.ajax(a).done(b),d.promise()},batch:function(options){function action(resp){for(x in resp)resp[x].Data=eval("("+resp[x].Data+")");deferred.resolve(resp)}var deferred=new talent.$.Deferred,urls=[];options=talent._.extend({},options),options.url=options.url||this.url;for(var i=0;i<options.url.length;i++)urls.push(talent.Context.getApiUrl(options.url[i]));return options.mockData?action(options.mockData):talent.$.ajax({url:talent.Context.getApiUrl("batch"),type:"POST",headers:{"x-bs-batch":1},data:"['"+urls.join("','")+"']",contentType:"application/json; charset=UTF-8"}).done(action),deferred.promise()}})}),define("collections/feed-collection",["talent","collections/base-collection"],function(a,b){var c=a.Model.extend({idAttribute:"FeedId"});return b.extend({model:c,initialize:function(){}})}),define("collections/feed-group-collection",["talent","collections/feed-collection","collections/base-collection"],function(a,b,c){var d=[],e=[],f=a.Model.extend({idAttribute:"FeedId"}),g=c.extend({model:f,pageCout:20,defaults:{groupMapping:{"aboutme-all":2,"aboutme-replyme":25,"aboutme-tome":23,"aboutme-fromme":1,"aboutme-myfollow":24,"aboutme-collect":26,all:7,newreply:2525,newleave:2323,profile:3,department:4},comment_count:4,count:10},initialize:function(){this.loginUserInfo=a.Context.getUserInfo()},feedAddShare:function(a){var b=new Talent.$.Deferred,c={Content:"",ObjType:"",ObjId:"",FileUrls:"",Visibility:"",IsSendSMS:""},a=Talent._.extend({},c,a),d="",e="user/feed/AddShare";return this.request2({url:e+d,type:"POST",data:a}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},returnFeedUrl:function(a){return"user/feed?type="+a+"&feed_count="+this.pageCout+"&comment_count=4"},getData:function(c){this.type=this.defaults.groupMapping[c.type||"aboutme-all"],c.type=this.type,c.feed_count=20,c.comment_count=4,c.start=c.start||"";var f=a.Context.splicingUrl(c,["type","feed_count","comment_count","start"]),g=this,h=a.$.Deferred(),i="user/feed?"+f,j=this.request({url:i});return j.done(function(a){var c=new b;d=a.ToMeIds||[],e=a.CommandIds||[];var f=a;if(!f.Feeds)return void h.resolve({data:[],IsEnd:!0,IsEmpty:!0});c.add(f.Feeds);var i=c.toJSON();g._initFeed(i);var j={Data:i,IsEnd:f.IsEnd,IsEmpty:!1,LastId:f.LastId,IndicatorIds:d&&d.length?d:e};j.IsEnd&&j.Data.length<g.pageCout&&(j.IsEmpty=!0),h.resolve(j)}),h},deleteData:function(b){var c=new a.$.Deferred;return this.request({url:"feed?id="+b.feed_id,data:b,type:"Delete"}).done(function(b){c.resolve(a._.values(b))}).fail(function(a){c.reject(a)}),c},getToUserIdData:function(b){var c=this,d=new a.$.Deferred,e=a.Context.splicingUrl(b,["start","to_user_id","comment_count","feed_count"]),f="user/feed?"+e;return this.request({url:f,type:"Get"}).done(function(a){if(!a||!a.Feeds||!a.Feeds.length)return void d.resolve({data:[],IsEnd:!0,IsEmpty:!0});c._initFeed(a.Feeds);var b={Data:a.Feeds,IsEnd:a.IsEnd,IsEmpty:!1,LastId:a.LastId};d.resolve(b)}).fail(function(a){d.reject(a)}),d},getIndicatorTypeData:function(b){var c=this,d=new a.$.Deferred,e="user/feed/NewReply?indicatorType="+b.type;return this.request2({url:e,type:"Get"}).done(function(a){if(!a||!a.feeds||!a.feeds.length)return void d.resolve({data:[],IsEnd:!0,IsEmpty:!0});c._initFeed(a.feeds);var b={data:a.feeds,IsEnd:a.isEnd,IsEmpty:!1,LastId:a.lastId};d.resolve(b)}).fail(function(a){d.reject(a)}),d},getWidgetFeeds:function(b){var c=new a.$.Deferred,d={app_id:0,app_type:0,type:0,tita_objId:"",tita_objtype:0,app_objid:"",app_objtype:0,start:"",feed_count:this.feedFount,comment_count:this.commentCount},b=a._.extend({},d,b),e="user/feed/Widget";return this.request2({url:e+"?"+$.param(b),type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},getFeeds:function(b){var c=(new a.$.Deferred,{type:"",start:"",feed_count:this.feedFount,comment_count:this.commentCount}),b=a._.extend({},c,b),d="user/feed/Get",e=new a.$.Deferred,f="?type="+b.type+"&start="+b.start+"&feed_count="+b.feed_count+"&comment_count="+b.comment_count+"&to_user_id="+b.to_user_id;return this.request2({url:d+f,type:"Get"}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},getItemFeed:function(b){var c=this,d=new a.$.Deferred;return this.request2({url:"user/feed/GetById?feed_id="+b.feed_id+"&comment_count="+b.comment_count,type:"GET"}).done(function(a){if(!a)return void d.resolve(a);var b=c._initFeed(a);d.resolve(b[0])}).fail(function(a){d.reject(a)}),d},getObjFeed:function(b){var c=this,d=new a.$.Deferred,e={obj_id:"",obj_type:"",feed_count:"",comment_count:"",start:"",to_user_id:""};return b=a._.extend({},e,b),this.request2({url:"objfeed/Get",type:"GET",data:b}).done(function(a){if(!a||!a.feeds||!a.feeds.length)return void d.resolve({Data:[],IsEnd:!0,IsEmpty:!0});c._initFeed(a.feeds);var b={Data:a.feeds,IsEnd:a.isEnd,IsEmpty:!1,LastId:a.lastId};d.resolve(b)}).fail(function(a){d.reject(a)}),d},getObjTopFeed:function(b){var c=this,d=new a.$.Deferred,e={titaObj_type:"",titaObj_id:"",comment_count:"4"},b=a._.extend({},e,b),f=a.Context.splicingUrl(b,["titaObj_type","titaObj_id","comment_count"]);return this.request({url:"user/feed?"+f,type:"GET"}).done(function(a){if(!a||!a.Feeds||!a.Feeds.length)return void d.resolve({data:[],IsEnd:!0,IsEmpty:!0});var b=a.Feeds||[];b=c._isTop(b),c._initFeed(b);var e={Data:b,IsEnd:a.IsEnd,IsEmpty:!1,LastId:a.LastId};d.resolve(e)}).fail(function(a){d.reject(a)}),d},addNewData:function(b){var c=this,d=new a.$.Deferred;return this.request({url:"share",type:"Post",data:b}).done(function(a){if(!a)return void d.resolve(a);var b=c._initFeed(a);d.resolve(b[0])}).fail(function(a){d.reject(a)}),d},collectData:function(b){var c=new a.$.Deferred;return this.request({url:"user/feed/favorites?feed_id="+b.feed_id,data:b,type:"Put"}).done(function(b){c.resolve(a._.values(b))}).fail(function(a){c.reject(a)}),c},cancelCollectData:function(b){var c=new a.$.Deferred;return this.request({url:"user/feed/favorites?feed_id="+b.feed_id,data:b,type:"DELETE"}).done(function(b){c.resolve(a._.values(b))}).fail(function(a){c.reject(a)}),c},topData:function(b){var c=new a.$.Deferred,d={feed_id:"",titaObj_type:"2",titaObj_id:""},b=a._.extend({},d,b),e="user/feed?",f=a.Context.splicingUrl(b,["feed_id","titaObj_type","titaObj_id"]);return e+=f,this.request({url:e,data:b,type:"Post"}).done(function(b){c.resolve(a._.values(b))}).fail(function(a){c.reject(a)}),c},cancelTopData:function(b){var c=new a.$.Deferred,d={feed_id:"",titaObj_type:"2",titaObj_id:""},b=a._.extend({},d,b),e="user/feed?",f=a.Context.splicingUrl(b,["feed_id","titaObj_type","titaObj_id"]);return e+=f,this.request({url:e,type:"DELETE"}).done(function(b){c.resolve(a._.values(b))}).fail(function(a){c.reject(a)}),c},getTopData:function(b){var c=this,d={feed_count:5,comment_count:4,type:27},e=a._.extend({},d,b),f=a.Context.splicingUrl(e,["feed_count","comment_count","type"]),g="user/feed?"+f,h=new a.$.Deferred;return this.request({url:g,type:"Get"}).done(function(b){return b&&b.Feeds&&b.Feeds.length?(a._.each(b.Feeds,function(a){5==a.FeedType&&(a.Url="#daily?daily_id="+a.DailyId+"&to_user_id="+a.PublishUser.UserId+"&date="+a.DailyDate),1==a.FeedType&&(a.Url="#more/shareinfo?id="+a.FeedId)}),void h.resolve(c._initFeed(b.Feeds))):void h.resolve([])}).fail(function(a){h.reject(a)}),h},postSearchFeedData:function(b){var c=this,d={type:"",content:"",start:"",count:20,comment_count:4},e=a._.extend({},d,b);e.type=this.defaults.groupMapping[b.type||"aboutme-all"];var f="Search/UserFeeds",g=new a.$.Deferred;return this.request({url:f,data:e,type:"Post"}).done(function(a){if(!a.Feeds||!a.Feeds.length)return void g.resolve({data:[],IsEnd:!0,IsEmpty:!0});c._initFeed(a.Feeds);var b={Data:a.Feeds,IsEnd:a.IsEnd,IsEmpty:!1,LastId:a.LastId};g.resolve(b)}).fail(function(a){g.reject(a)}),g},_initFeed:function(a){var b=[];a.length>0?b=a:a&&"object"==typeof a&&b.push(a);this._handlerFeedInfo(b);return b},_handlerFeedInfo:function(a){for(var b=0;b<a.length;b++)this._isCollected(a[b]),this._isFromIndicator(a[b]),a[b].FeedType&&4==a[b].FeedType&&(a[b].Editable=!1)},_isFromIndicator:function(a){if("25"==this.type||"23"==this.type){if("25"==this.type&&(b=e||[]),"23"==this.type)var b=d||[];for(var c=0;c<b.length;c++)if(b[c]==a.FeedId){a.FromIndicator=!0;break}}},_attachmentsUrl:function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b].FileType;if(a[b].IsPreview=null!=a[b].PreviewUrl&&""!=a[b].PreviewUrl?!0:!1,this._isImage(c)){if(a[b].IsImage=!0,null!=a[b].PreviewUrl&&""!=a[b].PreviewUrl){var d=a[b].PreviewUrl,e=d.lastIndexOf(".");if(e>0){var f=d.substr(0,e)+"_b."+d.substr(e+1),g=d.substr(0,e)+"_s."+d.substr(e+1);"gif"==c&&(g=d),a[b].BigUrl=f,a[b].SmallUrl=g}}}else a[b].IsImage=!1}},_isImage:function(b){for(var c=!1,d=a.Context.getAttachmentType().image,e=0;e<d.length;e++)if(b==d[e]){c=!0;break}return c},_isTop:function(b){return b.length?(a._.each(b,function(a){a.IsTop=!0}),b):[]},_isCollected:function(a){a.IsCollected=!1,26==this.type&&(a.IsCollected=!0)}});return g}),define("collections/feed-comment-collection",["talent","collections/feed-collection","collections/base-collection"],function(a,b,c){var d=a.Model.extend({idAttribute:"FeedId"}),e=c.extend({model:d,newAddComment:function(b){var c={FeedId:"",CommentId:"",Content:"",FileUrl:"",ObjId:"",ObjType:""},b=a._.extend({},c,b),d="comment/Add",e=new a.$.Deferred;return this.request2({url:d,type:"Post",data:b}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},getFeedItemComment:function(b){var c=new a.$.Deferred,d={feed_id:"",comment_type:""},b=a._.extend({},d,b);return this.request2({url:"comment/Get?feed_id="+b.feed_id+"&comment_type="+b.comment_type,type:"GET"}).done(function(a){return a?void c.resolve(a):void c.resolve(a)}).fail(function(a){c.reject(a)}),c},addNewData:function(b){var c=this,d=new a.$.Deferred;return this.request({url:"comment",data:b,type:"Post"}).done(function(a){var b=c._handlerFeedInfo(a)[0];d.resolve(b)}).fail(function(a){d.reject(a)}),d},getData:function(b){var c=this,d=new a.$.Deferred;return this.request({url:"comment?ids="+b.ids.join(","),type:"Get"}).done(function(a){return a&&a.length?(c._handlerFeedInfo(a),void d.resolve(a)):void d.resolve([])}).fail(function(a){d.reject(a)}),d},getMoreData:function(b){var c=this,d=new a.$.Deferred;return this.request({url:"comment",data:b,type:"Get"}).done(function(a){c._handlerFeedInfo(a),d.resolve(a)}).fail(function(a){d.reject(a)}),d},deleteData:function(b){var c=new a.$.Deferred;return this.request({url:"comment?feed_id="+b.feed_id+"&comment_id="+b.comment_id,data:b,type:"Delete"}).done(function(b){c.resolve(a._.values(b))}).fail(function(a){c.reject(a)}),c},_handlerFeedInfo:function(a){var b=[];a.length>0?b=a:a&&"object"==typeof a&&(b=[a]);for(var c=0;c<b.length;c++)this._concatFeedUser(b[c]);return b},_concatFeedUser:function(a){a.Content=a.Content.replace(/(!%nr%!)/g,"<br/>").replace(/(&apos;)/g,"'"),a.ParentContent&&(a.ParentContent=a.ParentContent.replace(/(!%nr%!)/g,"<br/>").replace(/(&apos;)/g,"'")),this._attachmentsUrl(a.Attachment)},_attachmentsUrl:function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b].FileType;if(a[b].IsPreview=null!=a[b].PreviewUrl&&""!=a[b].PreviewUrl?!0:!1,this._isImage(c)){if(a[b].IsImage=!0,null!=a[b].PreviewUrl&&""!=a[b].PreviewUrl){var d=a[b].PreviewUrl,e=d.lastIndexOf(".");if(e>0){var f=d.substr(0,e)+"_b."+d.substr(e+1),g=d.substr(0,e)+"_s."+d.substr(e+1);"gif"==c&&(g=d),a[b].BigUrl=f,a[b].SmallUrl=g}}}else a[b].IsImage=!1}},_isImage:function(b){for(var c=!1,d=a.Context.getAttachmentType().image,e=0;e<d.length;e++)if(b==d[e]){c=!0;break}return c}});return e}),define("collections/project-group-collection",["talent","collections/base-collection"],function(a,b){return b.extend({defaults:{page_num:1,page_size:20},url:"/Work/UserWork",getData:function(b){var c=new a.$.Deferred;4===parseInt(b.relation)&&(this.url="/Work/TenantWork");var d=this.request({url:this.url+"?relation="+b.relation+"&status="+b.status+"&page_num="+b.pageIndex+"&page_size="+this.defaults.page_size+"&app_id="+b.app_id+"&app_type="+b.app_type+"&to_user_id="+b.to_user_id});return d.done(function(a){c.resolve(a)}),c.promise()},searchProject:function(b){var c=new a.$.Deferred,d={filter:"",toUserId:""},e="Work/SearchWork";return b=a._.extend({},d,b),this.request({url:e,type:"get",data:b}).done(function(a){c.resolve(a)}),c.promise()},getImplementationGant:function(b){var c=new a.$.Deferred,d={};b=a._.extend({},d,b);var e="Work/WorkImplementationGrant";return this.request({url:e,type:"post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},getSearch:function(b){var c=new a.$.Deferred,d="Search/Work?filter="+b.key+"&page_num="+b.pageIndex+"&page_size="+this.defaults.page_size,e=this.request({url:d,type:"GET"});return e.done(function(a){c.resolve(a)}),c.promise()},updateData:function(a){var b,c="Work/"+a.handler;switch(a.handler){case"CancelFollow":a.data.relation=3,b=this.deleteUser(a);break;case"Follow":a.data.relation=3,b=this.addUser(a);break;case"DelMember":a.data.relation=2,b=this.deleteUser(a);break;case"AddMember":a.data.relation=2,b=this.addUser(a);break;default:b=this.request({url:c,data:a.data,type:"POST"})}return b},getAllData:function(a){return this.request({url:"Work/MyWork?app_id="+a.app_id+"&app_type="+a.app_type+"&to_user_id="+a.to_user_id,type:"GET"})},getProject:function(a){var b="Work/MyAssentWork?app_id="+a.app_id+"&app_type="+a.app_type;return a.to_user_id&&(b=b+"&to_user_id="+a.to_user_id),this.request({url:b,type:"GET"})},UpdateProgress:function(a){return this.request({url:"/Work/UpdateProgress",type:"POST",data:a.data})},deleteUser:function(a){var a=a.data,b="/Work/DeleteUser?to_user_ids="+a.to_user_ids+"&work_id="+a.work_id+"&relation="+a.relation;return this.request({url:b,type:"POST"})},addMember:function(a){return this.request({url:"/Work/AddUser?work_id="+a.work_id+"&relation="+a.relation,type:"POST",contentType:"application/json",data:JSON.stringify(a.data)})},addUser:function(a){return this.request({url:"/Work/AddUser",type:"POST",data:a.data})},deleteData:function(){},addData:function(b){var c={WorkName:"",Descripition:"",StartDate:"",DeadLine:"",PrincipalId:"",Visibility:"1",AddObjectModels:"",LableId:"",DepartmentId:"",IsInvested:"",ApplyUserId:""},b=a._.extend({},c,b);return this.request({url:"Work/Add",data:b,type:"POST"})},goalData:function(b){var c=new a.$.Deferred,d={to_userId:"",start_date:"",end_date:""},b=a._.extend({},d,b),e="Work/GoalWork?to_userId="+b.to_userId+"&start_date="+b.start_date+"&end_date="+b.end_date;return this.request({url:e,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},postUpdateAllData:function(b){var c=new a.$.Deferred,d="Work/UpdateAll",e={WorkName:"",Descripition:"",StartDate:"",DeadLine:"",PrincipalId:"",Visibility:"1",AddObjectModels:"",LableId:"",DepartmentId:"",IsInvested:""},b=a._.extend({},e,b);return this.request({url:d,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c}})}),define("collections/user-list-collection",["talent","collections/base-collection"],function(a,b){var c=new a.Collection;return c.model=a.Model.extend({idAttribute:"Id"}),b.extend({url:"user",getData:function(b){var d=this,e=b.ids,f=c.pluck("Id"),g=a._.difference(b.ids,f),h=new a.$.Deferred;if(0==g.length){var i=this._pluckUser(e);return h.resolve(i),h}return b.ids=g.join(","),this.request({url:this.url,data:b,type:"Post"}).done(function(b){var f=d._setAvatar(b);c.add(a._.values(f));var g=d._pluckUser(e);h.resolve(g)}),h},getOnlineUserData:function(b){var c=new a.$.Deferred;return this.request({url:"staff/OnlineUsers",data:b,type:"GET"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},_pluckUser:function(b){{var d={};a._.filter(c.toJSON(),function(c){a._.map(b,function(a){return a==c.Id?(d[c.Id]=c,c):void 0})})}return d},_setAvatar:function(a){for(index in a){var b=a[index].Avatar;a[index].Avatar={Small:b,Medium:b.replace("_s","_m"),IsDefault:!1},b.indexOf("default_")>-1&&(a[index].Avatar.Medium=b.replace("_small","_middle"),a[index].Avatar.IsDefault=!0)}return a},getQrcode:function(b){var c={x:"",y:"",w:"",h:"",dfs_url:""},b=a._.extend({},c,b),d="user/CutQrCodeImg",e=new a.$.Deferred;return this.request2({url:d,type:"POST",data:b}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e}})}),define("collections/task-list-collection",["talent","collections/base-collection"],function(a,b){return b.extend({url:"task",saveTaskFeed:function(a){var b=new Talent.$.Deferred,c={TaskId:"",TaskName:"",PrincipalUser:"",EndDate:"",StartDate:"",Participators:"",Visibility:"",Description:"",AddPlan:"",DepartmentId:"",FileUrls:"",MessageUsers:"",Importance:"",RemindType:"",RemindTime:"",RemindContent:"",TaskType:"",CycType:"",CycStartDate:"",CycStartTime:"",CycEndDate:"",CycEndTime:"",ApplyUserId:"",IsLongTerm:"",parentTaskId:"",LabId:"",LabType:"",PlanTableId:"",PlanTableType:"",TaskSource:"",PublisherId:"",WorkMileStoneId:""},a=Talent._.extend({},c,a),d="task/SaveTaskFeed",e="";return this.request({url:d+e,type:"POST",data:a}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},getCycleTask:function(b){var c={cycle_id:""};b=a._.extend({},c,b);var d="task/GetCycleTask?cycle_id="+b.cycle_id,e=new a.$.Deferred;return this.request({url:d,type:"get"}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},updateCycleTask:function(b){var c={cycle_id:""};b=a._.extend({},c,b);var d="task/UpdateCycleTask?cycle_id="+b.cycle_id,e=new a.$.Deferred;return this.request({url:d,type:"POST",data:b}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},closeCycleTask:function(b){var c="task/CloseCycleTask",d={cycle_id:"",task_id:""};b=a._.extend({},d,b);var e=new a.$.Deferred;return this.request({url:c+"?cycle_id="+b.cycle_id+"&task_id="+b.task_id,type:"get"}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},setTaskMarkStar:function(b){var c="task/MarkImportance",d=new a.$.Deferred;return this.request({url:c,data:b,type:"POST"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},candelTaskMarkStar:function(b){var c="task/CancelImportance",d=new a.$.Deferred;return this.request({url:c,data:b,type:"POST"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},taskAddParticipator:function(b){var c="task/AddParticipator",d=new a.$.Deferred,e="task_id="+b.task_id;return this.request({url:c+"?"+e,type:"POST",contentType:"application/json",data:JSON.stringify(b.add_objects)}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},taskDeleteParticipator:function(b){var c="task/DeleteParticipator",d=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},taskEvaluate:function(b){var c="task/Evaluate",d=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},EvaluateTask:function(b){var c="task/EvaluateTask",d=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},taskDelete:function(b){var c="task/Delete?task_id="+b.task_id,d=new a.$.Deferred;return this.request({url:c,type:"POST"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},taskAddAttachment:function(b){var c="task/AddAttachment",d=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},taskDeleteAttachment:function(b){var c="task/DeleteAttachment",d=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},updateLable:function(b){var c={task_id:"",lab_type:"",lab_id:""};b=a._.extend({},c,b);var d="task/UpdateLable",e=new a.$.Deferred;return this.request({url:d,data:b,type:"POST"}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},updateStatus:function(b){var c={task_id:"",status:""};b=a._.extend({},c,b);var d="task/UpdateStatus",e=new a.$.Deferred;return this.request({url:d,data:b,type:"POST"}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},addData:function(b){var c=this,d=new a.$.Deferred;if("taskList"===b.handler){var e=this.url+"/AddV2?v="+Math.random();this.request({url:e,data:b,type:"POST"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)
})}else this.request({url:"task/Add",data:b,type:"POST"}).done(function(a){var b=c._dataHandle([a]);d.resolve(b[0])}).fail(function(a){d.reject(a)});return d.promise()},getJoinTaskData:function(b){var c="task/JoinTask",d=new a.$.Deferred,e=a.Context.splicingUrl(b,["page_size","page_index"]);return this.request({url:c+"?"+e,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},getTaskInfo:function(b){var c="task/TaskInfo",d=new a.$.Deferred,e={task_id:"",data:""};b=a._.extend({},e,b);var f="task_id="+b.task_id+"&data="+b.data;return this.request({url:c+"?"+f,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},changeTask:function(b){var c="task/ChangeTask",d={task_id:"",start_date:"",end_date:"",old_parent_task_id:"",parent_task_id:""};b=a._.extend({},d,b);var e=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},taskSetMark:function(b){var c="task/Mark",d=new a.$.Deferred,e={task_id:"",type:""};return b=a._.extend({},e,b),this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},updateTaskPrincipalUser:function(b){var c="task/UpdatePrincipal",d=new a.$.Deferred,e={task_id:"",to_user_id:""};return b=a._.extend({},e,b),this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},updateApplyUser:function(b){var c="task/UpdateApplyUser",d=new a.$.Deferred,e={to_user_id:"",task_id:""};return b=a._.extend({},e,b),this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},updateTaskDate:function(b){var c="task/UpdateTaskDate",d=new a.$.Deferred,e={Deadline:"",StartDate:"",IsLongTerm:"",task_id:""};return b=a._.extend({},e,b),this.request({url:c+"?task_id="+b.task_id,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},newCreateTask:function(b){var c="task/Save",d=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},newCreateTask2:function(b){var c="task/SaveV2",d=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},createTask:function(b){var c="task/Add",d=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){a.Tasks=[],a.level=1,d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},taskAccept:function(b){var c="task/Accept",d="start_date="+b.start_date+"&end_date="+b.end_date,e={start_date:"",end_date:"",parent_task_id:"",lab_type:"",lab_id:""};b=a._.extend({},e,b);var f=new a.$.Deferred;return this.request({url:c+"?"+d,type:"POST",data:b}).done(function(a){f.resolve(a)}).fail(function(a){f.reject(a)}),f.promise()},UpdateDescription:function(b){var c="task/UpdateDescription",d={task_id:"",Description:""};b=a._.extend({},d,b);var e=new a.$.Deferred;return this.request({url:c+"?task_id="+b.task_id,type:"POST",data:b}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},updateTaskName:function(b){var c="task/UpdateName",d={task_id:"",TaskName:""};b=a._.extend({},d,b);var e=new a.$.Deferred;return this.request({url:c+"?task_id="+b.task_id,type:"POST",data:b}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},updateTask:function(b){var c="task/Update",d=new a.$.Deferred,e="task_id="+b.task_id;return this.request({url:c+"?"+e,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},_dataHandle:function(a){for(var b=0;b<a.length;b++){this._attachmentsUrl(a[b].Attachment);for(var c=0;c<a[b].Comments.length;c++)a[b].Comments[c].Private=a[b].Private,a[b].IsInAppPage=!1,this._attachmentsUrl(a[b].Comments[c].Attachment)}return a},_attachmentsUrl:function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b].FileType;if(a[b].IsPreview=null!=a[b].PreviewUrl&&""!=a[b].PreviewUrl?!0:!1,this._isImage(c)){if(a[b].IsImage=!0,null!=a[b].PreviewUrl&&""!=a[b].PreviewUrl){var d=a[b].PreviewUrl,e=d.lastIndexOf(".");if(e>0){var f=d.substr(0,e)+"_b."+d.substr(e+1),g=d.substr(0,e)+"_s."+d.substr(e+1);"gif"==c&&(g=d),a[b].BigUrl=f,a[b].SmallUrl=g}}}else a[b].IsImage=!1}},_isImage:function(b){for(var c=!1,d=a.Context.getAttachmentType().image,e=0;e<d.length;e++)if(b==d[e]){c=!0;break}return c},importTask:function(b){var c=new a.$.Deferred,d={workId:"",dfsUrl:""};b=a._.extend({},d,b);a.Context.getUserInfo().Id,a.Context.getTenantInfo().Id;if("task"==b.type)var e="task/TaskImport";else var e="WorkMileStone/WorkMileStoneImport";return this.request({url:e,type:"post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()}})}),define("collections/file-list-collection",["talent"],function(a){return a.Collection.extend({mockData:{GET:{Code:1,message:"ok",Data:[{fileId:"001",fileName:"tita"},{fileId:"002",fileName:"招聘"},{fileId:"003",fileName:"IE101212"},{fileId:"004",fileName:"斑斑驳驳"},{fileId:"005",fileName:"吾问无为谓"},{fileId:"006",fileName:"ddddd"},{fileId:"007",fileName:"eeeee"},{fileId:"008",fileName:"cccc"},{fileId:"009",fileName:"ffff"},{fileId:"010",fileName:"eeqqer"}]}},getData:function(){return this.url="getData",this.fetch()}})}),define("collections/plan-list-collection",["talent"],function(a){return a.Collection.extend({mockData:{GET:{Code:1,Message:"response message",Data:[{Id:1,UserId:2,Name:"sample string 1",Editable:!0,State:1},{Id:2,UserId:2,Name:"sample string 2",Editable:!0,State:2},{Id:3,UserId:2,Name:"sample string 3",Editable:!0,State:1}],ExtendedData:{}},POST:{Code:1,Message:"sample string 2",Data:{Id:10,UserId:2,Name:"sample string 10",Editable:!0,State:1},ExtendedData:{}}}})}),define("Uploader",["talent"],function(talent){var jst=function(){return this.JST=this.JST||{},this.JST["uploader/rencent-upload-composite"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div style="position:relative;">\n	<span>最近上传的文件</span><a class="btn_close_file">X</a>\n</div>\n<ul class="uploader_exist_file_list"></ul>\n<div>\n	<button class="btn_save_file">提交</button>\n	<button class="btn_canc_file">取消</button>\n</div>';return __p},this.JST["uploader/rencent-upload-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<input type="checkbox" class="checkbox" title="'+(null==(__t=Name)?"":__t)+'"  value="'+(null==(__t=Id)?"":__t)+'"  id="'+(null==(__t=Id)?"":__t)+'" >'+(null==(__t=Name)?"":__t)+"</input>";return __p},this.JST["uploader/uploader-component"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="upload_node">文件/图片</div>\n<ul class = "upload_type_show upload_dropdown" style="display:none">\n	<li class="upload_new_file">				\n		<div class="dp_upload_text">本地上传</div>\n	</li>\n	',isShowExistFile||(__p+='\n	<li class="dp_upload_exist_text">从我的文件上传</li>	\n	'),__p+='\n</ul>\n<div class="error_container"></div>\n<div class="preview_container"></div>\n<div class="loading_view"></div>';return __p},this.JST["uploader/uploader-form"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<form class="upload_form" style="width: 100%;" action="'+(null==(__t=url)?"":__t)+'" method="post" enctype="multipart/form-data" target="upload_target_iframe">\n	<input type="hidden" class="callback" name="'+(null==(__t=callbackName)?"":__t)+'" value="'+(null==(__t=callbackValue)?"":__t)+'">\n	',__p+=validate.onceLimt>1?'\n	<input type="file" style="opacity:0;filter:alpha(opacity=0);" multiple="true" name="'+(null==(__t=fileInputName)?"":__t)+'[]" class="upload_file_input">\n	':'\n	<input type="file" style="opacity:0;filter:alpha(opacity=0);" name="'+(null==(__t=fileInputName)?"":__t)+'" class="upload_file_input">\n	',__p+="\n	",_.each(extendData,function(a,b){__p+='\n	<input type="hidden" name="'+(null==(__t=b)?"":__t)+'" class="upload_file_input" value="'+(null==(__t=a)?"":__t)+'">\n	'}),__p+="\n</form>";return __p},this.JST}(),UploaderView=talent.ItemView.extend({template:jst["uploader/uploader-form"],className:"upload_form_container",defaults:{url:"upload",fileInputName:"files",callbackName:"_callback_",callbackValue:"parent._callback_",container:"",extendData:{},ajaxUrl:"",validate:{},isPaste:!0,isDrag:!0,pasteNode:null},modelEvents:{"change:timestamp":"render"},ui:{form:".upload_form",file:'input[type="file"]'},initialize:function(a){var a=a||{};this.options=talent._.extend({},this.defaults,a);var b="_"+parseInt(1e3*Math.random());if(this.options.callbackValue&&-1!=this.options.callbackValue.indexOf(".")){var c=this.options.callbackValue.split(".");"parent"==c[0]&&(c=talent._.rest(c)),this.options.windowCallbackValue=c.join(".")+b}else this.options.windowCallbackValue=this.options.callbackValue+b;this.options.callbackValue=this.options.callbackValue+b,this.model=new talent.Model(talent._.extend({},this.options)),this.changeTimestamp(),this.hasEnter=!1},onRender:function(){0==talent.$("#upload_target_iframe").length&&$("body").append('<iframe style="display:none;" id="upload_target_iframe" name="upload_target_iframe"></iframe>'),this.$el.css({position:"absolute",top:"0px"});var a=this.options.container;talent.$(a).find(".upload_new_file").find(".upload_form_container").remove(),talent.$(a).find(".upload_new_file").append(this.$el),this.addEventListener(),this.trigger("formViewRender",this)},changeTimestamp:function(){var a=(new Date).getTime(),b=this.model.get("url").replace(/&?timestamp=.*/g,""),c=this.model.get("ajaxUrl").replace(/&?timestamp=.*/g,"");c=-1==c.indexOf("?")?c+"?timestamp="+a:c+"&timestamp="+a,b=-1==b.indexOf("?")?b+"?timestamp="+a:b+"&timestamp="+a,this.model.set("url",b),this.model.set("ajaxUrl",c),this.model.set("timestamp",a)},addEventListener:function(){var a=this;window[this.options.windowCallbackValue]=function(b){a.onAfterUpload(b)},this.options.isPaste&&this.bindPasteEvents(),this.options.isDrag&&this.bindDropDragEvents(),this.bindFileInputEvents()},bindFileInputEvents:function(){var a=this,b=this.options.container;talent.$(b).off("change.uploader"),talent.$(b).on("change.uploader",'input[type="file"]',function(b){a.onBeforeInputUpload(b)})},bindDropDragEvents:function(){var a=this,b=this.options.container;talent.$(b).off("dragenter.uploader").off("dragleave.uploader").off("dragover.uploader").off("drop.uploader"),talent.$(b).on("dragenter.uploader",function(b){b.preventDefault(),a.hasEnter||(a.hasEnter=!0)}).on("dragleave.uploader",function(b){b.preventDefault(),a.hasEnter=!1}).on("dragover.uploader",function(a){a.preventDefault()}).on("drop.uploader",function(b){b.preventDefault(),a.options.onDrop&&a.options.onDrop(b),a.onBeforeDragUpload(b.originalEvent),a.hasEnter=!1})},bindPasteEvents:function(){var a=this,b=this.options.container,c=this.options.pasteNode;c?(talent.$(c).off("paste.uploader"),talent.$(c).on("paste.uploader",function(b){a.onBeforePasteUpload(b.originalEvent)})):(talent.$(b).off("paste.uploader"),talent.$(b).on("paste.uploader","textarea",function(b){a.onBeforePasteUpload(b.originalEvent)}))},onBeforeInputUpload:function(){var a=[];talent.$.each(this.$el.find('[type="file"]'),function(b,c){var d=talent.$(c).val()||"";talent.$.trim(d)&&a.push({name:d})});var b=this,c=this.validateFile(a);c.done(function(a){a&&b.formSubmit()})},onBeforeDragUpload:function(a){var b=this,c=a.dataTransfer.files;if(0!=c.length){for(var d=new FormData,e=0,f=c.length;f>e;e++)d.append(this.options.fileInputName+"[]",c[e]);var g=this.options.extendData;talent._.each(g,function(a,b){d.append(b,a)});var h=this.validateFile(c);h.done(function(a){a&&b.ajaxSubmit(d)})}},onBeforePasteUpload:function(a){var b=this,c=a.clipboardData&&a.clipboardData.items,d=[];if(!c)return!1;if(talent.$.each(c,function(a,b){var c=b.getAsFile&&b.getAsFile();c&&(c.name=(new Date).getTime()+parseInt(100*Math.random())+".png",d.push(c))}),0==d.length)return!1;var e=new FormData;talent.$.each(d,function(a,c){e.append(b.options.fileInputName+"[]",c,c.name)});var f=this.options.extendData;talent._.each(f,function(a,b){e.append(b,a)});var g=this.validateFile(d);g.done(function(a){a&&b.ajaxSubmit(e)})},onAfterUpload:function(a){this.trigger("uploadEnd",a)},formSubmit:function(){this.trigger("uploadStart",{timestamp:this.model.get("timestamp")}),this.ui.form.submit(),this.changeTimestamp()},ajaxSubmit:function(a){var b=this;this.trigger("uploadStart",{timestamp:this.model.get("timestamp")}),$.ajax({url:this.model.get("ajaxUrl"),type:"post",processData:!1,contentType:!1,data:a,dataType:"json",success:function(a){b.onAfterUpload(a)}}),this.changeTimestamp()},validateFile:function(a){var b=new talent.$.Deferred,c=this.options.validate,d=this,e=!0,a=a||this.ui.file[0].files;for(var f in c)if(e=d[f+"Validate"]?e&&d[f+"Validate"](a):e&&!0,0==e)break;return e||(d.trigger("error",{type:f}),this.changeTimestamp()),b.resolve(e),b.promise()},formatValidate:function(a){var b=!0,c=this;return talent._.each(a,function(a){var d=a.name||"";b=b&&c.formatValidateByItem(d)}),b},formatValidateByItem:function(a){var b=a.substring(a.lastIndexOf(".")+1),c=this.options.validate.format,d=0;if(!c||c&&0==c.length)return!0;for(;d<c.length;d++)if(b==c[d])return!0;return d==c.length?!1:void 0},allLimtValidate:function(a,b){var c=this.options.validate.allLimt;if(0>c)return!0;var d=this.options.fileCollection.length,b=a&&a.length||b,e=!0;return c>0&&d+b>c&&(e=!1),e},onceLimtValidate:function(){var a=this.options.validate.onceLimt;return 0>a?!0:!0},nameLimtValidate:function(a){var b=this.options.validate.nameLimt;if(0>b)return!0;var c=!0,d=this;return talent._.each(a,function(a){var b=a.name||"";c=c&&d.nameLimtValidateByItem(b)}),c},nameLimtValidateByItem:function(a){var b=this.options.validate.nameLimt;return this._isStringBeyondLength(a,b)},_isStringBeyondLength:function(a,b){var c=/[^\x00-\xff]/g,d=a.replace(c,"**").length;return d>b?!0:!1}}),PreviewView=talent.CollectionView.extend({itemView:talent.ItemView.extend({template:talent._.template('<%= Name %><a class="del_item" href="javascript:void(0)">删除</a>'),tagName:"li",events:{"click .del_item":"delItem"},delItem:function(){this.trigger("delete")}}),tagName:"ul",initialize:function(){var a=this;this.templateHelpers=this.model.get("text"),this.on("itemview:delete",function(b){a.delItem(b)})},delItem:function(a){this.collection.remove(a.model),this.trigger("deleteItem")},onAfterItemAdded:function(a){a.$el.attr("cid",a.model.cid)}}),RecentUploadView=talent.CompositeView.extend({template:jst["uploader/rencent-upload-composite"],itemView:talent.ItemView.extend({tagName:"li",template:jst["uploader/rencent-upload-item"]}),itemViewContainer:".uploader_exist_file_list",events:{"click .btn_save_file":"onAfterSubmit","click .btn_close_file":"onAfterClose","click .btn_canc_file":"onAfterCancel"},initialize:function(a){var a=a||{};this.templateHelpers=this.model.get("text"),this.getListData(),this.checkedFileCollection=a.checkedFileCollection},getListData:function(){var a=this;talent.$.ajax({url:this.model.get("getRecentFileUrl")}).done(function(b){var b=b||{};b.data&&a.collection.add(b.data)})},onRender:function(){this.$el.appendTo("body"),this.$el.css({position:"absolute",top:"50%",left:"50%"})},showDialog:function(){var a=this;talent._.each(this.checkedFileCollection,function(b){var c=b.get("Id");a.$el.find('input[value="'+c+'"]').attr("checked",!0)}),this.$el.show()},hideDialog:function(){this.$el.find("input:checked").attr("checked",!1),this.$el.hide()},onAfterSubmit:function(){this.getSelected(),this.trigger("submit",this.checkedFileCollection),this.hideDialog()},onAfterClose:function(){this.getSelected(),this.trigger("close",this.checkedFileCollection),this.hideDialog()},onAfterCancel:function(){this.getSelected(),this.trigger("cancel",this.checkedFileCollection),this.hideDialog()},getSelected:function(){var a=this;this.checkedFileCollection.reset([]),talent.$.each(this.$el.find("input:checked"),function(){var b=talent.$(this).val(),c=a.collection.where({Id:parseInt(b)})[0];c&&a.checkedFileCollection.add(c)})},onClose:function(){this.$el.remove()}}),UploaderComponentView=talent.ItemView.extend({template:jst["uploader/uploader-component"],className:"upload_component",PreviewView:PreviewView,RecentUploadView:RecentUploadView,FileCollection:talent.Collection,CheckedFileCollection:talent.Collection,RecentFileCollection:talent.Collection,loadingTemplate:talent._.template("<div>loading</div>"),errorTemplate:talent._.template("<div><%= msg %></div>"),defaults:{text:{},container:"",callbackName:"callback",url:"upload",fileInputName:"files",extendData:{},ajaxUrl:"",validate:{format:["jpeg","JPEG","pdf","PDF","docx","DOCX","xlsx","XLSX","ppt","PPT","rar","RAR","txt","TXT","xls","XLS","doc","zip","ZIP","jpg","JPG","gif","GIF","png","PNG","pptx","PPTX","mmap","MMAP"],onceLimt:2,allLimt:2,nameLimt:-1},error:{error_allLimt:"超出最大限度",error_format:"格式不合法",error_nameLimt:"名字长度不合格"},isDrag:!1,isPaste:!1,isShowExistFile:!1,errorTime:500,data:[],getRecentFileUrl:""},ui:{dropDown:".upload_dropdown"},events:{"click .upload_node":"showUploadDropdown","click .upload_old_file":"showRecentUploadView"},initialize:function(a){var b=this;this.dealOptions(a),this.model=new talent.Model(this.options);var c=this.options.data||[];this.fileCollection=new this.FileCollection(c),this.checkedFileCollection=new this.CheckedFileCollection,this.recentFileCollection=new this.RecentFileCollection,this.templateHelpers=this.model.get("text"),talent.$("body").off("click.upload"),talent.$("body").on("click.upload",function(){b.hideUploadDropdown()}),this.options.PreviewView&&(this.PreviewView=this.options.PreviewView),this.options.RecentUploadView&&(this.RecentUploadView=this.options.RecentUploadView),this.options.loadingTemplate&&(this.loadingTemplate=this.options.loadingTemplate),this.options.errorTemplate&&(this.errorTemplate=this.options.errorTemplate),this.options.template&&(this.template=this.options.template)},dealOptions:function(a){this.options=talent._.extend({},this.defaults,a)},onRender:function(){var a=this.options.container;""==a&&(this.options.container=this.$el),0==talent.$(a).find(".upload_new_file").length&&this.$el.appendTo(talent.$(a).find(".uploader_container")),this.renderUploaderFormView(),this.renderPreviewListView(),this.options.isShowExistFile&&this.renderRecentUploadView()},renderUploaderFormView:function(){var a=this;this.options.fileCollection=this.fileCollection,this.uploaderView=new UploaderView(this.options),this.uploaderView.on("formViewRender",function(b){a.onAfterFormViewRender(b)}),this.uploaderView.render(),this.uploaderView.on("uploadStart",function(b){a.showLoadingView(b),a.trigger("uploadStart",b)}),this.uploaderView.on("uploadEnd",function(b){var c=a.onAfterUpload&&a.onAfterUpload(b);a.fileCollection.add(c),a.hideLoadingView(b),a.trigger("uploadEnd",a.fileCollection.toJSON(),b)}),this.uploaderView.on("error",function(b){a.hideLoadingView(b),a.showErrorView(b),a.trigger("error",b)})},onAfterFormViewRender:function(){},onAfterUpload:function(a){return a.data},renderPreviewListView:function(){var a=this,b=this.options.container;this.previewCompositeView=new this.PreviewView({collection:this.fileCollection,model:this.model}),this.previewCompositeView.on("deleteItem",function(){a.trigger("deleteItem",a.fileCollection.toJSON())}),talent.$(b).find(".preview_container").append(this.previewCompositeView.render().$el)},renderRecentUploadView:function(){var a=this;this.rencentCompositeView=new this.RecentUploadView({collection:this.recentFileCollection,model:this.model,checkedFileCollection:this.checkedFileCollection}),this.rencentCompositeView.on("submit",function(){a.fileCollection.length+a.checkedFileCollection.models.length>a.options.validate.allLimt?a.showErrorView({type:"allLimt"}):a.fileCollection.add(a.checkedFileCollection.toJSON())}),this.rencentCompositeView.render()},showRecentUploadView:function(){this.rencentCompositeView.showDialog()},showErrorView:function(a){var b=this.options.container,c=this,a=a||{},d=a.type;a=this.options.error["error_"+d]||a,d&&(a=a.replace(/\{\{[\s\S]+\}\}/,this.options.validate[d])),talent.$(b).find(".error_container").empty().append(this.errorTemplate({msg:a})).show(),setTimeout(function(){c.hideErrorView()},this.options.errorTime)},hideErrorView:function(){var a=this.options.container;talent.$(a).find(".error_container").hide()},showLoadingView:function(){var a=this.options.container;talent.$(a).find(".loading_container").empty().append(this.loadingTemplate()).show()},hideLoadingView:function(){var a=this.options.container;talent.$(a).find(".loading_container").hide()},showUploadDropdown:function(a){a.stopPropagation(),this.ui.dropDown.show()},hideUploadDropdown:function(){this.ui&&this.ui.dropDown&&talent.$(this.ui.dropDown).hide()},getFileList:function(){return this.fileCollection.toJSON()}}),Uploader={};return Uploader.UploaderView=UploaderView,Uploader.UploaderComponentView=UploaderComponentView,Uploader.PreviewView=PreviewView,Uploader.RecentUploadView=RecentUploadView,Uploader}),function(){!function(a){return"function"==typeof define&&define.amd?define("$.caret",["jquery"],a):a(window.jQuery)}(function(a){var b,c,d,e,f,g;return g="caret",b=function(){function b(a){this.$inputor=a,this.domInputor=this.$inputor[0]}return b.prototype.setPos=function(){return this.domInputor},b.prototype.getIEPosition=function(){return a.noop()},b.prototype.getPosition=function(){return a.noop()},b.prototype.getOldIEPos=function(){var a,b;return b=document.selection.createRange(),a=document.body.createTextRange(),a.moveToElementText(this.domInputor),a.setEndPoint("EndToEnd",b),a.text.length},b.prototype.getPos=function(){var a,b,c;return(c=this.range())?(a=c.cloneRange(),a.selectNodeContents(this.domInputor),a.setEnd(c.endContainer,c.endOffset),b=a.toString().length,a.detach(),b):document.selection?this.getOldIEPos():void 0},b.prototype.getOldIEOffset=function(){var a,b;return a=document.selection.createRange().duplicate(),a.moveStart("character",-1),b=a.getBoundingClientRect(),{height:b.bottom-b.top,left:b.left,top:b.top}},b.prototype.getOffset=function(){var a,b,c,d;if(b=null,window.getSelection&&(c=this.range())){if(c.endOffset-1<0)return null;a=c.cloneRange(),a.setStart(c.endContainer,c.endOffset-1),a.setEnd(c.endContainer,c.endOffset),d=a.getBoundingClientRect(),b={height:d.height,left:d.left+d.width,top:d.top},a.detach()}else document.selection&&this.getOldIEOffset();return e.adjustOffset(b,this.$inputor)},b.prototype.range=function(){var a;if(window.getSelection)return a=window.getSelection(),a.rangeCount>0?a.getRangeAt(0):null},b}(),c=function(){function a(a){this.$inputor=a,this.domInputor=this.$inputor[0]}return a.prototype.getIEPos=function(){var a,b,c,d,e,f,g;return b=this.domInputor,f=document.selection.createRange(),e=0,f&&f.parentElement()===b&&(d=b.value.replace(/\r\n/g,"\n"),c=d.length,g=b.createTextRange(),g.moveToBookmark(f.getBookmark()),a=b.createTextRange(),a.collapse(!1),e=g.compareEndPoints("StartToEnd",a)>-1?c:-g.moveStart("character",-c)),e},a.prototype.getPos=function(){return document.selection?this.getIEPos():this.domInputor.selectionStart},a.prototype.setPos=function(a){var b,c;return b=this.domInputor,document.selection?(c=b.createTextRange(),c.move("character",a),c.select()):b.setSelectionRange&&b.setSelectionRange(a,a),b},a.prototype.getIEOffset=function(a){var b,c,d,e,f;return d=this.domInputor.createTextRange(),a||0==a?d.move("character",a):(c=document.selection.createRange(),d.moveToBookmark(c.getBookmark())),e=d.boundingLeft,f=d.boundingTop,b=d.boundingHeight,{left:e,top:f,height:b}},a.prototype.getOffset=function(a){var b,c,d;return b=this.$inputor,document.selection?e.adjustOffset(this.getIEOffset(a),b):(c=b.offset(),d=this.getPosition(a),c={left:c.left+d.left,top:c.top+d.top,height:d.height})},a.prototype.getPosition=function(a){var b,c,e,f,g,h;return b=this.$inputor,e=function(a){return a.replace(/</g,"&lt").replace(/>/g,"&gt").replace(/`/g,"&#96").replace(/"/g,"&quot").replace(/\r\n|\r|\n/g,"<br />")},void 0===a&&(a=this.getPos()),h=b.val().slice(0,a),f="<span>"+e(h)+"</span>",f+="<span id='caret'>|</span>",g=new d(b),c=g.create(f).rect()},a.prototype.getIEPosition=function(a){var b,c,d,e,f;return d=this.getIEOffset(a),c=this.$inputor.offset(),e=d.left-c.left,f=d.top-c.top,b=d.height,{left:e,top:f,height:b}},a}(),d=function(){function b(a){this.$inputor=a}return b.prototype.css_attr=["overflowY","height","width","paddingTop","paddingLeft","paddingRight","paddingBottom","marginTop","marginLeft","marginRight","marginBottom","fontFamily","borderStyle","borderWidth","wordWrap","fontSize","lineHeight","overflowX","text-align"],b.prototype.mirrorCss=function(){var b,c=this;return b={position:"absolute",left:-9999,top:0,zIndex:-2e4,"white-space":"pre-wrap"},a.each(this.css_attr,function(a,d){return b[d]=c.$inputor.css(d)}),b},b.prototype.create=function(b){return this.$mirror=a("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(b),this.$inputor.after(this.$mirror),this},b.prototype.rect=function(){var a,b,c;return a=this.$mirror.find("#caret"),b=a.position(),c={left:b.left,top:b.top,height:a.height()},this.$mirror.remove(),c},b}(),e={adjustOffset:function(b,c){return b?(b.top+=a(window).scrollTop()+c.scrollTop(),b.left+=+a(window).scrollLeft()+c.scrollLeft(),b):void 0},contentEditable:function(a){return!(!a[0].contentEditable||"true"!==a[0].contentEditable)}},f={pos:function(a){return a?this.setPos(a):this.getPos()},position:function(a){return document.selection?this.getIEPosition(a):this.getPosition(a)},offset:function(a){return this.getOffset(a)}},a.fn.caret=function(d){var g;return g=e.contentEditable(this)?new b(this):new c(this),f[d]?f[d].apply(g,Array.prototype.slice.call(arguments,1)):a.error("Method "+d+" does not exist on jQuery.caret")},a.fn.caret.EditableCaret=b,a.fn.caret.InputCaret=c,a.fn.caret.Utils=e,a.fn.caret.apis=f})}.call(this),define("UserSelector",["talent","$.caret"],function(talent){var jst=function(){return this.JST=this.JST||{},this.JST["smember/smember-component"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)"single"==viewType?(__p+='\n<div class="smember_simple_container">\n	<div class="smember_condition"></div>\n	<div class="smember_search_content">\n		<div class="smember_search_content_left">\n			',(showTab||"muti"==viewType)&&(__p+='\n			<div class="smember_tab"></div>\n			'),__p+='\n			<div class="smember_list_container"></div>\n			<div class="smember_search_content_left_footer"></div>\n		</div>\n	</div>\n	',showFoot&&(__p+='\n	<div class="smember_footer">\n		<div class="smember_footer_group">\n			',muti&&(__p+='\n			<a href="javascript:void(0)" class="smember_btn_default" data-handler="More">高级模式</a>\n			'),__p+='\n			<a href="javascript:void(0)" class="smember_btn_default" data-handler="Close">关闭</a>\n		</div>\n	</div>\n	'),__p+="\n</div>\n"):(__p+='\n<div class="smember_muti_container">\n	<div class="smember_header">\n		'+__e(titleName)+'\n		<a href="javascript:void(0)" class="smember_btn_close" data-handler="Close"></a>\n	</div>\n	<div class="smember_condition"></div>\n	<div class="smember_search_content">\n		<div class="smember_search_content_left">		\n			<div class="smember_tab"></div>\n			<div class="smember_list_container"></div>\n			<div class="smember_search_content_left_footer"></div>\n		</div>\n		<div class="smember_search_content_center">	\n			<span class="smember_search_arrow_icon"></span>\n		</div>\n		<div class="smember_search_content_right">\n			<div class="smember_after_search_title">\n				'+__e(searchTitle)+'\n			</div>\n			<div class="smember_after_search_list_container"></div>\n		</div>\n	</div>\n	',showFoot&&(__p+='\n	<div class="smember_footer">\n		<div class="smember_footer_group">\n			<a href="javascript:void(0)" class="smember_btn_blue" data-handler="Submit">确定</a>\n			<a href="javascript:void(0)" class="smember_btn_default" data-handler="Cancel">取消</a>\n		</div>\n	</div>\n	'),__p+="\n</div>\n");return __p},this.JST["smember/smember-composite"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)title?(__p+='\n	<div class="smember_list_title" list-type="title">\n	',"added"!=listType?(__p+="\n		","all"==type?(__p+="\n			<span>"+__e(name),"null"!=count&&(__p+="&nbsp;&nbsp;"+__e(count)),__p+="</span>","null"!=count&&(__p+="<span>人</span>"),__p+='\n			<a href="javascript:void(0)" data-handler="Add" class="smember_btn_add"><span></span></a>\n		'):(__p+='\n			<a  href="javascript:void(0)" data-handler="Open" class="smember_btn_fold"></a>\n			<span title='+__e(DepartmentName)+">"+__e(subDepartmentName)+"</span>","null"!=count&&(__p+="<span>&nbsp;&nbsp;"+(null==(__t=count)?"":__t)+"人</span>"),__p+='\n			<a href="javascript:void(0)" data-handler="Add" class="smember_btn_add"><span></span></a>\n		'),__p+="\n	"):(__p+="\n		","all"==type?(__p+="\n			","null"!=count&&0!=count&&(__p+="\n				<span>"+(null==(__t=name)?"":__t),"null"!=count&&(__p+="&nbsp;&nbsp;"+(null==(__t=count)?"":__t)+"人"),__p+="</span>\n			"),0!=orginCount&&(__p+="\n				<span>组"+(null==(__t=orginCount)?"":__t)+"个</span>\n			"),__p+='\n			<a href="javascript:void(0)" data-handler="Delete" class="smember_btn_reduce"><span></span></a>\n		'):(__p+='\n			<a  href="javascript:void(0)" data-handler="Open" class="smember_btn_fold"></a>\n			<span title='+__e(DepartmentName)+" >"+__e(subDepartmentName)+"</span>","null"!=count&&(__p+="<span>&nbsp;&nbsp;"+(null==(__t=count)?"":__t)+"人</span>"),__p+="\n			",dropPeople?__p+='	\n				<a href="javascript:void(0)" data-handler="Delete" class="smember_btn_reduce"><span></span></a>\n			':(__p+="\n				",_viewLevel<2&&(__p+='\n					<a href="javascript:void(0)" data-handler="Delete" class="smember_btn_reduce"><span></span></a>\n				'),__p+="\n			"),__p+="\n		"),__p+="\n	"),__p+="\n	</div>\n"):(__p+='\n	<div class="smember_list_item" list-type="item">\n		'+(null==(__t=imgTemplate)?"":__t)+'\n		<div class="smember_list_info">\n			<div class="member_list_item_one">\n				<div class="smember_list_item_name" title='+__e(Name)+">"+__e(subName)+"</div>\n				",showDepartment&&"added"!=listType&&(__p+='\n					<div class="smember_list_item_department" title='+__e(Name)+">"+__e(Department)+"</div>\n				"),__p+='\n			</div>\n			<div class="smember_list_item_email" title='+__e(Email)+" >"+__e(subEmail)+"</div>\n		</div>\n		","added"==listType&&"department"==type?(__p+="\n			",dropPeople&&(__p+='\n				<a href="javascript:void(0)" data-handler="Delete" class="smember_btn_reduce">\n					<span></span>\n				</a>\n			'),__p+="\n		"):(__p+="\n			","added"==listType&&"all"==type&&(__p+='\n				<a href="javascript:void(0)" data-handler="Delete" class="smember_btn_reduce">\n					<span></span>\n				</a>\n			'),__p+="\n		"),__p+="\n	</div>\n"),__p+='\n<ul class="list_container clearfloat"></ul>\n';return __p},this.JST["smember/smember-set-condition-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)"single"==viewType&&(__p+='\n<div class="smember_header_input">\n	<label class="smember_condition_label">'+(null==(__t=title)?"":__t)+"</label>\n	",__p+=hasSerchBtn?'\n		<input autocomplete="off" class="smember_condition_input smember_condition_input_small" type="text" name="content"></input>\n		<button class=\'sear_btn\'>搜索</button>\n	':'\n		<input autocomplete="off" class="smember_condition_input" type="text" name="content"></input>\n	',__p+="\n</div>\n"),__p+="\n","muti"==viewType&&(__p+='\n<div class="smember_form_container">\n	<div class="smember_header_input">\n		<label class="smember_condition_label">'+(null==(__t=title)?"":__t)+"</label>\n		",__p+=hasSerchBtn?'\n			<input autocomplete="off" class="smember_condition_input smember_condition_input_small" type="text" name="content"></input>\n			<button class=\'sear_btn\'>搜索</button>\n		':'\n			<input autocomplete="off" class="smember_condition_input" type="text" name="content"></input>\n		',__p+="\n	</div>\n</div>\n"),__p+="\n","mutiPower"==viewType&&(__p+='\n	<div class="smember_form_search">\n		<a href="javascript:void(0)" class="smember_btn_default">搜索</a>\n	</div>\n	<div class="smember_search_filter_content">\n		<span class="smember_search_btn_down"></span>\n	</div>\n');
return __p},this.JST["smember/smember-tab-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)_.each(tab,function(a){__p+='\n	<li style="float: left"> <a data-type='+(null==(__t=a.type)?"":__t)+' href="javascript:void(0)">'+(null==(__t=a.text)?"":__t)+"</a></li>\n"});return __p},this.JST}(),ListCompositeView=talent.CompositeView.extend({template:jst["smember/smember-composite"],tagName:"li",className:"clearfix",itemViewContainer:".list_container",initialize:function(a){var b=this;this.options=talent.$.extend({},a),this.parentView=this.options.parentView,this.model.get("Data")&&(this.collection=new talent.Collection(this.model.get("Data")));this.model.get("count");this.templateHelpers={title:this.model.get("count")||0==this.model.get("count")?!0:!1,listType:this.options.listType,viewType:this.options.viewType,dropPeople:this.options.dropPeople,showPageButton:this.options.showPageButton,everyPageCount:this.options.everyPageCount,showDepartment:this.options.showDepartment,_viewLevel:this.options._viewLevel,type:this.model.get("type")||this.options.type},this.itemViewOptions={listType:this.options.listType,viewType:this.options.viewType,dropPeople:this.options.dropPeople,parentView:this,eventId:this.options.eventId,showPageButton:this.options.showPageButton,everyPageCount:this.options.everyPageCount,showDepartment:this.options.showDepartment,_viewLevel:this.options._viewLevel+1,type:this.model.get("type")||this.options.type},this.on("composite:collection:rendered",function(){b.$el.find(".smember_loading").remove()})},events:{"click a":"onHandler","click .smember_list_title":"dealDepartmentAdd"},modelEvents:{"change:count":"render","change:orginCount":"render"},onRender:function(){var a=this,b=this.model.get("count"),c=this.options.listType;b||0==b||"added"==c||this.$el.find('[list-type="item"]').on("click",function(b){b.stopPropagation(),a.onAfterAdd()}),"department"==this.model.get("type")&&this.model.get("Data").length>0&&$(this.$el.find(".smember_btn_fold")[0]).addClass("smember_btn_unfold")},onShow:function(){var a=this.$el.find(".smember_list_item").width(),b=/[^\x00-\xff]/g,c=this.model.get("Name"),d=this.model.get("Email"),e=c?c.replace(b,"**").length:0,f=d?d.replace(b,"**").length:0;(e>=34||f>=32)&&this.$el.find(".smember_list_info").css("width",0>a-60?0:a-60)},addButton:function(){this.options.listType,this.options.showPageButton},onHandler:function(a){a.stopPropagation();var b=talent.$(a.currentTarget).attr("data-handler");this["onAfter"+b]&&this["onAfter"+b](a)},onAfterAdd:function(){talent.app.vent.trigger("smember"+this.options.eventId,{view:this,type:"Add"})},dealDepartmentAdd:function(a){return a.stopPropagation(),"Department"!=this.options.listType&&"added"!=this.options.listType?!1:void this.onAfterOpen($(a.currentTarget).find(".smember_btn_fold"))},onAfterOpen:function(a){var b=a.target?talent.$(a.target):a;if(b.removeClass("smember_btn_unfold"),this.openChild)b.removeClass("smember_btn_unfold"),this.openChild=!1,this.$el.find(".list_container").hide();else if(b.addClass("smember_btn_unfold"),this.openChild=!0,0==this.collection.models.length){var c=new LoadingView;talent.app.vent.trigger("smember"+this.options.eventId,{type:"Open",view:this}),this.$el.find(".list_container").append(c.render().$el)}else this.$el.find(".list_container").show()},onAfterMore:function(){talent.app.vent.trigger("smember"+this.options.eventId,{type:"More",view:this})},onAfterDelete:function(){talent.app.vent.trigger("smember"+this.options.eventId,{type:"Delete",view:this})}}),SmemberItemView=talent.ItemView.extend({template:talent._.template('<div class="smember_list_empty"><%= emptyText  %></div>'),initialize:function(a){this.templateHelpers=a}}),SMemberListCompositeView=talent.CompositeView.extend({template:talent._.template('<ul class="smember_list_parent"></ul>'),itemView:ListCompositeView,itemViewContainer:".smember_list_parent",emptyView:SmemberItemView,defaults:{ContactEmptyText:"输入同事姓名或邮箱",SubordinateEmptyText:"未设置下属，请在个人设置的计划设置下添加。",DepartmentEmptyText:"未设置部门人员，请联系企业超管在后台的组织架构和员工管理下设置",SearchEmptyText:"输入同事姓名或邮箱",addedEmptyText:"请从左侧点击选择"},initialize:function(a){this.options=a||{}},itemViewOptions:function(){var a=this;if("added"!=this.model.get("listType")){var b;a.model.get("emptyText")&&(b=a.model.get("emptyText")[a.model.get("listType")]);var c=b&&0!=b.length?b:a.defaults[a.model.get("listType")+"EmptyText"]}return{emptyText:"added"!=this.model.get("listType")?c:this.defaults[this.model.get("listType")+"EmptyText"],listType:this.model.get("listType"),dropPeople:this.model.get("dropPeople"),viewType:this.model.get("viewType"),showDepartment:this.model.get("showDepartment"),showPageButton:this.model.get("showPageButton"),everyPageCount:this.model.get("everyPageCount"),parentView:this,eventId:this.options.eventId,_viewLevel:1,type:"all"}},onShow:function(){this.bindItemEvents(),this.bindTitleEvents();var a=this.model.get("listType"),b=this.model.get("viewType");("Search"==a||"single"==b&&"Contact"==a)&&this.focusFirst()},bindItemEvents:function(){var a=this;this.$el.on("mouseover",'[list-type="item"]',function(b){a.$el.find(".smember_cur").removeClass("smember_cur"),a.node=talent.$(b.currentTarget).parent(),a.node.addClass("smember_cur")}).on("mouseleave",'[list-type="item"]',function(a){talent.$(a.currentTarget).parent().removeClass("smember_cur")})},bindTitleEvents:function(){var a=this;this.$el.on("mouseover",'[list-type="title"]',function(b){a.$el.find(".smember_cur").removeClass("smember_cur"),a.node=talent.$(b.currentTarget),a.node.addClass("smember_cur")}).on("mouseleave",'[list-type="item"]',function(a){talent.$(a.currentTarget).removeClass("smember_cur")})},focusPrev:function(){if(0==this.$el.find(".smember_cur").length)return void this.focusFirst();var a=this.node.prev();return 0==a.find('[list-type="item"]').length?void this.focusLast():(a.find('[list-type="item"]').trigger("mouseover"),void this.setVisible(a))},focusNext:function(){if(0==this.$el.find(".smember_cur").length)return void this.focusFirst();var a=this.node.next();return 0==a.find(".smember_list_item").length?void this.focusFirst():(a.find('[list-type="item"]').trigger("mouseover"),void this.setVisible(a))},setVisible:function(a){var b=a.offset().top-(this.$el.offset().top+this.$el.outerHeight()),c=a.offset().top-this.$el.offset().top,d=this.$el.find(".smember_list_parent")[0];b>=0?d.scrollTop=d.scrollTop+45:c>=45&&(d.scrollTop=d.scrollTop-45)},focusFirst:function(){var a=this.$el.find(".smember_list_item").first();a.trigger("mouseover"),this.$el.find(".smember_list_parent")[0].scrollTop=0},focusLast:function(){var a=this.$el.find(".smember_list_item").last();a.trigger("mouseover");var b=this.$el.find(".smember_list_parent");b[0].scrollTop=b[0].scrollHeight-b.height()},triggerClick:function(){this.$el.find(".smember_cur").find(".smember_list_item").trigger("click")}}),LoadingView=talent.ItemView.extend({className:"smember_loading",template:talent._.template("loading...")}),SMemberSetConditionItemView=talent.ItemView.extend({template:jst["smember/smember-set-condition-item"],className:"smember_condition_all",events:{"click .smember_condition_label":"onLabelClick","click .sear_btn":"onsearUser","focusout .smember_condition_input":"onInputFocusOut","focusin .smember_condition_input":"onInputFocusin","click a":"changeSearchCondition"},ui:{content:".smember_condition_input",contentHolder:".smember_condition_label"},initialize:function(){var a=this;this.changeSearchConditionDelay=_.debounce(function(b){var c=talent.$.trim(talent.$(b.currentTarget).val()),d=""==c?this.model.get("focusinListType"):"Search";a.model.set({searchCondition:{name:c},listType:d}),a.trigger("showDialog",talent.$(b.currentTarget))},100,!1)},onRender:function(){},onsearUser:function(a){a.stopPropagation(),a.preventDefault(),this.ui.contentHolder.hide();var b=talent.$.trim(this.ui.content.val());this.ui.content.parent(".smember_header_input").addClass("smember_header_input_focus");var c=""==b?this.model.get("focusinListType"):"Search";this.model.set({searchCondition:{name:b},listType:c})},onInputFocusin:function(a){if(a.stopPropagation(),a.preventDefault(),this.ui.contentHolder.hide(),!this.model.get("hasSerchBtn")){var b=talent.$.trim(this.ui.content.val());this.ui.content.parent(".smember_header_input").addClass("smember_header_input_focus");var c=""==b?this.model.get("focusinListType"):"Search";this.model.set({searchCondition:{name:b},listType:c})}},onLabelClick:function(a){a.stopPropagation(),this.ui.content.focus()},onInputFocusOut:function(a){a.stopPropagation(),""==this.ui.content.val()&&this.ui.contentHolder.show(),this.ui.content.parent(".smember_header_input").removeClass("smember_header_input_focus")},resetInput:function(){var a=this.model.get("input");0==a&&(this.$el.find(".smember_condition_input").val(""),this.$el.find(".smember_condition_label").show())},changeSearchCondition:function(a){var b=this;a.stopPropagation();var c=this.$el.find(".smember_condition_input").val();b.model.set("searchCondition",{name:c})},setInputFocus:function(){this.model.get("input")&&this.$el.find(".smember_condition_input").focus()},getInput:function(){return this.ui.content},onShow:function(){var a=this;a.setInputFocus()}}),SMemberTabItemView=talent.ItemView.extend({template:jst["smember/smember-tab-item"],tagName:"ul",className:"clearfix",events:{"click a":"onTabClick"},modelEvents:{"change listType":"setActive"},defaults:{Contact:"常用",Search:"搜索",Subordinate:"下属",Department:"部门",TalentPool:"人才池"},initialize:function(){var a=this.model.get("tab"),b=[],c=this.defaults;talent._.each(a,function(a){b.push({type:a,text:c[a]})}),this.model.set("tab",b)},onShow:function(){this.setActive()},onTabClick:function(a){a.stopPropagation();var b=talent.$(a.target);if(!b.parent().hasClass("active")){this.$el.find(".active").removeClass("active"),b.parent().addClass("active");var c=talent.$(a.target).attr("data-type");this.model.set("listType",c)}},setActive:function(){var a=this.model.get("listType");this.$el.find(".active").removeClass("active"),this.$el.find('a[data-type="'+a+'"]').parent().addClass("active")}}),keyCode={down:40,up:38,esc:27,tab:9,enter:13},SmemberComponetView=talent.Layout.extend({template:jst["smember/smember-component"],className:"smember_container",className2:"smember_container",regions:{condition:".smember_condition",tab:".smember_tab",main:".smember_list_container",addList:".smember_after_search_list_container"},events:{"click a":"onHandler"},modelEvents:{"change:listType":"renderListByType","change:searchCondition":"onSearchConditionChange"},defaults:{allListType:["Search","Contact","Subordinate","Department","TalentPool"],tab:["Contact","Search","Subordinate","Department"],viewType:"single",titleName:"选择人员",listType:"Contact",searchCondition:{name:""},searchTitle:"已选人员",showDepartment:!1,container:"body",input:!0,muti:!1,showFoot:!0,showTab:!1,dropPeople:!1,showPageButton:!0,everyPageCount:23,title:"输入同事姓名或邮箱",hasSerchBtn:!1,bias:{left:0,top:0},stringLen:{Name:32,Email:32,DepartmentName:30},triggerChar:null,visibleMode:1,focusinListType:"Contact"},initialize:function(a){this.inputs=[],this.addedData=a.addedData,this.nodes=[],this.atNodes=[],this.activeNode="",this.eventId=parseInt(1e3*Math.random()),this.dialogIsShow=!1,this.getDataCollection=a.collection,talent.app.vent.on("smember"+this.eventId,this.onOperate,this)},renderListByType:function(){var a=this,b=this.model.get("listType"),c=this.model.get("allListType");if(-1!=talent._.indexOf(c,b)){var d="get"+b,e=this.model.toJSON();a.main.show(new LoadingView);{this.getDataCollection[d](e).done(function(c){var d=a.dealData(c,b);a.smemberListCompositeView=new SMemberListCompositeView({collection:new talent.Collection(d),model:a.model,eventId:a.eventId}),a.main.show(a.smemberListCompositeView),0!=c.length&&a.$el.find(".smember_list_parent").height(a.$el.find(".smember_list_container").height())})}}},renderTabView:function(){this.options.showTab?(this.smemberTabItemView=new SMemberTabItemView({model:this.model}),this.tab.show(this.smemberTabItemView)):"muti"==this.model.get("viewType")&&(this.smemberTabItemView=new SMemberTabItemView({model:this.model}),this.tab.show(this.smemberTabItemView))},renderSetConditionView:function(){if(1==this.model.get("input")){this.smemberSetConditionItemView=new SMemberSetConditionItemView({model:this.model}),this.condition.show(this.smemberSetConditionItemView);var a={node:this.smemberSetConditionItemView.getInput()};this.bindInputEvents(a)}},renderAddedListView:function(){var a=this;this.smemberListAddCompositeView=new SMemberListCompositeView({collection:this.addCollection,model:new talent.Model({listType:"added",showDepartment:!0,dropPeople:a.model.get("dropPeople"),emptyText:a.model.get("emptyText")}),eventId:this.eventId}),this.addList.show(this.smemberListAddCompositeView)},onRender:function(){this.renderSetConditionView(),this.undelegateEvents(),this.delegateEvents();var a=this,b=this.options;a.$el.appendTo(b.container),a.renderTabView(),a.renderAddedListView(),a.renderListByType(),a.$el.off("click.smember mouseup.smember"),a.$el.on("click.smember mouseup.smember",function(a){a.stopPropagation()}),talent.$("body").off("mouseup.smember"),talent.$("body").on("mouseup.smember",function(){a.deleteView()})},addInput:function(a,b){var b=talent._.extend({},{input:!1},b),c={node:a,nodeId:"smember_"+parseInt(1e4*Math.random()),options:b};this.inputs.push(c),this.bindNodeEvents(c),this.bindInputEvents(c)},addNode:function(a,b){var c={node:a,nodeId:"smember_"+parseInt(1e4*Math.random()),options:b};this.nodes.push(c),this.bindNodeEvents(c)},addAtNode:function(a,b,c){var a=talent.$(a),b=talent.$(b),d={node:a,btnNode:b,nodeId:"smember_"+parseInt(1e4*Math.random()),options:c};this.atNodes.push(d),a.attr("data-smemberid",d.nodeId),b.attr("data-smemberid",d.nodeId),this.bindAtNodeEvents(a,b)},bindAtNodeEvents:function(a,b){var c=this;a.off("keyup.smember keydown.smember scroll.smember blur.smember submit click.smember input.smember propertychange.smember"),a.on("keyup.smember",function(b){var d=c.onKeyUpElHanlder(b),e=talent.$(a).caret("pos");d||(c.atTarget=b?talent.$(b.currentTarget):c.atTarget,c.atCatchQuery()),a.attr("user-selector-caret",e)}).on("keydown.smember",function(a){c.onKeyDownElHandler(a)}).on("scroll.smember",function(){c.deleteView()}).on("blur.smember",function(){}).on("focus.smember",function(){var b=talent.$(a).caret("pos");a.attr("user-selector-caret",b)}).on("submit",function(a,b){var d="";return b?(b.data?talent._.each(b.data,function(a){d+="department"==a.type?"@["+a.name+":"+a.id+":dep_members] ":"@["+a.Name+":"+a.Email+"] "}):d="@["+b.Name+":"+b.Email+"] ",void c.atInsert(d,!0)):!1}).on("click.smember",function(b){b.stopPropagation();var c=talent.$(a).caret("pos");a.attr("user-selector-caret",c)}).on("input.smember propertychange.smember",function(){}),b.off("click.smember"),b.on("click.smember",function(a){a.stopPropagation();var b=talent.$(a.currentTarget).attr("data-smemberid"),d=talent._.where(c.atNodes,{nodeId:b})[0]||{},e=talent.$(d.node),f=d.options;if(e.focus(),navigator.userAgent.indexOf("MSIE")>=0)var g=e.attr("user-selector-caret");else var g=talent.$(e).caret("pos");c.atTarget=e,c.pos=g,c.query={text:"",head_pos:g,end_pos:g},c.atInsert(f.triggerChar,!1),e.trigger("keyup.smember")})},bindInputEvents:function(a){var b=this;talent.$(a.node).off("keyup.smember"),talent.$(a.node).on("keyup.smember",function(a){var c=b.onKeyUpElHanlder(a);c||b.changeSearchConditionDelay(a)}),talent.$(a.node).off("keydown.smember"),talent.$(a.node).on("keydown.smember",function(a){b.onKeyDownElHandler(a)}).off("input.smember propertychange.smember").on("input.smember propertychange.smember",function(a){b.dialogIsShow&&this.model&&(this.model.get("hasSerchBtn")||b.changeSearchConditionDelay(a))}),this.changeSearchConditionDelay=_.debounce(function(a){b.setInputSearchCondition(talent.$(a.currentTarget))},100,!1)},setInputSearchCondition:function(a){var b=talent.$(a).val()||"";b=b.replace(/^\s+|\s+$/g,"");var c=""==b?this.model.get("focusinListType"):"Search";this.model.set({searchCondition:{name:b},listType:c})},bindNodeEvents:function(a){var b=this,a=a||{};talent.$(a.node).attr("data-smemberid",a.nodeId),talent.$(a.node).off("click.smember"),talent.$(a.node).on("click.smember",function(a){b.onEventTrigger(a)}),talent.$(a.node).off("focusin.smember"),talent.$(a.node).on("focusin.smember",function(a){b.onEventTrigger(a),function(a){setTimeout(function(){b.onSecondTrigger(a)},300)}(a)})},onSecondTrigger:function(a){var b=this,c=talent.$(a.currentTarget),d=c.attr("data-smemberid"),e=talent._.union(this.inputs,this.nodes),f=talent._.where(e,{nodeId:d})[0]||{},g=f.options,h=this.getNodeOffset(c);b.showDialog(g,c,h)},onEventTrigger:function(a){a.stopPropagation();var b=this,c=talent.$(a.currentTarget),d=c.attr("data-smemberid"),e=talent._.union(this.inputs,this.nodes),f=talent._.where(e,{nodeId:d})[0]||{},g=f.options,h=this.getNodeOffset(c);b.showDialog(g,c,h)},unBindAllInputEvents:function(){var a=this.inputs,b=this;talent._.each(a,function(a){a.node&&b.unBindInputEvents(a.node)})},unBindAllNodeEvents:function(){var a=this.nodes,b=this;talent._.each(a,function(a){a.node&&b.unBindNodeEvents(a.node)})},unBindNodeEvents:function(a){talent.$(a).off("click.smember focusin.smember")},unBindInputEvents:function(a){talent.$(a).off("click.smember keyup.smember focusin.smember keydown.smember input.smember propertychange.smember")},unBindAtNodeEvents:function(a){talent.$(a).off("keydown.smember keyup.smember scroll.smember blur.smember click.smember input.smember propertychange.smember")},organizationData:function(a,b){this.options=talent.$.extend({},this.defaults,a);var c=this.options.input;if(this.activeNode=talent.$(b),this.model=new talent.Model(this.options),c||this.setInputSearchCondition(this.activeNode),this.options.triggerChar&&this.atCatchQuery(),this.addedData&&this.addedData.length>0){var d=[],e={name:"全部",type:"all",Data:[],count:0,orginCount:0};d.push(e);for(var f=[],g=null,h=0,i=this.addedData.length;i>h;h++){var j=this.addedData[h];g=this.joinArr(e.Data,j),f.push(g[0])}e.Data=f,e.count=f.length,this.addCollection=new talent.Collection(d)}else this.addCollection=new talent.Collection([]);this.model.set("listType",this.options.listType)},showDialog:function(a,b,c){return talent.$(this.activeNode).attr("data-smemberid")==talent.$(b).attr("data-smemberid")&&this.dialogIsShow?(this.setPosition(b,c),void(this.smemberSetConditionItemView&&this.smemberSetConditionItemView.setInputFocus())):(c&&(this.$el.attr("offset-left",c.left),this.$el.attr("offset-top",c.top)),this.options=a,this.dialogIsShow=!0,this.organizationData(a,b),this.render(),this.setPosition(b,c),this.$el.show(),void this.onAfterShow(a,b))},onAfterShow:function(){var a=this;if("single"==this.model.get("viewType")&&this.smemberSetConditionItemView&&this.model.get("input"))var b=setTimeout(function(){a.smemberSetConditionItemView.setInputFocus(),clearTimeout(b)},300)},setPosition:function(a,b){var c=this.model.get("container"),d=this.model.get("bias");if("body"!=c&&talent.Context&&talent.Context.setPosition)return void talent.Context.setPosition(a,this.$el,{container:c,leftBias:d.left,topBias:d.top});var e,f;1==this.options.visibleMode?(e=talent.$("body").height(),f=talent.$("body").width()):2==this.options.visibleMode?(e=talent.$(window).height(),f=talent.$(window).width()):(e=document.body.scrollHeight,f=document.body.scrollWidth),this.oldW||(this.oldW=f),this.oldH||(this.oldH=e);var g=this.$el.outerHeight(),h=this.$el.outerWidth(),i=b||a.offset();if(b){var j=parseInt(b.top),k=parseInt(b.left);j+g>e&&(j-=j+g-e,0>j&&(j=0)),k+h>f&&(k-=k+h-f,0>k&&(k=0)),this.$el.css({top:j,left:k})}else{var j=i.top+a.outerHeight()+10+d.top,k=i.left+d.left;this.oldH&&j+g>this.oldH&&(j-=j+g-this.oldH,0>j&&(j=0)),this.oldW&&k+h>this.oldW&&(k-=k+h-this.oldW,0>k&&(k=0)),this.$el.css({top:j,left:k})}},onHandler:function(a){var b=talent.$(a.target).attr("data-handler");this["on"+b+"Handler"]&&this["on"+b+"Handler"](a)},onMoreHandler:function(a){a.stopPropagation(),this.model.set({viewType:"muti",listType:"Contact",searchCondition:{name:""}}),this.render(),this.trigger("more");var b=talent.$(this.activeNode),c="";this.$el.attr("offset-top")&&this.$el.attr("offset-left")&&(c={},c.top=this.$el.attr("offset-top"),c.left=this.$el.attr("offset-left")),this.setPosition(b,c)},onSubmitHandler:function(){var a=this.addCollection.toJSON(),b=[];talent._.each(a,function(a){"department"!=a.type&&"talentPool"!=a.type?b=talent._.union(b,a.Data):"department"==a.type?(a.Data=[],b.push({type:"department",name:a.DepartmentName,id:a.Id,totalUserCount:a.TotalUserCount,allItem:a})):"talentPool"==a.type&&b.push({type:"talentPool",name:a.DepartmentName,id:a.Id,totalUserCount:a.TotalUserCount,allItem:a})}),talent.$(this.activeNode).trigger("submit",{data:b}),this.trigger("submit",{data:b}),this.deleteView()},onCancelHandler:function(){this.trigger("cancel"),this.deleteView()},onCloseHandler:function(){this.trigger("close"),this.deleteView()},onKeyUpElHanlder:function(a){var b=!1;return this.model.get("hasSerchBtn")?a.keyCode&&a.keyCode!=keyCode.enter&&(b=!0):(a.keyCode==keyCode.esc||a.keyCode==keyCode.down||a.keyCode==keyCode.up||a.keyCode==keyCode.tab)&&(b=!0),b},onKeyDownElHandler:function(a){var b=!1,c=this;switch(a.keyCode){case keyCode.esc:c.deleteView(),b=!0;break;case keyCode.down:c.onDownKeyCode(a),b=!0;break;case keyCode.up:c.onUpKeyCode(a),b=!0;break;case keyCode.enter:c.onEnterKeyCode(a),b=!0;break;case keyCode.tab:c.onTabKeyCode(a),b=!0}return b},onUpKeyCode:function(a){this.dialogIsShow&&(a.preventDefault(),a.stopPropagation(),this.smemberListCompositeView.focusPrev(a))},onDownKeyCode:function(a){this.dialogIsShow&&(a.preventDefault(),a.stopPropagation(),this.smemberListCompositeView.focusNext(a))},onEnterKeyCode:function(a){this.model.get("hasSerchBtn")||this.dialogIsShow&&(a.preventDefault(),a.stopPropagation(),this.smemberListCompositeView.triggerClick())},onTabKeyCode:function(a){this.dialogIsShow&&(a.preventDefault(),a.stopPropagation(),this.smemberListCompositeView.focusFirst(a))},onOperate:function(a){this["on"+a.type+"Operate"]&&this["on"+a.type+"Operate"](a.view)},onAddOperate:function(a){var b=a.model.toJSON();if("single"==this.model.get("viewType"))return talent.$(this.activeNode).trigger("submit",b),this.trigger("submit",b),void this.deleteView();this.addCollection||(this.addCollection=new talent.Collection([]));var c=this.addCollection.toJSON(),d=talent._.where(c,{type:"all"})[0];if(d||(d={name:"全部",type:"all",Data:[],count:0,orginCount:0},c.push(d)),b.type&&"all"!=b.type){if(talent._.where(c,{Id:b.Id})[0])return;d.orginCount=d.orginCount+1,c.push(b)}else{var e;"all"==b.type?e=b.Data:(b.Data=null,e=b);var f=this.joinArr(d.Data,e);d.Data=f,d.count=f.length}this.addCollection.reset(c)},onDeleteOperate:function(a){var b=this,a=a,c=a.model.toJSON(),d=this.addCollection.where({type:"all"})[0],e=a.parentView.model.toJSON(),f=a.parentView.collection,g=f.where(c)[0],h=g.get("DepartmentName");if(c.type)if("all"!=c.type){if(d&&this.addCollection.where({DepartmentName:h}).length>0){var i=d.get("orginCount");i=0>i?0:i-1,d.set("orginCount",i);for(var j=g.get("FullDepartmentName").split("/"),k=0;k<j.length;k++)if("undefined"!=typeof this.addCollection.where({DepartmentName:j[k]})[0]){b.dropData(g,e.Id,a,f,d,!1);break}}else b.dropData(g,e.Id,a,f,d,!1);this.addCollection.remove(this.addCollection.where({DepartmentName:h}))}else this.addCollection.reset([]);else{var l=this.addCollection.where(a.parentView.model.toJSON())[0];f.remove(g),e.count-1!=0&&"all"==e.type?l.set({Data:f.toJSON(),count:e.count-1}):b.dropData(g,e.Id,a,f,d,!0)}d&&0==d.get("orginCount")&&0==d.get("count")&&this.addCollection.reset([])},onOpenOperate:function(a){var b=a.model.toJSON(),c=b.type;this[c+"Operate"]&&this[c+"Operate"](a)},onMoreOperate:function(a){var b=a.model.toJSON(),c=b.type;this[c+"OperateOnPage"]&&this[c+"OperateOnPage"](a)},talentPoolOperate:function(a){{var a=a,b=a.model.toJSON(),c=this;this.getDataCollection.getTalentPoolDetail({id:b.Id}).done(function(b){a.collection||(a.collection=new talent.Collection([]));var b=c.dealData(b);a.collection.reset(b)})}},departmentOperate:function(a){{var a=a,b=a.model.toJSON(),c=this;this.getDataCollection.getDepartmentDetail({id:b.Id}).done(function(b){a.collection||(a.collection=new talent.Collection([]));var b=c.dealData(b);a.collection.reset(b),a.addButton()})}},departmentOperateOnPage:function(a){{var a=a,b=a.model.toJSON(),c=this,d=a.collection.length,e=this.options.everyPageCount,f=d/e;this.getDataCollection.getDepartmentDetailOnPage({id:b.Id,page:f,num:e}).done(function(b){a.collection||(a.collection=new talent.Collection([]));var b=c.dealData(b);a.collection.add(b)})}},atCatchQuery:function(){var a,b,c,d,e,f,g=this,h=this.atTarget;b=talent.$(h).val(),a=talent.$(h).caret("pos"),f=b.slice(0,a);var i=h.attr("data-smemberid"),j=talent._.where(this.atNodes,{nodeId:i})[0]||{},k=j.options;if(d=this.atCatchMatch(k.triggerChar||k.triggerChar,f,!1),"string"==typeof d){c=e+d.length,g.pos=a-d.length,d=d.replace(/\'/g,""),g.query={text:d,head_pos:a-d.length,end_pos:a};var l=g.atGetOffset();if(k){k.searchCondition={name:g.query.text};var m=""==d?this.model.get("focusinListType"):"Search";g.model.set({searchCondition:{name:g.query.text},listType:m}),_.each(b,function(a,c){"@"==a&&" "!=b.charAt(c+1)&&g.showDialog(k,h,l)})}}else g.deleteView();return this.query},atInsert:function(a,b){var c,a=""+a,d=talent.$(this.atTarget).val();c=b?Math.max(this.query.head_pos-this.options.triggerChar.length,0):Math.max(this.query.head_pos,0);var e=d.slice(0,c);if(b)var f=""+e+a+" "+d.slice(this.query.end_pos||0);else var f=""+e+a+d.slice(this.query.end_pos||0);talent.$(this.atTarget).val(f);var g=e.length+a.length;b&&(g+=1),talent.$(this.atTarget).caret("pos",g),talent.$(this.atTarget).focus()},atCatchMatch:function(a,b,c){var d,e;return a=a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),c&&(a="(?:^|\\s)"+a),e=new RegExp(a+"([A-Za-z0-9_'+-.]*)$|"+a+"([^\\x00-\\xff]*)$","gi"),d=e.exec(b),d?d[2]||d[1]:null},atGetOffset:function(){var a,b;if(a=talent.$(this.atTarget).caret("offset",this.pos-1)){b=document.selection?0:2;var c=a.top+a.height+b,d=talent.$(this.atTarget)[0].scrollTop;return d>0&&(c=c-d+a.height),{left:a.left,top:c}}},getNodeOffset:function(a){var b=talent.$(a).offset(),c=b.top+talent.$(a).height();return{left:b.left,top:c}},onSearchConditionChange:function(){this.trigger("changeSearchCondition",this.model.get("searchCondition")),this.renderListByType()},getTabView:function(){return this.smemberTabItemView},getMainRegion:function(){return this.main},setContentHeight:function(a){var b=this.$el.find(".smember_search_content").outerHeight(),c=this.$el.find(".smember_tab").outerHeight(),d=this.$el.find(".smember_search_content_left_footer").outerHeight(),a=a||b-c-d;a-="single"==this.model.get("viewType")?20:25,this.$el.find(".smember_list_container").height(a)},deleteView:function(){this.oldW=null,this.oldH=null,this.smemberTabItemView&&this.smemberTabItemView.close(),this.smemberListCompositeView&&this.smemberListCompositeView.close(),this.smemberSetConditionItemView&&this.smemberSetConditionItemView.close(),this.dialogIsShow=!1,this.$el.remove()},dropData:function(a,b,c,d,e,f){var g,h=this,i=c.parentView.model,j=f?1:a.get("count");if(a.set("DepartId",b),i.set("Data",d.toJSON()),"department"==i.get("type")){for(var k,l=i.get("FullDepartmentName").split("/"),m=0;m<l.length;m++)"undefined"!=typeof this.addCollection.where({DepartmentName:l[m]})[0]&&(k=this.addCollection.where({DepartmentName:l[m]})[0]);f?k.get("dropUserData")?k.get("dropUserData").push(a.toJSON()):k.set("dropUserData",[a.toJSON()]):k.get("dropDepartmentData")?(h.filterDropData(k,a),k.get("dropDepartmentData").push(a.toJSON())):(k.set("dropDepartmentData",[a.toJSON()]),h.filterDropData(k,a))}for(var m=1;m<=c.templateHelpers._viewLevel-1;m++)if(g=g?g.parentView:c.parentView,a.get("PId")==g.model.get("Id")&&(delete a.DepartId,g.collection.remove(a)),g.model.set({Data:g.collection.toJSON(),count:g.model.get("count")-j}),changeViewModel=g.model.toJSON(),"all"!=changeViewModel.type&&0==changeViewModel.count){var l=changeViewModel.DepartmentName;"undefined"!=typeof this.addCollection.where({DepartmentName:l})[0]&&e.set("orginCount",e.get("orginCount")-1),g.parentView.collection.remove(g.model)}},filterDropData:function(a,b){var c=_.filter(a.get("dropUserData"),function(a){return a.DepartId!=b.get("Id")});a.set("dropUserData",c)},onClose:function(){talent.app.vent.off("smember"+this.eventId),this.deleteView(),this.unBindAllInputEvents(),this.unBindAllNodeEvents()},joinArr:function(a,b){var c=[],d=talent._.clone(a)||[],e=talent._.clone(b)||[];d=d.concat(e);var f=talent._.pluck(d,"Id");return f=talent._.uniq(f),talent._.each(f,function(a){c.push(talent._.where(d,{Id:a})[0])}),c},dealData:function(a,b){var c;if(0==a.length)return a;var d=this.model.get("stringLen"),e=this;switch(_.map(a,function(a){return a.DepartmentName&&(a.subDepartmentName=e.getSubString(a.DepartmentName,d.DepartmentName,!0)),a.Name&&(a.subName=e.getSubString(a.Name,d.Name,!0)),a.Email&&(a.subEmail=e.getSubString(a.Email,d.Email,!0)),a}),b){case"Contact":c=[{name:"全部",count:a.length,Data:a,type:"all"}];break;case"Subordinate":c=[{name:"全部",count:a.length,Data:a,type:"all"}];break;case"Search":c="single"==this.model.get("viewType")?a:[{name:"全部",count:a.length,Data:a,type:"all"}];break;case"Department":c=a;break;default:c=a}return"single"==this.model.get("viewType")&&(c=a),c},getSubString:function(a,b,c){for(var d=0,e="",f=/[^\x00-\xff]/g,g="",h=a.replace(f,"**").length,i=0;h>i&&(g=a.charAt(i).toString(),null!=g.match(f)?d+=2:d++,!(d>b));i++)e+=g;return c&&h>b&&(e+="..."),e}});return SmemberComponetView}),define("simplemodal",["talent"],function(a){var b=$(document),c=navigator.userAgent.toLowerCase(),d=$(window),e={ieQuirks:null,msie:/msie/.test(c)&&!/opera/.test(c),opera:/opera/.test(c)};e.ie6=e.msie&&/msie 6./.test(c)&&"object"!=typeof window.XMLHttpRequest,e.ie7=e.msie&&/msie 7.0/.test(c),e.boxModel="CSS1Compat"===document.compatMode;var f={focus:!1,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{backgroundColor:"black"},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1e3,close:!0,closeHTML:'<a class="modalCloseImg" title="Close"></a>',closeClass:"simplemodal-close",escClose:!1,overlayClose:!1,fixed:!0,position:null,persist:!1,modal:!0,onOpen:null,onShow:null,onClose:null},g=0;return a.View.extend({ui:{},events:function(){var a={};return a},initialize:function(){this.d=[],this.dTemp=[],this.wTemp=[],e.ieQuirks=e.msie&&!e.boxModel;var a=$.extend({},f),b=g++;a.overlayId=f.overlayId+"-"+b,a.containerId=f.containerId+"-"+b,a.dataId=f.dataId+"-"+b,this.o=$.extend(a,this.options),this.zIndex=this.o.zIndex,this.occb=!1},render:function(a){return a?this.o.data=a:a=this.options.data,"object"==typeof a?(a=a instanceof $?a:$(a),this.d.placeholder=!1,a.parent().parent().size()>0&&(a.before($("<span></span>").attr("id","simplemodal-placeholder").css({display:"none"})),this.d.placeholder=!0,this.display=a.css("display"),this.o.persist||(this.d.orig=a.clone(!0)))):"string"==typeof a||"number"==typeof a?a=$("<div></div>").html(a):alert("SimpleModal Error: Unsupported data type: "+typeof a),this.create(a),this.open(),$.isFunction(this.o.onShow)&&this.o.onShow.apply(this,[this.d]),this.$el},create:function(a){this.getDimensions();var b=this,c=this.dTemp,d=this.wTemp;b.o.modal&&e.ie6&&(b.d.iframe=$('<iframe src="javascript:false;"></iframe>').css($.extend(b.o.iframeCss,{display:"none",opacity:0,position:"fixed",height:d[0],width:d[1],zIndex:b.o.zIndex,top:0,left:0})).appendTo(b.$el)),b.d.overlay=$("<div></div>").attr("id",b.o.overlayId).addClass("simplemodal-overlay").css($.extend(b.o.overlayCss,{display:"none",opacity:b.o.opacity/100,filter:"alpha(opacity="+b.o.opacity+")",height:"100%",width:b.o.modal?c[1]:0,position:"fixed",left:0,top:0,zIndex:b.o.zIndex+1})).appendTo(b.$el),b.d.container=$("<div></div>").attr("id",b.o.containerId).addClass("simplemodal-container").css($.extend({position:b.o.fixed?"fixed":"absolute"},b.o.containerCss,{display:"none",zIndex:b.o.zIndex+2})).append(b.o.close&&b.o.closeHTML?$(b.o.closeHTML).addClass(b.o.closeClass):"").appendTo(b.$el),b.d.wrap=$("<div></div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(b.d.container),b.d.data=a.attr("id",a.attr("id")||b.o.dataId).addClass("simplemodal-data").css($.extend(b.o.dataCss,{display:"none"})).appendTo("body"),a=null,b.setContainerDimensions(),b.d.data.appendTo(b.d.wrap),(e.ie6||e.ieQuirks)&&b.fixIE()
},bindEvents:function(){var a=this,c=this.dTemp,f=this.wTemp;a.$el.find("."+a.o.closeClass).bind("click.simplemodal",function(b){b.preventDefault(),setTimeout(function(){a.close()},10)}),a.o.modal&&a.o.close&&a.o.overlayClose&&a.d.overlay.bind("click.simplemodal",function(b){b.preventDefault(),a.close()}),b.bind("keydown.simplemodal",function(b){a.o.modal&&9===b.keyCode?a.watchTab(b):a.o.close&&a.o.escClose&&27===b.keyCode&&(b.preventDefault(),a.close())}),d.bind("resize.simplemodal orientationchange.simplemodal",function(){a.getDimensions(),a.o.autoResize?a.setContainerDimensions():a.o.autoPosition&&a.setPosition(),e.ie6||e.ieQuirks?a.fixIE():a.o.modal&&(a.d.iframe&&a.d.iframe.css({height:f[0],width:f[1]}),a.d.overlay.css({height:c[0],width:c[1]}))})},unbindEvents:function(){$("."+this.o.closeClass).unbind("click.simplemodal"),b.unbind("keydown.simplemodal"),d.unbind(".simplemodal"),this.d.overlay.unbind("click.simplemodal")},fixIE:function(){{var a=this,b=a.o.position;this.dTemp,this.wTemp}$.each([a.d.iframe||null,a.o.modal?a.d.overlay:null,"fixed"===a.d.container.css("position")?a.d.container:null],function(a,c){if(c){var d="document.body.clientHeight",e="document.body.clientWidth",f="document.body.scrollHeight",g="document.body.scrollLeft",h="document.body.scrollTop",i="document.body.scrollWidth",j="document.documentElement.clientHeight",k="document.documentElement.clientWidth",l="document.documentElement.scrollLeft",m="document.documentElement.scrollTop",n=c[0].style;if(n.position="absolute",2>a)n.removeExpression("height"),n.removeExpression("width"),n.setExpression("height",""+f+" > "+d+" ? "+f+" : "+d+' + "px"'),n.setExpression("width",""+i+" > "+e+" ? "+i+" : "+e+' + "px"');else{var o,p;if(b&&b.constructor===Array){var q=b[0]?"number"==typeof b[0]?b[0].toString():b[0].replace(/px/,""):c.css("top").replace(/px/,"");if(o=-1===q.indexOf("%")?q+" + (t = "+m+" ? "+m+" : "+h+') + "px"':parseInt(q.replace(/%/,""))+" * (("+j+" || "+d+") / 100) + (t = "+m+" ? "+m+" : "+h+') + "px"',b[1]){var r="number"==typeof b[1]?b[1].toString():b[1].replace(/px/,"");p=-1===r.indexOf("%")?r+" + (t = "+l+" ? "+l+" : "+g+') + "px"':parseInt(r.replace(/%/,""))+" * (("+k+" || "+e+") / 100) + (t = "+l+" ? "+l+" : "+g+') + "px"'}}else o="("+j+" || "+d+") / 2 - (this.offsetHeight / 2) + (t = "+m+" ? "+m+" : "+h+') + "px"',p="("+k+" || "+e+") / 2 - (this.offsetWidth / 2) + (t = "+l+" ? "+l+" : "+g+') + "px"';n.removeExpression("top"),n.removeExpression("left"),n.setExpression("top",o),n.setExpression("left",p)}}})},focus:function(a){var b=this,c=a&&-1!==$.inArray(a,["first","last"])?a:"first",d=$(":input:enabled:visible:"+c,b.d.wrap);setTimeout(function(){d.length>0?d.focus():b.d.wrap.focus()},10)},getDimensions:function(){var a="undefined"==typeof window.innerHeight?d.height():window.innerHeight;this.dTemp=[b.height(),b.width()],this.wTemp=[a,d.width()]},getVal:function(a,b){var c=this.wTemp;return a?"number"==typeof a?a:"auto"===a?0:a.indexOf("%")>0?parseInt(a.replace(/%/,""))/100*("h"===b?c[0]:c[1]):parseInt(a.replace(/px/,"")):null},update:function(a,b){var c=this;return c.d.data?(c.d.origHeight=c.getVal(a,"h"),c.d.origWidth=c.getVal(b,"w"),c.d.data.hide(),a&&c.d.container.css("height",a),b&&c.d.container.css("width",b),c.setContainerDimensions(),c.d.data.show(),c.o.focus&&c.focus(),c.unbindEvents(),void c.bindEvents()):!1},setContainerDimensions:function(){var a=this,b=e.ie6||e.ie7,c=(a.o.position,this.dTemp,this.wTemp),d=a.d.origHeight?a.d.origHeight:e.opera?a.d.container.height():a.getVal(b?a.d.container[0].currentStyle.height:a.d.container.css("height"),"h"),f=a.d.origWidth?a.d.origWidth:e.opera?a.d.container.width():a.getVal(b?a.d.container[0].currentStyle.width:a.d.container.css("width"),"w"),g=a.d.data.outerHeight(!0),h=a.d.data.outerWidth(!0);a.d.origHeight=a.d.origHeight||d,a.d.origWidth=a.d.origWidth||f;var i=a.o.maxHeight?a.getVal(a.o.maxHeight,"h"):null,j=a.o.maxWidth?a.getVal(a.o.maxWidth,"w"):null,k=i&&i<c[0]?i:c[0],l=j&&j<c[1]?j:c[1],m=a.o.minHeight?a.getVal(a.o.minHeight,"h"):"auto";d=d?a.o.autoResize&&d>k?k:m>d?m:d:g?g>k?k:a.o.minHeight&&"auto"!==m&&m>g?m:g:m;var n=a.o.minWidth?a.getVal(a.o.minWidth,"w"):"auto";f=f?a.o.autoResize&&f>l?l:n>f?n:f:h?h>l?l:a.o.minWidth&&"auto"!==n&&n>h?n:h:n,a.d.container.css({height:d,width:f}),a.d.wrap.css({overflow:g>d||h>f?"auto":"visible"}),a.o.autoPosition&&a.setPosition()},setPosition:function(){var a,b,c=(this.dTemp,this.wTemp),e=this,f=c[0]/2-e.d.container.outerHeight(!0)/2,g=c[1]/2-e.d.container.outerWidth(!0)/2,h="fixed"!==e.d.container.css("position")?d.scrollTop():0;e.o.position&&"[object Array]"===Object.prototype.toString.call(e.o.position)?(a=h+(e.o.position[0]||f),b=e.o.position[1]||g):(a=h+f,b=g),e.d.container.css({left:b,top:a})},watchTab:function(a){var b=this;if($(a.target).parents(".simplemodal-container").length>0){if(b.inputs=$(":input:enabled:visible:first, :input:enabled:visible:last",b.d.data[0]),!a.shiftKey&&a.target===b.inputs[b.inputs.length-1]||a.shiftKey&&a.target===b.inputs[0]||0===b.inputs.length){a.preventDefault();var c=a.shiftKey?"last":"first";b.focus(c)}}else a.preventDefault(),b.focus()},open:function(){var a=this;a.d.iframe&&a.d.iframe.show(),$.isFunction(a.o.onOpen)?a.o.onOpen.apply(a,[a.d]):(a.d.overlay.show(),a.d.container.show(),a.d.data.show()),a.o.focus&&a.focus(),a.bindEvents()},close:function(){var a=this;return a.d.data?(a.unbindEvents(),void($.isFunction(a.o.onClose)&&!a.occb?(a.occb=!0,a.o.onClose.apply(a,[a.d])):setTimeout(function(){if(a.d.placeholder){var b=$("#simplemodal-placeholder");a.o.persist?b.replaceWith(a.d.data.removeClass("simplemodal-data").css("display",a.display)):(a.d.data.hide().remove(),b.replaceWith(a.d.orig))}else a.d.data.hide().remove();a.d.container.hide().remove(),a.d.overlay.hide(),a.d.iframe&&a.d.iframe.hide().remove(),a.d.overlay.remove(),a.d={}},0))):!1}})}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define("moment",b):a.moment=b()}(this,function(){function a(){return Dd.apply(null,arguments)}function b(a){Dd=a}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return zb(a,b,c,d,!0).utc()}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function j(a){return null==a._pf&&(a._pf=i()),a._pf}function k(a){if(null==a._isValid){var b=j(a);a._isValid=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(0/0);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=j(b)),"undefined"!=typeof b._locale&&(a._locale=b._locale),Fd.length>0)for(c in Fd)d=Fd[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function n(b){m(this,b),this._d=new Date(+b._d),Gd===!1&&(Gd=!0,a.updateOffset(this),Gd=!1)}function o(a){return a instanceof n||null!=a&&null!=a._isAMomentObject}function p(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function q(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&p(a[d])!==p(b[d]))&&g++;return g+f}function r(){}function s(a){return a?a.toLowerCase().replace("_","-"):a}function t(a){for(var b,c,d,e,f=0;f<a.length;){for(e=s(a[f]).split("-"),b=e.length,c=s(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=u(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&q(e,c,!0)>=b-1)break;b--}f++}return null}function u(a){var b=null;if(!Hd[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Ed._abbr,require("./locale/"+a),v(b)}catch(c){}return Hd[a]}function v(a,b){var c;return a&&(c="undefined"==typeof b?x(a):w(a,b),c&&(Ed=c)),Ed._abbr}function w(a,b){return null!==b?(b.abbr=a,Hd[a]||(Hd[a]=new r),Hd[a].set(b),v(a),Hd[a]):(delete Hd[a],null)}function x(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Ed;if(!c(a)){if(b=u(a))return b;a=[a]}return t(a)}function y(a,b){var c=a.toLowerCase();Id[c]=Id[c+"s"]=Id[b]=a}function z(a){return"string"==typeof a?Id[a]||Id[a.toLowerCase()]:void 0}function A(a){var b,c,d={};for(c in a)f(a,c)&&(b=z(c),b&&(d[b]=a[c]));return d}function B(b,c){return function(d){return null!=d?(D(this,b,d),a.updateOffset(this,c),this):C(this,b)}}function C(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function D(a,b,c){return a._d["set"+(a._isUTC?"UTC":"")+b](c)}function E(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=z(a),"function"==typeof this[a])return this[a](b);return this}function F(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function G(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Md[a]=e),b&&(Md[b[0]]=function(){return F(e.apply(this,arguments),b[1],b[2])}),c&&(Md[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function H(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function I(a){var b,c,d=a.match(Jd);for(b=0,c=d.length;c>b;b++)d[b]=Md[d[b]]?Md[d[b]]:H(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function J(a,b){return a.isValid()?(b=K(b,a.localeData()),Ld[b]||(Ld[b]=I(b)),Ld[b](a)):a.localeData().invalidDate()}function K(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Kd.lastIndex=0;d>=0&&Kd.test(a);)a=a.replace(Kd,c),Kd.lastIndex=0,d-=1;return a}function L(a,b,c){_d[a]="function"==typeof b?b:function(a){return a&&c?c:b}}function M(a,b){return f(_d,a)?_d[a](b._strict,b._locale):new RegExp(N(a))}function N(a){return a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function O(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=p(a)}),c=0;c<a.length;c++)ae[a[c]]=d}function P(a,b){O(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function Q(a,b,c){null!=b&&f(ae,a)&&ae[a](b,c._a,c,a)}function R(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function S(a){return this._months[a.month()]}function T(a){return this._monthsShort[a.month()]}function U(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function V(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),R(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function W(b){return null!=b?(V(this,b),a.updateOffset(this,!0),this):C(this,"Month")}function X(){return R(this.year(),this.month())}function Y(a){var b,c=a._a;return c&&-2===j(a).overflow&&(b=c[ce]<0||c[ce]>11?ce:c[de]<1||c[de]>R(c[be],c[ce])?de:c[ee]<0||c[ee]>24||24===c[ee]&&(0!==c[fe]||0!==c[ge]||0!==c[he])?ee:c[fe]<0||c[fe]>59?fe:c[ge]<0||c[ge]>59?ge:c[he]<0||c[he]>999?he:-1,j(a)._overflowDayOfYear&&(be>b||b>de)&&(b=de),j(a).overflow=b),a}function Z(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function $(a,b){var c=!0,d=a+"\n"+(new Error).stack;return g(function(){return c&&(Z(d),c=!1),b.apply(this,arguments)},b)}function _(a,b){ke[a]||(Z(b),ke[a]=!0)}function ab(a){var b,c,d=a._i,e=le.exec(d);if(e){for(j(a).iso=!0,b=0,c=me.length;c>b;b++)if(me[b][1].exec(d)){a._f=me[b][0]+(e[6]||" ");break}for(b=0,c=ne.length;c>b;b++)if(ne[b][1].exec(d)){a._f+=ne[b][0];break}d.match(Yd)&&(a._f+="Z"),tb(a)}else a._isValid=!1}function bb(b){var c=oe.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(ab(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function cb(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function db(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function eb(a){return fb(a)?366:365}function fb(a){return a%4===0&&a%100!==0||a%400===0}function gb(){return fb(this.year())}function hb(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=Ab(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ib(a){return hb(a,this._week.dow,this._week.doy).week}function jb(){return this._week.dow}function kb(){return this._week.doy}function lb(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function mb(a){var b=hb(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function nb(a,b,c,d,e){var f,g,h=db(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:eb(a-1)+g}}function ob(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function pb(a,b,c){return null!=a?a:null!=b?b:c}function qb(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function rb(a){var b,c,d,e,f=[];if(!a._d){for(d=qb(a),a._w&&null==a._a[de]&&null==a._a[ce]&&sb(a),a._dayOfYear&&(e=pb(a._a[be],d[be]),a._dayOfYear>eb(e)&&(j(a)._overflowDayOfYear=!0),c=db(e,0,a._dayOfYear),a._a[ce]=c.getUTCMonth(),a._a[de]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[ee]&&0===a._a[fe]&&0===a._a[ge]&&0===a._a[he]&&(a._nextDay=!0,a._a[ee]=0),a._d=(a._useUTC?db:cb).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[ee]=24)}}function sb(a){var b,c,d,e,f,g,h;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=pb(b.GG,a._a[be],hb(Ab(),1,4).year),d=pb(b.W,1),e=pb(b.E,1)):(f=a._locale._week.dow,g=a._locale._week.doy,c=pb(b.gg,a._a[be],hb(Ab(),f,g).year),d=pb(b.w,1),null!=b.d?(e=b.d,f>e&&++d):e=null!=b.e?b.e+f:f),h=nb(c,d,e,g,f),a._a[be]=h.year,a._dayOfYear=h.dayOfYear}function tb(b){if(b._f===a.ISO_8601)return void ab(b);b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=K(b._f,b._locale).match(Jd)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(M(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),Md[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),Q(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b).charsLeftOver=i-k,h.length>0&&j(b).unusedInput.push(h),j(b).bigHour===!0&&b._a[ee]<=12&&b._a[ee]>0&&(j(b).bigHour=void 0),b._a[ee]=ub(b._locale,b._a[ee],b._meridiem),rb(b),Y(b)}function ub(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function vb(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,void(a._d=new Date(0/0));for(e=0;e<a._f.length;e++)f=0,b=m({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],tb(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function wb(a){if(!a._d){var b=A(a._i);a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],rb(a)}}function xb(a){var b,e=a._i,f=a._f;return a._locale=a._locale||x(a._l),null===e||void 0===f&&""===e?l({nullInput:!0}):("string"==typeof e&&(a._i=e=a._locale.preparse(e)),o(e)?new n(Y(e)):(c(f)?vb(a):f?tb(a):d(e)?a._d=e:yb(a),b=new n(Y(a)),b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b))}function yb(b){var f=b._i;void 0===f?b._d=new Date:d(f)?b._d=new Date(+f):"string"==typeof f?bb(b):c(f)?(b._a=e(f.slice(0),function(a){return parseInt(a,10)}),rb(b)):"object"==typeof f?wb(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function zb(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,xb(f)}function Ab(a,b,c,d){return zb(a,b,c,d,!1)}function Bb(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Ab();for(d=b[0],e=1;e<b.length;++e)b[e][a](d)&&(d=b[e]);return d}function Cb(){var a=[].slice.call(arguments,0);return Bb("isBefore",a)}function Db(){var a=[].slice.call(arguments,0);return Bb("isAfter",a)}function Eb(a){var b=A(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=x(),this._bubble()}function Fb(a){return a instanceof Eb}function Gb(a,b){G(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+F(~~(a/60),2)+b+F(~~a%60,2)})}function Hb(a){var b=(a||"").match(Yd)||[],c=b[b.length-1]||[],d=(c+"").match(te)||["-",0,0],e=+(60*d[1])+p(d[2]);return"+"===d[0]?e:-e}function Ib(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(o(b)||d(b)?+b:+Ab(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Ab(b).local()}function Jb(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Kb(b,c){var d,e=this._offset||0;return null!=b?("string"==typeof b&&(b=Hb(b)),Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Jb(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?$b(this,Vb(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Jb(this)}function Lb(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Mb(a){return this.utcOffset(0,a)}function Nb(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Jb(this),"m")),this}function Ob(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Hb(this._i)),this}function Pb(a){return a=a?Ab(a).utcOffset():0,(this.utcOffset()-a)%60===0}function Qb(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Rb(){if(this._a){var a=this._isUTC?h(this._a):Ab(this._a);return this.isValid()&&q(this._a,a.toArray())>0}return!1}function Sb(){return!this._isUTC}function Tb(){return this._isUTC}function Ub(){return this._isUTC&&0===this._offset}function Vb(a,b){var c,d,e,g=a,h=null;return Fb(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=ue.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:p(h[de])*c,h:p(h[ee])*c,m:p(h[fe])*c,s:p(h[ge])*c,ms:p(h[he])*c}):(h=ve.exec(a))?(c="-"===h[1]?-1:1,g={y:Wb(h[2],c),M:Wb(h[3],c),d:Wb(h[4],c),h:Wb(h[5],c),m:Wb(h[6],c),s:Wb(h[7],c),w:Wb(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=Yb(Ab(g.from),Ab(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new Eb(g),Fb(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function Wb(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function Xb(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function Yb(a,b){var c;return b=Ib(b,a),a.isBefore(b)?c=Xb(a,b):(c=Xb(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function Zb(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(_(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Vb(c,d),$b(this,e,a),this}}function $b(b,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;e=null==e?!0:e,f&&b._d.setTime(+b._d+f*d),g&&D(b,"Date",C(b,"Date")+g*d),h&&V(b,C(b,"Month")+h*d),e&&a.updateOffset(b,g||h)}function _b(a){var b=a||Ab(),c=Ib(b,this).startOf("day"),d=this.diff(c,"days",!0),e=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this,Ab(b)))}function ac(){return new n(this)}function bc(a,b){var c;return b=z("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Ab(a),+this>+a):(c=o(a)?+a:+Ab(a),c<+this.clone().startOf(b))}function cc(a,b){var c;return b=z("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Ab(a),+a>+this):(c=o(a)?+a:+Ab(a),+this.clone().endOf(b)<c)}function dc(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function ec(a,b){var c;return b=z(b||"millisecond"),"millisecond"===b?(a=o(a)?a:Ab(a),+this===+a):(c=+Ab(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))}function fc(a){return 0>a?Math.ceil(a):Math.floor(a)}function gc(a,b,c){var d,e,f=Ib(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=z(b),"year"===b||"month"===b||"quarter"===b?(e=hc(this,f),"quarter"===b?e/=3:"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:fc(e)}function hc(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function ic(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function jc(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():J(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):J(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function kc(b){var c=J(this,b||a.defaultFormat);return this.localeData().postformat(c)}function lc(a,b){return this.isValid()?Vb({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function mc(a){return this.from(Ab(),a)}function nc(a,b){return this.isValid()?Vb({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function oc(a){return this.to(Ab(),a)}function pc(a){var b;return void 0===a?this._locale._abbr:(b=x(a),null!=b&&(this._locale=b),this)}function qc(){return this._locale}function rc(a){switch(a=z(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function sc(a){return a=z(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function tc(){return+this._d-6e4*(this._offset||0)}function uc(){return Math.floor(+this/1e3)}function vc(){return this._offset?new Date(+this):this._d}function wc(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function xc(){return k(this)}function yc(){return g({},j(this))}function zc(){return j(this).overflow}function Ac(a,b){G(0,[a,a.length],0,b)}function Bc(a,b,c){return hb(Ab([a,11,31+b-c]),b,c).week}function Cc(a){var b=hb(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")}function Dc(a){var b=hb(this,1,4).year;return null==a?b:this.add(a-b,"y")}function Ec(){return Bc(this.year(),1,4)}function Fc(){var a=this.localeData()._week;return Bc(this.year(),a.dow,a.doy)}function Gc(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Hc(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function Ic(a){return this._weekdays[a.day()]}function Jc(a){return this._weekdaysShort[a.day()]}function Kc(a){return this._weekdaysMin[a.day()]}function Lc(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=Ab([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b}function Mc(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Hc(a,this.localeData()),this.add(a-b,"d")):b}function Nc(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Oc(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)}function Pc(a,b){G(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Qc(a,b){return b._meridiemParse}function Rc(a){return"p"===(a+"").toLowerCase().charAt(0)}function Sc(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Tc(a){G(0,[a,3],0,"millisecond")}function Uc(){return this._isUTC?"UTC":""}function Vc(){return this._isUTC?"Coordinated Universal Time":""}function Wc(a){return Ab(1e3*a)}function Xc(){return Ab.apply(null,arguments).parseZone()}function Yc(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.call(b,c):d}function Zc(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b}function $c(){return this._invalidDate}function _c(a){return this._ordinal.replace("%d",a)}function ad(a){return a}function bd(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)}function cd(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)}function dd(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function ed(a,b,c,d){var e=x(),f=h().set(d,b);return e[c](f,a)}function fd(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return ed(a,b,c,e);var f,g=[];for(f=0;d>f;f++)g[f]=ed(a,f,c,e);return g}function gd(a,b){return fd(a,b,"months",12,"month")}function hd(a,b){return fd(a,b,"monthsShort",12,"month")}function id(a,b){return fd(a,b,"weekdays",7,"day")}function jd(a,b){return fd(a,b,"weekdaysShort",7,"day")}function kd(a,b){return fd(a,b,"weekdaysMin",7,"day")}function ld(){var a=this._data;return this._milliseconds=Re(this._milliseconds),this._days=Re(this._days),this._months=Re(this._months),a.milliseconds=Re(a.milliseconds),a.seconds=Re(a.seconds),a.minutes=Re(a.minutes),a.hours=Re(a.hours),a.months=Re(a.months),a.years=Re(a.years),this}function md(a,b,c,d){var e=Vb(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function nd(a,b){return md(this,a,b,1)}function od(a,b){return md(this,a,b,-1)}function pd(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;return g.milliseconds=d%1e3,a=fc(d/1e3),g.seconds=a%60,b=fc(a/60),g.minutes=b%60,c=fc(b/60),g.hours=c%24,e+=fc(c/24),h=fc(qd(e)),e-=fc(rd(h)),f+=fc(e/30),e%=30,h+=fc(f/12),f%=12,g.days=e,g.months=f,g.years=h,this}function qd(a){return 400*a/146097}function rd(a){return 146097*a/400}function sd(a){var b,c,d=this._milliseconds;if(a=z(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+12*qd(b),"month"===a?c:c/12;switch(b=this._days+Math.round(rd(this._months/12)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function td(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*p(this._months/12)}function ud(a){return function(){return this.as(a)}}function vd(a){return a=z(a),this[a+"s"]()}function wd(a){return function(){return this._data[a]}}function xd(){return fc(this.days()/7)}function yd(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function zd(a,b,c){var d=Vb(a).abs(),e=ff(d.as("s")),f=ff(d.as("m")),g=ff(d.as("h")),h=ff(d.as("d")),i=ff(d.as("M")),j=ff(d.as("y")),k=e<gf.s&&["s",e]||1===f&&["m"]||f<gf.m&&["mm",f]||1===g&&["h"]||g<gf.h&&["hh",g]||1===h&&["d"]||h<gf.d&&["dd",h]||1===i&&["M"]||i<gf.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,yd.apply(null,k)}function Ad(a,b){return void 0===gf[a]?!1:void 0===b?gf[a]:(gf[a]=b,!0)}function Bd(a){var b=this.localeData(),c=zd(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Cd(){var a=hf(this.years()),b=hf(this.months()),c=hf(this.days()),d=hf(this.hours()),e=hf(this.minutes()),f=hf(this.seconds()+this.milliseconds()/1e3),g=this.asSeconds();return g?(0>g?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}var Dd,Ed,Fd=a.momentProperties=[],Gd=!1,Hd={},Id={},Jd=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Kd=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ld={},Md={},Nd=/\d/,Od=/\d\d/,Pd=/\d{3}/,Qd=/\d{4}/,Rd=/[+-]?\d{6}/,Sd=/\d\d?/,Td=/\d{1,3}/,Ud=/\d{1,4}/,Vd=/[+-]?\d{1,6}/,Wd=/\d+/,Xd=/[+-]?\d+/,Yd=/Z|[+-]\d\d:?\d\d/gi,Zd=/[+-]?\d+(\.\d{1,3})?/,$d=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,_d={},ae={},be=0,ce=1,de=2,ee=3,fe=4,ge=5,he=6;G("M",["MM",2],"Mo",function(){return this.month()+1}),G("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),G("MMMM",0,0,function(a){return this.localeData().months(this,a)}),y("month","M"),L("M",Sd),L("MM",Sd,Od),L("MMM",$d),L("MMMM",$d),O(["M","MM"],function(a,b){b[ce]=p(a)-1}),O(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[ce]=e:j(c).invalidMonth=a});var ie="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),je="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ke={};a.suppressDeprecationWarnings=!1;var le=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,me=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ne=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],oe=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=$("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),G(0,["YY",2],0,function(){return this.year()%100}),G(0,["YYYY",4],0,"year"),G(0,["YYYYY",5],0,"year"),G(0,["YYYYYY",6,!0],0,"year"),y("year","y"),L("Y",Xd),L("YY",Sd,Od),L("YYYY",Ud,Qd),L("YYYYY",Vd,Rd),L("YYYYYY",Vd,Rd),O(["YYYY","YYYYY","YYYYYY"],be),O("YY",function(b,c){c[be]=a.parseTwoDigitYear(b)
}),a.parseTwoDigitYear=function(a){return p(a)+(p(a)>68?1900:2e3)};var pe=B("FullYear",!1);G("w",["ww",2],"wo","week"),G("W",["WW",2],"Wo","isoWeek"),y("week","w"),y("isoWeek","W"),L("w",Sd),L("ww",Sd,Od),L("W",Sd),L("WW",Sd,Od),P(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=p(a)});var qe={dow:0,doy:6};G("DDD",["DDDD",3],"DDDo","dayOfYear"),y("dayOfYear","DDD"),L("DDD",Td),L("DDDD",Pd),O(["DDD","DDDD"],function(a,b,c){c._dayOfYear=p(a)}),a.ISO_8601=function(){};var re=$("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Ab.apply(null,arguments);return this>a?this:a}),se=$("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Ab.apply(null,arguments);return a>this?this:a});Gb("Z",":"),Gb("ZZ",""),L("Z",Yd),L("ZZ",Yd),O(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Hb(a)});var te=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var ue=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ve=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Vb.fn=Eb.prototype;var we=Zb(1,"add"),xe=Zb(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var ye=$("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});G(0,["gg",2],0,function(){return this.weekYear()%100}),G(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ac("gggg","weekYear"),Ac("ggggg","weekYear"),Ac("GGGG","isoWeekYear"),Ac("GGGGG","isoWeekYear"),y("weekYear","gg"),y("isoWeekYear","GG"),L("G",Xd),L("g",Xd),L("GG",Sd,Od),L("gg",Sd,Od),L("GGGG",Ud,Qd),L("gggg",Ud,Qd),L("GGGGG",Vd,Rd),L("ggggg",Vd,Rd),P(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=p(a)}),P(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),G("Q",0,0,"quarter"),y("quarter","Q"),L("Q",Nd),O("Q",function(a,b){b[ce]=3*(p(a)-1)}),G("D",["DD",2],"Do","date"),y("date","D"),L("D",Sd),L("DD",Sd,Od),L("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),O(["D","DD"],de),O("Do",function(a,b){b[de]=p(a.match(Sd)[0],10)});var ze=B("Date",!0);G("d",0,"do","day"),G("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),G("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),G("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),G("e",0,0,"weekday"),G("E",0,0,"isoWeekday"),y("day","d"),y("weekday","e"),y("isoWeekday","E"),L("d",Sd),L("e",Sd),L("E",Sd),L("dd",$d),L("ddd",$d),L("dddd",$d),P(["dd","ddd","dddd"],function(a,b,c){var d=c._locale.weekdaysParse(a);null!=d?b.d=d:j(c).invalidWeekday=a}),P(["d","e","E"],function(a,b,c,d){b[d]=p(a)});var Ae="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Be="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ce="Su_Mo_Tu_We_Th_Fr_Sa".split("_");G("H",["HH",2],0,"hour"),G("h",["hh",2],0,function(){return this.hours()%12||12}),Pc("a",!0),Pc("A",!1),y("hour","h"),L("a",Qc),L("A",Qc),L("H",Sd),L("h",Sd),L("HH",Sd,Od),L("hh",Sd,Od),O(["H","HH"],ee),O(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),O(["h","hh"],function(a,b,c){b[ee]=p(a),j(c).bigHour=!0});var De=/[ap]\.?m?\.?/i,Ee=B("Hours",!0);G("m",["mm",2],0,"minute"),y("minute","m"),L("m",Sd),L("mm",Sd,Od),O(["m","mm"],fe);var Fe=B("Minutes",!1);G("s",["ss",2],0,"second"),y("second","s"),L("s",Sd),L("ss",Sd,Od),O(["s","ss"],ge);var Ge=B("Seconds",!1);G("S",0,0,function(){return~~(this.millisecond()/100)}),G(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Tc("SSS"),Tc("SSSS"),y("millisecond","ms"),L("S",Td,Nd),L("SS",Td,Od),L("SSS",Td,Pd),L("SSSS",Wd),O(["S","SS","SSS","SSSS"],function(a,b){b[he]=p(1e3*("0."+a))});var He=B("Milliseconds",!1);G("z",0,0,"zoneAbbr"),G("zz",0,0,"zoneName");var Ie=n.prototype;Ie.add=we,Ie.calendar=_b,Ie.clone=ac,Ie.diff=gc,Ie.endOf=sc,Ie.format=kc,Ie.from=lc,Ie.fromNow=mc,Ie.to=nc,Ie.toNow=oc,Ie.get=E,Ie.invalidAt=zc,Ie.isAfter=bc,Ie.isBefore=cc,Ie.isBetween=dc,Ie.isSame=ec,Ie.isValid=xc,Ie.lang=ye,Ie.locale=pc,Ie.localeData=qc,Ie.max=se,Ie.min=re,Ie.parsingFlags=yc,Ie.set=E,Ie.startOf=rc,Ie.subtract=xe,Ie.toArray=wc,Ie.toDate=vc,Ie.toISOString=jc,Ie.toJSON=jc,Ie.toString=ic,Ie.unix=uc,Ie.valueOf=tc,Ie.year=pe,Ie.isLeapYear=gb,Ie.weekYear=Cc,Ie.isoWeekYear=Dc,Ie.quarter=Ie.quarters=Gc,Ie.month=W,Ie.daysInMonth=X,Ie.week=Ie.weeks=lb,Ie.isoWeek=Ie.isoWeeks=mb,Ie.weeksInYear=Fc,Ie.isoWeeksInYear=Ec,Ie.date=ze,Ie.day=Ie.days=Mc,Ie.weekday=Nc,Ie.isoWeekday=Oc,Ie.dayOfYear=ob,Ie.hour=Ie.hours=Ee,Ie.minute=Ie.minutes=Fe,Ie.second=Ie.seconds=Ge,Ie.millisecond=Ie.milliseconds=He,Ie.utcOffset=Kb,Ie.utc=Mb,Ie.local=Nb,Ie.parseZone=Ob,Ie.hasAlignedHourOffset=Pb,Ie.isDST=Qb,Ie.isDSTShifted=Rb,Ie.isLocal=Sb,Ie.isUtcOffset=Tb,Ie.isUtc=Ub,Ie.isUTC=Ub,Ie.zoneAbbr=Uc,Ie.zoneName=Vc,Ie.dates=$("dates accessor is deprecated. Use date instead.",ze),Ie.months=$("months accessor is deprecated. Use month instead",W),Ie.years=$("years accessor is deprecated. Use year instead",pe),Ie.zone=$("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Lb);var Je=Ie,Ke={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Le={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},Me="Invalid date",Ne="%d",Oe=/\d{1,2}/,Pe={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Qe=r.prototype;Qe._calendar=Ke,Qe.calendar=Yc,Qe._longDateFormat=Le,Qe.longDateFormat=Zc,Qe._invalidDate=Me,Qe.invalidDate=$c,Qe._ordinal=Ne,Qe.ordinal=_c,Qe._ordinalParse=Oe,Qe.preparse=ad,Qe.postformat=ad,Qe._relativeTime=Pe,Qe.relativeTime=bd,Qe.pastFuture=cd,Qe.set=dd,Qe.months=S,Qe._months=ie,Qe.monthsShort=T,Qe._monthsShort=je,Qe.monthsParse=U,Qe.week=ib,Qe._week=qe,Qe.firstDayOfYear=kb,Qe.firstDayOfWeek=jb,Qe.weekdays=Ic,Qe._weekdays=Ae,Qe.weekdaysMin=Kc,Qe._weekdaysMin=Ce,Qe.weekdaysShort=Jc,Qe._weekdaysShort=Be,Qe.weekdaysParse=Lc,Qe.isPM=Rc,Qe._meridiemParse=De,Qe.meridiem=Sc,v("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===p(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=$("moment.lang is deprecated. Use moment.locale instead.",v),a.langData=$("moment.langData is deprecated. Use moment.localeData instead.",x);var Re=Math.abs,Se=ud("ms"),Te=ud("s"),Ue=ud("m"),Ve=ud("h"),We=ud("d"),Xe=ud("w"),Ye=ud("M"),Ze=ud("y"),$e=wd("milliseconds"),_e=wd("seconds"),af=wd("minutes"),bf=wd("hours"),cf=wd("days"),df=wd("months"),ef=wd("years"),ff=Math.round,gf={s:45,m:45,h:22,d:26,M:11},hf=Math.abs,jf=Eb.prototype;jf.abs=ld,jf.add=nd,jf.subtract=od,jf.as=sd,jf.asMilliseconds=Se,jf.asSeconds=Te,jf.asMinutes=Ue,jf.asHours=Ve,jf.asDays=We,jf.asWeeks=Xe,jf.asMonths=Ye,jf.asYears=Ze,jf.valueOf=td,jf._bubble=pd,jf.get=vd,jf.milliseconds=$e,jf.seconds=_e,jf.minutes=af,jf.hours=bf,jf.days=cf,jf.weeks=xd,jf.months=df,jf.years=ef,jf.humanize=Bd,jf.toISOString=Cd,jf.toString=Cd,jf.toJSON=Cd,jf.locale=pc,jf.localeData=qc,jf.toIsoString=$("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Cd),jf.lang=ye,G("X",0,0,"unix"),G("x",0,0,"valueOf"),L("x",Xd),L("X",Zd),O("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),O("x",function(a,b,c){c._d=new Date(p(a))}),a.version="2.10.3",b(Ab),a.fn=Je,a.min=Cb,a.max=Db,a.utc=h,a.unix=Wc,a.months=gd,a.isDate=d,a.locale=v,a.invalid=l,a.duration=Vb,a.isMoment=o,a.weekdays=id,a.parseZone=Xc,a.localeData=x,a.isDuration=Fb,a.monthsShort=hd,a.weekdaysMin=kd,a.defineLocale=w,a.weekdaysShort=jd,a.normalizeUnits=z,a.relativeTimeThreshold=Ad;var kf=a;return kf}),!function(a){var b=function(a,b){this.init("infotip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f,g,h,i;for(this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,this.hoverState="out",g=this.options.trigger.split(" "),i=g.length;i--;)h=g[i],"click"==h?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=h&&(e="hover"==h?"mouseenter":"focus",f="hover"==h?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b);var c=b.hashead&&"confirm"==b.type?'<div class="infotip-header"><button type="button" class="infotip-close" data-dismiss="infotip" aria-hidden="true">×</button><h4 class="infotip-title"></h4></div>':"",d=b.btnQuirk?'<button class="tu-btn tu-btn-small tu-btn-sure" data-ok="infotip">'+b.okbtn+'</button><button class="tu-btn tu-btn-small" data-dismiss="infotip">'+b.cancelbtn+"</button>":'<button class="tu-btn tu-btn-small" data-dismiss="infotip">'+b.cancelbtn+'</button><button class="tu-btn tu-btn-small tu-btn-sure" data-ok="infotip">'+b.okbtn+"</button>",e="confirm"==b.type&&b.hasfoot?'<div class="infotip-footer"><div class="infotip-footer-extend"></div>'+d+"</div>":"";return b.template='<div class="tu-infotip infotip-'+b.type+'" style="overflow:visible"><div class="infotip-arrow"><div class="infotip-arrow infotip-cover"></div></div>'+c+'<div class="infotip-inner"></div>'+e+"</div>","confirm"==b.type&&(b.html=!0),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),"attention"==b.type&&(b.autohide="number"==typeof b.autohide?b.autohide:!0),b},enter:function(b){var c,d=a.fn[this.type].defaults,e={};if(this._options&&a.each(this._options,function(a,b){d[a]!=b&&(e[a]=b)},this),c=a(b.currentTarget)[this.type](e).data(this.type),this.autoHideTimeout&&clearTimeout(this.autoHideTimeout),clearTimeout(c.timeout),"out"==this.hoverState){if(this.hoverState="in",this.tip().off(a.support.transition&&a.support.transition.end),!this.options.delay||!this.options.delay.show)return this.show();this.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)}},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);return this.autoHideTimeout&&clearTimeout(this.autoHideTimeout),this.timeout&&clearTimeout(this.timeout),c.options.delay&&c.options.delay.hide?void(this.timeout=setTimeout(function(){c.isTipHover||(c.hoverState="out"),"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},show:function(){function b(){var a=d.left+d.width/2-e/2,b=d.top+d.height/2-f/2;switch(k){case"left":a=d.left;break;case"right":a=d.left-e+d.width;break;case"top":b=d.top;break;case"bottom":b=d.top-f+d.height}switch(g){case"bottom":h={top:d.top+d.height+m,left:a};break;case"top":h={top:d.top-f-m,left:a};break;case"left":h={top:b,left:d.left-e-m};break;case"right":h={top:b,left:d.left+d.width+m}}return h}var c,d,e,f,g,h,i=a.Event("show"),j=this.options,k=j.align,l=this;if(this.hasContent()&&this.enabled){if(this.$element.trigger(i),i.isDefaultPrevented())return;c=this.tip(),this.bindTip(c),j.hashead&&this.setTitle(),this.setContent(),j.footextend&&c.find(".infotip-footer-extend").html(j.footextend),j.animation&&c.addClass("infotip-fade"),g="function"==typeof j.placement?j.placement.call(this,c[0],this.$element[0]):j.placement,c.detach().css({top:0,left:0,display:"block"}),j.container?c.appendTo(j.container):c.insertAfter(this.$element),/\bhover\b/.test(j.trigger)&&c.hover(function(){l.isTipHover=1},function(){l.isTipHover=0,l.hoverState="out",c.detach()}),this.setWidth(),d=this.getPosition(),e=c[0].offsetWidth,f=c[0].offsetHeight;var m="attention"==j.type?5:7;h=b(),this.applyPlacement(h,g),this.applyAlign(k,d),this.$element.trigger("shown")}this.autoHide()},autoHide:function(){var a=this.options,b=this;if(a.autohide){var c=5e3;"number"==typeof a.autohide&&(c=a.autohide),this.autoHideTimeout&&clearTimeout(this.autoHideTimeout),this.autoHideTimeout=setTimeout(function(){b.hide()},c)}},bindTip:function(a){var b=this,c=this.options;a.off("click."+this.type,"[data-dismiss=infotip]"),a.on("click."+this.type,"[data-dismiss=infotip]",function(){"manual"==c.trigger?b.hide():b.$element.trigger("click.infotip")}),a.off("click."+this.type,"[data-ok=infotip]"),a.on("click."+this.type,"[data-ok=infotip]",function(){var a=c.okHide;"function"==typeof a&&a.call(b.$element)})},applyPlacement:function(a,b){var c,d,e,f,g=this.tip(),h=g[0].offsetWidth,i=g[0].offsetHeight,j="top"==b?5:"bottom"==b?-5:0,k="left"==b?5:"right"==b?-5:0;g.addClass("infotip-"+b).addClass("infotip-in"),g.css({top:a.top+j,left:a.left+k}),g.animate("bottom"==b||"top"==b?{top:++a.top}:{left:++a.left}),c=g[0].offsetWidth,d=g[0].offsetHeight,"top"==b&&d!=i&&(a.top=a.top+i-d,f=!0),"bottom"==b||"top"==b?(e=0,a.left<0&&(e=-2*a.left,a.left=0,g.css({top:a.top,left:a.left}),g.animate({top:++a.top}),c=g[0].offsetWidth,d=g[0].offsetHeight),this.replaceArrow(e-h+c,c,"left")):this.replaceArrow(d-i,d,"top"),f&&g.stop().css({top:a.top,left:a.left})},applyAlign:function(a,b){var c=this.tip(),d=c[0].offsetWidth,e=c[0].offsetHeight,f={};switch(a){case"left":b.width<d&&(f={left:b.width/2});break;case"right":b.width<d&&(f={left:d-b.width/2});break;case"top":b.height<e&&(f={top:b.height/2});break;case"bottom":b.height<e&&(f={top:e-b.height/2})}"center"!=a&&c.find(".infotip-arrow").first().css(f)},replaceArrow:function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},setWidth:function(){var a=this.options,b=a.width,c=a.widthlimit,d=this.tip();if(b)d.width(b);else if(c===!0);else{var e;c===!1&&(e="none"),"string"==typeof a.widthlimit&&(e=c),d.css("max-width",e)}},setTitle:function(){var a=this.tip(),b=this.getTitle();b&&""!=b?a.find(".infotip-header .infotip-title").text(b):a.find(".infotip-header").hide()},setContent:function(){var a=this.tip(),b=this.getBody();a.find(".infotip-inner")[this.options.html?"html":"text"](b),a.removeClass("infotip-fade infotip-in infotip-top infotip-bottom infotip-left infotip-right")},hide:function(){function b(){e.timeout=setTimeout(function(){c.off(a.support.transition.end).detach()},500),c.one(a.support.transition.end,function(){clearTimeout(e.timeout),c.detach()})}var c=this.tip(),d=a.Event("hide"),e=this,f=this.options;return this.$element.trigger(d),d.isDefaultPrevented()?void 0:(c.removeClass("infotip-in"),"function"==typeof f.hide&&f.hide.call(e.$element),a.support.transition&&this.$tip.hasClass("infotip-fade")?b():c.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&("infotip"==a.data("toggle")?a.attr("data-original-title",a.attr("title")||"").attr("title",""):a.attr("data-original-title",""))},hasContent:function(){return this.getBody()},getPosition:function(){var b=this.$element[0],c=this.options,d=a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset());if(c.container){var e=("string"==typeof c.container?a(c.container):c.container).offset();d.left=d.left-e.left,d.top=d.top-e.top}return d},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},getBody:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-body")||("function"==typeof c.body?c.body.call(b[0]):c.body)},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".infotip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=b?a(b.currentTarget)[this.type](this._options).data(this.type):this;c.tip().hasClass("infotip-in")?c.hide():c.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var c=a.fn.infotip;a.fn.infotip=function(c){return this.each(function(){var d=a(this),e=d.data("infotip"),f="object"==typeof c&&c;if(e){var g=!0;for(var h in c)"undefined"!=typeof h&&(g=!1);"string"==typeof c||g||(e.options=e.getOptions(c),e.$tip=a(e.options.template))}else d.data("infotip",e=new b(this,f));"string"==typeof c&&e[c]()})},a.fn.infotip.Constructor=b,a.fn.infotip.defaults={animation:!0,type:"default",placement:"top",selector:!1,trigger:"hover focus",body:"it is default body",title:!1,footextend:!1,hashead:!1,hasfoot:!0,delay:{show:0,hide:0},html:!0,container:!1,widthlimit:!0,align:"center",okbtn:"确定",cancelbtn:"取消",btnQuirk:!1,autohide:!1},a.fn.infotip.noConflict=function(){return a.fn.infotip=c,this},a(function(){a('[data-toggle="infotip"]').infotip(),a(document).on("mousedown",function(b){var c=a(b.target),d=a(".tu-infotip"),e=d.prev(),f=c.parents(".tu-infotip");d.length&&!f.length&&c[0]!=e[0]&&c.parents("[data-original-title]")[0]!=e[0]&&e.trigger("click.infotip")})})}(window.jQuery),define("$.infotip",function(){}),define("richeditor",["talent","Uploader"],function(a,b){var c,d;if("undefined"==typeof e)var e={};var f={formatting:"标题",html:"HTML代码",video:"视频",image:"图片",table:"表格",link:"链接",link_insert:"插入链接",unlink:"取消链接",styles:"样式",paragraph:"段落",quote:"引用",code:"代码",header1:"一级标题",header2:"二级标题",header3:"三级标题",header4:"四级标题",format:"格式",bold:"粗体",italic:"斜体",superscript:"上标",strikethrough:"删除线",fontcolor:"字体颜色",backcolor:"背景颜色",removeformat:"取消格式",cleanstyles:"清除样式",lists:"目录",unorderedlist:"项目编号",orderedlist:"数字编号",outdent:"减少缩进",indent:"增加缩进",redo:"重做",undo:"撤销",cut:"剪切",cancel:"取消",insert:"插入",save:"保存",_delete:"删除",insert_table:"插入表格",insert_row_above:"在上方插入",insert_row_below:"在下方插入",insert_column_left:"在左侧插入",insert_column_right:"在右侧插入",delete_column:"删除整列",delete_row:"删除整行",delete_table:"删除表格",rows:"行",columns:"列",add_head:"添加标题",delete_head:"删除标题",title:"标题",image_view:"查看图片",image_position:"位置",none:"无",left:"左",right:"右",image_web_link:"图片网页链接",text:"文本",mailto:"邮箱",web:"网址",video_html_code:"视频嵌入代码",file:"文件",upload:"上传",download:"下载",choose:"选择",or_choose:"或选择",drop_file_here:"将文件拖拽至此区域",align_left:"左对齐",align_center:"居中",align_right:"右对齐",align_justify:"两端对齐",horizontalrule:"水平线",fullscreen:"全屏",deleted:"删除",none:"无",anchor:"锚点",alignment:"对齐方式",link_new_tab:"在新页面打开",subscript:"下标",fontfamily:"字体",fontsize:"字号",fontname1:"Arial",fontname2:"宋体",fontname3:"simsun",fontname4:"微软雅黑",fontsize1:"1",fontsize2:"2",fontsize3:"3",fontsize4:"4",fontsize5:"5",fontsize6:"6",fontsize7:"7",underline:"下划线"};!function(a){jQuery.fn.redactor=function(c){return this.each(function(){var d=a(this),e=d.data("redactor");e||d.data("redactor",e=new b(this,c))})};var b=function(b,c){this.$el=a(b),"undefined"!=typeof c&&"undefined"!=typeof c.lang&&"en"!==c.lang&&"undefined"!=typeof e[c.lang]&&(f=e[c.lang]),this.opts=a.extend({iframe:!1,css:!1,lang:"en",direction:"ltr",callback:!1,keyupCallback:!1,keydownCallback:!1,execCommandCallback:!1,plugins:!1,cleanup:!0,forbidden:!1,focus:!1,tabindex:!1,autoresize:!0,minHeight:!1,fixed:!1,fixedTop:0,fixedBox:!1,source:!0,shortcuts:!0,mobile:!0,air:!1,wym:!1,convertLinks:!0,convertDivs:!0,protocol:"http://",autosave:!1,autosaveCallback:!1,interval:60,imageGetJson:!1,imageUpload:!1,imageUploadCallback:!1,imageUploadErrorCallback:!1,fileUpload:!1,fileUploadCallback:!1,fileUploadErrorCallback:!1,uploadCrossDomain:!1,uploadFields:!1,observeImages:!0,overlay:!0,allowedTags:["form","input","button","select","option","datalist","output","textarea","fieldset","legend","section","header","hgroup","aside","footer","article","details","nav","progress","time","canvas","code","span","div","label","a","br","p","b","i","del","strike","u","img","video","source","track","audio","iframe","object","embed","param","blockquote","mark","cite","small","ul","ol","li","hr","dl","dt","dd","sup","sub","big","pre","code","figure","figcaption","strong","em","table","tr","td","th","tbody","thead","tfoot","h1","h2","h3","h4","h5","h6"],toolbarExternal:!1,buttonsCustom:{},buttonsAdd:[],buttons:["html","formatting","fontfamily","fontsize","bold","italic","underline","deleted","unorderedlist","orderedlist","outdent","indent","image","video","file","table","link","fontcolor","backcolor","alignment","horizontalrule","superscript","subscript"],airButtons:["formatting","|","bold","italic","deleted","|","unorderedlist","orderedlist","outdent","indent","|","fontcolor","backcolor"],formattingTags:["p","blockquote","pre","h1","h2","h3","h4"],activeButtons:["html","formatting","italic","deleted","bold","unorderedlist","underline","orderedlist","outdent","indent","image","alignment","horizontalrule","superscript","subscript","fontfamily","fontsize"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted",ul:"unorderedlist",ol:"orderedlist",u:"underline"},colors:["#ffffff","#000000","#eeece1","#1f497d","#4f81bd","#c0504d","#9bbb59","#8064a2","#4bacc6","#f79646","#ffff00","#f2f2f2","#7f7f7f","#ddd9c3","#c6d9f0","#dbe5f1","#f2dcdb","#ebf1dd","#e5e0ec","#dbeef3","#fdeada","#fff2ca","#d8d8d8","#595959","#c4bd97","#8db3e2","#b8cce4","#e5b9b7","#d7e3bc","#ccc1d9","#b7dde8","#fbd5b5","#ffe694","#bfbfbf","#3f3f3f","#938953","#548dd4","#95b3d7","#d99694","#c3d69b","#b2a2c7","#b7dde8","#fac08f","#f2c314","#a5a5a5","#262626","#494429","#17365d","#366092","#953734","#76923c","#5f497a","#92cddc","#e36c09","#c09100","#7f7f7f","#0c0c0c","#1d1b10","#0f243e","#244061","#632423","#4f6128","#3f3151","#31859b","#974806","#7f6000"],emptyHtml:"<p><br /></p>",buffer:!1,visual:!0,modal_file:String()+'<div class="redactor_modal_content"><form id="redactorUploadFileForm" method="post" action="" enctype="multipart/form-data"><label>Name (optional)</label><input type="text" id="redactor_filename" class="redactor_input" /><div style="margin-top: 7px;"><input type="file" id="redactor_file" name="file" /></div></form><br></div>',modal_image_edit:String()+'<div class="redactor_modal_content"><label>'+f.title+'</label><input id="redactor_file_alt" class="redactor_input" /><label>'+f.link+'</label><input id="redactor_file_link" class="redactor_input" /><label>'+f.image_position+'</label><select id="redactor_form_image_align"><option value="none">'+f.none+'</option><option value="left">'+f.left+'</option><option value="right">'+f.right+'</option></select></div><div class="redactor_modal_footer"><a href="javascript:void(null);" id="redactor_image_delete_btn" class="redactor_modal_btn">'+f._delete+'</a>&nbsp;&nbsp;&nbsp;<a href="javascript:void(null);" class="redactor_modal_btn redactor_btn_modal_close">'+f.cancel+'</a><input type="button" name="save" class="redactor_modal_btn" id="redactorSaveBtn" value="'+f.save+'" /></div>',modal_image:String()+'<div class="redactor_modal_content"><div class="redactor_tabs"><a href="javascript:void(null);" class="redactor_tabs_act">'+f.upload+'</a><a href="javascript:void(null);">'+f.choose+'</a><a href="javascript:void(null);">'+f.link+'</a></div><form id="redactorInsertImageForm" method="post" action="" enctype="multipart/form-data"><div id="redactor_tab1" class="redactor_tab"><input type="file" id="redactor_file" name="file" /></div><div id="redactor_tab2" class="redactor_tab" style="display: none;"><div class="redactor_image_box"></div></div></form><div id="redactor_tab3" class="redactor_tab" style="display: none;"><label>'+f.image_web_link+'</label><input type="text" name="redactor_file_link" id="redactor_file_link" class="redactor_input"  /></div></div><div class="redactor_modal_footer"><a href="javascript:void(null);" class="redactor_modal_btn redactor_btn_modal_close">'+f.cancel+'</a><input type="button" name="upload" class="redactor_modal_btn" id="redactor_upload_btn" value="'+f.insert+'" /></div>',modal_link:String()+'<div class="redactor_modal_content"><form id="redactorInsertLinkForm" method="post" action=""><div class="redactor_tabs"><a href="javascript:void(null);" class="redactor_tabs_act">URL</a><a href="javascript:void(null);">Email</a><a href="javascript:void(null);">'+f.anchor+'</a></div><input type="hidden" id="redactor_tab_selected" value="1" /><div class="redactor_tab" id="redactor_tab1"><label>URL</label><input type="text" id="redactor_link_url" class="redactor_input"  /><label>'+f.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_url_text" /><label><input type="checkbox" id="redactor_link_blank"> '+f.link_new_tab+'</label></div><div class="redactor_tab" id="redactor_tab2" style="display: none;"><label>Email</label><input type="text" id="redactor_link_mailto" class="redactor_input" /><label>'+f.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_mailto_text" /></div><div class="redactor_tab" id="redactor_tab3" style="display: none;"><label>'+f.anchor+'</label><input type="text" class="redactor_input" id="redactor_link_anchor"  /><label>'+f.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_anchor_text" /></div></form></div><div class="redactor_modal_footer"><a href="javascript:void(null);" class="redactor_modal_btn redactor_btn_modal_close">'+f.cancel+'</a><input type="button" class="redactor_modal_btn" id="redactor_insert_link_btn" value="'+f.insert+'" /></div>',modal_table:String()+'<div class="redactor_modal_content"><label>'+f.rows+'</label><input type="text" size="5" value="2" id="redactor_table_rows" /><label>'+f.columns+'</label><input type="text" size="5" value="3" id="redactor_table_columns" /></div><div class="redactor_modal_footer"><a href="javascript:void(null);" class="redactor_modal_btn redactor_btn_modal_close">'+f.cancel+'</a><input type="button" name="upload" class="redactor_modal_btn" id="redactor_insert_table_btn" value="'+f.insert+'" /></div>',modal_video:String()+'<div class="redactor_modal_content"><form id="redactorInsertVideoForm"><label>'+f.video_html_code+'</label><textarea id="redactor_insert_video_area" style="width: 99%; height: 160px;"></textarea></form></div><div class="redactor_modal_footer"><a href="javascript:void(null);" class="redactor_modal_btn redactor_btn_modal_close">'+f.cancel+'</a><input type="button" class="redactor_modal_btn" id="redactor_insert_video_btn" value="'+f.insert+'" /></div>',toolbar:{html:{title:f.html,func:"toggle"},formatting:{title:f.formatting,func:"show",dropdown:{p:{title:f.paragraph,exec:"formatblock"},blockquote:{title:f.quote,exec:"formatblock",className:"redactor_format_blockquote"},pre:{title:f.code,exec:"formatblock",className:"redactor_format_pre"},h1:{title:f.header1,exec:"formatblock",className:"redactor_format_h1"},h2:{title:f.header2,exec:"formatblock",className:"redactor_format_h2"},h3:{title:f.header3,exec:"formatblock",className:"redactor_format_h3"},h4:{title:f.header4,exec:"formatblock",className:"redactor_format_h4"}}},bold:{title:f.bold,exec:"bold"},italic:{title:f.italic,exec:"italic"},deleted:{title:f.deleted,exec:"strikethrough"},underline:{title:f.underline,exec:"underline"},unorderedlist:{title:"&bull; "+f.unorderedlist,exec:"insertunorderedlist"},orderedlist:{title:"1. "+f.orderedlist,exec:"insertorderedlist"},outdent:{title:"< "+f.outdent,exec:"outdent"},indent:{title:"> "+f.indent,exec:"indent"},image:{title:f.image,func:"showImage"},video:{title:f.video,func:"showVideo"},file:{title:f.file,func:"showFile"},table:{title:f.table,func:"show",dropdown:{insert_table:{title:f.insert_table,func:"showTable"},separator_drop1:{name:"separator"},insert_row_above:{title:f.insert_row_above,func:"insertRowAbove"},insert_row_below:{title:f.insert_row_below,func:"insertRowBelow"},insert_column_left:{title:f.insert_column_left,func:"insertColumnLeft"},insert_column_right:{title:f.insert_column_right,func:"insertColumnRight"},separator_drop2:{name:"separator"},add_head:{title:f.add_head,func:"addHead"},delete_head:{title:f.delete_head,func:"deleteHead"},separator_drop3:{name:"separator"},delete_column:{title:f.delete_column,func:"deleteColumn"},delete_row:{title:f.delete_row,func:"deleteRow"},delete_table:{title:f.delete_table,func:"deleteTable"}}},link:{title:f.link,func:"show",dropdown:{link:{title:f.link_insert,func:"showLink"},unlink:{title:f.unlink,exec:"unlink"}}},fontcolor:{title:f.fontcolor,func:"show"},backcolor:{title:f.backcolor,func:"show"},alignment:{title:f.alignment,func:"show",dropdown:{alignleft:{title:f.align_left,exec:"JustifyLeft"},aligncenter:{title:f.align_center,exec:"JustifyCenter"},alignright:{title:f.align_right,exec:"JustifyRight"},justify:{title:f.align_justify,exec:"JustifyFull"}}},alignleft:{exec:"JustifyLeft",title:f.align_left},aligncenter:{exec:"JustifyCenter",title:f.align_center},alignright:{exec:"JustifyRight",title:f.align_right},justify:{exec:"JustifyFull",title:f.align_justify},horizontalrule:{exec:"inserthorizontalrule",title:f.horizontalrule},superscript:{exec:"superscript",title:f.superscript},subscript:{exec:"subscript",title:f.subscript},fontfamily:{title:f.fontfamily,func:"show",dropdown:{fontname1:{title:f.fontname1,exec:"FontName",className:"fontArial"},fontname2:{title:f.fontname2,exec:"FontName",className:"fontSong"},fontname3:{title:f.fontname3,exec:"FontName",className:"fontSim"},fontname4:{title:f.fontname4,exec:"FontName",className:"fontWei"}}},fontsize:{title:f.fontsize,func:"show",dropdown:{fontsize1:{title:f.fontsize1,exec:"FontSize",className:"fontsize1"},fontsize2:{title:f.fontsize2,exec:"FontSize",className:"fontsize2"},fontsize3:{title:f.fontsize3,exec:"FontSize",className:"fontsize3"},fontsize4:{title:f.fontsize4,exec:"FontSize",className:"fontsize4"},fontsize5:{title:f.fontsize5,exec:"FontSize",className:"fontsize5"},fontsize6:{title:f.fontsize6,exec:"FontSize",className:"fontsize6"},fontsize7:{title:f.fontsize7,exec:"FontSize",className:"fontsize7"}}}}},c,this.$el.data()),this.dropdowns=[],this.init()};b.prototype={init:function(){function b(){if(this.enableAir(),this.buildToolbar(),"object"==typeof this.opts.plugins&&a.each(this.opts.plugins,a.proxy(function(b,c){"undefined"!=typeof RedactorPlugins[c]&&(a.extend(this,RedactorPlugins[c]),"undefined"!=typeof RedactorPlugins[c].init&&this.init())},this)),this.opts.activeButtons!==!1&&this.opts.toolbar!==!1){var b=a.proxy(function(){this.observeFormatting()},this);this.$editor.click(b).keyup(b)}var c=!1;if(this.browser("webkit")&&-1===navigator.userAgent.indexOf("Chrome")){var d=this.browser("version").split(".");d[0]<536&&(c=!0)}if(this.isMobile(!0)===!1&&c===!1&&this.$editor.bind("paste",a.proxy(function(){if(this.opts.cleanup===!1)return!0;this.pasteRunning=!0,this.setBuffer(),this.saveScroll=this.opts.autoresize===!0?this.document.body.scrollTop:this.$editor.scrollTop();var b=this.extractContent();setTimeout(a.proxy(function(){var a=this.extractContent();this.$editor.append(b),this.restoreSelection();var c=this.getFragmentHtml(a);this.pasteCleanUp(c),this.pasteRunning=!1},this),1)},this)),this.keyup(),this.keydown(),this.opts.autosave!==!1&&this.autoSave(),setTimeout(a.proxy(function(){this.observeImages(),this.observeTables()},this),1),this.browser("mozilla")){this.$editor.click(a.proxy(function(){this.saveSelection()},this));try{this.document.execCommand("enableObjectResizing",!1,!1),this.document.execCommand("enableInlineTableEditing",!1,!1)}catch(e){}}this.opts.focus&&setTimeout(a.proxy(function(){this.$editor.focus()},this),1),this.opts.fixed&&(this.observeScroll(),a(document).scroll(a.proxy(this.observeScroll,this))),"function"==typeof this.opts.callback&&this.opts.callback(this),this.opts.toolbar!==!1&&this.$toolbar.find("a").attr("tabindex","-1")}if(this.height=this.$el.css("height"),this.width=this.$el.css("width"),d=this.document=document,c=this.window=window,this.opts.mobile===!1&&this.isMobile())return this.build(!0),!1;
if(this.opts.iframe&&(this.opts.autoresize=!1),this.opts.air)this.opts.buttons=this.opts.airButtons;else if(this.opts.toolbar!==!1){if(this.opts.source===!1){var e=this.opts.buttons.indexOf("html"),f=this.opts.buttons[e+1];this.opts.buttons.splice(e,1),"undefined"!=typeof f&&"|"===f&&this.opts.buttons.splice(e,1)}a.extend(this.opts.toolbar,this.opts.buttonsCustom),a.each(this.opts.buttonsAdd,a.proxy(function(a,b){this.opts.buttons.push(b)},this))}this.opts.toolbar!==!1&&a.each(this.opts.toolbar.formatting.dropdown,a.proxy(function(b){"-1"==a.inArray(b,this.opts.formattingTags)&&delete this.opts.toolbar.formatting.dropdown[b]},this)),this.build(!1,b)},shortcuts:function(a,b){a.preventDefault(),this.execCommand(b,!1)},keyup:function(){this.$editor.keyup(a.proxy(function(a){var b=a.keyCode||a.which;return this.browser("mozilla")&&!this.pasteRunning&&this.saveSelection(),this.browser("msie")&&this.saveSelection(),"function"==typeof this.opts.keyupCallback&&this.opts.keyupCallback(this,a),8===b||46===b?(this.observeImages(),this.formatEmpty(a)):(13!==b||a.shiftKey||a.ctrlKey||a.metaKey||(this.browser("webkit")&&this.formatNewLine(a),this.opts.convertLinks&&this.$editor.linkify()),void this.syncCode())},this))},keydown:function(){this.$editor.keydown(a.proxy(function(b){var c=b.keyCode||b.which,d=this.getParentNode(),e=this.getCurrentNode(),f=!1,g=b.ctrlKey||b.metaKey;if(!d&&!e||"PRE"!==a(d).get(0).tagName&&"PRE"!==a(e).get(0).tagName||(f=!0),"function"==typeof this.opts.keydownCallback&&this.opts.keydownCallback(this,b),g&&this.opts.shortcuts&&(90===c?this.opts.buffer!==!1?(b.preventDefault(),this.getBuffer()):b.shiftKey?this.shortcuts(b,"redo"):this.shortcuts(b,"undo"):77===c?this.shortcuts(b,"removeFormat"):66===c?this.shortcuts(b,"bold"):73===c?this.shortcuts(b,"italic"):74===c?this.shortcuts(b,"insertunorderedlist"):75===c?this.shortcuts(b,"insertorderedlist"):76===c?this.shortcuts(b,"superscript"):72===c&&this.shortcuts(b,"subscript")),g||90===c||(this.opts.buffer=!1),f===!0&&13===c){b.preventDefault();var h=a(e).parent().text();return this.insertNodeAtCaret(this.document.createTextNode("\r\n")),-1==h.search(/\s$/)&&this.insertNodeAtCaret(this.document.createTextNode("\r\n")),this.syncCode(),!1}if(this.opts.shortcuts&&!b.shiftKey&&9===c){if(f!==!1)return b.preventDefault(),this.insertNodeAtCaret(this.document.createTextNode("	")),this.syncCode(),!1;this.shortcuts(b,"indent")}else this.opts.shortcuts&&b.shiftKey&&9===c&&this.shortcuts(b,"outdent");return this.browser("webkit")&&-1===navigator.userAgent.indexOf("Chrome")?this.safariShiftKeyEnter(b,c):void 0},this))},build:function(b,e){function f(){this.$editor=this.$content.contents().find("body").attr("contenteditable",!0).attr("dir",this.opts.direction),d=this.document=this.$editor[0].ownerDocument,c=this.window=this.document.defaultView||window,this.opts.css!==!1&&this.$content.contents().find("head").append('<link rel="stylesheet" href="'+this.opts.css+'" />'),this.$editor.html(i),e&&(e.call(this),e=null)}if(b!==!0){if(this.$box=a('<div class="redactor_box"></div>'),this.opts.air&&(this.air=a('<div class="redactor_air" style="display: none;"></div>')),this.$content=null,this.textareamode=!0,"TEXTAREA"===this.$el.get(0).tagName){if(this.opts.iframe){var g=this;this.$content=a('<iframe style="width: 100%;" frameborder="0"></iframe>').load(function(){f.call(g)})}else this.$content=this.$editor=a("<div></div>");var h=this.$el.get(0).className.split(/\s+/);a.each(h,a.proxy(function(a,b){this.$content.addClass("redactor_"+b)},this))}else this.textareamode=!1,this.$content=this.$editor=this.$el,this.$el=a('<textarea name="'+this.$editor.attr("id")+'"></textarea>').css("height",this.height);this.$editor&&this.$editor.addClass("redactor_editor").attr("contenteditable",!0).attr("dir",this.opts.direction),this.opts.tabindex!==!1&&this.$content.attr("tabindex",this.opts.tabindex),this.opts.minHeight!==!1&&this.$content.css("min-height",this.opts.minHeight+"px"),this.opts.wym===!0&&this.$content.addClass("redactor_editor_wym"),this.opts.autoresize===!1&&this.$content.css("height",this.height),this.$el.hide();var i="";this.textareamode?(i=this.$el.val(),i=this.savePreCode(i),this.$box.insertAfter(this.$el).append(this.$content).append(this.$el)):(i=this.$editor.html(),i=this.savePreCode(i),this.$box.insertAfter(this.$content).append(this.$el).append(this.$editor)),i=this.paragraphy(i),this.$editor&&this.$editor.html(i),this.textareamode===!1&&this.syncCode()}else if("TEXTAREA"!==this.$el.get(0).tagName){var i=this.$el.val(),j=a('<textarea name="'+this.$editor.attr("id")+'"></textarea>').css("height",this.height).val(i);this.$el.hide(),this.$el.after(j)}e&&this.$editor&&e.call(this)},enableAir:function(){return this.opts.air===!1?!1:(this.air.hide(),this.$editor.bind("textselect",a.proxy(function(a){this.showAir(a)},this)),void this.$editor.bind("textunselect",a.proxy(function(){this.air.hide()},this)))},showAir:function(b){a(".redactor_air").hide();var c=this.air.innerWidth(),d=b.clientX;a(this.document).width()<d+c&&(d-=c);var e=b.clientY+a(document).scrollTop()+14;this.opts.iframe===!0&&(e+=this.$box.position().top,d+=this.$box.position().left),this.air.css({left:d+"px",top:e+"px"}).show()},syncCode:function(){this.$el.val(this.$editor.html())},setCode:function(a){a=this.stripTags(a),this.$editor.html(a).focus(),this.syncCode()},getCode:function(){var a="";return a=this.opts.visual?this.$editor.html():this.$el.val(),this.stripTags(a)},insertHtml:function(a){this.$editor.focus(),this.pasteHtmlAtCaret(a),this.observeImages(),this.syncCode()},pasteHtmlAtCaret:function(a){var b,c;if(this.document.getSelection){if(b=this.window.getSelection(),b.getRangeAt&&b.rangeCount){c=b.getRangeAt(0),c.deleteContents();var d=this.document.createElement("div");d.innerHTML=a;for(var e,f,g=this.document.createDocumentFragment();e=d.firstChild;)f=g.appendChild(e);c.insertNode(g),f&&(c=c.cloneRange(),c.setStartAfter(f),c.collapse(!0),b.removeAllRanges(),b.addRange(c))}}else this.document.selection&&"Control"!=this.document.selection.type&&this.document.selection.createRange().pasteHTML(a)},destroy:function(){var b=this.getCode();this.textareamode?(this.$box.after(this.$el),this.$box.remove(),this.$el.height(this.height).val(b).show()):(this.$box.after(this.$editor),this.$box.remove(),this.$editor.removeClass("redactor_editor").removeClass("redactor_editor_wym").attr("contenteditable",!1).html(b).show()),this.opts.toolbarExternal&&a(this.opts.toolbarExternal).empty(),a(".redactor_air").remove();for(var c=0;c<this.dropdowns.length;c++)this.dropdowns[c].remove(),delete this.dropdowns[c];this.opts.autosave!==!1&&clearInterval(this.autosaveInterval)},observeFormatting:function(){var b=this.getCurrentNode();this.inactiveAllButtons(),a.each(this.opts.activeButtonsStates,a.proxy(function(c,d){0!=a(b).closest(c,this.$editor.get()[0]).length&&this.setBtnActive(d)},this));var c=a(b).closest(["p","div","h1","h2","h3","h4","h5","h6","blockquote","td"]);if("undefined"!=typeof c[0]&&"undefined"!=typeof c[0].elem&&0!=a(c[0].elem).size()){var d=a(c[0].elem).css("text-align");switch(d){case"right":this.setBtnActive("alignright");break;case"center":this.setBtnActive("aligncenter");break;case"justify":this.setBtnActive("justify");break;default:this.setBtnActive("alignleft")}}},observeImages:function(){return this.opts.observeImages===!1?!1:void this.$editor.find("img").each(a.proxy(function(b,c){this.browser("msie")&&a(c).attr("unselectable","on"),this.resizeImage(c)},this))},observeTables:function(){this.$editor.find("table").click(a.proxy(this.tableObserver,this))},observeScroll:function(){var b=a(this.document).scrollTop(),c=this.$box.offset().top,d=0;if(b>c){var e="100%";this.opts.fixedBox&&(d=this.$box.offset().left,e=this.$box.innerWidth()),this.fixed=!0,this.$toolbar.css({position:"fixed",width:e,zIndex:1005,top:this.opts.fixedTop+"px",left:d})}else this.fixed=!1,this.$toolbar.css({position:"relative",width:"auto",zIndex:1,top:0,left:d})},setBuffer:function(){this.saveSelection(),this.opts.buffer=this.$editor.html()},getBuffer:function(){return this.opts.buffer===!1?!1:(this.$editor.html(this.opts.buffer),this.browser("msie")||this.restoreSelection(),void(this.opts.buffer=!1))},execCommand:function(b,c){if(0==this.opts.visual)return this.$el.focus(),!1;try{var d;if("inserthtml"===b)this.browser("msie")?(this.$editor.focus(),this.document.selection.createRange().pasteHTML(c)):this.pasteHtmlAtCaret(c),this.observeImages();else if("unlink"===b)d=this.getParentNode(),"A"===a(d).get(0).tagName?a(d).replaceWith(a(d).text()):this.execRun(b,c);else if("JustifyLeft"===b||"JustifyCenter"===b||"JustifyRight"===b||"JustifyFull"===b){d=this.getCurrentNode();var e=a(d).get(0).tagName;if(this.opts.iframe===!1&&0==a(d).parents(".redactor_editor").size())return!1;var f=["P","DIV","H1","H2","H3","H4","H5","H6","BLOCKQUOTE","TD"];if(-1!=a.inArray(e,f)){var g=!1;"JustifyCenter"===b?g="center":"JustifyRight"===b?g="right":"JustifyFull"===b&&(g="justify"),g===!1?a(d).css("text-align",""):a(d).css("text-align",g)}else this.execRun(b,c)}else if("formatblock"===b&&"blockquote"===c)if(d=this.getCurrentNode(),"BLOCKQUOTE"===a(d).get(0).tagName)if(this.browser("msie")){var h=a("<p>"+a(d).html()+"</p>");a(d).replaceWith(h)}else this.execRun(b,"p");else if("P"===a(d).get(0).tagName){var i=a(d).parent();if("BLOCKQUOTE"===a(i).get(0).tagName){var h=a("<p>"+a(d).html()+"</p>");a(i).replaceWith(h),this.setSelection(h[0],0,h[0],0)}else if(this.browser("msie")){var h=a("<blockquote>"+a(d).html()+"</blockquote>");a(d).replaceWith(h)}else this.execRun(b,c)}else this.execRun(b,c);else if("formatblock"!==b||"pre"!==c&&"p"!==c)if("superscript"==b){var d=this.getCurrentNode();if("SUP"===a(d).get(0).tagName){var h=a(d).html();a(d).replaceWith(h)}else this.execRun(b,c)}else if("subscript"==b){var d=this.getCurrentNode();if("SUB"===a(d).get(0).tagName){var h=a(d).html();a(d).replaceWith(h)}else this.execRun(b,c)}else if("FontName"==b){var j={fontname1:"Arial",fontname2:"宋体",fontname3:"simsun",fontname4:"微软雅黑"};this.execRun(b,j[c])}else if("FontSize"==b){var k={fontsize1:"1",fontsize2:"2",fontsize3:"3",fontsize4:"4",fontsize5:"5",fontsize6:"6",fontsize7:"7"};this.execRun(b,k[c])}else"inserthorizontalrule"===b&&this.browser("msie")&&this.$editor.focus(),"formatblock"===b&&this.browser("mozilla")&&this.$editor.focus(),this.execRun(b,c);else d=this.getParentNode(),"PRE"===a(d).get(0).tagName?a(d).replaceWith("<p>"+this.encodeEntities(a(d).text())+"</p>"):this.execRun(b,c);"inserthorizontalrule"===b&&this.$editor.find("hr").removeAttr("id"),this.syncCode(),this.oldIE()&&this.$editor.focus(),"function"==typeof this.opts.execCommandCallback&&this.opts.execCommandCallback(this,b),this.opts.air&&this.air.hide()}catch(l){}},execRun:function(a,b){"formatblock"===a&&this.browser("msie")&&(b="<"+b+">"),this.document.execCommand(a,!1,b)},formatNewLine:function(){var b=this.getParentNode();if("DIV"===b.nodeName&&"redactor_editor"===b.className){var c=a(this.getCurrentNode());if("DIV"===c.get(0).tagName&&(""===c.html()||"<br>"===c.html())){var d=a("<p>").append(c.clone().get(0).childNodes);c.replaceWith(d),d.html("<br />"),this.setSelection(d[0],0,d[0],0)}}},safariShiftKeyEnter:function(b,c){return b.shiftKey&&13===c?(b.preventDefault(),this.insertNodeAtCaret(a("<span><br /></span>").get(0)),this.syncCode(),!1):!0},formatEmpty:function(b){var c=a.trim(this.$editor.html());this.browser("mozilla")&&(c=c.replace(/<br>/i,""));var d=c.replace(/<(?!img[\s\S]*)[\s\S]*?>/gm,"");if(""===c||""===d){b.preventDefault();var e=a(this.opts.emptyHtml).get(0);return this.$editor.html(e),this.setSelection(e,0,e,0),this.syncCode(),!1}this.syncCode()},paragraphy:function(b){if(b=a.trim(b),""===b||"<p></p>"===b)return this.opts.emptyHtml;this.opts.convertDivs&&(b=b.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p>$2</p>"));var c=function(a,b,c){return a.replace(new RegExp(b,"g"),c)},d=function(a,d){return c(b,a,d)},e="(table|thead|tfoot|caption|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|form|blockquote|address|math|style|script|object|input|param|p|h[1-6])";return b+="\n",d("<br />\\s*<br />","\n\n"),d("(<"+e+"[^>]*>)","\n$1"),d("(</"+e+">)","$1\n\n"),d("\r\n|\r","\n"),d("\n\n+","\n\n"),d("\n?((.|\n)+?)$","<p>$1</p>\n"),d("<p>\\s*?</p>",""),d("<p>(<div[^>]*>\\s*)","$1<p>"),d("<p>([^<]+)\\s*?(</(div|address|form)[^>]*>)","<p>$1</p>$2"),d("<p>\\s*(</?"+e+"[^>]*>)\\s*</p>","$1"),d("<p>(<li.+?)</p>","$1"),d("<p>\\s*(</?"+e+"[^>]*>)","$1"),d("(</?"+e+"[^>]*>)\\s*</p>","$1"),d("(</?"+e+"[^>]*>)\\s*<br />","$1"),d("<br />(\\s*</?(p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^>]*>)","$1"),-1!=b.indexOf("<pre")&&d("(<pre(.|\n)*?>)((.|\n)*?)</pre>",function(a,b,d,e){return c(b,"\\\\(['\"\\\\])","$1")+c(c(c(e,"<p>","\n"),"</p>|<br />",""),"\\\\(['\"\\\\])","$1")+"</pre>"}),d("\n</p>$","</p>")},stripTags:function(b){var c=this.opts.allowedTags,d=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return b.replace(d,function(b,d){return a.inArray(d.toLowerCase(),c)>"-1"?b:""})},savePreCode:function(b){var c=b.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);return null!==c&&a.each(c,a.proxy(function(a,c){var d=c.match(/<pre(.*?)>([\w\W]*?)<\/pre>/i);d[2]=this.encodeEntities(d[2]),b=b.replace(c,"<pre"+d[1]+">"+d[2]+"</pre>")},this)),b},encodeEntities:function(a){return a=String(a).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},cleanupPre:function(a){a=a.replace(/<br>/gi,"\n"),a=a.replace(/<\/p>/gi,"\n"),a=a.replace(/<\/div>/gi,"\n");var b=this.document.createElement("div");return b.innerHTML=a,b.textContent||b.innerText},pasteCleanUp:function(b){var c=this.getParentNode();return"PRE"===a(c).get(0).tagName?(b=this.cleanupPre(b),this.pasteCleanUpInsert(b),!0):(b=b.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,""),b=b.replace(/(&nbsp;){2,}/gi,"&nbsp;"),b=b.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2"),b=this.stripTags(b),b=b.replace(/<td><\/td>/gi,"[td]"),b=b.replace(/<td>&nbsp;<\/td>/gi,"[td]"),b=b.replace(/<td><br><\/td>/gi,"[td]"),b=b.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi,'[a href="$2"]$4[/a]'),b=b.replace(/<iframe(.*?)>([\w\W]*?)<\/iframe>/gi,"[iframe$1]$2[/iframe]"),b=b.replace(/<video(.*?)>([\w\W]*?)<\/video>/gi,"[video$1]$2[/video]"),b=b.replace(/<audio(.*?)>([\w\W]*?)<\/audio>/gi,"[audio$1]$2[/audio]"),b=b.replace(/<embed(.*?)>([\w\W]*?)<\/embed>/gi,"[embed$1]$2[/embed]"),b=b.replace(/<object(.*?)>([\w\W]*?)<\/object>/gi,"[object$1]$2[/object]"),b=b.replace(/<param(.*?)>/gi,"[param$1]"),b=b.replace(/<img(.*?)style="(.*?)"(.*?)>/gi,"[img$1$3]"),b=b.replace(/<(\w+)([\w\W]*?)>/gi,"<$1>"),b=b.replace(/<[^\/>][^>]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,""),b=b.replace(/<[^\/>][^>]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,""),b=b.replace(/\[td\]/gi,"<td>&nbsp;</td>"),b=b.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi,'<a href="$1">$2</a>'),b=b.replace(/\[iframe(.*?)\]([\w\W]*?)\[\/iframe\]/gi,"<iframe$1>$2</iframe>"),b=b.replace(/\[video(.*?)\]([\w\W]*?)\[\/video\]/gi,"<video$1>$2</video>"),b=b.replace(/\[audio(.*?)\]([\w\W]*?)\[\/audio\]/gi,"<audio$1>$2</audio>"),b=b.replace(/\[embed(.*?)\]([\w\W]*?)\[\/embed\]/gi,"<embed$1>$2</embed>"),b=b.replace(/\[object(.*?)\]([\w\W]*?)\[\/object\]/gi,"<object$1>$2</object>"),b=b.replace(/\[param(.*?)\]/gi,"<param$1>"),b=b.replace(/\[img(.*?)\]/gi,"<img$1>"),this.opts.convertDivs&&(b=b.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p>$2</p>")),b=b.replace(/<span>([\w\W]*?)<\/span>/gi,"$1"),b=b.replace(/\n{3,}/gi,"\n"),b=b.replace(/<p><p>/gi,"<p>"),b=b.replace(/<\/p><\/p>/gi,"</p>"),this.browser("mozilla")&&(b=b.replace(/<br>$/gi,"")),void this.pasteCleanUpInsert(b))},pasteCleanUpInsert:function(b){this.execCommand("inserthtml",b),this.opts.autoresize===!0?a(this.document.body).scrollTop(this.saveScroll):this.$editor.scrollTop(this.saveScroll)},formattingRemove:function(b){var c=[],d=b.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);return null!==d&&a.each(d,function(a,d){b=b.replace(d,"prebuffer_"+a),c.push(d)}),b=b.replace(/\s{2,}/g," "),b=b.replace(/\n/g," "),b=b.replace(/[\t]*/g,""),b=b.replace(/\n\s*\n/g,"\n"),b=b.replace(/^[\s\n]*/g,""),b=b.replace(/[\s\n]*$/g,""),b=b.replace(/>\s+</g,"><"),c&&(a.each(c,function(a,c){b=b.replace("prebuffer_"+a,c)}),c=[]),b},formattingIndenting:function(a){return a=a.replace(/<li/g,"	<li"),a=a.replace(/<tr/g,"	<tr"),a=a.replace(/<td/g,"		<td"),a=a.replace(/<\/tr>/g,"	</tr>")},formattingEmptyTags:function(a){for(var b=["<pre></pre>","<blockquote>\\s*</blockquote>","<em>\\s*</em>","<ul></ul>","<ol></ol>","<li></li>","<table></table>","<tr></tr>","<span>\\s*<span>","<span>&nbsp;<span>","<b>\\s*</b>","<b>&nbsp;</b>","<p>\\s*</p>","<p>&nbsp;</p>","<p>\\s*<br>\\s*</p>","<div>\\s*</div>","<div>\\s*<br>\\s*</div>"],c=0;c<b.length;++c){var d=b[c];a=a.replace(new RegExp(d,"gi"),"")}return a},formattingAddBefore:function(a){for(var b="\r\n",c=["<p","<form","</ul>","</ol>","<fieldset","<legend","<object","<embed","<select","<option","<input","<textarea","<pre","<blockquote","<ul","<ol","<li","<dl","<dt","<dd","<table","<thead","<tbody","<caption","</caption>","<th","<tr","<td","<figure"],d=0;d<c.length;++d){var e=c[d];a=a.replace(new RegExp(e,"gi"),b+e)}return a},formattingAddAfter:function(a){for(var b="\r\n",c=["</p>","</div>","</h1>","</h2>","</h3>","</h4>","</h5>","</h6>","<br>","<br />","</dl>","</dt>","</dd>","</form>","</blockquote>","</pre>","</legend>","</fieldset>","</object>","</embed>","</textarea>","</select>","</option>","</table>","</thead>","</tbody>","</tr>","</td>","</th>","</figure>"],d=0;d<c.length;++d){var e=c[d];a=a.replace(new RegExp(e,"gi"),e+b)}return a},formatting:function(a){return a=this.formattingRemove(a),a=this.formattingEmptyTags(a),a=this.formattingAddBefore(a),a=this.formattingAddAfter(a),a=this.formattingIndenting(a)},toggle:function(){var a;if(this.opts.visual){var b=this.$editor.innerHeight();this.$editor.hide(),this.$content.hide(),a=this.$editor.html(),this.$el.height(b).val(a).show().focus(),this.setBtnActive("html"),this.opts.visual=!1}else{this.$el.hide();var a=this.$el.val();this.$editor.html(a).show(),this.$content.show(),""===this.$editor.html()&&this.setCode(this.opts.emptyHtml),this.$editor.focus(),this.setBtnInactive("html"),this.opts.visual=!0,this.observeImages(),this.observeTables()}},autoSave:function(){this.autosaveInterval=setInterval(a.proxy(function(){a.ajax({url:this.opts.autosave,type:"post",data:this.$el.attr("name")+"="+escape(encodeURIComponent(this.getCode())),success:a.proxy(function(a){"function"==typeof this.opts.autosaveCallback&&this.opts.autosaveCallback(a,this)},this)})},this),1e3*this.opts.interval)},buildToolbar:function(){if(this.opts.toolbar===!1)return!1;if(this.$toolbar=a("<ul>").addClass("redactor_toolbar"),this.opts.air?(a(this.air).append(this.$toolbar),a("body").append(this.air)):this.opts.toolbarExternal===!1?this.$box.prepend(this.$toolbar):a(this.opts.toolbarExternal).html(this.$toolbar),this.opts.forbidden)var b=this,c=a.map(this.opts.buttons,function(c){return a.inArray(c,b.opts.forbidden)<0?c:void 0});else var c=this.opts.buttons;a.each(c,a.proxy(function(b,c){if("|"!==c&&"undefined"!=typeof this.opts.toolbar[c]){var d=this.opts.toolbar[c];if(this.opts.fileUpload===!1&&"file"===c)return!0;this.$toolbar.append(a("<li>").append(this.buildButton(c,d)))}},this))},buildButton:function(b,c){var d=a('<a href="javascript:void(null);" title="'+c.title+'" class="redactor_btn_'+b+'"></a>');if("undefined"==typeof c.func?d.click(a.proxy(function(){-1!=a.inArray(b,this.opts.activeButtons)&&(this.inactiveAllButtons(),this.setBtnActive(b)),this.browser("mozilla")&&this.$editor.focus(),this.execCommand(c.exec,b)},this)):"show"!==c.func&&d.click(a.proxy(function(a){this[c.func](a)},this)),"undefined"!=typeof c.callback&&c.callback!==!1&&d.click(a.proxy(function(a){c.callback(this,a,b)},this)),"backcolor"===b||"fontcolor"===b||"undefined"!=typeof c.dropdown){var e=a('<div class="redactor_dropdown" style="display: none;">');e="backcolor"===b||"fontcolor"===b?this.buildColorPicker(e,b):this.buildDropdown(e,c.dropdown),this.dropdowns.push(e.appendTo(this.$box)),this.hdlShowDropDown=a.proxy(function(a){this.showDropDown(a,e,b)},this),d.click(this.hdlShowDropDown)}return d},buildDropdown:function(b,c){return a.each(c,a.proxy(function(c,d){"undefined"==typeof d.className&&(d.className="");var e;"undefined"!=typeof d.name&&"separator"===d.name?e=a('<a class="redactor_separator_drop">'):(e=a('<a href="javascript:void(null);" class="'+d.className+'">'+d.title+"</a>"),a(e).click("function"==typeof d.callback?a.proxy(function(a){d.callback(this,a,c)},this):"undefined"==typeof d.func?a.proxy(function(){this.execCommand(d.exec,c)},this):a.proxy(function(a){this[d.func](a)},this))),a(b).append(e)},this)),b},buildColorPicker:function(b,c){var d;d="backcolor"===c?this.browser("msie")?"BackColor":"hilitecolor":"forecolor",a(b).width(210);for(var e=this.opts.colors.length,g=0;e>g;++g){var h=this.opts.colors[g],i=a('<a rel="'+h+'" href="javascript:void(null);" class="redactor_color_link"></a>').css({backgroundColor:h});a(b).append(i);var j=this;a(i).click(function(){j.execCommand(d,a(this).attr("rel")),"forecolor"===d&&j.$editor.find("font").replaceWith(function(){return a('<span style="color: '+a(this).attr("color")+';">'+a(this).html()+"</span>")}),j.browser("msie")&&"BackColor"===d&&j.$editor.find("font").replaceWith(function(){return a('<span style="'+a(this).attr("style")+'">'+a(this).html()+"</span>")})})}var k=a('<a href="javascript:void(null);" class="redactor_color_none"></a>').html(f.none);return k.click("backcolor"===c?a.proxy(this.setBackgroundNone,this):a.proxy(this.setColorNone,this)),a(b).append(k),b},setBackgroundNone:function(){a(this.getParentNode()).css("background-color","transparent"),this.syncCode()},setColorNone:function(){a(this.getParentNode()).attr("color","").css("color",""),this.syncCode()},showDropDown:function(b,c,d){if(this.getBtn(d).hasClass("dropact"))this.hideAllDropDown();else{this.hideAllDropDown(),this.setBtnActive(d),this.getBtn(d).addClass("dropact");var e=this.getBtn(d).offset().left-this.$box.offset().left;if(this.opts.air){var f=this.air.offset().top-this.$box.offset().top;a(c).appendTo(this.$box),a(c).css({position:"absolute",left:e+"px",top:f+30+"px"}).show()}else if(this.opts.fixed&&this.fixed)a(c).appendTo(this.$box),a(c).css({position:"fixed",left:e+"px",top:"30px"}).show();else{var g=this.$toolbar.offset().top+30-this.$box.offset().top;a(c).appendTo(this.$box),a(c).css({position:"absolute",left:e+"px",top:g+"px"}).show()}}var h=a.proxy(function(a){this.hideDropDown(a,c,d)},this);c.one("click",h),a(document).one("click",h),this.$editor.one("click",h),this.$content.one("click",h),b.stopPropagation()},hideAllDropDown:function(){this.$toolbar.find("a.dropact").removeClass("redactor_act").removeClass("dropact"),a(".redactor_dropdown").hide()},hideDropDown:function(b,c){a(b.target).hasClass("dropact")||(a(c).removeClass("dropact"),this.showedDropDown=!1,this.hideAllDropDown())},getBtn:function(b){return this.opts.toolbar===!1?!1:a(this.$toolbar.find("a.redactor_btn_"+b))},setBtnActive:function(a){var b=this.returnClassName(this.getBtn(a));this.getBtn(a).addClass(b+"_act")},returnClassName:function(b){for(var c=a.map(this.opts.activeButtons,function(a){return"redactor_btn_"+a}),d=0;d<c.length;d++)if(b.hasClass(c[d]))return c[d];return!1},setBtnInactive:function(a){var b=this.returnClassName(this.getBtn(a));this.getBtn(a).removeClass(b+"_act")},inactiveAllButtons:function(){a.each(this.opts.activeButtons,a.proxy(function(a,b){this.setBtnInactive(b)},this))},changeBtnIcon:function(a){var b=this.returnClassName(this.getBtn(a));this.getBtn(a).addClass("redactor_btn_"+b)},removeBtnIcon:function(a){var b=this.returnClassName(this.getBtn(a));this.getBtn(a).removeClass("redactor_btn_"+b)},addBtnSeparator:function(){},addBtnSeparatorAfter:function(a){this.getBtn(a)},addBtnSeparatorBefore:function(a){this.getBtn(a)},removeBtnSeparatorAfter:function(a){var b=this.getBtn(a);b.parent().next().remove()},removeBtnSeparatorBefore:function(a){var b=this.getBtn(a);b.parent().prev().remove()},setBtnRight:function(a){return this.opts.toolbar===!1?!1:void this.getBtn(a).parent().addClass("redactor_btn_right")},setBtnLeft:function(a){return this.opts.toolbar===!1?!1:void this.getBtn(a).parent().removeClass("redactor_btn_right")},addBtn:function(b,c,d,e){if(this.opts.toolbar===!1)return!1;var f=this.buildButton(b,{title:c,callback:d,dropdown:e});this.$toolbar.append(a("<li>").append(f))},addBtnFirst:function(b,c,d,e){if(this.opts.toolbar===!1)return!1;var f=this.buildButton(b,{title:c,callback:d,dropdown:e});this.$toolbar.prepend(a("<li>").append(f))},addBtnAfter:function(b,c,d,e,f){if(this.opts.toolbar===!1)return!1;var g=this.buildButton(c,{title:d,callback:e,dropdown:f}),h=this.getBtn(b);h.parent().after(a("<li>").append(g))},addBtnBefore:function(b,c,d,e,f){if(this.opts.toolbar===!1)return!1;var g=this.buildButton(c,{title:d,callback:e,dropdown:f}),h=this.getBtn(b);h.parent().before(a("<li>").append(g))},removeBtn:function(a,b){var c=this.getBtn(a);b===!0&&c.parent().next().remove(),c.parent().removeClass("redactor_btn_right"),c.remove()},getFragmentHtml:function(a){var b=a.cloneNode(!0),c=this.document.createElement("div");return c.appendChild(b),c.innerHTML},extractContent:function(){for(var a,b=this.$editor.get(0),c=this.document.createDocumentFragment();a=b.firstChild;)c.appendChild(a);return c},saveSelection:function(){this.$editor.focus(),this.savedSel=this.getOrigin(),this.savedSelObj=this.getFocus()},restoreSelection:function(){"undefined"!=typeof this.savedSel&&null!==this.savedSel&&null!==this.savedSelObj&&"BODY"!==this.savedSel[0].tagName?this.opts.iframe===!1&&0==a(this.savedSel[0]).closest(".redactor_editor").size()?this.$editor.focus():(this.browser("opera")&&this.$editor.focus(),this.setSelection(this.savedSel[0],this.savedSel[1],this.savedSelObj[0],this.savedSelObj[1]),this.browser("mozilla")&&this.$editor.focus()):this.$editor.focus()},getSelection:function(){var a=this.document;return this.oldIE()?a.selection.createRange():this.window.getSelection?this.window.getSelection():a.getSelection?a.getSelection():a.selection.createRange()},hasSelection:function(){if(this.oldIE()){var a,b=this.$editor.get(0);return this.$editor.is(":visible")?(b.focus(),b.document?(a=b.document.selection.createRange(),a&&a.parentElement().document===b.document):!1):!1}var c;return(c=this.getSelection())&&null!=c.focusNode&&null!=c.anchorNode},getOrigin:function(){if(this.oldIE()){var a,b=this.$editor.get(0);return this.$editor.is(":visible")&&b.focus(),this.hasSelection()?(a=b.document.selection.createRange(),this._getBoundary(b.document,a,!0)):null}var c;return(c=this.getSelection())&&null!=c.anchorNode?[c.anchorNode,c.anchorOffset]:null},getFocus:function(){if(this.oldIE()){var a,b=this.$editor.get(0);return this.$editor.is(":visible")&&b.focus(),this.hasSelection()?(a=b.document.selection.createRange(),this._getBoundary(b.document,a,!1)):null}var c;return(c=this.getSelection())&&null!=c.focusNode?[c.focusNode,c.focusOffset]:null},setSelection:function(a,b,c,d){if(null==c&&(c=a),null==d&&(d=b),this.oldIE()){var e=this.$editor.get(0),f=e.document.body.createTextRange();return this._moveBoundary(e.document,f,!1,c,d),this._moveBoundary(e.document,f,!0,a,b),f.select()}var g=this.getSelection();if(g)if(g.collapse&&g.extend)g.collapse(a,b),g.extend(c,d);else{r=this.document.createRange(),r.setStart(a,b),r.setEnd(c,d);try{g.removeAllRanges()}catch(h){}g.addRange(r)}},getCurrentNode:function(){return"undefined"!=typeof this.window.getSelection?this.getSelectedNode().parentNode:"undefined"!=typeof this.document.selection?this.getSelection().parentElement():void 0},getParentNode:function(){return a(this.getCurrentNode()).parent()[0]},getSelectedNode:function(){if(this.oldIE())return this.getSelection().parentElement();if("undefined"!=typeof this.window.getSelection){var a=this.window.getSelection();return a.rangeCount>0?this.getSelection().getRangeAt(0).commonAncestorContainer:!1}return"undefined"!=typeof this.document.selection?this.getSelection():void 0},_getBoundary:function(a,b,c){var d,e,f,g,h;for(e=a.createElement("a"),d=b.duplicate(),d.collapse(c),h=d.parentElement();;)if(h.insertBefore(e,e.previousSibling),d.moveToElementText(e),!(d.compareEndPoints(c?"StartToStart":"StartToEnd",b)>0&&null!=e.previousSibling))break;return-1===d.compareEndPoints(c?"StartToStart":"StartToEnd",b)&&e.nextSibling?(d.setEndPoint(c?"EndToStart":"EndToEnd",b),f=e.nextSibling,g=d.text.length):(f=e.parentNode,g=this._getChildIndex(e)),e.parentNode.removeChild(e),[f,g]},_moveBoundary:function(a,b,c,d,e){var f,g,h,i,j;return j=0,f=this._isText(d)?d:d.childNodes[e],g=this._isText(d)?d.parentNode:d,this._isText(d)&&(j=e),i=a.createElement("a"),g.insertBefore(i,f||null),h=a.body.createTextRange(),h.moveToElementText(i),i.parentNode.removeChild(i),b.setEndPoint(c?"StartToStart":"EndToEnd",h),b[c?"moveStart":"moveEnd"]("character",j)},_isText:function(a){return null!=a?3==a.nodeType:!1},_getChildIndex:function(a){for(var b=0;a=a.previousSibling;)b++;return b},insertNodeAfterCaret:function(a){this.saveSelection(),this.insertNodeAtCaret(a),this.restoreSelection()},insertNodeAtCaret:function(a){if(this.window.getSelection){var b=this.getSelection();if(b.rangeCount){var c=b.getRangeAt(0);c.collapse(!1),c.insertNode(a),c=c.cloneRange(),c.selectNodeContents(a),c.collapse(!1),b.removeAllRanges(),b.addRange(c)}}else if(this.document.selection){var d=1===a.nodeType?a.outerHTML:a.data,e="marker_"+(""+Math.random()).slice(2);d+='<span id="'+e+'"></span>';var f=this.getSelection();f.collapse(!1),f.pasteHTML(d);var g=this.document.getElementById(e);f.moveToElementText(g),f.select(),g.parentNode.removeChild(g)}},getSelectedHtml:function(){var a="";if(this.window.getSelection){var b=this.window.getSelection();if(b.rangeCount){for(var c=this.document.createElement("div"),d=0,e=b.rangeCount;e>d;++d)c.appendChild(b.getRangeAt(d).cloneContents());a=c.innerHTML}}else this.document.selection&&"Text"===this.document.selection.type&&(a=this.document.selection.createRange().htmlText);return a},resizeImage:function(b){var c,d,e=!1,f=!1,g=a(b).width()/a(b).height(),h=10,i=10;a(b).off("hover mousedown mouseup click mousemove"),a(b).hover(function(){a(b).css("cursor","nw-resize")},function(){a(b).css("cursor",""),e=!1}),a(b).mousedown(function(h){h.preventDefault(),g=a(b).width()/a(b).height(),e=!0,f=!0,c=Math.round(h.pageX-a(b).eq(0).offset().left),d=Math.round(h.pageY-a(b).eq(0).offset().top)}),a(b).mouseup(a.proxy(function(){e=!1,a(b).css("cursor",""),this.syncCode()},this)),a(b).click(a.proxy(function(a){f&&this.imageEdit(a)},this)),a(b).mousemove(function(j){if(e){f=!1;var k=(Math.round(j.pageX-a(this).eq(0).offset().left)-c,Math.round(j.pageY-a(this).eq(0).offset().top)-d),l=a(b).height(),m=parseInt(l,10)+k,n=m*g;n>h&&a(b).width(n),m>i&&a(b).height(m),c=Math.round(j.pageX-a(this).eq(0).offset().left),d=Math.round(j.pageY-a(this).eq(0).offset().top)}})},showTable:function(){this.saveSelection(),this.modalInit(f.table,this.opts.modal_table,300,a.proxy(function(){a("#redactor_insert_table_btn").click(a.proxy(this.insertTable,this)),setTimeout(function(){a("#redactor_table_rows").focus()},200)},this))},insertTable:function(){for(var b=a("#redactor_table_rows").val(),c=a("#redactor_table_columns").val(),d=a("<div></div>"),e=Math.floor(99999*Math.random()),f=a('<table id="table'+e+'"><tbody></tbody></table>'),g=0;b>g;g++){for(var h=a("<tr></tr>"),i=0;c>i;i++){var j=a("<td><br></td>");a(h).append(j)}a(f).append(h)}a(d).append(f);var k=a(d).html()+"<p></p>";this.restoreSelection(),this.execCommand("inserthtml",k),this.modalClose(),this.observeTables()},tableObserver:function(b){this.$table=a(b.target).closest("table"),this.$table_tr=this.$table.find("tr"),this.$table_td=this.$table.find("td"),this.$tbody=a(b.target).closest("tbody"),this.$thead=a(this.$table).find("thead"),this.$current_td=a(b.target),this.$current_tr=a(b.target).closest("tr")
},deleteTable:function(){a(this.$table).remove(),this.$table=!1,this.syncCode()},deleteRow:function(){a(this.$current_tr).remove(),this.syncCode()},deleteColumn:function(){var b=a(this.$current_td).get(0).cellIndex;a(this.$table).find("tr").each(function(){a(this).find("td").eq(b).remove()}),this.syncCode()},addHead:function(){if(0!==a(this.$table).find("thead").size())this.deleteHead();else{var b=a(this.$table).find("tr").first().clone();b.find("td").html("&nbsp;"),this.$thead=a("<thead></thead>"),this.$thead.append(b),a(this.$table).prepend(this.$thead),this.syncCode()}},deleteHead:function(){a(this.$thead).remove(),this.$thead=!1,this.syncCode()},insertRowAbove:function(){this.insertRow("before")},insertRowBelow:function(){this.insertRow("after")},insertColumnLeft:function(){this.insertColumn("before")},insertColumnRight:function(){this.insertColumn("after")},insertRow:function(b){var c=a(this.$current_tr).clone();c.find("td").html("&nbsp;"),"after"===b?a(this.$current_tr).after(c):a(this.$current_tr).before(c),this.syncCode()},insertColumn:function(b){var c=0;if(this.$current_tr){var d=this.$current_tr.find("td");d&&(this.$current_tr.find("td").each(a.proxy(function(b,d){a(d)[0]===this.$current_td[0]&&(c=b)},this)),this.$table_tr.each(function(d,e){var f=a(e).find("td").eq(c),g=f.clone();g.html("&nbsp;"),"after"===b?a(f).after(g):a(f).before(g)}),this.syncCode())}},showVideo:function(){this.saveSelection(),this.modalInit(f.video,this.opts.modal_video,600,a.proxy(function(){a("#redactor_insert_video_btn").click(a.proxy(this.insertVideo,this)),setTimeout(function(){a("#redactor_insert_video_area").focus()},200)},this))},insertVideo:function(){var b=a("#redactor_insert_video_area").val();b=this.stripTags(b),this.restoreSelection(),this.execCommand("inserthtml",b),this.modalClose()},imageEdit:function(b){var c=a(b.target),d=c.parent(),e=a.proxy(function(){a("#redactor_file_alt").val(c.attr("alt")),a("#redactor_image_edit_src").attr("href",c.attr("src")),a("#redactor_form_image_align").val(c.css("float")),"A"===a(d).get(0).tagName&&a("#redactor_file_link").val(a(d).attr("href")),a("#redactor_image_delete_btn").click(a.proxy(function(){this.imageDelete(c)},this)),a("#redactorSaveBtn").click(a.proxy(function(){this.imageSave(c)},this))},this);this.modalInit(f.image,this.opts.modal_image_edit,380,e)},imageDelete:function(b){a(b).remove(),this.modalClose(),this.syncCode()},imageSave:function(b){var c=a(b).parent();a(b).attr("alt",a("#redactor_file_alt").val());var d=a("#redactor_form_image_align").val();a(b).css("left"===d?{"float":"left",margin:"0 10px 10px 0"}:"right"===d?{"float":"right",margin:"0 0 10px 10px"}:{"float":"none",margin:"0"});var e=a.trim(a("#redactor_file_link").val());""!==e?"A"!==a(c).get(0).tagName?a(b).replaceWith('<a href="'+e+'">'+this.outerHTML(b)+"</a>"):a(c).attr("href",e):"A"===a(c).get(0).tagName&&a(c).replaceWith(this.outerHTML(b)),this.modalClose(),this.observeImages(),this.syncCode()},showImage:function(){return},imageSetThumb:function(b){this._imageSet('<img src="'+a(b.target).attr("rel")+'" alt="'+a(b.target).attr("title")+'" />',!0)},imageUploadCallbackLink:function(){if(""!==a("#redactor_file_link").val()){var b='<img src="'+a("#redactor_file_link").val()+'" />';this._imageSet(b,!0)}else this.modalClose()},imageUploadCallback:function(a){this._imageSet(a)},_imageSet:function(a,b){if(this.restoreSelection(),a!==!1){var c="";c=b!==!0?'<p><img src="'+a.filelink+'" /></p>':a,this.execCommand("inserthtml",c),b!==!0&&"function"==typeof this.opts.imageUploadCallback&&this.opts.imageUploadCallback(this,a)}this.modalClose(),this.observeImages()},showLink:function(){this.saveSelection();var b=a.proxy(function(){this.insert_link_node=!1;var b=this.getSelection(),c="",d="",e="";if(this.browser("msie")){var f=this.getParentNode();"A"===f.nodeName?(this.insert_link_node=a(f),d=this.insert_link_node.text(),c=this.insert_link_node.attr("href"),e=this.insert_link_node.attr("target")):d=this.oldIE()?b.text:b.toString()}else b&&b.anchorNode&&"A"===b.anchorNode.parentNode.tagName?(c=b.anchorNode.parentNode.href,d=b.anchorNode.parentNode.text,e=b.anchorNode.parentNode.target,""===b.toString()&&(this.insert_link_node=b.anchorNode.parentNode)):d=b.toString();a(".redactor_link_text").val(d);var g=self.location.href.replace(/\/$/i,""),h=c.replace(g,"");0===c.search("mailto:")?(this.setModalTab(2),a("#redactor_tab_selected").val(2),a("#redactor_link_mailto").val(c.replace("mailto:",""))):0===h.search(/^#/gi)?(this.setModalTab(3),a("#redactor_tab_selected").val(3),a("#redactor_link_anchor").val(h.replace(/^#/gi,""))):a("#redactor_link_url").val(h),"_blank"===e&&a("#redactor_link_blank").attr("checked",!0),a("#redactor_insert_link_btn").click(a.proxy(this.insertLink,this)),setTimeout(function(){a("#redactor_link_url").focus()},200)},this);this.modalInit(f.link,this.opts.modal_link,460,b)},insertLink:function(){var b=a("#redactor_tab_selected").val(),c="",d="",e="";if("1"===b){c=a("#redactor_link_url").val(),d=a("#redactor_link_url_text").val(),a("#redactor_link_blank").attr("checked")&&(e=' target="_blank"');var f="/(w+:{0,1}w*@)?(S+)(:[0-9]+)?(/|/([w#!:.?+=&%@!-/]))?/",g=new RegExp("^(http|ftp|https)://"+f,"i"),h=new RegExp("^"+f,"i");-1==c.search(g)&&0==c.search(h)&&this.opts.protocol!==!1&&(c=this.opts.protocol+c)}else"2"===b?(c="mailto:"+a("#redactor_link_mailto").val(),d=a("#redactor_link_mailto_text").val()):"3"===b&&(c="#"+a("#redactor_link_anchor").val(),d=a("#redactor_link_anchor_text").val());this._insertLink('<a href="'+c+'"'+e+">"+d+"</a>",a.trim(d),c,e)},_insertLink:function(b,c,d,e){this.$editor.focus(),this.restoreSelection(),""!==c&&(this.insert_link_node?(a(this.insert_link_node).text(c),a(this.insert_link_node).attr("href",d),""!==e?a(this.insert_link_node).attr("target",e):a(this.insert_link_node).removeAttr("target"),this.syncCode()):this.execCommand("inserthtml",b)),this.modalClose()},showFile:function(){this.saveSelection();var b=a.proxy(function(){var b=this.getSelection(),c="";c=this.oldIE()?b.text:b.toString(),a("#redactor_filename").val(c),this.opts.uploadCrossDomain===!1&&this.isMobile()===!1&&a("#redactor_file").dragupload({url:this.opts.fileUpload,uploadFields:this.opts.uploadFields,success:a.proxy(this.fileUploadCallback,this),error:a.proxy(this.opts.fileUploadErrorCallback,this)}),this.uploadInit("redactor_file",{auto:!0,url:this.opts.fileUpload,success:a.proxy(this.fileUploadCallback,this),error:a.proxy(this.opts.fileUploadErrorCallback,this)})},this);this.modalInit(f.file,this.opts.modal_file,500,b)},fileUploadCallback:function(b){if(this.restoreSelection(),b!==!1){var c=a("#redactor_filename").val();""===c&&(c=b.filename);var d='<a href="'+b.filelink+'">'+c+"</a>";this.browser("webkit")&&this.window.chrome&&(d+="&nbsp;"),this.execCommand("inserthtml",d),"function"==typeof this.opts.fileUploadCallback&&this.opts.fileUploadCallback(this,b)}this.modalClose()},modalInit:function(b,c,d,e){if(0===a(".redactor_modal_overlay").size()&&(this.overlay=a('<div class="redactor_modal_overlay" style="display: none;"></div>'),a("body").prepend(this.overlay)),this.opts.overlay&&(a(".redactor_modal_overlay").show(),a(".redactor_modal_overlay").click(a.proxy(this.modalClose,this))),0===a(".redactor_modal").size()&&(this.modal=a('<div class="redactor_modal" style="display: none;"><div class="redactor_modal_close">&times;</div><div class="redactor_modal_header"></div><div id="redactor_modal_inner"></div></div>'),a("body").append(this.modal)),a(".redactor_modal_close").click(a.proxy(this.modalClose,this)),this.hdlModalClose=a.proxy(function(a){return 27===a.keyCode?(this.modalClose(),!1):void 0},this),a(document).keyup(this.hdlModalClose),this.$editor.keyup(this.hdlModalClose),a("#redactor_modal_inner").empty().append(0==c.indexOf("#")?a(c).html():c),a(".redactor_modal_header").html(b),"undefined"!=typeof a.fn.draggable&&(a(".redactor_modal").draggable({handle:".redactor_modal_header"}),a(".redactor_modal_header").css("cursor","move")),0!==a(".redactor_tabs").size()){var f=this;a(".redactor_tabs a").each(function(b,c){b++,a(c).click(function(){if(a(".redactor_tabs a").removeClass("redactor_tabs_act"),a(this).addClass("redactor_tabs_act"),a(".redactor_tab").hide(),a("#redactor_tab"+b).show(),a("#redactor_tab_selected").val(b),f.isMobile()===!1){var c=a(".redactor_modal").outerHeight();a(".redactor_modal").css("margin-top","-"+(c+10)/2+"px")}})})}a(".redactor_modal .redactor_btn_modal_close").click(a.proxy(this.modalClose,this)),this.isMobile()===!1?(a(".redactor_modal").css({position:"fixed",top:"-2000px",left:"50%",width:d+"px",marginLeft:"-"+(d+60)/2+"px"}).show(),this.modalSaveBodyOveflow=a(document.body).css("overflow"),a(document.body).css("overflow","hidden")):a(".redactor_modal").css({position:"fixed",width:"100%",height:"100%",top:"0",left:"0",margin:"0",minHeight:"300px"}).show(),"function"==typeof e&&e(),this.isMobile()===!1&&setTimeout(function(){var b=a(".redactor_modal").outerHeight();a(".redactor_modal").css({top:"50%",height:"auto",minHeight:"auto",marginTop:"-"+(b+10)/2+"px"})},20)},modalClose:function(){return a(".redactor_modal_close").unbind("click",this.modalClose),a(".redactor_modal").fadeOut("fast",a.proxy(function(){a("#redactor_modal_inner").html(""),this.opts.overlay&&(a(".redactor_modal_overlay").hide(),a(".redactor_modal_overlay").unbind("click",this.modalClose)),a(document).unbind("keyup",this.hdlModalClose),this.$editor.unbind("keyup",this.hdlModalClose)},this)),this.isMobile()===!1&&a(document.body).css("overflow",this.modalSaveBodyOveflow?this.modalSaveBodyOveflow:"visible"),!1},setModalTab:function(b){a(".redactor_tab").hide();var c=a(".redactor_tabs a");c.removeClass("redactor_tabs_act"),c.eq(b-1).addClass("redactor_tabs_act"),a("#redactor_tab"+b).show()},uploadInit:function(b,c){this.uploadOptions={url:!1,success:!1,error:!1,start:!1,trigger:!1,auto:!1,input:!1},a.extend(this.uploadOptions,c),0!==a("#"+b).size()&&"INPUT"===a("#"+b).get(0).tagName?(this.uploadOptions.input=a("#"+b),this.element=a(a("#"+b).get(0).form)):this.element=a("#"+b),this.element_action=this.element.attr("action"),this.uploadOptions.auto?a(this.uploadOptions.input).change(a.proxy(function(){this.element.submit(function(){return!1}),this.uploadSubmit()},this)):this.uploadOptions.trigger&&a("#"+this.uploadOptions.trigger).click(a.proxy(this.uploadSubmit,this))},uploadSubmit:function(){this.uploadForm(this.element,this.uploadFrame())},uploadFrame:function(){this.id="f"+Math.floor(99999*Math.random());var b=this.document.createElement("div"),c='<iframe style="display:none" id="'+this.id+'" name="'+this.id+'"></iframe>';return b.innerHTML=c,a(b).appendTo("body"),this.uploadOptions.start&&this.uploadOptions.start(),a("#"+this.id).load(a.proxy(this.uploadLoaded,this)),this.id},uploadForm:function(b,c){if(this.uploadOptions.input){var d="redactorUploadForm"+this.id,e="redactorUploadFile"+this.id;this.form=a('<form  action="'+this.uploadOptions.url+'" method="POST" target="'+c+'" name="'+d+'" id="'+d+'" enctype="multipart/form-data"></form>'),this.opts.uploadFields!==!1&&"object"==typeof this.opts.uploadFields&&a.each(this.opts.uploadFields,a.proxy(function(b,c){0===c.toString().indexOf("#")&&(c=a(c).val());var d=a("<input/>",{type:"hidden",name:b,value:c});a(this.form).append(d)},this));var f=this.uploadOptions.input,g=a(f).clone();a(f).attr("id",e),a(f).before(g),a(f).appendTo(this.form),a(this.form).css("position","absolute"),a(this.form).css("top","-2000px"),a(this.form).css("left","-2000px"),a(this.form).appendTo("body"),this.form.submit()}else b.attr("target",c),b.attr("method","POST"),b.attr("enctype","multipart/form-data"),b.attr("action",this.uploadOptions.url),this.element.submit()},uploadLoaded:function(){var b,c=a("#"+this.id)[0];if(b=c.contentDocument?c.contentDocument:c.contentWindow?c.contentWindow.document:window.frames[this.id].document,this.uploadOptions.success)if("undefined"!=typeof b){var d=b.body.innerHTML,e=d.match(/\{(.|\n)*\}/)[0],f=a.parseJSON(e);"undefined"==typeof f.error?this.uploadOptions.success(f):(this.uploadOptions.error(this,f),this.modalClose())}else alert("Upload failed!"),this.modalClose();this.element.attr("action",this.element_action),this.element.attr("target","")},browser:function(a){var b=navigator.userAgent.toLowerCase(),c=/(chrome)[ \/]([\w.]+)/.exec(b)||/(webkit)[ \/]([\w.]+)/.exec(b)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b)||/(msie) ([\w.]+)/.exec(b)||b.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b)||[];return"version"==a?c[2]:"webkit"==a?"chrome"==c[1]||"webkit"==c[1]:c[1]==a},oldIE:function(){return this.browser("msie")&&parseInt(this.browser("version"),10)<9?!0:!1},outerHTML:function(b){return a("<p>").append(a(b).eq(0).clone()).html()},normalize:function(a){return parseInt(a.replace("px",""),10)},isMobile:function(a){return a===!0&&/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent)?!0:/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)?!0:!1},selectText:function(){}},a.fn.getObject=function(){return this.data("redactor")},a.fn.selectText=function(){var a=document,b=this[0];if(a.body.createTextRange){var c=document.body.createTextRange();c.moveToElementText(b),c.select()}else if(window.getSelection){var d=window.getSelection(),c=document.createRange();c.selectNodeContents(b),d.removeAllRanges(),d.addRange(c)}},a.fn.getEditor=function(){return this.data("redactor").$editor},a.fn.getCode=function(){return a.trim(this.data("redactor").getCode())},a.fn.getText=function(){return this.data("redactor").$editor.text()},a.fn.getSelected=function(){return this.data("redactor").getSelectedHtml()},a.fn.setCode=function(a){this.data("redactor").setCode(a)},a.fn.insertHtml=function(a){this.data("redactor").insertHtml(a)},a.fn.destroyEditor=function(){this.each(function(){"undefined"!=typeof a(this).data("redactor")&&(a(this).data("redactor").destroy(),a(this).removeData("redactor"))})},a.fn.setFocus=function(){this.data("redactor").$editor.focus()},a.fn.execCommand=function(a,b){this.data("redactor").execCommand(a,b)},a.fn.saveSelection=function(){this.data("redactor").saveSelection()},a.fn.restoreSelection=function(){this.data("redactor").restoreSelection()}}(jQuery),function(a){function b(b,c){this.opts=a.extend({url:!1,success:!1,error:!1,preview:!1,uploadFields:!1,text:f.drop_file_here,atext:f.or_choose},c),this.$el=a(b)}a.fn.dragupload=function(a){return this.each(function(){var c=new b(this,a);c.init()})},b.prototype={init:function(){if(-1===navigator.userAgent.search("MSIE")){this.droparea=a('<div class="redactor_droparea"></div>'),this.dropareabox=a('<div class="redactor_dropareabox">'+this.opts.text+"</div>"),this.dropalternative=a('<div class="redactor_dropalternative">'+this.opts.atext+"</div>"),this.droparea.append(this.dropareabox),this.$el.before(this.droparea),this.$el.before(this.dropalternative),this.dropareabox.bind("dragover",a.proxy(function(){return this.ondrag()},this)),this.dropareabox.bind("dragleave",a.proxy(function(){return this.ondragleave()},this));var b=a.proxy(function(a){var b=parseInt(a.loaded/a.total*100,10);this.dropareabox.text("Loading "+b+"%")},this),c=jQuery.ajaxSettings.xhr();c.upload&&c.upload.addEventListener("progress",b,!1);var d=function(){return c};this.dropareabox.get(0).ondrop=a.proxy(function(b){b.preventDefault(),this.dropareabox.removeClass("hover").addClass("drop");var c=b.dataTransfer.files[0],e=new FormData;this.opts.uploadFields!==!1&&"object"==typeof this.opts.uploadFields&&a.each(this.opts.uploadFields,a.proxy(function(b,c){0===c.toString().indexOf("#")&&(c=a(c).val()),e.append(b,c)},this)),e.append("file",c),a.ajax({url:this.opts.url,dataType:"html",data:e,xhr:d,cache:!1,contentType:!1,processData:!1,type:"POST",success:a.proxy(function(b){var c=a.parseJSON(b);"undefined"==typeof c.error?this.opts.success(c):(this.opts.error(this,c),this.opts.success(!1))},this)})},this)}},ondrag:function(){return this.dropareabox.addClass("hover"),!1},ondragleave:function(){return this.dropareabox.removeClass("hover"),!1}}}(jQuery),function(a){var b="http://",c=/(^|&lt;|\s)(www\..+?\..+?)(\s|&gt;|$)/g,d=/(^|&lt;|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|&gt;|$)/g,e=function(){for(var f=this.childNodes,g=f.length;g--;){var h=f[g];if(3===h.nodeType){var i=h.nodeValue;i&&(i.match(c)||i.match(d))&&(i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(c,'$1<a href="'+b+'$2">$2</a>$3').replace(d,'$1<a href="$2">$2</a>$5'),a(h).after(i).remove())}else 1!==h.nodeType||/^(a|button|textarea)$/i.test(h.tagName)||e.call(h)}};a.fn.linkify=function(){this.each(e)}}(jQuery);var g=a.ItemView.extend({template:_.template('<textarea class="redactor_content" name="content"></textarea>'),ui:{redactor:".redactor_content",redactorBox:".redactor_box",redactorEditor:".redactor_editor"},initialize:function(a){this.options=a,this.model.set("code",""),this.options.forbiddenBtn||(this.options.forbiddenBtn=["backcolor","video","fontcolor","fontsize","link","html"])},events:function(){var a={};return a["focus "+this.ui.redactorEditor]="focusEditor",a["blur "+this.ui.redactorEditor]="unfocusEditor",a["click "+this.ui.redactorEditor]="saveSelection",a["paste "+this.ui.redactorEditor]="saveSelection",a},onShow:function(){var a=this,c=this.ui.redactor.redactor({keyupCallback:function(){""==c.getCode()||"<p><br></p>"==c.getCode()?a.trigger("emptyCode"):a.model.set("code",c.getCode())},execCommandCallback:function(){a.model.set("code",c.getCode())},forbidden:a.options.forbiddenBtn});this.$el.find(".redactor_editor").css({"min-height":"120px"}),this.$el.find(".redactor_toolbar").find(".redactor_btn_image").addClass("upload_new_file");var d=new b.UploaderView({container:this.$el.find(".redactor_box"),validate:{format:["jpeg","JPEG","jpg","JPG","gif","GIF","png","PNG"],onceLimt:5,allLimt:-1,nameLimt:-1},callbackName:this.options.uploadOptions.callbackName,callbackValue:this.options.uploadOptions.callbackValue,url:this.options.uploadOptions.uploadUrl,ajaxUrl:this.options.uploadOptions.ajaxUrl,fileInputName:this.options.uploadOptions.fileInputName,extendData:this.options.uploadOptions.extendData,pasteNode:this.$el.find(".redactor_editor"),isPaste:!0,isDrag:!0});d.render(),d.on("uploadEnd",function(b){var c=a.options.uploadOptions.onAfterUpload(b);a.insertRedactor(c)}),d.on("error",function(a){console.log(a)}),this.$el.on("click",function(a){a.stopPropagation()})},getRedactorApi:function(a,b){this.ui.redactor[a](b)},focusEditor:function(){this.trigger("focusEditor")},unfocusEditor:function(){this.trigger("unfocusEditor")},getCode:function(){var a=this.ui.redactor.getCode();return a},setCode:function(a){this.ui.redactor.setCode(a)},insertRedactor:function(a){var b=(this.getCode(),'<img src="'+a+'">');this.getRedactorApi("restoreSelection"),this.getRedactorApi("insertHtml",b),this.model.set("code",this.getCode())},saveSelection:function(){this.getRedactorApi("saveSelection")}});return g}),define("TitaWidget",["talent","UserSelector","$.tipsy","moment","richeditor","Uploader","$.slimscroll","simplemodal","$.infotip"],function(Talent,UserSelector,Ttipsy,moment,Richeditor,Uploader,Slimscroll,Simplemodal){function TipDialogView(a,b,c){var c=c||{},d=Talent._.extend({},c,{autoHide:!0,className:c.className||"warn"});d.skin&&"skin2"==d.skin&&(d.showClosed=!0,d.minWidth="400",d.maxWidth="400");var e=c.container||Talent.$("body");if(window.tipView&&window.tipView.close(),window.tipView=new TDialogView({type:"tipsy",skin:d.skin||"",showClosed:d.showClosed,maxWidth:d.maxWidth||"",minWidth:d.minWidth||50,zindex:d.zindex||1031}),d.skin&&"skin2"==d.skin){var f=/[^\x00-\xff]/g,g=b.replace(f,"**").length;47>g&&d.skin&&"skin2"==d.skin&&window.tipView.$el.css("text-align","center")}return e.append(window.tipView.render().el),tipView.show(a,b,d),tipView}function ConfirmDialogView(a,b,c){var c=c||{},d=c.container||Talent.$("body"),e=(TDialogView.instanceConfirm,Talent._.extend({},{autoHide:!1,cancel:!0,sure:!0,quirkTheme:!1,className:"ask",type:"tipsy",sureText:"确定",cancelText:"取消"},c));if(e.skin&&"skin2"==e.skin&&(e.minWidth="400",e.maxWidth="400"),window.dialogView&&window.dialogView.close(),window.dialogView=new TDialogView({type:e.type,skin:e.skin||"",cancel:e.cancel,sure:e.sure,sureText:e.sureText,cancelText:e.cancelText,maxWidth:e.maxWidth||"",minWidth:e.minWidth||50,zindex:e.zindex||1031}),e.skin&&"skin2"==e.skin){var f=/[^\x00-\xff]/g,g=b.replace(f,"**").length;47>g&&e.skin&&"skin2"==e.skin&&window.dialogView.$el.css("text-align","center")}return d.append(window.dialogView.render().el),Talent.$(document).off("mouseup.TT-Dialog-View-Confirm"),Talent.$(document).on("mouseup.TT-Dialog-View-Confirm",function(){Talent.$(document).off("mouseup.TT-Dialog-View-Confirm"),window.dialogView.close()}),window.dialogView.show(a,b,e),window.dialogView}function FeedActionMoreView(a){return feedActionMore.instance?feedActionMore.instance.setOptions(a):feedActionMore.instance=new feedActionMore(a),feedActionMore.instance}function PullScreenView(a){return PullScreenLayoutView.instance||(PullScreenLayoutView.instance=new PullScreenLayoutView(a)),PullScreenLayoutView.instance}function animate32(a,b,c,d,e,f){return e.level2.css(c),[function(){e.level1.css(a).animate(b,200,f)},function(){e.level2.animate(d,300,f)}]}function animate23(a,b,c,d,e,f){return e.level2.css(c),[function(){e.level1.hide().toggle("slow",f)},function(){e.level2.animate(d,200,f)}]}function animateDefault(a,b,c,d,e,f){return"0"==e.level1.parents("li").attr("data-id")?(e.level2.css(c),[function(){e.level1.hide().toggle("slow",f)},function(){e.level2.animate(d,200,f)}]):(e.level2.hide(),[function(){e.level1.hide().toggle("slow",f)},function(){e.level2.hide().toggle("slow",f)}])}function addAnimate(a,b){var c=a.model.get("direction"),d=findEle(a);d.line.hide(),d.level3.hide();var e=[],f=[function(){d.level3.toggle("slow",k)},function(){d.line.toggle("slow",k)},function(){b.resolve()}],g={"margin-left":10,"margin-top":10},h={"margin-left":-5,"margin-top":0};if("3-2"==c)var i={"margin-left":10,width:200,height:80,"margin-top":10},j={width:d.level2.width(),height:d.level2.height(),"margin-left":0,"margin-top":0};else var i={"margin-left":-20},j={"margin-left":0};var k=function(){a.$el.dequeue("slideList")};switch(c){case"3-2":e=animate32(g,h,i,j,d,k);break;case"2-3":e=animate23(g,h,i,j,d,k);break;default:e=animateDefault(g,h,i,j,d,k)}"0"==d.level1.parents("li").attr("data-id")&&(e=e.slice(1,e.length)),"0"==d.level1.parents("li").attr("data-id")&&0==a.$el.find(".second_ul li:first").attr("data-id")&&(d.level2.css(j),e=e.slice(1,e.length)),e=e.concat(f),a.$el.queue("slideList",e),k()}function findEle(a){var b=a.$el.find(".second_ul>li>div:first");return{level1:a.$el.find(".first_ul>li>div:first"),level2:b,level3:b.parent().find(".membership_subordinate_container"),line:a.$el.find(".membership_line")}}function slideDown(a,b,c){var d=a,e=d.attr("init-height");d.attr("init-height",e),d.css({height:e}).show("slow").slideDown("slow",c)}function slideUp(a,b,c){var d=a,e=d.height();d.attr("init-height",e),d.animate({height:0},b,function(){d.hide(),c()})}var jst=function(){return this.JST=this.JST||{},this.JST["add-user/add-user-composite"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="title-pl">'+(null==(__t=title)?"":__t)+'</div>\n<div class="list-pl">\n<em class="ux_add_btn"></em>\n<ul></ul>\n</div>';return __p},this.JST["add-user/add-user-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="undefined"!=typeof type&&"department"==type?'\n<a href="javascript:void(0)" title="删除:'+(null==(__t=name)?"":__t)+'" id="'+(null==(__t=id)?"":__t)+'" class="square">'+(null==(__t=_.TitaWidget_substring(name,2,!1))?"":__t)+"</a>\n":'\n<a href="javascript:void(0)" title="删除:'+(null==(__t=Name)?"":__t)+'" id="'+(null==(__t=Id)?"":__t)+'" class="ux_user_area">'+(null==(__t=_.convertImage({src:UserAvatar.Small,size:30,name:Name,bgColor:UserAvatar.Color}))?"":__t)+"</a>\n";return __p},this.JST["attachment-list/attachment-list-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n<div class="cont_afb">\n	<div class="img_afb">\n		',__p+=isImage?'\n		<img src="'+(null==(__t=smallUrl)?"":__t)+'">\n		':'\n		<span class="ico_afb file-'+(null==(__t=fileType)?"":__t)+'"></span>\n		',__p+="\n	</div>\n</div>\n\n",isImage&&1==documentSource&&(__p+='\n<span class="shade_afb" data-name="feed-attachment-preview-dialog"></span>\n<span class="icon-zoom-in zoom-afb" data-name="feed-attachment-preview-button"></span>\n\n'),__p+='\n<div class="name_afb">'+(null==(__t=fileName)?"":__t)+'</div>\n<div class="action_afb">\n	<a href="'+(null==(__t=downloadUrl)?"":__t)+'">下载</a>\n	',deleteable&&(__p+='\n	<a href="javascript:void(0);" data-name="attachment-deleted" id="'+(null==(__t=documentId)?"":__t)+'">删除</a>\n	'),__p+="\n	",isPreview&&(__p+="\n		",__p+=isImage&&1==documentSource?'\n			<a href="javascript:void(0);" data-name="feed-attachment-preview">预览</a>\n		':'\n			<a href="'+(null==(__t=previewUrl)?"":__t)+'" target="_blank">预览</a>\n		',__p+="\n	"),__p+="\n</div>\n\n";return __p},this.JST["class/checked-class-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="checked_name">'+(null==(__t=name)?"":__t)+'</div>\n<a href="javascript:void(0)" data-handler="Delete" class="smember_btn_reduce">\n	<span></span>\n</a>';return __p},this.JST["class/class-component"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="top_cd">\n	',isMulti&&(__p+='\n	<div class="top_title">选择分类</div>\n	'),__p+='\n	<ul class="tab_cd" data-name="klass-tab">\n		',isShowClass&&(__p+='\n		<li data-type="17">选择分类</li>\n		'),__p+="\n		",isShowWork&&(__p+='\n			<li data-type="4">选择'+(null==(__t=i18n.work_1)?"":__t)+"</li>\n		"),__p+="\n		",isShowTarget&&(__p+='\n			<li data-type="402">选择目标</li>\n		'),__p+='\n	</ul>\n	<span class="icon-dialog-closed closed_cd" data-name="klass-close"></span>\n</div>\n<div class="box_cd" >\n	<div data-name="klass-content" class="plan-klass-content"></div>\n</div>';return __p},this.JST["class/class-new"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<form data-name="file-move-new-form">\n	',"rename"!=type&&(__p+='\n	<div class="title_tv">\n	'),__p+='\n		<div class="new_tv">\n			<div class="input-default input_ntv" data-name="file-move-new-input-warp">\n				<input type="text" value="'+(null==(__t=name)?"":__t)+'">\n			</div>\n			<span class="btn_ntv icon-radius-success-over" data-name="file-move-new-submit"></span>\n			<span class="btn_ntv icon-radius-error-over" data-name="file-move-new-cancel"></span>\n		</div>\n	',"rename"!=type&&(__p+="\n	</div>\n	"),__p+="\n</form>";return __p},this.JST["class/class-rename"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<form data-name="rename-form">\n	<div class="input-default input_ridl" data-name="rename-inputwrap">\n		<input type="text" value="'+(null==(__t=name)?"":__t)+'">\n	</div>\n	<a class="btn btn-sure" data-name="rename-sure">确定</a>\n	<a class="btn btn-cancel" data-name="rename-cancel">取消</a>\n</form>\n';return __p},this.JST["class/class-search"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="class_search_form_container">\n	<div class="class_search_header_input">\n		<label class="class_search_condition_label" data-name="smember-condition">搜索分类</label>\n		<input  autocomplete="off" id="lableName" class="class_search_condition_input smemberInput " type="text"  name="content"></input>\n		<span class="icon-search"></span>\n	</div>\n	<div class="lable-list" id="lable-list" data-name="lable-list">\n		<ul class="lable-ul" data-name="lable-ul" id="lable-ul"></ul>\n	</div>\n</div>';return __p},this.JST["class/class-tree-component"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="class_data_pop_header">\n	'+(null==(__t=title)?"":__t)+'\n	<a href="javascript:void(0)" class="icon-dialog-closed" data-handler="Close"></a>\n</div>\n<div class="class_data_pop_content">\n	<div class="class_data_search_content_left">\n		<div class="tab">\n			<span class="class active" data-name="all">所有分类</span>\n			',1==pluginType&&(__p+='<span class="project" data-name="project">所有项目</span>'),__p+='\n		</div>\n		<div class="class_data_type_list"></div>\n	</div>\n	<div class="class_data_search_content_center">\n		<span class="smember_search_arrow_icon search_arrow_icon"></span>\n	</div>\n	<div class="class_data_search_content_right">\n		<span>已选类别</span>\n		<div class="class_data_checked_type_list"></div>\n	</div>\n</div>\n<div class="smember_footer">\n	<a href="javascript:void(0)" class="btn btn-cancel" data-handler="clean">清除全部</a>\n	<a href="javascript:void(0)" class="btn cancel_rd" data-handler="Cancel">取消</a>\n	<a href="javascript:void(0)" class="btn btn-sure sure_rd" data-handler="Submit">确定</a>\n</div>   ';return __p},this.JST["class/class-tree-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="title_tv" data-name="title">\n\n	',0==isEnd&&(__p+='\n	<span class="icon_tv" data-name="toggle"></span>\n	'),__p+="\n	","undefined"!=typeof IsTenant&&IsTenant?(__p+='\n		<span class="icon-enterprise_icon" data-name="enterprise"></span>\n		<div class="text_tv_parent">\n			<div class="text_tv text_width" data-name="title-name">'+(null==(__t=name)?"":__t)+"</div>\n			",IsAllowSetPersonalLable||(__p+='\n				<span class="m-lock icon-lock" data-name="lock-permission"></span>\n			'),__p+="\n		</div>\n	"):__p+="undefined"==typeof IsTenant||IsTenant?'\n		<div class="text_tv" data-name="title-name">'+(null==(__t=name)?"":__t)+"</div>\n	":'\n		<span class="icon-personal_img" data-name="person"></span>\n		<div class="text_tv_parent">\n			<div class="text_tv personal" data-name="title-name">'+(null==(__t=name)?"":__t)+"</div>\n		</div>\n	",__p+="\n	",0!=id&&isEdit&&(__p+="\n		","undefined"==typeof IsTenant||IsTenant||(__p+='\n			<div class="action_ttv" data-name="klass-item-action">\n				<a href="javascript:void(0);" data-name="edit" id="'+(null==(__t=id)?"":__t)+'">编辑</a>\n				<a href="javascript:void(0);" data-name="deleted" data-end="'+(null==(__t=isEnd)?"":__t)+'" id="'+(null==(__t=id)?"":__t)+'">删除</a>\n			</div> \n		'),__p+="  \n	"),__p+="\n</div>\n<ul></ul>";return __p},this.JST["class/class"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="title_rd" data-name="title">\n    <h2>我的分类</h2>\n    <span class="icon-dialog-closed closed_rd" data-name="klass-move-close"></span>\n</div>\n<div class="cont_rd">\n    <div class="tt_tree_view">\n        <div data-name="class-project-tab"></div>\n        <div data-name="search-class"></div>\n        <div data-name="tree" class="moveTreeList">\n            <div class="_tt_loading_m">努力加载中…</div>\n        </div>\n        <div data-name="empty"></div>\n    </div>\n    <div class="class_data_search_content_center">\n        <span class="smember_search_arrow_icon search_arrow_icon"></span>\n    </div>\n    <div class="class_data_search_content_right">\n        <span>已选类别</span>\n        <div class="class_data_checked_type_list" data-name=\'class-data-checked\'></div>\n    </div>\n</div>\n<div class="bottom_rd" data-name="klass-action">\n    <button class="btn btn-cancel reset_rd" data-name="klass-move-reset">清空选项</button>\n    <button class="btn btn-cancel new_rd" data-name="klass-move-new-folder">添加分类</button>\n    <button class="btn btn-cancel cancel_rd" data-name="klass-move-cancel">取消</button>\n    <button class="btn btn-sure sure_rd" data-name="klass-move-submit">确定</button>\n</div>\n';return __p},this.JST["class/work-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<span class="icon-work-small"></span><span>'+(null==(__t=WorkName)?"":__t)+"</span>";return __p},this.JST["class/work-list"]=function(obj){obj||(obj={});
{var __t,__p="";_.escape}with(obj)__p+='\n<div class="title_kw" data-name="work-title">\n	<span class="icon-minus-square" data-name="toggle"></span><span>'+(null==(__t=title)?"":__t)+'</span>\n</div>\n<ul data-name="work-list"></ul>';return __p},this.JST["class/work"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="title_rd" data-name="work-move-title">\n	<h2>'+(null==(__t=i18n.work_1)?"":__t)+'分类</h2>\n	<span class="icon-dialog-closed closed_rd" data-name="work-move-close"></span>\n</div>\n<div class="cont_rd">\n	<div class="tt_tree_view">\n		<div data-name="work-box">\n			<div class="_tt_loading_m">努力加载中…</div>\n		</div>\n		<div data-name="work-box-join"></div>\n		<div data-name="empty"></div>\n	</div>\n	<div class="class_data_search_content_center">\n		<span class="smember_search_arrow_icon search_arrow_icon"></span>\n	</div>\n	<div class="class_data_search_content_right">\n		<span>已选类别</span>\n		<div class="class_data_checked_type_list" data-name=\'class-data-checked\'></div>\n	</div>\n</div>\n<div class="bottom_rd" data-name="work-action">\n	<button class="btn btn-cancel reset_rd" data-name="work-move-reset">清空选项</button>\n	<button class="btn btn-cancel new_rd" data-name="work-move-new-folder">新建项目</button>\n	<button class="btn btn-cancel cancel_rd" data-name="work-move-cancel">取消</button>\n	<button class="btn btn-sure sure_rd" data-name="work-move-submit">确定</button>\n	\n</div>';return __p},this.JST["date-time-picker/date-time-cycle"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<h2>设置循环时间</h2>\n<div class="cycle_task_container">\n	<div class="cycle_type_list" data-name="date-time-picker-tab">\n		<ul>\n			<li cyctype="2">\n				<a href="javascript:void(0)" class="radio ',2==cycType&&(__p+="radio-checked"),__p+='"></a>\n				<span>每个工作日</span>\n			</li>\n			<li cyctype="1">\n				<a href="javascript:void(0)" class="radio ',1==cycType&&(__p+="radio-checked"),__p+='"></a>\n				<span>每天</span>\n			</li>\n			<li cyctype="3">\n				<a href="javascript:void(0)" class="radio ',3==cycType&&(__p+="radio-checked"),__p+='"></a>\n				<span>每周</span>\n			</li>\n			<li cyctype="4">\n				<a href="javascript:void(0)" class="radio ',4==cycType&&(__p+="radio-checked"),__p+='"></a>\n				<span>每月</span>\n			</li>\n		</ul>\n	</div>\n	<div class="cycle_type_date">\n		<div class="cycle_time clearfix">\n			<span>开始时间</span>\n			',(3==cycType||4==cycType)&&(__p+='\n				<div class="day_time_nst first-col">\n					<a class="triday_nst" href="javascript:void(0)" data-name="date-time-set-btn"></a>\n					<label data-name="date-time-set-btn">'+(null==(__t=cycStartDayTxt)?"":__t)+'</label>\n					<ul class="dayvalues_nst" data-name="date-time-dropdown">\n						',_.each(dateData,function(a,b){__p+="\n							<li ",cycStartDayTxt==a&&(__p+='class="cur_nst"'),__p+='>\n								<a href="javascript:void(0)" index="'+(null==(__t=b)?"":__t)+'" data-type="1">'+(null==(__t=a)?"":__t)+"</a>\n							</li>\n						"}),__p+="\n					</ul>\n				</div>\n			"),__p+='\n			<div class="day_time_nst">\n				<a class="triday_nst" href="javascript:void(0)" data-name="date-time-set-btn"></a>\n				<label data-name="date-time-set-btn">'+(null==(__t=cycStartHour)?"":__t)+'</label>\n				<ul class="dayvalues_nst"  data-name="date-time-dropdown">\n					',_.each(hours,function(a){__p+="\n						<li ",cycStartHour==a&&(__p+='class="cur_nst"'),__p+='>\n							<a href="javascript:void(0)" hour="'+(null==(__t=a)?"":__t)+'" data-type="3">'+(null==(__t=a)?"":__t)+"</a>\n						</li>\n					"}),__p+='\n				</ul>\n			</div>\n			<div class="date-time-colon">:</div>\n			<div class="day_time_nst">\n				<a class="triday_nst" href="javascript:void(0)" data-name="date-time-set-btn"></a>\n				<label data-name="date-time-set-btn">'+(null==(__t=cycStartMinute)?"":__t)+'</label>\n				<ul class="dayvalues_nst" data-name="date-time-dropdown">\n					',_.each(minites,function(a){__p+="\n						<li ",cycStartMinute==a&&(__p+='class="cur_nst"'),__p+='>\n							<a href="javascript:void(0)" minite="'+(null==(__t=a)?"":__t)+'" data-type="5">'+(null==(__t=a)?"":__t)+"</a>\n						</li>\n					"}),__p+='\n				</ul>\n			</div>\n		</div>\n		<div class="cycle_time clearfix">\n			<span>结束时间</span>\n			',(3==cycType||4==cycType)&&(__p+='\n				<div class="day_time_nst first-col">\n					<a class="triday_nst" href="javascript:void(0)" data-name="date-time-set-btn"></a>\n					<label data-name="date-time-set-btn">'+(null==(__t=cycEndDayTxt)?"":__t)+'</label>\n					<ul class="dayvalues_nst" data-name="date-time-dropdown">\n						',_.each(dateData,function(a,b){__p+="\n							<li ",cycEndDayTxt==a&&(__p+='class="cur_nst"'),__p+='>\n								<a href="javascript:void(0)" index="'+(null==(__t=b)?"":__t)+'" data-type="2">'+(null==(__t=a)?"":__t)+"</a>\n							</li>\n						"}),__p+="\n					</ul>\n				</div>\n			"),__p+='\n			<div class="day_time_nst">\n				<a class="triday_nst" href="javascript:void(0)" data-name="date-time-set-btn"></a>\n				<label data-name="date-time-set-btn">'+(null==(__t=cycEndHour)?"":__t)+'</label>\n				<ul class="dayvalues_nst" data-name="date-time-dropdown">\n					',_.each(hours,function(a){__p+="\n						<li ",cycEndHour==a&&(__p+='class="cur_nst"'),__p+=' >\n							<a href="javascript:void(0)" hour="'+(null==(__t=a)?"":__t)+'" data-type="4">'+(null==(__t=a)?"":__t)+"</a>\n						</li>\n					"}),__p+='\n				</ul>\n			</div>\n			<div class="date-time-colon">:</div>\n			<div class="day_time_nst">\n				<a class="triday_nst" href="javascript:void(0)" data-name="date-time-set-btn"></a>\n				<label data-name="date-time-set-btn">'+(null==(__t=cycEndMinute)?"":__t)+'</label>\n				<ul class="dayvalues_nst" data-name="date-time-dropdown">\n					',_.each(minites,function(a){__p+="\n						<li ",cycEndMinute==a&&(__p+='class="cur_nst"'),__p+='>\n							<a href="javascript:void(0)" minite="'+(null==(__t=a)?"":__t)+'" data-type="6">'+(null==(__t=a)?"":__t)+"</a>\n						</li>\n					"}),__p+='\n				</ul>\n			</div>\n		</div>\n	</div>\n</div>\n<div class="buttons clearfix">\n	<a href="javascript:void(0)" class="btn btn-cancel reset-cycle" data-name="data-time-picker-reset-cycle">取消循环</a>\n	<div class="right-part">\n		<a href="javascript:void(0)" class="btn btn-sure" data-name="data-time-picker-sure-cycle">确定</a>\n		<a href="javascript:void(0)" class="btn btn-cancel" data-name="data-time-picker-close-cycle">取消</a>\n	</div>\n</div>';return __p},this.JST["date-time-picker/date-time-long"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="clearfix">\n	<div class="date-long-left" data-name="date-time-long-date">\n	</div>\n	<div class="date-long-right">\n		<div class="date-check" data-name="date-time-long-check">\n			<span class="checkbox checkbox-checked" data-name="date-time-long-input"></span><span>长期</span>\n		</div>\n	</div>\n</div>\n<div class="buttons clearfix">\n	<span class="btn btn-cancel cancel-long" data-name="date-time-long-candellong">取消长期</span>\n	<span class="btn btn-cancel" data-name="date-time-long-candel">取消</span>\n	<span class="btn btn-success" data-name="date-time-long-sure">确定</span>\n</div>';return __p},this.JST["date-time-picker/date-time-picker-tab"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+="\n	",isShowDateView&&(__p+='\n	<li class="item-tab ',"date"==viewType&&(__p+="active"),__p+='" data-type="date">起止时间</li>\n	'),__p+="\n	",isShowCycleView&&(__p+='\n	<li class="item-tab ',"cycle"==viewType&&(__p+="active"),__p+='" data-type="cycle" >循环时间</li>\n	'),__p+="\n	",isShowLongView&&(__p+='\n	<li class="item-tab ',"long"==viewType&&(__p+="active"),__p+='" data-type="long" >长期</li>\n	');return __p},this.JST["date-time-picker/date-time-picker"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='\n<div class="cont-box" data-name="date-time-picker-content"></div>';return __p},this.JST["emotion/emotion-body"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){__p+='<table class="emotion-table-size-'+(null==(__t=currentData.size)?"":__t)+'">\n	';var emotions=currentData.emticons,colNum="small"==currentData.size?14:7,rowNum=Math.ceil(emotions.length/colNum),item=null;__p+="\n	";for(var i=0;rowNum>i;i++){__p+="\n		<tr>\n			";for(var j=0;colNum>j&&i*colNum+j<emotions.length;j++)__p+="\n				",item=emotions[i*colNum+j],__p+='\n				<td>\n					<span class="td-border"></span>\n					<img data-name="emotion-img" src="'+(null==(__t=currentData.host+item.address)?"":__t)+'"  title="'+(null==(__t=item.name)?"":__t)+'">\n				</td>\n			';__p+="\n		</tr>		\n	"}__p+="\n		\n</table>"}return __p},this.JST["emotion/emotion-tab"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)for(var i=0,len=data.length;len>i;i++)__p+='\n	<div class="emotion-tab-item '+(null==(__t=data[i].name==currentTab?"tab-active":"")?"":__t)+'" data-id="'+(null==(__t=data[i].name)?"":__t)+'">\n		'+(null==(__t=data[i].name)?"":__t)+"\n	</div>\n";return __p},this.JST["emotion/emotion"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="emotion-tab-container" data-name="emotion-tab-container">\n\n</div>\n<div class="emotion-body-container" data-name="emotion-body-container">\n\n</div>';return __p},this.JST["empty-view/empty"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="content_emptyinit">\n	<div class="className">'+(null==(__t=emptyContext)?"":__t)+"</div>\n</div>";return __p},this.JST["evaluation/evaluation-dimension-item"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<label class="dimension-title">'+__e(name)+'</label>\n<div class="star-list-container" data-name="star-container">\n</div>';return __p},this.JST["evaluation/evaluation-dimension"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<label class="evaluation-title">维度评分</label>\n<div class="evaluation-dimension-container eval-item">\n	<ul></ul>\n</div>';return __p},this.JST["evaluation/evaluation-edit"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<ul class="evaluation-list">\n',isShowScores&&(__p+='\n<li class="evaluation-score" data-name="evaluation-edit-score">\n</li>\n'),__p+="\n",isShowDimensions&&(__p+='\n<li class="evaluation-dimension" data-name="evaluation-edit-dimension">\n</li>\n'),__p+="\n",isShowMedal&&(__p+='\n<li class="evaluation-medal clearfix" data-name="evaluation-edit-medal">\n</li>\n'),__p+='\n<li class="evaluation-comment">\n	<label class="evaluation-title">评语</label>\n	<div class="evaluation-comment eval-item">\n		<textarea class="comment" placeholder="完成的不错，继续努力！" data-name="comment">'+__e(remark)+'</textarea>\n	</div>\n</li>\n</ul>\n<div class="evaluation-operate">\n	<span class="btn btn-sure  btn-disabled" data-name="evaluation-save">确定</span><span class="btn btn-cancel"  data-name="evaluation-cancel">取消</span>\n	\n</div>\n';return __p},this.JST["evaluation/evaluation-list-item"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)evaluateInfos.length&&(scoreInfos||medalInfos)?(__p+='\n	<div class="evaluation-item">\n	  <div class="evaluation-preview clearfix">\n	  	',editable&&(__p+='\n			<div class="preview-operate">\n				<span class="btn btn-sure" data-name="evaluation-edit">修改评价</span>\n			</div>\n		'),__p+='\n		<div class="preview-detail">\n			<div class="evaluation-user" origin-title="'+__e(user.Name)+'">\n				'+(null==(__t=_.convertImage({className:"",src:user.Avatar.Small,size:30,shape:"radius",name:user.Name,bgColor:user.Avatar.Color}))?"":__t)+'\n				\n		    </div>\n		    <ul class="preview-list">\n		    	<li class="preview-score">\n		    		 ',medalInfos.length&&(__p+='\n			    		 <div class="label-name">奖章</div>\n			    		 <div class="evaluation-result">\n			    		 	'+(null==(__t=_.TitaWidget_evaluation(medalInfos[0]))?"":__t)+"\n			    		</div>\n		    		 "),__p+="\n		    		 ",scoreInfos.length&&(__p+='\n			    		 <div class="label-name">评分</div> \n			    		 <div class="evaluation-result">\n			    		 	'+(null==(__t=_.TitaWidget_evaluation(scoreInfos[0]))?"":__t)+"\n			    		</div>\n		    		 "),__p+='\n		    	</li>\n		    	<li class="preview-comment">\n		    		<div class="label-name">评语</div>\n		    		<p class="evaluation-result">\n		    			',substringRemark!=remark?(__p+="\n			    			",__p+=0==commentShowAll?"\n			    		        "+__e(substringRemark)+'<a href="javascript:void(0);"  class="show-all" data-name="show-comment">展开</a>	\n			    		     ':"\n			    		        "+__e(remark)+'<a href="javascript:void(0);" class="show-all" data-name="show-comment">收起</a>	\n			    		     ',__p+="\n		    			"):__p+="\n							"+__e(remark)+"\n		    			",__p+="\n	    			</p>\n		    	</li>\n		    </ul>\n		    ","simple"==viewMode&&dimensionInfos&&dimensionInfos.length>0&&(__p+='\n				<a href="javascript:void(0)" class="show-detail" data-name="showDetail-top">维度评分<span class="icon-arrow-down-double"></span></a>\n			'),__p+="\n		</div>\n		",dimensionInfos.length&&(__p+='\n			<div class="evaluation-dimension" data-name="evaluation-weidu-list">\n				<ul class="clearfix" >\n					',_.each(dimensionInfos,function(a){__p+='\n			   			<li class="preview-dimension-item">\n							<label>'+__e(a.name)+'：</label>\n							<span class="item-value"><span class="score-value">'+__e(a.value)+"</span>分</span>\n						</li>\n					"}),__p+='\n				</ul>\n				<a href="javascript:void(0)" class="show-detail arrow-up" data-name="showDetail">维度评分<span class="icon-arrow-up-double"></span></a>\n			</div>\n		'),__p+=" \n	</div>  \n"):(__p+="\n	",isAdd&&(__p+='\n	<div class="evaluation-item">\n		<div class="evaluation-none">\n			<span class="text_none">'+(null==(__t=evaluationObject)?"":__t)+"</span>\n			",editable&&(__p+='\n			<span class="btn btn-sure" data-name="do-evaluation">现在评价</span>\n			'),__p+="\n		</div>\n	</div>\n	"),__p+="\n");return __p},this.JST["evaluation/evaluation-medal"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+=isShowRadio?'\n<label class="evaluation-title radio" data-name="radio">奖章鼓励</label>\n':'\n<label class="evaluation-title">奖章鼓励</label>\n',__p+='\n<div class="evaluation-medal-containner eval-item clearfix" data-name="evaluation-edit-medal">\n	',_.each(data,function(a,b){__p+="\n		",__p+=cType==a.cType&&2==type?'\n		<div class="medal medal-active-'+(null==(__t=b)?"":__t)+" medal-hover-"+(null==(__t=b)?"":__t)+'" data-ctype="'+__e(a.cType-1)+'"  data-value="'+__e(a.value)+'" data-index="'+(null==(__t=b)?"":__t)+'">\n			<span class="'+(null==(__t=a.className)?"":__t)+'-light "></span>\n			<span>'+__e(a.name)+"</span>\n		</div>\n		":'\n		<div class="medal medal-hover-'+(null==(__t=b)?"":__t)+'" data-ctype="'+__e(a.cType)+'"  data-value="'+__e(a.value)+'" data-index="'+(null==(__t=b)?"":__t)+'">\n			<span class="'+(null==(__t=a.className)?"":__t)+'"></span>\n			<span>'+__e(a.name)+"</span>\n		</div>\n		",__p+="\n	"}),__p+="\n</div>";return __p},this.JST["evaluation/evaluation-score"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="\n",__p+=isShowRadio?'\n	<label class="evaluation-title radio" data-name="radio">'+(null==(__t=name||"综合评分")?"":__t)+"</label>\n":'\n	<label class="evaluation-title">'+(null==(__t=name||"综合评分")?"":__t)+"</label>\n",__p+="\n<div class=\"evaluation-score-container eval-item\" data-name='evaluation-edit-score'></div>\n\n\n";return __p},this.JST["evaluation/evaluation-star"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj){__p+='<ul class="evaluation-star-list">\n	';for(var i=1;i<=lvl;i++){var dataValue=i*goal;__p+="\n		",__p+=dataValue<=value?'\n		   <li class="icon-star-m-active" original-title="评分:'+__e(dataValue)+'分" data-value="'+__e(dataValue)+"\" data-index='"+__e(i-1)+'\' data-name="star"></li>\n		':'\n		   <li class="icon-star-m-default" original-title="评分:'+__e(dataValue)+'分" data-value="'+__e(dataValue)+"\" data-index='"+__e(i-1)+'\' data-name="star"></li>\n		',__p+="\n    "}__p+="\n</ul>\n",value&&(__p+='\n<div class="last-score">\n	<span class="score-value">'+__e(value)+'</span><span class="value-unit">分</span>\n</div>\n')}return __p},this.JST["experience/experience"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="head-ev">填写心得</div>\n<div data-name="experience-contant"></div>';return __p},this.JST["feed/feed-action-more"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="\n	<ul>\n		",detail&&(__p+='<li data-name="feed-action-detail"><a href="'+(null==(__t=detailUrl)?"":__t)+'" target="_blank">查看详情</a></li>'),__p+="\n		",deleted&&(__p+='<li data-name="feed-action-del">删除</li>'),__p+="\n		",setTop&&(__p+='<li data-name="feed-action-top">',__p+=isTop?"取消置顶":"置顶",__p+="</li>"),__p+="\n	</ul>\n";return __p},this.JST["feed/feed-action"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="refer_fb">\n	<span class="time_fb">'+(null==(__t=createDate)?"":__t)+"</span>\n	&nbsp;&nbsp;<span>"+(null==(__t=postSource)?"":__t)+'</span>\n</div>\n<ul class="action_fb">\n	\n	',isShowReply&&(__p+='\n		<li data-name="feed-action-reply">\n			<span class="icon-dialogue"></span><span>回复</span>\n		</li>\n	'),__p+="\n	",isShowCollect&&(__p+='\n		<li class="line_afb">|</li>\n		<li data-name="feed-action-collect">\n			<span class="icon-heart"></span><span>',__p+=isCollect?"取消收藏":"收藏",__p+="</span>\n		</li>\n		\n	"),__p+="\n	",isShowPraise&&(__p+='\n		<li class="line_afb">|</li>\n		<li data-name="feed-action-praise">\n			<span class="icon-hand"></span><span>',__p+=isPraise?"取消赞":"赞",__p+="</span>\n		</li>\n	"),__p+="\n	",isShowReward&&(__p+='\n	<li class="line_afb">|</li>\n	<li data-name="feed-action-beg">\n		<span class="ico-gold-coin"></span><span>讨赏</span>\n	</li>\n	<li class="line_afb">|</li>\n	<li data-name="feed-action-reward">\n		<span class="ico-money-bag"></span><span>打赏 ',counter.dashangTotal&&(__p+=null==(__t=counter.dashangTotal)?"":__t),__p+="</span>\n	</li>\n	"),__p+="\n</ul>";return __p},this.JST["feed/feed-attachment-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n<div class="cont_afb">\n	<div class="img_afb">\n		',__p+=isImage?'\n		<img src="'+(null==(__t=smallUrl)?"":__t)+'">\n		':'\n		<span class="ico_afb file-'+(null==(__t=fileType)?"":__t)+'"></span>\n		',__p+="\n	</div>\n</div>\n\n",isImage&&1==documentSource&&(__p+='\n<span class="shade_afb" data-name="feed-attachment-preview-dialog"></span>\n<span class="icon-zoom-in zoom-afb" data-name="feed-attachment-preview-button"></span>\n\n'),__p+='\n<div class="name_afb">'+(null==(__t=fileName)?"":__t)+'</div>\n<div class="action_afb">\n	<a href="'+(null==(__t=downloadUrl)?"":__t)+'" ',3==documentSource&&(__p+='target="_blank" '),__p+=">下载</a>&nbsp;\n	",deleteable&&(__p+='\n	<a href="javascript:void(0);" data-name="attachment-deleted" id="'+(null==(__t=documentId)?"":__t)+'">删除</a>&nbsp;\n	'),__p+="\n	",isPreview&&(__p+="\n		",isImage&&1==documentSource?__p+='\n			<a href="javascript:void(0);" data-name="feed-attachment-preview">预览</a>\n		':(__p+='\n			<a href="',1==documentSource&&(__p+=null==(__t=webHost.host)?"":__t),__p+=(null==(__t=previewUrl)?"":__t)+'" target="_blank">预览</a>&nbsp;\n		'),__p+="\n	"),__p+="\n</div>\n\n";return __p},this.JST["feed/feed-attachment-list"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<ul class="list_afb"></ul>';return __p},this.JST["feed/feed-comment-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n	<div class="left_cb">\n		<a href="'+(null==(__t=webHost.webHost)?"":__t)+"#italent/home?name=TalentProfile-record&to_user_id="+(null==(__t=publishUser.userId)?"":__t)+'" traget="_blank">\n		'+(null==(__t=_.convertImage({className:"avatar_small_fl",src:publishUser.avatar.medium,size:30,shape:"radius",name:publishUser.name,bgColor:publishUser.avatar.color}))?"":__t)+'\n		</a>\n	</div>\n	<div class="right_cb">\n		<div class="dynamic_cb clearfix">\n			<span class="name_box_ccb">\n			<a href="'+(null==(__t=webHost.webHost)?"":__t)+"#italent/home?name=TalentProfile-record&to_user_id="+(null==(__t=publishUser.userId)?"":__t)+'" class="name_dcb" traget="_blank">'+(null==(__t=publishUser.name)?"":__t)+"</a>",2==commentType&&(__p+='&nbsp;回复&nbsp;<a href="'+(null==(__t=webHost.webHost)?"":__t)+"#italent/home?name=TalentProfile-record&to_user_id="+(null==(__t=parentUser.userId)?"":__t)+'" class="name_dcb">'+(null==(__t=parentUser.name)?"":__t)+'</a>&nbsp;<span class="dehua_dcb" data-name="feed-dehua" data-parent-id="'+(null==(__t=parentCommentId)?"":__t)+'">的话</span>'),__p+="\n			：</span>"+(null==(__t=content)?"":__t)+'\n		</div>\n		<div data-name="feed-comment-attachment"></div>\n		<div class="refer_cb">\n			',isPrivate&&(__p+='\n			<span class="icon-lock-thin lock_fb" data-name="feed-comment-lock" original-title=""></span>\n			'),__p+='\n			<span class="time_cb">'+(null==(__t=createDate)?"":__t)+'</span>\n			<div class="action_cb">\n				',isEdit&&(__p+='\n				<a href="javascript:void(0);" data-name="feed-comment-deleted" id="'+(null==(__t=commentId)?"":__t)+'">删除</a>&nbsp;\n				'),__p+='\n				<a href="javascript:void(0);" data-name="feed-comment-reply" id="'+(null==(__t=commentId)?"":__t)+'">回复</a>\n			</div>\n		</div>\n	</div>\n';return __p},this.JST["feed/feed-comment-list"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="\n",total&&total>4&&(__p+='\n<div class="total_fl" data-name="feed-comment-total">共<span data-name="feed-comment-total-num">'+(null==(__t=total)?"":__t)+'</span>条回复&nbsp;<b class="icon-drop-down" data-name="feed-comment-total-ico"></b></div>\n'),__p+="\n",comments&&comments.length>0&&(__p+='\n<div data-name="comment-list"></div>\n'),__p+="\n";return __p},this.JST["feed/feed-daily"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='	<dt>\n		<span class="type_stfb">'+(null==(__t=dailyType)?"":__t)+'</span>&nbsp;\n		<a href="'+(null==(__t=webHost.webHost)?"":__t)+(null==(__t=url)?"":__t)+'" class="name_stfb" target="_blank">'+(null==(__t=name)?"":__t)+"</a>\n		&nbsp;&nbsp;&nbsp;&nbsp;\n		",1==dailySubmit.type?__p+='\n		<span class="icon-right icos_dfb"></span>':2==dailySubmit.type&&(__p+='\n		<span class="icon-right-delay icos_dfb"></span>'),__p+='<span class="status_stfb">'+(null==(__t=dailySubmit.content)?"":__t)+"</span>&nbsp;&nbsp;&nbsp;&nbsp;"+(null==(__t=evaluation)?"":__t)+'\n	</dt>\n	<dd data-name="feed-daily-content">\n		 \n	</dd>';return __p},this.JST["feed/feed-extra-info-list-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<span class="key_eifb">'+(null==(__t=name)?"":__t)+"：</span>",__p+=1==valueType?'<a href="'+(null==(__t=value)?"":__t)+'" target="_blank">'+(null==(__t=value)?"":__t)+"</a>":null==(__t=value)?"":__t,__p+="\n\n";return __p},this.JST["feed/feed-item-source"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)8==feedType?(__p+="\n	",__p+=app.appUrl?'\n		<a href="'+(null==(__t=app.appUrl)?"":__t)+'" hidefocus="true" class="app_ifb" target="_blank">'+(null==(__t=app.appName)?"":__t)+"</a>\n	":'\n		<span class="app_ifb" span>'+(null==(__t=app.appName)?"":__t)+"</span>\n	",__p+="\n"):6==feedType||7==feedType||9==feedType?(__p+='\n	<a href="'+(null==(__t=webHost.webHost)?"":__t)+"#italent/home?name=TalentProfile-record&to_user_id="+(null==(__t=publishUser.userId)?"":__t)+'" hidefocus="true" class="name_ifb" traget="_blank">'+(null==(__t=_.substringWithM(publishUser.name,12,!0))?"":__t)+"</a>\n	",publishUser.userMark&&(__p+='<img src="'+(null==(__t=publishUser.userMark.logo)?"":__t)+'" original-title="'+(null==(__t=publishUser.userMark.mark_name)?"":__t)+'" class="mark_fb" data-name="feed-user-mark">'),__p+='\n	<span class="cont_ifb">'+(null==(__t=sourceTypeCont)?"":__t)+"</span>\n"):(__p+="\n	",app&&0==isInAppPage&&(__p+="\n		",__p+=app.appUrl?'\n		<a href="'+(null==(__t=app.appUrl)?"":__t)+'" hidefocus="true" class="app_ifb" target="_blank">'+(null==(__t=app.appName)?"":__t)+"</a>\n		":'\n			<span class="app_ifb" span>'+(null==(__t=app.appName)?"":__t)+"</span>\n		",__p+="\n		",2!=app&&3!=app||!app.appObjeName||(__p+='\n			<a href="'+(null==(__t=app.appObjeUrl)?"":__t)+'" hidefocus="true" class="name_ifb">'+(null==(__t=app.appObjeName)?"":__t)+'</a><span class="txt_ifb">中</span>\n		'),__p+="\n	"),__p+="\n	",obj&&0==isInAppPage&&(__p+="\n		",__p+=15==obj.objType?'\n		<span class="app_ifb" target="_blank">'+(null==(__t=obj.objName)?"":__t)+"</span> \n		":'\n		<a href="'+(null==(__t=obj.objUrl)?"":__t)+'" hidefocus="true" class="app_ifb" target="_blank">'+(null==(__t=obj.objName)?"":__t)+"</a> \n		",__p+='\n		<span class="cont_ifb">'+(null==(__t=sourceCont)?"":__t)+"</span>\n		\n	"),__p+='\n	<a href="'+(null==(__t=webHost.webHost)?"":__t)+"#italent/home?name=TalentProfile-record&to_user_id="+(null==(__t=publishUser.userId)?"":__t)+'" hidefocus="true" class="name_ifb" traget="_blank">\n		'+(null==(__t=_.substringWithM(publishUser.name,12,!0))?"":__t)+"</a>",publishUser.userMark&&(__p+='<img src="'+(null==(__t=publishUser.userMark.logo)?"":__t)+'" original-title="'+(null==(__t=publishUser.userMark.mark_name)?"":__t)+'" class="mark_fb" data-name="feed-user-mark">'),__p+='\n	<span class="cont_ifb">'+(null==(__t=sourceTypeCont)?"":__t)+"</span>\n"),__p+="\n",counter&&counter.dashangTotal&&(__p+='<span class="dashang_ico" data-name="dashang-ico" original-title="收到打赏"></span>'),__p+="\n",isTop&&(__p+='<span class="top_fl"></span>'),__p+="\n\n";return __p},this.JST["feed/feed-item"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="left_fb" data-name="feed-left">\n	\n</div>\n<div class="right_fb">\n	<div data-name="feed-main"></div>\n	<div data-name="feed-content"></div>\n	<div data-name="feed-actoin"></div>\n</div>\n<div class="submain_fb" data-name="feed-sub-main">\n	<div data-name="feed-comment"></div>\n</div>\n<div data-name="feed-pubblog"></div>';return __p},this.JST["feed/feed-left"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)app&&0==isInAppPage?(__p+="\n	\n	\n	",203==appId&&6==feedType&&obj&&4==obj.objType&&3==obj.objSubType||7==feedType||9==feedType?__p+='\n		<a href="'+(null==(__t=webHost.webHost)?"":__t)+"#italent/home?name=TalentProfile-record&to_user_id="+(null==(__t=publishUser.userId)?"":__t)+'" hidefocus="true" traget="_blank">\n	'+(null==(__t=_.convertImage({className:"avatar_fl",src:publishUser.avatar.medium,size:50,shape:"radius",name:publishUser.name,bgColor:publishUser.avatar.color}))?"":__t)+"\n	":(__p+="\n		",app.appObj?(__p+="\n			",__p+=app.appObj.appObjUrl?'\n			<a href="'+(null==(__t=app.appObj.appObjUrl)?"":__t)+'"><img width="50" height="50" src="'+(null==(__t=app.appObj.appObjLogo)?"":__t)+'" alt="图片" class="avatar_fl radius_img50" traget="_blank" /></a>\n			':'\n				<img width="50" height="50" src="'+(null==(__t=app.appObj.appObjLogo)?"":__t)+'" alt="图片" class="avatar_fl radius_img50" traget="_blank" />\n			',__p+="\n		"):(__p+="\n			",__p+=app.url?'\n			<a href="'+(null==(__t=app.url)?"":__t)+'"><img width="50" height="50" src="'+(null==(__t=app.appLogo)?"":__t)+'" alt="图片" class="avatar_fl radius_img50" traget="_blank" /></a>\n			':'\n			<img width="50" height="50" src="'+(null==(__t=app.appLogo)?"":__t)+'" alt="图片" class="avatar_fl radius_img50" traget="_blank" />\n			',__p+="\n		"),__p+="\n		\n	"),__p+="\n\n\n\n"):(__p+="\n	","undefined"!=typeof obj&&obj&&0==isInAppPage?(__p+="\n		",__p+=3==obj.objType||4==obj.objType?'\n			<a href="'+(null==(__t=obj.objUrl)?"":__t)+'" hidefocus="true"><img width="50" height="50" src="'+(null==(__t=obj.objLogo)?"":__t)+'" alt="图片" class="avatar_fl radius_img50" traget="_blank" /></a>\n		':15==obj.objType?"\n			"+(null==(__t=_.convertImage({className:"avatar_fl",src:"",size:50,shape:"radius",name:obj.objName,bgColor:obj.objColor}))?"":__t)+"\n		":'\n			<a href="'+(null==(__t=webHost.webHost)?"":__t)+"#italent/home?name=TalentProfile-record&to_user_id="+(null==(__t=publishUser.userId)?"":__t)+'" hidefocus="true" traget="_blank">\n			'+(null==(__t=_.convertImage({className:"avatar_fl",src:publishUser.avatar.medium,size:50,shape:"radius",name:publishUser.name,bgColor:publishUser.avatar.color}))?"":__t)+"\n			</a>\n		",__p+="\n	"):__p+='\n		<a href="'+(null==(__t=webHost.webHost)?"":__t)+"#italent/home?name=TalentProfile-record&to_user_id="+(null==(__t=publishUser.userId)?"":__t)+'" hidefocus="true" traget="_blank">\n		'+(null==(__t=_.convertImage({className:"avatar_fl",src:publishUser.avatar.medium,size:50,shape:"radius",name:publishUser.name,bgColor:publishUser.avatar.color}))?"":__t)+"\n		</a>\n	",__p+="\n");return __p},this.JST["feed/feed-list"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+='\n<div data-name="feed-list-box"></div>\n',isEnd||(__p+='\n<div class="more_fl" data-name="feed-more">\n	<span data-name="feed-more-text">查看更多</span>&nbsp;<span class="icon-arrow-down"></span>\n</div>\n');return __p},this.JST["feed/feed-main"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n<div class="edit_fb" data-name="feed-top-action">\n	',isShowSlideMore&&(__p+='\n	<span class="down_fb" data-name="feed-action-slide"><b class="icon-arrow-down"></b></span>\n	'),__p+='\n</div>\n<div class="lock_area_fb">\n	',isPrivate&&(__p+='<span class="icon-lock-round lock_lafb"></span>'),__p+=(null==(__t=privateTipText)?"":__t)+'\n</div>\n<div class="info_fb" data-name="feed-source">\n	\n</div>\n<div class="clearfix clear_fb"></div>\n\n';return __p},this.JST["feed/feed-okr"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n<div class="right_wfb">\n\n	<div class="person_wfb">\n		',__p+=2!=status&&principalUser?"\n		当前处理人："+(null==(__t=_.substringWithM(principalUser.name,12,!0))?"":__t)+'\n		<a href="'+(null==(__t=webHost.webHost)?"":__t)+"#italent/home?name=TalentProfile-record&to_user_id="+(null==(__t=principalUser.userId)?"":__t)+'" hidefocus="true" traget="_blank">\n		'+(null==(__t=_.convertImage({className:"avatar_small_fl",src:principalUser.avatar.small,size:30,shape:"radius",name:principalUser.name,bgColor:principalUser.avatar.color}))?"":__t)+"\n		</a>\n		":'\n		评分：<span class="score_wfb">'+(null==(__t=score)?"":__t)+"</span>分\n		",__p+='\n	</div>\n	<div class="time_wtb">\n			'+(null==(__t=startDate)?"":__t)+"—"+(null==(__t=deadline)?"":__t)+'\n	</div>\n</div>\n\n<dl class="cont_wfb">\n	<dt>\n		<div class="type_wfb"><span class="icon_wfb icon-xs-403"></span>考核</div>\n		<div class="title_wfb">\n			<a href="'+(null==(__t=url)?"":__t)+'" class="name_tfb" data-name="feed-task-name" target="_blank">'+(null==(__t=assessName)?"":__t)+'</a>\n		</div>\n	</dt>\n	<dd data-name="feed-work-flow">\n		\n		\n	</dd>\n</dl>\n\n';return __p},this.JST["feed/feed-plan"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<dt>\n	<span class="type_stfb">\n		',__p+=2==feedType?"\n		目标\n		":3==feedType?"\n		考核表\n		":"\n		计划表\n		",__p+="\n	</span>\n	",__p+=app?'\n		<a href="'+(null==(__t=app.appObjeUrl)?"":__t)+'" hidefocus="true" class="skip_mmfed" target="_blank">'+(null==(__t=app.appObjeName)?"":__t)+"</a>\n	":'\n		<a href="'+(null==(__t=planTableUrl)?"":__t)+'" class="name_stfb">'+(null==(__t=planTableName)?"":__t)+"</a>\n	",__p+="\n</dt>\n";return __p},this.JST["feed/feed-praise"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n	<div class="cont_pfb">\n		<span class="icon-hand-round-',__p+=isPraise?"-active":"highlight",__p+=' icos_prb" data-name="feed-praise-praise"></span>\n		',total>10&&(__p+='<span data-name="feed-praise-all">'),__p+="\n		",_.each(praisesList,function(a,b){__p+='\n		<a href="'+(null==(__t=a.url)?"":__t)+'">'+(null==(__t=a.name)?"":__t)+"</a>",b+1<praisesList.length&&(__p+=","),__p+="\n		"
}),__p+="&nbsp;",total>10&&(__p+="等&nbsp;"+(null==(__t=total)?"":__t)+"&nbsp;"),__p+="人觉得很赞",total>10&&(__p+="</span>"),__p+="\n	</div>\n";return __p},this.JST["feed/feed-share"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="\n",isShowIco&&(__p+='<span class="icon-quotes-left"></span>&nbsp;'),__p+="\n"+(null==(__t=content)?"":__t)+"\n",contentMax&&(__p+="\n\n	",__p+=contentShowAll?'\n	<a href="javascript:void(0);" class="slide_fb" data-name="content-slide">收起&nbsp;<b class="icon-drop-up" ></b></a>\n	':'\n	<a href="javascript:void(0);" class="slide_fb" data-name="content-slide">展开&nbsp;<b class="icon-drop-down" ></b></a>\n	',__p+="\n"),__p+="\n",isShowIco&&(__p+='&nbsp;<span class="icon-quotes-right"></span>'),__p+="\n";return __p},this.JST["feed/feed-signin-track"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="\n",_.each(timeSites,function(a,b){__p+="\n<li ",b==timeSites.length-1&&(__p+='class="end_ssfb"'),__p+=">\n	",__p+=0==b?'\n		<span class="icon-round-up-star"></span>\n	':'\n		<span class="icon-round-down-end"></span>\n	',__p+='\n	<span class="time_ssfb">'+(null==(__t=a.time)?"":__t)+'</span><span class="text_ssfb">签到地点：'+(null==(__t=a.site)?"":__t)+"</span>\n	",timeSites.length>defaultCount&&b==timeSites.length-1&&(__p+='\n	&nbsp;&nbsp;&nbsp;&nbsp;\n	<a href="javascript:void(0);" class="slide_fb" data-name="feed-signin-slide">\n		',__p+=singinTrackShowAll?'\n		收起（5）<b class="icon-drop-up"></b>\n		':'\n		展开（5）<b class="icon-drop-down"></b>\n		',__p+="\n	</a>\n	"),__p+="\n</li>\n\n"});return __p},this.JST["feed/feed-signin"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="cont_sfb">\n	<span class="type_sfb">移动签到</span>\n	<span class="name_sfb">'+(null==(__t=date)?"":__t)+'</span>\n	&nbsp;&nbsp;&nbsp;&nbsp;<span class="des_dfb">工作计时：</span><span class="full_sfb">'+(null==(__t=workHours)?"":__t)+"小时</span>\n</div>\n";return __p},this.JST["feed/feed-step"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<span class="des_wfb">进度</span>\n<ul class="workflow_fb clearfix ',2==status&&(__p+="complete-all"),__p+='">\n	',_.each(step,function(a,b){__p+="\n		",2==status&&b==step.length-1?__p+='\n		<li class="'+(null==(__t=a.className)?"":__t)+' active">\n			<div class="content"><span class="ico-complete"></span>&nbsp;'+(null==(__t=a.stepName)?"":__t)+"</div>\n		</li>\n		":2==a.status?__p+='\n		<li class="active">\n			<div class="content">'+(null==(__t=a.stepName)?"":__t)+"</div>\n		</li>\n		":(__p+='\n			<li class="'+(null==(__t=a.className)?"":__t)+" ",b==step.length-1&&(__p+="last_wfb"),__p+='" ',__p+=4==step.length?'\n					style="width:15.62%"\n				':'\n					style="width:23%"\n				',__p+='>\n				<div class="content">\n					',total>4&&1==a.status&&0==b?__p+='\n						<span class="ico-omit-highlight"></span>\n					':total>4&&2!=a.status&&3==b?__p+='\n						<span class="ico-omit"></span>\n					':1==a.status?__p+='\n						<span class="ico-complete"></span>\n					':3==a.status&&(__p+="\n						\n					"),__p+="\n				</div>\n			</li>\n		"),__p+="\n	"}),__p+="\n</ul>";return __p},this.JST["feed/feed-tab-item-v2"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<a href="javascript:void(0);" data-trigger="false" class="item-a">\n	<span data-name="title" class="name" >'+(null==(__t=name)?"":__t)+"</span>\n	\n	",1==id?__p+='\n	<span class="red-remind" data-name="feed-aboutme-indicator"></span>\n	':50==id&&(__p+='\n	<span class="red-remind" data-name="feed-all-indicator"></span>\n	'),__p+="\n</a>\n",1==type&&(__p+='\n	<span data-name="dropdown" class="dropdown-btn"  id="'+(null==(__t=id)?"":__t)+'"><span class="icon-arrow-down"></span></span>\n');return __p},this.JST["feed/feed-tab-list"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div data-name="feed-tab"></div>\n<div data-name="feed-list"></div>\n<div data-name="feed-list-empty"></div>\n';return __p},this.JST["feed/feed-tab-v2"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='\n<ul class="nav_tabs" data-name="feed-nav"></ul>\n<div data-name="feed-search" class="feed-search"></div>\n\n\n\n\n';return __p},this.JST["feed/feed-tab"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\n<ul class="nav_tabs" data-name="feed-nav">\n	<li data-name="aboutme-all" class="item">\n		<a href="'+(null==(__t=hash)?"":__t)+'feedType=aboutme-all" class="item-a" data-trigger="false"><span class="name">'+(null==(__t=i18n.myfollowfeed_1)?"":__t)+'</span></a>\n		<span class="red-remind" data-name="feed-aboutme-indicator"></span>\n	</li>\n	<li class="item">\n		<a href="'+(null==(__t=hash)?"":__t)+'feedType=department"  class="item-a" data-trigger="false"><span class="name">部门动态</span></a>\n		<span class="red-remind" data-name="feed-department-indicator"></span>\n	</li>\n	<li class="item">\n		<a href="'+(null==(__t=hash)?"":__t)+'feedType=all"  class="item-a" data-trigger="false"><span class="name">'+(null==(__t=i18n.myallfeed_1)?"":__t)+'</span></a>\n		<span class="red-remind" data-name="feed-all-indicator"></span>\n	</li>\n</ul>\n<div data-name="feed-search" class="feed-search"></div>\n<ul class="sub-tab-nav" data-name="feed-sub-nav">\n	<li class="active"><a href="'+(null==(__t=hash)?"":__t)+'feedType=aboutme-all"  data-trigger="false">所有</a></li>\n	<li><a href="'+(null==(__t=hash)?"":__t)+'feedType=aboutme-replyme" data-trigger="false">'+(null==(__t=i18n.myreplayfeed_1)?"":__t)+'</a></li>\n	<li><a href="'+(null==(__t=hash)?"":__t)+'feedType=aboutme-tome" data-trigger="false">'+(null==(__t=i18n.myleavefeed_1)?"":__t)+'</a></li>\n	<li><a href="'+(null==(__t=hash)?"":__t)+'feedType=aboutme-fromme" data-trigger="false">'+(null==(__t=i18n.mypublishfeed_1)?"":__t)+'</a></li>\n	<li><a href="'+(null==(__t=hash)?"":__t)+'feedType=aboutme-collect" data-trigger="false">'+(null==(__t=i18n.mycollectfeed_1)?"":__t)+"</a></li>\n</ul>\n\n\n\n";return __p},this.JST["feed/feed-task-app"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n<div class="right_tfb">\n\n	<span class="status_tfb icon-status-'+(null==(__t=status)?"":__t)+'"></span>\n	<div class="person_tfb">\n		',counter.workTimeTotal>0&&(__p+='\n		<b class="hour_tfb">\n			<span class="icon-work-hour-small"></span>\n			'+(null==(__t=counter.workTimeTotal)?"":__t)+"\n		</b>\n		"),__p+="\n		",(principalUser&&principalUser.userId)!=publishUser.userId?(__p+='\n			<a href="'+(null==(__t=webHost.webHost)?"":__t)+"#italent/home?name=TalentProfile-record&to_user_id="+(null==(__t=publishUser.userId)?"":__t)+'" hidefocus="true" traget="_blank">\n				'+(null==(__t=_.convertImage({className:"avatar_small_fl",src:publishUser.avatar.small,size:30,shape:"radius",name:publishUser.name,bgColor:publishUser.avatar.color}))?"":__t)+"\n			</a>\n			",__p+=app&&901==app.appId?"提交给":"安排给",__p+="\n		"):__p+="\n		负责人："+(null==(__t=_.substringWithM(principalUser.name,12,!0))?"":__t)+"\n		",__p+='\n		<a href="'+(null==(__t=webHost.webHost)?"":__t)+"#italent/home?name=TalentProfile-record&to_user_id="+(null==(__t=principalUser.userId)?"":__t)+'" hidefocus="true" traget="_blank">\n		'+(null==(__t=_.convertImage({className:"avatar_small_fl",src:principalUser.avatar.small,size:30,shape:"radius",name:principalUser.name,bgColor:principalUser.avatar.color}))?"":__t)+'\n		</a>\n	</div>\n	<div class="time_ftb">\n		',evaluation||"2"==status?__p+="\n			"+(null==(__t=evaluation)?"":__t)+"\n		":(__p+="\n			",__p+="undefined"!=typeof isLongTerm&&isLongTerm?"\n			长期":null==(__t=date)?"":__t,__p+="\n		"),__p+='\n	</div>\n</div>\n\n<dl class="cont_tfb">\n	<dt>\n		<span class="type_tfb">',isCycle&&(__p+="循环"),__p+=(null==(__t=typeName)?"":__t)+"</span>\n		<div>\n			",__p+=isPush?'\n				<a href="'+(null==(__t=webHost.host)?"":__t)+(null==(__t=url)?"":__t)+'" class="name_tfb" data-name="feed-task-name" target="_blank">'+(null==(__t=taskName)?"":__t)+"</a>\n			":'\n				<a href="'+(null==(__t=webHost.host)?"":__t)+(null==(__t=url)?"":__t)+'" class="name_tfb" target="_blank">'+(null==(__t=taskName)?"":__t)+"</a>\n			",__p+='\n			<b class="icos_tfb">\n				',counter.taskTotal>0&&(__p+='\n					<span class="icon-plan-task item_icon_tfb" original-title="有任务"></span>\n					<span>'+(null==(__t=counter.taskTotal)?"":__t)+"</span>\n				"),__p+="\n				",counter.businessTripTotal>0&&(__p+='\n					<span class="icon-plan-trip item_icon_tfb" original-title="有出差"></span>\n					<span>'+(null==(__t=counter.businessTripTotal)?"":__t)+"</span>\n				"),__p+="\n				",counter.experienceTotal>0&&(__p+='\n					<span class="icon-plan-summarize item_icon_tfb" original-title="有心得"></span>\n					<span>'+(null==(__t=counter.experienceTotal)?"":__t)+"</span>\n				"),__p+="\n				",counter.meetTotal>0&&(__p+='\n					<span class="icon-plan-meeting item_icon_tfb" original-title="有会议"></span>\n					<span>'+(null==(__t=counter.meetTotal)?"":__t)+"</span>\n				"),__p+="\n				",counter.attachmentTotal>0&&(__p+='\n					<span class="icon-plan-attachment item_icon_tfb" original-title="有附件"></span>\n					<span>'+(null==(__t=counter.attachmentTotal)?"":__t)+"</span>\n				"),__p+='\n			</b>\n		</div>\n	</dt>\n	<dd>\n		<span class="des_tfb">',__p+=description?null==(__t=description)?"":__t:"暂无描述",__p+="</span>\n	</dd>\n</dl>\n\n";return __p},this.JST["feed/feed-task"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n<div class="right_tfb">\n\n	<span class="status_tfb icon-status-'+(null==(__t=status)?"":__t)+'"></span>\n	<div class="person_tfb">\n		',counter.workTimeTotal>0&&(__p+='\n		<b class="hour_tfb">\n			<span class="icon-work-hour-small"></span>\n			'+(null==(__t=counter.workTimeTotal)?"":__t)+"h\n		</b>\n		"),__p+="\n		",(principalUser&&principalUser.userId)!=publishUser.userId?(__p+='\n			<a href="'+(null==(__t=webHost.webHost)?"":__t)+"#italent/home?name=TalentProfile-record&to_user_id="+(null==(__t=publishUser.userId)?"":__t)+'" hidefocus="true" traget="_blank">\n				'+(null==(__t=_.convertImage({className:"avatar_small_fl",src:publishUser.avatar.small,size:30,shape:"radius",name:publishUser.name,bgColor:publishUser.avatar.color}))?"":__t)+"\n			</a>\n			",__p+=app&&901==app.appId?"提交给":"安排给",__p+="\n		"):__p+="\n		负责人："+(null==(__t=_.substringWithM(principalUser.name,12,!0))?"":__t)+"\n		",__p+='\n		<a href="'+(null==(__t=webHost.webHost)?"":__t)+"#italent/home?name=TalentProfile-record&to_user_id="+(null==(__t=principalUser.userId)?"":__t)+'" hidefocus="true" traget="_blank">\n		'+(null==(__t=_.convertImage({className:"avatar_small_fl",src:principalUser.avatar.small,size:30,shape:"radius",name:principalUser.name,bgColor:principalUser.avatar.color}))?"":__t)+'\n		</a>\n	</div>\n	<div class="time_ftb">\n		',evaluation||"2"==status?__p+="\n			"+(null==(__t=evaluation)?"":__t)+"\n		":(__p+="\n			",__p+="undefined"!=typeof isLongTerm&&isLongTerm?"\n			长期":null==(__t=date)?"":__t,__p+="\n		"),__p+='\n	</div>\n</div>\n\n<dl class="cont_tfb">\n	<dt>\n		<span class="type_tfb">',isCycle&&(__p+="循环"),__p+=(null==(__t=typeName)?"":__t)+"</span>\n		<div>\n			",__p+=isPush?'\n				<a href="'+(null==(__t=webHost.host)?"":__t)+(null==(__t=url)?"":__t)+'" class="name_tfb" data-name="feed-task-name" target="_blank">'+(null==(__t=taskName)?"":__t)+"</a>\n			":'\n				<a href="'+(null==(__t=webHost.host)?"":__t)+(null==(__t=url)?"":__t)+'" class="name_tfb" target="_blank">'+(null==(__t=taskName)?"":__t)+"</a>\n			",__p+='\n			<b class="icos_tfb">\n				',counter.taskTotal>0&&(__p+='\n					<span class="icon-plan-task item_icon_tfb" original-title="有任务"></span>\n					<span>'+(null==(__t=counter.taskTotal)?"":__t)+"</span>\n				"),__p+="\n				",counter.businessTripTotal>0&&(__p+='\n					<span class="icon-plan-trip item_icon_tfb" original-title="有出差"></span>\n					<span>'+(null==(__t=counter.businessTripTotal)?"":__t)+"</span>\n				"),__p+="\n				",counter.experienceTotal>0&&(__p+='\n					<span class="icon-plan-summarize item_icon_tfb" original-title="有心得"></span>\n					<span>'+(null==(__t=counter.experienceTotal)?"":__t)+"</span>\n				"),__p+="\n				",counter.meetTotal>0&&(__p+='\n					<span class="icon-plan-meeting item_icon_tfb" original-title="有会议"></span>\n					<span>'+(null==(__t=counter.meetTotal)?"":__t)+"</span>\n				"),__p+="\n				",counter.attachmentTotal>0&&(__p+='\n					<span class="icon-plan-attachment item_icon_tfb" original-title="有附件"></span>\n					<span>'+(null==(__t=counter.attachmentTotal)?"":__t)+"</span>\n				"),__p+='\n			</b>\n		</div>\n	</dt>\n	<dd>\n		<div class="label_tfb" data-name="feed-lable">\n			',4==labelType?__p+='\n			<span class="icon-work-small ico_tfb"></span>\n			':labelType&&(__p+='\n			<span class="icon-app-micro-'+(null==(__t=labelType)?"":__t)+' ico_tfb"></span>\n			'),__p+="<span>"+(null==(__t=labelName)?"":__t)+'</span>\n		</div>\n		<span class="des_tfb">',__p+=description?null==(__t=description)?"":__t:"暂无描述",__p+="</span>\n	</dd>\n</dl>\n\n";return __p},this.JST["feed/feed-track"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n<div class="hr_fb">\n	<div class="left_hr"></div>\n	<div class="line_hr"></div>\n	<div class="right_hr"></div>\n</div>\n<div class="track_fb">\n	',total>defaultCount&&(__p+='\n	<div class="total_fl" data-name="task-track-slide">共<span data-name="feed-comment-total-num">'+(null==(__t=total)?"":__t)+"</span>条操作&nbsp;",__p+=taskTrackShowAll?'<b class="icon-drop-up"></b>':'<b class="icon-drop-down"></b>',__p+="</div>\n	"),__p+="\n\n	<dl>\n		",_.each(comments,function(a,b){__p+="\n		",__p+=1==comments.length?'\n			<dd class="one_tkfb">\n		':b==comments.length-1?'\n			<dd class="last_tkfb">\n		':"\n			<dd>\n		",__p+='\n			<div class="left_tkfb">\n				',b==comments.length-1?__p+='\n				<span class="icon-note-fixed ico_tkfb"></span><span class="date_tkfb new_tkfb">'+(null==(__t=a.dealCreateDate)?"":__t)+"</span>\n				":(__p+="\n					",a.isShowIco&&(__p+='<span class="icon-point-round ico_tkfb"></span>'),__p+='<span class="date_tkfb">'+(null==(__t=a.dealCreateDate)?"":__t)+"</span>\n				"),__p+='\n			</div>\n			<div class="cont_tkfb">\n				',a.publishUser&&(__p+="\n				"+(null==(__t=_.substringWithM(a.publishUser.name,12,!0))?"":__t)+":&nbsp;&nbsp;"),__p+=(null==(__t=a.content)?"":__t)+"\n			</div>\n			\n		"}),__p+="\n	</dl>\n</div>";return __p},this.JST["feed/feed-type8"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)app.appObj&&(__p+='\n<dl class="cont_wfb">\n	<dt>\n		<div class="type_wfb"><span class="icon_wfb icon-xs-906"></span><span>'+(null==(__t=app.appObj.appObjName)?"":__t)+"</span></div>\n		<div>\n			",__p+=app.appObj.appObjUrl&&""!=app.appObj.appObjUrl?'\n				<a href="'+(null==(__t=app.appObj.appObjUrl)?"":__t)+'" class="name_wfb" data-name="feed-task-name" target="_blank">'+(null==(__t=app.appObj.appObjTitle)?"":__t)+"</a>\n			":'\n				<span class="name_wfb" data-name="feed-task-name">'+(null==(__t=app.appObj.appObjTitle)?"":__t)+"</span>\n			",__p+="\n		</div>\n	</dt>\n</dl>\n"),__p+="\n\n";return __p},this.JST["feed/feed-type9"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n<div class="right_wfb">\n\n	<div class="person_wfb">\n		',"principalUser"!=typeof obj&&principalUser&&(__p+="\n		当前处理人："+(null==(__t=_.substringWithM(principalUser.name,12,!0))?"":__t)+'\n		<a href="'+(null==(__t=webHost.webHost)?"":__t)+"#italent/home?name=TalentProfile-record&to_user_id="+(null==(__t=principalUser.userId)?"":__t)+'" hidefocus="true" traget="_blank">\n		'+(null==(__t=_.convertImage({className:"avatar_small_fl",src:principalUser.avatar.small,size:30,shape:"radius",name:principalUser.name,bgColor:principalUser.avatar.color}))?"":__t)+"\n		</a>\n		"),__p+='\n	</div>\n</div>\n\n<dl class="cont_wfb">\n	<dt>\n		<div class="type_wfb"><span class="icon_wfb icon-xs-403"></span>'+(null==(__t=app.appObj.appObjName)?"":__t)+'</div>\n		<div class="title_wfb">\n			<a href="'+(null==(__t=app.appObj.appObjUrl)?"":__t)+'" class="name_tfb" data-name="feed-task-name" target="_blank">'+(null==(__t=app.appObj.appObjTitle)?"":__t)+'</a>\n		</div>\n	</dt>\n	<dd data-name="feed-work-flow">\n		\n		\n	</dd>\n</dl>\n\n';return __p},this.JST["feed/feed-work"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n<div class="right_wfb">\n\n	<span class="status_wfb icon-status-'+(null==(__t=status)?"":__t)+'"></span>\n	<div class="person_wfb">\n		',counter.workTimeTotal>0&&(__p+='\n		<b class="hour_wfb">\n			<span class="icon-work-hour-small"></span>\n			'+(null==(__t=counter.workTimeTotal)?"":__t)+"\n		</b>\n		"),__p+="\n		",(principalUser&&principalUser.userId)!=publishUser.userId?(__p+='\n			<a href="'+(null==(__t=webHost.webHost)?"":__t)+"#italent/home?name=TalentProfile-record&to_user_id="+(null==(__t=publishUser.userId)?"":__t)+'" hidefocus="true" traget="_blank">\n				'+(null==(__t=_.convertImage({className:"avatar_small_fl",src:publishUser.avatar.small,size:30,shape:"radius",name:publishUser.name,bgColor:publishUser.avatar.color}))?"":__t)+"\n			</a>\n			",__p+=app&&901==app.appId?"提交给":"安排给",__p+="\n		"):__p+="\n		负责人："+(null==(__t=_.substringWithM(principalUser.name,12,!0))?"":__t)+"\n		",__p+='\n		<a href="'+(null==(__t=webHost.webHost)?"":__t)+"#italent/home?name=TalentProfile-record&to_user_id="+(null==(__t=principalUser.userId)?"":__t)+'" hidefocus="true" traget="_blank">\n		'+(null==(__t=_.convertImage({className:"avatar_small_fl",src:principalUser.avatar.small,size:30,shape:"radius",name:principalUser.name,bgColor:principalUser.avatar.color}))?"":__t)+'\n		</a>\n	</div>\n	<div class="time_wtb">\n		',evaluation||"2"==status?__p+="\n			"+(null==(__t=evaluation)?"":__t)+"\n		":(__p+="\n			",__p+="undefined"!=typeof isLongTerm&&isLongTerm?"\n			长期":null==(__t=date)?"":__t,__p+="\n		"),__p+='\n	</div>\n</div>\n\n<dl class="cont_wfb">\n	<dt>\n		<div class="type_wfb"><span class="icon_wfb icon-xs-'+(null==(__t=labIcoType.ico)?"":__t)+'"></span>'+(null==(__t=labIcoType.text)?"":__t)+'</div>\n		<div>\n			<a href="'+(null==(__t=webHost.host)?"":__t)+(null==(__t=obj&&obj.objUrl)?"":__t)+'" class="name_tfb" data-name="feed-task-name" target="_blank">'+(null==(__t=workName)?"":__t)+'</a>\n		\n		</div>\n	</dt>\n	<dd>\n		<span class="des_wfb">',__p+=description?null==(__t=description)?"":__t:"暂无描述",__p+="</span>\n	</dd>\n</dl>\n\n";return __p},this.JST["feed/search-form"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<form>\r\n<div class="input-default">\r\n	<a href="javascript:void(0);" title="" class="button_sfl" data-type="submit-content" ><span class="icon-search"></span></a>\r\n	<input type="text" data-type="new-content" autocomplete="off" />\r\n</div>\r\n</form>';return __p},this.JST["img-preview/img-preview-content-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="img_ip"><img src="'+(null==(__t=smallUrl)?"":__t)+'" ></div>';return __p},this.JST["img-preview/img-preview-content"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="bg_ip" data-name="img-preview-overlay" style="width:'+(null==(__t=dialogW)?"":__t)+"px;height:"+(null==(__t=dialogH)?"":__t)+'px"></div>\n\n<div class="wrap_ip">\n	<div class="contant_ip">\n		<div class="origin_ip">\n			<span class="icon-img-left left_oip" data-name="origin-left" style="margin-top:'+(null==(__t=originPageTop)?"":__t)+'px"></span>\n			<span class="icon-img-right right_oip" data-name="origin-right" style="margin-top:'+(null==(__t=originPageTop)?"":__t)+'px"></span>\n			<div class="see_ip" data-name="origin-box">\n				<img src="" width="100" height="100"  data-name="origin-img">\n			</div>\n			\n		</div>\n		<div class="thumbnail_ip">\n			<div class="action_tip" data-name="thumb-pre"><span class="icon-img-pre-small"></span></div>\n			<div class="list_tip" data-name="thumb-list-box">\n				<ul data-name="thumb-list">\n				</ul>\n			</div>\n			<div class="action_tip" data-name="thumb-next"><span class="icon-img-next-small"></span></div>\n		</div>\n		\n		\n	</div>\n	<div data-name="img-preview-info"></div>\n</div>\n';return __p},this.JST["img-preview/img-preview-info"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<span class="name_">'+(null==(__t=fileName)?"":__t)+'</span>\n<ul class="action_ip">\n	<li><span class="icon-img-origin"></span><a href="'+(null==(__t=previewUrl)?"":__t)+'" target="_blank">原文件</a></li>\n	<li><span class="icon-img-down"></span><a href="'+(null==(__t=downloadUrl)?"":__t)+'">下载</a></li>\n	<!-- <li id="'+(null==(__t=documentId)?"":__t)+'" data-name="img-preview-delete"><span class="icon-img-delete"></span><a href="javascript:void(0);">删除</a></li> -->\n</ul>';return __p},this.JST["img-preview/img-preview"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+="";return __p},this.JST["membership/membership-tab-component"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="membership_right">\n	<div class="membership_tab_top" ',showShare||(__p+='style="background-color:#eee;"'),__p+='>\n		<ul class="membership_tab_title">\n			<li data-name="membership" data-trigger="false"><span original-title="团队" class="membership_icon_st"></span><a href="javascript:void(0)">团队</a></li>\n			',showShare&&(__p+='\n				<li data-name="share" data-trigger="false"><span original-title="共享" class="membership_icon_share"></span><a href="javascript:void(0)">共享</a></li>\n			'),__p+='	\n		</ul>\n	</div>\n	<div class="membership_arrow membership_arrow_left">\n		<span class="membership_arrow_icon"></span>\n		<span class="membership_arrow_line"></span>\n	</div>\n	<div id="membership_tab"></div>\n</div>';return __p},this.JST["membership/membership-tab-composite"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<li class="membership_item_container" style="position:relative" data-id='+(null==(__t=Id)?"":__t)+" level="+(null==(__t=level)?"":__t)+">\n	",3==level?(__p+='\n		<div class="membership_item_long membership_item_level_'+(null==(__t=level)?"":__t)+" ",1==Type&&(__p+=" membership_item_dashed"),__p+='">\n			<div class="membership_image_container">\n				'+(null==(__t=_.convertImage({className:"membership_image_large",shape:"radius",size:50,src:UserAvatar.Medium,name:Name,bgColor:UserAvatar.Color}))?"":__t)+"\n				",subordinateCount>0&&!Type&&(__p+='\n					<div class="membreship_subordinate_btn">\n						<span></span>\n					</div>\n				'),__p+='\n			</div>\n			<div class="membership_span_container">\n				<span class="item_long_name" title='+(null==(__t=Name)?"":__t)+">"+(null==(__t=subName)?"":__t)+'</span>\n				<span class="item_long_position" title='+(null==(__t=Department)?"":__t)+">部门："+(null==(__t=Department)?"":__t)+'</span>\n				<span class="item_long_description" title='+(null==(__t=Position)?"":__t)+">职位："+(null==(__t=Position)?"":__t)+'</span>\n			</div>\n			<div class="membership_line membership_line_level'+(null==(__t=level)?"":__t)+' ">\n			</div>\n		</div>\n	'):(__p+="\n		",__p+=0!=Id?'\n			<div class="membership_item_short  membership_item_level_'+(null==(__t=level)?"":__t)+'">\n				'+(null==(__t=_.convertImage({className:"membership_image_short",shape:"radius",size:30,src:UserAvatar.Small,name:Name,bgColor:UserAvatar.Color}))?"":__t)+"\n				\n				<span>"+(null==(__t=subName)?"":__t)+'</span>\n				<div class="membership_line membership_line_level'+(null==(__t=level)?"":__t)+' ">\n				</div>\n			</div>\n		':"\n			<div></div>\n		",__p+='\n		<div class="membership_subordinate_container"></div>\n	'),__p+="\n</li>";return __p},this.JST["membership/membership-tab-layout"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="membership_back">\n	<div class="membership_back_btn">\n		返回最上级\n	</div>\n</div>\n<div class="membership_tab_staff_container"  id="membership_scroll_container">\n	\n</div>';return __p},this.JST["membership/membership-tab-limits-tip"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="membership_none_limit_tip">\r\n	<div class="title_mnlt">隔级查看是什么</div>\r\n	<p class="text_mnlt">所谓隔级查看，就是管理者可以一层一层向下盘点。比如老板可以看到一线员工的'+(null==(__t=i18n.plan_1)?"":__t)+'和任务执行情况、简档、工作报表、动态等。该功能为管理者快速查看间接下级的工作提供便利，从整体上把控现状，让管理更加深入细致，同时也对员工工作起到监督作用。<br/>\r\n	如下图所示，该租户开通了隔级查看后，纪小国可通过张小庆查看到他的下属罗小翀的全部状况。</p>\r\n	<div class="img_mnlt">\r\n		<img src="'+(null==(__t=imgUrl)?"":__t)+'" alt="" />\r\n	</div>\r\n	<br/><br/>\r\n</div>';return __p},this.JST["membership/membership-tab-thumb-composite"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div id="membership_scroll_container">\n	<ul class="membership_thumb_container"></ul>\n</div>';return __p},this.JST["membership/membership-tab-thumb-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+=null==(__t=_.convertImage({className:"membership_thumb_img",shape:"radius",size:30,src:UserAvatar.Small,name:Name,bgColor:UserAvatar.Color}))?"":__t;return __p},this.JST["membership/membership-tip-limits"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="membership_askfor">\r\n	<p class="tiptext">您的企业尚未开通 <br />隔级查看功能</p>\r\n	<p class="gohelp"><a href="javascript:void(0);" title="">什么是隔级查看？</a></p>\r\n	<a href="javascript:void(0);" title="" class="btn btn-success" data-type="askForButton">立即申请开通</a>\r\n\r\n	<p class="concat">如有任何问题，请咨询在线客服 <br />或拨打 <strong>400 650 3180</strong></p>\r\n</div>\r\n<div class="membership_askfor_success">\r\n	<p class="tiptext"><span class="ico"></span><span>已经提交申请</span></p>\r\n	<p class="comfort">我们会尽快审核，审核通过后，<br />tita客服会联系帮您开通，请耐心等待！</p>\r\n</div>';return __p},this.JST["operation-status/operation-status"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\n<ul>\n	<li status="2"><a href="javascript:void(0);" title="">\n		<span class="ico icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+'-2"></span>已完成\n	</a></li>\n	<li status="1"><a href="javascript:void(0);" title="" >\n		<span class="ico icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+'-1"></span>进行中</a></li>\n	<li status="4"><a href="javascript:void(0);" title="" >\n		<span class="ico icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+'-4"></span>已取消\n	</a></li>\n	<li status="3"><a href="javascript:void(0);" title="" >\n		<span class="ico icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+'-3"></span>已延迟\n	</a></li>\n	<li status="6"><a href="javascript:void(0);" title="" >\n		<span class="ico icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+'-6"></span>暂停中\n	</a></li>\n	<li status="0"><a href="javascript:void(0);" title="" >\n		<span class="ico icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+'-0"></span>未开始\n	</a></li>\n</ul>\n';return __p},this.JST["private-range/private-range"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="qunartip-view">\n	<ul>\n		',_.each(data,function(a){__p+="\n			","public"==a.type?__p+='\n				<li class="public_qunat cur" id="1" data-visibility="1" ><a href="javascript:void(0);" title=""><span class="tit_qunat">'+(null==(__t=a.name)?"":__t)+"</span><span>"+(null==(__t=a.des)?"":__t)+"</span></a></li>\n			":"department"==a.type?(__p+='\n				<li class="private_qunat ',0==depId&&(__p+="disabled"),__p+='" id="3" objId="'+(null==(__t=depId)?"":__t)+'" objType="15" data-visibility="2" ><a href="javascript:void(0);" title=""><span class="tit_qunat">'+(null==(__t=departmentOptions.name)?"":__t)+"</span><span>"+(null==(__t=departmentOptions.des)?"":__t)+"</span></a></li>\n			"):__p+='\n				<li class="private_qunat" id="2" data-visibility="2" ><a href="javascript:void(0);" title=""><span class="tit_qunat">'+(null==(__t=privateOptions.name)?"":__t)+"</span><span>"+(null==(__t=privateOptions.des)?"":__t)+"</span></a></li>\n			",__p+="\n		"}),__p+="\n	</ul>\n</div>";return __p},this.JST["publish-dynamic/publish-mblog"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\r\n<div class="box_pm" data-name="mblog-box">\r\n	<div class="content_pm input-default" data-name ="new-content-wrap">\r\n		',defaultValue&&(__p+='\r\n			<div><label data-name="new-defaultvalue">'+(null==(__t=defaultValue)?"":__t)+"</label></div>\r\n		"),__p+='\r\n		<div class="input_pm">\r\n			<textarea  data-name="new-content" style="resize:none;">'+(null==(__t=value)?"":__t)+'</textarea>\r\n		</div>\r\n		<div class="count_pm">\r\n			',__p+=isLimit?'\r\n				<span class="num_pm" data-name="count">'+(null==(__t=total)?"":__t)+"</span>/"+(null==(__t=maxlength)?"":__t)+"\r\n			":'\r\n				<span class="num_pm" data-name="count">'+(null==(__t=total)?"":__t)+"</span>\r\n			",__p+='\r\n			\r\n		</div>\r\n	</div>\r\n	<div class="action_pm">\r\n		<ul class="list_pm">\r\n			',isShowAttachment&&(__p+='\r\n			<li class="ament_pm uploader_container"><a title="" href="javascript:void(0);" data-name="file" ></a></li>\r\n			'),__p+="\r\n			",isShowAt&&(__p+='\r\n			<li class="at_pm" data-name="at">\r\n				<span class="icon-at"></span>\r\n				<a href="javascript:void(0);" title="">'+(null==(__t=atText)?"":__t)+"</a>\r\n			</li>\r\n			"),__p+="\r\n			",isShowAtAll&&(__p+='\r\n			<li class="atall_pm" data-name="atall">\r\n				<span class="icon-at"></span>\r\n				<a title="" href="javascript:void(0);" ></span>'+(null==(__t=atAllText)?"":__t)+"</a>\r\n			</li>\r\n			"),__p+="\r\n\r\n			",isShowEmotion&&(__p+='\r\n			<li class="emotion_pm" data-name="emotion">\r\n				<span class="icon-emotion"></span>\r\n				<a title="" href="javascript:void(0);"></span>'+(null==(__t=emotionText)?"":__t)+"</a></li>\r\n			"),__p+='\r\n		</ul>\r\n\r\n		<button class="btn btn-sure btn-disabled" data-name="submit">'+(null==(__t=submitText)?"":__t)+'</button>\r\n		<button class="cancel_pm" data-name="cancel">取消</button>\r\n		',isShowRange&&(__p+='\r\n		<span class="quna_pm" id="1" isvisible="0" data-name="range"><i class="icon-lock" data-name="lock"></i><span data-name="range-cont">'+(null==(__t=privateText)?"":__t)+'</span><i class="caret" data-name="range-caret"></i></span>\r\n		'),__p+="\r\n		",isShowSendSms&&(__p+='\r\n			<span class="pub_message" data-name="mblog-sms">\r\n				<span class="checkbox" data-name="mblog-sms-input"></span>\r\n				<span  data-name="mblog-sms-text" original-title="被@的同事将会收到短信通知">短信通知</span>\r\n			</span>\r\n		'),__p+='\r\n		\r\n	</div>\r\n	<div id="attachmentViewBox_homeMblog" class="error_container"></div>\r\n	<div id="attachmentViewBox_homeMblog" class="preview_container"></div>\r\n	<div id="attachmentViewBox_homeMblog" class="loading_container"></div>\r\n</div>\r\n';return __p},this.JST["publish-dynamic/publist-mblog-toreply"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<span>回复</span>&nbsp;<span class="closed_pm" data-name="to-reply-closed">'+(null==(__t=toUserName)?"":__t)+"&nbsp;×</span>";return __p},this.JST["pull-screen/push-screen-app"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+="";return __p},this.JST["pull-screen/push-screen-layout"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+='	\n	<div class="action" data-name="pull-screen-action">\n		',showFullScreenButton&&(__p+='\n		<a href="javascript:void(0);" class="open-screen" data-name="open-full-screen-button" target="_blank">全屏查看</a>\n		'),__p+='\n		<span class="close-pull-screen" data-name="pull-screen-close"></span>\n	</div>\n	<div data-name="pull-screen-content">\n		<iframe src="" width="100%" frameborder="0"  style="display:none" data-name="pull-screen-iframe"></iframe>\n	</div>\n	<div data-name="pull-screen-load"></div>\n';return __p},this.JST["reward/reward-detail-userlist-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+=(null==(__t=_.convertImage({className:"avatar-item",src:user.avatar.small,size:30,shape:"radius",name:user.name,bgColor:user.avatar.color}))?"":__t)+"\n";
return __p},this.JST["reward/reward-detail-userlist"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n    <div class="title"><span>共收到 '+(null==(__t=totalCount)?"":__t)+' 次打赏 来自以下的人</span></div>\n    <div class="all-user" data-name="user-list">\n    ',beyond&&(__p+='<span class="more" data-name="more">…</span>'),__p+="\n	</div>\n";return __p},this.JST["reward/reward-detail"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<span class="button-action" data-name="reward-shang" data-reward="give" data-tip="infotip" data-body="干的不错，打赏鼓励"><span class="reward-shang-txt-icon"></span></span><span class="button-action reward-tao" data-name="reward-tao" data-reward="beg" data-tip="infotip" data-body="向ta讨赏"><span class="reward-tao-txt-icon"></span></span>\n';return __p},this.JST["reward/reward-give"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)0==payStatus?(__p+='\n<div class="reward-app-content">\n	<span class="reward-close" data-name="close"></span>\n	<div class="cont-box">\n		<!-- 头像 -->\n		<div class="head-wrap" data-name="head-box">\n\n			',1==isEditUser&&"give"==rewardType&&isShowOtherBtn&&(__p+='\n				<a href="javascript:;" class="user-others" data-name="others">打赏给其他成员?</a>\n			'),__p+="\n			",isEditUser&&(__p+='\n			<span class="ico-edit-pen" data-name="ico-change-user"></span>\n			'),__p+='\n			<div class="user-avatar" data-name="change-user">\n				',__p+=user&&user.userId?" \n					"+(null==(__t=_.convertImage({className:"",src:user.avatar.medium,size:80,shape:"radius",name:user.name,bgColor:user.avatar.color}))?"":__t)+"\n				":'\n					<span class="none-user radius_img80"></span>\n				',__p+='\n			</div>\n			<div data-name="user-name" class="user-name">'+(null==(__t=_.TitaWidget_substring(user.name,14,!0))?"":__t)+"</div>\n			\n		</div>\n		",1==stage?(__p+='\n			<div class="contet-area" data-name="part-first">\n			\n			',__p+="give"==rewardType?'\n				<div class="input-wrap">\n					<span class="ico-refresh" data-name="refresh"></span>\n					<div class="error-tip" data-name="error-tip">单笔赏金不能超过'+(null==(__t=maxMoney)?"":__t)+'元</div>\n					<input type="text" data-name="set-money" value="" maxlength="6" autocomplete="off">\n				</div>\n				<form action="">\n				<div class="input-wrap">\n					<textarea type="text" data-name="intro" maxlength="20" value="" autocomplete="off"></textarea>\n					<div class="total"><span class=\'num\' data-name="num">0</span>/20</div>\n				</div>	\n				</form>\n			':'\n				<div class="input-wrap">\n					<textarea class="beg-intro" data-name="intro" maxlength="20" autocomplete="off"></textarea>\n					<div class="total"><span class=\'num\' data-name="num">0</span>/20</div>\n					<div class="additional">打赏一个呗</div>\n					<span class="ico-refresh"  data-name="refresh"></span>\n				</div>\n\n			',__p+='\n			\n			</div>\n			<button class="reward-button ',user&&user.userId||(__p+="disabled"),__p+=' " data-name="submit-btn">',__p+="give"==rewardType?"下一步":"向ta讨赏",__p+="</button>\n		"):__p+='\n			<div class="code-wrap"  data-name="part-second">\n				<p class="money-all">￥'+(null==(__t=money)?"":__t)+'</p>\n				<div class="wx-img">\n					<div class="reward-loading"  data-name="erwerma">\n						<img src="" alt="" width="150" height="150">\n						<p>二维码搬运中，请稍后</p>\n					</div>\n					<div class="wx-img-error"  data-name="erwerma-tip">\n						<span></span>\n						<p>搬运失败，请点击重新生成</p>\n					</div>\n				</div>\n				<div class="scanning-tip">\n					<span>请打开微信扫一扫</span>打赏无悔，赏金概不退款哦~\n				</div>\n			</div>\n		',__p+="\n	</div>\n</div>\n"):1==payStatus?__p+='\n	<div class="reward-pay-success">\n		<span class="close-pay"  data-name="close"></span>\n		<div class="tip">打赏成功</div>\n		<button class="again" data-name="reward-again">再来一个</button>\n	</div>\n':-1==payStatus&&(__p+='\n	<div class="reward-pay-fail">\n		<span class="close-pay"  data-name="close"></span>\n		<div class="tip">打赏失败</div>\n	</div>\n');return __p},this.JST["reward/reward-user-select-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="\n"+(null==(__t=_.convertImage({className:"avatar_small_fl",src:avatar.Medium,size:30,shape:"radius",name:name,bgColor:avatar.Color}))?"":__t)+'\n\n<div class="name">'+(null==(__t=name)?"":__t)+"</div>\n";return __p},this.JST["reward/reward-user-select"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='\n<span class="reward-caret-top"></span>\n<div class="reward-loading"></div>\n<ul class="clearfix">\n</ul>';return __p},this.JST["set-notice/set-notice"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\n	<div class="outer_nst">\n		<div class="content_nst">\n			<div class="wrap_time_nst clearfix">\n				<span class="timelabel_nst mylock">提醒时间</span>\n				<div class="day_time_nst" data-name="day-input">\n					<a class="triday_nst " href="javascript:void(0)"></a>\n					<label cyctype="0" uservalue="'+(null==(__t=today)?"":__t)+'" data-name="day-input-value">'+(null==(__t=today)?"":__t)+'</label>\n					<div class="day_timewrap_nst" data-name="day-dropdown">\n						\n						<ul class="dayvalues_nst">\n							'+(null==(__t=day7)?"":__t)+'\n							<li label="其它日期" uservalue="0" class="other_nst" data-name="day-other">\n								<a href="javascript:void(0)">其它日期</a>\n								<div class="day-timepicker" data-name="day-dropdown-datepicker"></div>\n							</li>\n							<li class="everyday_nst" label="每天" uservalue="1" data-name="day-every-day"><a href="javascript:void(0);">每天</a></li>\n							<li class="everyworkday_nst" label="每个工作日" uservalue="2" data-name="day-every-weekday"><a href="javascript:void(0);">每个工作日</a></li>\n							<li label="每周" uservalue="3" class="weektime_nst" data-name="day-every-week">\n								<a href="javascript:void(0)">每周</a>\n								<dl class="weektimevalue_nst" data-name="day-dropdown-week">\n									<dd uservalue="2" label="每周一"><a href="javascript:void(0)">周一</a></dd>\n									<dd uservalue="3" label="每周二"><a href="javascript:void(0)">周二</a></dd>\n									<dd uservalue="4" label="每周三"><a href="javascript:void(0)">周三</a></dd>\n									<dd uservalue="5" label="每周四"><a href="javascript:void(0)">周四</a></dd>\n									<dd uservalue="6" label="每周五"><a href="javascript:void(0)">周五</a></dd>\n									<dd uservalue="7" label="每周六"><a href="javascript:void(0)">周六</a></dd>\n									<dd uservalue="1" label="每周日"><a href="javascript:void(0)">周日</a></dd>\n								</dl>\n							</li>\n							<li label="每月" uservalue="11" class="monthtime_nst" data-name="day-every-month">\n								<a href="javascript:void(0)" >每月</a>\n								<dl class="monthtimevalue_nst" data-name="day-dropdown-month">\n									'+(null==(__t=month31)?"":__t)+'\n								</dl>\n							</li>\n						</ul>\n					</div>\n				</div>\n				<div class="his_time_nst" data-name="hour-wrap">		\n					<a class="tritime_nst " href="javascript:void(0)"></a>			\n					<label class="timecur_nst" uservalue="'+(null==(__t=nowHour)?"":__t)+'" label="'+(null==(__t=nowHour)?"":__t)+'" data-name="hour-input-value">'+(null==(__t=nowHourLabel)?"":__t)+'</label>\n					<ul class="timevalues_nst" data-name="hour-dropdown">\n						'+(null==(__t=hour24)?"":__t)+'\n					</ul>					\n				</div>\n				<div class="minite_time_nst"  data-name="minite-wrap">\n					<a class="triminite_nst " href="javascript:void(0)"></a>\n					<label class="minitecur_nst" uservalue = "00" label="00" data-name="minite-input-value">00</label>\n					<ul class="minitevalues_nst" data-name="minute-dropdown">\n						'+(null==(__t=minite12)?"":__t)+'\n					</ul>\n				</div>\n			</div>\n			<div data-name="person-list"></div>\n			<div class="desc_nst" data-name="remind-desc-wrap">\n				<textarea class="default_nst" defaultValue="提醒内容" data-name="remind-desc-input">提醒内容</textarea>\n			</div>\n\n			<div class="tip_nst" data-name="error-tip"></div>\n			<div class="btn_nst">\n				<a class="btn btn-candel" href="javascript:void(0)" data-name="remind-button-cancel-remind">取消提醒</a>\n				<a class="btn btn-sure" href="javascript:void(0)"  data-name="remind-button-sure">确定</a>\n				<a class="btn btn-candel" href="javascript:void(0)" data-name="remind-button-cancel">取消</a>\n			</div>\n		</div>\n	</div>';return __p},this.JST["task-apply/task-apply-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n<div class="apply_left">\n    <div class="apply_date">\n        <span class="blue_date">'+(null==(__t=startDate)?"":__t)+"</span><span>"+(null==(__t=startHour)?"":__t)+"</span>\n    </div>\n    ","approval"!=type&&(__p+='\n        <div class="apply_date ">\n            <span class="blue_date">',startDate!=endDate&&(__p+=null==(__t=endDate)?"":__t),__p+="</span><span>"+(null==(__t=endHour)?"":__t)+"</span>\n        </div>\n    "),__p+='\n    <div class="apply_middel">\n    	',"approval"==type&&(__p+='<div class="apply_pen"></div>'),__p+="\n	    ","argeed"==type&&(__p+='<div class="apply_ok"></div>'),__p+="\n	    ","rejected"==type&&(__p+='<div class="apply_wrong"></div>'),__p+="\n	    ","approval"!=type&&(__p+='\n	        <div class="apply_tree"></div>\n	        <div class="apply_end"></div>\n	    '),__p+="\n	    ","approval"!=type||isEditApplyAble||(__p+='\n	        <div class="apply_tree"></div>\n	        <div class="apply_end"></div>\n	    '),__p+=' \n	</div>\n</div>\n\n<div class="apply_right">\n    <div class="apply_msg">'+(null==(__t=txtTemplate)?"":__t)+"</div>\n   ","approval"!==type&&(__p+='\n        <div class="apply_msg">'+(null==(__t=applyUser.name)?"":__t)+"：<span>","argeed"==type?__p+="已同意":"rejected"==type&&(__p+="已驳回"),__p+="</span></div>\n   "),__p+="\n   ",isEditApplyAble||"approval"!=type||(__p+='\n        <div class="apply_msg">待审批</div>\n   '),__p+="\n",isEditApplyAble&&(__p+='\n    <div class="apply_item_edit">\n        <button class="btn btn-sure" data-name="sure-item">同意</button>\n        <button class="btn btn-cancel" data-name="cancel-item">驳回</button>\n    </div>\n'),__p+="\n</div>\n",applyDescription&&(__p+='\n	<div class="apply_refuse_content">驳回理由：<span>'+(null==(__t=applyDescription)?"":__t)+"</span></div>\n"),__p+="\n";return __p},this.JST["task-apply/task-apply"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)isShowAllButton&&(__p+='\n<div class="apply_all" data-name="task-apply-all">\n	<button class="btn btn-sure" data-name="task-apply-sure-all">全部同意</button>\n	<button class="btn btn-cancel" data-name="task-apply-cancel-all">全部驳回</button>\n</div>\n'),__p+='\n<div data-name="task-apply-list"></div>';return __p},this.JST["task-create/task-create-add-user-composite"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<em class="ux_add_btn" data-name="add-user-btn"></em>\n<ul></ul>';return __p},this.JST["task-create/task-create-add-user-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+=departmentTag?'\n	<a href="javascript:void(0)" title="删除:'+(null==(__t=Name)?"":__t)+'" id="'+(null==(__t=id)?"":__t)+'" class="ux_user_area department">'+(null==(__t=imgTemplate)?"":__t)+"</a>\n":'\n	<a href="javascript:void(0)" title="删除:'+(null==(__t=Name)?"":__t)+'" id="'+(null==(__t=Id)?"":__t)+'" class="ux_user_area">'+(null==(__t=imgTemplate)?"":__t)+"</a>\n";return __p},this.JST["task-create/task-create-apply-user"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)showBorderLeft&&(__p+='\n	<span class="border"></span>\n'),__p+='\n<span class="task-create-tools-item task-create-applyuser-wraper" title="审批人">\n	<a class="task-create-tools-link task-create-applyuser-icon '+(null==(__t=applyUser?"task-create-applyuser-icon-active":"")?"":__t)+'" href="javascript:void(0)" data-name="task-create-applyuser">审批人：\n		',__p+=applyUser&&applyUser.Name?"\n			"+(null==(__t=_.substring(applyUser.Name,6,!0))?"":__t)+" \n		":"\n			无\n		",__p+="\n	</a>\n	",applyUser&&applyUser.Name&&(__p+='\n		<span data-name="task-create-delete-applyuserr"  data-id="'+(null==(__t=applyUser.Id)?"":__t)+'" class="task-create-delete-applyuser-wraper"><span  class="icon-task-close"  data-name="task-create-delete-applyuser" ></span></span>\n	'),__p+="\n</span>\n";return __p},this.JST["task-create/task-create-bottom"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="task-create-bottom-wraper clearfix">\n	',isShowFileUpload&&(__p+='\n	<div class="uploader_container" style="position: relative;"><a title="" href="javascript:void(0);" data-name="file" ></a></div>\n	'),__p+='\n	<div class="ux_publish">\n		<span data-name="publish-wraper" class="publish-wraper '+(null==(__t=packUp&&isShowPackUpBtn?"packup":"")?"":__t)+'">\n			',isShowMessage&&(__p+='\n				<div class="msg">\n					<a href="javascript:void(0);" class="check checkbox'+(null==(__t=sendUserStatus?"-checked":"")?"":__t)+'" data-name="data-message">\n						<span class="ico"></span>\n					</a>\n					<span class="txt" original-title="'+(null==(__t=sendUserStatus?"取消短信通知负责人":"短信通知负责人")?"":__t)+'">短信通知</span>\n				</div>\n				\n			'),__p+="\n			",isShowPrivateBtn&&(__p+='\n			<div class="set-private-area" data-name="task-create-private">\n				',"public"!==privateText.type&&(__p+='<i class="icon-lock" data-name="lock" style=""></i>'),__p+=(null==(__t=privateText.name)?"":__t)+'\n				<i class="caret" data-name="range-caret"></i>\n			</div>\n			'),__p+="\n		</span>\n		\n		",isShowPackUpBtn&&(__p+='\n		<span class="toggle" data-name="toggle">\n			<span class="l">'+(null==(__t=packUp?"更多信息":"收起")?"":__t)+'</span>\n			<span class="r icon-arrow-'+(null==(__t=packUp?"down":"up")?"":__t)+'-double"></span>\n		</span>\n		'),__p+='\n\n		<a class="btn btn-sure btn-disabled" href="javascript:void(0);" title="'+(null==(__t=pubBtnText)?"":__t)+'" data-name="set-pub-btn">'+(null==(__t=pubBtnText)?"":__t)+'</a>\n	</div>\n</div>\n<div class="error_container"></div>\n<div class="preview_container"></div>\n<div class="loading_container"></div> ';return __p},this.JST["task-create/task-create-class"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="\n	",showBorderLeft&&(__p+='\n		<span class="border"></span>\n	'),__p+='\n	<div class="task-create-class-innder '+(null==(__t=disable?"disable":"")?"":__t)+'" data-name="task-create-class" >\n		<span data-name="task-create-class-name" class="task-create-class-name">\n			',__p+=labelId&&labelName?"\n				"+(null==(__t=_.substringWithM(labelName,6,!0))?"":__t)+"\n			":"\n				分类/项目\n			",__p+="\n		</span>\n		",4!=labelType&&(__p+='\n			<span class="icon-arrow-down"></span>\n		'),__p+="\n	</div>\n\n\n\n";return __p},this.JST["task-create/task-create-customize-date-richeditor"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='\n<div class="task-create-laytout-input layout-border" data-name="task-create-add-input">\n	<div class="task-create-add-task-container" data-name="task-create-add-task-container">\n		<div class="task-create-date-container" data-name="task-create-date"></div>\n	</div>\n	\n</div>\n<div class="task-create-richeditor layout-border" data-name="task-create-richeditor"></div>\n<div class="task-create-bottom" data-name="task-create-bottom"></div>\n\n';return __p},this.JST["task-create/task-create-customize-work-hour"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='\n<div class="task-create-laytout-input layout-border" data-name="task-create-add-input">\n	<div class="task-create-add-task-container" data-name="task-create-add-task-container">\n		<div class="task-create-name-container" data-name="task-create-name"></div>\n		<div class="task-create-right-part">\n			<div class="task-create-date-container" data-name="task-create-date"></div>\n			<div class="task-create-tools-item-wraper" data-name="task-create-hour-date"></div>\n		</div>\n	</div>\n	\n</div>\n<div class="task-create-richeditor layout-border" data-name="task-create-richeditor"></div>\n<div class="task-create-bottom" data-name="task-create-bottom"></div>\n\n';return __p},this.JST["task-create/task-create-date"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)showBorderLeft&&(__p+='\n	<span class="border"></span>\n'),__p+="\n",__p+=isCycle?'\n	<div class="task-create-date-inner" data-name="task-create-date-box" original-title="'+(null==(__t=cycleTip)?"":__t)+'">\n		<span class="ico icon-action-cycle-active" data-name="task-create-date-ico"></span>\n	</div>\n':'\n	<div class="task-create-date-inner" data-name="task-create-date-box" original-title="'+(null==(__t=dateTip)?"":__t)+'">\n			<span class="ico icon-task-during" data-name="task-create-date-ico"></span>\n	</div>\n';return __p},this.JST["task-create/task-create-external-person"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)showBorderLeft&&(__p+='\n	<span class="border"></span>\n'),__p+='\n<span class="task-create-tools-item" data-name="task-create-extend-person" title="外部联系人">\n	<a href="javascript:void(0)" class="task-create-tools-link task-create-add-icon ',extendUser&&(__p+="task-create-add-icon-active"),__p+='">外部联系人</a>\n</span>\n';return __p},this.JST["task-create/task-create-name"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)showBorderLeft&&(__p+='\n	<span class="border"></span>\n'),__p+="\n\n",iconShow&&(__p+='\n	<span class="ico-name '+(null==(__t=iconClassName)?"":__t)+'"></span>\n'),__p+='\n<input class="'+(null==(__t=iconShow?"has-icon":"")?"":__t)+'" data-name="task-create-name" type="text" placeholder="'+(null==(__t=defaultText)?"":__t)+'" value="'+(null==(__t=taskTitle)?"":__t)+'" />\n\n<div data-name="task-create-name-dropdown"></div>\n';return __p},this.JST["task-create/task-create-participator"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)showBorderLeft&&(__p+='\n	<span class="border"></span>\n'),__p+='\n<span data-name="task-create-participator" class="task-create-tools-item task-create-participator" title="'+(null==(__t=participatorsCount?participatorsCount+"人":"添加参与者")?"":__t)+'">\n	<a href="javascript:void(0)" class="task-create-tools-link task-create-add-icon '+(null==(__t=participatorsCount?"task-create-add-icon-active":"")?"":__t)+'" >\n		'+(null==(__t=participatorsCount?"参与者："+participatorsCount+"人":"参与者")?"":__t)+"\n	</a>\n</span>\n";return __p},this.JST["task-create/task-create-principle"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)showBorderLeft&&(__p+='\n	<span class="border"></span>\n'),__p+='\n<div class="task-create-principle">\n	<span class="task-create-principle-inner" data-name="task-create-principle-inner">\n		<span class="icon-task-creater"></span>\n		<label class="task-create-principle-label" data-name=\'task-create-principle-label\' >'+(null==(__t=_.substring(principalUser.Name,6,!0))?"":__t)+"负责</label>\n	</span>\n</div>\n";return __p},this.JST["task-create/task-create-replace"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)showBorderLeft&&(__p+='\n	<span class="border"></span>\n'),__p+='\n<div class="task-create-tools-item task-create-replace '+(null==(__t=isCanReplace?"":"disable")?"":__t)+'" original-title="'+(null==(__t=isCanReplace?"点击可切换任务发起人":"不可以代自己发起任务")?"":__t)+'">\n				\n	<span class="task-create-replace-check-wraper" data-name="task-create-replace-check-wraper">\n		',isCanReplace?(__p+="\n			",__p+=replaceRadioChecked?'\n				<span class="task-create-replace-check checkbox checkbox-checked" data-name="task-create-replace-check"></span>\n			':'\n				<span class="task-create-replace-check checkbox" data-name="task-create-replace-check"></span>\n			',__p+="\n		"):__p+='\n			<span class="task-create-replace-check checkbox-default-disable %>"></span>\n		',__p+='\n	</span>\n	<span class="task-create-replace-label" data-name="task-create-replace-label">代ta发起</span>\n	<span class="task-create-help">\n		<a href="http://service.tita.com/pages/viewpage.action?pageId=590556" target="_blank" class="icon-help"></a>\n	</span>\n</div>\n\n';return __p},this.JST["task-create/task-create-workhour"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)showBorderLeft&&(__p+='\n	<span class="border"></span>\n'),__p+='\n<span class="task-create-tools-item task-create-workhour"  data-name="task-create-workhour"\n	title="'+(null==(__t=hourDate||minuteDate?"修改工时":"设置工时")?"":__t)+'">\n	<a class="task-create-tools-link task-create-add-icon '+(null==(__t=workHour?"task-create-add-icon-active":"")?"":__t)+'">\n		'+(null==(__t=workHour?workHour+" 小时":"工时")?"":__t)+"\n	</a>\n</span>\n";return __p},this.JST["task-create/task-create"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='\n<div class="task-create-laytout-input layout-border" data-name="task-create-add-input">\n	<div class="task-create-add-task-container" data-name="task-create-add-task-container">\n		<div class="task-create-class" data-name="task-create-class"></div>\n		<div class="task-create-name-container" data-name="task-create-name"></div>\n		<div class="task-create-right-part">\n			<div class="task-create-principle-area" data-name="task-create-principle-area"></div>\n			<div class="task-create-date-container" data-name="task-create-date"></div>\n		</div>\n	</div>\n	\n</div>\n<div class="task-create-layout-tools clearfix layout-border" data-name="task-create-tools">\n		<div class="task-create-tools-item-wraper" data-name="task-create-hour-date"></div>\n		<div class="task-create-tools-item-wraper" data-name="task-create-participator"></div>\n		<div class="task-create-tools-item-wraper" data-name="task-create-apply-user"></div>\n		<div class="task-create-tools-item-wraper" data-name="task-create-external-person"></div>\n		<div class="task-create-tools-item-wraper" data-name="task-create-replace"></div>\n\n</div>\n<div class="task-create-layout-extend layout-border" data-name="task-create-layout-extend">\n	<div class="task-create-layout-member-list " data-name="task-create-member-list"></div>\n	<div class="task-create-layout-extend-user " data-name="task-create-extend"></div>\n</div>\n\n<div class="task-create-richeditor layout-border" data-name="task-create-richeditor"></div>\n<div class="task-create-bottom" data-name="task-create-bottom"></div>\n\n';return __p},this.JST["task-detail/error-layout-message"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="tt_errotracker">\n	<div class="noaccess clearfix">\n		<div class="img_na"></div>\n		<div class="text_ma">\n			<div class="workhi_tma">\n				<br/><br/>\n				'+(null==(__t=content)?"":__t)+"\n			</div>\n			",subContent&&(__p+='\n			<div class="reason_tma">'+(null==(__t=subContent)?"":__t)+"</div>\n			"),__p+="\n		</div>\n	</div>\n</div>";return __p},this.JST["task-detail/select-plan-task-relate"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="plan-task-list-dialog">\n	<div class="title">关联任务</div>\n	\n	<div class="select-list" data-name="plan-active-list">\n		<div class="item-select" data-name="plan-relate-year">\n			<span class="arrow-drop"></span>\n			<label>'+(null==(__t=activeYear.GroupName)?"":__t)+'</label>\n			<ul class="list-data" data-name="plan-relate-year-list">\n\n				',_.each(YearList,function(a){__p+="\n					<li ",yearId==a.GroupId&&(__p+='class="active"'),__p+=' id="'+(null==(__t=a.GroupId)?"":__t)+'">'+(null==(__t=a.GroupName)?"":__t)+"\n					</li>\n				"}),__p+='\n			</ul>\n		</div>\n		<div class="item-select" data-name="plan-relate-month">\n			<span class="arrow-drop" ></span>\n			<label>'+(null==(__t=activeMonth.TagName)?"":__t)+'</label>\n			<ul class="list-data" data-name="plan-relate-month-list">\n				',_.each(monthList,function(a){__p+="\n					<li ",monthId==a.TagId&&(__p+='class="active" '),__p+=' id="'+(null==(__t=a.TagId)?"":__t)+'">'+(null==(__t=a.TagName)?"":__t)+"</li>\n				"}),__p+='\n			</ul>\n		</div>\n		<div class="item-select" data-name="plan-relate-week">\n			<span class="arrow-drop" ></span>\n			<label>'+(null==(__t=activeWeek.Name)?"":__t)+"</label>\n			<ul class=\"list-data\" data-name='plan-relate-week-list'>\n				",_.each(weekList,function(a){__p+="\n					<li ",weekId==a.PlanTableId&&(__p+='class="active" '),__p+=' id="'+(null==(__t=a.PlanTableId)?"":__t)+'">'+(null==(__t=a.Name)?"":__t)+"</li>\n				"}),__p+='\n			</ul>\n		</div>\n\n		<div class="item-select task-select" data-name="plan-relate-task">\n			<span class="arrow-drop" data-name="plan-relate-task-drop"></span>\n			<label data-name="plan-relate-task-label">正在加载…</label>\n			<div data-name="plan-relate-task-list"></div>\n		</div>	\n	</div>\n	\n	<div class="uibutton clearfix">\n		',isShowButtomReset&&(__p+='\n		<a data-name="task-relate-reset" href="javascript:void(0);" class="btn btn-cancel reset-button">取消关联</a>\n		'),__p+='\n		<a data-name="task-relate-sure" href="javascript:void(0);" class="btn btn-sure">确定</a>\n		<a data-name="task-relate-cancel" href="javascript:void(0);" class="btn btn-cancel">取消</a>\n	</div>\n</div>\n';return __p},this.JST["task-detail/share-range-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<a href="/u/'+(null==(__t=User.Id)?"":__t)+'">\n\n	',__p+=0==User.UserAvatar.HasAvatar?"\n								\n		"+(null==(__t=_.convertImage({className:"",src:User.Avatar,size:30,shape:"radius",name:User.Name,bgColor:User.UserAvatar.Color}))?"":__t)+"\n	":'\n		<img class="radius_img30" alt="'+(null==(__t=User.Name)?"":__t)+'" src="'+(null==(__t=User.UserAvatar.Small)?"":__t)+'">\n	',__p+="\n	",0==Type&&(__p+='<span class="del_sr" id="'+(null==(__t=User.Id)?"":__t)+'" data-name="delete"><i class="ico"></i></span>'),__p+="\n</a>\n\n";return __p},this.JST["task-detail/share-range"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="\n<h4>"+(null==(__t=title)?"":__t)+'</h4>\n<ul class="list_sr">\n	',isEdit&&(__p+='\n	<li class="button_sr"><a href="javascript:void(0);" title="" class="add_sr" data-name="add"><span></span></a></li>\n	'),__p+="\n</ul>\n";return __p},this.JST["task-detail/task-accept-pop"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n<div class="title">'+(null==(__t=title)?"":__t)+'</div>\n\n<div class="pop_container">\n	<h2>所属分类/项目:</h2>\n	\n	<div class="classes">\n		',4==labelType&&(__p+='\n			<span class="icon-work-small"></span>\n		'),__p+="\n		<span>"+(null==(__t=labelName)?"":__t)+'</span>\n	</div>\n</div>\n<div class="pop_container start-end-date" data-name="task-detail-accept-date-box">\n	<h2>起止时间:</h2>\n	<div class="input-default">\n		',classEditable?(__p+='\n			<input type="text" title="" value="'+(null==(__t=startDate)?"":__t)+" - "+(null==(__t=isLongTerm?"长期":endDate)?"":__t)+'" data-name="task-detail-accept-date" ',cycleId>0&&(__p+='style="color:#aaa;"'),__p+=">\n		"):(__p+='\n			<span class="input" ',cycleId>0&&(__p+='style="color:#aaa;"'),__p+=">\n				"+(null==(__t=startDate)?"":__t)+" - "+(null==(__t=isLongTerm?"长期":endDate)?"":__t)+'"\n			</span>\n		'),__p+='\n	</div>\n</div>\n\n<div class="uibutton">\n	<a href="javascript:void(0);" class="btn btn-sure sure_dialog" data-name="task-detail-accept-sure"><span>确定</span></a>\n	<a href="javascript:void(0);" class="btn btn-cancel cancel_dialog" data-name="task-detail-accept-cancel">取消</a>\n</div>\n';return __p},this.JST["task-detail/task-action"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="\n",isApply&&(__p+='\n	<span class="icon-approval-ing"></span>\n'),__p+='\n<ul class="btnlist_pdtb">\n	',__p+=editStatusable?'\n		<li class="plandetail_status" data-name="task-set-status">\n			<a href="javascript:void(0);" class="status_bpdtb tt_actionstatus_'+(null==(__t=status)?"":__t)+'" original-title="'+(null==(__t=StatusTip)?"":__t)+'">\n				<span class="ico"></span>\n			</a>'+(null==(__t=StatusTip)?"":__t)+"\n		</li>\n	":'\n		<li class="past_pdtb">\n			<a href="javascript:void(0);" class="status_bpdtb tt_actionstatus_'+(null==(__t=status)?"":__t)+'_disable" original-title="'+(null==(__t=StatusTip)?"":__t)+'">\n				<span class="ico"></span>\n				</a>'+(null==(__t=StatusTip)?"":__t)+"\n		</li>\n	",__p+="\n	",deleteable&&(__p+='\n		<li>\n			<a href="javascript:void(0);" class="del_bpdtb" original-title="删除" data-name="set-task-delete"></a>\n		</li>\n	'),__p+="\n	",isAccept&&2==relation&&(__p+='\n		<li>\n			<span class="icon-quit-task" original-title="退出任务" data-name="quit-task"></span>\n		</li>\n	'),__p+='\n\n	<li>\n		<a href="javascript:void(0);" class="icon-action-alarm-clock-over ',isRemind&&(__p+="icon-action-alarm-clock-highlight-over"),__p+='" data=\'{"objid":"'+(null==(__t=taskId)?"":__t)+'","objType":"7"}\' data-name="set-task-notice" original-title="',__p+=isRemind?"已设提醒":"设置提醒",__p+='"></a>\n	</li>\n	',(0==relation||6==relation||4==relation||5==relation)&&(__p+='\n		<li>\n			<span class="icon-task-'+(null==(__t=6==relation?"followed":"follow")?"":__t)+'" original-title="'+(null==(__t=6==relation?"取消关注":"关注")?"":__t)+'" data-name="follow-btn"></span>\n		</li>\n	'),__p+="\n	",(1==relation||2==relation||3==relation)&&(__p+='\n		<li> \n			<a href="javascript:void(0);" class="icon-action-star-over 	',isMark&&(__p+="icon-action-star-highlight-over"),__p+='" data-name="set-task-star" original-title="',__p+=isMark?"取消星标":"标为星标",__p+='"></a>\n		</li>\n	'),__p+="\n</ul>";return __p},this.JST["task-detail/task-add-do"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)isShowTask&&(__p+='\n<a href="javascript:void(0)" class="btn" data-name="distribute_task">分解'+(null==(__t=i18n.task_1)?"":__t)+"</a>\n"),__p+="\n",isShowWorkTime&&(__p+='\n<a href="javascript:void(0)" class="btn" data-name="task-work-hour">添加工时</a>\n'),__p+="\n",isShowMeeting&&(__p+='\n	<a href="javascript:void(0)" class="btn" data-name="task-meet">添加会议</a>\n'),__p+="\n",isShowTravel&&(__p+='\n	<a href="javascript:void(0)" class="btn" data-name="task-travel">添加出差</a>\n'),__p+="\n",isShowShare&&(__p+='\n<a href="javascript:void(0)" class="btn" data-name="task-share">添加心得</a>\n'),__p+="\n";return __p},this.JST["task-detail/task-apply-detail"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\n<div class="task-detail-moduletitle">\n	<div class="icon">\n		<span class="icon-chapter-highlight icon-dt"></span>\n		<em class="caret"></em>\n	</div>\n	<div class="text">审批(<span data-name="task-detail-apply-total">'+(null==(__t=total)?"":__t)+'</span>)</div>\n</div>\n\n\n<div class="module-content">\n	<div data-name="task-detail-apply-list"></div>\n</div>	\n';return __p},this.JST["task-detail/task-base-info"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)cycleId&&""!=cycleId&&2!=status&&!isDeadLine&&(__p+='\n	<div class="base-item" data-name="cycle-area">\n		<div class="left-eb">\n			<span class="icon-cycle ico-eb"></span>\n			<span>循环周期</span>\n		</div>\n		',cycleable?__p+='\n			<span data-name="task-edit-cycle">'+(null==(__t=cycleHtml)?"":__t)+"</span>\n		":cycleable||(__p+='\n			<span data-name="task-edit-cycle">'+(null==(__t=cycleHtml)?"":__t)+"</span>\n		"),__p+="\n		",cycleable&&(__p+='\n			<a href="javascript:void(0);" class="edit-button" data-name="task-edit-cycle-edit">修改</a>\n			<a href="javascript:void(0);" class="edit-button" data-name="task-detail-cancel-cycle" >取消循环</a>\n		'),__p+="\n		\n	</div>\n"),__p+='\n\n<div class="base-item" data-name="date-area">\n	<div class="left-eb">\n		<span class="icon-date ico-eb"></span>\n		<span>起止时间</span>\n	</div>\n\n	',editable&&0==cycleId?(__p+="\n		",startDate||deadLine?(__p+='\n			<span data-name="set-task-date">'+(null==(__t=startDate)?"":__t)+" -- ",__p+=isLongTerm?"长期":null==(__t=deadLine)?"":__t,__p+="</span>\n		"):__p+='\n			<span data-name="task-dem">开始时间 - 结束时间</span>\n		',__p+="\n		\n	"):(__p+="\n		",startDate||deadLine?(__p+="\n			"+(null==(__t=startDate)?"":__t)+" - ",__p+=isLongTerm?"长期":null==(__t=deadLine)?"":__t,__p+="\n		"):__p+="\n			未设置\n		",__p+="\n	"),__p+="\n	",editable&&0==cycleId&&(__p+='\n	<a href="javascript:void(0)" class="edit-button" data-name="task-detail-date-edit" >修改</a>\n	'),__p+="\n	",!isLongTerm&&2!=status&&startDate&&(__p+="\n		",isDeadLine?(__p+='\n			<span class="remain overdue">已过期 ',0!=remainDay&&(__p+=(null==(__t=remainDay)?"":__t)+" 天"),__p+="</span>\n		"):__p+='\n			<span class="remain">剩余 <span class="num">'+(null==(__t=remainDay)?"":__t)+"</span>	天</span>\n		",__p+="\n		\n	"),__p+='\n	\n</div>\n	\n\n<ul class="all-more" data-name="task-detail-all-info" style="display:',__p+=isPackUp?"block":"none",__p+='">\n	<li class="item-am">\n		<div class="base-item-warp">\n			<div class="base-item" data-name="prical-area">\n				<div class="left-eb">\n					<span class="icon-person ico-eb"></span>\n					<span>负责人</span>\n				</div>\n				'+(null==(__t=principalUser.name)?"":__t)+"\n				",editable&&(__p+='\n					<a href="javascript:void(0);" class="edit-button" data-name="task-transfer-user">转交</a>\n				'),__p+='\n			</div>\n		</div>\n		<div class="base-item-warp">\n			<div class="base-item">\n				<div class="left-eb">\n					<span class="icon-person-add ico-eb"></span>\n					<span>发起人</span>\n				</div>\n				'+(null==(__t=user.name)?"":__t)+'\n			</div>\n		</div>\n	</li>\n	<li class="item-am">\n		<div class="base-item-warp">\n			<div class="base-item" data-name="participators-area">\n				<div class="left-eb ico-eb">\n					<span class="icon-box-add ico-eb"></span>\n					<span>参与人</span>\n				</div>\n				<ul class="partner users-radius">\n					',participators.length>0?(__p+="\n						",_.each(participators,function(a){__p+="\n								<li ",editable&&(__p+='class="eidt-del"'),__p+=">\n									<span>"+(null==(__t=a.name)?"":__t)+"</span>\n									",editable&&(__p+='\n									<em class="icon-task-close" id="'+(null==(__t=a.userId)?"":__t)+'" data-name="task-detail-parnter-delete"></em>\n									'),__p+="\n								</li>\n							"
}),__p+="\n					"):editable||participators.length||(__p+="\n						<li>未设置</li>\n					"),__p+="\n					",editable&&(__p+='\n						<li class="last-add"><a href="javascript:void(0);" data-name="task-add-partner" ',participators.length>0&&(__p+='style="display:none"'),__p+=">添加</a></li>\n					"),__p+='\n				</ul>\n			</div>\n		</div>\n\n		<div class="base-item-warp">\n			<div class="base-item" data-name="apply-area">\n				<div class="left-eb">\n					<span class="icon-seal ico-eb"></span>\n					<span>审批人</span>\n				</div>\n				<span data-name="task-apply-wrap">\n				',applyUser&&applyUser.name?(__p+='\n				<ul class="users-radius apply-eb">\n					<li ',editApplyUserable&&(__p+='class="eidt-del"'),__p+=">\n						<span>"+(null==(__t=applyUser.name)?"":__t)+"</span>\n						",editApplyUserable&&(__p+='\n							<em class="icon-task-close" data-id="'+(null==(__t=applyUser.userId)?"":__t)+'" data-name="task-apply-user-delete"></em>\n						'),__p+="\n					</li>\n				</ul>\n				"):(__p+="\n					",__p+=editable?'\n						<a href="javascript:void(0)" class="task-edit-apply-user" data-name="task-apply-user-add">添加</a>\n					':"\n						未设置\n					",__p+="\n				"),__p+="</span>\n				",editApplyUserable&&applyUser&&applyUser.name&&(__p+='\n					<a href="javascript:void(0);" class="edit-button" data-name="task-apply-user-edit">修改</a>\n				'),__p+='\n				</span>\n			</div>\n		</div>\n	</li>\n	<li class="item-am">\n		<div class="base-item-warp">\n			<div class="base-item" data-name="class-container-wrap">\n				<div class="left-eb">\n					<span class="icon-box-four ico-eb"></span>\n					<span>分类/项目</span>\n				</div>\n				<span data-name="task-class-text">\n				',__p+=4==labelType?'\n					<span class="icon-work-small"></span>&nbsp;\n					<a href="#work?work_id='+(null==(__t=labelId)?"":__t)+'" target="_blank">\n				'+(null==(__t=labelName)?"":__t)+"</a>\n				":17==labelType?"\n					"+(null==(__t=labelName)?"":__t)+"\n				":"\n					"+(null==(__t=labelName)?"":__t)+"\n				",__p+="\n				</span>\n\n				",labelEditable&&(__p+='\n					<a href="javascript:void(0)" data-name="task-edit-class"  class="edit-button">修改</a>\n\n					<div  data-name="class-area"></div>\n				'),__p+='\n			</div>\n		</div>\n		<div class="base-item-warp">\n			<div class="base-item">\n				<div class="left-eb">\n					<span class="icon-lock-open ico-eb"></span>\n					<span>可见范围</span>\n				</div>\n				'+(null==(__t=privateText)?"":__t)+'\n			</div>\n		</div>\n	</li>\n</ul>\n<div class="slide-toggle"  data-name="task-detail-toggle">\n	<div class="toggle-cont">\n	',__p+=isPackUp?'\n		<span class="txt">属性收起</span><span class="icon icon-arrow-up"></span>\n	':'\n		<span class="txt">属性展开</span><span class="icon icon-arrow-down"></span>\n	',__p+='\n	</div>\n</div>\n\n<div class="base-item uploader" data-name="task-detail-attachment">\n	<div class="left-eb">\n		<span class="icon-upfile-highlight"></span>\n		<span>附件</span>\n	</div>\n	',1!=relation&&2!=relation&&3!=relation&&5!=relation||!isAccept||(__p+='\n	<div class="uploader_container" data-name="task-detail-attachment-button"></div>\n	<div class="error_container"></div>\n	<div class="loading_container"></div>\n	'),__p+='\n</div>\n<div class="attachments" data-name="task-detail-attachment-list" ></div>\n';return __p},this.JST["task-detail/task-detail-layout"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+='\n<div data-name="task-detail-unaccept"></div>\n<div data-name="task-detail-relate"></div>\n<div data-name="task-detail-action"></div>\n<div data-name="task-detail-scroll" class="task-detail-scroll">\n	<div data-name="task-detail-info"></div>\n	<div class="task-extra-info" data-name="ux-customizetDatas"></div>\n	<div data-name="task-detail-evaluation"></div>\n	<div data-name="task-detail-base-info"></div>\n	<div data-name="task-detail-container">\n		\n		<div data-name="task-detail-add-do"></div>\n		<div data-name="ux-edittask-area"></div>\n		<div data-name="task-apply"></div>\n		<div data-name="task-detail-task-list"></div>\n		<div data-name="task-detail-work-hour"></div>\n		<div data-name="task-detail-meet"></div>\n		<div data-name="task-detail-travel"></div>\n		',isOpenReward&&(__p+='\n		<div data-name="task-detail-reward" class="module-content reward-content"></div>\n		'),__p+='\n		<div data-name="task-detail-share"></div>\n		<div data-name="task-detail-comment"></div>\n		<div data-name="task-detail-track"></div>\n		<div data-name="task-detail-follower"></div>\n		<div class="task-share-user" data-name="task-share-user">\n		</div>	\n	</div>\n</div>';return __p},this.JST["task-detail/task-feed"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="task-detail-moduletitle">\n	<div class="icon">\n		<span class="icon-message-hightlight icon-dt"></span>\n		<em class="caret"></em>\n	</div>\n	<div class="text">沟通</div>\n</div>\n<div class="module-content" data-name="task-detail-task-feed"></div>';return __p},this.JST["task-detail/task-file"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="ux_edittask_upload">\n	<span class="icon-task-upload-enable"></span>\n	<span>'+(null==(__t=i18n.task_1)?"":__t)+'附件</span>\n</div>\n<div class="ux_edittask_fileupload" data-name="ux-upload-list"></div>\n<div class=""';return __p},this.JST["task-detail/task-info"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n\n<div class="status icon-status-'+(null==(__t=status)?"":__t)+'"></div>\n\n\n',__p+=editable?'\n	<div class="input-default task-edit"  data-name="task-detail-name">\n		<input type="text" class="task-title-input input-default" />\n		<div class="task-title" data-name="task-name">'+(null==(__t=taskName)?"":__t)+"</div>\n	</div>\n":'\n	<div class="task-title" data-name="task-name">'+(null==(__t=taskName)?"":__t)+"</div>\n",__p+='\n	\n<div class="task-detail-des">\n\n	',editable?(__p+="\n		",__p+=description&&""!=description?'\n			<a href="javascript:void(0)" class="task-detail-add" data-name="task-detail-descript-add" style="display:none">添加描述</a>\n			<div class="input-default task-edit tt-rich-content clearfix"  data-name="task-detail-descript" >'+(null==(__t=description)?"":__t)+"</div>\n		":'\n			<a href="javascript:void(0)" class="task-detail-add" data-name="task-detail-descript-add">添加描述</a>\n			<div class="input-default task-edit"  data-name="task-detail-descript" style="display:none">'+(null==(__t=description)?"":__t)+"</div>\n		",__p+="\n	"):(__p+='\n		<div class="task-title tt-rich-content clearfix">\n			',description&&(__p+="\n				"+(null==(__t=description)?"":__t)+"\n			"),__p+="\n		</div>\n	"),__p+='\n	<div class="input-default des-edit" data-name="task-detail-descript-edit" ></div>\n</div>\n\n';return __p},this.JST["task-detail/task-meet-detail"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\n<div class="task-detail-moduletitle">\n	<div class="icon">\n		<span class="icon-meet icon-dt"></span>\n		<em class="caret"></em>\n	</div>\n	<div class="text">会议(<span data-name="task-detail-meet-total">'+(null==(__t=total)?"":__t)+'</span>)</div>\n</div>\n\n<div class="module-content" data-name="task-travel-list">\n	<div class="_tt_loading_m">努力加载中…</div>\n</div>';return __p},this.JST["task-detail/task-quick"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)isShowAll&&(__p+='\n<ul data-name="task-quick-list">\n	',_.each(quickList,function(a,b){__p+="\n		",a.isShow&&(__p+='\n		<li class="item-tq radius-tq" data-key="'+(null==(__t=a.key)?"":__t)+'" original-title="'+(null==(__t=a.name)?"":__t)+'">\n			<span class="ico ico-'+(null==(__t=a.icon)?"":__t)+'"></span>\n		</li>\n		',b+1!=quickList.length&&(__p+='\n			<li class="border"></li>\n		'),__p+="\n		"),__p+="\n	"}),__p+='\n</ul>\n<div class="radius_all" data-name="task-quick-all" original-title="收起">\n	<a href="javascript:void(0)" class="ico ico-all" data-name="quick-do"></a>\n</div>\n');return __p},this.JST["task-detail/task-relate"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n		<em></em>\n		<span original-title="只有发起人和负责人可以修改关联" data-name="task-relate-text">\n			',__p+=parentId?"\n				与"+(null==(__t=i18n.task_1)?"":__t)+'<span class="edit-task-link" id="'+(null==(__t=parentId)?"":__t)+'" data-name="edit-task-link">'+(null==(__t=parentName)?"":__t)+"</span>\n				&nbsp;关联&nbsp;\n			":"\n				暂无关联\n			",__p+="\n		</span>\n		",!isAccept||1!=relation&&3!=relation||(__p+='\n		<span class="relate">\n			<a href="javascript:void(0)" class="ux_edit_plan_color" data-name="edit-task-plan">修改关联</a>\n		'),__p+='\n		<a href="http://service.tita.com/pages/viewpage.action?pageId=590574" target="_blank" class="icon-help"></a>\n		</span>\n		\n';return __p},this.JST["task-detail/task-share-detail"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\n<div class="task-detail-moduletitle" name="share">\n	<div class="icon">\n		<span class="icon-notepad-pen icon-dt"></span>\n		<em class="caret"></em>\n	</div>\n	<div class="text">心得(<span data-name="task-detail-share-total">'+(null==(__t=experienceTotal)?"":__t)+'</span>)</div>\n</div>\n<div class="module-content" data-name="task-detail-share-list"></div>';return __p},this.JST["task-detail/task-share-list-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n<div class="bar">\n	<div class="left">\n		心得日期: \n		',__p+=isEdit?'\n		<a href="javascript:void(0);" class="editable" data-name="task-detail-share-time"  id="'+(null==(__t=commentId)?"":__t)+'">'+(null==(__t=dateText)?"":__t)+"</a>\n		":"\n		<span>"+(null==(__t=dateText)?"":__t)+"</span>\n		",__p+='\n	</div>\n	<span class="right">填写人：'+(null==(__t=publishUser.name)?"":__t)+"</span>\n\n	",isEdit&&(__p+='\n		<span class="del" data-name="task-detail-share-delete" id="'+(null==(__t=commentId)?"":__t)+'">\n			<span class="icon-dialog-closed"></span>\n		</span>\n	'),__p+='\n</div>\n<div class="item-content">\n	',__p+=isEdit?'\n		<div class="clearfix" data-name="task-detail-share-edit" id="'+(null==(__t=commentId)?"":__t)+'">'+(null==(__t=content)?"":__t)+'</div>\n		<div data-name="task-detail-share-rich"></div>\n	':'\n		<div class="clearfix">'+(null==(__t=content)?"":__t)+"</div>\n	",__p+='\n</div>\n<div data-name="task-detail-share-attachment"></div>\n\n';return __p},this.JST["task-detail/task-share-list"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+="\n",isShowCreate&&(__p+='\n<div class="add-area">\n	<div class="topinput" data-name="task-detail-share-new">填写心得</div>\n	<div class="share-new" data-name="task-detail-share-new-box"></div>\n</div>\n'),__p+='\n<ul data-name="task-detail-share-list"></ul>\n',isShowMore&&(__p+='\n<div class="task-detail-show-more" data-name="task-detail-share-more" >\n	<span class="txt" data-name="task-detail-share-more-text">展开</span>&nbsp;<span class="tip_title">全部心得</span>&nbsp;<em class="icon-arrow-down-2t" data-name="task-detail-share-icon"></em>\n</div>\n');return __p},this.JST["task-detail/task-task-detail"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n<div class="task-detail-moduletitle">\n	<div class="icon">\n		<span class="icon-task-lighthight icon-dt"></span>\n		<em class="caret"></em>\n	</div>\n	<div class="text">'+(null==(__t=iTask)?"":__t)+'(<span data-name="task-detail-task-total">'+(null==(__t=total)?"":__t)+'</span>)</div>\n</div>\n\n\n<div class="module-content">\n	<div data-name="task-detail-task-add"></div>\n	<div data-name="task-detail-task-list"></div>\n	<div class="work_hour_content_wraper" data-name="task-detail-work-hour-list-box">\n		<ul data-name="task-detail-work-hour-list"></ul>\n		',isShowMore&&(__p+='\n		<div class="task-detail-show-more" data-name="task-detail-task-more" >\n			<span class="txt" data-name="task-detail-task-more-text">展开</span>&nbsp;<span class="tip_title">全部'+(null==(__t=iTask)?"":__t)+'</span>&nbsp;<em class="icon-arrow-down-2t" data-name="task-detail-task-icon"></em>\n		</div>\n		'),__p+="\n	</div>	\n</div>";return __p},this.JST["task-detail/task-title"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="_tt_moduletitle">\n	<div class="icon task"><b></b><em></em></div>\n	<div class="text">'+(null==(__t=task_1)?"":__t)+'（<span class="tasknum">11</span>）</div>\n</div>';return __p},this.JST["task-detail/task-track"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="task-detail-moduletitle">\n	<div class="icon">\n		<span class="icon-page-pen-edit icon-dt"></span>\n		<em class="caret"></em>\n	</div>\n	<div class="text">操作记录</div>\n</div>\n<div class="module-content" data-name="task-detail-task-track" ></div>';return __p},this.JST["task-detail/task-travel-detail"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\n<div class="task-detail-moduletitle">\n	<div class="icon">\n		<span class="icon-plane icon-dt"></span>\n		<em class="caret"></em>\n	</div>\n	<div class="text">出差(<span data-name="task-detail-travel-total">'+(null==(__t=total)?"":__t)+'</span>)</div>\n</div>\n\n\n<div class="module-content" data-name="task-travel-list">\n	<div class="_tt_loading_m">努力加载中…</div>\n</div>';return __p},this.JST["task-detail/task-travel-list-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="common-list-item-left">\n	<span class="title-icon-wraper">\n		<span class="title-icon '+(null==(__t={2:"icon-plane-small",1:"icon-meet"}[viewType])?"":__t)+'"></span>\n	</span>\n	\n	',2==viewType&&(__p+='\n	<span class="common-item-title-wraper">地点:</span> \n	'),__p+='\n	<div class="common-item-title '+(null==(__t=editable?"editable":"")?"":__t)+'" data-name="item-title">'+(null==(__t=title)?"":__t)+"</div>\n	",editable&&(__p+='\n		<div class="common-item-title-edit input-default input-focus" data-name="item-edit">\n			<input type="text"  value="'+(null==(__t=title)?"":__t)+'" data-name="item-title-input">\n		</div>\n	'),__p+='\n		\n</div>\n<div class="common-list-item-right">\n	<span class="toggle-item-detail" data-name="toggle-item-detail">\n		',__p+=open?'\n			<span class="txt">收起</span>\n			<em class="icon-arrow-up"></em>\n		':'\n			<span class="txt">详情</span>\n			<em class="icon-arrow-down"></em>\n		',__p+='\n	</span>\n\n	<span class="item-delete-wraper">\n		',editable&&(__p+='\n			<a href="javascript:void(0)" class="item-delete" id="'+(null==(__t=id)?"":__t)+'" data-name="item-delete">删除</a>\n		'),__p+='\n	</span>\n</div>\n<div class="common-list-item-detail" data-name="item-detail" style="display:',__p+=open?"block":"none",__p+='">\n	<div class="detail-item clearfix" data-name="item-time">\n		<span class="detail-item-left">时间：</span>\n		<div class="detail-item-right" data-name="detail-time-right">\n			<span data-name="item-time-container" original-title="起止时间：'+(null==(__t=startDate)?"":__t)+" - "+(null==(__t=endDate)?"":__t)+'">\n				<span class="'+(null==(__t=editable?"link-style":"")?"":__t)+'" data-name="startDate">'+(null==(__t=startDate)?"":__t)+'</span>\n				 - \n				<span class="'+(null==(__t=editable?"link-style":"")?"":__t)+'" data-name="endDate">'+(null==(__t=endDate)?"":__t)+"</span>\n			</span>\n		</div>\n	</div>\n	",editable?(__p+='\n		<div class="detail-item clearfix" data-name="contract-user">\n			<span class="detail-item-left">外部联系人：</span>\n			<div class="detail-item-right">\n				',__p+=contractUser?'\n				<span class="contractUserTitle">'+(null==(__t=contractUser)?"":__t)+'</span>\n				<div class="contract-wraper input-default input-focus" data-name="contract-edit">\n					<input  type="text"  value="'+(null==(__t=contractUser)?"":__t)+'" data-name="contract-edit-input">\n				</div>\n				\n				':'\n					<a href="javascript:void(0)" data-name="addContractUser">添加</a>\n					<span class="contractUserTitle" style="display:none"></span>\n					<div class="contract-wraper input-default input-focus"  data-name="contract-edit">\n						<input  type="text"  value="'+(null==(__t=contractUser)?"":__t)+'" data-name="contract-edit-input">\n					</div>\n				',__p+="\n			</div>\n		</div>\n	"):contractUser&&(__p+='\n		<div class="detail-item clearfix" data-name="contract-user">\n			<span class="detail-item-left">外部联系人：</span>\n			<div class="detail-item-right">\n				'+(null==(__t=contractUser)?"":__t)+"\n			</div>\n		</div>\n	"),__p+="\n	",1==viewType&&(__p+="\n		",editable?__p+='\n			<div class="detail-item">\n				<span class="detail-item-left">参与者：</span>\n				<div class="detail-item-right" data-name="detail-participator">\n					\n				</div>\n			</div>\n		':!editable&&participantUsers&&participantUsers.length&&(__p+='\n			<div class="detail-item">\n				<span class="detail-item-left">参与者：</span>\n				<div class="detail-item-right">\n					',_.each(participantUsers,function(a){__p+="\n						"+(null==(__t=_.convertImage({src:a.avatar.Small,size:30,name:a.name,bgColor:a.avatar.Color}))?"":__t)+"\n					"}),__p+="\n				</div>\n			</div>\n		"),__p+="\n	"),__p+='\n	<div class="detail-item clearfix">\n		<span class="detail-item-left">备注:</span>\n		<div class="detail-item-right">\n			',editable?(__p+='\n				<div data-name="detail-description" class="detail-description editable" ',description||(__p+='style="display:none;"'),__p+=">"+(null==(__t=description)?"":__t)+'</div>\n				<div data-name="richeditor-area" style="display:none;"></div>\n				<a href="javascript:void(0)" data-name="add-description-btn" ',description&&(__p+='style="display:none;"'),__p+=">添加</a>\n			"):(__p+='\n				<div class="detail-description">',__p+=description?null==(__t=description)?"":__t:"未添加备注",__p+="</div>\n			"),__p+="\n			\n		</div>\n	</div>\n\n	",(attachments&&attachments.length||editable)&&(__p+='\n		<div class="detail-item clearfix">\n			<span class="detail-item-left">附件：</span>\n			<div data-name="detail-attachment" class="detail-item-right uploader_container '+(null==(__t=editable?"addFileClass":"")?"":__t)+'">\n			</div>\n		</div>\n	'),__p+='\n	<div class="detail-item clearfix">\n		<span class="detail-item-left">创建人:</span>\n		<span class="detail-item-right">'+(null==(__t=publisher.name)?"":__t)+"</span>\n	</div>\n</div>";return __p},this.JST["task-detail/task-travel-list"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div data-name="task-create-container"></div>\n<ul class="task-detail-common-list-module" data-name="task-detail-travel-list">\n</ul>';return __p},this.JST["task-detail/task-unaccept"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="ux_edittask_accept">\n	',2!=relation||isAccept?(__p+="\n		",isAccept||0!=isTransfer||(__p+='\n			<div class="ux_edittask_accept_local" data-name="accept-container">\n				<div class="width238" >\n					<a href="javascript:void(0)" class="btn btn-sure btn-ea" data-name="accept-task" data-type="2">接受'+(null==(__t=i18n.task_1)?"":__t)+'</a>\n					<a href="javascript:void(0)" class="btn btn-cancel last btn-ea" data-name="transfer-task">转交他人</a>\n				</div>\n				<div data-name="accept-area"></div>\n			</div>\n		'),__p+="\n		",1==isTransfer&&(__p+='\n			<div class="ux_edittask_accept_other" data-name="ux-edittask-appe" >\n				<span>此'+(null==(__t=i18n.task_1)?"":__t)+"转交给"+(null==(__t=_.substring(transferUser.name,6,!0))?"":__t)+'负责</span>\n				<a href="javascript:void(0)" class="btn btn-sure " data-name="sure-transfer">确定</a>\n				<a href="javascript:void(0)" class="btn btn-cancel" data-name="cancel-transfer">取消</a>\n			</div>	\n		'),__p+="\n	"):__p+='\n		<div class="ux_edittask_accept_local">\n			<div class="width238">\n				<a href="javascript:void(0)" class="btn btn-sure btn-ea" data-name="participate-task">参与'+(null==(__t=i18n.task_1)?"":__t)+'</a>\n				<a href="javascript:void(0)" class="btn btn-cancel last btn-ea" data-name="refuse-task">不参与</a>\n			</div>\n		</div>\n	',__p+="\n</div>";return __p},this.JST["task-detail/task-work-hour-detail"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\n<div class="task-detail-moduletitle">\n	<div class="icon">\n		<span class="icon-clock-t icon-dt"></span>\n		<em class="caret"></em>\n	</div>\n	<div class="text">工时(<span data-name="task-detail-work-hour-total">'+(null==(__t=workHourTotal)?"":__t)+'</span>)</div>\n</div>\n\n\n<div class="module-content" data-name="task-detail-work-hour-list">\n	<div class="_tt_loading_m">努力加载中…</div>\n</div>';return __p},this.JST["task-detail/task-work-hour-list-item-detail"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="description clearfix">\n	<span class="title">工时备注:</span>\n	<div class="content">\n		',editable?(__p+="\n			",__p+=description&&""!=description?'\n			<div data-name="task-detail-workhour-des-edit" class="des_text">'+(null==(__t=description)?"":__t)+"</div>\n			":'\n			<a href="javascript:void(0)"  data-name="task-detail-workhour-des-add">添加</a>\n			',__p+='\n			<div class="des_edit input-default input-focus" data-name="task-detail-workhour-des-rich"></div>\n		'):(__p+='\n			<div class="redactor_editor">\n				',__p+=description?"\n					"+(null==(__t=description)?"":__t)+"\n				":"\n					未添加备注\n				",__p+="\n			</div>\n		"),__p+="\n	</div>\n</div>\n",(attachments.length||editable)&&(__p+='\n	<div class="description clearfix">\n		<span class="title">附件：</span>\n		<div class="content uploader_container" data-name="task-detail-work-hour-attachment-add">\n			<div data-name="task-detail-workhour-attachment-list"></div>\n		</div>\n	</div>\n');return __p},this.JST["task-detail/task-work-hour-list-item"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<div class="item-box clearfix">\n	<div class="item_left">\n		<div class="name_il" data-name="task-detail-workhour-name">'+__e(name)+"</div>\n		",editable&&(__p+='\n		<div class="name_input input-default input-focus" data-name="task-detail-workhour-name-input">\n			<input type="text"/>\n		</div>\n		'),__p+='\n	</div>\n	<div class="task_item_right" data-name="task-detail-workhour-right">\n		',editable?(__p+='\n			<span class="date_il ',isLoginUser&&(__p+="pointer"),__p+='" id="'+(null==(__t=id)?"":__t)+'" data-name="task-detail-workhour-date" >'+(null==(__t=time)?"":__t)+"</span>\n		"):__p+='\n			<span class="date_il" id="'+(null==(__t=id)?"":__t)+'" >'+(null==(__t=time)?"":__t)+"</span>\n		",__p+="\n		",editable?(__p+='\n			<span class="work_hour ',isLoginUser&&(__p+="pointer"),__p+='" id="'+(null==(__t=id)?"":__t)+'"  data-name="task-detail-workhour-hour">'+(null==(__t=hoursTotal)?"":__t)+"h</span>\n		"):(__p+='\n			<span class="work_hour ',isLoginUser&&(__p+="pointer"),__p+='" >'+(null==(__t=hoursTotal)?"":__t)+"h</span>\n		"),__p+='\n		<span class="del_il">\n			',editable&&(__p+='\n				<a href="javascript:void(0)" id="'+(null==(__t=id)?"":__t)+'" data-name="task-detail-workhour-delete">删除</a>\n			'),__p+='\n		</span>\n		<span class="detail_il" data-name="task-detail-workhour-item-detail-btn">\n			<span class="txt">详情</span>\n			<em class="icon-drop-down"></em>\n		</span>\n		\n	</div>\n</div>\n<div  data-name="task-detail-workhour-item-detail-box">\n	\n</div>';return __p},this.JST["task-detail/task-work-hour-list"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="title_wh">\n	<div class="left">\n		'+(null==(__t=_.convertImage({className:"radius_img30",src:user.avatar.Small,size:30,name:user.name,bgColor:user.avatar.Color}))?"":__t)+"\n		<span >"+(null==(__t=user.name)?"":__t)+'的工时总计：</span>\n	</div>\n	<span class="work_hour" data-name="task-detail-work-hour-total">'+(null==(__t=totalHours)?"":__t)+'h</span>\n	<div class="right" data-name="task-detail-work-hour-user-toggle">\n		',__p+=showList?'\n			<span class="txt">收起</span>\n			<em class="icon-drop-up" data-name="task-detail-work-hour-user-toggle-ico"></em>\n		':'\n			<span class="txt">展开</span>\n			<em class="icon-drop-down" data-name="task-detail-work-hour-user-toggle-ico"></em>\n		',__p+='\n	</div>\n</div>\n<div class="work_hour_content_wraper" data-name="task-detail-work-hour-list-box" ',__p+=showList?'style="display:block"':'style="display:none"',__p+='>\n	<ul data-name="task-detail-work-hour-list"></ul>\n	',isShowMore&&(__p+='\n	<div class="task-detail-show-more" data-name="task-detail-work-hour-more" >\n		<span class="txt" data-name="task-detail-work-hour-more-text">展开</span>&nbsp;<span class="tip_title">全部工时</span>&nbsp;<em class="icon-arrow-down-2t" data-name="task-detail-work-hour-icon"></em>\n	</div>\n	'),__p+="\n</div>	\n\n\n\n";return __p},this.JST["task-detail/user-list"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<em class="ux_add_btn"></em>\n<ul></ul>';return __p},this.JST["task-list/plan-item-status"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\n<ul>\n	<li status="2"><a href="javascript:void(0);" title="">\n		<span class="ico icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+'-2"></span>已完成\n	</a></li>\n	<li status="1"><a href="javascript:void(0);" title="" >\n		<span class="ico icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+'-1"></span>进行中</a></li>\n	<li status="4"><a href="javascript:void(0);" title="" >\n		<span class="ico icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+'-4"></span>已取消\n	</a></li>\n	<li status="3"><a href="javascript:void(0);" title="" >\n		<span class="ico icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+'-3"></span>已延迟\n	</a></li>\n	<li status="6"><a href="javascript:void(0);" title="" >\n		<span class="ico icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+'-6"></span>暂停中\n	</a></li>\n	<li status="0"><a href="javascript:void(0);" title="" >\n		<span class="ico icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+'-0"></span>未开始\n	</a></li>\n</ul>\n\n\n\n\n\n';return __p},this.JST["task-list/task-list-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)isChildTask&&(__p+='\n	<span class="border-left"></span>\n	<span class="icon-task-left-border"></span>\n'),__p+='\n\n<div class="plan_list_li '+(null==(__t=isChildTask?"p1":isShowKclass?"p3":"p2")?"":__t)+'">\n	<div class="right_ttpl">\n	',2==status&&evaluateModel?__p+="\n		"+(null==(__t=_.TitaWidget_evaluation(evaluateModel))?"":__t)+"\n	":(__p+="\n		",__p+=cycleId>0?'\n			<span class="icon-task-cycle" data-name="task-cycle" data-id="'+(null==(__t=taskId)?"":__t)+'" data-cys="'+(null==(__t=cycleId)?"":__t)+'"></span>\n		':'\n			<span class="cycle-placeholder"></span>\n		',__p+="\n		",isLongTerm?__p+='\n			<span class="date">长期</span>\n		':(__p+="\n			",__p+=isDeadLine?'\n				<span class="date expire">'+(null==(__t=deadLine)?"":__t)+"</span>\n			":2==status?'\n				<span class="date">'+(null==(__t=deadLine)?"":__t)+"</span>\n			":'\n				<span class="date '+(null==(__t=1==fromNow?"warn":"")?"":__t)+'">'+(null==(__t=fromNow>0&&fromNow<4?"剩余"+fromNow+"天":deadLine)?"":__t)+"</span>\n			",__p+="\n		"),__p+='	\n		<span class="principle">'+(null==(__t=_.TitaWidget_substring(principalUser.name,6,!0,2))?"":__t)+"</span>\n		",isShowSetRemind&&(__p+="\n			",__p+=0==cycleId?'\n				<span data-name="notice_plan" original-title="'+(null==(__t=isRemind?"已设提醒":"设置提醒")?"":__t)+'" data=\'{"objid":"'+(null==(__t=taskId)?"":__t)+'","objType":"'+(null==(__t=objType)?"":__t)+'"}\' class="notice-wraper sup-notice icon-clock'+(null==(__t=isRemind?"-active":"")?"":__t)+'"></span>\n			':'\n				<span class="sup-notice-placeholder"></span>\n			',__p+="\n\n		"),__p+="\n		",isShowStar&&(__p+="\n			",__p+=isMark?'\n				<span class="sup-set-mark icon-star-active" original-title="取消星标" data-id="'+(null==(__t=taskId)?"":__t)+'" data-name="set-mark"></span>\n			':'\n				<span class="sup-set-mark icon-star" original-title="标为星标" data-id="'+(null==(__t=taskId)?"":__t)+'" data-name="set-mark"></span>\n			',__p+="\n		"),__p+="\n		",isShowDelete&&(__p+="\n			",__p+=deleteable?'\n				<span class="sup-delete"  data-name="plan-delete" data-id="'+(null==(__t=taskId)?"":__t)+'">删除</span>\n			':'	\n				<span class="sup-delete-placeholder"></span>\n			',__p+="\n		"),__p+="\n	"),__p+='\n	</div>\n\n	<div class="left_left">\n		',(hasSubTask||"undefined"!=typeof tasks&&tasks.length)&&(__p+="\n			",__p+="undefined"!=typeof tasks&&tasks.length?'\n				<span data-id="'+(null==(__t=taskId)?"":__t)+'" data-name="packup" class="packup '+(null==(__t=currentDeploy?"icon-minus":"icon-plus")?"":__t)+'"></span>\n			':'\n				<span data-id="'+(null==(__t=taskId)?"":__t)+'" data-name="packup" class="packup icon-plus"></span>\n			',__p+="\n		"),__p+="\n		",__p+=isApply?'\n			<span class="status_ttpl_wraper" style="height:1px;"></span>\n			<span class="icon-apply apply_status"></span>\n		':'\n			<span class="status_ttpl_wraper">	\n				<a href="javascript:void(0);" class="status_ttpl icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+"-"+(null==(__t=status)?"":__t)+(null==(__t=editStatusable?"":"-disable")?"":__t)+" "+(null==(__t=editStatusable?"":"status_disabled")?"":__t)+'" original-title="'+(null==(__t=StatusTip)?"":__t)+'" data-id="'+(null==(__t=taskId)?"":__t)+'"><span class="ico"></span></a>\n				\n			</span>\n		',__p+="\n		",isShowKclass&&(__p+="\n			",__p+=editLableable?'\n				<div class="klass_box_ttpl pointer" data-id="'+(null==(__t=taskId)?"":__t)+'" data-name="update-klass" data-lab="'+(null==(__t=labelId)?"":__t)+'" data-type="'+(null==(__t=labelType)?"":__t)+'">\n			':'\n				<div class="klass_box_ttpl">\n			',__p+='\n					<div class="kclass" data-name="kclass-area"></div>\n				',labelName&&"未分类"!=labelName?(__p+="\n					",4==labelType?(__p+="\n						",__p+=402==appId||203==appId||902==appId?'\n						<span class="icon-app-xxs-'+(null==(__t=appId)?"":__t)+'"></span>\n						':'\n						<span class="icon-work-small"></span>\n						',__p+='\n						<span class="klass_ttpl">'+(null==(__t=_.substringWithM(labelName,8,!1))?"":__t)+"</span>  \n					"):__p+='\n						<span class="klass_ttpl">'+(null==(__t=_.substringWithM(labelName,10,!1))?"":__t)+"</span>  \n					",__p+="\n				"):__p+='\n					<span class="klass_ttpl none_klass_ttpl">未分类</span>  \n				',__p+="\n				</div>\n			"),__p+='\n			\n			\n			\n			\n	</div>\n	<div class="left_ttpl '+(null==(__t=isChildTask?"p1":isShowKclass?"p3":"p2")?"":__t)+'">\n		\n		',2==status||4==status||6==status?(__p+="\n			",__p+=isPush?'\n				<span  id="'+(null==(__t=taskId)?"":__t)+'" data-name="taskName" class="'+(null==(__t=isChildTask?"child":"")?"":__t)+' task-name disable">'+(null==(__t=taskName)?"":__t)+"</span>\n			":'\n				<a id="'+(null==(__t=taskId)?"":__t)+'" href="'+(null==(__t=taskUrl)?"":__t)+'" target="_blank" class="'+(null==(__t=isChildTask?"child":"")?"":__t)+' task-name disable">'+(null==(__t=taskName)?"":__t)+"</a>\n			",__p+="\n			\n		"):(__p+="\n			",__p+=isPush?'\n				<span id="'+(null==(__t=taskId)?"":__t)+'" data-name="taskName" class="'+(null==(__t=isChildTask?"child":"")?"":__t)+" task-name "+(null==(__t=isDeadLine?"warn":"")?"":__t)+'">'+(null==(__t=taskName)?"":__t)+"</span>\n			":'\n				<a id="'+(null==(__t=taskId)?"":__t)+'" href="'+(null==(__t=taskUrl)?"":__t)+'" class="'+(null==(__t=isChildTask?"child":"")?"":__t)+" task-name "+(null==(__t=isDeadLine?"warn":"")?"":__t)+'" target="_blank">'+(null==(__t=taskName)?"":__t)+"</a>\n			",__p+="\n		"),__p+='\n		<div class="all-icons">\n			',(203==appId||902==appId)&&(__p+='\n				<span class="ico-position ico-position-'+(null==(__t=taskType)?"":__t)+'">\n					'+(null==(__t={6:"面",7:"offer",8:"职",16:"筛",20:"审",21:"申"}[taskType])?"":__t)+"\n				</span>\n			"),__p+="\n			",isShowOwnerTag&&(__p+="\n				",__p+=1==userRelation?'\n					<span class="mine task-tag">'+(null==(__t=quirkOwnerTag?"ta":"我")?"":__t)+"派发的</span>\n				":2==userRelation?'\n					<span class="task-tag">上级安排</span>\n				':3==userRelation?'\n					<span class="join task-tag">'+(null==(__t=quirkOwnerTag?"ta":"我")?"":__t)+"参与的</span>\n				":'\n					<!-- <span class="task-tag-placeholder"></span> -->\n				',__p+="\n			"),__p+="\n			",isShowPercent&&counter.taskTotal&&(__p+='\n			<span class="percent task-tag" original-title="下一级任务（完成数/总数）">\n				<span class="icon-task"></span>\n				'+(null==(__t=counter.finishTaskTotal)?"":__t)+"/"+(null==(__t=counter.taskTotal)?"":__t)+"\n			</span>\n			"),__p+="\n\n			",counter.workTimeTotal&&(__p+='\n				<span class="work_hour">'+(null==(__t=counter.workTimeTotal)?"":__t)+"h</span>\n			"),__p+="\n			",detail_checked||(__p+="\n				",counter.taskTotal>0&&isShowTaskTotal&&(__p+='\n					<span class="icon-plan-task icon" original-title="有任务"></span>\n					<span class="num">'+(null==(__t=counter.taskTotal)?"":__t)+"</span>\n\n				"),__p+="\n				",counter.commentTotal>0&&isShowCommentTotal&&(__p+='\n					<span class="icon-plan-talk icon" original-title="有沟通"></span>\n					<span class="num">'+(null==(__t=counter.commentTotal)?"":__t)+"</span>\n				"),__p+="\n				",counter.experienceTotal>0&&isShowExperienceTotal&&(__p+='\n					<span class="icon-plan-summarize icon" original-title="有心得"></span>\n					<span class="num">'+(null==(__t=counter.experienceTotal)?"":__t)+"</span>\n				"),__p+="\n				",counter.businessTripTotal>0&&isShowBusinessTripTotal&&(__p+='\n					<span class="icon-plan-trip icon" original-title="有出差"></span>\n					<span class="num">'+(null==(__t=counter.businessTripTotal)?"":__t)+"</span>\n				"),__p+="\n				",counter.meetTotal>0&&isShowMeetingTotal&&(__p+='\n					<span class="icon-plan-meeting icon" original-title="有会议"></span>\n					<span class="num">'+(null==(__t=counter.meetTotal)?"":__t)+"</span>\n				"),__p+="\n				\n				\n			"),__p+="\n		</div>\n		\n	</div>	\n</div>\n",detail_checked&&(__p+='\n<div class="plan_list_total  ',(hasSubTask||"undefined"!=typeof tasks&&tasks.length)&&currentDeploy&&(__p+="border-over"),__p+=" "+(null==(__t=isChildTask?"p1":isShowKclass?"p3":"p2")?"":__t)+'">\n	<div class="plan_total_left">\n		<span>'+(null==(__t=i18n.task_1)?"":__t)+"&nbsp;"+(null==(__t=counter.taskTotal)?"":__t)+"</span>\n		",isShowCommentTotal&&(__p+="\n			<span>沟通&nbsp;"+(null==(__t=counter.commentTotal)?"":__t)+"</span>\n		"),__p+="\n		",isShowExperienceTotal&&(__p+="\n		<span>心得&nbsp;"+(null==(__t=counter.experienceTotal)?"":__t)+"</span>\n		"),__p+="\n		",isShowBusinessTripTotal&&(__p+="\n			<span>出差&nbsp;"+(null==(__t=counter.businessTripTotal)?"":__t)+"</span>\n		"),__p+="\n		",isShowMeetingTotal&&(__p+="\n			<span>会议&nbsp;"+(null==(__t=counter.meetTotal)?"":__t)+"</span>\n		"),__p+='\n		\n		\n	</div>\n	<div class="plan_total_right">\n		<span class="start-date">创建于'+(null==(__t=createDate)?"":__t)+"</span>\n		",0==cycleId&&(__p+="\n			",isRemind?(__p+='\n				<span data-name="notice_plan"  class="notice-wraper" original-title="已设提醒" data=\'{"objid":"'+(null==(__t=taskId)?"":__t)+'","objType":"'+(null==(__t=objType)?"":__t)+'"}\'>\n					<span class="notice icon-clock-active"></span>\n					<span class="txt">',time&&(__p+="于"+(null==(__t=time)?"":__t)+" "),__p+="提醒我</span>\n				</span>\n			"):__p+='\n				<span data-name="notice_plan" class="notice-wraper" original-title="设置提醒" data=\'{"objid":"'+(null==(__t=taskId)?"":__t)+'","objType":"'+(null==(__t=objType)?"":__t)+'"}\'>\n					<span class="notice icon-clock"></span>\n					<span class="txt">提醒我</span>\n				</span>\n				\n			',__p+="\n		"),__p+="\n		",__p+=deleteable?'\n			<span class="delete icon-delete" original-title="删除" data-name="plan-delete" data-id="'+(null==(__t=taskId)?"":__t)+'"></span>\n		':'	\n			<span class="sub-delete-placeholder"></span>\n		',__p+="\n		\n	</div>\n</div>\n"),__p+='\n<div class="child-list-wraper '+(null==(__t=isChildTask?"p3":isShowKclass?"p1":"p2")?"":__t)+'">\n	\n	<ul class="child-list '+(null==(__t=currentDeploy?"":"hide")?"":__t)+'  "></ul>\n</div>';
return __p},this.JST["task-list/task-list"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<ul class="list-container">\n\n</ul>\n<div class="showmore" data-name="showmore">\n	<a href="javascript:void(0);"  class="text_fsm">\n		<span>查看更多</span>\n	</a>\n</div>';return __p},this.JST["tdialog/dialog"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="arrow"></div>\n',settings.showClosed&&(__p+='\n	<span class="icon-dialog-closed closed_dialog"></span>\n'),__p+='\n<div class="content_dialog"></div>\n\n',(0!=settings.sure||0!=settings.cancel)&&(__p+='\n<div class="uibutton">\n	',settings.sure&&(__p+='\n		<a data-bypass href="'+(null==(__t=settings.sureLink?settings.sureLink:"javascript:void(0);")?"":__t)+'"   class="btn btn-sure sure_dialog">'+(null==(__t=settings.sureText)?"":__t)+"</a>\n		"),__p+="\n	",settings.cancel&&(__p+='\n	<a href="javascript:void(0);" title="" class="btn btn-cancel cancel_dialog">'+(null==(__t=settings.cancelText)?"":__t)+"</a>\n	"),__p+="\n</div>\n");return __p},this.JST["uploader/uploader-component-preview-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n<div class="cont_up">\n	<div class="img_up" data-name="tita-upload-preview-icon">\n		',__p+=isImage?"\n		\n		":'\n		<span class="ico_up file-'+(null==(__t=fileType)?"":__t)+'"></span>\n		',__p+='\n	</div>\n</div>\n\n<div class="name_up">'+(null==(__t=FileName)?"":__t)+'</div>\n<div class="action_up">\n	<a href="javascript:void(0);" data-name="tita-upload-preview-deleted">删除</a>\n</div>\n';return __p},this.JST["uploader/uploader-component"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+='<a href="javascript:void(0);" title="" class="upload_node ',openYFY||(__p+="upload_new_file"),__p+='" data-name="file">文件/图片</a>\n',openYFY&&(__p+='\n	<div class="tt_upload_type_container" data-name="upload-type">\n		<dl class="upload_type_item"><span class="upload_new_file" data-name="dfs-upload">本地上传</span></dl>\n		<dl class="upload_type_item"><span id="fc_upload" class="fang_cloud_btn">亿方云</span></dl>\n	</div>\n');return __p},this.JST["uploader/yfy-login-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<iframe frameborder="0" name="yfy_login" style="display: none;"></iframe>\n<form action="'+(null==(__t=host)?"":__t)+'/open/yfy_user/login" method="POST" target="yfy_login" style="display:none">\n    <input type="hidden" name="enterprise_id" value="'+(null==(__t=enterprise_id)?"":__t)+'">\n    <input type="hidden" name="platform_id" value="'+(null==(__t=platform_id)?"":__t)+'">\n    <input type="hidden" name="version" value="'+(null==(__t=version)?"":__t)+'">\n    <input type="hidden" name="timestamp" value="'+(null==(__t=timestamp)?"":__t)+'">\n    <input type="hidden" name="token" value="'+(null==(__t=token)?"":__t)+'">\n    <input type="hidden" name="email" value="'+(null==(__t=email)?"":__t)+'">\n</form>';return __p},this.JST["work-hour/work-hour"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){__p+='<div class="task-create-work-hour-pop">\n	<div class="ux_hour_list">\n		<h2>小时</h2>\n		<div class="hour_list">\n			';for(var i=0;25>i;i++)__p+='\n				<a href="javascript:void(0)" ',""!=hourDate&&hourDate==i&&(__p+='class="current"'),__p+='data-time="'+(null==(__t=i)?"":__t)+'">\n					',__p+=9>=i?"\n						0"+(null==(__t=i)?"":__t)+"\n					":"\n						"+(null==(__t=i)?"":__t)+"\n					",__p+="\n				</a>\n			";__p+='\n			\n		</div>\n	</div>\n	<div class="ux_minite_list">\n		<h2>分钟</h2>\n		<div class="minite_list">\n			<a href="javascript:void(0)"  data-time="0" ',""!==minuteDate&&0==minuteDate&&(__p+='class="current"'),__p+='>00</a>\n			<a href="javascript:void(0)"  data-time="15" ',15==minuteDate&&(__p+='class="current"'),__p+='>15</a>\n			<a href="javascript:void(0)"  data-time="30" ',30==minuteDate&&(__p+='class="current"'),__p+='>30</a>\n			<a href="javascript:void(0)"  data-time="45" ',45==minuteDate&&(__p+='class="current"'),__p+=">45</a>\n		</div>\n	</div>\n</div>"}return __p},this.JST}(),BaseCollection={request:function(a){function b(a){var b=a.Code;if(1==b){var e=a.Data;a.ExtendedData&&(e=Talent._.extend({},a.Data,a.ExtendedData)),d.resolve(e)}else 401==b&&c(),d.reject(a.Message)}function c(){throw location.href=Context.getLoginUrl(),new Error("401")}var d=new Talent.$.Deferred;return a=Talent._.extend({},a),a.url=a.url||this.url,a.url=Context.getApiUrl(a.url),a.mockData?b(a.mockData):Talent.$.ajax(a).done(b),d.promise()},requestV2:function(a){function b(a){var b=a.Code;if(1==b){var d=a.Data;a.ExtendedData&&(d=Talent._.extend({},a.Data,a.ExtendedData)),c.resolve(d)}else c.reject(a.Message)}var c=new Talent.$.Deferred;return a=Talent._.extend({},a),a.url=a.url||this.url,a.url=Context.getApiUrlV2(a.url),a.mockData?b(a.mockData):Talent.$.ajax(a).done(b),c.promise()},batch:function(options){function action(resp){for(x in resp)resp[x].Data=eval("("+resp[x].Data+")");deferred.resolve(resp)}var deferred=new Talent.$.Deferred,urls=[];options=Talent._.extend({},options),options.url=options.url||this.url;for(var i=0;i<options.url.length;i++)urls.push(Context.getApiUrl(options.url[i]));return options.mockData?action(options.mockData):Talent.$.ajax({url:Context.getApiUrl("batch"),type:"POST",headers:{"x-bs-batch":1},data:"['"+urls.join("','")+"']",contentType:"application/json; charset=UTF-8"}).done(action),deferred.promise()},batchV2:function(options){function action(resp){for(x in resp)resp[x].Data=eval("("+resp[x].Data+")");deferred.resolve(resp)}var deferred=new Talent.$.Deferred,urls=[];options=Talent._.extend({},options),options.url=options.url||this.url;for(var i=0;i<options.url.length;i++)urls.push(Context.getApiUrlV2(options.url[i]));return options.mockData?action(options.mockData):Talent.$.ajax({url:Context.getApiUrl("batch"),type:"POST",headers:{"x-bs-batch":1},data:"['"+urls.join("','")+"']",contentType:"application/json; charset=UTF-8"}).done(action),deferred.promise()}},CommentV2={commentCount:4,feedFount:20,getCommentGet:function(a){var b={feed_id:"",comment_type:0},a=Talent._.extend({},b,a),c="comment/Get",d=new Talent.$.Deferred,e="?feed_id="+a.feed_id+"&comment_type="+a.comment_type;return BaseCollection.requestV2({url:c+e,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},postCommentAdd:function(a){var b={FeedId:"",CommentId:"",Content:"",FileUrl:"",ObjId:"",ObjType:""},a=Talent._.extend({},b,a),c="comment/Add",d=new Talent.$.Deferred;return BaseCollection.requestV2({url:c,type:"Post",data:a}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},getCommentGetByIds:function(a){var b={comment_id:""},a=Talent._.extend({},b,a),c="comment/GetByIds",d=new Talent.$.Deferred,e="?comment_id="+a.comment_id;return BaseCollection.requestV2({url:c+e,type:"get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},deleteCommentGetByIds:function(a){var b={comment_id:"",feed_id:""},a=Talent._.extend({},b,a),c="comment/Delete",d=new Talent.$.Deferred,e="?comment_id="+a.comment_id+"&feed_id="+a.feed_id;return BaseCollection.requestV2({url:c+e,type:"DELETE"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()}},EmotionCollection={getEmotionData:function(a){var b=this,c=new Talent.$.Deferred,d={},a=Talent._.extend({},d,a),e="tenant/Eomticon";return this.emotionData?c.resolve(this.emotionData):(BaseCollection.request({url:e,type:"get",data:a}).done(function(a){c.resolve(a.packages),b.emotionData=a.packages}).fail(function(a){c.reject(a)}),c)}},ExperienceCollection={deleteShare:function(a){var b="Experience/Delete",c={obj_id:"",obj_type:"7",experience_id:""},a=Talent._.extend({},c,a),d="?experience_id="+a.experience_id+"&obj_id="+a.obj_id+"&obj_type="+a.obj_type,e=new Talent.$.Deferred;return BaseCollection.requestV2({url:b+d,type:"POST"}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},editShareContent:function(a){var b={experience_id:"",content:""},c="Experience/Update",a=Talent._.extend({},b,a),d="?experience_id="+a.experience_id,e=new Talent.$.Deferred;return BaseCollection.requestV2({url:c+d,type:"POST",data:{content:a.content}}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},editShareDate:function(a){var b={experience_id:"",startDate:"",endDate:""},c="Experience/UpdateDate",a=Talent._.extend({},b,a),d="?experience_id="+a.experience_id+"&startDate="+a.startDate+"&endDate="+a.endDate,e=new Talent.$.Deferred;return BaseCollection.requestV2({url:c+d,type:"POST",data:a}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},addShare:function(a){var b={ObjId:"",ObjType:"7",Content:"",StartDate:"",EndDate:"",FileUrls:"",DocumentModels:[]},c="Experience/Add",a=Talent._.extend({},b,a),d=new Talent.$.Deferred;return BaseCollection.requestV2({url:c,type:"POST",data:a}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()}},LableCollection={searchClassData:function(a){var b=new Talent.$.Deferred,c={},a=Talent._.extend({},c,a),d="Lable/Search";return BaseCollection.request({url:d,type:"POST",data:{"":a.filter}}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},getLableData:function(a){var b=new Talent.$.Deferred,c={obj_id:"",obj_type:"1"},a=Talent._.extend({},c,a),d="lable/get";return 2==a.obj_type?d=d+"?obj_id="+a.obj_id+"&obj_type="+a.obj_type:a.to_userId&&(d+="?to_userId="+a.to_userId),BaseCollection.request({url:d,type:"Get"}).done(function(a){function c(b,d){Talent._.each(b,function(b){var e=b.id;d&&(b.fullName=d.fullName+"/"+b.name);var f=Talent._.where(a,{parent_id:e});f=Talent._.compact(f),f.length?(b.children=f,b.isEnd=!1):(b.children=null,b.isEnd=!0),c(f,b)})}var a=a.lables||[],d={};d.lables=a;var e=[{id:"0",parent_id:"0",name:"类别",fullName:"类别"}],f=Talent._.where(a,{parent_id:"0"});f=Talent._.compact(f),c(e),d.lables=e,b.resolve(d)}).fail(function(a){b.reject(a)}),b},putRenameLableData:function(a){var b=new Talent.$.Deferred,c={lable_id:"",name:""},a=Talent._.extend({},c,a),d="lable/name";return BaseCollection.request({url:d,type:"Post",data:a}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},deleteLableData:function(a){var b=new Talent.$.Deferred,c={lable_id:""},a=Talent._.extend({},c,a),d="lable/remove";return d=d+"?lable_id="+a.lable_id,BaseCollection.request({url:d,type:"delete"}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},postAddLableData:function(a){var b=new Talent.$.Deferred,c={obj_id:"",obj_type:"1",name:"",parent_id:""},a=Talent._.extend({},c,a),d="lable/add";return BaseCollection.request({url:d,type:"post",data:a}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},getLabelFullName:function(a){var b=new Talent.$.Deferred,c={lableId:0},a=Talent._.extend({},c,a),d="Lable/GetFullName?lableId="+a.lableId;return BaseCollection.request({url:d,type:"get"}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b}},MeetCollection={updateMeet:function(a){var b={Title:"",StartDate:"",DeadLine:"",MeetType:"",meet_id:"",StartDate:"",DeadLine:"",ContractUser:""},a=Talent._.extend({},b,a),c="Meet/Update?meet_id="+a.meet_id,d=new Talent.$.Deferred;return BaseCollection.request({url:c,type:"POST",data:a}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},getDetail:function(a){var b={obj_id:"",obj_type:"7",meet_id:""},a=Talent._.extend({},b,a),c="Meet/Get?meet_id="+a.meet_id+"&obj_id="+a.obj_id+"&obj_type="+a.obj_type,d=new Talent.$.Deferred;return BaseCollection.request({url:c,type:"GET"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},addMeet:function(a){var b={ObjId:"",ObjType:7,Title:"",ContractUser:"",StartDate:"",DeadLine:"",FileUrls:"",MeetType:"",Description:""},a=Talent._.extend({},b,a),c="Meet/AddV2",d=new Talent.$.Deferred;return BaseCollection.request({url:c,type:"POST",data:a}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},deleteMeet:function(a){var b="Meet/Delete?id="+a.id,c=new Talent.$.Deferred;return BaseCollection.request({url:b,type:"POST"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},addAttachment:function(a){var b="Meet/AddAttachmentV2",c=new Talent.$.Deferred,d={objId:"",dfsUrls:"",documents:[]};return a=Talent._.extend({},d,a),BaseCollection.request({url:b,type:"POST",data:a}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},deleteAttachment:function(a){var b="Meet/DeleteAttachment",c=new Talent.$.Deferred,d={meet_id:"",document_id:""};a=Talent._.extend({},d,a);var e="meet_id="+a.meet_id+"&document_id="+a.document_id;return BaseCollection.request({url:b+"?"+e,type:"POST"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},addParticipator:function(a){var b="Meet/AddParticipatorV2",c=new Talent.$.Deferred,d={meet_id:"",add_objects:""};a=Talent._.extend({},d,a);var e="meet_id="+a.meet_id;return BaseCollection.request({url:b+"?"+e,type:"POST",contentType:"application/json",data:JSON.stringify(a.add_objects)}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},deleteParticipator:function(a){var b="Meet/DeleteParticipator",c=new Talent.$.Deferred,d={meet_id:"",to_user_id:""};a=Talent._.extend({},d,a);var e="meet_id="+a.meet_id+"&to_user_id="+a.to_user_id;return BaseCollection.request({url:b+"?"+e,type:"POST"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()}},OrgCollection={getToUserIdSuperior:function(a){var a=a||{},b=new Talent.$.Deferred,c="org/Superiors?to_user_id="+a.to_user_id+"&lv=2";return BaseCollection.request({url:c,type:"Get"}).done(function(a){var c=a||[];b.resolve(c.length?c[0].ParentUser:a)}).fail(function(a){b.reject(a)}),b},getData:function(a){var b=new $.Deferred,c=(Talent.Context.getUserInfo().Id,parseInt(a.id)),d=a.activeId&&parseInt(a.activeId)||0,e=this;return BaseCollection.request({url:"org/all",type:"Get"}).done(function(a){if(!a.Res)return void b.resolve(a.Res);a=a.Data,a=e.getSuperiorAndSubordinate(a);var f=Talent._.where(a,{Id:parseInt(c)}),g=Talent._.pluck(Talent._.where(a,{Superior:c}),"Id");g=Talent._.compact(g);var h=Talent._.indexOf(g,d);-1!=h&&(g=g.slice(0,h).concat(g.slice(h+1,g.length)),g=[d].concat(g));var i=f&&f[0]&&f[0].Superior||0,j=[i,c].concat(g).join();UserCollection.getData({ids:j}).done(function(d){var e=Talent._.map(g,function(b){var c=d[b];if(c)return c.subordinateCount=Talent._.where(a,{Superior:b}).length,c.level=3,c});e=Talent._.compact(e);var f=d[c]||{Id:0};f.subordinateCount=Talent._.where(a,{Superior:c}).length,f.level=2,f.subordinate=e;var h=d[i]||{Id:0};h.level=1,h.subordinateCount=Talent._.where(a,{Superior:i}).length,h.subordinate=[f];var j=[h];b.resolve(j)})}).fail(function(a){b.reject(a)}),b.promise()},getDataType:function(a){var b=new $.Deferred,c=(Talent.Context.getUserInfo().Id,parseInt(a.id)),d=a.activeId&&parseInt(a.activeId)||0,e=this,f="org/allByType";if(1==a.type)var f=f+"?type=1";return BaseCollection.request({url:f,type:"Get"}).done(function(a){if(!a.Res)return void b.resolve(a.Res);a=a.Data;var f=a;a=e.getSuperiorAndSubordinate(a);var g=Talent._.where(a,{Id:parseInt(c)}),h=Talent._.pluck(Talent._.where(a,{Superior:c}),"Id");h=Talent._.compact(h);var i=Talent._.indexOf(h,d);-1!=i&&(h=h.slice(0,i).concat(h.slice(i+1,h.length)),h=[d].concat(h));var j=g&&g[0]&&g[0].Superior||0,k=[j,c].concat(h).join();UserCollection.getData({ids:k}).done(function(d){var e=Talent._.map(h,function(b){var c=d[b];if(c)return c.subordinateCount=Talent._.where(a,{Superior:b}).length,c.level=3,c});e=Talent._.compact(e),Talent._.map(e,function(a){var b=Talent._.where(f,{Id:a.Id});if(b.length>1)var b=Talent._.where(b,{Superior:c});a.Type=b&&b[0]?b[0].Type:0}),Talent._.sortBy(e,"Type");var g=d[c]||{Id:0};g.subordinateCount=Talent._.where(a,{Superior:c}).length,g.level=2,g.subordinate=e;var i=d[j]||{Id:0};i.level=1,i.subordinateCount=Talent._.where(a,{Superior:j}).length,i.subordinate=[g];var k=[i];b.resolve(k)})}).fail(function(a){b.reject(a)}),b.promise()},getSubordinateData:function(a){var b={lv:2,type:0},a=Talent._.extend({},b,a),c=new Talent.$.Deferred,d="org/GetMySubordinates",e="?lv="+a.lv+"&type="+a.type;return BaseCollection.request({url:d+e,type:"Get"}).done(function(a){a&&a.length||c.resolve([]);var b=[];Talent._.each(a,function(a){a.User.Type=a.Type,b.push(a.User)}),c.resolve(b)}).fail(function(a){c.reject(a)}),c},getSuperior:function(a){var b=new $.Deferred,c=this,d=(Talent.Context.getUserInfo().Id,parseInt(a.id));return BaseCollection.request({url:"org/allByType",type:"Get"}).done(function(a){a=a.Data;var a=c.getSuperiorAndSubordinate(a),e=Talent._.where(a,{Id:d});if(0==e.length)var f=0;else var f=e[0].Superior||0;b.resolve(f)}),b.promise()},getOpenUserOrg:function(){var a=new $.Deferred;return BaseCollection.request({url:"org/AppOpenUserOrg",type:"POST"}).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a.promise()},getSuperiorAndSubordinate:function(a){function b(c){var d=Talent._.where(a,{Superior:c});Talent._.each(d,function(a){e.push(a),1!=a.Type&&b(a.Id)})}var c=Talent.Context.getUserInfo().Id,d=Talent._.where(a,{Id:c})[0];if(Talent._.isEmpty(a))return a;if(0==d.Superior)return a;{var e=[];d.Superior}return e.push({Id:c,Superior:0}),b(c),e},checkDottedLineSubs:function(a){var b={to_user_id:""},a=Talent._.extend({},b,a),c=new Talent.$.Deferred,d="org/CheckDottedLineSubs",e="?to_user_id="+a.to_user_id;return BaseCollection.request({url:d+e,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c}},PlanDataJson={taglist:[{GroupId:1,GroupName:"2013",Active:!1,PlanTableListModels:[{TagId:14,TagName:"待定",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"待定计划",PlanTableId:"09DBFFCC-0F6C-4FB1-9B7A-D07E1046C656",PlanTableType:5,StartDate:"2013年1月1日",EndDate:"2017年1月1日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:1,TagName:"年/季",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"年度",PlanTableId:"d66be84a-ec3b-4335-88c6-0ad898ca3fd4",PlanTableType:1,StartDate:"2013年1月1日",EndDate:"2013年12月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第一季度",PlanTableId:"dc443e88-de59-46eb-b092-eab0875c38c6",PlanTableType:2,StartDate:"2013年1月1日",EndDate:"2013年3月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第二季度",PlanTableId:"c8773247-617d-469f-b249-fb06f3ae5753",PlanTableType:2,StartDate:"2013年4月1日",EndDate:"2013年6月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第三季度",PlanTableId:"256e8486-e270-4910-8fe3-d9d88aad775d",PlanTableType:2,StartDate:"2013年7月1日",EndDate:"2013年9月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第四季度",PlanTableId:"e682669d-ca4f-4b5b-aae0-c38ab93b9cb1",PlanTableType:2,StartDate:"2013年10月1日",EndDate:"2013年12月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:2,TagName:"1月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"58c077dd-5c0e-45e2-8733-1446dad3ff13",PlanTableType:3,StartDate:"2013年1月1日",EndDate:"2013年1月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"ebdd2fc3-fba3-41bf-8d13-9121b0921cd3",PlanTableType:4,StartDate:"2012年12月31日",EndDate:"2013年1月6日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"cfa2cbc7-7b03-4311-a5f6-0b645ff484e2",PlanTableType:4,StartDate:"2013年1月7日",EndDate:"2013年1月13日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"dc494344-3747-4a1b-ae1a-b5981f49c4cc",PlanTableType:4,StartDate:"2013年1月14日",EndDate:"2013年1月20日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"7aab381d-4ccc-4476-9b3a-b383ff485fee",PlanTableType:4,StartDate:"2013年1月21日",EndDate:"2013年1月27日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"c4c7df92-1264-4f5b-849f-19212ab64500",PlanTableType:4,StartDate:"2013年1月28日",EndDate:"2013年2月3日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:3,TagName:"2月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"24298576-c48e-44ac-9708-a582da16525c",PlanTableType:3,StartDate:"2013年2月1日",EndDate:"2013年2月28日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"6db9ef30-04f2-4dfd-a4ca-16eaba9b1896",PlanTableType:4,StartDate:"2013年2月4日",EndDate:"2013年2月10日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"ac2a85b0-618a-4d4f-906c-cd00bdaa84c4",PlanTableType:4,StartDate:"2013年2月11日",EndDate:"2013年2月17日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"e6b66815-c3b2-480a-9106-aa32d78f3cf4",PlanTableType:4,StartDate:"2013年2月18日",EndDate:"2013年2月24日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"c847579e-d7cd-4cc1-be6a-dc31a666f456",PlanTableType:4,StartDate:"2013年2月25日",EndDate:"2013年3月3日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:4,TagName:"3月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"2e18c73e-1407-41f1-bfeb-bc10d100031b",PlanTableType:3,StartDate:"2013年3月1日",EndDate:"2013年3月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"a5e55f00-ffec-451b-878c-21f33319e2f6",PlanTableType:4,StartDate:"2013年3月4日",EndDate:"2013年3月10日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"6041f9ed-db4c-42e6-af6d-18cc02c62d5b",PlanTableType:4,StartDate:"2013年3月11日",EndDate:"2013年3月17日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"dbd3ae4d-7e2a-4ed7-a74b-880c6412b7c0",PlanTableType:4,StartDate:"2013年3月18日",EndDate:"2013年3月24日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"0acea7a8-2f8e-458e-9be2-5122d7ada5ee",PlanTableType:4,StartDate:"2013年3月25日",EndDate:"2013年3月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:5,TagName:"4月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"61224aa5-c191-4448-aabd-c72249a594f7",PlanTableType:3,StartDate:"2013年4月1日",EndDate:"2013年4月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"aeac5af6-8955-4d67-a69d-6ef0037151a2",PlanTableType:4,StartDate:"2013年4月1日",EndDate:"2013年4月7日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"5d78398c-8c27-4e01-ad74-1361fa2c2667",PlanTableType:4,StartDate:"2013年4月8日",EndDate:"2013年4月14日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"9dbb380c-1fd6-4438-9c83-b9085f7663fa",PlanTableType:4,StartDate:"2013年4月15日",EndDate:"2013年4月21日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"4ae49a1d-a7b5-41e3-bb7c-b5069a4d252f",PlanTableType:4,StartDate:"2013年4月22日",EndDate:"2013年4月28日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"0d1b1672-3d49-4523-8980-6cd87533006d",PlanTableType:4,StartDate:"2013年4月29日",EndDate:"2013年5月5日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:6,TagName:"5月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"c1a9a11b-7a61-4578-943c-25499322aeea",PlanTableType:3,StartDate:"2013年5月1日",EndDate:"2013年5月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"c9d74c19-bf2b-48fd-bccd-ab99e331b0b5",PlanTableType:4,StartDate:"2013年5月6日",EndDate:"2013年5月12日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"ea4c1b39-d254-4b66-9b39-325e0580d9d4",PlanTableType:4,StartDate:"2013年5月13日",EndDate:"2013年5月19日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"697806eb-e89b-48ef-aa4b-cebef6b92123",PlanTableType:4,StartDate:"2013年5月20日",EndDate:"2013年5月26日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"b1d86326-5f6e-4368-9245-611c027a0517",PlanTableType:4,StartDate:"2013年5月27日",EndDate:"2013年6月2日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:7,TagName:"6月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"fbaea0c9-45d4-4a69-b5fd-333e80d392a9",PlanTableType:3,StartDate:"2013年6月1日",EndDate:"2013年6月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"855b9320-30c0-4404-9337-88a93724a2e5",PlanTableType:4,StartDate:"2013年6月3日",EndDate:"2013年6月9日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"d98a00c4-271a-4b22-b539-9f7b0c32c300",PlanTableType:4,StartDate:"2013年6月10日",EndDate:"2013年6月16日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"d627a90c-6fb4-46f7-9c4a-a2ca0c88173b",PlanTableType:4,StartDate:"2013年6月17日",EndDate:"2013年6月23日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"7f9d5abe-005a-4961-82e5-57bf6f00f8c6",PlanTableType:4,StartDate:"2013年6月24日",EndDate:"2013年6月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:8,TagName:"7月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"3c788377-b9d2-45b0-a8b0-e4947a030a38",PlanTableType:3,StartDate:"2013年7月1日",EndDate:"2013年7月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"51551619-239c-4691-a563-a6085d34c27b",PlanTableType:4,StartDate:"2013年7月1日",EndDate:"2013年7月7日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"66e014c3-0975-4b0e-b436-53005fdd4fe0",PlanTableType:4,StartDate:"2013年7月8日",EndDate:"2013年7月14日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"75b7f36d-77d0-479c-b720-686be1ea24c6",PlanTableType:4,StartDate:"2013年7月15日",EndDate:"2013年7月21日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"d05436cf-eebe-4399-b066-76034c982f21",PlanTableType:4,StartDate:"2013年7月22日",EndDate:"2013年7月28日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"01e173a2-c1b6-4862-a775-aad626312e38",PlanTableType:4,StartDate:"2013年7月29日",EndDate:"2013年8月4日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:9,TagName:"8月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"6a647758-3bdb-4669-8ad8-5526a535e176",PlanTableType:3,StartDate:"2013年8月1日",EndDate:"2013年8月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"aa4d0b58-62d0-4ef7-9f37-56256dfbf62f",PlanTableType:4,StartDate:"2013年5月5日",EndDate:"2013年8月11日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"e1f1b8a9-901c-4cde-bc9b-10c43063356a",PlanTableType:4,StartDate:"2013年8月12日",EndDate:"2013年8月18日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"31ba2858-7296-4683-bc63-5f377658c310",PlanTableType:4,StartDate:"2013年8月19日",EndDate:"2013年8月25日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"deda146f-9351-4f4e-a3db-160db6a4ac4a",PlanTableType:4,StartDate:"2013年8月26日",EndDate:"2013年9月1日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:10,TagName:"9月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"559c85b1-a151-4722-bb06-888e29629d34",PlanTableType:3,StartDate:"2013年9月1日",EndDate:"2013年9月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"535bd243-25f3-4c50-895a-45fdfb6f3fee",PlanTableType:4,StartDate:"2013年9月2日",EndDate:"2013年9月8日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"40b84eff-a0d3-4dad-a5e5-a2c821ff6182",PlanTableType:4,StartDate:"2013年9月9日",EndDate:"2013年9月15日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"d523ddd7-5896-45a2-9127-f26366550234",PlanTableType:4,StartDate:"2013年9月16日",EndDate:"2013年9月22日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"9ee3546c-83f9-4d00-b412-4988dddbac48",PlanTableType:4,StartDate:"2013年9月23日",EndDate:"2013年9月29日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"91da1b33-bdb2-43bc-b47e-ba504db0b216",PlanTableType:4,StartDate:"2013年9月30日",EndDate:"2013年10月6日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:11,TagName:"10月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"643f6886-dc7b-40e9-a7e0-6e45be410a12",PlanTableType:3,StartDate:"2013年10月1日",EndDate:"2013年10月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"1d8d4725-05de-456a-9013-f2a4f18314d4",PlanTableType:4,StartDate:"2013年10月7日",EndDate:"2013年10月13日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"237b945b-bee6-4afc-b61d-d2d450d87d38",PlanTableType:4,StartDate:"2013年10月14日",EndDate:"2013年10月20日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"a626af9c-5c13-45bd-9b11-3d0e4009a76d",PlanTableType:4,StartDate:"2013年10月21日",EndDate:"2013年10月27日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"901f1ace-bc94-4b39-890e-8b16842d17a3",PlanTableType:4,StartDate:"2013年10月28日",EndDate:"2013年11月3日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:12,TagName:"11月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"6db951ce-677d-4e3d-907d-67956828a312",PlanTableType:3,StartDate:"2013年11月1日",EndDate:"2013年11月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"5d443711-6851-44bd-8b15-4274f9f9e37e",PlanTableType:4,StartDate:"2013年11月4日",EndDate:"2013年11月10日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"c2cd353f-c367-4919-b2d3-e4a44b22e798",PlanTableType:4,StartDate:"2013年11月11日",EndDate:"2013年11月17日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"3c615b2c-2b58-41a7-befd-c973b8d1a769",PlanTableType:4,StartDate:"2013年11月18日",EndDate:"2013年11月24日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"c397c397-a8b3-4593-8630-92ad2f4d13b9",PlanTableType:4,StartDate:"2013年11月25日",EndDate:"2013年12月1日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:13,TagName:"12月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"3f538e12-5b69-4e36-80c1-fc1c92cc56db",PlanTableType:3,StartDate:"2013年12月1日",EndDate:"2013年12月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"849cf074-c872-478f-9cf5-8a5290da5f7a",PlanTableType:4,StartDate:"2013年12月2日",EndDate:"2013年12月8日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"4c276125-a530-42c8-83a1-3aaed54d4fad",PlanTableType:4,StartDate:"2013年12月9日",EndDate:"2013年12月15日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"3af3506b-4b46-456c-8155-fe57614e8d4a",PlanTableType:4,StartDate:"2013年12月16日",EndDate:"2013年12月22日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"3ee41d52-c8bf-45c5-85b0-444788ffa3ec",PlanTableType:4,StartDate:"2013年12月23日",EndDate:"2013年12月29日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]}]},{GroupId:2,GroupName:"2014",Active:!1,PlanTableListModels:[{TagId:14,TagName:"待定",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"待定计划",PlanTableId:"09DBFFCC-0F6C-4FB1-9B7A-D07E1046C656",PlanTableType:5,StartDate:"2013年1月1日",EndDate:"2017年1月1日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:1,TagName:"年/季",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"年度",PlanTableId:"943e8cdd-5034-49ca-a6ca-169e3be402de",PlanTableType:1,StartDate:"2014年1月1日",EndDate:"2014年12月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第一季度",PlanTableId:"af0306d0-505e-4187-b5ed-e6d8c205294f",PlanTableType:2,StartDate:"2014年1月1日",EndDate:"2014年3月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第二季度",PlanTableId:"ba37638d-702b-448d-bc18-96804a69289d",PlanTableType:2,StartDate:"2014年4月1日",EndDate:"2014年6月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第三季度",PlanTableId:"2f74cae4-5837-4f14-a06e-40994b088371",PlanTableType:2,StartDate:"2014年7月1日",EndDate:"2014年9月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第四季度",PlanTableId:"62a7c461-8c34-4d44-b77c-9c802c01df6f",PlanTableType:2,StartDate:"2014年10月1日",EndDate:"2014年12月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:2,TagName:"1月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"367fbc6c-a7f8-4469-952c-a77bfb0d07d5",PlanTableType:3,StartDate:"2014年1月1日",EndDate:"2014年1月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"5ac69bfe-6096-43ed-9104-4cfdfaa6b12f",PlanTableType:4,StartDate:"2013年12月30日",EndDate:"2014年1月5日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"879556af-87c1-4466-ba10-70fb22d056b4",PlanTableType:4,StartDate:"2014年1月6日",EndDate:"2014年1月12日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"d3571fa6-b75c-4671-ae2d-04b0d4680bf1",PlanTableType:4,StartDate:"2014年1月13日",EndDate:"2014年1月19日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"33272d95-0d41-4d9f-b485-3d55198ff5a6",PlanTableType:4,StartDate:"2014年1月20日",EndDate:"2014年1月26日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"2bb8fe4e-5709-473e-98f9-99c7d2868946",PlanTableType:4,StartDate:"2014年1月27日",EndDate:"2014年2月2日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:3,TagName:"2月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"31a13001-e002-4be7-9cd9-21180c7babbb",PlanTableType:3,StartDate:"2014年2月1日",EndDate:"2014年2月28日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"53addd60-e892-4f33-988b-520ae4b666c2",PlanTableType:4,StartDate:"2014年2月3日",EndDate:"2014年2月9日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"262dc59b-6319-4b9b-8df9-e7db9c12072e",PlanTableType:4,StartDate:"2014年2月10日",EndDate:"2014年2月16日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"0934abf0-a576-4bc0-86d7-4a54c9ee6fd0",PlanTableType:4,StartDate:"2014年2月17日",EndDate:"2014年2月23日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"4f0b854a-e7d4-44b8-a251-7aaf2dbd4d73",PlanTableType:4,StartDate:"2014年2月24日",EndDate:"2014年3月2日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:4,TagName:"3月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"6321490b-c69c-423e-8365-a26618d510f2",PlanTableType:3,StartDate:"2014年3月1日",EndDate:"2014年3月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"045da08d-304f-4d97-86f5-7c52ff3cd910",PlanTableType:4,StartDate:"2014年3月3日",EndDate:"2014年3月9日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"fdb86894-d784-4514-a9fe-189fb4b3bc1e",PlanTableType:4,StartDate:"2014年3月10日",EndDate:"2014年3月16日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"b96089d6-3227-4bba-b840-4dd64a182458",PlanTableType:4,StartDate:"2014年3月17日",EndDate:"2014年3月23日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"ef02ec93-4165-4b75-b4ff-299d36356723",PlanTableType:4,StartDate:"2014年3月24日",EndDate:"2014年3月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"fd4d2ba6-88b2-480d-afdb-b6376e109e75",PlanTableType:4,StartDate:"2014年3月31日",EndDate:"2014年4月6日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:5,TagName:"4月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"c57c4108-c96e-44f6-b808-c17d4f082b95",PlanTableType:3,StartDate:"2014年4月1日",EndDate:"2014年4月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"cd0d8f4a-7588-400d-a25c-b4e48071f828",PlanTableType:4,StartDate:"2014年4月7日",EndDate:"2014年4月13日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"df99b899-96d4-4a8c-acaa-eb7b8421cf49",PlanTableType:4,StartDate:"2014年4月14日",EndDate:"2014年4月20日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"5f40affb-3d6d-4c0a-936c-06b87dd14df0",PlanTableType:4,StartDate:"2014年4月21日",EndDate:"2014年4月27日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"be1b34f0-f531-4eb4-b960-b82a7c0f4bb3",PlanTableType:4,StartDate:"2014年4月28日",EndDate:"2014年5月4日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:6,TagName:"5月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"bff7b74d-b5e4-45b7-96dc-e089f53a4004",PlanTableType:3,StartDate:"2014年5月1日",EndDate:"2014年5月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"b624855d-c35d-4f3f-b778-59ed67a0d1a0",PlanTableType:4,StartDate:"2014年5月5日",EndDate:"2014年5月11日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"c0a1297d-e6a1-455a-b68b-272452298a3b",PlanTableType:4,StartDate:"2014年5月12日",EndDate:"2014年5月18日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"7bc1d3f9-ec1c-47cd-8898-fc58f5d38691",PlanTableType:4,StartDate:"2014年5月19日",EndDate:"2014年5月25日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"514e0a4b-7cc3-4bfd-b925-c86208f20e41",PlanTableType:4,StartDate:"2014年5月26日",EndDate:"2014年6月1日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:7,TagName:"6月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"0b17026f-7fe9-4f42-b98f-db1e51dcd090",PlanTableType:3,StartDate:"2014年6月1日",EndDate:"2014年6月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"0181bd76-043e-4acf-8c2e-fc2bd11f2fcd",PlanTableType:4,StartDate:"2014年6月2日",EndDate:"2014年6月8日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"c044ba56-3ee5-406a-9013-142d5c392be8",PlanTableType:4,StartDate:"2014年6月9日",EndDate:"2014年6月15日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"30a2a685-c410-437a-9372-7924639efb50",PlanTableType:4,StartDate:"2014年6月16日",EndDate:"2014年6月22日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"b57310ec-abb1-4ea2-9d89-e3ab05c07089",PlanTableType:4,StartDate:"2014年6月23日",EndDate:"2014年6月29日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"ba56b6c1-690f-4d27-85ad-136958ba356e",PlanTableType:4,StartDate:"2014年6月30日",EndDate:"2014年7月6日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:8,TagName:"7月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"63384367-47c7-4857-871c-fec05b69f7b6",PlanTableType:3,StartDate:"2014年7月1日",EndDate:"2014年7月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"4cabd5b2-bcf2-4ecd-ab83-a08da8073111",PlanTableType:4,StartDate:"2014年7月7日",EndDate:"2014年7月13日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"45e8a8dd-3f3a-4c67-848e-46bf2c58fcd1",PlanTableType:4,StartDate:"2014年7月14日",EndDate:"2014年7月20日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"32aa5c04-30dc-40fc-a822-c9e9f9244f3b",PlanTableType:4,StartDate:"2014年7月21日",EndDate:"2014年7月27日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"5ba234e5-58c5-48d0-b1b3-84270c18893b",PlanTableType:4,StartDate:"2014年7月28日",EndDate:"2014年8月3日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:9,TagName:"8月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"99f48567-7a97-4413-a4bd-19d4bfe87e6b",PlanTableType:3,StartDate:"2014年8月1日",EndDate:"2014年8月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"7ab3019c-88ff-442d-bde0-699691d061ba",PlanTableType:4,StartDate:"2014年8月4日",EndDate:"2014年8月10日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"773e6fe0-9060-404e-9ccf-70155794c2a3",PlanTableType:4,StartDate:"2014年8月11日",EndDate:"2014年8月17日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"c2dc3134-e4fa-46f3-9696-084ab9489140",PlanTableType:4,StartDate:"2014年8月18日",EndDate:"2014年8月24日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"8d7977f7-7e1c-4b45-86d6-d6ac3566d7b0",PlanTableType:4,StartDate:"2014年8月25日",EndDate:"2014年8月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:10,TagName:"9月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"8e4b9716-0aa0-420a-b254-4af9972e05de",PlanTableType:3,StartDate:"2014年9月1日",EndDate:"2014年9月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"c756951f-ec78-4718-b030-438730895314",PlanTableType:4,StartDate:"2014年9月1日",EndDate:"2014年9月7日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"0d2b4bd4-8fbb-48da-ab07-5f34890cbfc9",PlanTableType:4,StartDate:"2014年9月8日",EndDate:"2014年9月14日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"a87b92b1-b049-44b5-ac6c-e6a4c4378609",PlanTableType:4,StartDate:"2014年9月15日",EndDate:"2014年9月21日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"b5aa31e1-3f47-48c2-88ef-8a57abcc7a1e",PlanTableType:4,StartDate:"2014年9月22日",EndDate:"2014年9月28日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"815fd745-57f6-4e36-ac69-d927096e0101",PlanTableType:4,StartDate:"2014年9月29日",EndDate:"2014年10月5日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:11,TagName:"10月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"b9cdc0cf-77c6-4527-885c-08dcf3ec024d",PlanTableType:3,StartDate:"2014年10月1日",EndDate:"2014年10月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"06d0fa01-b1dd-4789-bde0-40a43b270719",PlanTableType:4,StartDate:"2014年10月6日",EndDate:"2014年10月12日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"d4843ed0-317e-49b6-99a7-e7d5af3708a7",PlanTableType:4,StartDate:"2014年10月13日",EndDate:"2014年10月19日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"a40a3a22-bd66-448c-88bf-c5c1b7520cc0",PlanTableType:4,StartDate:"2014年10月20日",EndDate:"2014年10月26日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"67fe26b0-1e1d-4d54-b12b-9b59e06f6ade",PlanTableType:4,StartDate:"2014年10月27日",EndDate:"2014年11月2日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:12,TagName:"11月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"f38301c9-7f39-4647-836b-9cb46cc5051d",PlanTableType:3,StartDate:"2014年11月1日",EndDate:"2014年11月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"dd7f765f-c5e7-45e6-bdc5-0b20614984da",PlanTableType:4,StartDate:"2014年11月3日",EndDate:"2014年11月9日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"b237c884-2538-4202-883d-58fdf981db90",PlanTableType:4,StartDate:"2014年11月10日",EndDate:"2014年11月16日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"ca2d0bd0-5b9b-4b16-bc66-84b09574a702",PlanTableType:4,StartDate:"2014年11月17日",EndDate:"2014年11月23日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"82691222-f2fa-482e-b025-3fc9238a7dc1",PlanTableType:4,StartDate:"2014年11月24日",EndDate:"2014年11月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:13,TagName:"12月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"18daafef-674b-402a-ac68-e13f43b76d4b",PlanTableType:3,StartDate:"2014年12月1日",EndDate:"2014年12月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"8be2c505-d425-4ae5-86fd-ccbaf3ccd6bb",PlanTableType:4,StartDate:"2014年12月1日",EndDate:"2014年12月7日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"b57d878d-9973-4fb3-8043-d8937045d67f",PlanTableType:4,StartDate:"2014年12月8日",EndDate:"2014年12月14日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"51c3d5c5-9fc3-4ae6-a6c8-9369518d6c20",PlanTableType:4,StartDate:"2014年12月15日",EndDate:"2014年12月21日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"f85146e3-ed8f-4c3c-a1fc-41088fc0b913",PlanTableType:4,StartDate:"2014年12月22日",EndDate:"2014年12月28日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]}]},{GroupId:3,GroupName:"2015",Active:!1,PlanTableListModels:[{TagId:14,TagName:"待定",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"待定计划",PlanTableId:"09DBFFCC-0F6C-4FB1-9B7A-D07E1046C656",PlanTableType:5,StartDate:"2013年1月1日",EndDate:"2017年1月1日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:1,TagName:"年/季",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"年度",PlanTableId:"44ffca9b-f846-43b9-8633-3a2824eefc5a",PlanTableType:1,StartDate:"2015年1月1日",EndDate:"2015年12月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第一季度",PlanTableId:"3dd6f2df-1a2f-493b-be36-4410a3e89b57",PlanTableType:2,StartDate:"2015年1月1日",EndDate:"2015年3月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第二季度",PlanTableId:"80cba183-5820-4320-9e99-2e8482bd3134",PlanTableType:2,StartDate:"2015年4月1日",EndDate:"2015年6月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第三季度",PlanTableId:"a0cd09ca-dece-4e3c-bed5-d07765d90741",PlanTableType:2,StartDate:"2015年7月1日",EndDate:"2015年9月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第四季度",PlanTableId:"aa4523d5-06c9-4cad-b005-99da2b72df31",PlanTableType:2,StartDate:"2015年10月1日",EndDate:"2015年12月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:2,TagName:"1月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"1102b8b5-829e-45c7-bffa-0031b5378a51",PlanTableType:3,StartDate:"2015年1月1日",EndDate:"2015年1月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"f14a96c2-ee91-4467-adc2-941934d73898",PlanTableType:4,StartDate:"2014年12月29日",EndDate:"2015年1月4日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"e3f3b2b4-d4de-45b2-9e7e-ee61557f8394",PlanTableType:4,StartDate:"2015年1月5日",EndDate:"2015年1月11日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"540d5ad1-dc23-41e9-b31a-7e56ca15fd7b",PlanTableType:4,StartDate:"2015年1月12日",EndDate:"2015年1月18日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"1a2ed848-7263-4ec1-901c-7973c2302840",PlanTableType:4,StartDate:"2015年1月19日",EndDate:"2015年1月25日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"24edae84-8529-49ea-913d-6cd270c3be38",PlanTableType:4,StartDate:"2015年1月26日",EndDate:"2015年2月1日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:3,TagName:"2月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"f1c24abe-3bdf-4712-85fc-4c0d7e1471a2",PlanTableType:3,StartDate:"2015年2月1日",EndDate:"2015年2月28日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"81959f7e-8cc2-434e-b1fc-ee9abc26672d",PlanTableType:4,StartDate:"2015年2月2日",EndDate:"2015年2月8日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"081e46a0-0ad1-47df-b908-8607eb8ce6b4",PlanTableType:4,StartDate:"2015年2月9日",EndDate:"2015年2月15日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"b1038b37-3768-41a0-8720-70c9f36df872",PlanTableType:4,StartDate:"2015年2月16日",EndDate:"2015年2月22日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"be0f9b40-0bb5-4655-8777-1cc7223a99ac",PlanTableType:4,StartDate:"2015年2月23日",EndDate:"2015年3月1日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:4,TagName:"3月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"ff93f2be-b743-4c61-b487-382d947e0920",PlanTableType:3,StartDate:"2015年3月1日",EndDate:"2015年3月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"01bed1ac-3f0f-4a61-8dec-f6dfab48a80f",PlanTableType:4,StartDate:"2015年3月2日",EndDate:"2015年3月8日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"c26b4bfe-af8a-4acd-9e24-02c9e8f42a35",PlanTableType:4,StartDate:"2015年3月9日",EndDate:"2015年3月15日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"b48d6271-f505-48f6-8a37-da4bcde44fe6",PlanTableType:4,StartDate:"2015年3月16日",EndDate:"2015年3月22日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"238b4b36-4a84-4885-8074-05f2806918f9",PlanTableType:4,StartDate:"2015年3月23日",EndDate:"2015年3月29日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"48db2df9-1b05-42ce-8804-53d6a81d18f3",PlanTableType:4,StartDate:"2015年3月30日",EndDate:"2015年4月5日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:5,TagName:"4月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"60dba6b0-fcc1-45c2-9bc5-24c2925598fc",PlanTableType:3,StartDate:"2015年4月1日",EndDate:"2015年4月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"483ada5c-f8a0-4aea-bcce-70951542a559",PlanTableType:4,StartDate:"2015年4月6日",EndDate:"2015年4月12日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"bfee51ab-a5fa-45de-aabc-88bde2bfc74e",PlanTableType:4,StartDate:"2015年4月13日",EndDate:"2015年4月19日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"9c3aacf9-decf-431b-88a4-92a101915dce",PlanTableType:4,StartDate:"2015年4月20日",EndDate:"2015年4月26日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"fdc5166e-a472-49a6-8a56-3f302ae7908b",PlanTableType:4,StartDate:"2015年4月27日",EndDate:"2015年5月3日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:6,TagName:"5月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"1abbf894-fdf9-4bb3-9c96-928788ca3381",PlanTableType:3,StartDate:"2015年5月1日",EndDate:"2015年5月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"832b0649-7f55-44a3-a4c6-27d0ee316cad",PlanTableType:4,StartDate:"2015年5月4日",EndDate:"2015年5月10日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"6faf901e-60b7-49b9-9f89-c50a116b7b76",PlanTableType:4,StartDate:"2015年5月11日",EndDate:"2015年5月17日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"69ae81c9-4439-4a93-9915-e3e07dfb6235",PlanTableType:4,StartDate:"2015年5月18日",EndDate:"2015年5月24日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"36d5e72f-8ed4-48b3-86ef-7ed4206dceb8",PlanTableType:4,StartDate:"2015年5月25日",EndDate:"2015年5月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:7,TagName:"6月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"c9738f5b-a8d2-4fcd-b441-b1aed7296606",PlanTableType:3,StartDate:"2015年6月1日",EndDate:"2015年6月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"4d511538-96e6-4038-b938-d2956d9a28bc",PlanTableType:4,StartDate:"2015年6月1日",EndDate:"2015年6月7日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"fb46008f-ab3a-4302-bc0b-b71850c2d83f",PlanTableType:4,StartDate:"2015年6月8日",EndDate:"2015年6月14日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"d078650a-0110-432a-8f3c-156bf079864b",PlanTableType:4,StartDate:"2015年6月15日",EndDate:"2015年6月21日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"01ff60f3-5fce-4be6-8639-f2fa3dcbf0f3",PlanTableType:4,StartDate:"2015年6月22日",EndDate:"2015年6月28日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"8d9b7f1e-7873-4ea1-b374-c79061a4a021",PlanTableType:4,StartDate:"2015年6月29日",EndDate:"2015年7月5日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:8,TagName:"7月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"b387a2c6-c13d-40b4-860f-c544c36567bb",PlanTableType:3,StartDate:"2015年7月1日",EndDate:"2015年7月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"38bd3490-85b0-4b82-be37-021df8154ccd",PlanTableType:4,StartDate:"2015年7月6日",EndDate:"2015年7月12日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"840f43d8-ae8e-4930-8595-ca039ad4d04d",PlanTableType:4,StartDate:"2015年7月13日",EndDate:"2015年7月19日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"e92c767b-1866-4f90-87f2-207189dc6fa8",PlanTableType:4,StartDate:"2015年7月20日",EndDate:"2015年7月26日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"5e881c23-9f04-4039-a490-e4eb581d2a03",PlanTableType:4,StartDate:"2015年7月27日",EndDate:"2015年8月2日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:9,TagName:"8月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"3225f8a6-e8f6-4307-b081-73d462e59061",PlanTableType:3,StartDate:"2015年8月1日",EndDate:"2015年8月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"73e0a9e5-b6eb-49bb-bc4b-225d553b1352",PlanTableType:4,StartDate:"2015年8月3日",EndDate:"2015年8月9日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"f9ac05a1-b27d-40c4-b680-b4777eb74346",PlanTableType:4,StartDate:"2015年8月10日",EndDate:"2015年8月16日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"4136a828-7cba-4325-b919-444698cd37a7",PlanTableType:4,StartDate:"2015年8月17日",EndDate:"2015年8月23日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"695e7e6d-ca39-4538-affb-fe1759a4aae9",PlanTableType:4,StartDate:"2015年8月24日",EndDate:"2015年8月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"97484800-f34f-4a74-8706-e71651d88519",PlanTableType:4,StartDate:"2015年8月31日",EndDate:"2015年9月6日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:10,TagName:"9月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"d1c8bd23-1a53-4492-84bc-d758059d9093",PlanTableType:3,StartDate:"2015年9月1日",EndDate:"2015年9月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"76f9e904-736e-481d-ae43-19b5bd6b39a0",PlanTableType:4,StartDate:"2015年9月7日",EndDate:"2015年9月13日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"a205fc73-c135-4249-bd4f-d73cf412ee32",PlanTableType:4,StartDate:"2015年9月14日",EndDate:"2015年9月20日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"d9e63f2e-798f-41a2-b691-1996ebb71020",PlanTableType:4,StartDate:"2015年9月21日",EndDate:"2015年9月27日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"6fe12d51-5d81-458b-90ec-c8958b4c5ce9",PlanTableType:4,StartDate:"2015年9月28日",EndDate:"2015年10月4日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:11,TagName:"10月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"31138df8-d97a-4762-bb6a-8a7fc4717a09",PlanTableType:3,StartDate:"2015年10月1日",EndDate:"2015年10月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"49dc4a03-94f8-4864-abad-6d9dcf044c12",PlanTableType:4,StartDate:"2015年10月5日",EndDate:"2015年10月11日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"c1db89ec-37f5-44c5-966a-3654ca3c1bf1",PlanTableType:4,StartDate:"2015年10月12日",EndDate:"2015年10月18日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"21e646ec-9735-489c-a9ff-ebb7594b2b82",PlanTableType:4,StartDate:"2015年10月19日",EndDate:"2015年10月25日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"3485a5f8-261b-462e-9563-1d71a9c42da2",PlanTableType:4,StartDate:"2015年10月26日",EndDate:"2015年11月1日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:12,TagName:"11月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"0fb340b9-faea-47e5-a469-d9d52f2243b5",PlanTableType:3,StartDate:"2015年11月1日",EndDate:"2015年11月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"9f428eac-9aab-4379-a490-33d0c29944b2",PlanTableType:4,StartDate:"2015年11月2日",EndDate:"2015年11月8日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"3a02105f-37b2-4a06-9776-8ed3e5b87e5d",PlanTableType:4,StartDate:"2015年11月9日",EndDate:"2015年11月15日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"0b501a07-bfe3-4163-9edb-b03f35e1714d",PlanTableType:4,StartDate:"2015年11月16日",EndDate:"2015年11月22日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"be1f800d-1e81-4983-8211-925840e43aa2",PlanTableType:4,StartDate:"2015年11月23日",EndDate:"2015年11月29日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"01b11391-83d9-4e43-9dba-a57297cb03e8",PlanTableType:4,StartDate:"2015年11月30日",EndDate:"2015年12月6日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:13,TagName:"12月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"1d812501-172e-4e69-b5f7-efb6b1cc3f31",PlanTableType:3,StartDate:"2015年12月1日",EndDate:"2015年12月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"40c13867-75ca-47c5-8a8b-9b9ef449afdf",PlanTableType:4,StartDate:"2015年12月7日",EndDate:"2015年12月13日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"138b440e-9788-4c69-9f17-f588c77213de",PlanTableType:4,StartDate:"2015年12月14日",EndDate:"2015年12月20日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"2484da3e-4355-4e68-88c8-aacb4e520c7d",PlanTableType:4,StartDate:"2015年12月21日",EndDate:"2015年12月27日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]}]},{GroupId:4,GroupName:"2016",Active:!1,PlanTableListModels:[{TagId:14,TagName:"待定",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"待定计划",PlanTableId:"09DBFFCC-0F6C-4FB1-9B7A-D07E1046C656",PlanTableType:5,StartDate:"2013年1月1日",EndDate:"2017年1月1日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:1,TagName:"年/季",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"年度",PlanTableId:"9b2ab6b8-093a-4a14-8e1a-4eff1043a2f8",PlanTableType:1,StartDate:"2016年1月1日",EndDate:"2016年12月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第一季度",PlanTableId:"4ced57d1-3bd6-41af-9bef-cdc9407e63a1",PlanTableType:2,StartDate:"2016年1月1日",EndDate:"2016年3月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第二季度",PlanTableId:"658bb38f-377f-4402-8565-bc3854e22211",PlanTableType:2,StartDate:"2016年4月1日",EndDate:"2016年6月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第三季度",PlanTableId:"87706236-11c4-4832-bec5-d4f6b2628e61",PlanTableType:2,StartDate:"2016年7月1日",EndDate:"2016年9月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第四季度",PlanTableId:"0c1be52e-b4b5-4404-9df3-4bdadcb5078c",PlanTableType:2,StartDate:"2016年10月1日",EndDate:"2016年12月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:2,TagName:"1月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"3499e8e5-2b4d-45fc-8fdb-a8a3842eb86a",PlanTableType:3,StartDate:"2016年1月1日",EndDate:"2016年1月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"4e07a2e0-fd39-43df-a5a2-5948018c544a",PlanTableType:4,StartDate:"2015年12月28日",EndDate:"2016年1月3日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"93c6732e-088f-425f-b660-d07aed2e430b",PlanTableType:4,StartDate:"2016年1月4日",EndDate:"2016年1月10日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"d68d031f-2426-4705-b1b7-1b2fc027e6e5",PlanTableType:4,StartDate:"2016年1月11日",EndDate:"2016年1月17日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"ef906331-aaf5-4cb6-8d0c-cf88d03c7713",PlanTableType:4,StartDate:"2016年1月18日",EndDate:"2016年1月24日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"43504b7d-0ef3-4dc3-84bd-aac6f7edf14f",PlanTableType:4,StartDate:"2016年1月25日",EndDate:"2016年1月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:3,TagName:"2月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"35fb03cb-becb-4c1c-bb48-58a6446c2cc2",PlanTableType:3,StartDate:"2016年2月1日",EndDate:"2016年2月29日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"45c6fb00-ac0d-4864-9f3d-bd6de2b246fa",PlanTableType:4,StartDate:"2016年2月1日",EndDate:"2016年2月7日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"c3e2c2fd-9e93-423c-8743-fc3a9d5e5b24",PlanTableType:4,StartDate:"2016年2月8日",EndDate:"2016年2月14日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"7353c5da-f5f4-4b0d-8129-6d8a7b7c30da",PlanTableType:4,StartDate:"2016年2月15日",EndDate:"2016年2月21日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"88f82d7c-e7bb-4862-8036-5ff75317891b",PlanTableType:4,StartDate:"2016年2月22日",EndDate:"2016年2月28日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"feba06de-7787-45e8-8cb4-e3d110f684f1",PlanTableType:4,StartDate:"2016年2月29日",EndDate:"2016年3月6日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:4,TagName:"3月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"bb603379-2156-4107-88a9-33891165afb4",PlanTableType:3,StartDate:"2016年3月1日",EndDate:"2016年3月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"f4a9ab81-b71b-451f-a890-cf15b2824fea",PlanTableType:4,StartDate:"2016年3月7日",EndDate:"2016年3月13日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"6f077ce2-2bd0-4995-9873-f4d9774a4857",PlanTableType:4,StartDate:"2016年3月14日",EndDate:"2016年3月20日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"28477db7-b4b4-48a2-b1fc-5114893209f5",PlanTableType:4,StartDate:"2016年3月21日",EndDate:"2016年3月27日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"6ca58d26-47f7-45c3-bdef-ca82235aa28a",PlanTableType:4,StartDate:"2016年3月28日",EndDate:"2016年4月3日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:5,TagName:"4月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"7550abec-8d69-449e-97aa-3d46dba01121",PlanTableType:3,StartDate:"2016年4月1日",EndDate:"2016年4月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"22911fee-666a-4034-baa9-a93a328b9e5e",PlanTableType:4,StartDate:"2016年4月4日",EndDate:"2016年4月10日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"573a9c9d-75e3-4a5d-87fe-c70bb6766fb8",PlanTableType:4,StartDate:"2016年4月11日",EndDate:"2016年4月17日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"db075684-abf5-4714-88fe-70a987d70f36",PlanTableType:4,StartDate:"2016年4月18日",EndDate:"2016年4月24日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"e602fd33-bca2-470a-987a-48b24441738a",PlanTableType:4,StartDate:"2016年4月25日",EndDate:"2016年5月1日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:6,TagName:"5月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"190d94f2-68de-4e5b-86fa-c488425859f8",PlanTableType:3,StartDate:"2016年5月1日",EndDate:"2016年5月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"0978f2a7-5d3d-4000-a931-0b7cbf5a1c3f",PlanTableType:4,StartDate:"2016年5月2日",EndDate:"2016年5月8日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"46557331-22ff-4bdf-90b3-2bb1ae23581e",PlanTableType:4,StartDate:"2016年5月9日",EndDate:"2016年5月15日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"8e1f571d-ee96-4a66-af19-9c4ae6f83a0c",PlanTableType:4,StartDate:"2016年5月16日",EndDate:"2016年5月22日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"2e3ce08e-86db-4ed0-b353-1adbeb3a5d2e",PlanTableType:4,StartDate:"2016年5月23日",EndDate:"2016年5月29日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"20f4581d-91a3-4964-8d99-cc91fa523e8c",PlanTableType:4,StartDate:"2016年5月30日",EndDate:"2016年6月5日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:7,TagName:"6月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"8c60f472-5cf3-4107-be03-61a9f5a7bc7a",PlanTableType:3,StartDate:"2016年6月1日",EndDate:"2016年6月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"cf3647d8-77e1-4ddd-b2f8-cdfa5fc8ee3d",PlanTableType:4,StartDate:"2016年6月6日",EndDate:"2016年6月12日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"7f770a92-04c8-4542-9576-369b6eae871e",PlanTableType:4,StartDate:"2016年6月13日",EndDate:"2016年6月19日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"36384d49-0eab-41e1-8b03-6222e97b124c",PlanTableType:4,StartDate:"2016年6月20日",EndDate:"2016年6月26日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"7ea66ee5-5b8b-434c-b654-e60b9070b95b",PlanTableType:4,StartDate:"2016年6月27日",EndDate:"2016年7月3日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:8,TagName:"7月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"e5eebe9e-3c7e-43b1-a8db-85e49b14920d",PlanTableType:3,StartDate:"2016年7月1日",EndDate:"2016年7月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"0a109e0c-d80b-4a7d-8f8e-a2f5bac4efc6",PlanTableType:4,StartDate:"2016年7月4日",EndDate:"2016年7月10日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"a2445b94-e68d-4853-9fa0-f4fbeb1fe463",PlanTableType:4,StartDate:"2016年7月11日",EndDate:"2016年7月17日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"c745a472-3565-4aea-a0cd-1313452c7e5b",PlanTableType:4,StartDate:"2016年7月18日",EndDate:"2016年7月24日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"0b054468-fe91-4315-b504-efe00dd8d8c1",PlanTableType:4,StartDate:"2016年7月25日",EndDate:"2016年7月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:9,TagName:"8月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"f708d437-c348-4308-8462-4a5af5c1180e",PlanTableType:3,StartDate:"2016年8月1日",EndDate:"2016年8月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"6882c295-fd7b-4442-aa36-00c526ea5155",PlanTableType:4,StartDate:"2016年8月1日",EndDate:"2016年8月7日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"25a4b0a6-9bc5-4a46-bd4d-e68d559eb66c",PlanTableType:4,StartDate:"2016年8月8日",EndDate:"2016年8月14日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"3c0bc3f1-e32d-4066-9107-a1f41b1c1be6",PlanTableType:4,StartDate:"2016年8月15日",EndDate:"2016年8月21日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"22f67300-b866-43a4-87c1-b7ecf8d5e9bf",PlanTableType:4,StartDate:"2016年8月22日",EndDate:"2016年8月28日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"a44435a6-a35f-475c-890d-ae5794809a65",PlanTableType:4,StartDate:"2016年8月29日",EndDate:"2016年9月4日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:10,TagName:"9月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"8cf51b5e-172b-4b1a-b992-6772e026668f",PlanTableType:3,StartDate:"2016年9月1日",EndDate:"2016年9月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"d1abf005-c894-496f-afdd-a5b221b8d715",PlanTableType:4,StartDate:"2016年9月5日",EndDate:"2016年9月11日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"b544d1f0-dd80-4508-934c-cdb5a9d708c2",PlanTableType:4,StartDate:"2016年9月12日",EndDate:"2016年9月18日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"a3d82396-14e0-4d72-8d31-46afb12c84ea",PlanTableType:4,StartDate:"2016年9月19日",EndDate:"2016年9月25日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"3d7453e7-efdd-4d86-a5c9-e20b85bb4f49",PlanTableType:4,StartDate:"2016年9月26日",EndDate:"2016年10月2日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:11,TagName:"10月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"06321390-8b34-4482-8358-50db327795f0",PlanTableType:3,StartDate:"2016年10月1日",EndDate:"2016年10月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"491896c7-82f8-4c1a-a2d1-251bb7b26784",PlanTableType:4,StartDate:"2016年10月3日",EndDate:"2016年10月9日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"baf70bf1-3537-4371-a72e-74f3f66c28d0",PlanTableType:4,StartDate:"2016年10月10日",EndDate:"2016年10月16日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"f2705b4d-370b-4ab5-87cb-78a6b2fd825d",PlanTableType:4,StartDate:"2016年10月17日",EndDate:"2016年10月23日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"f692bbc0-8b49-4561-ab8e-2309f076370b",PlanTableType:4,StartDate:"2016年10月24日",EndDate:"2016年10月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"0d9e9ac4-4ffc-41be-9dde-730fee29317c",PlanTableType:4,StartDate:"2016年10月31日",EndDate:"2016年11月6日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:12,TagName:"11月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"7b3ec511-1636-4bf1-b3fa-8a4b6a538c50",PlanTableType:3,StartDate:"2016年11月1日",EndDate:"2016年11月30日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"8dad95ae-3574-43e7-b6be-4700a020b70a",PlanTableType:4,StartDate:"2016年11月7日",EndDate:"2016年11月13日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"b8fff8c1-3ae6-47be-82b0-2c33c53504d9",PlanTableType:4,StartDate:"2016年11月14日",EndDate:"2016年11月20日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"4edb4bd0-6c01-460f-8a97-a0f97d970384",PlanTableType:4,StartDate:"2016年11月21日",EndDate:"2016年11月27日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"9e43b31a-ca96-4dce-8e8f-9de918547944",PlanTableType:4,StartDate:"2016年11月28日",EndDate:"2016年12月4日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:13,TagName:"12月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"fd277bfb-c5ce-4aa7-9ecb-c1db8a1d9930",PlanTableType:3,StartDate:"2016年12月1日",EndDate:"2016年12月31日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"a02e54b9-aa89-441b-b835-f44741488538",PlanTableType:4,StartDate:"2016年12月5日",EndDate:"2016年12月11日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"9ed10e35-b3d6-4cf9-9170-b188edb6e298",PlanTableType:4,StartDate:"2016年12月12日",EndDate:"2016年12月18日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"82ce4bd5-3c8e-4215-a431-97e9a3d077f0",PlanTableType:4,StartDate:"2016年12月19日",EndDate:"2016年12月25日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"6804c70f-f342-436b-b4cd-e93dcb03b851",PlanTableType:4,StartDate:"2016年12月26日",EndDate:"2017年1月1日",Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]}]},{GroupId:5,GroupName:"2017",Active:!1,PlanTableListModels:[{TagId:14,TagName:"待定",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"待定计划",PlanTableId:"09DBFFCC-0F6C-4FB1-9B7A-D07E1046C656",PlanTableType:5,StartDate:"2013年1月1日",EndDate:"2021年1月3日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:1,TagName:"年/季",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"年度",PlanTableId:"c919ef6f-fa7b-4902-b7cb-9bd2ff0ad456",PlanTableType:1,StartDate:"2017年1月1日",EndDate:"2017年12月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第一季度",PlanTableId:"7356d186-fc75-4c36-b9af-6c21c8334f0e",PlanTableType:2,StartDate:"2017年1月1日",EndDate:"2017年3月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第二季度",PlanTableId:"6d0f1fa9-4ba4-47b6-bb31-d5ae63befdd3",PlanTableType:2,StartDate:"2017年4月1日",EndDate:"2017年6月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第三季度",PlanTableId:"db586786-9dab-422e-8c99-0e2ce6ee1b42",PlanTableType:2,StartDate:"2017年7月1日",EndDate:"2017年9月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第四季度",PlanTableId:"0b683c99-cd05-4001-b239-f8ebd2d7795a",PlanTableType:2,StartDate:"2017年10月1日",EndDate:"2017年12月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:2,TagName:"1月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"2da3dbb6-cdf3-4cdc-844a-5f9280d1fadb",PlanTableType:3,StartDate:"2017年1月1日",EndDate:"2017年1月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"cc9bd41b-b562-4aa8-b2fa-d4f68954d43b",PlanTableType:4,StartDate:"2017年1月2日",EndDate:"2017年1月8日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"1c9da6ee-1c4e-4d70-a447-9af0b80329f0",PlanTableType:4,StartDate:"2017年1月9日",EndDate:"2017年1月15日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"1dcd593e-b85a-44d7-b4b0-b2274a5cc855",PlanTableType:4,StartDate:"2017年1月16日",EndDate:"2017年1月22日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"34eafe66-cabf-4225-b532-1e58a31f5bd2",PlanTableType:4,StartDate:"2017年1月23日",EndDate:"2017年1月29日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:3,TagName:"2月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"1e9e2ac7-1fde-4a5d-809a-5be2ddf6424d",PlanTableType:3,StartDate:"2017年2月1日",EndDate:"2017年2月28日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"cf7634d6-bdef-496a-9889-39228810a9c0",PlanTableType:4,StartDate:"2017年1月30日",EndDate:"2017年2月5日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"7ed484e6-4f0b-4a40-9175-d4bc9ce7a071",PlanTableType:4,StartDate:"2017年2月6日",EndDate:"2017年2月12日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"99b11eb2-3874-451f-bd2f-bd81c5e23291",PlanTableType:4,StartDate:"2017年2月13日",EndDate:"2017年2月19日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"13acceaa-6845-44d4-ab92-4cd9d4a79688",PlanTableType:4,StartDate:"2017年2月20日",EndDate:"2017年2月26日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:4,TagName:"3月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"629dc485-8841-4fb2-957d-689de6afa232",PlanTableType:3,StartDate:"2017年3月1日",EndDate:"2017年3月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"c8213e12-4d2e-44d1-a312-d73d362fc84e",PlanTableType:4,StartDate:"2017年2月27日",EndDate:"2017年3月5日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"f605790d-9783-4785-bd9e-02481e6cb41d",PlanTableType:4,StartDate:"2017年3月6日",EndDate:"2017年3月12日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"5d1d3f18-3cd5-404d-b395-8a624d8aad3b",PlanTableType:4,StartDate:"2017年3月13日",EndDate:"2017年3月19日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"23abb523-d823-47de-8f9d-925723ef6c65",PlanTableType:4,StartDate:"2017年3月20日",EndDate:"2017年3月26日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"c97ccbc1-4af8-45ee-bf6c-b6541fb736d8",PlanTableType:4,StartDate:"2017年3月27日",EndDate:"2017年4月2日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:5,TagName:"4月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"6ae66818-07d0-40a2-a1be-9adbb23e4a64",PlanTableType:3,StartDate:"2017年4月1日",EndDate:"2017年4月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"0165218d-f70a-48b4-a0f2-200004e9c5d6",PlanTableType:4,StartDate:"2017年4月3日",EndDate:"2017年4月9日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"09a3f481-daea-487b-88f1-cf9091449cac",PlanTableType:4,StartDate:"2017年4月10日",EndDate:"2017年4月16日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"cb1d8a52-549b-4d62-82db-800d3ce4205a",PlanTableType:4,StartDate:"2017年4月17日",EndDate:"2017年4月23日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"b6daab90-1caa-4b2c-8d6f-4e4d3ae7b16d",PlanTableType:4,StartDate:"2017年4月24日",EndDate:"2017年4月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:6,TagName:"5月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"b7616414-3384-4a0a-81b4-77448878d314",PlanTableType:3,StartDate:"2017年5月1日",EndDate:"2017年5月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"8d578f06-f7c6-4cbd-a019-ecf380db026f",PlanTableType:4,StartDate:"2017年5月1日",EndDate:"2017年5月7日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"795bc646-d3d7-4f7d-b028-7aff8a614244",PlanTableType:4,StartDate:"2017年5月8日",EndDate:"2017年5月14日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"8b3c076b-3025-40db-aa4a-ed00e1572d4f",PlanTableType:4,StartDate:"2017年5月15日",EndDate:"2017年5月21日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"6d4f6d58-6512-430e-84b2-1869021e10aa",PlanTableType:4,StartDate:"2017年5月22日",EndDate:"2017年5月28日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"999ff076-a7dc-42cf-a26c-f0dfb66532c8",PlanTableType:4,StartDate:"2017年5月29日",EndDate:"2017年6月4日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:7,TagName:"6月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"2098d037-2eb5-4eef-8ef0-752971e3353f",PlanTableType:3,StartDate:"2017年6月1日",EndDate:"2017年6月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"d0619ad8-4a8d-440c-8674-57e718a26357",PlanTableType:4,StartDate:"2017年6月5日",EndDate:"2017年6月11日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"de34a2a4-680a-4461-87b2-c0d2baf3a265",PlanTableType:4,StartDate:"2017年6月12日",EndDate:"2017年6月18日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"9250d5ce-bdf9-4304-8a65-c88d8a60ba54",PlanTableType:4,StartDate:"2017年6月19日",EndDate:"2017年6月25日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"31147102-e55a-4de5-a0f4-b0fad5451984",PlanTableType:4,StartDate:"2017年6月26日",EndDate:"2017年7月2日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:8,TagName:"7月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"00b97b62-f53c-4182-a863-8a898e38e9de",PlanTableType:3,StartDate:"2017年7月1日",EndDate:"2017年7月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"7fac8467-be32-4f76-a537-ac3d54d91793",PlanTableType:4,StartDate:"2017年7月3日",EndDate:"2017年7月9日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"e352c319-096b-4394-b2c6-065db0b2ff95",PlanTableType:4,StartDate:"2017年7月10日",EndDate:"2017年7月16日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"e9e5845f-7a51-4862-89b4-5890ae283f64",PlanTableType:4,StartDate:"2017年7月17日",EndDate:"2017年7月23日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"ba953d4e-86e8-4eb5-908a-aed5d15d3b75",PlanTableType:4,StartDate:"2017年7月24日",EndDate:"2017年7月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:9,TagName:"8月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"275679ac-f39b-4506-89f4-da39a56b9a86",PlanTableType:3,StartDate:"2017年8月1日",EndDate:"2017年8月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"b061e677-741f-4c4e-bd81-11b5f2c827c6",PlanTableType:4,StartDate:"2017年7月31日",EndDate:"2017年8月6日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"79c62be7-ef34-402b-aa88-2cd20eef74c7",PlanTableType:4,StartDate:"2017年8月7日",EndDate:"2017年8月13日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"71bbc8a5-4df8-47f5-9e45-5973811fe75b",PlanTableType:4,StartDate:"2017年8月14日",EndDate:"2017年8月20日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"fe0dde16-77ad-48d4-b6ed-54916016ce19",PlanTableType:4,StartDate:"2017年8月21日",EndDate:"2017年8月27日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"f534682b-74bf-4e30-9f3b-567ab0ca0315",PlanTableType:4,StartDate:"2017年8月28日",EndDate:"2017年9月3日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:10,TagName:"9月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"8e32f3a5-1374-4327-84ee-4ed2e2ba7a67",PlanTableType:3,StartDate:"2017年9月1日",EndDate:"2017年9月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"d5ca162c-3e3d-4a24-a133-5e038679ff27",PlanTableType:4,StartDate:"2017年9月4日",EndDate:"2017年9月10日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"009410b6-f27b-490e-9e9d-0f6b28a1bbd7",PlanTableType:4,StartDate:"2017年9月11日",EndDate:"2017年9月17日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"0cc78d6a-db59-4839-80c1-01b9ef66627b",PlanTableType:4,StartDate:"2017年9月18日",EndDate:"2017年9月24日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"52c89591-d2d7-4e8b-b840-a3b9dcb56402",PlanTableType:4,StartDate:"2017年9月25日",EndDate:"2017年10月1日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:11,TagName:"10月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"2c294c12-dba7-49b9-b26d-a36b0dc0c735",PlanTableType:3,StartDate:"2017年10月1日",EndDate:"2017年10月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"52b41f66-6e0a-4d4d-ac51-f0d2a19b9cfc",PlanTableType:4,StartDate:"2017年10月2日",EndDate:"2017年10月8日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"d34220df-4b67-4e70-af7d-bbbb27914c4d",PlanTableType:4,StartDate:"2017年10月9日",EndDate:"2017年10月15日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"4a54ddd3-676b-4d03-8766-b60016781b5a",PlanTableType:4,StartDate:"2017年10月16日",EndDate:"2017年10月22日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"fb06d8e2-f8c2-4a56-889d-066d6ba2444d",PlanTableType:4,StartDate:"2017年10月23日",EndDate:"2017年10月29日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:12,TagName:"11月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"5c4ecdd5-a6b1-43dd-a5f1-6f483ba4ac67",PlanTableType:3,StartDate:"2017年11月1日",EndDate:"2017年11月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"712ef4cd-904f-488a-8c59-90e896288304",PlanTableType:4,StartDate:"2017年10月30日",EndDate:"2017年11月5日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"c8506798-2bec-4478-800f-8fce9b50cdc4",PlanTableType:4,StartDate:"2017年11月6日",EndDate:"2017年11月12日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"abea2a95-897b-49c8-b1d3-cf1b1a831445",PlanTableType:4,StartDate:"2017年11月13日",EndDate:"2017年11月19日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"ee83b161-ea63-4923-bda3-a362b07806e8",PlanTableType:4,StartDate:"2017年11月20日",EndDate:"2017年11月26日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"850b71ba-c75a-4804-b5fe-9b2995986348",PlanTableType:4,StartDate:"2017年11月27日",EndDate:"2017年12月3日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:13,TagName:"12月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"5ce217e1-a988-4d72-a3d7-bbf2ae65efe9",PlanTableType:3,StartDate:"2017年12月1日",EndDate:"2017年12月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"823f4555-2222-4972-9a62-d777df03586b",PlanTableType:4,StartDate:"2017年12月4日",EndDate:"2017年12月10日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"2c7049ba-984a-4c4d-a1c8-a6883f1c3cdb",PlanTableType:4,StartDate:"2017年12月11日",EndDate:"2017年12月17日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"a5c44fab-c1d1-4b1c-ad38-35c8e9f8cc14",PlanTableType:4,StartDate:"2017年12月18日",EndDate:"2017年12月24日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"86fd840e-9b71-49be-9c07-f99845ea7217",PlanTableType:4,StartDate:"2017年12月25日",EndDate:"2017年12月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]}]},{GroupId:6,GroupName:"2018",Active:!1,PlanTableListModels:[{TagId:14,TagName:"待定",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"待定计划",PlanTableId:"09DBFFCC-0F6C-4FB1-9B7A-D07E1046C656",PlanTableType:5,StartDate:"2013年1月1日",EndDate:"2021年1月3日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:1,TagName:"年/季",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"年度",PlanTableId:"1ec930c7-dca3-4faa-9bc4-9f9ffa72cf09",PlanTableType:1,StartDate:"2018年1月1日",EndDate:"2018年12月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第一季度",PlanTableId:"7f3fad58-a16c-45fa-a330-8548eb037baf",PlanTableType:2,StartDate:"2018年1月1日",EndDate:"2018年3月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第二季度",PlanTableId:"adc5a1ef-1a3c-48f2-9c31-78b8019e5514",PlanTableType:2,StartDate:"2018年4月1日",EndDate:"2018年6月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第三季度",PlanTableId:"8494d83a-9d01-4cc9-9281-275feb5d9d19",PlanTableType:2,StartDate:"2018年7月1日",EndDate:"2018年9月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第四季度",PlanTableId:"b14e57f4-766b-4575-8082-2b51cfe30239",PlanTableType:2,StartDate:"2018年10月1日",EndDate:"2018年12月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:2,TagName:"1月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"46bba2ac-9bfb-4849-a201-c65b71243778",PlanTableType:3,StartDate:"2018年1月1日",EndDate:"2018年1月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"39d0ee62-9329-4771-9da2-4625bb4e5d68",PlanTableType:4,StartDate:"2018年1月1日",EndDate:"2018年1月7日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"53dce6b3-9a5a-47a2-a481-4c173b7434e7",PlanTableType:4,StartDate:"2018年1月8日",EndDate:"2018年1月14日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"7f7985ab-c0cd-4e80-875c-e0beae790afc",PlanTableType:4,StartDate:"2018年1月15日",EndDate:"2018年1月21日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"34797d3c-e69a-4ace-859e-99efb257bed4",PlanTableType:4,StartDate:"2018年1月22日",EndDate:"2018年1月28日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"acbd9d54-8f7b-4eab-b240-e27ee85ed37a",PlanTableType:4,StartDate:"2018年1月29日",EndDate:"2018年2月4日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:3,TagName:"2月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"caec609f-705a-4d4b-ad39-00b653997d41",PlanTableType:3,StartDate:"2018年2月1日",EndDate:"2018年2月28日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"2fdc7902-2535-461e-b760-48a41d147fb5",PlanTableType:4,StartDate:"2018年2月5日",EndDate:"2018年2月11日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"7b30804a-8a40-4cad-8db9-90dce176213c",PlanTableType:4,StartDate:"2018年2月12日",EndDate:"2018年2月18日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"25a81a07-81b5-44aa-a645-f96cc7a84121",PlanTableType:4,StartDate:"2018年2月19日",EndDate:"2018年2月25日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"12db8115-e855-4eb5-941c-bef8eba8a7b1",PlanTableType:4,StartDate:"2018年2月26日",EndDate:"2018年3月4日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:4,TagName:"3月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"e6551c00-d6a3-4a50-9fb8-68cf385602ac",PlanTableType:3,StartDate:"2018年3月1日",EndDate:"2018年3月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"0796e0d5-963a-4076-b363-dcc895851c18",PlanTableType:4,StartDate:"2018年3月5日",EndDate:"2018年3月11日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"cbe3a58c-9360-4b58-89da-183d2f8da71c",PlanTableType:4,StartDate:"2018年3月12日",EndDate:"2018年3月18日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"23b1ab69-b6cd-4ae8-b4e3-84c63a58bf71",PlanTableType:4,StartDate:"2018年3月19日",EndDate:"2018年3月25日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"df9c9d76-fbc5-4922-8dce-9a5c196e2e42",PlanTableType:4,StartDate:"2018年3月26日",EndDate:"2018年4月1日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:5,TagName:"4月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"763683fb-ca30-4ec2-b4a8-d4bdeb029303",PlanTableType:3,StartDate:"2018年4月1日",EndDate:"2018年4月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"d135ff4d-e56d-4c56-9d69-81dd95392ccf",PlanTableType:4,StartDate:"2018年4月2日",EndDate:"2018年4月8日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"423d127d-bd05-443b-b1bd-5a8a88ecd931",PlanTableType:4,StartDate:"2018年4月9日",EndDate:"2018年4月15日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"738cc9c3-241d-46bc-8546-c38998ebb38f",PlanTableType:4,StartDate:"2018年4月16日",EndDate:"2018年4月22日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"72650ecd-dccd-46dc-8336-83911c6a9c1d",PlanTableType:4,StartDate:"2018年4月23日",EndDate:"2018年4月29日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:6,TagName:"5月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"c92d83c4-67e7-4970-bc20-7c5c88c661c2",PlanTableType:3,StartDate:"2018年5月1日",EndDate:"2018年5月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"75ae22b2-522d-484d-aa5a-29cb606f4945",PlanTableType:4,StartDate:"2018年4月30日",EndDate:"2018年5月6日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"577d2e77-35ee-4292-92b2-7ffbec04eacf",PlanTableType:4,StartDate:"2018年5月7日",EndDate:"2018年5月13日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"bf010875-ef32-412c-b25b-6a5608ff3025",PlanTableType:4,StartDate:"2018年5月14日",EndDate:"2018年5月20日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"c7ee2968-a4f6-4adf-9259-e62a6146ac10",PlanTableType:4,StartDate:"2018年5月21日",EndDate:"2018年5月27日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"9538566e-7a02-4293-93bc-ca07ad992dfa",PlanTableType:4,StartDate:"2018年5月28日",EndDate:"2018年6月3日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:7,TagName:"6月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"5a7cc222-34a9-4a72-9f1d-351889d085b8",PlanTableType:3,StartDate:"2018年6月1日",EndDate:"2018年6月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"3462aa80-16b5-455b-8130-67f0c196824b",PlanTableType:4,StartDate:"2018年6月4日",EndDate:"2018年6月10日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"7cb5bb13-4efc-403f-bd2a-7f310a0ced0f",PlanTableType:4,StartDate:"2018年6月11日",EndDate:"2018年6月17日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"912cae74-e357-481e-b202-55df5b724928",PlanTableType:4,StartDate:"2018年6月18日",EndDate:"2018年6月24日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"6517def0-e129-4713-9160-6522a077ead6",PlanTableType:4,StartDate:"2018年6月25日",EndDate:"2018年7月1日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:8,TagName:"7月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"ec6c6a9b-fb1f-4b62-bb8f-e5b9d6e1658c",PlanTableType:3,StartDate:"2018年7月1日",EndDate:"2018年7月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"52253eaf-d702-4774-b0df-358de3195df9",PlanTableType:4,StartDate:"2018年7月2日",EndDate:"2018年7月8日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"d5f8a03f-575b-4999-9ea3-8f2006c370bd",PlanTableType:4,StartDate:"2018年7月9日",EndDate:"2018年7月15日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"29993fc6-d2e4-4827-b44a-bd1ce2c5de6f",PlanTableType:4,StartDate:"2018年7月16日",EndDate:"2018年7月22日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"5635c6d7-047c-4f16-8684-f17c35b6fa8f",PlanTableType:4,StartDate:"2018年7月23日",EndDate:"2018年7月29日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:9,TagName:"8月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"ff110907-4a83-45bf-b1f4-d548c12d5792",PlanTableType:3,StartDate:"2018年8月1日",EndDate:"2018年8月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"6a82c87c-ce9d-44a7-87ed-cb560b40e0f0",PlanTableType:4,StartDate:"2018年7月30日",EndDate:"2018年8月5日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"6160c8f4-7f31-4117-8255-82d651df01b0",PlanTableType:4,StartDate:"2018年8月6日",EndDate:"2018年8月12日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"55711b7e-4831-4914-a60d-12cf50afc6e3",PlanTableType:4,StartDate:"2018年8月13日",EndDate:"2018年8月19日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"1b5bcfae-0a57-494e-9c1a-611562c75fbd",PlanTableType:4,StartDate:"2018年8月20日",EndDate:"2018年8月26日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"d6cfb7b9-e4b9-433c-83d5-6bc67cba0b48",PlanTableType:4,StartDate:"2018年8月27日",EndDate:"2018年9月2日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:10,TagName:"9月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"fea42cc5-a941-4274-ab8a-44ae63c4cccf",PlanTableType:3,StartDate:"2018年9月1日",EndDate:"2018年9月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"7448c110-4280-427f-8b25-af456fe1fc44",PlanTableType:4,StartDate:"2018年9月3日",EndDate:"2018年9月9日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"ea372441-541b-4678-bd6c-56ba1feecb6a",PlanTableType:4,StartDate:"2018年9月10日",EndDate:"2018年9月16日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"a6e80e70-ea19-43e9-b2a5-d3e2b8f82730",PlanTableType:4,StartDate:"2018年9月17日",EndDate:"2018年9月23日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"8d81efcd-a578-426c-bc14-23993f2237c5",PlanTableType:4,StartDate:"2018年9月24日",EndDate:"2018年9月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:11,TagName:"10月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"d38d2c40-e42b-45b3-87c7-750f783bb188",PlanTableType:3,StartDate:"2018年10月1日",EndDate:"2018年10月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"6004a6b2-48ee-47aa-8596-4b101055c103",PlanTableType:4,StartDate:"2018年10月1日",EndDate:"2018年10月7日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"dcb29821-4f5c-40a2-a5f3-85cd634d703e",PlanTableType:4,StartDate:"2018年10月8日",EndDate:"2018年10月14日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"884aa22c-c284-42a7-ab11-97512da3fca8",PlanTableType:4,StartDate:"2018年10月15日",EndDate:"2018年10月21日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"c9a0825e-cc05-46e9-9b63-117f621abb7d",PlanTableType:4,StartDate:"2018年10月22日",EndDate:"2018年10月28日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"2ed0e13b-5ae3-48b3-bd99-e9fb009dcf55",PlanTableType:4,StartDate:"2018年10月29日",EndDate:"2018年11月4日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:12,TagName:"11月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"cee7f0f9-c69d-4955-a109-8067bd56fbb6",PlanTableType:3,StartDate:"2018年11月1日",EndDate:"2018年11月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"1a162c63-2437-474f-a0a2-677537c79f4c",PlanTableType:4,StartDate:"2018年11月5日",EndDate:"2018年11月11日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"c9da6415-22d4-4663-b2cf-9c92520f525b",PlanTableType:4,StartDate:"2018年11月12日",EndDate:"2018年11月18日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"ec80d07c-fedf-493d-b4d8-33168bb20e74",PlanTableType:4,StartDate:"2018年11月19日",EndDate:"2018年11月25日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"b65689d3-5ecb-4817-a1f6-cc2801bd514b",PlanTableType:4,StartDate:"2018年11月26日",EndDate:"2018年12月2日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:13,TagName:"12月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"38ac860b-04e5-439b-81f1-8eb01a67ef68",PlanTableType:3,StartDate:"2018年12月1日",EndDate:"2018年12月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"1d5e987d-cec4-49cc-bb24-2b8bc1d8dfd5",PlanTableType:4,StartDate:"2018年12月3日",EndDate:"2018年12月9日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"bb2e0693-b1e3-44ec-90c2-f1811a3ff260",PlanTableType:4,StartDate:"2018年12月10日",EndDate:"2018年12月16日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"d04c7994-4964-427c-b355-7062c785b014",PlanTableType:4,StartDate:"2018年12月17日",EndDate:"2018年12月23日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"7f120040-7acc-41e0-be88-b25098047e88",PlanTableType:4,StartDate:"2018年12月24日",EndDate:"2018年12月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]}]},{GroupId:7,GroupName:"2019",Active:!1,PlanTableListModels:[{TagId:14,TagName:"待定",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"待定计划",PlanTableId:"09DBFFCC-0F6C-4FB1-9B7A-D07E1046C656",PlanTableType:5,StartDate:"2013年1月1日",EndDate:"2021年1月3日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:1,TagName:"年/季",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"年度",PlanTableId:"cac0dd07-ed64-4f92-91d1-8dd6d9db9db2",PlanTableType:1,StartDate:"2019年1月1日",EndDate:"2019年12月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第一季度",PlanTableId:"ddda4952-24c9-439c-91b0-e3c20c03296c",PlanTableType:2,StartDate:"2019年1月1日",EndDate:"2019年3月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第二季度",PlanTableId:"0fb0e2ab-86ba-43f0-9d8a-f67765f26ee7",PlanTableType:2,StartDate:"2019年4月1日",EndDate:"2019年6月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第三季度",PlanTableId:"4cde5937-7432-4e21-ad21-b2d14144f3dd",PlanTableType:2,StartDate:"2019年7月1日",EndDate:"2019年9月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第四季度",PlanTableId:"e06069d2-0e13-4012-b6cb-52d53db804e8",PlanTableType:2,StartDate:"2019年10月1日",EndDate:"2019年12月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:2,TagName:"1月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"c2f1562a-bbd6-4e30-937b-2f77b8896d39",PlanTableType:3,StartDate:"2019年1月1日",EndDate:"2019年1月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"ce2e2530-3c9f-4259-af54-26347b03a257",PlanTableType:4,StartDate:"2018年12月31日",EndDate:"2019年1月6日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"09037db8-8d56-4a9e-978a-80ead24c161a",PlanTableType:4,StartDate:"2019年1月7日",EndDate:"2019年1月13日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"742b938b-f315-42f5-99b0-e6f5180d57e3",PlanTableType:4,StartDate:"2019年1月14日",EndDate:"2019年1月20日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"c3831f27-19c1-4484-86ad-d242da094bb7",PlanTableType:4,StartDate:"2019年1月21日",EndDate:"2019年1月27日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"5c1acd10-fbf4-45e3-bffb-84152bd04afd",PlanTableType:4,StartDate:"2019年1月28日",EndDate:"2019年2月3日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:3,TagName:"2月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"b1b60dc5-88a5-46dd-a7c0-c5f07c100edb",PlanTableType:3,StartDate:"2019年2月1日",EndDate:"2019年2月28日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"49ae1e9c-5a5b-4a44-b4db-210d5b648f3e",PlanTableType:4,StartDate:"2019年2月4日",EndDate:"2019年2月10日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"496b7e28-8d7e-4809-99d7-d8201ebda33d",PlanTableType:4,StartDate:"2019年2月11日",EndDate:"2019年2月17日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"9dc34d00-60f3-40bf-9e57-3f52050fda68",PlanTableType:4,StartDate:"2019年2月18日",EndDate:"2019年2月24日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"28f36bcb-fbe9-424f-999b-a31e0d6ee3f5",PlanTableType:4,StartDate:"2019年2月25日",EndDate:"2019年3月3日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:4,TagName:"3月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"014d67d9-554c-4980-9e36-12ec3f6306cd",PlanTableType:3,StartDate:"2019年3月1日",EndDate:"2019年3月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"cf6a8f7c-4ba9-469e-9817-da3b7f79f045",PlanTableType:4,StartDate:"2019年3月4日",EndDate:"2019年3月10日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"b51ed903-631b-420f-8ec1-757dcb656787",PlanTableType:4,StartDate:"2019年3月11日",EndDate:"2019年3月17日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"90cff138-cc08-4ad4-a2af-d357549c9510",PlanTableType:4,StartDate:"2019年3月18日",EndDate:"2019年3月24日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"71f357ab-09ea-4a83-8699-d1e3feeca46d",PlanTableType:4,StartDate:"2019年3月25日",EndDate:"2019年3月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:5,TagName:"4月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"48026d47-cb43-4f1e-ae88-7925d6fc15a9",PlanTableType:3,StartDate:"2019年4月1日",EndDate:"2019年4月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"5a239090-6485-4ca6-8b89-5fff2c850a6e",PlanTableType:4,StartDate:"2019年4月1日",EndDate:"2019年4月7日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"fc520aa6-cd0c-4822-b878-99cab5a7623c",PlanTableType:4,StartDate:"2019年4月8日",EndDate:"2019年4月14日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"711de9ff-ae2a-4884-8bed-3689193089c8",PlanTableType:4,StartDate:"2019年4月15日",EndDate:"2019年4月21日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"bf861de6-ac10-4ed5-a07c-657fc8e6462e",PlanTableType:4,StartDate:"2019年4月22日",EndDate:"2019年4月28日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:6,TagName:"5月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"a6e4efe1-2a85-487a-b75d-3f2a3522154c",PlanTableType:3,StartDate:"2019年5月1日",EndDate:"2019年5月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"d88be75f-5811-45f3-bcbf-e4dbe4c6e966",PlanTableType:4,StartDate:"2019年4月29日",EndDate:"2019年5月5日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"21791782-020a-4580-83b2-845124fe8067",PlanTableType:4,StartDate:"2019年5月6日",EndDate:"2019年5月12日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"08292e1f-799e-4381-9dad-5adec43f9167",PlanTableType:4,StartDate:"2019年5月13日",EndDate:"2019年5月19日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"807130ec-a167-47b7-97af-386b808ec716",PlanTableType:4,StartDate:"2019年5月20日",EndDate:"2019年5月26日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"691e5ddb-e824-48c3-8d93-567e73081004",PlanTableType:4,StartDate:"2019年5月27日",EndDate:"2019年6月2日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:7,TagName:"6月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"b878ecc4-eeb3-457b-9ce1-cfa4d853f4c9",PlanTableType:3,StartDate:"2019年6月1日",EndDate:"2019年6月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"e9a0658b-3fa1-482a-bbea-4aec6e29fd60",PlanTableType:4,StartDate:"2019年6月3日",EndDate:"2019年6月9日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"0533e26d-2583-4a62-bdd3-b478f21b0a98",PlanTableType:4,StartDate:"2019年6月10日",EndDate:"2019年6月16日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"febc8b40-32b1-497d-8678-51810bef174b",PlanTableType:4,StartDate:"2019年6月17日",EndDate:"2019年6月23日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"ffd86a10-9dab-4ffb-b7c1-4a7d011c05c2",PlanTableType:4,StartDate:"2019年6月24日",EndDate:"2019年6月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:8,TagName:"7月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"0e422e89-ee1a-4971-a5ed-dfd7c8dfd76f",PlanTableType:3,StartDate:"2019年7月1日",EndDate:"2019年7月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"aa027e1b-3f8b-41f0-bc57-bc86b54de9eb",PlanTableType:4,StartDate:"2019年7月1日",EndDate:"2019年7月7日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"6b50b3ad-d56a-4a3c-b760-a5fa07d0e76a",PlanTableType:4,StartDate:"2019年7月8日",EndDate:"2019年7月14日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"eaaad872-beed-4c2a-90b3-e6f759dc01f9",PlanTableType:4,StartDate:"2019年7月15日",EndDate:"2019年7月21日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"94584380-3d46-4d54-b6e1-d96b4e006b4b",PlanTableType:4,StartDate:"2019年7月22日",EndDate:"2019年7月28日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"b21817c0-75c7-4a50-8d48-41ff23230e46",PlanTableType:4,StartDate:"2019年7月29日",EndDate:"2019年8月4日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:9,TagName:"8月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"2444c5fd-8558-4f5e-8eee-1c5e2695569a",PlanTableType:3,StartDate:"2019年8月1日",EndDate:"2019年8月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"684e3b49-a687-4de5-86e2-94b168e7eca8",PlanTableType:4,StartDate:"2019年8月5日",EndDate:"2019年8月11日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"c5b0ff0e-a8c7-4b86-ac82-0f90580b2f84",PlanTableType:4,StartDate:"2019年8月12日",EndDate:"2019年8月18日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"bf71e539-d466-4ff5-9f51-0075bd9ebeb5",PlanTableType:4,StartDate:"2019年8月19日",EndDate:"2019年8月25日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"028f9f20-0361-49e7-90b6-5d109d5eadd7",PlanTableType:4,StartDate:"2019年8月26日",EndDate:"2019年9月1日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:10,TagName:"9月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"9fafc1df-e510-46c5-af56-339af0c39ac5",PlanTableType:3,StartDate:"2019年9月1日",EndDate:"2019年9月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"066c4303-8fa1-4cd6-9450-f202e70388f3",PlanTableType:4,StartDate:"2019年9月2日",EndDate:"2019年9月8日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"cf2a1051-0bf9-4fc9-9b58-ed1ccddadf58",PlanTableType:4,StartDate:"2019年9月9日",EndDate:"2019年9月15日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"3fafc753-5109-4804-9fde-ca3d2d9cc94d",PlanTableType:4,StartDate:"2019年9月16日",EndDate:"2019年9月22日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"633ca7b0-fa1e-4878-b058-c33ff1d6203d",PlanTableType:4,StartDate:"2019年9月23日",EndDate:"2019年9月29日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:11,TagName:"10月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"934bdfb8-4a71-4e45-b9cb-07bdb0937958",PlanTableType:3,StartDate:"2019年10月1日",EndDate:"2019年10月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"f6c9c119-d733-487a-a16b-40143e95af3f",PlanTableType:4,StartDate:"2019年9月30日",EndDate:"2019年10月6日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"4375ee74-5d1b-4aab-b7d1-4cc433353677",PlanTableType:4,StartDate:"2019年10月7日",EndDate:"2019年10月13日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"26bb8943-cb10-4734-8162-71e4a95f51eb",PlanTableType:4,StartDate:"2019年10月14日",EndDate:"2019年10月20日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"931c0d5e-5008-469f-ab35-e219f8e345ed",PlanTableType:4,StartDate:"2019年10月21日",EndDate:"2019年10月27日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"47c4d786-6daf-4938-aab8-bd2b65ecd044",PlanTableType:4,StartDate:"2019年10月28日",EndDate:"2019年11月3日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:12,TagName:"11月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"62adb03f-2c9c-436c-b37b-b4242276303c",PlanTableType:3,StartDate:"2019年11月1日",EndDate:"2019年11月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"288ec5b0-c73d-4aa6-8385-557d693e2a0f",PlanTableType:4,StartDate:"2019年11月4日",EndDate:"2019年11月10日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"6f7480c7-5f1e-4153-9e18-39096e19e59d",PlanTableType:4,StartDate:"2019年11月11日",EndDate:"2019年11月17日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"fdaec73d-ac0b-4188-bcfc-340c53805c4c",PlanTableType:4,StartDate:"2019年11月18日",EndDate:"2019年11月24日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"a4a03f5b-5c94-4350-93e6-ac6a7c216944",PlanTableType:4,StartDate:"2019年11月25日",EndDate:"2019年12月1日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:13,TagName:"12月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"61dcc570-dd87-45d1-9122-ba94fa74f53d",PlanTableType:3,StartDate:"2019年12月1日",EndDate:"2019年12月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"6d4bc2df-1e08-4020-8156-5ec01c5e2584",PlanTableType:4,StartDate:"2019年12月2日",EndDate:"2019年12月8日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"719ec756-2cb5-4627-9934-829d99dd8537",PlanTableType:4,StartDate:"2019年12月9日",EndDate:"2019年12月15日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"62cc7b6d-f413-408c-afcc-4d7beb72a9ce",PlanTableType:4,StartDate:"2019年12月16日",EndDate:"2019年12月22日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"ca291e39-881f-4840-8f01-bf9729c1407e",PlanTableType:4,StartDate:"2019年12月23日",EndDate:"2019年12月29日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]}]},{GroupId:8,GroupName:"2020",Active:!1,PlanTableListModels:[{TagId:14,TagName:"待定",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"待定计划",PlanTableId:"09DBFFCC-0F6C-4FB1-9B7A-D07E1046C656",PlanTableType:5,StartDate:"2013年1月1日",EndDate:"2021年1月3日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:1,TagName:"年/季",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"年度",PlanTableId:"69928c98-426c-4563-ae25-bb25a2bd7bae",PlanTableType:1,StartDate:"2020年1月1日",EndDate:"2020年12月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第一季度",PlanTableId:"6cb12707-518c-4b3e-a09d-e81f01c340e3",PlanTableType:2,StartDate:"2020年1月1日",EndDate:"2020年3月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第二季度",PlanTableId:"88fb58f0-5398-4dbd-8de8-039158a00d60",PlanTableType:2,StartDate:"2020年4月1日",EndDate:"2020年6月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第三季度",PlanTableId:"4f4d787c-6397-436a-a6ea-86da349528e1",PlanTableType:2,StartDate:"2020年7月1日",EndDate:"2020年9月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第四季度",PlanTableId:"3ef16d71-2410-488a-8350-63a3aa436fde",PlanTableType:2,StartDate:"2020年10月1日",EndDate:"2020年12月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:2,TagName:"1月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"cdb88845-e8b4-4351-aa79-c125b1970b7c",PlanTableType:3,StartDate:"2020年1月1日",EndDate:"2020年1月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"a6e3d691-8b05-4b71-b204-751693394577",PlanTableType:4,StartDate:"2019年12月30日",EndDate:"2020年1月5日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"862172c8-c444-4e05-9ac6-ad342ecfa7a0",PlanTableType:4,StartDate:"2020年1月6日",EndDate:"2020年1月12日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"81a0fe78-469b-4cd9-9e62-1d25646e6e54",PlanTableType:4,StartDate:"2020年1月13日",EndDate:"2020年1月19日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"73e065d4-ac5d-4f68-8c0e-5f89492e7636",PlanTableType:4,StartDate:"2020年1月20日",EndDate:"2020年1月26日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"9606fc28-e300-45ab-b932-d054837b12e7",PlanTableType:4,StartDate:"2020年1月27日",EndDate:"2020年2月2日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:3,TagName:"2月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"89c4b834-3ed0-4d88-b2d0-a61d07876b59",PlanTableType:3,StartDate:"2020年2月1日",EndDate:"2020年2月29日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"d89caec1-a132-4c47-b7e9-a0ce676236a8",PlanTableType:4,StartDate:"2020年2月3日",EndDate:"2020年2月9日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"de3d227b-513f-4ebc-ac0d-b3b40217dd98",PlanTableType:4,StartDate:"2020年2月10日",EndDate:"2020年2月16日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"bc0d333c-e4be-4c0e-9743-79b9ebb204c4",PlanTableType:4,StartDate:"2020年2月17日",EndDate:"2020年2月23日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"658f4039-70c4-4728-a25f-8fa260801f7e",PlanTableType:4,StartDate:"2020年2月24日",EndDate:"2020年3月1日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:4,TagName:"3月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"9d7e9883-1912-4b37-aa59-c8b68ee37c2a",PlanTableType:3,StartDate:"2020年3月1日",EndDate:"2020年3月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"8c135cca-561a-48b5-95ec-183ed84b8dd9",PlanTableType:4,StartDate:"2020年3月2日",EndDate:"2020年3月8日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"baae2082-bb56-4028-af80-0408bbdd8e5a",PlanTableType:4,StartDate:"2020年3月9日",EndDate:"2020年3月15日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"1245ea2e-9222-4fcb-b559-17cae082d9d8",PlanTableType:4,StartDate:"2020年3月16日",EndDate:"2020年3月22日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"832935e6-9631-43c8-adc1-e8a40d20bb5f",PlanTableType:4,StartDate:"2020年3月23日",EndDate:"2020年3月29日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:5,TagName:"4月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"abaa34fa-ed73-474d-b383-47ba1f8dadeb",PlanTableType:3,StartDate:"2020年4月1日",EndDate:"2020年4月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"2cf61138-7a13-4635-ae76-9db48d09a77d",PlanTableType:4,StartDate:"2020年3月30日",EndDate:"2020年4月5日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"cd5b6bf3-2749-46bc-9580-7874917ec9d4",PlanTableType:4,StartDate:"2020年4月6日",EndDate:"2020年4月12日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"cef731ac-9d74-4d61-affd-bc08e1d2da17",PlanTableType:4,StartDate:"2020年4月13日",EndDate:"2020年4月19日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"0314e5a0-77cb-4d68-a9f6-e40bf4d28b93",PlanTableType:4,StartDate:"2020年4月20日",EndDate:"2020年4月26日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"d3b1a060-0af7-4412-9d92-065ed526fff1",PlanTableType:4,StartDate:"2020年4月27日",EndDate:"2020年5月3日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:6,TagName:"5月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"b424bfa8-99d7-4c55-8297-4eb4606992f1",PlanTableType:3,StartDate:"2020年5月1日",EndDate:"2020年5月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"88763b44-f681-415b-8bbd-ce2940ee916f",PlanTableType:4,StartDate:"2020年5月4日",EndDate:"2020年5月10日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"630544e7-afbe-48b5-a8a5-7bc308f30f19",PlanTableType:4,StartDate:"2020年5月11日",EndDate:"2020年5月17日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"f14a82c9-ea0a-415a-9938-a0e2c5cd0ecd",PlanTableType:4,StartDate:"2020年5月18日",EndDate:"2020年5月24日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"3ed1c752-f51e-4566-9b54-e06a87f2e588",PlanTableType:4,StartDate:"2020年5月25日",EndDate:"2020年5月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:7,TagName:"6月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"8c560d11-2dda-4fb6-a0f5-38b31541aa36",PlanTableType:3,StartDate:"2020年6月1日",EndDate:"2020年6月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"ad542c49-4099-4f0c-af36-bcfecf7981cf",PlanTableType:4,StartDate:"2020年6月1日",EndDate:"2020年6月7日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"f32f056c-8fdd-4bfe-b886-b999af907f8c",PlanTableType:4,StartDate:"2020年6月8日",EndDate:"2020年6月14日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"8fe840e0-d0b0-452a-a60f-bee43884894e",PlanTableType:4,StartDate:"2020年6月15日",EndDate:"2020年6月21日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"e91600b8-feee-466d-b001-e205057ba347",PlanTableType:4,StartDate:"2020年6月22日",EndDate:"2020年6月28日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:8,TagName:"7月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"fe899fcd-5e96-4fe6-ba44-49096fa45c90",PlanTableType:3,StartDate:"2020年7月1日",EndDate:"2020年7月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"f1754234-a2a3-4f44-95b5-27d4a905b8e0",PlanTableType:4,StartDate:"2020年6月29日",EndDate:"2020年7月5日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"a9675127-9446-4315-9851-4461f7964a6c",PlanTableType:4,StartDate:"2020年7月6日",EndDate:"2020年7月12日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"81daa4c5-9729-401a-b9b5-58e36986998f",PlanTableType:4,StartDate:"2020年7月13日",EndDate:"2020年7月19日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"61aba0fe-5fc4-4a44-93f9-e02606f57edf",PlanTableType:4,StartDate:"2020年7月20日",EndDate:"2020年7月26日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"81a65dd3-2c82-4685-9d04-28d1712bf3b6",PlanTableType:4,StartDate:"2020年7月27日",EndDate:"2020年8月2日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:9,TagName:"8月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"b3b7121e-5a17-4c65-b908-2e1a90de5e7b",PlanTableType:3,StartDate:"2020年8月1日",EndDate:"2020年8月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"61f5e365-4e86-4095-a822-49f6f490df0a",PlanTableType:4,StartDate:"2020年8月3日",EndDate:"2020年8月9日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"3a149396-a4bb-479e-954e-40a50911dd3e",PlanTableType:4,StartDate:"2020年8月10日",EndDate:"2020年8月16日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"d0a857f6-5757-4ce7-adb2-2d900891bb6e",PlanTableType:4,StartDate:"2020年8月17日",EndDate:"2020年8月23日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"a1fd5992-92a3-4af1-b517-53f625ad1c56",PlanTableType:4,StartDate:"2020年8月24日",EndDate:"2020年8月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:10,TagName:"9月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"289e0c68-f329-4104-b439-089892048d32",PlanTableType:3,StartDate:"2020年9月1日",EndDate:"2020年9月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"061ca6c4-30f3-4bec-bbc5-fd427380bf5d",PlanTableType:4,StartDate:"2020年8月31日",EndDate:"2020年9月6日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"2565d763-18cf-4eff-a562-a7bfdfc1b736",PlanTableType:4,StartDate:"2020年9月7日",EndDate:"2020年9月13日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"c2a187b5-c149-422b-a692-a0ecae06e6ed",PlanTableType:4,StartDate:"2020年9月14日",EndDate:"2020年9月20日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"999ff88d-5938-4302-bdd6-22e594f9f13f",PlanTableType:4,StartDate:"2020年9月21日",EndDate:"2020年9月27日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"020bd359-370b-42c7-b983-4040ba4fb58a",PlanTableType:4,StartDate:"2020年9月28日",EndDate:"2020年10月4日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:11,TagName:"10月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"91d1ad0d-825b-4b0f-be39-3f9dc15b9853",PlanTableType:3,StartDate:"2020年10月1日",EndDate:"2020年10月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"6f0d00fa-84e7-4c4c-8311-fb30d4dc765f",PlanTableType:4,StartDate:"2020年10月5日",EndDate:"2020年10月11日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"86c1cdc2-2a08-44a1-ba30-6b6be5728fb0",PlanTableType:4,StartDate:"2020年10月12日",EndDate:"2020年10月18日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"3cf57ccb-6188-44d4-843d-291c1675cbf1",PlanTableType:4,StartDate:"2020年10月19日",EndDate:"2020年10月25日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"73a97a86-a98c-4caf-9f9b-6887aaa40c9b",PlanTableType:4,StartDate:"2020年10月26日",EndDate:"2020年11月1日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:12,TagName:"11月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"b8b690e7-8b7e-4589-a0a3-5333ddaa5163",PlanTableType:3,StartDate:"2020年11月1日",EndDate:"2020年11月30日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"590e01aa-5956-4d12-aea3-3ea39239d981",PlanTableType:4,StartDate:"2020年11月2日",EndDate:"2020年11月8日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"710296d9-5dde-4822-9cac-829d3901cc11",PlanTableType:4,StartDate:"2020年11月9日",EndDate:"2020年11月15日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"45400da9-918c-48cf-8e04-fdbd3ab6ee0c",PlanTableType:4,StartDate:"2020年11月16日",EndDate:"2020年11月22日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"4f5cdb86-c9bb-43bd-9aaa-84b0435e024f",PlanTableType:4,StartDate:"2020年11月23日",EndDate:"2020年11月29日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]},{TagId:13,TagName:"12月",TagType:1,Date:null,Active:!1,PlanTableModels:[{Name:"月度",PlanTableId:"1b45110b-8fc0-492a-959c-6a712c5f9f42",PlanTableType:3,StartDate:"2020年12月1日",EndDate:"2020年12月31日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第1周",PlanTableId:"8c57edef-6651-42e1-a85c-4df0944102a9",PlanTableType:4,StartDate:"2020年11月30日",EndDate:"2020年12月6日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第2周",PlanTableId:"48b1c368-a437-438c-ae82-c8febbf69bbd",PlanTableType:4,StartDate:"2020年12月7日",EndDate:"2020年12月13日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第3周",PlanTableId:"db6f6c1b-c76d-4304-a0d5-8cbf24ab7e39",PlanTableType:4,StartDate:"2020年12月14日",EndDate:"2020年12月20日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第4周",PlanTableId:"2559da1b-25b9-49f4-b696-7bed5973e514",PlanTableType:4,StartDate:"2020年12月21日",EndDate:"2020年12月27日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0},{Name:"第5周",PlanTableId:"6883c9f2-41c6-4bbd-bfb3-2bc4389b6fcf",PlanTableType:4,StartDate:"2020年12月28日",EndDate:"2021年1月3日",FeedId:null,Active:!1,IsCurrentDate:!1,ItemCount:0,IsNotify:0}]}]}]},PlanCollection={postUpdateLable:function(a){var b=new Talent.$.Deferred,c={planItem_id:"",lable_id:"",lable_type:""},a=Talent._.extend({},c,a),d="PlanV2/UpdateLable";
return BaseCollection.request({url:d,type:"Post",data:a}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},postPlanSetMark:function(a){var b=new Talent.$.Deferred,c={type:"",plan_id:""},a=Talent._.extend({},c,a),d="PlanV2/Mark";return BaseCollection.request({url:d,type:"POST",data:a}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},PutUpdateStatus:function(a){var b=new Talent.$.Deferred,c={plan_item_id:"",Status:""},a=Talent._.extend({},c,a),d="PlanV2/UpdateStatus",e="?plan_item_id="+a.plan_item_id+"&Status="+a.Status;return BaseCollection.request({url:d+e,type:"PUT",data:a}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},deleteData:function(a){var b=new Talent.$.Deferred,c={plan_item_id:""},a=Talent._.extend({},c,a),d="PlanV2/Remove",e="?plan_item_id="+a.plan_item_id;return BaseCollection.request({url:d+e,type:"DELETE",data:a}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},getDataList:function(a){var b=new Talent.$.Deferred,c={to_user_id:"",plan_table_id:"",plan_table_type:"",feed_id:"",task_id:""},a=Talent._.extend({},c,a),d="PlanV2/PersionlPlanItemList",e="?to_user_id="+a.to_user_id+"&plan_table_id="+a.plan_table_id+"&plan_table_type="+a.plan_table_type+"&feed_id="+a.feed_id+"&task_id="+a.task_id;return BaseCollection.request({url:d+e,type:"Get"}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},getPlanData:function(){},getPlan:function(a){var b=new Talent.$.Deferred,c=JSON.stringify(PlanDataJson),d=JSON.parse(c),e={group_id:"",date:""},a=Talent._.extend({},e,a),f={Data:d},f=this._findData(f,a);return b.resolve(f.Data),b.promise()},_findData:function(a,b){var c=a.Data.taglist,d=b.date.split("/");if(0!=b.group_id&&moment().year()!=d[0]){var e=Talent._.findWhere(c,{GroupId:b.group_id}),f=e,g=f.PlanTableListModels[0],h=g.PlanTableModels[0];return f.Active=!0,g.Active=!0,h.Active=!0,a}if("00"==d[1]){var e=Talent._.findWhere(c,{GroupName:d[0]}),f=e,g=f.PlanTableListModels[0],h=g.PlanTableModels[0];return f.Active=!0,g.Active=!0,h.Active=!0,a}if("00"==d[2]){var e=Talent._.findWhere(c,{GroupName:d[0]}),i=Number(d[1])+1,f=e,g=Talent._.findWhere(e.PlanTableListModels,{TagId:i}),h=g.PlanTableModels[0];return f.Active=!0,g.Active=!0,h.Active=!0,a}for(var j=0;j<c.length;j++)for(var e=c[j],k=e.PlanTableListModels,l=0;l<k.length;l++)for(var m=k[l],n=m.PlanTableModels,o=m.TagId,p=0;p<n.length;p++){var q=n[p],r=this._formatDate(q.StartDate),s=this._formatDate(q.EndDate);if(r<=b.date&&s>=b.date&&o>1&&14>o&&0!=p)if(e.GroupId==b.group_id||0==b.group_id)q.Active=!0,q.IsCurrentDate=!0,m.Active=!0,e.Active=!0;else{var e=talent._.findWhere(c,{GroupId:b.group_id}),f=e,g=f.PlanTableListModels[0],h=g.PlanTableModels[0];f.Active=!0,g.Active=!0,h.Active=!0}r>b.date&&(q.IsCurrentDate=!1)}return a},_formatDate:function(a){var a=a.replace("年","/");return a=a.replace("月","/"),a=a.replace("日",""),moment(a).format("YYYY/MM/DD")}},ProjectCollection={getProject:function(a){{var b={app_id:0,app_type:0,to_user_id:0},c=new Talent.$.Deferred,a=Talent._.extend({},b,a),d="Work/MyAssentWork";"?app_id="+a.app_id+"&app_type="+a.app_type+"&to_user_id="+a.to_user_id}return BaseCollection.request({type:"Get",url:d,data:a}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c}},SetNoticeCollectoin={getData:function(a){var b={obj_id:0,obj_type:0,content:"一个提醒",cyc_type:0,remind_user_ids:""},c=new Talent.$.Deferred,a=Talent._.extend({},b,a),d="RemindV2/Get";return BaseCollection.request({type:"Get",url:d,data:a}).done(function(a){c.resolve(a)}),c},postUpdateData:function(a){var b={obj_id:0,obj_type:0,content:"一个提醒",cyc_type:0,remind_user_ids:[],time:""},c=new Talent.$.Deferred,a=Talent._.extend({},b,a),d="RemindV2/UpdateReminds";return BaseCollection.request({type:"post",url:d+"?time="+a.time,data:a}).done(function(a){c.resolve(a)}),c},postAddRemindData:function(a){var b={obj_id:0,obj_type:0,content:"一个提醒",cyc_type:0,remind_user_ids:"",time:""},c=new Talent.$.Deferred,a=Talent._.extend({},b,a),d="RemindV2/Add";return BaseCollection.request({type:"post",url:d+"?time="+a.time,data:a}).done(function(a){c.resolve(a)}),c},getCleanRemindData:function(a){var b={obj_id:0,obj_type:0},c=new Talent.$.Deferred,a=Talent._.extend({},b,a),d="RemindV2/DeleteReminds",e="?obj_id="+a.obj_id+"&obj_type="+a.obj_type;return BaseCollection.request({type:"get",url:d+e,data:a}).done(function(a){c.resolve(a)}),c}},ShareCollection={addShare:function(){}},UserSelectorCollection=Talent.Collection.extend({excludeSelf:!1,initialize:function(){this.userInfo=Talent.Context.getUserInfo()},getContact:function(){var a=this;return this.viewType="Contact",a.deferred&&a.deferred.reject(),a.deferred=new $.Deferred,$.ajax({url:Context.getApiUrl("Contact?v=")+(new Date).getTime(),type:"GET",success:function(b){if("Contact"==a.viewType)if(b&&1==b.Code){var c=Talent._.values(b.Data);c.length>0?(Talent._.map(c,function(a){return a.MidAvatar=a.UserAvatar.Medium,a.imgTemplate=Talent._.convertImage({shape:"radius",name:a.Name,src:a.MidAvatar,bgColor:a.UserAvatar.Color})}),a.deferred.resolve(c)):a.deferred.resolve([])}else a.deferred.resolve([])}}),a.deferred.promise()},getSubordinate:function(){var a=this;this.viewType="Subordinates",a.deferred&&a.deferred.reject(),a.deferred=new $.Deferred;return $.ajax({url:Context.getApiUrl("org/GetMySubordinates?lv=2&type=0"),type:"GET",success:function(b){if("Subordinates"==a.viewType)if(b&&1==b.Code){var c=Talent._.values(b.Data);c.length>0?(Talent._.map(c,function(a){return a.User&&(a.User.imgTemplate=Talent._.convertImage({shape:"radius",name:a.User.Name,src:a.User.MidAvatar,bgColor:a.User.UserAvatar.Color})),a}),c=Talent._.filter(c,function(b){return b.User.Id!=a.userInfo.Id}),c=Talent._.pluck(c,"User"),a.deferred.resolve(c)):a.deferred.resolve([])}else a.deferred.resolve([])}}),a.deferred.promise()},getSearch:function(a){var b=this;this.viewType="Search",b.deferred&&b.deferred.reject(),b.deferred=new $.Deferred;var c=a&&a.searchCondition||{};this.filters=c.name;var d=Context.getApiUrl("user?v="+(new Date).getTime()+"&filters="+encodeURIComponent(c.name)||"");return""==c.name?b.deferred.resolve([]):$.ajax({url:d,type:"GET",success:function(a){if("Search"==b.viewType)if(a&&1==a.Code){var c=a&&a.Data||{};if(c.Filters==b.filters){var d=c.SimpleUserModel||{};d=Talent._.values(d),Talent._.map(d,function(a){return a.MidAvatar=a.UserAvatar.Medium,a.imgTemplate=Talent._.convertImage({shape:"radius",name:a.Name,src:a.MidAvatar,bgColor:a.UserAvatar.Color})}),b.excludeSelf&&(d=Talent._.filter(d,function(a){return a.Id!=b.userInfo.Id})),b.deferred.resolve(d)}}else b.deferred.resolve([])}}),b.deferred.promise()},getDepartmentData:function(){var a=new $.Deferred;return $.ajax({url:Context.getApiUrl("department/All"),type:"GET",success:function(b){if(b&&1==b.Code){var c=b.Data||[];Talent._.map(c,function(a){a.count=a.TotalUserCount,a.Data=[],a.type="department"}),a.resolve(c)}else a.resolve([])}}),a.promise()},getDepartment:function(){var a=this;this.viewType="Department",a.deferred&&a.deferred.reject(),a.deferred=new $.Deferred;return this.getDepartmentData().done(function(b){if("Department"==a.viewType){var c=b;c=Talent._.filter(c,function(a){return 0==a.PId}),a.deferred.resolve(c)}}),a.deferred.promise()},getDepartmentDetail:function(a){var b=this;this.viewType="Department",b.deferred&&b.deferred.reject(),b.deferred=new $.Deferred;var c=parseInt(a.id);return this.getDepartmentData().done(function(d){var e=d;e=Talent._.filter(e,function(a){return a.PId==c}),e=e||[],$.ajax({url:Context.getApiUrl("department/DepartmentOfUser?department_id=")+a.id,type:"GET",success:function(a){if("Department"==b.viewType){var c=a.Data||[];Talent._.map(c,function(a){return a.imgTemplate=Talent._.convertImage({shape:"radius",name:a.Name,src:a.MidAvatar,bgColor:a.UserAvatar.Color})}),b.excludeSelf&&(c=Talent._.filter(c,function(a){return a.Id!=b.userInfo.Id})),e=c.concat(e),b.deferred.resolve(e)}}})}),b.deferred.promise()},invite:function(a){var b=new $.Deferred;return $.ajax({url:Context.getApiUrl("userinvite/inviteUser"),type:"POST",data:a}).done(function(a){b.resolve(a)}),b.promise()}}),SMSCollection={getSmsCheck:function(a){var b=new Talent.$.Deferred,c={to_user_id:""},a=Talent._.extend({},c,a),d="SMS/Check?to_user_id="+a.to_user_id;return BaseCollection.request({url:d,type:"Get"}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},postSmsNotifyAddNum:function(a){var b=new Talent.$.Deferred,c={to_user_id:"",phoneNum:"",is_notify:""};a=Talent._.extend({},c,a);var d="SMS/NotifyAddNum";return BaseCollection.request({url:d,type:"Post",data:a}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b}},TaskCollection={addTask:function(a){var b={TaskName:"",PrincipalUser:"",StartDate:"",EndDate:"",Importance:"",Visibility:"",Description:"",FileUrls:"",RemindTime:"",RemindType:"",hourDate:"",minuteDate:"",singleDate:"",extend_user:"",CycType:"",CycStartDate:"",CycStartTime:"",CycEndDate:"",CycEndTime:"",ApplyUserId:"",IsLongTerm:"",parentTaskId:"",LabId:"",LabType:"",PlanTableId:"",planTableType:"",TaskSource:"",AddPlan:"",objType:""},a=Talent._.extend({},b,a),c="task/Add",d=new Talent.$.Deferred;return BaseCollection.request({url:c,type:"post",data:a}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},updateLable:function(a){var b={task_id:"",lab_id:"",lab_type:""},a=Talent._.extend({},b,a),c="task/UpdateLable",d="?task_id="+a.task_id+"&lab_id="+a.lab_id+"&lab_type="+a.lab_type,e=new Talent.$.Deferred;return BaseCollection.request({url:c+d,type:"Post"}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},UpdateCycleTask:function(a){var b={cycle_id:"",CycType:"",CycStartDate:"",CycStartTime:"",CycEndDate:"",CycEndTime:""},a=Talent._.extend({},b,a),c="task/UpdateCycleTask",d="?cycle_id="+a.cycle_id,e=new Talent.$.Deferred;return BaseCollection.request({url:c+d,type:"Post",data:a}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},updateTaskDate:function(a){var b={task_id:"",Deadline:"",StartDate:""},a=Talent._.extend({},b,a),c="task/UpdateTaskDate",d="?task_id="+a.task_id,e=new Talent.$.Deferred;return BaseCollection.request({url:c+d,type:"Post",data:a}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},cancelCycle:function(a){var b={task_id:"",cycle_id:""},a=Talent._.extend({},b,a),c="task/CloseCycleTask",d="?task_id="+a.task_id+"&cycle_id="+a.cycle_id,e=new Talent.$.Deferred;return BaseCollection.request({url:c+d,type:"Get"}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},getCycleTask:function(a){var b={cycle_id:""},a=Talent._.extend({},b,a),c="task/GetCycleTask?cycle_id="+a.cycle_id,d=new Talent.$.Deferred;return BaseCollection.request({url:c,type:"get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},getTaskInfo:function(a){var b="task/TaskInfo",c=new Talent.$.Deferred,d={task_id:"",data:""},a=Talent._.extend({},d,a),e="?task_id="+a.task_id+"&data="+a.data;return BaseCollection.requestV2({url:b+e,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},getTaskInfoObj:function(a){var b={task_id:""},c=new Talent.$.Deferred,a=Talent._.extend({},b,a),d="task/TaskInfoObj",e="?task_id="+a.task_id;return BaseCollection.requestV2({url:d+e,type:"get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},taskAccept:function(a){var b="task/Accept",c={start_date:"",end_date:"",parent_task_id:"",lab_type:"",lab_id:"",isLongTerm:""},a=Talent._.extend({},c,a),d="?start_date="+a.start_date+"&end_date="+a.end_date+"&task_id="+a.task_id+"&lab_id="+a.lab_id+"&lab_type="+a.lab_type+"&isLongTerm="+a.isLongTerm,e=new Talent.$.Deferred;return BaseCollection.request({url:b+d,type:"POST"}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},participatorAccept:function(a){var b={task_id:""},c=new Talent.$.Deferred,a=Talent._.extend({},b,a),d="task/ParticipatorAccept";return BaseCollection.request({url:d,type:"post",data:a}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},taskDeleteParticipator:function(a){var b={task_id:"",to_user_id:""},c=new Talent.$.Deferred,a=Talent._.extend({},b,a),d="task/DeleteParticipator";return BaseCollection.request({url:d,type:"POST",data:a}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},taskDelete:function(a){var b={task_id:"",to_user_id:""},c=new Talent.$.Deferred,a=Talent._.extend({},b,a),d="task/Delete",e="?task_id="+a.task_id;return BaseCollection.request({url:d+e,type:"POST"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},updateStatus:function(a){var b={task_id:"",status:""},a=Talent._.extend({},b,a),c="task/UpdateStatus",d="?task_id="+a.task_id+"&=status"+a.status,e=new Talent.$.Deferred;return BaseCollection.request({url:c+d,data:a,type:"POST"}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},taskSetMark:function(a){{var b=new Talent.$.Deferred,c={task_id:"",type:""},a=Talent._.extend({},c,a),d="task/Mark";"?task_id="+a.task_id+"&=type"+a.type}return BaseCollection.request({url:d,type:"POST",data:a}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b.promise()},changeTask:function(a){var b="task/ChangeTask",c={task_id:"",old_parent_task_id:"",parent_task_id:""},a=Talent._.extend({},c,a),d=new Talent.$.Deferred,e="?task_id="+a.task_id+"&parent_task_id="+a.parent_task_id+"&old_parent_task_id="+a.old_parent_task_id;return BaseCollection.requestV2({url:b+e,type:"POST",data:a}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},updateTaskName:function(a){var b="task/UpdateName",c={task_id:"",TaskName:""},a=Talent._.extend({},c,a),d=new Talent.$.Deferred;return BaseCollection.request({url:b+"?task_id="+a.task_id,type:"POST",data:a}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},UpdateDescription:function(a){var b="task/UpdateDescription",c={task_id:"",Description:""},a=Talent._.extend({},c,a),d=new Talent.$.Deferred;return BaseCollection.request({url:b+"?task_id="+a.task_id,type:"POST",data:a}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},taskAddParticipator:function(a){var b=new Talent.$.Deferred,c="task/AddParticipator",d="?task_id="+a.task_id;return BaseCollection.request({url:c+d,type:"POST",contentType:"application/json",data:JSON.stringify(a.users)}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b.promise()},taskDeleteParticipator:function(a){var b=new Talent.$.Deferred,c="task/DeleteParticipator",d="";return BaseCollection.request({url:c+d,type:"POST",data:a}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b.promise()},updateApplyUser:function(a){var b=new Talent.$.Deferred,c={to_user_id:"",task_id:""},a=Talent._.extend({},c,a),d="task/UpdateApplyUser",e="";return BaseCollection.request({url:d+e,type:"POST",data:a}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b.promise()},updateTaskPrincipalUser:function(a){var b="task/UpdatePrincipal",c="",d=new Talent.$.Deferred,e={task_id:"",to_user_id:""},a=Talent._.extend({},e,a);return BaseCollection.request({url:b+c,type:"POST",data:a}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},addAttachment:function(a){var b="task/AddAttachment",c=new Talent.$.Deferred,d={objId:"",dfsUrls:"",documents:[]},a=Talent._.extend({},d,a);return BaseCollection.requestV2({url:b,type:"POST",data:a}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},deleteAttachment:function(a){var b="task/DeleteAttachment",c=new Talent.$.Deferred,d={task_id:"",document_id:""},a=Talent._.extend({},d,a),e="?task_id="+a.task_id+"&document_id="+a.document_id;return BaseCollection.request({url:b+e,type:"POST",data:a}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},addFollower:function(a){var b={taskId:"",followers:[]},c=new Talent.$.Deferred,d=Talent._.extend({},b,a),e="task/AddFollower?taskId="+d.taskId;return BaseCollection.request({url:e,type:"post",contentType:"application/json",data:JSON.stringify(d.followers)}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},deleteFollower:function(a){var b={taskId:"",toUserId:""},c=new Talent.$.Deferred,d=Talent._.extend({},b,a),e="task/Deletefollower?taskId="+d.taskId+"&toUserId="+d.toUserId;return BaseCollection.request({url:e,type:"post"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},evaluateTask:function(a){var b="task/EvaluateTask",c=new Talent.$.Deferred;return BaseCollection.request({url:b,type:"POST",data:a}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},membersTask:function(a){var b={task_id:""},a=Talent._.extend({},b,a),c="task/Members",d="?task_id="+a.task_id,e=new Talent.$.Deferred;return BaseCollection.requestV2({url:c+d,type:"GET"}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()}},UserFeedV2={commentCount:4,feedFount:20,getUserFeed:function(a){var b={type:"",start:"",feed_count:this.feedFount,comment_count:this.commentCount},a=Talent._.extend({},b,a),c="user/feed/Get",d=new Talent.$.Deferred,e="?type="+a.type+"&start="+a.start+"&feed_count="+a.feed_count+"&comment_count="+a.comment_count;return BaseCollection.requestV2({url:c+e,type:"Get"}).done(function(b){26==a.type&&Talent._.each(b.feeds,function(a){a.isCollect=!0}),d.resolve(b)}).fail(function(a){d.reject(a)}),d},getAllAndTopFeed:function(a){var b={type:"",start:"",feed_count:this.feedFount,comment_count:this.commentCount},a=Talent._.extend({},b,a),c="user/feed/Get?type=27&feed_count="+a.feed_count+"&comment_count="+a.comment_count+"&start="+a.start,d="user/feed/Get?type=7&feed_count="+a.feed_count+"&comment_count="+a.comment_count+"&start="+a.start,e=new Talent.$.Deferred;return BaseCollection.batchV2({url:[c,d]}).done(function(a){var b=Talent.Collection.extend({initialize:function(){this.model=Talent.Model.extend({idAttribute:"feedId"})}}),f=a[Context.getApiUrlV2(d)].Data.Data||{},g=a[Context.getApiUrlV2(c)].Data.Data||{},h=new b,i=Talent._.pluck(g.feeds,"feedId");h.add(g.feeds),h.add(f.feeds);for(var j=0;j<i.length;j++)h.get(i[j]).set("isTop",!0);var a={lastId:f.allData,isEnd:f.isEnd,feeds:h.toJSON()};e.resolve(a)}).fail(function(a){e.reject(a)}),e},deleteUserFeed:function(a){var b={feed_id:""},a=Talent._.extend({},b,a),c="user/feed/Delete",d=new Talent.$.Deferred,e="?feed_id="+a.feed_id;return BaseCollection.requestV2({url:c+e,type:"Delete"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},userFeedCollecte:function(a){var b={feed_id:""},a=Talent._.extend({},b,a),c="user/feed/Collect",d=new Talent.$.Deferred,e="?feed_id="+a.feed_id;return BaseCollection.requestV2({url:c+e,type:"PUT"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},userFeedCancelCollect:function(a){var b={feed_id:""},a=Talent._.extend({},b,a),c="user/feed/CancelCollect",d=new Talent.$.Deferred,e="?feed_id="+a.feed_id;return BaseCollection.requestV2({url:c+e,type:"DELETE"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},userFeedTop:function(a){var b={feed_id:"",titaObj_type:2,titaObj_id:""},a=Talent._.extend({},b,a),c="user/feed/Top",d=new Talent.$.Deferred,e="?feed_id="+a.feed_id+"&titaObj_type="+a.titaObj_type+"&titaObj_id="+a.titaObj_id;return BaseCollection.requestV2({url:c+e,type:"post"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},userFeedCancelTop:function(a){var b={feed_id:"",titaObj_type:2,titaObj_id:""},a=Talent._.extend({},b,a),c="user/feed/CancelTop",d=new Talent.$.Deferred,e="?feed_id="+a.feed_id+"&titaObj_type="+a.titaObj_type+"&titaObj_id="+a.titaObj_id;return BaseCollection.requestV2({url:c+e,type:"DELETE"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},userFeedSearch:function(a){var b={type:"",content:"",start:"",count:20,comment_count:"4"},a=Talent._.extend({},b,a),c="user/feed/Search",d=new Talent.$.Deferred,e="";return BaseCollection.requestV2({url:c+e,type:"POST",data:a}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},getFeedById:function(a){var b={feed_id:"",comment_count:4},a=Talent._.extend({},b,a),c="user/feed/GetById",d=new Talent.$.Deferred,e="";return BaseCollection.requestV2({url:c+e,type:"Get",data:a}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d}},WorkTimeCollection={addWorkHour:function(a){var b={ObjId:"",ObjType:7,Name:"",Description:"",Time:"",Hour:"",Minute:"",FileUrl:""},a=Talent._.extend({},b,a),c="worktime/AddV2",d="",e=new Talent.$.Deferred;return BaseCollection.request({url:c+d,type:"POST",data:a}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},getDetail:function(a){var b={obj_id:"",obj_type:"",work_time_id:""},a=Talent._.extend({},b,a),c="worktime/Get",d="?obj_id="+a.obj_id+"&obj_type="+a.obj_type+"&work_time_id="+a.work_time_id,e=new Talent.$.Deferred;return BaseCollection.request({url:c+d,type:"get"}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},updateWokHour:function(a){var b="worktime/Update",c="?work_time_id="+a.work_time_id,d=new Talent.$.Deferred;return BaseCollection.request({url:b+c,type:"POST",data:a}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},deleteWorkHour:function(a){var b=new Talent.$.Deferred,c={id:""},a=Talent._.extend({},c,a),d="worktime/Delete";return BaseCollection.request({url:d,type:"POST",data:a}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b.promise()},addAttachment:function(a){var b="WorkTime/AddAttachmentV2",c=new Talent.$.Deferred,d={objId:"",dfsUrls:"",documents:[]},a=Talent._.extend({},d,a);return BaseCollection.request({url:b,type:"POST",data:a}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},deleteAttachment:function(a){var b="WorkTime/DeleteAttachment",c=new Talent.$.Deferred,d={work_time_id:"",document_id:""};a=Talent._.extend({},d,a);var e="?work_time_id="+a.work_time_id+"&document_id="+a.document_id;return BaseCollection.request({url:b+e,type:"POST"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()}},YFYColleciton={getYifangyun:function(){var a=new Talent.$.Deferred,b="YiFangyun/SSO";return BaseCollection.request({url:b,type:"Get"}).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a}},ApplyCollection={UpdateState:function(a){var b="Apply/Plan/UpdateState",c={ApplyIds:"",State:"",ApplyContent:""},a=Talent._.extend({},c,a),d=new Talent.$.Deferred;return BaseCollection.request({url:b,type:"POST",data:a}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()}},UserCollection={getData:function(a){var b={ids:[]},c=new Talent.$.Deferred,d="user",a=Talent._.extend({},b,a);return BaseCollection.request({url:d,data:a,type:"Post"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getByIds:function(a){var b={ids:[]},c=new Talent.$.Deferred,a=Talent._.extend({},b,a),d="user/GetByIds",e="?ids="+a.ids;return BaseCollection.requestV2({url:d+e,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c}},MessageCollection={taoShangMessage:function(a){var b={toUserid:"",objId:"",objType:"",content:""},a=Talent._.extend({},b,a),c="messages/TaoShangMessage",d=new Talent.$.Deferred,e="";return BaseCollection.request({url:c+e,type:"post",data:a}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d}},FeedChannelCollection={getByChannelIdData:function(a){var b={channelId:"",startId:"",pageSize:"",commentCount:4},a=Talent._.extend({},b,a),c="feedchannel/feeds",d="?channelId="+a.channelId+"&startId="+a.startId+"&pageSize="+a.pageSize+"&commentCount="+a.commentCount,e=new Talent.$.Deferred;return BaseCollection.request({url:c+d,type:"get"}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()}},WxpayCollection={UpdateState:function(a){var b="wx/pay/web/order",c={toUserId:"",totalFee:"",objId:"",objType:"",description:""},a=Talent._.extend({},c,a),d=new Talent.$.Deferred;return BaseCollection.request({url:b,type:"POST",data:a}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},getDaShangDetail:function(a){var b="wx/pay/order/record",c={objId:"",objType:""},a=Talent._.extend({},c,a),d="?objid="+a.objId+"&objType="+a.objType,e=new Talent.$.Deferred;return BaseCollection.request({url:b+d,type:"get",data:a}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()}},defaults={className:"autosizejs",append:"",callback:!1,resizeDelay:10},copy='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',typographyStyles=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],mirrored,mirror=$(copy).data("autosize",!0)[0];mirror.style.lineHeight="99px","99px"===$(mirror).css("lineHeight")&&typographyStyles.push("lineHeight"),mirror.style.lineHeight="",$.fn.autosize=function(a){return a=$.extend({},defaults,a||{}),mirror.parentNode!==document.body&&$(document.body).append(mirror),this.each(function(){function b(){var b,c={};if(mirrored=h,mirror.className=a.className,e=parseInt(i.css("maxHeight"),10),$.each(typographyStyles,function(a,b){c[b]=i.css(b)}),$(mirror).css(c),"oninput"in h){var d=h.style.width;h.style.width="0px",b=h.offsetWidth,h.style.width=d}}function c(){var c,d,g,l;mirrored!==h&&b(),mirror.value=h.value+a.append,mirror.style.overflowY=h.style.overflowY,d=parseInt(h.style.height,10),"getComputedStyle"in window?(l=window.getComputedStyle(h),g=h.getBoundingClientRect().width,$.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(a,b){g-=parseInt(l[b],10)}),mirror.style.width=g+"px"):mirror.style.width=Math.max(i.width(),0)+"px",mirror.scrollTop=0,mirror.scrollTop=9e4,c=mirror.scrollTop,e&&c>e?(h.style.overflowY="scroll",c=e):(h.style.overflowY="hidden",f>c&&(c=f)),c+=j,d!==c&&(h.style.height=c+"px",k&&a.callback.call(h,h))}function d(){clearTimeout(g),g=setTimeout(function(){i.width()!==m&&c()},parseInt(a.resizeDelay,10))}var e,f,g,h=this,i=$(h),j=0,k=$.isFunction(a.callback),l={height:h.style.height,overflow:h.style.overflow,overflowY:h.style.overflowY,wordWrap:h.style.wordWrap,resize:h.style.resize},m=i.width();i.data("autosize")||(i.data("autosize",!0),("border-box"===i.css("box-sizing")||"border-box"===i.css("-moz-box-sizing")||"border-box"===i.css("-webkit-box-sizing"))&&(j=i.outerHeight()-i.height()),f=Math.max(parseInt(i.css("minHeight"),10)-j||0,i.height()),i.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word",resize:"none"===i.css("resize")||"vertical"===i.css("resize")?"none":"horizontal"}),"onpropertychange"in h?"oninput"in h?i.on("input.autosize keyup.autosize",c):i.on("propertychange.autosize",function(){"value"===event.propertyName&&c()}):i.on("input.autosize",c),a.resizeDelay!==!1&&$(window).on("resize.autosize",d),i.on("autosize.resize",c),i.on("autosize.resizeIncludeStyle",function(){mirrored=null,c()}),i.on("autosize.destroy",function(){mirrored=null,clearTimeout(g),$(window).off("resize",d),i.off("autosize").off(".autosize").css(l).removeData("autosize")}),c())})};var zh_cn=moment.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm分",LTS:"Ah点m分s秒",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(a,b){return 12===a&&(a=0),"凌晨"===b||"早上"===b||"上午"===b?a:"下午"===b||"晚上"===b?a+12:a>=11?a:a+12},meridiem:function(a,b){var c=100*a+b;return 600>c?"凌晨":900>c?"早上":1130>c?"上午":1230>c?"中午":1800>c?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var a,b;return a=moment().startOf("week"),b=this.unix()-a.unix()>=604800?"[下]":"[本]",0===this.minutes()?b+"dddAh点整":b+"dddAh点mm"},lastWeek:function(){var a,b;return a=moment().startOf("week"),b=this.unix()<a.unix()?"[上]":"[本]",0===this.minutes()?b+"dddAh点整":b+"dddAh点mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(日|月|周)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"日";case"M":return a+"月";case"w":case"W":return a+"周";default:return a}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}}),DateRangePicker=function(a,b,c){this.parentEl="body",this.element=$(a),this.isShowing=!1;var d='<div class="daterangepicker dropdown-menu"><div class="calendar first left"></div><div class="calendar second right"></div><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input"><label for="daterangepicker_start"></label><input class="input-mini" type="text" name="daterangepicker_start" value=""  disabled="disabled" /></div><div class="daterangepicker_end_input"><label for="daterangepicker_end"></label><input class="input-mini" type="text" name="daterangepicker_end" value=""  disabled="disabled" /></div><button class="applyBtn" disabled="disabled" type="button"></button>&nbsp;<button class="cancelBtn" type="button"></button></div></div></div>';("object"!=typeof b||null===b)&&(b={}),this.parentEl=$("object"==typeof b&&b.parentEl&&$(b.parentEl).length?b.parentEl:this.parentEl),this.container=$(d).appendTo(this.parentEl),b=$.extend(this.element.data(),b),this.setOptions(b,c),this.container.find(".calendar").on("click.daterangepicker",".prev",$.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",$.proxy(this.clickNext,this)).on("click.daterangepicker","td.available",$.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",$.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",$.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",$.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.monthselect",$.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",$.proxy(this.updateTime,this)),this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",$.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",$.proxy(this.clickCancel,this)).on("click.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",$.proxy(this.showCalendars,this)).on("change.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",$.proxy(this.inputsChanged,this)).on("keydown.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",$.proxy(this.inputsKeydown,this)).on("click.daterangepicker","li",$.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",$.proxy(this.enterRange,this)).on("mouseleave.daterangepicker","li",$.proxy(this.updateFormInputs,this)),this.element.is("input")?this.element.on({"click.daterangepicker":$.proxy(this.show,this),"focus.daterangepicker":$.proxy(this.show,this),"keyup.daterangepicker":$.proxy(this.updateFromControl,this),"keydown.daterangepicker":$.proxy(this.keydown,this)}):this.element.on("click.daterangepicker",$.proxy(this.toggle,this))};DateRangePicker.prototype={constructor:DateRangePicker,setOptions:function(a,b){if(this.startDate=moment().startOf("day"),this.endDate=moment().endOf("day"),this.timeZone=moment().utcOffset(),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.timePicker=!1,this.timePickerSeconds=!1,this.timePickerIncrement=30,this.timePicker12Hour=!0,this.autoApply=!1,this.singleDatePicker=!1,this.ranges={},this.autoHide=!0,this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses=["btn","btn-small btn-sm"],this.applyClass="btn-success",this.cancelClass="btn-default",this.format="MM/DD/YYYY",this.separator=" - ",this.locale={applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:moment.weekdaysMin(),monthNames:moment.monthsShort(),firstDay:moment.localeData()._week.dow},this.cb=function(){},"string"==typeof a.format&&(this.format=a.format),"string"==typeof a.separator&&(this.separator=a.separator),"string"==typeof a.startDate&&(this.startDate=moment(a.startDate,this.format)),"string"==typeof a.endDate&&(this.endDate=moment(a.endDate,this.format)),"string"==typeof a.minDate&&(this.minDate=moment(a.minDate,this.format)),"string"==typeof a.maxDate&&(this.maxDate=moment(a.maxDate,this.format)),"object"==typeof a.startDate&&(this.startDate=moment(a.startDate)),"object"==typeof a.endDate&&(this.endDate=moment(a.endDate)),"object"==typeof a.minDate&&(this.minDate=moment(a.minDate)),"object"==typeof a.maxDate&&(this.maxDate=moment(a.maxDate)),"string"==typeof a.applyClass&&(this.applyClass=a.applyClass),"string"==typeof a.cancelClass&&(this.cancelClass=a.cancelClass),"object"==typeof a.dateLimit&&(this.dateLimit=a.dateLimit),"object"==typeof a.locale&&("object"==typeof a.locale.daysOfWeek&&(this.locale.daysOfWeek=a.locale.daysOfWeek.slice()),"object"==typeof a.locale.monthNames&&(this.locale.monthNames=a.locale.monthNames.slice()),"number"==typeof a.locale.firstDay&&(this.locale.firstDay=a.locale.firstDay),"string"==typeof a.locale.applyLabel&&(this.locale.applyLabel=a.locale.applyLabel),"string"==typeof a.locale.cancelLabel&&(this.locale.cancelLabel=a.locale.cancelLabel),"string"==typeof a.locale.fromLabel&&(this.locale.fromLabel=a.locale.fromLabel),"string"==typeof a.locale.toLabel&&(this.locale.toLabel=a.locale.toLabel),"string"==typeof a.locale.weekLabel&&(this.locale.weekLabel=a.locale.weekLabel),"string"==typeof a.locale.customRangeLabel&&(this.locale.customRangeLabel=a.locale.customRangeLabel)),"string"==typeof a.opens&&(this.opens=a.opens),"string"==typeof a.drops&&(this.drops=a.drops),"boolean"==typeof a.showWeekNumbers&&(this.showWeekNumbers=a.showWeekNumbers),"string"==typeof a.buttonClasses&&(this.buttonClasses=[a.buttonClasses]),"object"==typeof a.buttonClasses&&(this.buttonClasses=a.buttonClasses),"boolean"==typeof a.showDropdowns&&(this.showDropdowns=a.showDropdowns),"boolean"==typeof a.singleDatePicker&&(this.singleDatePicker=a.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof a.timePicker&&(this.timePicker=a.timePicker),"boolean"==typeof a.timePickerSeconds&&(this.timePickerSeconds=a.timePickerSeconds),"number"==typeof a.timePickerIncrement&&(this.timePickerIncrement=a.timePickerIncrement),"boolean"==typeof a.timePicker12Hour&&(this.timePicker12Hour=a.timePicker12Hour),"boolean"==typeof a.autoApply&&(this.autoApply=a.autoApply,this.autoApply&&this.container.find(".applyBtn, .cancelBtn").addClass("hide")),"boolean"==typeof a.autoHide&&(this.autoHide=a.autoHide),0!=this.locale.firstDay)for(var c=this.locale.firstDay;c>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),c--;
var d,e,f;if("undefined"==typeof a.startDate&&"undefined"==typeof a.endDate&&$(this.element).is("input[type=text]")){var g=$(this.element).val(),h=g.split(this.separator);d=e=null,2==h.length?(d=moment(h[0],this.format),e=moment(h[1],this.format)):this.singleDatePicker&&""!==g&&(d=moment(g,this.format),e=moment(g,this.format)),null!==d&&null!==e&&(this.startDate=d,this.endDate=e)}if("string"==typeof a.timeZone||"number"==typeof a.timeZone?(this.timeZone="string"==typeof a.timeZone&&"undefined"!=typeof moment.tz?-1*moment.tz.zone(a.timeZone).parse(new Date):a.timeZone,this.startDate.utcOffset(this.timeZone),this.endDate.utcOffset(this.timeZone)):this.timeZone=moment(this.startDate).utcOffset(),"object"==typeof a.ranges){for(f in a.ranges)d="string"==typeof a.ranges[f][0]?moment(a.ranges[f][0],this.format):moment(a.ranges[f][0]),e="string"==typeof a.ranges[f][1]?moment(a.ranges[f][1],this.format):moment(a.ranges[f][1]),this.minDate&&d.isBefore(this.minDate)&&(d=moment(this.minDate)),this.maxDate&&e.isAfter(this.maxDate)&&(e=moment(this.maxDate)),this.minDate&&e.isBefore(this.minDate)||this.maxDate&&d.isAfter(this.maxDate)||(this.ranges[f]=[d,e]);var i="<ul>";for(f in this.ranges)i+="<li>"+f+"</li>";i+="<li>"+this.locale.customRangeLabel+"</li>",i+="</ul>",this.container.find(".ranges ul").remove(),this.container.find(".ranges").prepend(i)}if("function"==typeof b&&(this.cb=b),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day")),this.singleDatePicker?(this.opens=this.opens||"right",this.container.addClass("single"),this.container.find(".calendar.right").show(),this.container.find(".calendar.left").hide(),this.timePicker?this.container.find(".ranges .daterangepicker_start_input, .ranges .daterangepicker_end_input").hide():this.container.find(".ranges").hide(),this.container.find(".calendar.right").hasClass("single")||this.container.find(".calendar.right").addClass("single")):(this.container.removeClass("single"),this.container.find(".calendar.right").removeClass("single"),this.container.find(".calendar.left").show(),this.container.find(".ranges").show()),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.oldChosenLabel=this.chosenLabel,this.leftCalendar={month:moment([this.startDate.year(),this.startDate.month(),1,this.startDate.hour(),this.startDate.minute(),this.startDate.second()]),calendar:[]},this.rightCalendar={month:moment([this.endDate.year(),this.endDate.month(),1,this.endDate.hour(),this.endDate.minute(),this.endDate.second()]),calendar:[]},"right"==this.opens||"center"==this.opens){var j=this.container.find(".calendar.first"),k=this.container.find(".calendar.second");k.hasClass("single")&&(k.removeClass("single"),j.addClass("single")),j.removeClass("left").addClass("right"),k.removeClass("right").addClass("left"),this.singleDatePicker&&(j.show(),k.hide())}"undefined"!=typeof a.ranges||this.singleDatePicker||this.container.addClass("show-calendar"),this.autoHide?this.container.removeClass("opensleft opensright").addClass("opens"+this.opens):this.container.removeClass("opensleft opensright openscenter").addClass("open"),this.updateView(),this.updateCalendars();var l=this.container;$.each(this.buttonClasses,function(a,b){l.find("button").addClass(b)}),this.container.find(".daterangepicker_start_input label").html(this.locale.fromLabel),this.container.find(".daterangepicker_end_input label").html(this.locale.toLabel),this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel)},setStartDate:function(a){"string"==typeof a&&(this.startDate=moment(a,this.format).utcOffset(this.timeZone)),"object"==typeof a&&(this.startDate=moment(a)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.oldStartDate=this.startDate.clone(),this.updateView(),this.updateCalendars(),this.updateInputText()},setEndDate:function(a){"string"==typeof a&&(this.endDate=moment(a,this.format).utcOffset(this.timeZone)),"object"==typeof a&&(this.endDate=moment(a)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.oldEndDate=this.endDate.clone(),this.updateView(),this.updateCalendars(),this.updateInputText()},updateView:function(){this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute()),this.updateFormInputs()},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.format)),this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.format)),this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate)?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},updateFromControl:function(){if(this.element.is("input")&&this.element.val().length){var a=this.element.val().split(this.separator),b=null,c=null;2===a.length&&(b=moment(a[0],this.format).utcOffset(this.timeZone),c=moment(a[1],this.format).utcOffset(this.timeZone)),(this.singleDatePicker||null===b||null===c)&&(b=moment(this.element.val(),this.format).utcOffset(this.timeZone),c=b),c.isBefore(b)||(this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.startDate=b,this.endDate=c,this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.updateCalendars())}},keydown:function(a){(9===a.keyCode||13===a.keyCode)&&this.hide()},notify:function(){this.updateView(),this.updateInputText(),this.cb(this.startDate,this.endDate,this.chosenLabel)},move:function(){var a,b={top:0,left:0},c=$(window).width();this.parentEl.is("body")||(b={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},c=this.parentEl[0].clientWidth+this.parentEl.offset().left),a="up"==this.drops?this.element.offset().top-this.container.outerHeight()-b.top:this.element.offset().top+this.element.outerHeight()-b.top,this.container["up"==this.drops?"addClass":"removeClass"]("dropup"),"left"==this.opens?(this.container.css({top:a,right:c-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):"center"==this.opens?(this.container.css({top:a,left:this.element.offset().left-b.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:a,left:this.element.offset().left-b.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>$(window).width()&&this.container.css({left:"auto",right:0}))},toggle:function(){this.autoHide&&(this.element.hasClass("active")?this.hide():this.show())},show:function(){this.isShowing||(this.element.addClass("active"),this.container.show(),this.move(),this._outsideClickProxy=$.proxy(function(a){this.outsideClick(a)},this),$(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),this.isShowing=!0,this.element.trigger("show.daterangepicker",this))},outsideClick:function(a){var b=$(a.target);this.autoHide||"focusin"==a.type||b.closest(this.element).length||b.closest(this.container).length||b.closest(".calendar-date").length||this.hide()},hide:function(){this.isShowing&&($(document).off(".daterangepicker"),this.element.removeClass("active"),this.container.hide(),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.isShowing=!1,this.element.trigger("hide.daterangepicker",this))},enterRange:function(a){var b=a.target.innerHTML;if(b==this.locale.customRangeLabel)this.updateView();else{var c=this.ranges[b];this.container.find("input[name=daterangepicker_start]").val(c[0].format(this.format)),this.container.find("input[name=daterangepicker_end]").val(c[1].format(this.format))}},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},inputsChanged:function(a){var b=$(a.target),c=moment(b.val(),this.format);if(c.isValid()){var d,e;if("daterangepicker_start"===b.attr("name")){if(d=!1!==this.minDate&&c.isBefore(this.minDate)?this.minDate:c,e=this.endDate,"object"==typeof this.dateLimit){var f=moment(d).add(this.dateLimit).endOf("day");e.isAfter(f)&&(e=f)}}else if(d=this.startDate,e=!1!==this.maxDate&&c.isAfter(this.maxDate)?this.maxDate:c.endOf("day"),"object"==typeof this.dateLimit){var g=moment(e).subtract(this.dateLimit).startOf("day");d.isBefore(g)&&(d=g)}this.setCustomDates(d,e)}},inputsKeydown:function(a){13===a.keyCode&&(this.inputsChanged(a),this.notify())},updateInputText:function(){this.element.is("input")&&!this.singleDatePicker?(this.element.val(this.startDate.format(this.format)+this.separator+this.endDate.format(this.format)),this.element.trigger("change")):this.element.is("input")&&(this.element.val(this.endDate.format(this.format)),this.element.trigger("change"))},clickRange:function(a){var b=a.target.innerHTML;if(this.chosenLabel=b,b==this.locale.customRangeLabel)this.showCalendars();else{var c=this.ranges[b];this.startDate=c[0],this.endDate=c[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute()),this.updateCalendars(),this.updateInputText(),this.hideCalendars(),this.hide(),this.element.trigger("apply.daterangepicker",this),this.autoApply&&this.notify()}},clickPrev:function(a){var b=$(a.target).parents(".calendar");b.hasClass("left")?this.leftCalendar.month.subtract(1,"month"):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(a){var b=$(a.target).parents(".calendar");b.hasClass("left")?this.leftCalendar.month.add(1,"month"):this.rightCalendar.month.add(1,"month"),this.updateCalendars()},hoverDate:function(a){var b=$(a.target).attr("data-title"),c=b.substr(1,1),d=b.substr(3,1),e=$(a.target).parents(".calendar");e.hasClass("left")?this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[c][d].format(this.format)):this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[c][d].format(this.format))},setCustomDates:function(a,b){if(this.chosenLabel=this.locale.customRangeLabel,a.isAfter(b)){var c=this.endDate.diff(this.startDate);b=moment(a).add(c,"ms"),this.maxDate&&b.isAfter(this.maxDate)&&(b=this.maxDate.clone())}this.startDate=a,this.endDate=b,this.updateView(),this.updateCalendars(),this.autoApply&&(this.notify(),this.element.trigger("apply.daterangepicker",this))},clickDate:function(a){var b,c,d=$(a.target).attr("data-title"),e=d.substr(1,1),f=d.substr(3,1),g=$(a.target).parents(".calendar");if(g.hasClass("left")){if(b=this.leftCalendar.calendar[e][f],c=this.endDate,"object"==typeof this.dateLimit){var h=moment(b).add(this.dateLimit).endOf("day");c.isAfter(h)&&(c=h)}}else if(b=this.startDate,c=this.rightCalendar.calendar[e][f],"object"==typeof this.dateLimit){var i=moment(c).subtract(this.dateLimit).startOf("day");b.isBefore(i)&&(b=i)}this.singleDatePicker&&g.hasClass("left")?c=b.clone():this.singleDatePicker&&g.hasClass("right")&&(b=c.clone()),g.find("td").removeClass("active"),$(a.target).addClass("active"),this.setCustomDates(b,c),this.timePicker||c.endOf("day"),this.singleDatePicker&&!this.timePicker&&this.clickApply()},clickApply:function(){this.updateInputText(),this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.chosenLabel=this.oldChosenLabel,this.updateView(),this.updateCalendars(),this.hide(),this.element.trigger("cancel.daterangepicker",this)},updateMonthYear:function(a){var b=$(a.target).closest(".calendar").hasClass("left"),c=b?"left":"right",d=this.container.find(".calendar."+c),e=parseInt(d.find(".monthselect").val(),10),f=d.find(".yearselect").val();b||this.singleDatePicker||(f<this.startDate.year()||f==this.startDate.year()&&e<this.startDate.month())&&(e=this.startDate.month(),f=this.startDate.year()),this.minDate&&(f<this.minDate.year()||f==this.minDate.year()&&e<this.minDate.month())&&(e=this.minDate.month(),f=this.minDate.year()),this.maxDate&&(f>this.maxDate.year()||f==this.maxDate.year()&&e>this.maxDate.month())&&(e=this.maxDate.month(),f=this.maxDate.year()),this[c+"Calendar"].month.month(e).year(f),this.updateCalendars()},updateTime:function(a){var b=$(a.target).closest(".calendar"),c=b.hasClass("left"),d=parseInt(b.find(".hourselect").val(),10),e=parseInt(b.find(".minuteselect").val(),10),f=0;if(this.timePickerSeconds&&(f=parseInt(b.find(".secondselect").val(),10)),this.timePicker12Hour){var g=b.find(".ampmselect").val();"PM"===g&&12>d&&(d+=12),"AM"===g&&12===d&&(d=0)}if(c){var h=this.startDate.clone();h.hour(d),h.minute(e),h.second(f),this.startDate=h,this.leftCalendar.month.hour(d).minute(e).second(f),this.singleDatePicker&&(this.endDate=h.clone())}else{var i=this.endDate.clone();i.hour(d),i.minute(e),i.second(f),this.endDate=i,this.singleDatePicker&&(this.startDate=i.clone()),this.rightCalendar.month.hour(d).minute(e).second(f)}this.updateView(),this.updateCalendars(),this.autoApply&&(this.notify(),this.element.trigger("apply.daterangepicker",this))},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.month(),this.leftCalendar.month.year(),this.leftCalendar.month.hour(),this.leftCalendar.month.minute(),this.leftCalendar.month.second(),"left"),this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.month(),this.rightCalendar.month.year(),this.rightCalendar.month.hour(),this.rightCalendar.month.minute(),this.rightCalendar.month.second(),"right"),this.container.find(".calendar.left").empty().html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate,"left")),this.container.find(".calendar.right").empty().html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.singleDatePicker?this.minDate:this.startDate,this.maxDate,"right")),this.container.find(".ranges li").removeClass("active");var a=!0,b=0;for(var c in this.ranges)this.timePicker?this.startDate.isSame(this.ranges[c][0])&&this.endDate.isSame(this.ranges[c][1])&&(a=!1,this.chosenLabel=this.container.find(".ranges li:eq("+b+")").addClass("active").html()):this.startDate.format("YYYY-MM-DD")==this.ranges[c][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[c][1].format("YYYY-MM-DD")&&(a=!1,this.chosenLabel=this.container.find(".ranges li:eq("+b+")").addClass("active").html()),b++;a&&(this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html(),this.showCalendars())},buildCalendar:function(a,b,c,d,e,f){var g,h=moment([b,a]).daysInMonth(),i=moment([b,a,1]),j=moment([b,a,h]),k=moment(i).subtract(1,"month").month(),l=moment(i).subtract(1,"month").year(),m=moment([l,k]).daysInMonth(),n=i.day(),o=[];for(o.firstDay=i,o.lastDay=j,g=0;6>g;g++)o[g]=[];var p=m-n+this.locale.firstDay+1;p>m&&(p-=7),n==this.locale.firstDay&&(p=m-6);var q,r,s=moment([l,k,p,12,d,e]);for(g=0,q=0,r=0;42>g;g++,q++,s=moment(s).add(24,"hour"))g>0&&q%7===0&&(q=0,r++),o[r][q]=s.clone().hour(c),s.hour(12),this.minDate&&o[r][q].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&o[r][q].isBefore(this.minDate)&&"left"==f&&(o[r][q]=this.minDate.clone()),this.maxDate&&o[r][q].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&o[r][q].isAfter(this.maxDate)&&"right"==f&&(o[r][q]=this.maxDate.clone());return o},renderDropdowns:function(a,b,c){for(var d=a.month(),e=a.year(),f=c&&c.year()||e+5,g=b&&b.year()||e-50,h='<select class="monthselect">',i=e==g,j=e==f,k=0;12>k;k++)(!i||k>=b.month())&&(!j||k<=c.month())&&(h+="<option value='"+k+"'"+(k===d?" selected='selected'":"")+">"+this.locale.monthNames[k]+"</option>");h+="</select>";for(var l='<select class="yearselect">',m=g;f>=m;m++)l+='<option value="'+m+'"'+(m===e?' selected="selected"':"")+">"+m+"</option>";return l+="</select>",h+l},renderCalendar:function(a,b,c,d,e){var f='<div class="calendar-date">';f+='<table class="table-condensed">',f+="<thead>",f+="<tr>",this.showWeekNumbers&&(f+="<th></th>"),f+=!c||c.isBefore(a.firstDay)?'<th class="prev available"><i class="fa fa-arrow-left icon icon-arrow-left glyphicon glyphicon-arrow-left"></i></th>':"<th></th>";var g=this.locale.monthNames[a[1][1].month()]+a[1][1].format(" YYYY");this.showDropdowns&&(g=this.renderDropdowns(a[1][1],c,d)),f+='<th colspan="5" class="month">'+g+"</th>",f+=!d||d.isAfter(a.lastDay)?'<th class="next available"><i class="fa fa-arrow-right icon icon-arrow-right glyphicon glyphicon-arrow-right"></i></th>':"<th></th>",f+="</tr>",f+="<tr>",this.showWeekNumbers&&(f+='<th class="week">'+this.locale.weekLabel+"</th>"),$.each(this.locale.daysOfWeek,function(a,b){f+="<th>"+b+"</th>"}),f+="</tr>",f+="</thead>",f+="<tbody>";for(var h=0;6>h;h++){f+="<tr>",this.showWeekNumbers&&(f+='<td class="week">'+a[h][0].week()+"</td>");for(var i=0;7>i;i++){var j="available ";j+=a[h][i].month()==a[1][1].month()?"":"off",a[h][i].isSame(new Date,"day")&&(j+=" today "),c&&a[h][i].isBefore(c,"day")||d&&a[h][i].isAfter(d,"day")?j=" off disabled ":a[h][i].format("YYYY-MM-DD")==b.format("YYYY-MM-DD")?(j+=" active ",a[h][i].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&(j+=" start-date "),a[h][i].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&(j+=" end-date ")):a[h][i]>=this.startDate&&a[h][i]<=this.endDate&&(j+=" in-range ",a[h][i].isSame(this.startDate)&&(j+=" start-date "),a[h][i].isSame(this.endDate)&&(j+=" end-date "));var k="r"+h+"c"+i;f+='<td class="'+j.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" data-title="'+k+'">'+a[h][i].date()+"</td>"}f+="</tr>"}f+="</tbody>",f+="</table>",f+="</div>";var l;if(this.timePicker){f+='<div class="calendar-time">',f+='<select class="hourselect">';var m=0,n=23;c&&("left"==e||this.singleDatePicker)&&b.format("YYYY-MM-DD")==c.format("YYYY-MM-DD")&&(m=c.hour(),b.hour()<m&&b.hour(m),this.timePicker12Hour&&m>=12&&b.hour()>=12&&(m-=12),this.timePicker12Hour&&12==m&&(m=1)),d&&("right"==e||this.singleDatePicker)&&b.format("YYYY-MM-DD")==d.format("YYYY-MM-DD")&&(n=d.hour(),b.hour()>n&&b.hour(n),this.timePicker12Hour&&n>=12&&b.hour()>=12&&(n-=12));var o=0,p=23,q=b.hour();for(this.timePicker12Hour&&(o=1,p=12,q>=12&&(q-=12),0===q&&(q=12)),l=o;p>=l;l++)f+=l==q?'<option value="'+l+'" selected="selected">'+l+"</option>":m>l||l>n?'<option value="'+l+'" disabled="disabled" class="disabled">'+l+"</option>":'<option value="'+l+'">'+l+"</option>";f+="</select> : ",f+='<select class="minuteselect">';var r=0,s=59;for(c&&("left"==e||this.singleDatePicker)&&b.format("YYYY-MM-DD h A")==c.format("YYYY-MM-DD h A")&&(r=c.minute(),b.minute()<r&&b.minute(r)),d&&("right"==e||this.singleDatePicker)&&b.format("YYYY-MM-DD h A")==d.format("YYYY-MM-DD h A")&&(s=d.minute(),b.minute()>s&&b.minute(s)),l=0;60>l;l+=this.timePickerIncrement){var t=l;10>t&&(t="0"+t),f+=l==b.minute()?'<option value="'+l+'" selected="selected">'+t+"</option>":r>l||l>s?'<option value="'+l+'" disabled="disabled" class="disabled">'+t+"</option>":'<option value="'+l+'">'+t+"</option>"}if(f+="</select> ",this.timePickerSeconds){for(f+=': <select class="secondselect">',l=0;60>l;l+=this.timePickerIncrement){var t=l;10>t&&(t="0"+t),f+=l==b.second()?'<option value="'+l+'" selected="selected">'+t+"</option>":'<option value="'+l+'">'+t+"</option>"}f+="</select>"}if(this.timePicker12Hour){f+='<select class="ampmselect">';var u="",v="";c&&("left"==e||this.singleDatePicker)&&b.format("YYYY-MM-DD")==c.format("YYYY-MM-DD")&&c.hour()>=12&&(u=' disabled="disabled" class="disabled"'),d&&("right"==e||this.singleDatePicker)&&b.format("YYYY-MM-DD")==d.format("YYYY-MM-DD")&&d.hour()<12&&(v=' disabled="disabled" class="disabled"'),f+=b.hour()>=12?'<option value="AM"'+u+'>AM</option><option value="PM" selected="selected"'+v+">PM</option>":'<option value="AM" selected="selected"'+u+'>AM</option><option value="PM"'+v+">PM</option>",f+="</select>"}f+="</div>"}return f},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData("daterangepicker")}},$.fn.daterangepicker=function(a,b){return this.each(function(){var c=$(this);c.data("daterangepicker")&&c.data("daterangepicker").remove(),c.data("daterangepicker",new DateRangePicker(c,a,b))}),this},function(a){var b=function(b){function c(){!E.find("#BS_scroll").length>0&&(F.style.position="relative",F.style.overflow="hidden",E.append(b.setStyle?['<div style="display:none;top:0;position: absolute;" id="BS_scroll"  >','<em style="min-height: 15px;display:inline-block;" id="BS_scroll_main"></em>',"</div>"].join(""):['<div style="display:none;top:0;position: absolute;right: 1px;width: 11px;" id="BS_scroll"  >','<em style="height:0;background-image: url('+A+'/webim_scroll_bg.png);background-position: -9px 0;background-repeat: repeat-y;width: 11px;min-height: 5px;border-radius: 4px;display:inline-block;" id="BS_scroll_main"></em>',"</div>"].join(""))),s=E.find("#BS_scroll")[0],s.style.zIndex=1e3,t=E.find("#BS_scroll_main")[0],o(F),n(F),d()}function d(){if(containerClientHeight=F.clientHeight,C&&0==containerClientHeight&&(containerClientHeight=F.offsetHeight),containerScrollHeight=E.find("ul").height(),u=containerClientHeight<containerScrollHeight){var a=containerClientHeight/containerScrollHeight,b=parseInt(containerClientHeight*a>D?containerClientHeight*a:D);t.style.height=b-7+"px",x=containerClientHeight-b,w=containerScrollHeight-containerClientHeight;var c=F.scrollTop/w;c>1&&(c=1),0>c&&(c=0),m(c),f()}}function e(){s.style.display="none"}function f(){s.style.display=""}function g(a){H||(H=!0,a=a||widow.event,y=a.clientY,r(a))}function h(a){if(H){a=a||window.event;var b=a.clientY;v=(b-y)/x+G,v>1&&(v=1),0>v&&(v=0),m(v),r(a)}}function i(){H&&(H=!1,G=v)}function j(b){{var b=b||window.event;b.srcElement||b.target}z&&clearTimeout(z),!u||(z=setTimeout(function(){f(),p(document,"mousemove",h),a(document).on("selectstart.sortable",function(){return!1})},300))}function k(){z&&clearTimeout(z),z=setTimeout(function(){e(),q(document,"mousemove",h),a(document).off("selectstart.sortable")},500)}function l(a){if(u){var b=B?a.detail:-a.wheelDelta/40;G=(F.scrollTop+16*b)/w,G>1&&(G=1,d()),0>G&&(G=0),m(G),r(a)}}function m(a){F.scrollTop=a*w,s.style.top=a*x+F.scrollTop+"px",v=a}function n(){p(F,B?"DOMMouseScroll":"mousewheel",l),p(t,"mousedown",g),p(document,"mouseup",i),p(F,"mouseover",j),p(F,"mouseout",k)}function o(){q(F,B?"DOMMouseScroll":"mousewheel",l),q(t,"mousedown",g),q(document,"mouseup",i),q(F,"mouseover",j),q(F,"mouseout",k)}function p(a,b,c){return window.addEventListener?a.addEventListener(b,c,!1):window.attachEvent?a.attachEvent("on"+b,c):{}}function q(a,b,c){return window.addEventListener?a.removeEventListener(b,c,!1):window.detachEvent?a.detachEvent("on"+b,c):{}}function r(a){a.preventDefault?a.preventDefault():a.returnValue=!1}var s,t,u,v,w,x,y,z,A=b.imgUrl||"",B=(b.setStyle,navigator.userAgent.toLowerCase().match(/firefox\/([\d.]+)/)),C=!window.XMLHttpRequest&&window.ActiveXObject,D=20,E=this,F=this[0],G=0,H=!1;c()};a.fn.extend({scrollable:b})}(jQuery),function(a,b){function c(a){return""===f?a:(a=a.charAt(0).toUpperCase()+a.substr(1),f+a)}var d=Math,e=b.createElement("div").style,f=function(){for(var a,b="t,webkitT,MozT,msT,OT".split(","),c=0,d=b.length;d>c;c++)if(a=b[c]+"ransform",a in e)return b[c].substr(0,b[c].length-1);return!1}(),g=f?"-"+f.toLowerCase()+"-":"",h=c("transform"),i=c("transitionProperty"),j=c("transitionDuration"),k=c("transformOrigin"),l=c("transitionTimingFunction"),m=c("transitionDelay"),n=/android/gi.test(navigator.appVersion),o=/iphone|ipad/gi.test(navigator.appVersion),p=/hp-tablet/gi.test(navigator.appVersion),q=c("perspective")in e,r="ontouchstart"in a&&!p,s=f!==!1,t=c("transition")in e,u="onorientationchange"in a?"orientationchange":"resize",v=r?"touchstart":"mousedown",w=r?"touchmove":"mousemove",x=r?"touchend":"mouseup",y=r?"touchcancel":"mouseup",z=function(){if(f===!1)return!1;var a={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return a[f]}(),A=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(a){return setTimeout(a,1)}}(),B=function(){return a.cancelRequestAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||clearTimeout}(),C=q?" translateZ(0)":"",D=function(c,d){var e,f=this;f.wrapper="object"==typeof c?c:b.getElementById(c),f.wrapper.style.overflow="hidden",f.scroller=f.wrapper.children[0],f.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:n,hideScrollbar:o,fadeScrollbar:o&&q,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(e in d)f.options[e]=d[e];f.x=f.options.x,f.y=f.options.y,f.options.useTransform=s&&f.options.useTransform,f.options.hScrollbar=f.options.hScroll&&f.options.hScrollbar,f.options.vScrollbar=f.options.vScroll&&f.options.vScrollbar,f.options.zoom=f.options.useTransform&&f.options.zoom,f.options.useTransition=t&&f.options.useTransition,f.options.zoom&&n&&(C=""),f.scroller.style[i]=f.options.useTransform?g+"transform":"top left",f.scroller.style[j]="0",f.scroller.style[k]="0 0",f.options.useTransition&&(f.scroller.style[l]="cubic-bezier(0.33,0.66,0.66,1)"),f.options.useTransform?f.scroller.style[h]="translate("+f.x+"px,"+f.y+"px)"+C:f.scroller.style.cssText+=";position:absolute;top:"+f.y+"px;left:"+f.x+"px",f.options.useTransition&&(f.options.fixedScrollbar=!0),f.refresh(),f._bind(u,a),f._bind(v),r||"none"!=f.options.wheelAction&&(f._bind("DOMMouseScroll"),f._bind("mousewheel")),f.options.checkDOMChanges&&(f.checkDOMTime=setInterval(function(){f._checkDOMChanges()},500))};D.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(a){var b=this;switch(a.type){case v:if(!r&&0!==a.button)return;b._start(a);break;case w:b._move(a);break;case x:case y:b._end(a);break;case u:b._resize();break;case"DOMMouseScroll":case"mousewheel":b._wheel(a);break;case z:b._transitionEnd(a)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(a){var c,e=this;return e[a+"Scrollbar"]?(e[a+"ScrollbarWrapper"]||(c=b.createElement("div"),e.options.scrollbarClass?c.className=e.options.scrollbarClass+a.toUpperCase():c.style.cssText="position:absolute;z-index:100;"+("h"==a?"height:7px;bottom:1px;left:2px;right:"+(e.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(e.hScrollbar?"7":"2")+"px;top:2px;right:1px"),c.style.cssText+=";pointer-events:none;"+g+"transition-property:opacity;"+g+"transition-duration:"+(e.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(e.options.hideScrollbar?"0":"1"),e.wrapper.appendChild(c),e[a+"ScrollbarWrapper"]=c,c=b.createElement("div"),e.options.scrollbarClass||(c.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+g+"background-clip:padding-box;"+g+"box-sizing:border-box;"+("h"==a?"height:100%":"width:100%")+";"+g+"border-radius:3px;border-radius:3px"),c.style.cssText+=";pointer-events:none;"+g+"transition-property:"+g+"transform;"+g+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+g+"transition-duration:0;"+g+"transform: translate(0,0)"+C,e.options.useTransition&&(c.style.cssText+=";"+g+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),e[a+"ScrollbarWrapper"].appendChild(c),e[a+"ScrollbarIndicator"]=c),"h"==a?(e.hScrollbarSize=e.hScrollbarWrapper.clientWidth,e.hScrollbarIndicatorSize=d.max(d.round(e.hScrollbarSize*e.hScrollbarSize/e.scrollerW),8),e.hScrollbarIndicator.style.width=e.hScrollbarIndicatorSize+"px",e.hScrollbarMaxScroll=e.hScrollbarSize-e.hScrollbarIndicatorSize,e.hScrollbarProp=e.hScrollbarMaxScroll/e.maxScrollX):(e.vScrollbarSize=e.vScrollbarWrapper.clientHeight,e.vScrollbarIndicatorSize=d.max(d.round(e.vScrollbarSize*e.vScrollbarSize/e.scrollerH),8),e.vScrollbarIndicator.style.height=e.vScrollbarIndicatorSize+"px",e.vScrollbarMaxScroll=e.vScrollbarSize-e.vScrollbarIndicatorSize,e.vScrollbarProp=e.vScrollbarMaxScroll/e.maxScrollY),void e._scrollbarPos(a,!0)):void(e[a+"ScrollbarWrapper"]&&(s&&(e[a+"ScrollbarIndicator"].style[h]=""),e[a+"ScrollbarWrapper"].parentNode.removeChild(e[a+"ScrollbarWrapper"]),e[a+"ScrollbarWrapper"]=null,e[a+"ScrollbarIndicator"]=null))},_resize:function(){var a=this;setTimeout(function(){a.refresh()},n?200:0)},_pos:function(a,b){this.zoomed||(a=this.hScroll?a:0,b=this.vScroll?b:0,this.options.useTransform?this.scroller.style[h]="translate("+a+"px,"+b+"px) scale("+this.scale+")"+C:(a=d.round(a),b=d.round(b),this.scroller.style.left=a+"px",this.scroller.style.top=b+"px"),this.x=a,this.y=b,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(a,b){var c,e=this,f="h"==a?e.x:e.y;e[a+"Scrollbar"]&&(f=e[a+"ScrollbarProp"]*f,0>f?(e.options.fixedScrollbar||(c=e[a+"ScrollbarIndicatorSize"]+d.round(3*f),8>c&&(c=8),e[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=c+"px"),f=0):f>e[a+"ScrollbarMaxScroll"]&&(e.options.fixedScrollbar?f=e[a+"ScrollbarMaxScroll"]:(c=e[a+"ScrollbarIndicatorSize"]-d.round(3*(f-e[a+"ScrollbarMaxScroll"])),8>c&&(c=8),e[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=c+"px",f=e[a+"ScrollbarMaxScroll"]+(e[a+"ScrollbarIndicatorSize"]-c))),e[a+"ScrollbarWrapper"].style[m]="0",e[a+"ScrollbarWrapper"].style.opacity=b&&e.options.hideScrollbar?"0":"1",e[a+"ScrollbarIndicator"].style[h]="translate("+("h"==a?f+"px,0)":"0,"+f+"px)")+C)},_start:function(b){var c,e,f,g,i,j=this,k=r?b.touches[0]:b;j.enabled&&(j.options.onBeforeScrollStart&&j.options.onBeforeScrollStart.call(j,b),(j.options.useTransition||j.options.zoom)&&j._transitionTime(0),j.moved=!1,j.animating=!1,j.zoomed=!1,j.distX=0,j.distY=0,j.absDistX=0,j.absDistY=0,j.dirX=0,j.dirY=0,j.options.zoom&&r&&b.touches.length>1&&(g=d.abs(b.touches[0].pageX-b.touches[1].pageX),i=d.abs(b.touches[0].pageY-b.touches[1].pageY),j.touchesDistStart=d.sqrt(g*g+i*i),j.originX=d.abs(b.touches[0].pageX+b.touches[1].pageX-2*j.wrapperOffsetLeft)/2-j.x,j.originY=d.abs(b.touches[0].pageY+b.touches[1].pageY-2*j.wrapperOffsetTop)/2-j.y,j.options.onZoomStart&&j.options.onZoomStart.call(j,b)),j.options.momentum&&(j.options.useTransform?(c=getComputedStyle(j.scroller,null)[h].replace(/[^0-9\-.,]/g,"").split(","),e=+(c[12]||c[4]),f=+(c[13]||c[5])):(e=+getComputedStyle(j.scroller,null).left.replace(/[^0-9-]/g,""),f=+getComputedStyle(j.scroller,null).top.replace(/[^0-9-]/g,"")),(e!=j.x||f!=j.y)&&(j.options.useTransition?j._unbind(z):B(j.aniTime),j.steps=[],j._pos(e,f),j.options.onScrollEnd&&j.options.onScrollEnd.call(j))),j.absStartX=j.x,j.absStartY=j.y,j.startX=j.x,j.startY=j.y,j.pointX=k.pageX,j.pointY=k.pageY,j.startTime=b.timeStamp||Date.now(),j.options.onScrollStart&&j.options.onScrollStart.call(j,b),j._bind(w,a),j._bind(x,a),j._bind(y,a))
},_move:function(a){var b,c,e,f=this,g=r?a.touches[0]:a,i=g.pageX-f.pointX,j=g.pageY-f.pointY,k=f.x+i,l=f.y+j,m=a.timeStamp||Date.now();return f.options.onBeforeScrollMove&&f.options.onBeforeScrollMove.call(f,a),f.options.zoom&&r&&a.touches.length>1?(b=d.abs(a.touches[0].pageX-a.touches[1].pageX),c=d.abs(a.touches[0].pageY-a.touches[1].pageY),f.touchesDist=d.sqrt(b*b+c*c),f.zoomed=!0,e=1/f.touchesDistStart*f.touchesDist*this.scale,e<f.options.zoomMin?e=.5*f.options.zoomMin*Math.pow(2,e/f.options.zoomMin):e>f.options.zoomMax&&(e=2*f.options.zoomMax*Math.pow(.5,f.options.zoomMax/e)),f.lastScale=e/this.scale,k=this.originX-this.originX*f.lastScale+this.x,l=this.originY-this.originY*f.lastScale+this.y,this.scroller.style[h]="translate("+k+"px,"+l+"px) scale("+e+")"+C,void(f.options.onZoom&&f.options.onZoom.call(f,a))):(f.pointX=g.pageX,f.pointY=g.pageY,(k>0||k<f.maxScrollX)&&(k=f.options.bounce?f.x+i/2:k>=0||f.maxScrollX>=0?0:f.maxScrollX),(l>f.minScrollY||l<f.maxScrollY)&&(l=f.options.bounce?f.y+j/2:l>=f.minScrollY||f.maxScrollY>=0?f.minScrollY:f.maxScrollY),f.distX+=i,f.distY+=j,f.absDistX=d.abs(f.distX),f.absDistY=d.abs(f.distY),void(f.absDistX<6&&f.absDistY<6||(f.options.lockDirection&&(f.absDistX>f.absDistY+5?(l=f.y,j=0):f.absDistY>f.absDistX+5&&(k=f.x,i=0)),f.moved=!0,f._pos(k,l),f.dirX=i>0?-1:0>i?1:0,f.dirY=j>0?-1:0>j?1:0,m-f.startTime>300&&(f.startTime=m,f.startX=f.x,f.startY=f.y),f.options.onScrollMove&&f.options.onScrollMove.call(f,a))))},_end:function(c){if(!r||0===c.touches.length){var e,f,g,i,k,l,m,n=this,o=r?c.changedTouches[0]:c,p={dist:0,time:0},q={dist:0,time:0},s=(c.timeStamp||Date.now())-n.startTime,t=n.x,u=n.y;if(n._unbind(w,a),n._unbind(x,a),n._unbind(y,a),n.options.onBeforeScrollEnd&&n.options.onBeforeScrollEnd.call(n,c),n.zoomed)return m=n.scale*n.lastScale,m=Math.max(n.options.zoomMin,m),m=Math.min(n.options.zoomMax,m),n.lastScale=m/n.scale,n.scale=m,n.x=n.originX-n.originX*n.lastScale+n.x,n.y=n.originY-n.originY*n.lastScale+n.y,n.scroller.style[j]="200ms",n.scroller.style[h]="translate("+n.x+"px,"+n.y+"px) scale("+n.scale+")"+C,n.zoomed=!1,n.refresh(),void(n.options.onZoomEnd&&n.options.onZoomEnd.call(n,c));if(!n.moved)return r&&(n.doubleTapTimer&&n.options.zoom?(clearTimeout(n.doubleTapTimer),n.doubleTapTimer=null,n.options.onZoomStart&&n.options.onZoomStart.call(n,c),n.zoom(n.pointX,n.pointY,1==n.scale?n.options.doubleTapZoom:1),n.options.onZoomEnd&&setTimeout(function(){n.options.onZoomEnd.call(n,c)},200)):this.options.handleClick&&(n.doubleTapTimer=setTimeout(function(){for(n.doubleTapTimer=null,e=o.target;1!=e.nodeType;)e=e.parentNode;"SELECT"!=e.tagName&&"INPUT"!=e.tagName&&"TEXTAREA"!=e.tagName&&(f=b.createEvent("MouseEvents"),f.initMouseEvent("click",!0,!0,c.view,1,o.screenX,o.screenY,o.clientX,o.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,0,null),f._fake=!0,e.dispatchEvent(f))},n.options.zoom?250:0))),n._resetPos(400),void(n.options.onTouchEnd&&n.options.onTouchEnd.call(n,c));if(300>s&&n.options.momentum&&(p=t?n._momentum(t-n.startX,s,-n.x,n.scrollerW-n.wrapperW+n.x,n.options.bounce?n.wrapperW:0):p,q=u?n._momentum(u-n.startY,s,-n.y,n.maxScrollY<0?n.scrollerH-n.wrapperH+n.y-n.minScrollY:0,n.options.bounce?n.wrapperH:0):q,t=n.x+p.dist,u=n.y+q.dist,(n.x>0&&t>0||n.x<n.maxScrollX&&t<n.maxScrollX)&&(p={dist:0,time:0}),(n.y>n.minScrollY&&u>n.minScrollY||n.y<n.maxScrollY&&u<n.maxScrollY)&&(q={dist:0,time:0})),p.dist||q.dist)return k=d.max(d.max(p.time,q.time),10),n.options.snap&&(g=t-n.absStartX,i=u-n.absStartY,d.abs(g)<n.options.snapThreshold&&d.abs(i)<n.options.snapThreshold?n.scrollTo(n.absStartX,n.absStartY,200):(l=n._snap(t,u),t=l.x,u=l.y,k=d.max(l.time,k))),n.scrollTo(d.round(t),d.round(u),k),void(n.options.onTouchEnd&&n.options.onTouchEnd.call(n,c));if(n.options.snap)return g=t-n.absStartX,i=u-n.absStartY,d.abs(g)<n.options.snapThreshold&&d.abs(i)<n.options.snapThreshold?n.scrollTo(n.absStartX,n.absStartY,200):(l=n._snap(n.x,n.y),(l.x!=n.x||l.y!=n.y)&&n.scrollTo(l.x,l.y,l.time)),void(n.options.onTouchEnd&&n.options.onTouchEnd.call(n,c));n._resetPos(200),n.options.onTouchEnd&&n.options.onTouchEnd.call(n,c)}},_resetPos:function(a){var b=this,c=b.x>=0?0:b.x<b.maxScrollX?b.maxScrollX:b.x,d=b.y>=b.minScrollY||b.maxScrollY>0?b.minScrollY:b.y<b.maxScrollY?b.maxScrollY:b.y;return c==b.x&&d==b.y?(b.moved&&(b.moved=!1,b.options.onScrollEnd&&b.options.onScrollEnd.call(b)),b.hScrollbar&&b.options.hideScrollbar&&("webkit"==f&&(b.hScrollbarWrapper.style[m]="300ms"),b.hScrollbarWrapper.style.opacity="0"),void(b.vScrollbar&&b.options.hideScrollbar&&("webkit"==f&&(b.vScrollbarWrapper.style[m]="300ms"),b.vScrollbarWrapper.style.opacity="0"))):void b.scrollTo(c,d,a||0)},_wheel:function(a){var b,c,d,e,f,g=this;if("wheelDeltaX"in a)b=a.wheelDeltaX/12,c=a.wheelDeltaY/12;else if("wheelDelta"in a)b=c=a.wheelDelta/12;else{if(!("detail"in a))return;b=c=3*-a.detail}return"zoom"==g.options.wheelAction?(f=g.scale*Math.pow(2,1/3*(c?c/Math.abs(c):0)),f<g.options.zoomMin&&(f=g.options.zoomMin),f>g.options.zoomMax&&(f=g.options.zoomMax),void(f!=g.scale&&(!g.wheelZoomCount&&g.options.onZoomStart&&g.options.onZoomStart.call(g,a),g.wheelZoomCount++,g.zoom(a.pageX,a.pageY,f,400),setTimeout(function(){g.wheelZoomCount--,!g.wheelZoomCount&&g.options.onZoomEnd&&g.options.onZoomEnd.call(g,a)},400)))):(d=g.x+b,e=g.y+c,d>0?d=0:d<g.maxScrollX&&(d=g.maxScrollX),e>g.minScrollY?e=g.minScrollY:e<g.maxScrollY&&(e=g.maxScrollY),void(g.maxScrollY<0&&g.scrollTo(d,e,0)))},_transitionEnd:function(a){var b=this;a.target==b.scroller&&(b._unbind(z),b._startAni())},_startAni:function(){var a,b,c,e=this,f=e.x,g=e.y,h=Date.now();if(!e.animating){if(!e.steps.length)return void e._resetPos(400);if(a=e.steps.shift(),a.x==f&&a.y==g&&(a.time=0),e.animating=!0,e.moved=!0,e.options.useTransition)return e._transitionTime(a.time),e._pos(a.x,a.y),e.animating=!1,void(a.time?e._bind(z):e._resetPos(0));c=function(){var i,j,k=Date.now();return k>=h+a.time?(e._pos(a.x,a.y),e.animating=!1,e.options.onAnimationEnd&&e.options.onAnimationEnd.call(e),void e._startAni()):(k=(k-h)/a.time-1,b=d.sqrt(1-k*k),i=(a.x-f)*b+f,j=(a.y-g)*b+g,e._pos(i,j),void(e.animating&&(e.aniTime=A(c))))},c()}},_transitionTime:function(a){a+="ms",this.scroller.style[j]=a,this.hScrollbar&&(this.hScrollbarIndicator.style[j]=a),this.vScrollbar&&(this.vScrollbarIndicator.style[j]=a)},_momentum:function(a,b,c,e,f){var g=6e-4,h=d.abs(a)/b,i=h*h/(2*g),j=0,k=0;return a>0&&i>c?(k=f/(6/(i/h*g)),c+=k,h=h*c/i,i=c):0>a&&i>e&&(k=f/(6/(i/h*g)),e+=k,h=h*e/i,i=e),i*=0>a?-1:1,j=h/g,{dist:i,time:d.round(j)}},_offset:function(a){for(var b=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;return a!=this.wrapper&&(b*=this.scale,c*=this.scale),{left:b,top:c}},_snap:function(a,b){var c,e,f,g,h,i,j=this;for(f=j.pagesX.length-1,c=0,e=j.pagesX.length;e>c;c++)if(a>=j.pagesX[c]){f=c;break}for(f==j.currPageX&&f>0&&j.dirX<0&&f--,a=j.pagesX[f],h=d.abs(a-j.pagesX[j.currPageX]),h=h?d.abs(j.x-a)/h*500:0,j.currPageX=f,f=j.pagesY.length-1,c=0;f>c;c++)if(b>=j.pagesY[c]){f=c;break}return f==j.currPageY&&f>0&&j.dirY<0&&f--,b=j.pagesY[f],i=d.abs(b-j.pagesY[j.currPageY]),i=i?d.abs(j.y-b)/i*500:0,j.currPageY=f,g=d.round(d.max(h,i))||200,{x:a,y:b,time:g}},_bind:function(a,b,c){(b||this.scroller).addEventListener(a,this,!!c)},_unbind:function(a,b,c){(b||this.scroller).removeEventListener(a,this,!!c)},destroy:function(){var b=this;b.scroller.style[h]="",b.hScrollbar=!1,b.vScrollbar=!1,b._scrollbar("h"),b._scrollbar("v"),b._unbind(u,a),b._unbind(v),b._unbind(w,a),b._unbind(x,a),b._unbind(y,a),b.options.hasTouch||(b._unbind("DOMMouseScroll"),b._unbind("mousewheel")),b.options.useTransition&&b._unbind(z),b.options.checkDOMChanges&&clearInterval(b.checkDOMTime),b.options.onDestroy&&b.options.onDestroy.call(b)},refresh:function(){var a,b,c,e,f=this,g=0,h=0;if(f.scale<f.options.zoomMin&&(f.scale=f.options.zoomMin),f.wrapperW=f.wrapper.clientWidth||1,f.wrapperH=f.wrapper.clientHeight||1,f.minScrollY=-f.options.topOffset||0,f.scrollerW=d.round(f.scroller.offsetWidth*f.scale),f.scrollerH=d.round((f.scroller.offsetHeight+f.minScrollY)*f.scale),f.maxScrollX=f.wrapperW-f.scrollerW,f.maxScrollY=f.wrapperH-f.scrollerH+f.minScrollY,f.dirX=0,f.dirY=0,f.options.onRefresh&&f.options.onRefresh.call(f),f.hScroll=f.options.hScroll&&f.maxScrollX<0,f.vScroll=f.options.vScroll&&(!f.options.bounceLock&&!f.hScroll||f.scrollerH>f.wrapperH),f.hScrollbar=f.hScroll&&f.options.hScrollbar,f.vScrollbar=f.vScroll&&f.options.vScrollbar&&f.scrollerH>f.wrapperH,a=f._offset(f.wrapper),f.wrapperOffsetLeft=-a.left,f.wrapperOffsetTop=-a.top,"string"==typeof f.options.snap)for(f.pagesX=[],f.pagesY=[],e=f.scroller.querySelectorAll(f.options.snap),b=0,c=e.length;c>b;b++)g=f._offset(e[b]),g.left+=f.wrapperOffsetLeft,g.top+=f.wrapperOffsetTop,f.pagesX[b]=g.left<f.maxScrollX?f.maxScrollX:g.left*f.scale,f.pagesY[b]=g.top<f.maxScrollY?f.maxScrollY:g.top*f.scale;else if(f.options.snap){for(f.pagesX=[];g>=f.maxScrollX;)f.pagesX[h]=g,g-=f.wrapperW,h++;for(f.maxScrollX%f.wrapperW&&(f.pagesX[f.pagesX.length]=f.maxScrollX-f.pagesX[f.pagesX.length-1]+f.pagesX[f.pagesX.length-1]),g=0,h=0,f.pagesY=[];g>=f.maxScrollY;)f.pagesY[h]=g,g-=f.wrapperH,h++;f.maxScrollY%f.wrapperH&&(f.pagesY[f.pagesY.length]=f.maxScrollY-f.pagesY[f.pagesY.length-1]+f.pagesY[f.pagesY.length-1])}f._scrollbar("h"),f._scrollbar("v"),f.zoomed||(f.scroller.style[j]="0",f._resetPos(400))},scrollTo:function(a,b,c,d){var e,f,g=this,h=a;for(g.stop(),h.length||(h=[{x:a,y:b,time:c,relative:d}]),e=0,f=h.length;f>e;e++)h[e].relative&&(h[e].x=g.x-h[e].x,h[e].y=g.y-h[e].y),g.steps.push({x:h[e].x,y:h[e].y,time:h[e].time||0});g._startAni()},scrollToElement:function(a,b){var c,e=this;a=a.nodeType?a:e.scroller.querySelector(a),a&&(c=e._offset(a),c.left+=e.wrapperOffsetLeft,c.top+=e.wrapperOffsetTop,c.left=c.left>0?0:c.left<e.maxScrollX?e.maxScrollX:c.left,c.top=c.top>e.minScrollY?e.minScrollY:c.top<e.maxScrollY?e.maxScrollY:c.top,b=void 0===b?d.max(2*d.abs(c.left),2*d.abs(c.top)):b,e.scrollTo(c.left,c.top,b))},scrollToPage:function(a,b,c){var d,e,f=this;c=void 0===c?400:c,f.options.onScrollStart&&f.options.onScrollStart.call(f),f.options.snap?(a="next"==a?f.currPageX+1:"prev"==a?f.currPageX-1:a,b="next"==b?f.currPageY+1:"prev"==b?f.currPageY-1:b,a=0>a?0:a>f.pagesX.length-1?f.pagesX.length-1:a,b=0>b?0:b>f.pagesY.length-1?f.pagesY.length-1:b,f.currPageX=a,f.currPageY=b,d=f.pagesX[a],e=f.pagesY[b]):(d=-f.wrapperW*a,e=-f.wrapperH*b,d<f.maxScrollX&&(d=f.maxScrollX),e<f.maxScrollY&&(e=f.maxScrollY)),f.scrollTo(d,e,c)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(w,a),this._unbind(x,a),this._unbind(y,a)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(z):B(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(a,b,c,d){var e=this,f=c/e.scale;e.options.useTransform&&(e.zoomed=!0,d=void 0===d?200:d,a=a-e.wrapperOffsetLeft-e.x,b=b-e.wrapperOffsetTop-e.y,e.x=a-a*f+e.x,e.y=b-b*f+e.y,e.scale=c,e.refresh(),e.x=e.x>0?0:e.x<e.maxScrollX?e.maxScrollX:e.x,e.y=e.y>e.minScrollY?e.minScrollY:e.y<e.maxScrollY?e.maxScrollY:e.y,e.scroller.style[j]=d+"ms",e.scroller.style[h]="translate("+e.x+"px,"+e.y+"px) scale("+c+")"+C,e.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},e=null,"undefined"!=typeof exports?exports.iScroll=D:a.iScroll=D}(window,document);var apiServer=BSGlobal.apiPath,Context={getGlobal:function(a){return BSGlobal[a]},changeHash:function(a,b,c){var d=decodeURIComponent(location.hash),e=d.split("?"),f=Context.parseUrl(d),g=[];if(url=null,c=1==c?!0:!1,"deleted"==b)for(var h=0,i=a.length;i>h;h++)delete f[a[h]];"add"==b&&(f=Talent._.extend({},f,a)),"eidt"==b&&(f=Talent._.extend({},f,a));for(var j in f)g.push(j+"="+f[j]);url=g.length?e[0]+"?"+g.join("&"):e[0],Talent.app.execute("history:navigate",url,c)},getLocalStorage:function(){if("object"==typeof localStorage)return localStorage;if("object"==typeof globalStorage)return globalStorage[location.host];throw new Error("local storage not available")},deleteGlobalProp:function(a){delete BSGlobal[a]},setGlobal:function(a,b){BSGlobal[a]=b},getTenantInfo:function(){return BSGlobal.tenantInfo},getUserInfo:function(){return BSGlobal.loginUserInfo},getStaticUrl:function(a){var b="../../images/components/tita-widget";return b+"/"+a},getApiUrl:function(a){var b=this.getUserInfo().Id,c=this.getTenantInfo().Id;return apiServer+"/api/v1/"+c+"/"+b+"/"+a},getApiUrlV2:function(a){var b=this.getUserInfo().Id,c=this.getTenantInfo().Id;return apiServer+"/api/v2/"+c+"/"+b+"/"+a},parseUrl:function(a){var b={};if(!a)return b;var c=a.indexOf("?");if(c>-1)for(var d=a.slice(c+1),e=d.split("&"),f=0;f<e.length;f++){var g=e[f].split("=");b[g[0]]=decodeURIComponent(g[1])}return b},getI18n:function(){var a={home_1:"动态",plan_1:"计划",work_1:"项目",document_1:"文件",workmate_1:"同事",app_1:"应用",task_1:"任务",task_2:"循环任务",schedule_1:"日程",share_1:"分享",sharing_1:"分享",follow_1:"立即关注",following_1:"正在关注",cancelfollow_1:"取消关注",myfollowmate_1:"我关注的",myfans_1:"我的粉丝",publishshare_1:"发分享",publishtask_1:"派任务",myfollowfeed_1:"与我相关",mypublishfeed_1:"我发表的",myleavefeed_1:"@我的",myreplayfeed_1:"回复我的",mycollectfeed_1:"我收藏的",myallfeed_1:"所有动态",message_1:"消息",remind_1:"提醒",myschedule_1:"我的日程",href_1:"常用链接",invitemate_1:"邀请同事",helpcenter_1:"帮助中心",onlineuser_1:"在线同事"},b={guide_1:"打开导览"};return BSGlobal&&BSGlobal.BSi18n?Talent._.extend({},BSGlobal.BSi18n,b):Talent._.extend({},a,b)},getAttachmentType:function(){return{image:["jpg","png","gif","jpeg","JPG","PNG","GIF","JPEG"],file:["rar","zip","exe","pdf","txt","doc","docx","ppt","pptx","XLS","XLSX","RAR","ZIP","EXE","PDF","TXT","DOC","DOCX","PPT","PPTX","XLS","XLSX"],music:["mp3","wma","wav","flac","ape","ogg","aac","m4a","MP3","WMA","WAV","FLAC","APE","OGG","AAC","M4A"],video:["mp4","mkv","rm","rmvb","avi","3gp","flv","wmv","asf","mpeg","mpg","mov","ts","m4v"]}},getUploadOptions:function(a){var b=this.getGlobal("evn"),c=b&&"develop"==b?"tita-inc.com":"tita.com",d={validate:{format:[],onceLimt:20,allLimt:-1,nameLimt:-1},callbackName:"jsCallback",url:this.getApiUrl("Upload/PostFiles"),ajaxUrl:this.getApiUrl("Upload/PostFiles?format=json"),fileInputName:"file_upload",extendData:{domain:"document.domain="+c},error:{error_allLimt:"文件超出最大限度",error_format:"文件格式不合法",error_nameLimt:"名字长度不合格"},isPaste:!0,isDrag:!0,callbackValue:"parent._callback_"};return a&&(d=Talent._.extend({},d,a)),d},isAbsolutePath:function(){var a=this.getGlobal("titaHost")||"",b="//"+location.host,c="";return c=a==b?"":a+"/u/"+this.getUserInfo().Id+"/Home",{host:a,webHost:c}},encodeScript:function(a){return 0==a.length?"":(s=a.replace(/</g,"&lt;"),s=s.replace(/>/g,"&gt;"),s)},dencodeScript:function(a){return 0==a.length?"":(s=a.replace(/&lt;/g,"<"),s=s.replace(/&gt;/g,">"),s)},formatDate:function(a){if(!a)return a;var b=moment().year(),c=a.split(" ");return moment(new Date(a)).year()==b&&(a=moment(new Date(a)).format(c[1]?"M/D HH:mm":"M/D")),a},setPosition:function(a,b,c){var d={container:Talent.$("body"),pos:"bottom",leftBias:0,topBias:0,autoFrames:"body"},c=Talent._.extend({},d,c),e=c.container||Talent.$("body"),f=e.offset(),g=a.offset(),h=a.outerHeight(),i=a.outerWidth(),j=b.outerWidth(),k=b.outerHeight(),l={},m="",n=g.top,o=g.left,p=n-f.top,q=o-f.left;switch(c.pos){case"top":l={top:p-k,left:q},m="bottom";break;case"topCenter":l={top:p-k,left:q+i/2-j/2},m="bottom";break;case"topRight":l={top:p-k,left:q+i-j},l.left<0&&(l.left=0),m="bottom";break;case"bottom":l={top:p+h,left:q},m="top";break;case"bottomCenter":l={top:p+h,left:q+i/2-j/2},m="top";break;case"bottomRight":l={top:p+h,left:q+i-j},l.left<0&&(l.left=0),m="top";break;case"left":l={top:p,left:q-j},m="right";break;case"leftCenter":l={top:p+h/2-k/2,left:q-j},m="right";break;case"leftBottom":l={top:p+h-k,left:q-j},m="right";break;case"right":l={top:p,left:q+i},m="left";break;case"rightCenter":l={top:p+h/2-k/2,left:q+i},m="left";break;case"rightBottom":l={top:p+h-k,left:q+i},m="left"}c.leftBias&&(l.left=l.left+c.leftBias),c.topBias&&(l.top=l.top+c.topBias);var r=Talent.$(window).height(),s=Talent.$(window).width(),t=Talent.$(document).scrollTop(),u=Talent.$(document).scrollLeft();if(f.top+l.top+k>r+t){var v=r+t-(f.top+l.top+k);l.top=l.top+v}if(f.top+l.top<t){var v=t-(f.top+l.top);l.top=l.top+v}if(f.left+l.left+j>s+u){var w=s+u-(f.left+l.left+j);l.left=l.left+w}if(f.left+l.left<u){var w=u-(f.left+l.left);l.left=l.left+w}b.css(l)},IsOpenYifangyun:function(){var a=Talent.Context.getGlobal("WebHead")||{},b=a.AppHead||[];if(!b.length)return!1;var c=_.findWhere(b,{AppId:"801"});return c?!0:!1},getUploadTipText:function(){return'<div style="text-align:left"><b style="display:block;font-size:14px;">支持拖拽上传<br>最多一次能上传20个</b>大小不超过20M</div>'},getAppHead:function(a){var b=this.getGlobal("WebHead");if(b){var c=b.AppHead||[],d=Talent._.findWhere(c,a);return d?d:null}}};_.TitaWidget_substring=function(a,b,c){if(!a)return"";for(var d=0,e="",f=/[^\x00-\xff]/g,g="",h=a.replace(f,"**").length,i=0;h>i&&(g=a.charAt(i).toString(),d+=null!=g.match(f)?2:1,!(c&&h>b&&d+2>b))&&!(d>b);i++)e+=g;return c&&h>b&&(e+="…"),e},_.substring=function(a,b,c){if(!a)return"";for(var d=0,e="",f=/[^\x00-\xff]/g,g="",h=a.replace(f,"**").length,i=0;h>i&&(g=a.charAt(i).toString(),d+=null!=g.match(f)?2:1,!(c&&h>b&&d+2>b))&&!(d>b);i++)e+=g;return c&&h>b&&(e+="…"),e},_.substringWithM=function(a,b,c){for(var d=0,e="",f=/[^\x00-\xff]/g,g="",h=a.replace(f,"**").length,i=0;h>i&&(g=a.charAt(i).toString(),null!=g.match(f)?d+=2:"m"==g||"w"==g?d+=2:d++,!(d>b));i++)e+=g;return c&&h>b&&(e+="…"),e},_.isStringBeyondLength=function(a,b){var c=/[^\x00-\xff]/g,d=a.replace(c,"**").length;return d>b?!0:!1},_.convertImage=function(a){var b="",a=a||{},c={className:"",size:30,shape:"radius",name:"",src:""};return a=_.extend({},c,a),a.bgColor?(50==a.size?a.subName=_.substring(a.name,6,!1):30==a.size?a.subName=_.substring(a.name,3,!1):64==a.size?a.subName=_.substring(a.name,6,!1):80==a.size?a.subName=_.substring(a.name,6,!1):100==a.size?a.subName=_.substring(a.name,8,!1):150==a.size&&(a.subName=_.substring(a.name,10,!1)),b=['<span class="',a.shape,"_img",a.size," ",a.className,'" style="background-color:',a.bgColor,';"  original-title="',a.name,'">',a.subName,"</span>"].join("")):b=['<img class="',a.shape,"_img",a.size," ",a.className,'" width="',a.size,'" height="',a.size,'" src="',a.src,'" original-title="',a.name,'" />'].join(""),b},_.TitaWidget_evaluation=function(a){var b={1:"tw-medal-grade-one-light",2:"tw-medal-grade-two-light",3:"tw-medal-grade-three-light"},c={1:"太棒了！",2:"干的不错！",3:"再接再厉！"},a=a||{},d={type:1,value:"",lvl:5,goal:2};a=_.extend({},d,a),a.value=parseInt(a.value),a.type=parseInt(a.type);var e=a.type;a.lvl||(a.lvl=5),a.goal||(a.goal=2);var f=["","",""];if(1==e){var g=Math.floor(a.value/a.goal);f=['<span class="evaluation-star-list">',"","</span>"];var h=0,i=Math.ceil(a.value/a.goal);g!=i&&(h=i);for(var j=1;j<=a.lvl;j++)f[1]+=g>=j?'<span class="icon-star-m-active"></span>':h==j?'<span class="icon-star-m-half-active"></span>':'<span class="icon-star-m-disabled"></span>';f[1]+='<div class="last-score"><span class="score-value">'+a.value+'</span><span class="value-unit">分</span></div>'}return 2==e&&(a.name&&"null"!=a.name||(a.name=c[a.value]),f[1]='<span class="result-'+[a.value]+'"><span class="'+b[a.value]+'"></span>'+a.name+"</span>"),'<span class="tt_evaluation">'+f.join("")+"</span>"};var supportT=function(){var a=document.body||document.documentElement,b=a.style,c=void 0!==b.WebkitAnimation||void 0!==b.webkitAnimation||void 0!==b.MozAnimation||void 0!==b.OAnimation||void 0!==b.msAnimation||void 0!==b.animation;return c}();_.animate=function(a,b,c,d,e){var b=b||"shake",c=c||"noraml",e=e||function(){};if(!supportT)return void e();c="number"==typeof c?100*c:""==c?300:{fast:200,normal:500,slow:1e3}[c]||500;var f=["UI_animated","UI_speed_"+c,"UI_ani_"+b];a.addClass(f.join(" "));setTimeout(function(){a.removeClass(f.join(" ")),e()},c)},_.privateTipText=function(a,b,c,d){var e=Context.getI18n(),f=b,g="仅相关人可见";if(f){if(d)switch(d){case 400:g="仅你和你上级可见";break;case 500:g="仅你和你上级可见";break;case 600:g="仅"+e.task_1+"成员可见"}else if(c)switch(c){case 3:g="仅团队成员可见";break;case 4:g="仅相关成员可见";break;case 8:4==a&&(g="仅共享者可见"),5==a&&(g="仅共享者可见");break;case 15:g="仅发起者的部门可见"}else{if(!a)return"仅自己可见";switch(a){case 1:g="仅@的人可见";break;case 20:g="仅"+e.task_1+"成员可见"}}return g}return"所有人可见"};var AddUserItemView=Talent.ItemView.extend({template:jst["add-user/add-user-item"],tagName:"li",ui:{uxUserArea:".ux_user_area"},initialize:function(){},onRender:function(){this.$el.find("a").tipsy({gravity:"s"})},events:function(){var a={};return a["mouseover "+this.ui.uxUserArea]="changeHideNode",a["mouseout "+this.ui.uxUserArea]="changeShowNode",a["click "+this.ui.uxUserArea]="deleteUser",a},deleteUser:function(){this.trigger("deleteUser",this.model)},changeHideNode:function(a){var b=Talent.$(a.currentTarget),c=this.model.get("avatar")||this.model.get("Avatar")||this.model.get("UserAvatar");c.HasAvatar?b.find("img").hide():b.find("span").hide()},changeShowNode:function(a){var b=Talent.$(a.currentTarget),c=this.model.get("avatar")||this.model.get("Avatar")||this.model.get("UserAvatar");c.HasAvatar?b.find("img").show():b.find("span").show()}}),AddUserCompositeView=Talent.CompositeView.extend({defaults:{addUserSelectonOptions:{}},itemView:AddUserItemView,itemViewContainer:"ul",className:"person-list",template:jst["add-user/add-user-composite"],ui:{addUserBtn:".ux_add_btn"},defaults:{title:"提醒对象"},initialize:function(a){this.settings=Talent._.extend({},this.defaults,this.options),this.addUserSelectonOptions=a.addUserSelectonOptions},templateHelpers:function(){return{title:this.settings.title}},modelEvents:{},onRender:function(){var a=this;this.on("itemview:deleteUser",function(b){a.collection.remove(b.model),a.trigger("deleteUser",b.model.toJSON()),$("body .tipsy").remove()}),a._bindUserSelect()},_bindUserSelect:function(){var a=this;this.userSelectorView=new UserSelector({collection:new UserSelectorCollection,container:this.$el}),this.userSelectorView.addNode(this.ui.addUserBtn,this.addUserSelectonOptions),this.addUserSelectonOptions.container&&Context.setPosition(this.ui.addUserBtn,this.userSelectorView.$el,{container:this.addUserSelectonOptions.container}),this.ui.addUserBtn.on("submit",function(b,c){b.stopPropagation(),a.smemberSelect(c)})},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a),d=Marionette.getOption(this,"itemViewOptions");_.isFunction(d)&&(d=d.call(this,a,c));var e=this.buildItemView(a,b,d);this.addChildViewEventForwarding(e),this.children.add(e),e.render(),this.$el.find(this.itemViewContainer).find("li:first-child").length?this.$el.find(this.itemViewContainer).find("li:first-child").before(e.el):this.$el.find(this.itemViewContainer).append(e.el),this._isShown&&Marionette.triggerMethod.call(e,"show"),this.triggerMethod("after:item:added",e)},smemberSelect:function(a){if(a.data)this.trigger("addUser",a);else{var a=a||{};a.UserId=a.Id,a.Avatar=a.UserAvatar;var b=this.collection.where({UserId:a.UserId});b.length>0?TipDialogView(this.ui.addUserBtn,"该联系人已存在",{container:this.$el,pos:"topCenter",topBias:40}):this.trigger("addUser",a)}}}),AttachmentListItemView=Talent.ItemView.extend({defaults:{isShowDeleted:!1},tagName:"li",template:jst["attachment-list/attachment-list-item"],className:"item_afb",templateHelpers:function(){var a=this.model.get("fileName"),b=this.model.get("fileType").toLowerCase(),c=this.model.get("deleteable"),d=(this.model.get("imageUrl"),this.model.get("isImage")),e=this.model.get("documentSource");return e&&3==e&&(d=!1),this.settings.isShowDeleted||(c=!1),/^jpg|png|gif|jpeg|image|JPG|PNG|GIF|JPEG$/.test(b)||(b=/^(rar|zip|exe|pdf|txt|doc|docx|ppt|pptx|xls|xlsx)$/.test(b)?b:/^(mp3|wma|wav|flac|ape|ogg|aac|m4a)$/.test(b)?"music":/^(mp4|mkv|rm|rmvb|avi|3gp|flv|wmv|asf|mpeg|mpg|mov|ts|m4v)$/.test(b)?"video":"none"),{fileName:Talent._.substringWithM(a,14,!0),fileType:b,webHost:Context.isAbsolutePath(),deleteable:c,isImage:d}},initialize:function(a){this.settings=Talent._.extend({},this.defaults,a)}}),AttachmentListView=Talent.CompositeView.extend({defaults:{isShowDeleted:!0},className:"attachment_fb",template:Talent._.template("<ul/>"),itemView:AttachmentListItemView,itemViewContainer:"ul",ui:{deleted:"a[data-name=attachment-deleted]",preview:"a[data-name=feed-attachment-preview]",previewButton:"span[data-name=feed-attachment-preview-button]",dialog:"span[data-name=feed-attachment-preview-dialog]"},collectionEvents:{reset:"_dealData",add:"_dealData"},itemViewOptions:function(){return{isShowDeleted:this.settings.isShowDeleted}},_dealData:function(){this.collection.each(function(a){{var b=Context.getAttachmentType().image,c=a.get("fileType").toLowerCase(),d=a.get("previewUrl"),e=a.get("imageUrl");a.get("documentSource")}a.set("isImage",!1);for(var f=0;f<b.length;f++)if(c==b[f]){a.set("isImage",!0);var g=d.lastIndexOf(".");if(g>0){var h=d.substr(0,g)+"_b."+d.substr(g+1),i=d.substr(0,g)+"_s."+d.substr(g+1);"gif"==c&&(i=d),a.set("bigUrl",h),a.set("smallUrl",i)}e&&a.set("smallUrl",e);break}null!=d&&""!=d?a.set("isPreview",!0):a.set("isPreview",!1)})},initialize:function(a){this.settings=Talent._.extend({},this.defaults,a),this._dealData()},events:function(){var a={};return a["click "+this.ui.deleted]="_deletedHandler",a["click "+this.ui.preview]="_renderImgPreviewView",a["click "+this.ui.previewButton]="_renderImgPreviewView",a["click "+this.ui.dialog]="_renderImgPreviewView",a},_deletedHandler:function(a){a.stopPropagation();var b=this,c=Talent.$(a.currentTarget),d=c.attr("id"),e=this.collection.findWhere({documentId:+d});ConfirmDialogView(c,"此操作不可恢复，您确定删除吗？",{pos:"topCenter",container:this.$el,sure:function(){b.collection.remove(e),b.trigger("delete",d)}})},_renderImgPreviewView:function(a){var b=Talent.$(a.currentTarget),c=b.attr("data-name"),d=this.$("[data-name="+c+"]"),e=d.index(b),f=Talent._.where(this.collection.toJSON(),{isImage:!0})||[];f.length&&(0>e||(this.imgPreviewView&&this.imgPreviewView.close(),this.imgPreviewView=new ImgPreviewView({collection:new Talent.Collection(f),index:e}),this.$el.append(this.imgPreviewView.render().el)))}}),DateTimeCycleView=Talent.ItemView.extend({template:jst["date-time-picker/date-time-cycle"],className:"_cycle_tt_dialog",defaults:{isShowTip:!0},ui:{dateTimeSetBtn:'[data-name="date-time-set-btn"]',dateTimeDropDown:'[data-name="date-time-dropdown"]',dateTimeDropDownItem:'[data-name="date-time-dropdown"] a',cycleType:"div[data-name=date-time-picker-tab] li",sureBtn:'a[data-name="data-time-picker-sure-cycle"]',closeBtn:'a[data-name="data-time-picker-close-cycle"]',resetBtn:'a[data-name="data-time-picker-reset-cycle"]'},events:function(){var a={};return a["click "+this.ui.dateTimeSetBtn]="_showDataList",a["click "+this.ui.dateTimeDropDownItem]="_selectData",a["click "+this.ui.cycleType]="_changeCycleType",a["click "+this.ui.sureBtn]="_sureCycle",a["click "+this.ui.closeBtn]="_closeCycle",a["click "+this.ui.resetBtn]="_resetCycle",a},modelEvents:{change:"render"},templateHelpers:function(){{var a=this._get24HourList(),b=this._getMiniteList(),c=this.model.get("cycType"),d=[];curEndDate=""}return d=3==c?this.weekList:this.monthList,{hours:a,minites:b,dateData:d}},initialize:function(a){var b=this;this.settings=Talent._.extend({},this.defaults,a),this.selectData=this.model.toJSON(),this._initData(),this.$el.on("click",function(a){a.stopPropagation();var c=Talent.$(a.target);"undefined"==typeof c.attr("data-name")&&b.ui.dateTimeDropDown.hide()})},onRender:function(){},_initData:function(){var a={cycType:2,cycStartDay:"",cycEndDay:"",cycStartHour:"08",cycStartMinute:"00",cycEndHour:"18",cycEndMinute:"00",cycStartDayTxt:"",cycEndDayTxt:""},b=this.selectData;this.initData=Talent._.extend({},a,b),this.weekList=["周一","周二","周三","周四","周五","周六","周日"],this.monthList=this._getDateList();var c=b.cycType;3==c&&this.model.set({cycStartDayTxt:this.weekList[b.cycStartDay-1],cycEndDayTxt:this.weekList[b.cycEndDay-1]}),4==c&&(this.model.set({cycStartDayTxt:this.monthList[b.cycStartDay-1],cycEndDayTxt:this.monthList[b.cycEndDay-1]}),this.model.get("cycStartDay")||this.model.set("cycStartDay",moment().date()),this.model.get("cycEndDay")||this.model.set("cycEndDay",moment().date()))},_changeCycleType:function(a){var b=Talent.$(a.currentTarget),c=b.attr("cyctype"),d="",e="",f="",g=(this.initData,Talent._.indexOf);3==c?(f=0==moment().format("d")?6:moment().format("d")-1,e=this.weekList[f],d=g(this.weekList,e)+1):4==c&&(e=moment().format("DD"),d=_.indexOf(this.monthList,e)+1),c!=this.selectData.cycType?(this.model.set({cycType:c,cycStartHour:"08",cycStartMinute:"00",cycEndHour:"18",cycEndMinute:"00",cycStartDay:d,cycEndDay:d,cycStartDayTxt:e,cycEndDayTxt:e},{silent:!0}),this.render()):(this.model.set({cycType:c,cycStartHour:this.selectData.cycStartHour,cycStartMinute:this.selectData.cycStartMinute,cycEndHour:this.selectData.cycEndHour,cycEndMinute:this.selectData.cycEndMinute,cycStartDay:d,cycEndDay:d,cycStartDayTxt:e,cycEndDayTxt:e},{silent:!0}),this.render())},_resetCycle:function(a){var b=Talent.$(a.currentTarget);0==this.settings.isShowTip?(this.trigger("resetCycle",b),this.close()):this._showTip(b)},_showTip:function(a){var b=this;ConfirmDialogView(this.ui.resetBtn,"您确定取消此循环吗？此操作将不可恢复",{pos:"top",container:this.$el,sure:function(){b.model.set("isCycle",!1),b.trigger("resetCycle",a),b.close()},cancel:function(){b.trigger("cancel",a),b.close()}})},_sureCycle:function(a){var b=Talent.$(a.currentTarget),c=this._checkCycleDate();c&&(this.trigger("sureCycleDate",b),this.close())},_checkCycleDate:function(){var a=this.model.get("cycType"),b=this.model.get("cycStartDay"),c=this.model.get("cycEndDay"),d=this.model.get("cycStartHour"),e=this.model.get("cycEndHour"),f=this.model.get("cycStartMinute"),g=this.model.get("cycEndMinute"),h=d+":"+f,i=e+":"+g;return 1==a||2==a?h>i||i==h?(TipDialogView(this.ui.sureBtn,"结束时间不能小于开始时间",{container:this.$el,pos:"topCenter"}),!1):!0:3==a||4==a?b==c&&(h>i||i==h)?(TipDialogView(this.ui.sureBtn,"结束时间不能小于开始时间",{container:this.$el,pos:"topCenter"}),!1):b>c?(TipDialogView(this.ui.sureBtn,"结束时间不能小于开始时间",{container:this.$el,pos:"topCenter"}),!1):!0:void 0},_closeCycle:function(a){var b=Talent.$(a.currentTarget);this.trigger("cancel",b),this.close()},_selectData:function(a){var b=this.$(a.currentTarget).attr("data-type"),c=["_changeStartDate","_changeEndDate","_changeStartHour","_changeEndHour","_changeStartMinute","_changeEndMinute"],d=c[b-1];this[d](a)},_changeStartDate:function(a){var b=Talent.$(a.currentTarget),c=Number(b.attr("index")),d=this.model.get("cycType");if(3==d)var e=this.weekList;else if(4==d)var e=this.monthList;this.model.set({cycStartDay:Number(c)+1,cycStartDayTxt:e[c]})},_changeEndDate:function(a){var b=Talent.$(a.currentTarget),c=Number(b.attr("index")),d=this.model.get("cycType");if(3==d)var e=this.weekList;else if(4==d)var e=this.monthList;this.model.set({cycEndDay:Number(c)+1,cycEndDayTxt:e[c]})},_changeStartHour:function(a){var b=Talent.$(a.currentTarget),c=b.attr("hour");c!=this.model.get("cycStartHour")&&this.model.set("cycStartHour",c)},_changeEndHour:function(a){var b=Talent.$(a.currentTarget),c=b.attr("hour");c!=this.model.get("cycEndHour")&&this.model.set("cycEndHour",c)},_changeStartMinute:function(a){var b=Talent.$(a.currentTarget),c=b.attr("minite");c!=this.model.get("cycStartMinute")&&this.model.set("cycStartMinute",c)},_changeEndMinute:function(a){var b=Talent.$(a.currentTarget),c=b.attr("minite");c!=this.model.get("cycEndMinute")&&this.model.set("cycEndMinute",c)},_showDataList:function(a){var b=Talent.$(a.currentTarget);this.ui.dateTimeDropDown.hide(),b.parent().find(".dayvalues_nst").show()},_getDateList:function(){for(var a=[],b=1;31>=b;b++)10>b&&(b="0"+b),a.push(b.toString());return a},_get24HourList:function(){for(var a=[],b=0;23>=b;b++)10>b&&(b="0"+b),a.push(b);return a},_getMiniteList:function(){return miniteList=["00","05","10","15","20","25","30","35","40","45","50","55"]
},onClose:function(){this._checkCycleDate()||this.model.set({cycStartDay:this.initData.cycStartDay,cycEndDay:this.initData.cycEndDay,cycStartHour:this.initData.cycStartHour,cycEndHour:this.initData.cycEndHour,cycStartMinute:this.initData.cycStartMinute,cycEndMinute:this.initData.cycEndMinute},{silent:!0})}}),DateTimePickerTabView=Talent.ItemView.extend({defaults:{isShowDateView:!0,isShowCycleView:!0,isShowLongView:!0},tagName:"ul",className:"tab-bar",template:jst["date-time-picker/date-time-picker-tab"],ui:{tabItem:"li"},templateHelpers:function(){return this.settings},modelEvents:{"change:viewType":"_changeTypeEvent"},events:function(){var a={};return a["click "+this.ui.tabItem]="_itemClickHandler",a},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options)},_changeTypeEvent:function(){var a=this.model.get("viewType");this.ui.tabItem.removeClass("active"),this.$el.find("li[data-type="+a+"]").addClass("active")},_itemClickHandler:function(a){var b=Talent.$(a.currentTarget),c=b.attr("data-type");this.model.set({viewType:c}),this.model.set({isLongTerm:!1,isCycle:!1},{silent:!0}),"cycle"==c&&this.model.set({cycType:2})}}),DateView=Talent.Layout.extend({defaults:{rangepickerOptions:{timePicker:!0,format:"YYYY/MM/DD HH:mm",timePicker12Hour:!1,timePickerIncrement:5,startDate:moment().format("YYYY/MM/DD HH:mm")+"08:00",endDate:moment().format("YYYY/MM/DD HH:mm")+"18:00",minDate:"2013/01/01",showDropdowns:!0,autoHide:!1,opens:"left",locale:{applyLabel:"确定",cancelLabel:"取消",fromLabel:"开始时间",toLabel:"结束时间"}}},className:"date-container",template:Talent._.template('<div data-name="date-time-picker-date"/>'),ui:{content:"div[data-name=date-time-picker-content]"},regions:{content:"div[data-name=date-time-picker-content]"},modelEvents:{"change:startDate":"_changeStartDateHander","change:endDate":"_changeEndDateHander"},templateHelpers:function(){return{}},events:function(){var a={};return a["click "+this.ui.tabDate]="showDatePicker",a["click "+this.ui.tabCycle]="showCyclePicker",a},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options),"object"==typeof this.options.rangepickerOptions&&(this.settings.rangepickerOptions=Talent._.extend({},this.defaults.rangepickerOptions,this.options.rangepickerOptions))},onRender:function(){},onShow:function(){this._renderDateView()},_renderDateView:function(){var a=this.ui.content,b=this,c=this.settings.rangepickerOptions;c.timePicker?(c.startDate=moment(this.model.get("startDate"),"YYYY/MM/DD").hour()?this.model.get("startDate"):this.model.get("startDate")+"08:00",c.endDate=moment(this.model.get("endDate"),"YYYY/MM/DD").hour()?this.model.get("endDate"):this.model.get("endDate")+"18:00"):(c.startDate=this.model.get("startDate"),c.endDate=this.model.get("endDate")),DateRangePicker.prototype.updateFormInputs=function(){var a=this.startDate.format(this.format),b=this.endDate.format(this.format);this.container.find("input[name=daterangepicker_start]").val(a),this.container.find("input[name=daterangepicker_end]").val(b);var c=this.container.find("button.applyBtn");(this.singleDatePicker&&this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate))&&c.removeAttr("disabled")},DateRangePicker.prototype.clickApply=function(){this.startDate.format(this.format),this.endDate.format(this.format);if(this.singleDatePicker&&this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate))this.updateInputText(),this.hide(),this.element.trigger("apply.daterangepicker",this);else{var a=this.container.find("button.applyBtn");TipDialogView(a,"结束时间不能早于或等于开始时间",{pos:"topCenter"})}},c.parentEl=this.$el.find("div[data-name=date-time-picker-date]"),this.$el.daterangepicker(c);this.$el.data("daterangepicker");this.$el.on("apply.daterangepicker",function(c,d){var e=b.settings.rangepickerOptions.format,f=moment(d.startDate).format(e),g=moment(d.endDate).format(e);b.model.set({startDate:f,endDate:g,isLongTerm:!1,cycType:0,isCycle:!1}),b.trigger("sure",a)}),this.$el.on("cancel.daterangepicker",function(){b.trigger("cancel",a)})},_changeStartDateHander:function(){this.$el.data("daterangepicker").setStartDate(this.model.get("startDate"))},_changeEndDateHander:function(){this.$el.data("daterangepicker").setEndDate(this.model.get("endDate"))},onClose:function(){}}),DateTimeLongView=Talent.Layout.extend({defaults:{rangepickerOptions:{parentEl:"div[data-name=date-time-long-date]",timePicker:!1,format:"YYYY/MM/DD",showDropdowns:!0,autoHide:!1,opens:"left",singleDatePicker:!0,locale:{applyLabel:"确定",cancelLabel:"取消",fromLabel:"开始时间",toLabel:"结束时间"}}},className:"date-long",template:jst["date-time-picker/date-time-long"],ui:{dateContent:"div[data-name=date-time-long-date]",checkout:"div[data-name=date-time-long-check]",buttonCandel:"[data-name=date-time-long-candel]",buttonSure:"[data-name=date-time-long-sure]",buttonCandelLong:"[data-name=date-time-long-candellong]",inputCheck:"[data-name=date-time-long-input]"},regions:{content:"div[data-name=date-time-picker-content]"},templateHelpers:function(){return{}},events:function(){var a={};return a["click "+this.ui.checkout]="_openLongHandler",a["click "+this.ui.buttonCandelLong]="_cancelLongHandler",a["click "+this.ui.buttonCandel]="_cancelHandler",a["click "+this.ui.buttonSure]="_sureHandler",a},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options),"object"==typeof this.options.rangepickerOptions&&(this.settings.rangepickerOptions=Talent._.extend({},this.defaults.rangepickerOptions,this.options.rangepickerOptions)),this.settings.rangepickerOptions.timePicker=!1,this.startDate=this.model.get("startDate"),this.endDate=this.model.get("endDate")},onRender:function(){},onShow:function(){this._renderDateView()},_cancelHandler:function(a){var b=Talent.$(a.currentTarget);this.trigger("cancel",b)},_sureHandler:function(a){var b=Talent.$(a.currentTarget);this.model.set({startDate:this.startDate,endDate:this.endDate,isLongTerm:!0,cycType:0}),this.trigger("sure",b)},_cancelLongHandler:function(a){Talent.$(a.currentTarget);this.model.set("isLongTerm",!1),this.trigger("cancelLong")},_openLongHandler:function(a){var b=(Talent.$(a.currentTarget),this.ui.inputCheck);b.hasClass("checkbox-checked")?(b.removeClass("checkbox-checked"),this.model.set("isLongTerm",!1),this.trigger("cancelLong")):(b.addClass("checkbox-checked"),this.model.set("isLongTerm",!0))},_renderDateView:function(){var a=this,b=Talent._.extend(this.settings.rangepickerOptions,{startDate:this.model.get("startDate"),endDate:this.model.get("endDate")});this.ui.dateContent.daterangepicker(b),this.ui.dateContent.on("apply.daterangepicker",function(b,c){var d=moment(c.startDate).format("YYYY/MM/DD"),e=moment(c.endDate).format("YYYY/MM/DD");a.startDate=d,a.endDate=e})},onClose:function(){}}),DateTimePickerView=Talent.Layout.extend({defaults:{id:"date-time-picker",count:2,viewType:"date",isShowDateView:!0,isShowCycleView:!0,isShowLongView:!0,rangepickerOptions:{timePickerOpens:"left",showLong:!0,format:"YYYY/MM/DD HH:mm",timePicker:!0},isShowTab:!0},contentViewMap:{date:"_renderDateView","long":"_renderLongView",cycle:"_renderCycleView"},className:"tt-time-date-picker",template:jst["date-time-picker/date-time-picker"],ui:{content:"div[data-name=date-time-picker-content]"},regions:{content:"div[data-name=date-time-picker-content]"},templateHelpers:function(){return{}},events:function(){var a={};return a},modelEvents:{"change:viewType":"_changeTypeEvent"},initialize:function(a){var b=this;if(this.settings=Talent._.extend({},this.defaults,this.options),this.settings.rangepickerOptions&&(this.settings.rangepickerOptions=Talent._.extend({},this.settings.rangepickerOptions,a.rangepickerOptions)),1==this.settings.count&&(this.settings.isShowTab=!1,this.isShowDateView=!1,this.isShowLongView=!1,this.isShowCycleView=!1,this.settings.rangepickerOptions.singleDatePicker=!0,1==this.settings.rangepickerOptions.timePicker?(1==this.settings.rangepickerOptions.timePicker,this.settings.rangepickerOptions.autoHide=!1):(this.settings.rangepickerOptions.autoHide=!1,this.settings.rangepickerOptions.timePicker=!1),this.$el.addClass("tt-time-date-picker-on")),this.model.set({viewType:this.settings.viewType}),0==this.isShowDateView&&0==this.isShowCycleView&&0==this.isShowLongView&&(this.settings.isShowTab=!1),this.$el.attr("id",this.settings.id),this.$el.on("mouseup",function(a){a.stopPropagation()}),Talent.$(document).on("mouseup.tt-DateTimePickerView",function(){b.close()}),!this.settings.model){var c=this.settings.rangepickerOptions.startDate||moment().format("YYYY/MM/DD"),d=this.settings.rangepickerOptions.endDate||moment().add(1,"day").format("YYYY/MM/DD");this.model.set({startDate:c,endDate:d,isLongTerm:!0,isCycle:"cycle"==this.settings.viewType?!0:!1,cycType:0,cycStartDay:"",cycEndDay:"",cycStartHour:"08",cycStartMinute:"00",cycEndHour:"18",cycEndMinute:"00"},{silent:!0})}},onRender:function(){},onShow:function(){this._renderTabView(),this._changeTypeEvent()},show:function(a,b){this.$el.show(),Context.setPosition(a,this.$el,b)},hide:function(){this.$el.hide()},_changeTypeEvent:function(){var a=this.contentViewMap[this.model.get("viewType")],b=this[a]();this.content.show(b)},_renderTabView:function(){this.settings.isShowTab&&(this.tabView=new DateTimePickerTabView({model:this.model,isShowDateView:this.settings.isShowDateView,isShowCycleView:this.settings.isShowCycleView,isShowLongView:this.settings.isShowLongView}),this.$el.prepend(this.tabView.render().$el))},_renderDateView:function(){return this.dateView?this.dateView:(this.dateView=new DateView({model:this.model,rangepickerOptions:this.settings.rangepickerOptions}),this.listenTo(this.dateView,"sure",function(a){this.trigger("sure",a,this.model.toJSON()),this.hide()}),this.listenTo(this.dateView,"cancel",function(a){this.trigger("cancel",a,this.model.toJSON()),this.hide()}),this.dateView)},_renderLongView:function(){return this.dateTimeLongView?this.dateTimeLongView:(this.dateTimeLongView=new DateTimeLongView({model:this.model,rangepickerOptions:this.settings.rangepickerOptions}),this.listenTo(this.dateTimeLongView,"cancel",function(a){this.trigger("cancel",a,this.model.toJSON()),this.hide()}),this.listenTo(this.dateTimeLongView,"sure",function(a){this.trigger("sure",a,this.model.toJSON()),this.hide()}),this.listenTo(this.dateTimeLongView,"cancelLong",function(){this.model.set("viewType","date"),this.trigger("cancelLong")}),this.dateTimeLongView)},_renderCycleView:function(){if(this.cycleTaskView)return this.cycleTaskView;return this.cycleTaskView=new DateTimeCycleView({model:this.model}),this.listenTo(this.cycleTaskView,"cancel",function(a){this.close(),this.trigger("cancel",a,this.model.toJSON())}),this.listenTo(this.cycleTaskView,"resetCycle",function(a){this.model.set({isCycle:!1}),this.trigger("resetCycle",a,this.model.toJSON()),this.close()}),this.listenTo(this.cycleTaskView,"sureCycleDate",function(a){this.model.set({isCycle:!0}),this.close(),this.trigger("sure",a,this.model.toJSON())}),this.cycleTaskView},onClose:function(){this.dateView&&this.dateView.close(),Talent.$(document).off("mouseup.tt-dateTimePicker")}}),EmotionTabView=Talent.ItemView.extend({template:jst["emotion/emotion-tab"],className:"emotion-tab",ui:{item:".emotion-tab-item"},events:function(){var a={};return a["click "+this.ui.item]="_clickItem",a},initialize:function(a){this.settings=Talent._.extend({},this.defaults,a)},_clickItem:function(a){a.stopPropagation();var b=this.$(a.currentTarget),c=b.attr("data-id");this.ui.item.removeClass("tab-active"),b.addClass("tab-active"),this.model.set("currentTab",c)}}),EmotionBodyView=Talent.ItemView.extend({template:jst["emotion/emotion-body"],initialize:function(a){this.settings=Talent._.extend({},this.defaults,a)},className:"emotion-body-scroll",ui:{emotionImg:'[data-name="emotion-img"]'},modelEvents:{"change:currentData":"render"},events:function(){var a={};return a["click "+this.ui.emotionImg]="_clickEmotion",a},_clickEmotion:function(a){var b=this.$(a.currentTarget),c=b.attr("title");this.trigger("clickEmotion",c),a.stopPropagation()}}),EmotionView=Talent.Layout.extend({template:jst["emotion/emotion"],className:"tt-emotion-layout",defaults:{currentTab:"",triggerNode:Talent.$("body"),inputNode:null,dialogShowOption:{container:Talent.$("body"),boundingEl:Talent.$("body"),pos:"bottom",leftBias:-75,topBias:10,adjust:0}},regions:{tabArea:'[data-name="emotion-tab-container"]',bodyArea:'[data-name="emotion-body-container"]'},modelEvents:{"change:currentTab":"_onTabChange"},initialize:function(a){this.settings=Talent._.extend({},this.defaults,a),"object"==typeof this.options.dialogShowOption&&(this.settings.dialogShowOption=Talent._.extend({},this.defaults.dialogShowOption,this.options.dialogShowOption)),this.model.set(this.settings),this._renderDialog(),this.dee={};var b=this.settings.inputNode,c=this.caretPosAttr="emotion-caret-pos",d=/msie/.test(navigator.userAgent.toLowerCase());b&&!b.attr(c)&&d&&(b.attr(c,b.val().length),b.on("click keyup",function(){var a=b.caret("pos");b.attr(c,a)}))},onRender:function(){var a=this;EmotionCollection.getEmotionData().done(function(b){Context.setGlobal("emotionData",b),a.model.set({data:b,currentTab:a.options.currentTab?a.options.currentTab:b[0].name}),a._renderAll()})},show:function(){this.Dialog.$el.show()},hide:function(){this.Dialog.$el.hide()},_renderAll:function(){this._renderTabView(),this._renderBody(),this.Dialog.show(this.settings.triggerNode,this.el,this.settings.dialogShowOption)},_renderTabView:function(){this.tabView=new EmotionTabView({model:this.model}),this.tabArea.show(this.tabView)},_renderBody:function(){var a=this;this.bodyView=new EmotionBodyView({model:this.model});var b=/msie/.test(navigator.userAgent.toLowerCase());this.listenTo(this.bodyView,"clickEmotion",function(c){var d=this.settings.inputNode;if(d){var e=d.val(),f=d.caret("pos");b&&(f=parseInt(d.attr(this.caretPosAttr)),d.attr(this.caretPosAttr,f+c.length));var g=e.substring(0,f),h=e.substring(f),i=g+c+h,j=f+c.length;a.hide(),d.val(i),d.caret("pos",j),d.focus().keyup()}}),this.bodyArea.show(this.bodyView)},_onTabChange:function(){var a=this.model.get("currentTab"),b=this.model.get("data"),c=Talent._.findWhere(b,{name:a});this.model.set("currentData",c)},_renderDialog:function(){var a=this;this.Dialog=new TDialogView({type:"default",sure:!1,cancel:!1,showClosed:!0,minWidth:472,className:"ns-emotion-dialog _tt_dialog"}),this.listenTo(this.Dialog,"hide",function(){this.trigger("dialogHide")}),this.settings.dialogShowOption.container.append(this.Dialog.render().$el),Talent.$(document).off("click.tt-Emotion"),Talent.$(document).on("click.tt-emotion",function(){a.hide()})},onClose:function(){Talent.$(document).off("click.tt-emotion"),this.Dialog&&this.Dialog.close()}}),EmptyView=Talent.ItemView.extend({defaults:{emptyContext:"333333333"},template:jst["empty-view/empty"],className:"tt_common_emptyinit",initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options)},templateHelpers:function(){var a=this.settings.emptyContext?this.settings.emptyContext:this.model.get("emptyContext"),b=0;return a&&(b=a.replace(/<[^>].*?>/g,"").replace(/[&nbsp;]/g,"").length),{emptyContext:a,className:b>24?"small_content_emptyinit":"content_emptyinit"}}}),EvaluationStarView=Talent.ItemView.extend({defaults:{lvl:5},template:jst["evaluation/evaluation-star"],ui:{iconStar:"li[data-name='star']"},events:function(){var a={};return a["click "+this.ui.iconStar]="_selectStar",a["mouseenter "+this.ui.iconStar]="_mouseOverStar",a["mouseleave "+this.ui.iconStar]="_mouseOutStar",a},modelEvents:{"change:value":"render"},initialize:function(){this.model.get("value")||this.model.set({value:0},{silent:!0})},onRender:function(){Talent.$(".tipsy").remove(),this.ui.iconStar.tipsy({gravity:"s"})},onClose:function(){},onRender:function(){Talent.$(".tipsy").remove(),this.ui.iconStar.tipsy({gravity:"s"})},onClose:function(){},_mouseOverStar:function(a){var b=Talent.$(a.currentTarget);this.ui.iconStar.each(function(a,c){$(c).data("index")<=b.data("index")?$(c).attr("class","icon-star-m-hover"):$(c).attr("class","icon-star-m-default")})},_mouseOutStar:function(a){$(a.currentTarget);this.render()},_selectStar:function(a){var b=Talent.$(a.currentTarget),c=b.attr("data-value");this.model.set("value",c),this.trigger("selectStar",this.model.toJSON())}}),DimensionItem=Talent.ItemView.extend({template:jst["evaluation/evaluation-dimension-item"],tagName:"li",className:"dimension-item",ui:{starRegion:"[data-name='star-container']"},initialize:function(){var a=this;this.checkedModel=this.options.checkedModel,this.checkedModel.on("change:type",function(){var b=a.checkedModel.get("type");1!=b&&a.model.set("value",0)})},onRender:function(){this.model.set("type",4),this.evaluationStarView=new EvaluationStarView({model:this.model}),this.listenTo(this.evaluationStarView,"selectStar",function(a){this.model.set("value",a.value),1!=this.checkedModel.get("type")&&this.checkedModel.set("value",0),this.checkedModel.set("type",1),this.trigger("score")},this),this.evaluationStarView.setElement(this.ui.starRegion),this.evaluationStarView.render()}}),MutiDimensionView=Talent.CompositeView.extend({defaults:{checkedModel:"",weiduCollection:""},template:jst["evaluation/evaluation-dimension"],itemView:DimensionItem,itemViewContainer:"ul",initialize:function(a){this.settings=Talent.$.extend({},this.defaults,a),this.checkedModel=this.settings.checkedModel,this.on("itemview:score",function(){this.trigger("score")})},itemViewOptions:function(){return{checkedModel:this.checkedModel}},collectionEvents:{change:"_valueChange"},_valueChange:function(){},_radioChange:function(){0==this.model.get("radioChecked")?this.$el.addClass("nochecked"):this.$el.removeClass("nochecked")}}),MedalItem=Talent.ItemView.extend({defaults:{isShowRadio:!0},template:jst["evaluation/evaluation-medal"],ui:{medal:"div[data-name='evaluation-edit-medal'] .medal",radio:"[data-name='radio']"},events:function(){var a={};return a["click "+this.ui.radio]="_selectRadio",a["click "+this.ui.medal]="_selectMedal",a},templateHelpers:function(){var a=this,b=this.model.get("data");return Talent._.each(b,function(b,c){b.className=a.medalClass[c]}),{isShowRadio:this.settings.isShowRadio,cType:this.checkedModel.get("cType"),data:b,type:this.checkedModel.get("type")}},initialize:function(a){var b=this;this.settings=Talent.$.extend({},this.defaults,a),this.checkedModel=this.settings.checkedModel,this.medalClass={0:"tw-medal-grade-one",1:"tw-medal-grade-two",2:"tw-medal-grade-three"},this.checkedModel.on("change:type",function(){var a=b.checkedModel.get("type");2!=a&&b.render()})},onRender:function(){this._radioChange()},_selectMedal:function(a){{var b=$(a.currentTarget),c=Number(b.attr("data-index")),d=this.model.get("data")[c];b.find("span")}this.checkedModel.set(d),this.checkedModel.set("type",2),this.render()},_selectRadio:function(){2!=this.checkedModel.get("type")&&(this.ui.radio.attr("class","evaluation-title radio-checked"),this.checkedModel.set({value:0,type:2}))},_radioChange:function(){2==this.checkedModel.get("type")?(this.ui.radio.attr("class","evaluation-title radio-checked"),this.checkedModel.set("type",2)):(this.ui.radio.attr("class","evaluation-title radio"),this.model.set("value",0),this.ui.medal.removeClass("medal-active"))}}),EvaluationScore=Talent.ItemView.extend({defaults:{isShowRadio:!0},template:jst["evaluation/evaluation-score"],ui:{starArea:"[data-name='evaluation-edit-score']",radio:"[data-name='radio']"},templateHelpers:function(){return{isShowRadio:this.settings.isShowRadio}},events:function(){var a={};return a["click "+this.ui.radio]="_selectRadio",a},initialize:function(a){var b=this;this.settings=Talent.$.extend({},this.defaults,a),this.checkedModel=this.settings.checkedModel,1==this.checkedModel.get("type")?this.checkedModel.get("cType")!=this.model.get("cType")?this.model.set("value",0):this.model.set("value",this.checkedModel.get("value")):this.model.set("value",0),this.checkedModel.on("change:type",function(){b._radioChange()})},onRender:function(){this.evaluationStarView=new EvaluationStarView({model:this.model}),this.listenTo(this.evaluationStarView,"selectStar",function(a){this._selectRadio(),this.model.set("value",a.value),this.model.set("type",1),this.checkedModel.set(this.model.toJSON())},this),this.evaluationStarView.setElement(this.ui.starArea),this.evaluationStarView.render(),this._radioChange()},_radioChange:function(){1==this.checkedModel.get("type")?(this.ui.radio.attr("class","evaluation-title radio-checked"),this.checkedModel.set({cType:this.model.get("cType"),name:""})):(this.ui.radio.attr("class","evaluation-title radio"),this.model.set("value",0))},_selectRadio:function(){1!=this.checkedModel.get("type")&&(this.$el.removeClass("nochecked"),this.ui.radio.attr("class","evaluation-title radio-checked"),this.model.set("value",0),this.checkedModel.set(this.model.toJSON()))}}),EvaluationEditView=Talent.Layout.extend({defaults:{types:[2,1,4],customOptions:{1:[{name:"综合评分",lvl:5,goal:2,cType:0}],2:[{name:"太棒了！",lvl:0,goal:0,cType:1},{name:"干的不错！",lvl:0,goal:0,cType:2},{name:"再接再厉!",lvl:0,goal:0,cType:3}],4:[{name:"3",lvl:5,goal:2,cType:3},{name:"2",lvl:5,goal:2,cType:2},{name:"4",lvl:5,goal:2,cType:4},{name:"5",lvl:5,goal:2,cType:5}],remark:""},data:"",remark:""},template:jst["evaluation/evaluation-edit"],regions:{scoreContainer:"[data-name='evaluation-edit-score']",dimensionContainer:"[data-name='evaluation-edit-dimension']",medalContainer:"[data-name='evaluation-edit-medal']"},ui:{commentText:"[data-name='comment']",btnSure:"[data-name='evaluation-save']",btnCancel:"[data-name='evaluation-cancel']"},events:function(){var a={};return a["keyup "+this.ui.commentText]="_keyupHandler",a["click "+this.ui.btnSure]="_saveEvaluation",a["click "+this.ui.btnCancel]="_cancelEdit",a},initialize:function(a){var b=this;this.settings=Talent.$.extend({},this.defaults,a),this.customOptions=this.settings.customOptions,this.model.set({remark:this.settings.remark,data:this.settings.data}),this.data=this.settings.data||[];for(var c=[],d={},e=0;e<this.data.length;e++)4==this.data[e].type?c.push(this.data[e]):d=this.data[e];this.weiduCollection=new Talent.Collection(c),this.checkedModel=new Talent.Model(d),this.checkedModel.on("change",function(){b._changeBtn()}),this._formatData()},onRender:function(){this.model.get("isShowScores")&&(this._showScoreItemView(),this.model.get("isShowDimensions")&&this._showDimensionView()),this.model.get("isShowMedal")&&this._showMedalItemView(),this.ui.commentText.focus(function(a){var b=$(a.currentTarget);b.val()==b.attr("placeholder")&&b.val("").removeClass("placeholder")}).blur(function(a){var b=$(a.currentTarget);""==b.val()&&b.val(b.attr("placeholder")).addClass("placeholder")})},_formatData:function(){{var a=this.settings,b=a.types,c=Talent._.indexOf(b,1)>-1?!0:!1,d=Talent._.indexOf(b,4)>-1&&c?!0:!1,e=Talent._.indexOf(b,2)>-1?!0:!1,f=c&&e;this.model.get("medalInfos")}this.model.set({isShowScores:c,isShowDimensions:d,isShowMedal:e,isShowRadio:f}),f?this.$el.addClass("has-radio"):this.$el.removeClass("has-radio")},_changeBtn:function(){var a=Number(this.checkedModel.get("value"));0==a?this.ui.btnSure.addClass("btn-disabled"):this.ui.btnSure.removeClass("btn-disabled")},_keyupHandler:function(a){var b=$(a.currentTarget),c=Talent.$.trim(b.val());return c.length>1e3?!1:(b.removeClass("input-error").addClass("input-focus"),this.model.set("remark",c),this._changeBtn(),void 0)},_cancelEdit:function(a){this.trigger("cancel"),a.stopPropagation()},_saveEvaluation:function(a){var b=this.checkedModel.toJSON();if(0!=b.value){var c=Talent.$(a.currentTarget),d=[];if(d.push(b),1==this.checkedModel.get("type")&&this.model.get("isShowDimensions"))for(var e=this.dimensionView.collection.toJSON(),f=0;f<e.length;f++)0!==e[f].value&&(d=d.concat(e[f]));this.trigger("submit",c,{evaluateInfos:d,remark:this.model.get("remark")})}},_showScoreItemView:function(){this.scoreView=new EvaluationScore({data:this.settings.data,model:new Talent.Model(this.customOptions[1][0]),isShowRadio:this.model.get("isShowRadio"),checkedModel:this.checkedModel}),this.listenTo(this.scoreView,"selectValue",this._itemCheck),this.scoreContainer.show(this.scoreView)},_showMedalItemView:function(){for(var a=this.customOptions[2],b=0;b<a.length;b++)a[b].value=b+1;this.medalView=new MedalItem({data:this.settings.data,model:new Talent.Model({data:a}),isShowRadio:this.model.get("isShowRadio"),checkedModel:this.checkedModel}),this.listenTo(this.medalView,"selectValue",this._itemCheck),this.medalContainer.show(this.medalView)},_showDimensionView:function(){for(var a=this.customOptions[4],b=0;b<a.length;b++){var c=a[b].cType,d=this.weiduCollection.findWhere({cType:c});a[b].value=d?d.get("value"):0}this.dimensionView=new MutiDimensionView({collection:new Talent.Collection(a),checkedModel:this.checkedModel,weiduCollection:this.weiduCollection}),this.listenTo(this.dimensionView,"score",function(){this._changeBtn()}),this.dimensionContainer.show(this.dimensionView)}}),EvaluationListItemView=Talent.ItemView.extend({defaults:{evaluationObject:"",customOptions:""},className:"evaluation-item-box",template:jst["evaluation/evaluation-list-item"],ui:{doEvaluation:"[data-name=do-evaluation]",editEvaluation:"[data-name=evaluation-edit]",showDetailTop:"[data-name=showDetail-top]",showDetail:"[data-name='showDetail']",showAllComment:"[data-name='show-comment']",weiduList:"[data-name=evaluation-weidu-list]"},modelEvents:{"change:commentShowAll":"render","change:viewMode":"render"},templateHelpers:function(){for(var a=this.model.get("remark"),b=_.substring(a,300,!0),c=this.model.get("evaluateInfos"),d=[],e=0;e<c.length;e++)4==c[e].type&&d.push(c[e]);return{evaluationObject:this.settings.evaluationObject,substringRemark:b,dimensionInfos:d,isAdd:this.settings.isAdd}},events:function(){var a={};return a["click "+this.ui.doEvaluation]="_renderEvaluationEditView",a["click "+this.ui.editEvaluation]="_renderEvaluationEditView",a["click "+this.ui.showDetailTop]="_viewDimension",a["click "+this.ui.showDetail]="_viewDimension",a["click "+this.ui.showAllComment]="_showDetail",a},initialize:function(a){this.settings=Talent.$.extend({},this.defaults,a),this.medalClass={1:"medal-grade-one",2:"medal-grade-two",3:"medal-grade-three"},this._settingData(),this.listOpen=!1},onRender:function(){},_showDetail:function(a){a.stopPropagation(),1==this.model.get("commentShowAll")?this.model.set("commentShowAll",!1):this.model.set("commentShowAll",!0)},_viewDimension:function(a){a.stopPropagation(),this.listOpen?(this.ui.showDetailTop.show(),this.ui.weiduList.hide(),this.listOpen=!1):(this.ui.showDetailTop.hide(),this.ui.weiduList.show(),this.listOpen=!0)},_settingData:function(){var a=[],b=[],c=[],d=this.model.get("evaluateInfos"),e=(this.settings.CompositeOptions,this.model.get("remark")||"完成的不错，继续努力！");if(d.length>0)for(var f=d.length-1;f>=0;f--){var g=d[f],h=g.type;1==h&&b.push(g),2==h&&(h=h.toString(),g.className=this.medalClass[g.value],a.push(g)),4==h&&c.push(g)}this.model.set({viewMode:"simple",dimensionInfos:c,medalInfos:a,scoreInfos:b,remark:e,commentShowAll:!1})},_renderEvaluationEditView:function(){this.evaluationEditView=new EvaluationEditView({data:this.model.get("evaluateInfos"),customOptions:this.settings.customOptions,types:this.settings.customOptions.types,remark:this.model.get("remark")}),this.listenTo(this.evaluationEditView,"submit",function(a,b){this.model.set({evaluateInfos:b.evaluateInfos,remark:b.remark}),this.trigger("saveEvaluation",a,b),this.render()},this),this.listenTo(this.evaluationEditView,"cancel",function(){this.render(),this.$el.removeClass("active")},this),this.$el.html(this.evaluationEditView.render().$el).addClass("active")}}),EvaluationView=Talent.CompositeView.extend({defaults:{evaluationObject:"还没有对任务进行评价",isAdd:!1,customOptions:{types:[2,1,4],1:[{name:"综合评分",lvl:5,goal:2,cType:0}],2:[{name:"太棒了！",lvl:0,goal:0,cType:1},{name:"干的不错！",lvl:0,goal:0,cType:2},{name:"再接再厉!",lvl:0,goal:0,cType:3}],4:[{name:"3",lvl:5,goal:2,cType:3},{name:"2",lvl:5,goal:2,cType:2},{name:"4",lvl:5,goal:2,cType:4},{name:"5",lvl:5,goal:2,cType:5}]}},itemView:EvaluationListItemView,itemViewContainer:this.el,template:_.template(""),initialize:function(a){var b=this;this.settings=Talent.$.extend({},this.defaults,a),this.settings.options=Talent.$.extend({},this.defaults,a),this.on("itemview:saveEvaluation",function(a,c,d){b.trigger("saveEvaluation",c,d)})},itemViewOptions:function(){return{customOptions:this.settings.customOptions,evaluationObject:this.settings.evaluationObject,isAdd:this.settings.isAdd}},events:function(){var a={};return a},onRender:function(){}}),ImgPreviewInfoView=Talent.ItemView.extend({className:"info_ip",template:jst["img-preview/img-preview-info"],modelEvents:{"change:previewUrl":"render"},ui:{deleted:"li[data-name=img-preview-delete]"},events:function(){var a={};return a["click "+this.ui.deleted]="_deleteHandler",a},_deleteHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=b.attr("id");this.trigger("deleted",c)}}),ImgPreviewContentItemView=Talent.ItemView.extend({template:jst["img-preview/img-preview-content-item"],tagName:"li",templateHelpers:function(){return{previewUrl:this.model.get("previewUrl").replace(/\_b/,"_s")}},modelEvents:{"change:active":"render"},onRender:function(){this.$el.height();this.model.get("active")?this.$el.addClass("active"):this.$el.removeClass("active")}}),ImgPreviewContentView=Talent.CompositeView.extend({className:"img-preview-dialog",template:jst["img-preview/img-preview-content"],itemView:ImgPreviewContentItemView,itemViewContainer:"ul[data-name=thumb-list]",modelEvents:{"change:praiseTotal":"render"},ui:{originLeft:'span[data-name="origin-left"]',originRight:"span[data-name=origin-right]",originBox:"div[data-name=origin-box]",thumbPre:"div[data-name=thumb-pre]",thumbNext:"div[data-name=thumb-next]",button_thumbPre:"div[data-name=thumb-pre] span",button_thumbNext:"div[data-name=thumb-next] span",thumbListBox:"div[data-name=thumb-list-box]",thumbList:"ul[data-name=thumb-list]",thumbList_item:"ul[data-name=thumb-list] li",infoBox:"div[data-name=img-preview-info]",overlay:"div[data-name=img-preview-overlay]"},events:function(){var a={};return a["click "+this.ui.thumbPre]="_thumbPreHandler",a["click "+this.ui.thumbNext]="_thumbNextHandler",a["click "+this.ui.thumbList_item]="_thumbItemHandler",a["click "+this.ui.originLeft]="_originLeftHandler",a["click "+this.ui.originRight]="_originRightHandler",a},initialize:function(){this.model.set("thumbList",this.collection.toJSON()),this.loadingView=new LoadingView,this._dealAllPositon(),this.thumb_page_index=0,this.thumb_index=0,this.animateIng=!1,this.options.index&&(this.thumb_index=this.options.index),this.imgFirstModel=this.collection.slice(this.thumb_index,this.thumb_index+1)[0],this.imgFirstModel.set("active",!0),this.$el.on("click",function(a){a.stopPropagation()})},appendHtml:function(a,b){var c=this.getItemViewContainer(a);b.model.get("isImage")&&c.append(b.el)},onShow:function(){this.ui.originBox.html(this.loadingView.render().el),this._setAllWH(),this._renderOriginImg(),this.ui.button_thumbPre.hide(),this._renderInfoView(this.imgFirstModel),this.ui.thumbList_item.removeClass("active"),this.ui.thumbList_item.eq(this.thumb_index).addClass("active")},hide:function(){this.close()},_renderInfoView:function(a){this.imgPreviewInfoView=new ImgPreviewInfoView({model:a}),this.listenTo(this.imgPreviewInfoView,"deleted",function(a){var b=this.collection.get(a);this.collection.remove(b),0==this.collection.length&&this.trigger("closed"),--this.thumb_index,this.thumb_index<0&&(this.thumb_index=0),this._collectionChangeActive(),this._renderOriginImg(),this._setAllWH()}),this.ui.infoBox.html(this.imgPreviewInfoView.render().el)},_dealAllPositon:function(){var a=this.model.get("dialogW"),b=this.model.get("dialogH"),c=128,d=90,e=a-c,f=b-d;this.model.set({originW:e,originH:f,originPageTop:f/2-22})
},_setAllWH:function(){var a=this.model.get("originW"),b=this.model.get("originH"),c=Talent._.where(this.collection.toJSON(),{isImage:!0}).length,d=78;this.ui.originBox.width(a).height(b);var e=Math.floor((b-44)/d)*d;this.ui.thumbListBox.height(e),this.model.set("thumbListBoxHeight",e);var f=c*d;this.ui.thumbList.height(f),this.thumb_pagesize=Math.ceil(f/e),e>f?(this.ui.thumbPre.hide(),this.ui.thumbNext.hide(),this.ui.thumbList.css("margin-top",(e-f)/2)):(this.ui.thumbPre.show(),this.ui.thumbNext.show(),this.ui.thumbList.css("margin-top",""))},_renderOriginImg:function(){var a=this.thumb_index,b=this.collection.slice(a,a+1)[0];if(b){var c=this,d=b.get("previewUrl"),e=new Image;e.onload=function(){c.ui.originBox.html("");var a=e.width,b=e.height,f=c._setImg(a,b);c.ui.originBox.html('<img src="'+d+'" style="'+f.css+'">')},e.src=d}},_setImg:function(a,b){var c=this.model.get("originW"),d=this.model.get("originH"),e=this._fixImgSize(a,b,c,d),f=(d-e.h)/2,g=(c-e.w)/2;return{width:e.widht,height:e.height,"margin-top":f,"margin-left":g,css:"width:"+e.w+"px;height:"+e.h+"px;margin-top:"+f+"px;"}},_fixImgSize:function(a,b,c,d){var e={w:0,h:0},f=a,g=b,h=c,i=d;if(f>0&&g>0){var j=h/i,k=f/g;f>h||g>i?k>j?(e.w=h,e.h=g*(h/f)):(e.w=f*(i/g),e.h=i):(e.w=f,e.h=g)}else e.w=f,e.h=g;return e},_originLeftHandler:function(a){a.stopPropagation();Talent.$(a.currentTarget);--this.thumb_index,this.thumb_index<0&&(this.thumb_index=0),this._collectionChangeActive(),this._renderOriginImg()},_originRightHandler:function(a){a.stopPropagation();Talent.$(a.currentTarget);++this.thumb_index,this.thumb_index>this.collection.length&&(this.thumb_index=this.collection.length),this._collectionChangeActive(),this._renderOriginImg()},_thumbPreHandler:function(a){if(a.stopPropagation(),!this.animateIng){this.animateIng=!0;var b=this;--this.thumb_page_index,this.thumb_page_index<0&&(this.thumb_page_index=0),0==this.thumb_page_index&&this.ui.button_thumbPre.hide();var c=this.model.get("thumbListBoxHeight");movelong=this.thumb_page_index*c,this.animateIng=!0,this.ui.thumbList.stop().animate({"margin-top":-movelong},function(){b.animateIng=!1}),this.ui.button_thumbNext.show()}},_thumbNextHandler:function(){if(!this.animateIng){this.animateIng=!0;var a=this;if(++this.thumb_page_index,this.thumb_page_index>this.thumb_pagesize||this.thumb_page_index==this.thumb_pagesize)return void(this.thumb_page_index=this.thumb_pagesize);this.thumb_pagesize-1==this.thumb_page_index&&this.ui.button_thumbNext.hide();var b=this.thumb_page_index*this.model.get("thumbListBoxHeight");this.ui.thumbList.stop().animate({"margin-top":-+b},function(){a.animateIng=!1}),this.ui.button_thumbPre.show()}},_thumbItemHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=b.index();this.thumb_index=c,this.ui.originBox.html(this.loadingView.render().$el),this._collectionChangeActive(),this._renderOriginImg()},_collectionChangeActive:function(){var a=this;this.collection.each(function(b,c){b.set("active",!1),c==a.thumb_index&&(b.set("active",!0),a._renderInfoView(b))})}}),ImgPreviewView=Talent.ItemView.extend({defaults:{index:0},className:"img-preview-dialog-wrap",template:jst["img-preview/img-preview"],modelEvents:{"change:praiseTotal":"render"},ui:{praise:'span[data-name="feed-praise-praise"]',allUser:"span[data-name=feed-praise-all]"},events:function(){var a={};return a},initialize:function(){},onRender:function(){this._setWidthHeight(),this._createBackground()},_setWidthHeight:function(){var a=Talent.$(window).width(),b=Talent.$(window).height();return{windowW:a,windowH:b,dialogW:a>1200?1200:a,dialogH:b-40}},_createBackground:function(){var a=this._setWidthHeight(),b=Talent.Model.extend({idAttribute:"documentId"}),c=Talent.Collection.extend({model:b});this.imgPreviw=new ImgPreviewContentView({collection:new c(this.collection.toJSON()),index:this.options.index||0,model:new Talent.Model({dialogW:a.dialogW,dialogH:a.dialogH})}),this.listenTo(this.imgPreviw,"closed",function(){this.close()}),this.dailogView=new Simplemodal({autoResize:!0,minHeight:a.dialogH,minWidth:a.dialogW,escClose:!0,fixed:!0,zIndex:1300,overlayClose:!1,fixed:!0,containerCss:{background:"transparent",border:"none"},closeHTML:'<a class="img-previe-close" title="Close"></a>',onClose:function(){this.close()}}),this.dailogView.render(this.imgPreviw.render().el).appendTo("body"),this.imgPreviw.onShow(),Talent.$("body").on("click",".simplemodal-overlay",function(a){a.stopPropagation()}),Talent.$("body").on("click",".simplemodal-close",function(a){a.stopPropagation()})},onClose:function(){this.dailogView.close(),this.imgPreviw.close()}}),LoadingView=Talent.ItemView.extend({defaults:{y:20},template:Talent._.template('<span class="img-load"></span><span>努力加载中...</span>'),className:"tt_common_loading",initialize:function(a){this.settings=Talent._.extend({},this.defaults,a)},onRender:function(){this.$el.css({"padding-top":this.settings.y-16})},hide:function(){this.$el.hide()},show:function(){this.$el.show()}}),ClassTreeItemView=Talent.CompositeView.extend({template:jst["class/class-tree-item"],tagName:"li",initialize:function(){this.userInfo=Context.getUserInfo(),this.collection=this.model.children},ui:{enterprise:"span[data-name=enterprise]",person:"span[data-name=person]",permission:"span[data-name=lock-permission]"},appendHtml:function(a,b){a.$el.find("ul:first").append(b.el)},templateHelpers:function(){var a=!0;return 2==this.userInfo.Role?a=!0:this.model.get("IsTenant")&&(a=!1),{isEdit:a}},onRender:function(){this.$el.attr({id:this.model.get("id"),parent_id:this.model.get("parent_id"),"data-end":this.model.get("isEnd"),fullName:this.model.get("fullName"),ifAddClass:this.model.get("IsAllowSetPersonalLable")}),this._headIcoTispy()},_headIcoTispy:function(){Talent.$(this.ui.enterprise).tipsy({fallback:"企业分类",gravity:"s"}),Talent.$(this.ui.person).tipsy({fallback:"个人分类",gravity:"s"}),Talent.$(this.ui.permission).tipsy({fallback:"该分类下不允许添加个人分类",gravity:"s"})}}),ClassNewFolderView=Talent.ItemView.extend({defaults:{type:"new",nameLen:200},template:jst["class/class-new"],tagName:function(){return"rename"==this.options.type?"div":"li"},ui:{inputwrap:"div[data-name=file-move-new-input-warp]",input:"div[data-name=file-move-new-input-warp] input",sure:"span[data-name=file-move-new-submit]",cancel:"span[data-name=file-move-new-cancel]",form:"form[data-name=file-move-new-form]"},events:function(){var a={};return a.click="_elHandler",a["focus "+this.ui.input]="_focusHandler",a["blur "+this.ui.input]="_blurHandler",a["keyup "+this.ui.input]="_keyupHandler",a["click "+this.ui.sure]="_sureHandler",a["click "+this.ui.cancel]="_cancelHandler",a["submit "+this.ui.form]="_sureHandler",a},templateHelpers:function(){return{type:this.settings.type}},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options),this.$el.attr("data-type","new-folder-form")},_elHandler:function(a){a.stopPropagation()},_focusHandler:function(a){Talent.$(a.currentTarget);this.ui.inputwrap.removeClass("input-error").addClass("input-focus")},_keyupHandler:function(a){var b=Talent.$(a.currentTarget),c=Talent.$.trim(b.val()),d=this.settings.nameLen;return Talent._.isStringBeyondLength(c,d)?(c=Talent._.substringWithM(c,d),b.val(c),!1):void 0},_blurHandler:function(a){var b=Talent.$(a.currentTarget),c=b.val();""==Talent.$.trim(c)&&this.ui.inputwrap.removeClass("input-focus").addClass("input-error")},_sureHandler:function(a){a.stopPropagation(),a.preventDefault();var b=Talent.$(a.currentTarget),c=this.ui.input.val();this.model.set("name",Talent.$.trim(c)),""==Talent.$.trim(c)?this.ui.inputwrap.removeClass("input-focus").addClass("input-error"):(this.trigger("submit",Talent.$.trim(c),b),this.close())},_cancelHandler:function(a){a.stopPropagation();{var b=Talent.$(a.currentTarget);b.val()}this.ui.inputwrap.removeClass("input-focus").removeClass("input-error"),this.trigger("cancel",this.model.get("name")),this.close()}}),ClassTreeCollectionView=Talent.CollectionView.extend({defaults:{isEdit:!1},itemView:ClassTreeItemView,tagName:"ul",events:function(){var a={};return a["click ul"]="_ulHandler",a["click li div[data-name=title]"]="_checkHandler",a["click li span[data-name=toggle]"]="_toggleHandler",a["click li a[data-name=deleted]"]="_deleteHandler",a["click li a[data-name=edit]"]="_editHandler",a},collectionEvents:{reset:"render"},initialize:function(a){this.options=a,this.settings=Talent._.extend({},this.defaults,this.options),this.activeFolder=this.$el.find("li:first"),this.$el.css({position:"relative"})},onShow:function(){var a=(this.settings.isEdit,this.$el.find("li:first"));a.addClass("unfold")},itemViewOptions:function(){return{isEdit:this.settings.isEdit}},onAfterItemAdded:function(a){this.settings.isEdit||a.$el.find("div[data-name=klass-item-action]").remove()},_ulHandler:function(a){a.stopPropagation()},_toggleHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget).closest("li"),c=b.attr("data-end");"false"==c&&(b.hasClass("unfold")?b.removeClass("unfold"):b.addClass("unfold"))},_checkHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=b.closest("li"),d=(c.attr("data-end"),b.find("div[data-name=title-name]")),e=parseInt(c.attr("id")),f=c.attr("fullName");if(void 0!=f){var g=f.toString(),h=/^(分类\/)/;g=g.replace(h,"")}var i=this.settings.isEdit;"new-folder-form"!=c.attr("data-type")&&(0!=e||i)&&(this.activeFolder=c,this.$el.find("li").removeClass("active"),c.addClass("active"),this.trigger("checked",this.activeFolder,{id:e,name:Talent.$.trim(d.html()),fullName:g,parent_id:parseInt(c.attr("parent_id"))}))},_deleteHandler:function(a){var b=this;a.stopPropagation();var c=Talent.$(a.currentTarget),d=Talent.$(a.currentTarget).closest("li"),e=d.attr("parent_id"),f=c.attr("id");ConfirmDialogView(c,"删除后，该分类下的子类也将删除，同时该分类下的内容将归到未分类下",{container:this.$el,pos:"topRight",topBias:20,sure:function(){b.trigger("delete",{id:f,li:d,call:function(){d.remove();var a=b.$el.find('li[parent_id="'+e+'"]');if(!a.length){var c=b.$el.find('li[id="'+e+'"]');c.hasClass("unfold")&&c.find(".icon_tv").remove()}}})}})},_editHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=b.attr("id"),d=Talent.$(a.currentTarget).closest("li");this._rendRenameView(c,b,d)},_rendRenameView:function(a,b,c){this.renameView&&this.renameView.close();var d=b.closest("div[data-name=title]"),e=d.find("div[data-name=title-name]"),f=e.html();this.renameView=new ClassNewFolderView({type:"rename",model:new Talent.Model({name:f})}),this.listenTo(this.renameView,"submit",function(b){this.trigger("rename",{id:a,name:b,node:c,node_name:e})},this),this.listenTo(this.renameView,"close",function(){e.html(this.renameView.model.get("name"))},this),e.html(this.renameView.render().$el),this.renameView.ui.input.focus()},onClose:function(){}}),ClassSearchView=Talent.ItemView.extend({defaults:{requeseSearchClassData:null},template:jst["class/class-search"],className:"class_search",ui:{content:".class_search_condition_input",lableUl:"ul[data-name=lable-ul]",lableList:"ul[data-name=lable-list]",lableNameItem:"li[data-name=lablename]",contentHolder:".class_search_condition_label",smemberHeaderInput:".class_search_header_input"},initialize:function(a){this.userInfo=Context.getUserInfo(),this.settings=Talent._.extend({},this.defaults,a),this.$el.on("click",function(a){a.stopPropagation()})},events:function(){var a={};return a["focusout .class_search_condition_input"]="onInputFocusOut",a["focusin .class_search_condition_input"]="onInputFocusin",a["click "+this.ui.lableNameItem]="_checkHandler",a["click "+this.ui.contentHolder]="_smemberHandler",a},onRender:function(){var a=this;this.$el.find("#lable-list").hide(),this.$el.find("#lableName").on("keyup",function(){a.lableList()}),this.$el.find("#lableName").on("keypress",function(b){13==b.which&&a.lableList()})},onInputFocusOut:function(){this.ui.smemberHeaderInput.removeClass("input-focus"),""==this.ui.content.val()&&this.ui.contentHolder.show()},_checkHandler:function(a){var b=Talent.$(a.currentTarget);this.$el.find("#lableName").val(b.text());var c=b.attr("parentId"),d=b.attr("id"),e=b.attr("fullname");this.$el.find("#lableName").attr("parentId",c),this.$el.find("#lableName").attr("Ids",d),this.$el.find("#lable-list").hide();var f={};f.id=d,f.name=b.text(),f.fullname=e,this.trigger("checkedLable",f)},_smemberHandler:function(a){this.ui.contentHolder.hide();Talent.$(a.currentTarget);this.$el.find("#lableName").focus()},onInputFocusin:function(){this.ui.smemberHeaderInput.addClass("input-focus"),this.ui.contentHolder.hide();var a=Talent.$.trim(this.ui.content.val());return null==a||""==a?void this.$el.find("#lable-list").hide():void 0},lableList:function(){var a=this,b=Talent.$.trim(this.ui.content.val());if(null==b||""==b)return void this.$el.find("#lable-list").hide();var c=LableCollection.searchClassData;this.settings.searchClassData&&(c=this.settings.requeseSearchClassData),c({user_id:this.userInfo.Id,filter:b}).done(function(b){a._listPlan(b.lables)}).fail(function(){})},_listPlan:function(a){var b="";null!=a&&a.length>0?Talent._.each(a,function(a){""!=a.name&&null!=a.name&&void 0!=a.name&&(b+='<li data-name="lablename" parentId ="'+a.parent_id+'" id="'+a.id+'">'+a.name+"</li>")}):b+="<li>无搜索结果</li>",this.ui.lableUl.empty(),this.ui.lableUl.append(b),this.$el.find("#lable-list").show()}}),ClassProjectTabItemView=Talent.ItemView.extend({className:"class_project_tab",template:jst["class/class-project-tab"],ui:{tabA:"a"},initialize:function(){this.$el.on("click",function(a){a.stopPropagation()})},events:function(){var a={};return a["click "+this.ui.tabA]="_clickTabName",a},_clickTabName:function(a){this.$el.find("a").removeClass("current");var b=Talent.$(a.currentTarget);b.addClass("current"),this.trigger("changeTree",b.attr("data-id"))},onRender:function(){}}),ClassView=Talent.Layout.extend({defaults:{showTitle:!1,showButtonSure:!1,showButtonAdd:!1,showButtonReset:!1,showButtonCancel:!1,isEdit:!1,isShowSearch:!1,isShowProjectTab:!1,multi:!1},template:jst["class/class"],className:"tt_class_tree",ui:{closed:"span[data-name=klass-move-close]",newFolder:"button[data-name=klass-move-new-folder]",submit:"button[data-name=klass-move-submit]",title:"div[data-name=title]",actionArea:"div[data-name=klass-action]",emptyArea:"div[data-name=empty]",buttonReset:"button[data-name=klass-move-reset]",buttonCancel:"button[data-name=klass-move-cancel]",searchClass:"div[data-name=search-class]"},regions:{tree:"div[data-name=tree]",emptyArea:"div[data-name=empty]",classProjectTab:'div[data-name="class-project-tab"]',checkedTypeList:"[data-name=class-data-checked]"},collectionEvents:{reset:"_collectionReset"},_collectionReset:function(){var a=this.settings.isEdit,b=this.collection.toJSON()[0],c=b.children||[];a?b.length&&this.model.set({id:b[0].id,name:b[0].name}):this.model.set(c.length?{id:c[0].id,name:c[0].name}:{id:0,name:""}),this.render(),this._renderEmptyView()},events:function(){var a={};return a["click "+this.ui.closed]="_closeHandler",a["click "+this.ui.submit]="_submitHandler",a["click "+this.ui.newFolder]="_newFolderHandler",a["click "+this.ui.buttonReset]="_resetHandler",a["click "+this.ui.buttonCancel]="_closeHandler",a["focus "+this.ui.newFolderForm_input]="_focusNewFolderHandler",a},initialize:function(a){this.settings=Talent._.extend({},this.defaults,this.options),this.addAjax=!1,this.model.set({id:0,name:"",parent_id:0}),Talent.$(document).on("mouseup.documentlist_permissions",function(){$(document).find(".documentlist_permissions").hide(),$(document).find(".activeClass").hide()}),this.$el.on("click",function(a){a.stopPropagation()}),this.settings.multi&&(this.checkedCollection=new Talent.Collection,a.checkedClassCollection&&(this.checkedCollection=a.checkedClassCollection))},onRender:function(){var a=this;this._customView(),this.settings.isShowProjectTab?(this._renderClassProjectTabView(),setTimeout(function(){a._changeClassViewCollection(2771)},0)):this._renderTreeView(),this.settings.isShowSearch&&this._searchView(),this.settings.multi&&this._renderCheckedClassCompositeView()},_renderClassProjectTabView:function(){var a=this;this.classProjectTabView=new ClassProjectTabItemView,this.classProjectTab.show(this.classProjectTabView),this.listenTo(this.classProjectTabView,"changeTree",function(b){a._changeClassViewCollection(b)})},_changeClassViewCollection:function(a){if(0!=a){var b=this.collection.toJSON(),c=b[0].children,d=[];Talent._.each(c,function(b){b.id==a&&d.push(b)}),b[0].children=d,this._renderTreeView(b),this.$el.find('li[id="'+a+'"]').addClass("unfold")}else this._renderTreeView()},_searchView:function(){var a=this;this.searchView=new ClassSearchView({requeseSearchClassData:this.settings.requeseSearchClassData}),this.listenTo(this.searchView,"checkedLable",function(b){var c=a.$el.find('div[data-name="tree"] li[id="'+b.id+'"]').attr("fullname");b.fullname=c,a.trigger("checkedLable",b),a._currentLiTree(b),a.settings.multi&&a.checkedCollection.push(b)}),this.ui.searchClass.append(this.searchView.render().el)},_currentLiTree:function(a){function b(a){var d=c.$el.find("div[data-name='tree'] li[id="+a+"]");if(d.length&&0!=a){var e=d.attr("parent_id");d.addClass("unfold"),b(e)}}var c=this,d=c.$el.find('div[data-name="tree"] li[id="'+a.id+'"]').attr("parent_id");b(d);var e=this.$el.find('div[data-name="tree"] li[id="'+a.id+'"]');this.$el.find('div[data-name="tree"] li').removeClass("active"),e.addClass("active"),this.activeFolder=e,this.model.set({id:a.id,name:a.name,fullName:a.fullname,parent_id:d});var f=this.$el.find('div[data-name="tree"] li[id="'+a.id+'"]').position();this.trigger("scrollTop",{id:a.id,top:f.top})},setPosition:function(a,b){var c=a.offset(),d=a.outerWidth(),e=a.outerHeight(),f=this.$el,g=f.outerWidth(),h={pos:"left"},b=Talent._.extend({},h,b);this.$el.css("right"==b.pos?{top:c.top+e+5,left:c.left-g+d}:{top:c.top+e+5,left:c.left})},_renderEmptyView:function(){var a=this.settings.isEdit,b='请到<a href="#set?page_id=class">个人设置</a>下设置分类';a&&(b="点击 添加类别 添加分类"),this.ui.emptyArea.hide();var c=this.collection.toJSON();if(c.length&&c[0]&&c[0].children)return void this.ui.emptyArea.hide();var d=new EmptyView({emptyContext:b});this.emptyArea.show(d),this.ui.emptyArea.show()},_customView:function(){this.settings.showTitle||this.ui.title.remove(),this.settings.showButtonSure||this.ui.submit.remove(),this.settings.showButtonAdd||this.ui.newFolder.remove(),this.settings.showButtonSure||this.settings.showButtonAdd||this.ui.actionArea.remove(),this.settings.showButtonReset||this.ui.buttonReset.remove(),this.settings.showButtonCancel||this.ui.buttonCancel.remove(),this.settings.multi||this.$el.find(".class_data_search_content_center,.class_data_search_content_right").remove()},_submitHandler:function(a){var b=Talent.$(a.currentTarget),c=null,d=null,e=null,f=this.model.get("name");""==f?(d=this.searchView.$el.find("#lableName").attr("ids"),c=this.searchView.$el.find("#lableName").val(),e=this.searchView.$el.find("#lableName").attr("parentid")):(d=this.model.get("id"),c=this.model.get("name"),e=this.model.get("parent_id")),this.model.set("id",d),this.model.set("parent_id",e),this.model.set("name",c);var g=this.treeView.collection.models[0].children;g&&!g.length?this.trigger("submit",{id:"",name:"",parent_id:""},b):this.settings.multi?this.trigger("submit",this.checkedCollection.toJSON(),b):this.trigger("submit",{id:this.model.get("id"),name:this.model.get("name"),parent_id:this.model.get("parent_id")},b),this.close()},_resetHandler:function(a){Talent.$(a.currentTarget);this.trigger("reset")},_closeHandler:function(a){Talent.$(a.currentTarget);this.trigger("closed"),this.close()},_newFolderHandler:function(a){var b=Talent.$(a.currentTarget),c=this;this.newFolderView&&this.newFolderView.close(),this.newFolderView=new ClassNewFolderView,this.listenTo(this.newFolderView,"submit",function(a){this.trigger("new",{name:a,parent_id:this.model.get("id"),node:b,call:function(a){a.isEnd=!0;var b=new ClassTreeItemView({model:new Talent.Model(a)});c.activeFolder.find("ul:first").prepend(b.render().el),c.activeFolder.attr("data-end",!1),c.ui.emptyArea.hide();var d=a.parent_id;c._addTreeCollectionIcon(d)}})},this),this.listenTo(this.newFolderView,"cancel",function(){var a=this.activeFolder.attr("data-end");"true"==a&&this.activeFolder.removeClass("unfold")},this);{var d=this.activeFolder.attr("ifaddclass");this.activeFolder.attr("fullname")}"false"!=d?(this.activeFolder.addClass("unfold"),this.activeFolder.find("ul:first").prepend(this.newFolderView.render().el),this.newFolderView.ui.input.focus()):c._tipDialogView(b,"该分类下不允许创建个人分类")},_addTreeCollectionIcon:function(a){var b=this.$el.find("li [id='"+a+"']");this.$el.find("#iconTv").removeAttr("id"),b.children(":first").prepend('<span id="iconTv"  class="icon_tv" data-name="toggle"></span>')},_tipDialogView:function(a,b,c){var d=this;this.tDialogView&&this.tDialogView.close(),this.tDialogView=new TDialogView({type:"tipsy",quirkTheme:!1,sure:function(){c&&c(),d.tDialogView.close()},cancel:function(){d.tDialogView&&d.tDialogView.close()}}),this.tDialogView.render().$el.appendTo("body"),this.tDialogView.show(a,b,{arrow:!1,pos:"topCenter",className:"warn"})},_renderTreeView:function(a){var b=this,c=Backbone.Model.extend({initialize:function(){var a=this.get("children");a&&(this.children=new d(a),this.unset("children"))}}),d=Talent.Collection.extend({model:c});if(a)var e=a;else var e=this.collection.toJSON();this.treeView=new ClassTreeCollectionView({collection:new d(e),isEdit:this.settings.isEdit}),this.activeFolder=this.treeView.$el,this.listenTo(this.treeView,"delete",function(a,c){b.trigger("delete",a,c),a.id==this.model.get("id")&&this.model.set({id:"",name:"",parent_id:"",fullName:""})}),this.listenTo(this.treeView,"rename",function(a){var c=a.node;c.attr("id")==this.activeFolder.attr("id")&&this.model.set("name",a.name),b.trigger("rename",a)}),this.listenTo(this.treeView,"rename",function(a){var b=a.node;b.attr("id")==this.activeFolder.attr("id")&&this.model.set("name",a.name)}),this.listenTo(this.treeView,"checked",function(a,c){this.settings.multi?(this.activeFolder=a,b.checkedCollection.push({id:c.id,name:c.name,fullName:c.fullName,type:17}),b.trigger("checked",b.checkedCollection.toJSON())):(this.activeFolder=a,this.model.set({id:c.id,name:c.name,fullName:c.fullName,parent_id:c.parent_id}),this.trigger("checked",{id:c.id,name:c.name,fullName:c.fullName,parent_id:c.parent_id}))},this),this.tree&&this.tree.show(this.treeView),this.activeFolder=this.treeView.$el.find("ul:first").find("li:first").length?this.treeView.$el.find("ul:first").find("li:first"):this.treeView.$el.find("li:first"),this.activeFolder.addClass("active"),this.model.set({id:this.activeFolder.attr("id"),name:this.activeFolder.find("[data-name=title-name]:first").html(),fullName:this.activeFolder.attr("fullName"),parent_id:this.activeFolder.attr("parent_id")})},onClose:function(){Talent.$(document).off("click.documentlist_permissions"),this.tDialogView&&this.tDialogView.close()},_renderCheckedClassCompositeView:function(){var a=this;this.checkedClassCompositeView=new CheckedClassCompositeView({collection:a.checkedCollection}),this.checkedTypeList.show(this.checkedClassCompositeView)}}),WorkListItemView=Talent.ItemView.extend({template:jst["class/work-item"],tagName:"li",onRender:function(){this.$el.attr("id",this.model.get("WorkId"))}}),WorkListView=Talent.CompositeView.extend({defaults:{isDefaultChecked:!0},itemView:WorkListItemView,itemViewContainer:"ul",template:jst["class/work-list"],className:"tt_klass_work",events:{"click li":"_chekcoutItemHandler","click div[data-name=work-title]":"_toggleHandler"},ui:{workList:"ul[data-name=work-list]"},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options),this.collection.model=Talent.Model.extend({idAttribute:"WorkId"}),this.$el.on("click",function(a){a.stopPropagation()})},onRender:function(){this.settings.isDefaultChecked&&this.$el.find("li:first").addClass("active")},_toggleHandler:function(a){var b=Talent.$(a.currentTarget),c=b.next("ul"),d=c.is(":hidden");this.ui.workList.hide(),d?(b.find("span[data-name=toggle]").removeClass("icon-minus-square").addClass("icon-minus-square"),c.show()):(b.find("span[data-name=toggle]").removeClass("icon-minus-square").addClass("icon-plus-square"),c.hide())},_chekcoutItemHandler:function(a){var b=Talent.$(a.currentTarget),c=b.attr("id"),d=this.collection.get(parseInt(c));this.$el.find("li").removeClass("active"),b.addClass("active"),this.trigger("checked",{id:c,name:d.get("WorkName")})}}),WorkView=Talent.Layout.extend({defaults:{showTitle:!1,showButtonSure:!1,showButtonAdd:!1,showButtonCancel:!1,multi:!1},template:jst["class/work"],itemFolderTemplate:jst["class/class-move-item"],className:"tt_class_tree",ui:{closed:"span[data-name=work-move-close]",newFolder:"button[data-name=work-move-new-folder]",submit:"button[data-name=work-move-submit]",title:"div[data-name=work-move-title]",actionArea:"div[data-name=work-action]",emptyArea:"div[data-name=empty]",buttonCancel:"button[data-name=work-move-cancel]",buttonReset:"button[data-name=work-move-reset]"},regions:{workBox:"div[data-name=work-box]",workJoinBox:"div[data-name=work-box-join]",emptyArea:"div[data-name=empty]",checkedTypeList:"[data-name=class-data-checked]"},collectionEvents:{reset:"_collectionReset"},_collectionReset:function(){var a=this.collection.toJSON()||[],b=this.joinCollection.toJSON()||[];a.length?this.model.set({id:a[0].WorkId,name:a[0].WorkName}):b.length&&this.model.set({id:b[0].WorkId,name:b[0].WorkName}),this.render()},templateHelpers:function(){return{i18n:this.i18n}},events:function(){var a={};return a["click "+this.ui.closed]="_closeHandler",a["click "+this.ui.buttonCancel]="_closeHandler",a["click "+this.ui.buttonReset]="_resetHandler",a["click "+this.ui.submit]="_submitHandler",a["click "+this.ui.newFolder]="_newFolderHandler",a["focus "+this.ui.newFolderForm_input]="_focusNewFolderHandler",a},initialize:function(a){this.i18n=Context.getI18n(),this.settings=Talent._.extend({},this.defaults,this.options),this.addAjax=!1,this.model.set({id:0,name:""}),this.joinCollection=this.options.joinCollection?this.options.joinCollection:new Talent.Collection,this.listenTo(this.joinCollection,"reset",this._collectionReset),this.settings.multi&&(this.checkedCollection=new Talent.Collection,a.checkedClassCollection&&(this.checkedCollection=a.checkedClassCollection))},onRender:function(){this._customView(),this._rendWorkListView(this.workBox,this.collection,"create"),this._rendWorkListView(this.workJoinBox,this.joinCollection,"join"),this._renderEmptyView(),402==this.model.get("type")&&this.workJoinBox.$el.hide(),this.settings.multi&&this._renderCheckedClassCompositeView()},setPosition:function(a){var b=a.offset(),c=a.outerWidth(),d=a.outerHeight(),e=this.$el,f=e.outerWidth();this.$el.css("right"==pos?{top:b.top+d+5,left:b.left-f+c}:{top:b.top+d+5,left:b.left})},_renderEmptyView:function(){var a=this.model.get("type"),b="请在"+this.i18n.work_1+"功能下创建"+this.i18n.work_1;if(4!=a&&(b="暂无目标"),this.ui.emptyArea.hide(),this.collection.length||this.joinCollection.length)return void this.ui.emptyArea.hide();var c=new EmptyView({emptyContext:b});this.emptyArea.show(c),this.ui.emptyArea.show()},_customView:function(){this.settings.showTitle||this.ui.title.remove(),this.settings.showButtonSure||this.ui.submit.remove(),this.settings.showButtonAdd||this.ui.newFolder.remove(),this.settings.showButtonSure||this.settings.showButtonAdd||this.ui.actionArea.remove(),this.settings.multi||this.$el.find(".class_data_search_content_center,.class_data_search_content_right").remove()},_submitHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=1==this.settings.multi?this.checkedCollection.toJSON():{id:this.model.get("id"),name:this.model.get("name")};this.trigger("submit",c,b)},_closeHandler:function(a){Talent.$(a.currentTarget);this.trigger("closed"),this.close()},_resetHandler:function(a){Talent.$(a.currentTarget);this.trigger("reset")},_rendWorkListView:function(a,b,c){var d=this,e="我负责的",f=!0;"join"==c&&(e="我参与的"),this.collection.length||"create"!=c||(f=!1),this.collection.length&&"join"==c&&(f=!1);var g=new WorkListView({collection:b,model:new Talent.Model({title:e}),isDefaultChecked:f});this.listenTo(g,"checked",function(a){d.settings.multi?d.checkedCollection.push({id:a.id,name:a.name,type:d.model.get("type")}):this.model.set({id:a.id,name:a.name});var a=1==d.settings.multi?d.checkedCollection.toJSON():a;this.trigger("checked",a)},this),a.show(g)},_renderCheckedClassCompositeView:function(){var a=this;this.checkedClassCompositeView=new CheckedClassCompositeView({collection:a.checkedCollection}),this.checkedTypeList.show(this.checkedClassCompositeView)}}),ClassComponentView=Talent.Layout.extend({template:jst["class/class-component"],className:"tt_class_dialog",regions:{classArea:"div[data-name=klass-content]",classEmptyArea:"div[data-name=klass-empty]",checkedTypeList:"[data-name=class-data-checked]"},defaults:{"default":"work",isShowClassSearch:!0,isShowWork:!0,isShowTarget:!1,isShowClass:!0,multi:!1,isEdit:!0,requestClassData:null,requestWorkData:null,requestTargetData:null,requeseSearchClassData:null},ui:{klassTabLi:"ul[data-name=klass-tab] li",klassTab:"ul[data-name=klass-tab]",closed:"span[data-name=klass-close]",emptyArea:"div[data-name=empty]",newInputFolder:"button[data-name=klass-move-new-folder]",buttonSubmit:"button[data-name=klass-action-submit]",buttonCancel:"button[data-name=klass-action-cancel]",buttonReset:"button[data-name=klass-action-reset]",checkedTypeList:"[data-name=class-data-checked]"},modelEvents:{"change:type":"_typeChange"},_typeChange:function(){var a=this.model.get("type");this.tajax_work=!1,this.tajax_klass=!1,this.tajax_target=!1,17==a?(this._renderClassView(),this._requestClassData()):4==a?this.settings.isShowWork&&(this._renderWorkView(),this._requestWorkData(a)):this.settings.isShowTarget&&(this._renderTargetView(),this._requestWorkData(a))},templateHelpers:function(){return{i18n:this.i18n,isShowWork:this.settings.isShowWork,isShowTarget:this.settings.isShowTarget,isShowClass:this.settings.isShowClass,isMulti:this.settings.multi}},events:function(){var a={};return a["click li"]="_checkLiHandler",a["click "+this.ui.klassTabLi]="_clickTabHandler",a["click "+this.ui.closed]="_clickClosedHandler",a["click "+this.ui.newInputFolder]="_clickAddInputHandler",a["click "]="_stopPropagation",a},initialize:function(a){var b=this;if(this.settings=Talent._.extend({},this.defaults,a),1==this.settings.multi&&this.$el.addClass("multi"),"undefined"==typeof a.isShowTarget){var c=Context.getAppHead({AppId:"402"});c&&(this.settings.isShowTarget=!0)}this.i18n=Context.getI18n(),this.tajax_work=!1,this.tajax_klass=!1,this.tajax_target=!1,this.userInfo=Context.getUserInfo(),this.model.set({id:0,name:""}),this.classCollection=new Talent.Collection,this.workCreatCollection=new Talent.Collection,this.workJoinCollection=new Talent.Collection,this.targetCreatCollection=new Talent.Collection,this.targetJoinCollection=new Talent.Collection,this.settings.multi&&(this.checkedCollection=new Talent.Collection,a.checkedClassCollection&&(this.checkedCollection=a.checkedClassCollection)),this.$el.on("mouseup",function(a){a.stopPropagation()}),Talent.$(document).on("mouseup.kclass"+this.cid,function(){b.close()});var d=this.settings;d.isShowClass&&this.model.set("type",17,{silent:!0}),!d.isShowClass&&d.isShowWork&&this.model.set("type",4,{silent:!0}),d.isShowClass||d.isShowWork||!d.target||this.model.set("type",402,{silent:!0})},_stopPropagation:function(a){a.stopPropagation()},onRender:function(){this._initCustom();var a=this.model.get("type")||17;17==a?(this._renderClassView(),this._requestClassData()):(this._renderWorkView(),this._requestWorkData(a))},onClose:function(){this.model.set({type:17,id:0,name:"",isEnd:!0},{silent:!0}),Talent.$(document).off("mouseup.kclass"+this.cid)},show:function(a,b){Context.setPosition(a,this.$el,b),this.$el.show()
},_initCustom:function(){var a=this.model.get("type")||17;this.ui.klassTabLi.removeClass("active"),this.ui.klassTab.find("li[data-type="+a+"]").addClass("active")},_submitHandler:function(a){var a=1==this.settings.multi?this.checkedCollection.toJSON():{type:this.model.get("type"),id:this.model.get("id"),name:this.model.get("name")};this.trigger("submit",a),this.close()},_cancelHandler:function(){this.trigger("cancel"),this.close()},_resetHandler:function(){this.settings.multi&&this.checkedCollection.reset(),this.trigger("reset")},_clickTabHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=b.attr("data-type");this.ui.klassTabLi.removeClass("active"),b.addClass("active"),this.model.set("type",parseInt(c))},_clickClosedHandler:function(){this.close(),this.trigger("closed")},_requestClassData:function(){var a=this;if(!this.tajax_work){this.tajax_work=!0;var b=this.settings.requestClassData||this._deferredClassData();b.done(function(b){a.classCollection.reset(b.lables)}).fail(function(){a.tajax_work=!1})}},_deferredClassData:function(){var a=new Talent.$.Deferred;return LableCollection.getLableData({obj_id:this.userInfo.Id,obj_type:1}).done(function(b){a.resolve(b)}).fail(function(){a.reject(resp)}),a},_renderClassView:function(){var a=this;this.classView&&this.classView.close();var b=1==this.settings.multi?!1:!0;this.classView=new ClassView({collection:this.classCollection,model:this.model,isEdit:this.settings.isEdit,showButtonSure:!0,showButtonAdd:b,showButtonReset:!0,showButtonCancel:!0,isShowSearch:this.settings.isShowClassSearch,requeseSearchClassData:this.settings.requeseSearchClassData,multi:this.settings.multi,checkedClassCollection:this.checkedCollection}),this.listenTo(this.classView,"new",function(a){var b=this,c=LableCollection.postAddLableData;c({obj_id:this.userInfo.Id,obj_type:"1",name:a.name,parent_id:a.parent_id}).done(function(b){a.call(b)}).fail(function(c){b._tipDialogView(a.node,c)})}),this.listenTo(this.classView,"delete",function(a){this._requestDelete(a)}),this.listenTo(this.classView,"rename",function(a){this._requestReName(a)},this),this.listenTo(this.classView,"checked",function(b){this.settings.multi?a.checkedCollection.push(b):this.model.set({type:17,id:b.id,name:b.name},{silent:!0})},this),this.listenTo(this.classView,"closed",function(){this._cancelHandler()}),this.listenTo(this.classView,"reset",function(){this._resetHandler()}),this.listenTo(this.classView,"submit",function(a){this._submitHandler(a)},this),this.listenTo(this.classView,"scrollTop",function(a){var b=this.$el.find(".tt_tree_view").height()/2;this.$el.find(".tt_tree_view").animate({scrollTop:a.top-b})},this),this.classArea.show(this.classView)},_requestDelete:function(a){var b=this;LableCollection.deleteLableData({lable_id:a.id}).done(function(){a.call(),b.trigger("delete",a)}).fail(function(c){b._tipDialogView(a.li,c)})},_requestReName:function(a){LableCollection.putRenameLableData({lable_id:a.id,name:a.name}).done(function(){a.node_name.html(a.name)})},_requestWorkData:function(a){var b=this,c=1,d=1;if(4==a){if(this.tajax_klass)return;this.tajax_klass=!0;var e=this.settings.requestWorkData||ProjectCollection.getProject}else{if(this.tajax_target)return;this.tajax_target=!0,c=402,d=402;var e=this.settings.requestTargetData||ProjectCollection.getProject}e({app_id:c,app_type:d}).done(function(c){var d=c.CreateWorks||[],e=c.JoinWorks||[];4==a?(b.workCreatCollection.reset(d),b.workJoinCollection.reset(e)):(b.targetCreatCollection.reset(d),b.targetJoinCollection.reset(e))})},_clickCancelHandler:function(){this.trigger("cancel"),this.close()},_renderWorkView:function(){var a=this;this.workView&&this.workView.close(),this.workView=new WorkView({collection:this.workCreatCollection,joinCollection:this.workJoinCollection,model:this.model,showButtonSure:!0,showButtonAdd:!1,multi:this.settings.multi,checkedClassCollection:this.checkedCollection}),this.listenTo(this.workView,"checked",function(b){a.settings.multi?a.checkedCollection.push(b):(this.$el.find(".tt_tree_view li").removeClass("active"),this.$el.find('.tt_tree_view li[id="'+b.id+'"]').addClass("active"),this.model.set({type:4,id:b.id,name:b.name},{silent:!0}))},this),this.listenTo(this.workView,"submit",function(a){this._submitHandler(a)},this),this.listenTo(this.workView,"closed",function(){this._clickCancelHandler()},this),this.listenTo(this.workView,"reset",function(){this._resetHandler()},this),this.classArea.show(this.workView)},_renderTargetView:function(){var a=this;this.targetView&&this.targetView.close(),this.targetView=new WorkView({collection:this.targetCreatCollection,joinCollection:this.targetJoinCollection,model:this.model,showButtonSure:!0,showButtonAdd:!1,multi:this.settings.multi,checkedClassCollection:this.checkedCollection}),this.listenTo(this.targetView,"checked",function(b){a.settings.multi?a.checkedCollection.push(b):(this.$el.find(".tt_tree_view li").removeClass("active"),this.$el.find('.tt_tree_view li[id="'+b.id+'"]').addClass("active"),this.model.set({type:4,id:b.id,name:b.name},{silent:!0}))},this),this.listenTo(this.targetView,"submit",function(a){this._submitHandler(a)},this),this.listenTo(this.targetView,"closed",function(){this._clickCancelHandler()},this),this.listenTo(this.targetView,"reset",function(){this._resetHandler()},this),this.classArea.show(this.targetView)},_tipDialogView:function(a,b){this.tDialogView&&this.tDialogView.close(),this.tDialogView=new TDialogView({type:"tipsy"}),this.tDialogView.render().$el.appendTo("body"),this.tDialogView.show(a,b,{arrow:!1,pos:"top",className:"warn",autoHide:!0})}}),CheckedClassItemView=Talent.ItemView.extend({tagName:"li",template:jst["class/checked-class-item"],initialize:function(){},ui:{delItem:".smember_btn_reduce"},events:function(){var a={};return a["click "+this.ui.delItem]="_deleteItem",a},onRender:function(){},_deleteItem:function(){this.trigger("deleteItem",this.model)}}),CheckedClassCompositeView=Talent.CompositeView.extend({defaults:{emptyContext:"请从左侧点击选择"},itemView:CheckedClassItemView,template:_.template("<ul></ul>"),itemViewContainer:"ul",emptyView:EmptyView,initialize:function(){},events:function(){var a={};return a},onRender:function(){var a=this;this.on("itemview:deleteItem",function(b){a.collection.remove(b.model)})},itemViewOptions:function(){return{emptyContext:this.defaults.emptyContext}}}),OperationStatusView=Talent.ItemView.extend({template:jst["operation-status/operation-status"],className:"tt_changestatusview",events:function(){var a={};return a["click li"]="changeStatusFun",a},templateHelpers:function(){var a=!1,b=this.model.get("isChildTask");return void 0!=typeof b&&(a=b),{isChildTask:a}},initialize:function(){var a=this;Talent.$(document).off("mouseup.Task-Item-Status-View"),Talent.$(document).on("mouseup.Task-Item-Status-View",function(){a.hide()})},changeStatusFun:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=b.attr("status");this.hide(),this.model.set("status",parseInt(c)),this.trigger("click:status",this.model.toJSON())},show:function(a,b){var c=a.position(),d=a.outerHeight(),e=a.outerWidth(),f=this.$el.width(),g={leftBias:0},b=Talent._.extend({},g,b);this.$el.css({position:"absolute",left:c.left-f/2+e/2+b.leftBias,top:c.top+d+10,"z-index":1e3}),this.$el.show()},hide:function(){this.$el.hide()},onClose:function(){Talent.$(document).off("mouseup.Task-Item-Status-View")}}),PrivateRangView=Talent.ItemView.extend({defaults:{privateValue:1,sort:[1,3,2],publicOptions:{name:"公开",des:"所有人可见"},privateOptions:{name:"私密",des:"仅@的人可见"},departmentOptions:{name:"部门可见",des:"仅我的部门可见"}},className:"qunartipwrapmvc",template:jst["private-range/private-range"],events:{"click ul":"_ulClickHandler","click li":"_liClickHandler"},modelEvents:{"change:privateValue":"render"},templateHelpers:function(){return{depId:this.depId,publicOptions:this.settings.publicOptions,privateOptions:this.settings.privateOptions,departmentOptions:this.settings.departmentOptions}},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options);var a=this;this.userInfo=Context.getUserInfo(),this.depId=this.userInfo.DepartmentId||0,this.status=0,this.mappingData={1:this.settings.publicOptions,2:this.settings.privateOptions,3:this.settings.departmentOptions},Talent.$(document).off("mouseup.private-range"),Talent.$(document).on("mouseup.private-range",function(){a.status=0,a.hide()}),this.$el.off("mouseup.private-range"),this.$el.on("mouseup.private-range",function(a){a.stopPropagation()}),this.model.set({visibility:1==this.settings.privateValue?1:2,privateObjType:3==this.settings.privateValue?15:0,privateObjId:3==this.settings.privateValue?this.depId:0,privateValue:this.settings.privateValue||1},{slient:!0}),this._formatData()},hide:function(){this.$el.hide()},onRender:function(){var a=this.model.get("privateValue");this.$el.find("li").removeClass("cur"),this.$el.find("li[id ="+a+"]").addClass("cur")},onClose:function(){this.$el.off("mouseup.private-range"),Talent.$(document).off("mouseup.PubList-Range"),this.status=0},show:function(a,b){var c={leftBias:"",topBias:""},d=Talent._.extend({},c,b);if(1==this.status)return this.status=0,void this.$el.hide();this.status=1,this.$el.css({position:"absolute","z-index":999});var e={pos:"bottom"};e=Talent._.extend({},e,d),Context.setPosition(a,this.$el,b),this.$el.css({display:"block"})},getDefaultPrivateText:function(a){var a=a||this.settings.privateValue;return this.mappingData[a]},_formatData:function(){var a=this.settings.sort,b=this.mappingData,c={1:{type:"public"},2:{type:"private"},3:{type:"department"}},d=[];a.length||alert("sort不能为空");for(var e=0;e<a.length;e++){var f=a[e],g=b[f];g&&(g=Talent._.extend(g,c[f]),d.push(g))}this.model.set("data",d)},_ulClickHandler:function(a){a.stopPropagation()},_liClickHandler:function(a){var b=Talent.$(a.currentTarget);if(b.hasClass("disabled"))return!1;var c=parseInt(b.attr("data-visibility"));this.model.set({visibility:c,text:b.find("span").html(),privateObjType:b.attr("objType")||0,privateObjId:b.attr("objId")||0,privateValue:b.attr("id")}),this.trigger("selected",this.model.toJSON()),this.status=0,this.$el.hide()}}),RedRemindView={updateIndicatorNum:function(a,b){var b=this.numberCustomize(b);b?(a.html(b).show().addClass("UI_animated UI_speed_400 UI_ani_bounce"),setTimeout(function(){a.removeClass("UI_animated UI_speed_400 UI_ani_bounce")},400)):a.hide().html(0)},updateIndicator:function(a,b){var b=this.numberCustomize(b);b?(a.show().addClass("UI_animated UI_speed_400 UI_ani_bounce"),setTimeout(function(){a.removeClass("UI_animated UI_speed_400 UI_ani_bounce")},400)):a.hide()},numberCustomize:function(a){var a=Number(a);return a?a>99?"99+":a:0}},TRicheditorView=Talent.ItemView.extend({defaults:{uploadOptions:"",forbiddenBtn:["backcolor","video","fontcolor","fontsize","link","html","fontfamily","subscript","superscript","underline"]},template:Talent._.template(""),className:"tt-rich-editor",initialize:function(a){var a=a||{},b=Context.getUploadOptions();b.onAfterUpload=function(a){return a.Result[0].ClientUrl},this.settings=Talent._.extend({},this.defaults,a),this.settings.uploadOptions=b,a&&a.uploadOptions&&(this.settings.uploadOptions=Talent._.extend({},b,a.uploadOptions)),this.settings.uploadOptions.uploadUrl=this.settings.uploadOptions.url,Talent.$("body").on("click mouseup",".redactor_modal",function(a){a.stopPropagation()}),this.$el.on("mouseup",".redactor_box",function(a){a.stopPropagation()})},onShow:function(){this._renderEditorView()},callMethods:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);return this.richEditor.ui.redactor[a]&&this.richEditor.ui.redactor[a].apply(this.richEditor.ui.redactor,b)},_renderEditorView:function(){this.richEditor=new Richeditor({uploadOptions:this.settings.uploadOptions,forbiddenBtn:this.settings.forbiddenBtn,model:this.model}),this.listenTo(this.richEditor,"all",function(a){this.trigger(a)}),this.$el.html(this.richEditor.render().el),this.richEditor.onShow()},onClose:function(){this.richEditor&&this.richEditor.close()}}),SetNoticeView=Talent.Layout.extend({template:jst["set-notice/set-notice"],className:"wrap_noticesetting_tita",defaults:{id:"tita"},regions:{userList:"div[data-name=person-list]"},ui:{dayInput:"div[data-name=day-input]",dayInputValue:"label[data-name=day-input-value]",dayDropdown:"div[data-name=day-dropdown]",dayDropdownWeek:"dl[data-name=day-dropdown-week]",dayDropdownMonth:"dl[data-name=day-dropdown-month]",dayDropdownDatepicker:"div[data-name=day-dropdown-datepicker]",hourWrap:"div[data-name=hour-wrap]",hourInputValue:"label[data-name=hour-input-value]",hourDropdown:"ul[data-name=hour-dropdown]",hourDropdown_li:"ul[data-name=hour-dropdown] li",minWrap:'div[data-name="minite-wrap"]',minInputValue:"label[data-name=minite-input-value]",minuteDropdown:"ul[data-name=minute-dropdown]",minuteDropdown_li:"ul[data-name=minute-dropdown] li",dayDropdown_li:"div[data-name=day-dropdown] li",decsWrap:"div[data-name=remind-desc-wrap]",decsInput:"textarea[data-name=remind-desc-input]",otherWrap:"li[data-name=day-other]",everyWeekWrap:"li[data-name=day-every-week]",everyWeekWrap_dd:"li[data-name=day-every-week] dd",everyMonthWrap:"li[data-name=day-every-month]",everyMonthWrap_dd:"li[data-name=day-every-month] dd",buttonCancelRemind:"a[data-name=remind-button-cancel-remind]",buttonCancel:"a[data-name=remind-button-cancel]",buttonSure:"a[data-name=remind-button-sure]",errorTip:"div[data-name=error-tip]",datePickerWrap:"div[data-name=day-dropdown-datepicker]"},events:function(){var a={};return a["click "+this.ui.dayInput]="_clickDayInputHandler",a["click "+this.ui.dayDropdown_li]="_checkoutDay",a["mouseover "+this.ui.dayDropdown_li]="_dayBoxRest",a["mouseover "+this.ui.otherWrap]="_overOtherWrapHandler",a["click "+this.ui.dayDropdownDatepicker]="_dayDropDownHandler",a["click "+this.ui.otherWrap]="_clickOtherWrapHandler",a["mouseover "+this.ui.everyWeekWrap]="_overEveryWeekWrapHandler",a["mouseover "+this.ui.everyMonthWrap]="_overEveryMonthWrapHandler",a["click "+this.ui.everyWeekWrap_dd]="_checkEveryWeekDDHandler",a["click "+this.ui.everyMonthWrap_dd]="_checkEveryMonthDDHandler",a["click "+this.ui.hourWrap]="_clickHourHandler",a["click "+this.ui.minWrap]="_clickMinHandler",a["click "+this.ui.hourDropdown_li]="_clickHourDropdown_liHandler",a["click "+this.ui.minuteDropdown_li]="_clickMinuteDropdown_liHandler",a["focus "+this.ui.decsInput]="_foucsDecsInputHandler",a["blur "+this.ui.decsInput]="_blurDecsInputHandler",a["keyup "+this.ui.decsInput]="_keyupInputHandler",a["click "+this.ui.buttonSure]="_sureHandler",a["click "+this.ui.buttonCancel]="_cancelHandler",a["click "+this.ui.buttonCancelRemind]="_cancelRemindHandler",a},initialize:function(){var a=this;this._dealDate(),this.$el.on("click",function(b){b.stopPropagation(),a._hideDropdown(),a.ui.minWrap.removeClass("cur_minite_time_nst"),a.ui.hourWrap.removeClass("cur_his_time_nst"),a.ui.dayInput.removeClass("cur_day_time_nst")}),this.$el.on("mouseup",function(a){a.stopPropagation()}),Talent.$(document).off("mouseup.Set-Notice-View"),Talent.$(document).on("mouseup.Set-Notice-View",function(){a.hide()}),this.userCollection=new Talent.Collection},onRender:function(){this._setNoticeUser(),this._bindDatePicker()},setPosition:function(a,b){this.node=a;var c=a.attr("data"),d=this;c=$.parseJSON(c),this.objId=c.objid||0,this.objType=c.objType||0,this._requsetFetch().done(function(a){var c=a[0],e=c.Users;Talent._.map(e,function(a){a.Id=a.userId,a.UserAvatar=a.Avatar}),d._resetData(c),d._setPostion(b),d.userCollection.reset(e)})},hide:function(){this.$el.hide()},_setPostion:function(a){var b={topBias:0,leftBias:0},a=(this.node,Talent._.extend({},b,a));Context.setPosition(this.node,this.$el,a),this.$el.show(),Talent._.animate(this.$el,"fadeInDown",3)},_setNoticeUser:function(){this.noticeUserView=new AddUserCompositeView({addUserSelectonOptions:{muti:!1,container:this.$el},collection:this.userCollection}),this.listenTo(this.noticeUserView,"addUser",function(a){this.userCollection.add(a)}),this.userList.show(this.noticeUserView)},_dayDropDownHandler:function(a){a.stopPropagation()},_bindDatePicker:function(){var a=this,b={format:"YYYY/MM/DD",singleDatePicker:!0,parentEl:this.ui.dayDropdownDatepicker,autoHide:!1,opens:"center"};this.ui.dayDropdownDatepicker.daterangepicker(b),this.ui.dayDropdownDatepicker.on("apply.daterangepicker",function(b,c){var d=c.startDate.format("YYYY/MM/DD");a.ui.dayInputValue.html(d).attr("uservalue",d),a.model.set({cyctype:0,day:d}),a.ui.dayInput.find("li,dd").removeClass("cur_nst"),a.ui.dayInput.find("li[uservalue^='"+d+"']").addClass("cur_nst"),a._hideDropdown()}),this.$el.find(".daterangepicker").bind("click mouseover",function(a){a.stopPropagation()})},_sureHandler:function(a){var b=Talent.$(a.currentTarget),c=this._validateData(),d=this.model.get("opsType");return this._getUserIds(),this.model.get("userIds").length?void(c.isValidate&&("update"==d?this._requsetUpdate(c.data):this._requsetAdd(c.data))):void TipDialogView(b,"被提醒人不能为空",{container:this.$el,pos:"topCenter"})},_getUserIds:function(){var a=this.userCollection.toJSON(),b=Talent._.pluck(a,"UserId");this.model.set("userIds",b)},_requsetFetch:function(){var a=new Talent.$.Deferred;return SetNoticeCollectoin.getData({obj_id:this.objId,obj_type:this.objType}).done(function(b){a.resolve(b)}),a},_requsetAdd:function(a){var b=this.model.get("day"),c=this.model.get("hour"),d=this.model.get("minute"),e=this,f=b+" "+c+":"+d;this._cancelHandler(),SetNoticeCollectoin.postAddRemindData({obj_id:this.objId,obj_type:this.objType,content:a.content,cyc_type:a.cyc_type,remind_user_ids:this.model.get("userIds").join(","),time:a.time}).done(function(){e.node.addClass("icon-clock-active");var a=e.model.toJSON();a.time=f,e.trigger("sure",e.ui.buttonSure,a)})},_requsetUpdate:function(a){var b=this;this._cancelHandler(),SetNoticeCollectoin.postUpdateData({obj_id:this.objId,obj_type:this.objType,content:a.content,cyc_type:a.cyc_type,remind_user_ids:this.model.get("userIds").join(","),time:a.time}).done(function(){var c=b.model.toJSON();c.time=a.time,b.trigger("sure",b.ui.buttonSure,c)})},_cancelHandler:function(){this.$el.hide()},_cancelRemindHandler:function(){var a=this;this._hideDropdown(),this.model.set({opsType:"add",day:"",content:""}),this._cancelHandler(),this._dealDate(),this.render(),SetNoticeCollectoin.getCleanRemindData({obj_id:this.objId,obj_type:this.objType}).done(function(){a.node.removeClass("icon-clock-active").addClass("icon-clock"),a.trigger("cancelRemind")})},_resetData:function(a){var b=a.Id||0;if(0==b)this.opsType="add",this.model.set({noticeid:0,opsType:"add",objType:0,objId:0,content:"",uservalue:0,cyctype:0});else{this.ui.buttonCancel.show();var c=a.Content.split("<b>");1==c.length&&(c=a.Content.split("(")),this.model.set({noticeid:this.options.id,opsType:"update",objType:this.options.objType,objId:this.options.objId,content:$.trim(c[0])}),this.ui.buttonCancelRemind.show();var d=a.CycType;d||(d="0"),d=""+d;var e=d.split("_");d=e[0];var f,g,h,i,j=a.Date;if(j&&(dateArr=j.split(" "),f=dateArr[0].replace(/-/g,"/"),g=dateArr[1].substr(0,2),i=dateArr[1].substr(3,5)),1==d)this.ui.dayInput.find("div[data-name=day-every-day]").trigger("click"),h=f;else if(2==d)this.ui.dayInput.find("div[data-name=day-every-weekday]").trigger("click");else if(3==d)this.ui.dayDropdownWeek.find("dd[uservalue='"+e[1]+"']").trigger("click");else if(4==d)this.ui.dayDropdownMonth.find("dd[uservalue='"+e[1]+"']").trigger("click");else{var k=f;this.ui.dayInputValue.html(k),this.model.set({uservalue:k,cyctype:0});var l=this.ui.dayDropdown.find("li[uservalue='"+f+" 00:00']");l.length&&l.trigger("click")}a.Content&&this.ui.decsInput.val(a.Content).removeClass("default_nst"),this.ui.hourDropdown.find("li[label='"+g+"']").trigger("click"),this.ui.minuteDropdown.find("li[label='"+i+"']").trigger("click")}},_foucsDecsInputHandler:function(a){var b=Talent.$(a.currentTarget),c=Talent.$.trim(b.val()),d=b.attr("defaultvalue");c==d&&b.val(""),b.removeClass("default_nst"),b.addClass("cur_desc_nst")},_blurDecsInputHandler:function(a){var b=Talent.$(a.currentTarget),c=Talent.$.trim(b.val());""==c&&(b.val(b.attr("defaultvalue")),b.addClass("default_nst"),this.model.set("content","")),b.removeClass("cur_desc_nst")},_keyupInputHandler:function(a){var b=Talent.$(a.currentTarget),c=Talent.$.trim(b.val());this.model.set("content",c)},_clickHourDropdown_liHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget);this.model.set({label:b.attr("label"),hour:b.attr("uservalue")}),this.ui.hourInputValue.html(b.attr("label")),this.ui.hourDropdown.hide(),this.ui.hourDropdown_li.removeClass("cur_nst"),b.addClass("cur_nst"),this.ui.hourWrap.removeClass("cur_his_time_nst")},_clickMinuteDropdown_liHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget);this.model.set({label:b.attr("label"),minute:b.attr("uservalue")}),this.ui.minInputValue.html(b.attr("label")),this.ui.minuteDropdown.hide(),this.ui.minuteDropdown_li.removeClass("cur_nst"),b.addClass("cur_nst"),this.ui.minWrap.removeClass("cur_minite_time_nst")},_clickHourHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget);b.addClass("cur_his_time_nst"),this._hideDropdown(),this.ui.hourDropdown.show()},_clickMinHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget);b.addClass("cur_minite_time_nst"),this._hideDropdown(),this.ui.minuteDropdown.show()},_checkoutDay:function(a){var b=Talent.$(a.currentTarget);a.stopPropagation(),this.ui.dayInput.removeClass("cur_day_time_nst");var c=b.attr("uservalue"),d=c.split(" "),e=b.attr("data-name");"day-other"!=e&&"day-every-week"!=e&&"day-every-month"!=e&&(this.ui.decsWrap.css("visibility","visible"),this.ui.hourWrap.css("visibility","visible"),"day-every-day"==e?(this.ui.dayInputValue.html(b.attr("label")),this.model.set({cyctype:1,day:this._formatDate(new Date,"yyyy/MM/dd")})):"day-every-weekday"==e?(this.ui.dayInputValue.html(b.attr("label")),this.model.set({cyctype:2,day:this._formatDate(new Date,"yyyy/MM/dd")})):(this.ui.dayInputValue.html(d[0]),this.model.set({cyctype:0,day:d[0]})),this.ui.dayDropdown.hide(),this.ui.dayDropdown_li.removeClass("cur_nst"),b.addClass("cur_nst"))},_clickDayInputHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget);b.addClass("cur_day_time_nst"),this._hideDropdown(),this.ui.dayDropdown.show()},_overOtherWrapHandler:function(a){a.stopPropagation(),this._dayBoxRest(a),this.ui.dayDropdownDatepicker.data("daterangepicker").setEndDate(this.model.get("day")),this.ui.dayDropdownDatepicker.show(),this.ui.dayInput.removeClass("cur_day_time_nst"),this.ui.otherWrap.find("a:first").addClass("a_hover")},_clickOtherWrapHandler:function(a){a.stopPropagation();Talent.$(a.currentTarget);this._dayBoxRest(a),this.ui.datePickerWrap.show(),this.ui.otherWrap.find("a:first").addClass("a_hover"),this.ui.dayInput.removeClass("cur_day_time_nst")},_overEveryWeekWrapHandler:function(a){this._dayBoxRest(a),this.ui.dayDropdownWeek.show(),this.ui.dayInput.removeClass("cur_day_time_nst"),this.ui.dayDropdownWeek.find("a:first").removeClass("a_hover")},_overEveryMonthWrapHandler:function(a){this._dayBoxRest(a),this.ui.dayDropdownMonth.show(),this.ui.dayInput.removeClass("cur_day_time_nst"),this.ui.everyMonthWrap.find("a:first").removeClass("a_hover")},_checkEveryWeekDDHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget);this.ui.dayInputValue.html(b.attr("label")),this.model.set({cyctype:3,day:b.attr("uservalue")}),this.ui.dayDropdown.hide(),this.ui.dayDropdown_li.removeClass("cur_nst"),this.ui.everyWeekWrap_dd.removeClass("cur_nst"),this.ui.everyMonthWrap_dd.removeClass("cur_nst"),b.addClass("cur_nst"),this.ui.everyWeekWrap.find("a:first").addClass("a_hover"),this.ui.dayDropdown_li.removeClass("cur_day_time_nst")},_checkEveryMonthDDHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget);this.ui.dayInputValue.html(b.attr("label")),this.model.set({cyctype:4,day:b.attr("uservalue")}),this.ui.dayDropdown.hide(),this.ui.dayDropdown_li.removeClass("cur_nst"),this.ui.everyWeekWrap_dd.removeClass("cur_nst"),this.ui.everyMonthWrap_dd.removeClass("cur_nst"),b.addClass("cur_nst"),this.ui.everyMonthWrap.find("a:first").addClass("a_hover"),this.ui.dayDropdown_li.removeClass("cur_day_time_nst")},_dayBoxRest:function(a){a&&a.stopPropagation(),this.ui.dayDropdownWeek.hide(),this.ui.dayDropdownMonth.hide(),this.ui.dayDropdownDatepicker.hide(),this.ui.otherWrap.find("a:first").removeClass("a_hover"),this.ui.everyWeekWrap.find("a:first").removeClass("a_hover"),this.ui.everyMonthWrap.find("a:first").removeClass("a_hover")},_hideDropdown:function(){this.ui.dayDropdown.hide(),this.ui.dayDropdownWeek.hide(),this.ui.dayDropdownMonth.hide(),this.ui.dayDropdownDatepicker.hide(),this.ui.hourDropdown.hide(),this.ui.minuteDropdown.hide(),this.ui.datePickerWrap.hide()},_validateData:function(){var a=this,b={isValidate:!0,data:{}},c=this.model.get("content")||"一个提醒";if(c.replace(/[^\x00-\xff]/g,"**").length>40)return this.ui.errorTip.html('<span class="error">提醒内容不能超过20个汉字或40个字符</span>'),setTimeout(function(){a.ui.errorTip.html("")},1e3),b.isValidate=!1,b;var d=this.ui.decsInput.attr("defaultvalue");c==d&&(c=""),b.data.content=c;var e=this.model.get("cyctype"),f=this.model.get("hour"),g=this.model.get("day"),h=this.model.get("minute"),i=f+":"+h;if(1==e||2==e)b.data.cyc_type=e,b.data.time=g+" "+i;else if(3==e||4==e){var j=new Date,k=j.getFullYear(),l=j.getMonth()+1,m=j.getDate();10>l&&(l="0"+l),10>m&&(m="0"+m);var n=k+"/"+l+"/"+m+" ";b.data.cyc_type=e+"_"+g,b.data.time=n+i}else if(-1==e)b.data.cyc_type=e,b.data.time="";else if(b.data.cyc_type=e,b.data.time=g+" "+i+":00",new Date>new Date(b.data.time))return this.ui.errorTip.html('<span class="error">不能设置过去的时间</span>'),setTimeout(function(){a.ui.errorTip.html("")},1e3),b.isValidate=!1,b;return b},_dealDate:function(){var a="yyyy/MM/dd hh:mm",b=new Date,c=b.getFullYear(),d=b.getMonth(),e=b.getDate(),f=b.getHours(),g=(b.getSeconds(),b.getDay()),h=f;23==f&&(b=new Date(c,d,e,f+1,0,0),c=b.getFullYear(),d=b.getMonth(),e=b.getDate(),f=b.getHours(),g=b.getDay());for(var i=[],j={6:"六",0:"日",1:"一",2:"二",3:"三",4:"四",5:"五"},k="",l="",m=0;7>m;m++){var n=new Date(c,d,e+m).getDay();l="",23==h?g>n?k="下周"+j[n]:n==g?(l="cur_nst",k="明天"):k="本周"+j[n]:g>n?k="下周"+j[n]:n==g?(l="cur_nst",k="今天"):k=n==g+1?"明天":"本周"+j[n],i.push('<li class="'+l+'" label="'+k+'" uservalue="'+this._formatDate(new Date(c,d,e+m),a)+'"><a href="javascript:void(0)">'+k+"</a></li>")}this.model.set("day7",i.join(""));for(var o=[],m=0;31>m;m++)o.push('<dd uservalue="'+(m+1)+'" label="每月'+(m+1)+'号"><a href="javascript:void(0)">'+(m+1)+"</a></dd>");this.model.set("month31",o.join(""));for(var p=[],q="",m=0;24>m;m++)q=10>m?"0"+m:m,p.push('<li label="'+q+'" uservalue="'+q+'"><a href="javascript:void(0)">'+q+"</a></li>");this.model.set("hour24",p.join(""));for(var r=["00","05","10","15","20","25","30","35","40","45","50","55"],s=[],m=0;m<r.length;m++)s.push('<li label="'+r[m]+'" uservalue="'+r[m]+'"><a href="javascript:void(0)">'+r[m]+"</a></li>");this.model.set("minite12",s.join(""));var t=this._formatDate(new Date(c,d,e,f,m),"yyyy/MM/dd"),u=23==h?f:f+1,v=10>u?"0"+u:u;this.model.set({nowHour:u,nowHourLabel:v,today:t,day:t,hour:u,minute:"00"})},_formatDate:function(a,b){var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b},onClose:function(){Talent.$(document).off("click.Set-Notice-View")}}),TDialogView=Talent.CompositeView.extend({template:jst["tdialog/dialog"],defaults:{id:"tdialog",type:"tipsy",arrowPos:"top",sure:!1,sureText:"确定",sureLink:"",cancel:!1,cancelText:"取消",arrow:1,minHeight:"37",minWidth:"50",maxWidth:"",fixed:!1,zindex:1031,quirkTheme:!1,showClosed:!1,skin:""},tagName:"div",className:"_tt_dialog",ui:{sure:".sure_dialog",sureText:".sure_dialog>span",cancel:".cancel_dialog",closed:".closed_dialog",dd:".ask_dialog"},events:function(){var a={};return a["click "+this.ui.sure]="onSureEvent",a["click "+this.ui.cancel]="onCancel",a["click "+this.ui.closed]="onCancel",a},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options),this.$el.attr("id",this.options.id),this.model.set({settings:this.settings}),this._init(),this.$el.on("mouseup",function(a){a.stopPropagation()}),"skin2"==this.settings.skin&&this.$el.addClass("tt-dialog-skin2")},_init:function(){var a={minWidth:this.settings.minWidth+"px",minHeight:this.settings.minHeight+"px","z-index":this.settings.zindex,position:this.settings.fixed?"fixed":"absolute"};this.settings.maxWidth&&""!=this.settings.maxWidth&&(a.maxWidth=this.settings.maxWidth+"px"),this.$el.css(a)},onSureEvent:function(a){var b=$(a.currentTarget);if($("#tdialog_mask").remove(),"function"==typeof this.settings.sure){if(void 0!=this.activeNode&&null!=this.activeNode){var c=this.settings.sure(b);if(0==c)return}else this.settings.sure();this.close()}},onCancel:function(a){var b=$(a.currentTarget);this.trigger("hide",b),$("#tdialog_mask").remove(),"function"==typeof this.settings.cancel&&this.settings.cancel(b),this.close()},show:function(a,b,c){var d={className:"none",autoHide:!1,pos:"bottom",x:0,y:0,topBias:0,leftBias:0,arrowBias:0,zindex:1031,autoFrames:"window",container:"",arrow:!1},e=Talent._.extend({},d,c);if("tipsy"==this.settings.type){var f=Talent.$('<div class="tipsy_dialog '+e.className+'_dialog"><b class="ico"></b><span class="content"></span></div>');f.append(b),this.$el.find(".content_dialog").empty().append(f)}else this.$el.find(".content_dialog").empty().append(b);if(this.settings.skin&&"skin2"==this.settings.skin){var g=/[^\x00-\xff]/g,h=b.replace(g,"**").length;47>h&&this.settings.skin&&"skin2"==this.settings.skin&&this.$el.css("text-align","center")}this.settings.quirkTheme&&(this.$el.find(".sure_dialog").removeClass("btn-sure").addClass("btn-cancel"),this.$el.find(".cancel_dialog").removeClass("btn-cancel").addClass("btn-sure")),a?this._showHere(a,e):($("body").append('<div class="mask" id="tdialog_mask"></div'),this.$el.css({top:"300px",left:"50%","margin-left":"-"+this.$el.width()/2})),this._autoHide(e),this.$el.show(),Talent._.animate(this.$el,"fadeInDown",3),this.$el.find(".content_dialog").off("click")},hide:function(){this.close()},setOptions:function(a){this.settings=Talent._.extend({},this.settings,a),this.model.set({settings:this.settings}),this.render()},onRender:function(){var a=this;this.$el.on("click",function(b){a.trigger("click"),b.stopPropagation()})},_stopMouseUpHandler:function(a){a.stopPropagation()},_autoHide:function(a){var b=this;1==a.autoHide&&setTimeout(function(){$("#tdialog_mask").remove(),b.trigger("hide"),b.close()},1500),"number"==typeof a.autoHide&&setTimeout(function(){b.trigger("hide"),b.close()},a.autoHide)},_showHere:function(a,b){this.activeNode=a||null;var c=b.container||Talent.$("body"),d=c.offset(),e=Talent.$("body").scrollTop(),f=Talent.$("body").scrollLeft(),g=a.offset(),h=a.outerHeight(),i=a.outerWidth(),j=b.width?b.width:this.$el.outerWidth(),k=b.height?b.height:this.$el.outerHeight(),l={},m={},n="",o=b.domOffTop?b.domOffTop:g.top,p=g.left,q=o-d.top,r=p-d.left;switch(b.pos){case"top":l={top:q-k-8,left:r},m={left:0},n="bottom";break;case"topCenter":l={top:q-k-8,left:r+i/2-j/2},m={left:j/2-8},n="bottom";break;case"topRight":l={top:q-k-8,left:r+i-j},l.left<0&&(l.left=0),m={left:j-16},n="bottom";break;case"bottom":l={top:q+h+8,left:r},m={left:0},n="top";break;case"bottomCenter":l={top:q+h+8,left:r+i/2-j/2},m={left:j/2-8},n="top";break;case"bottomRight":l={top:q+h+8,left:r+i-j},l.left<0&&(l.left=0),m={left:j-16},n="top";break;case"left":l={top:q,left:r-j},m={top:0},n="right";break;case"leftCenter":l={top:q+h/2-k/2,left:r-j},m={top:k/2-8},n="right";
break;case"leftBottom":l={top:q+h-k,left:r-j},m={top:k-16},n="right";break;case"right":l={top:q,left:r+i},m={top:0},n="left";break;case"rightCenter":l={top:q+h/2-k/2,left:r+i},m={top:k/2-8},n="left";break;case"rightBottom":l={top:q+h-k,left:r+i},m={top:k-16},n="left"}b.leftBias&&(l.left=l.left+b.leftBias),b.topBias&&(l.top=l.top+b.topBias);var s=Talent.$(window).height(),t=Talent.$(window).width(),e=Talent.$(document).scrollTop(),f=Talent.$(document).scrollLeft();if(d.top+l.top+k>s+e){var u=s+e-(d.top+l.top+k);l.top=l.top+u}if(d.top+l.top<e){var u=e-(d.top+l.top);l.top=l.top+u}if(d.left+l.left+j>t+f){var v=t+f-(d.left+l.left+j);l.left=l.left+v}if(d.left+l.left<f){var v=f-(d.left+l.left);l.left=l.left+v}this.$el.css(l);var w=this.$el.find(".arrow");b.arrow===!1&&w.hide(),w.addClass(n),2===b.arrow&&w.addClass("top"===n||"bottom"===n?"arrow2":"horizontal_arrow2"),w.css(m)},onClose:function(){this.$el.find(".content_dialog").off("click")},changeSubmitBtn:function(a){1==a?(this.ui.sureText.text("确定"),this.ui.sure.removeClass("success_submint").removeClass("loading_submint")):2==a?(this.ui.sureText.text(""),this.ui.sure.removeClass("success_submint"),this.ui.sure.addClass("loading_submint")):(this.ui.sureText.text(""),this.ui.sure.removeClass("loading_submint"),this.ui.sure.addClass("success_submint"))}}),YFYLoginView=Talent.ItemView.extend({template:jst["uploader/yfy-login-item"],className:"YFY-login-containter",ui:{form:"form"},show:function(){this.ui.form.submit(),this.trigger("formSubmit")}}),UploaderComponentPreviewItemView=Talent.ItemView.extend({template:jst["uploader/uploader-component-preview-item"],tagName:"li",className:"item_up",ui:{iconImg:"div[data-name=tita-upload-preview-icon]",itemLi:"div[data-name=tita-upload-preview-item]"},events:{"click a[data-name=tita-upload-preview-deleted]":"_delItem"},templateHelpers:function(){var a=this.model.get("FileName"),b=a.lastIndexOf("."),c=this.model.get("MediaType"),d=13-c.length,e=(this.model.get("imageUrl"),this.model.get("isFromYFY")),f=this.model.get("isImage");return e&&(f=!1),a=a.substring(0,b),a=_.substring(a,d,!0)+"."+c,{FileName:a,isImage:f}},_delItem:function(a){this.trigger("deleteItem"),a.stopPropagation()},initialize:function(){this.isClose=!1},onRender:function(){var a=this.model.get("isImage"),b=this.model.get("isFromYFY");b&&(a=!1),a&&this._renderImg(),this.$el.attr({id:this.model.cid})},_renderImg:function(){var a=this,b=new Image;b.onload=function(){if(!a.isClose){var c=b.width,d=b.height,e=100,f=100,g=a.fixImgSize(c,d,e,f);a.imgSize={width:g.w,height:g.h},b.width=g.w,b.height=g.h,a.ui.iconImg.html(b)}},b.onerror=function(){a.ui.itemLi.html('<div class="warnattachmenttip">读取文件 '+a.model.get("FileName")+" 失败</div>"),a.$el.delay(3e3).slideUp(200)},b.src=this.model.get("imageUrl")},fixImgSize:function(a,b,c,d){var e={w:0,h:0},f=a,g=b,h=c,i=d;if(f>0&&g>0){var j=h/i,k=f/g;f>h||g>i?k>j?(e.w=h,e.h=g*(h/f)):(e.w=f*(i/g),e.h=i):(e.w=f,e.h=g)}else e.w=f,e.h=g;return e},onClose:function(){this.isClose=!0}}),UploaderComponentPreviewView=Talent.CollectionView.extend({itemView:UploaderComponentPreviewItemView,tagName:"ul",className:"tita-upload-preview",initialize:function(){var a=this;this.on("itemview:deleteItem",function(b){a.delItem(b)})},onRender:function(){},delItem:function(a){this.collection.remove(a.model),this.trigger("deleteItem",this.collection.toJSON())}}),LoadingBoxView=Talent.ItemView.extend({defaults:{y:20},template:Talent._.template('<span class="img-load"></span><span>正在加载亿方云...</span>'),className:"loadingBoxView",initialize:function(a){this.settings=Talent._.extend({},this.defaults,a),this.$el.on("mouseup",function(a){a.stopPropagation()})},onRender:function(){this.$el.css({position:"absolute",width:580,"z-index":1100,border:"1px solid #DDD",height:306,"box-shadow":"#DDD 0px 0px 4px","background-color":"#fff",top:"50%",left:"50%","margin-left":-290,"margin-top":-290,"padding-top":247})},hide:function(){this.$el.hide()},show:function(){this.$el.show()}}),UploaderComponentView=Uploader.UploaderComponentView.extend({template:jst["uploader/uploader-component"],loadingTemplate:Talent._.template('<div id="<%= timestamp %>" class="loading_up"></div>'),errorTemplate:Talent._.template('<div class="warnattachmenttip"><%= msg %></div>'),PreviewView:UploaderComponentPreviewView,dealOptions:function(a){var b=Context.getUploadOptions();this.options=Talent._.extend({},this.defaults,b,a)},ui:{uploadNewFile:"[data-name=file]",YFYbtn:"#fc_upload",uploadType:"[data-name=upload-type]",dfsBtn:"[data-name=dfs-upload]",inputFile:"input.upload_file_input"},events:function(){var a={};return a["mouseover "+this.ui.uploadNewFile]="showPop",a["mouseout "+this.ui.uploadNewFile]="hidePop",a["click "+this.ui.uploadNewFile]="hidePop",a["click "+this.ui.inputFile]="hidePop",a["click "+this.ui.uploadNewFile]="_showUploadTypeMenu",a["click "+this.ui.YFYbtn]="_uptoFangCloud",a["mouseup.uploader-component "+this.ui.uploadType]="_clickUploadTypeHandler",a},initialize:function(a){var b=this;this.dealOptions(a),this.options.errorTime=3e3,this.model=new Talent.Model(this.options);var c=this.options.data||[];this.fileCollection=new this.FileCollection(c),this.checkedFileCollection=new this.CheckedFileCollection,this.recentFileCollection=new this.RecentFileCollection,this.templateHelpers=this.model.get("text"),Talent.$("body").off("click.upload"),Talent.$("body").on("click.upload",function(){b.hideUploadDropdown()}),this.options.PreviewView&&(this.PreviewView=this.options.PreviewView),this.options.RecentUploadView&&(this.RecentUploadView=this.options.RecentUploadView),this.options.loadingTemplate&&(this.loadingTemplate=this.options.loadingTemplate),this.options.errorTemplate&&(this.errorTemplate=this.options.errorTemplate),this.options.template&&(this.template=this.options.template)},onRender:function(){var a=this.options.container,b=this.options.openYFY;b||this.ui.uploadNewFile.parent().css({overflow:"hidden",position:"relative"}),""==a&&(this.options.container=this.$el),0==Talent.$(a).find(".upload_node").length&&this.$el.appendTo(Talent.$(a).find(".uploader_container")),this.renderUploaderFormView(),this.renderPreviewListView(),this.options.isShowExistFile&&this.renderRecentUploadView()},renderPreviewListView:function(){var a=this,b=this.options.container;this.previewCompositeView=new this.PreviewView({collection:this.fileCollection,model:this.model}),this.previewCompositeView.on("deleteItem",function(b){a.trigger("deleteItem",a._dealBeforeTriggerUploadEndDate(a.fileCollection.toJSON()),a._dealBeforeTriggerUploadEndDate(b))}),Talent.$(b).find(".preview_container").append(this.previewCompositeView.render().$el)},showPop:function(a){var b=Talent.$(a.currentTarget);b.data("tipsy")||b.tipsy({title:function(){return Context.getUploadTipText()},gravity:"sw",html:!0,trigger:"manual"}),this.ui.uploadNewFile.tipsy("show")},hidePop:function(){this.ui.uploadNewFile.tipsy("hide")},_clickUploadTypeHandler:function(a){a.stopPropagation()},_showUploadTypeMenu:function(a){a.stopPropagation();var b=this.options.openYFY,c=this;if(b){var d=Talent.$(a.currentTarget),e=d.outerWidth(),f=d.outerHeight();this.ui.uploadType.css({position:"absolute",top:f+10,left:(e-82)/2,"z-index":"1000"}),this.ui.uploadType.show(),Talent.$(document).off("mouseup.uploader-component"),Talent.$(document).on("mouseup.uploader-component",function(){c.ui.uploadType.hide(),Talent.$(document).off("mouseup.uploader-component")})}},renderUploaderFormView:function(){var a=this;this.options.fileCollection=this.fileCollection,this.uploaderView=new Uploader.UploaderView(this.options),this.uploaderView.on("formViewRender",function(b){a.onAfterFormViewRender(b)}),this.uploaderView.render(),this._dealUploaderStatus(this.uploaderView)},_dealUploaderStatus:function(a){var b=this;a.on("formViewRender",function(a){b.onAfterFormViewRender(a)}),a.on("uploadStart",function(a){b.showLoadingView(a),b.trigger("uploadStart",a)}),a.on("uploadEnd",function(a){b.ui.uploadType&&b.ui.uploadType.hide();var c=a.timestamp,d=b.onAfterUpload&&b.onAfterUpload(a);d[0].timestamp=c;var e=Talent._.filter(d,function(a){return 1==a.IsSuccess});e.length<d.length&&TipDialogView(b.ui.uploadNewFile,"文件应大于0KB且小于20MB",{container:b.$el,pos:"topLeft",minWidth:160}),b.hideLoadingView(a),b.fileCollection.add(e),b.trigger("uploadEnd",b._dealBeforeTriggerUploadEndDate(b.fileCollection.toJSON()),b._dealBeforeTriggerUploadEndDate(e))}),a.on("error",function(a){""!=a.message&&(b.hideLoadingView(a),b.showErrorView(a),b.trigger("error",a))})},_dealBeforeTriggerUploadEndDate:function(a){var b={};if(b.dfs=[],b.YFYresp=[],a&&a.length)for(var c=0;c<a.length;c++)if(a[c].isFromYFY){var d={};d.relatedFileId=a[c].id,d.fileType=a[c].fileType,d.size=a[c].size,d.name=a[c].FileName,d.thumbnailGenerated=a[c].thumbnail?!0:!1,d.documentSource=3,d.shareCode=a[c].share_code,b.YFYresp.push(d)}else a[c].DfsPath&&b.dfs.push(a[c].DfsPath);return b},onAfterUpload:function(a){var b=a.Result;return this._dealOnAfterUploadData(b?b:a)},_dealOnAfterUploadData:function(a){var b=this;return Talent._.map(a,function(a){var c=a.MediaType?a.MediaType.toLowerCase():a.type_icon.toLowerCase();return/^jpg|png|gif|jpeg|image|JPG|PNG|GIF|JPEG$/.test(c)?(a.isImage=!0,a.imageUrl=a.ClientUrl?a.ClientUrl:a.thumbnail,a.imageUrl||(a.isImage=!1)):(fileIconName=/^(rar|zip|exe|pdf|txt|doc|docx|ppt|pptx|xls|xlsx)$/.test(c)?c:/^(mp3|wma|wav|flac|ape|ogg|aac|m4a)$/.test(c)?"music":/^(mp4|mkv|rm|rmvb|avi|3gp|flv|wmv|asf|mpeg|mpg|mov|ts|m4v)$/.test(c)?"video":"none",a.isImage=!1,a.fileType=fileIconName),a.FileName||(a.FileName=a.name),a.Msg||(a.Msg="上传成功"),a.MediaType=b._dealFileType(a.FileName),a.timestamp=(new Date).getTime(),a}),a},_dealFileType:function(a){var b=a.split(".");return newStr=b[b.length-1]},_dealYFYUploaderData:function(a){this.ui.uploadType.hide();var b=this.onAfterUpload&&this.onAfterUpload(a);this.fileCollection.add(b),this.trigger("uploadEnd",this._dealBeforeTriggerUploadEndDate(this.fileCollection.toJSON()),this._dealBeforeTriggerUploadEndDate(b))},_uptoFangCloud:function(a){a.stopPropagation();var b=this;this.loadingBoxView=new LoadingBoxView,Talent.$("body").append(this.loadingBoxView.render().$el),this.loadingBoxView.show(),YFYColleciton.getYifangyun().done(function(a){if(a&&a.host){var c=Context.getGlobal("yifangyunjs");require([c],function(){b.YFYLoginView=new YFYLoginView({model:new Talent.Model(a)}),b.YFYLoginView.on("formSubmit",function(){setTimeout(function(){b.loadingBoxView.hide(),b.renderYFYView()},2e3)}),b.$el.append(b.YFYLoginView.render().$el),b.YFYLoginView.show()})}})},renderYFYView:function(){var a=this;FangCloud.choose({success:function(b){Talent._.map(b,function(a){a.isFromYFY=!0}),a._dealYFYUploaderData(b)}}),this._setYFYViewPositoon(),Talent.$(document).off("mouseup.close-yfy-iframe"),Talent.$(document).on("mouseup.close-yfy-iframe",function(){FangCloud&&FangCloud.closeChooser(),a.ui.uploadType.hide()}),Talent.app.vent.on("route",function(){FangCloud.closeChooser()}),Talent.$("#fangcloud_choose").css("z-index","1100")},_setYFYViewPositoon:function(){var a=parseInt($(document).scrollTop()),b=parseInt($("#fangcloud_choose").css("top"));$("#fangcloud_choose").css("top",a+b)},_addFileItem:function(a){var b=[];Talent._.each(a,function(a){a.DfsPath&&b.push(a.DfsPath)}),b.length&&this.trigger("addAttachment",b.join(","))},showLoadingView:function(a){var b=this.options.container;Talent.$(b).find(".loading_container").append(this.loadingTemplate({timestamp:a.timestamp}))},hideLoadingView:function(a){var b=this.options.container,c=a.timestamp;Talent.$(b).find(".loading_container").find("#"+c).hide()},onClose:function(){Talent.$(document).off("mouseup.uploader-component"),Talent.$(document).off("mouseup.close-yfy-iframe")}}),WorkHourView=Talent.ItemView.extend({template:jst["work-hour/work-hour"],className:"work-hour",ui:{hourPick:".hour_list a",minutePick:".minite_list a"},modelEvents:{hourDate:"render",minuteDate:"render"},events:function(){var a={};return a["click "+this.ui.hourPick]="_clickHourHandler",a["click "+this.ui.minutePick]="_clickMinuteHandler",a},initialize:function(){var a=this;this.settings=Talent._.extend({},this.defaults,this.options),this.model.get("hourDate")||this.model.set("hourDate",0),this.model.get("minuteDate")||this.model.set("minuteDate",0),Talent.$(document).on("mouseup.Work-Hour-View",function(){a.dialogView&&a.dialogView.hide()})},show:function(a,b){this._renderDialogView(a,b)},_renderDialogView:function(a,b){var c=this,d={pos:"bottom",arrow:!1},b=Talent._.extend({},d,b);this.dialogView||(this.render(),this.dialogView=new TDialogView({showClosed:!1,minWidth:350,sure:function(a){var b=c.model.get("hourDate")||0,d=c.model.get("minuteDate")||0;return 0==b&&0==d?(TipDialogView(a,"工时不能为0",{pos:"topCenter"}),!1):void c.trigger("sure",c.model.toJSON())},cancel:function(){c.trigger("cancel",c.model.toJSON())}}),b.container.append(this.dialogView.render().$el),this.dialogView.$el.on("mouseup",function(a){a.stopPropagation()})),this.dialogView.show(a,this.$el,b)},_clickHourHandler:function(a){var b=this.$(a.currentTarget),c=b.attr("data-time");this.ui.hourPick.removeClass("current"),b.addClass("current"),this.model.set("hourDate",c)},_clickMinuteHandler:function(a){a.stopPropagation();var b=this.$(a.currentTarget),c=b.attr("data-time");this.ui.minutePick.removeClass("current"),b.addClass("current"),this.model.set("minuteDate",c)},onClose:function(){this.dialogView&&this.dialogView.close()}}),PublistMblogToreplyView=Talent.ItemView.extend({className:"who_pm",template:jst["publish-dynamic/publist-mblog-toreply"],ui:{lock:"span[data-name=feed-comment-lock]"},events:function(){var a={};return a},ui:{closeToUser:"span[data-name=to-reply-closed]"},events:function(){var a={};return a["click "+this.ui.closeToUser]="_closeToUserClickHandler",a},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options)},_closeToUserClickHandler:function(a){Talent.$(a.currentTarget);this.model.set({commentId:0,toUserName:""}),this.$el.slideUp(),this.trigger("closed",this.model.toJSON())}}),PublistMblogView=Talent.CompositeView.extend({defaults:{id:"pubMblog",type:"feed",maxlength:"1000",isLimit:!0,defaultValue:"你在忙什么",value:"",submitText:"发布",shape:"default",defaultHide:!1,inFocus:!0,toUserName:"",autoResize:!0,isShowAtAll:!1,atAllText:"所有同事",atAllValue:"@[所有同事:all_members] ",atAllTipText:"所有同事将收到本条消息",isShowAt:!0,atText:"同事",atMuti:!0,atTipText:"想确保谁看到就@这个成员",isShowAttachment:!0,isShowEmotion:!0,emotionText:"表情",isShowRange:!0,privateText:"所有人可见",privateValue:1,isShowRangeDropDown:!0,privateDropDownOptions:{},isShowSendSms:!0,params:{},submitRequest:function(){var a=new Talent.$.Deferre;return a}},template:jst["publish-dynamic/publish-mblog"],className:"tt_publishmblog",ui:{toName:"span[data-name=to-data-name]",count:"span[data-name=count]",inputWrap:"div[data-name=new-content-wrap]",label:"label[data-name=new-defaultvalue]",input:"textarea[data-name=new-content]",at:"[data-name=at]",atAll:"[data-name=atall]",submit:"button[data-name=submit]",range:"span[data-name=range]",rangeCaret:"i[data-name=range-caret]",rangeCont:"span[data-name=range-cont]",toReply:"div[data-name=to-reply]",lock:"i[data-name=lock]",cancel:"button[data-name=cancel]",attachment:"a[data-name=file]",sms:"span[data-name=mblog-sms]",smsInput:"span[data-name=mblog-sms-input]",smsText:"span[data-name=mblog-sms-text]",box:"div[data-name=mblog-box]",emotionBtn:'[data-name="emotion"]'},events:function(){var a={};return a["click "+this.ui.label]="_labelClcikHandler",a["focus.publish-mblog "+this.ui.input]="_focusHandler",a["keyup.publish-mblog "+this.ui.input]="_keyupHandler",a["cut "+this.ui.input]="_keyupHandler",a["input "+this.ui.input]="_keyupHandler",a["change "+this.ui.input]="_keyupHandler",a["blur "+this.ui.input]="_blurHandler",a["click "+this.ui.atAll]="_atAllClickHandler",a["click "+this.ui.cancel]="_cancelClcikHandler",a["click "+this.ui.range]="_rangeClcikHandler",a["mouseup "+this.ui.range]="_stopMouseupEvent",a["click "+this.ui.submit]="_submitData",a["click "+this.ui.emotionBtn]="_showEmotion",a["click "+this.ui.sms]="_requestCheckSms",a},templateHelpers:function(){return{value:this.settings.value,maxlength:this.settings.maxlength,isLimit:this.settings.isLimit,submitText:this.settings.submitText,atText:this.settings.atText,atAllText:this.settings.atAllText,attachmentText:this.settings.attachmentText,privateText:this.settings.privateText,defaultValue:this.settings.value?"":this.settings.defaultValue,isShowRange:this.settings.isShowRange,isShowAttachment:this.settings.isShowAttachment,isShowAt:this.settings.isShowAt,isShowAtAll:this.settings.isShowAtAll,isShowSendSms:this.settings.isShowSendSms,isShowEmotion:this.settings.isShowEmotion,emotionText:this.settings.emotionText}},modelEvents:{"change:privateText":"_changePrivateValue","change:toUserName":"_renderToreplyView"},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options);var a=this.options.privateValue||this.settings.privateValue;this.settings.privateDropDownOptions=Talent._.extend({},this.defaults.privateDropDownOptions,this.options.privateDropDownOptions,{privateValue:a}),this.userInfo=Context.getUserInfo(),this.depId=this.userInfo.DepartmentId||0,this.tajax=!1,this._resetModel(),this.storage=Context.getLocalStorage(),this.localStroageKey="mblogLocalStroage_"+this.userInfo.Id+"_"+this.settings.id+"_"+this.settings.type,this.bindInputAutoResize=!this.settings.autoResize,this.settings.isShowRange&&this.model.set("rangeViewSelected",!1)},onRender:function(){var a=this;window.iTalentSDK.register({listenEvent:"tita_widget_emotion_pub",context:this,cb:function(a){this._afterChoseEmotion(a)}}),this.settings.value&&(this.ui.inputWrap.addClass("input-blur"),this.ui.input.trigger("keyup.publish-mblog")),"line"==this.settings.shape&&this.$el.addClass("tt_line_publishmblog"),this.settings.defaultHide?this.$el.hide():this.ui.cancel.remove(),this._customFeedComment(),this._customAt(),this._customAtAll(),this._customRange(),this.$el.on("mouseup",function(b){b.stopPropagation(),a.emotionView&&a.emotionView.hide(),a.rangeView&&a.rangeView.close()}),this._bindWindow(),this._bindAt(),this._renderToreplyView(),this._bindSMS(),"line"!=this.settings.shape&&this._showLocalInput(),this._customAttachment()},_afterChoseEmotion:function(a){var b=this.ui.input[0],c=this.ui.input,d=a.emotionVal;if(document.selection)c.focus(),sel=document.selection.createRange(),sel.text=d,c.focus();else if(b.selectionStart||"0"==b.selectionStart){var e=b.selectionStart,f=b.selectionEnd,g=b.scrollTop;b.value=b.value.substring(0,e)+d+b.value.substring(f,b.value.length),c.focus(),b.selectionStart=e+d.length,b.selectionEnd=e+d.length,b.scrollTop=g}else c.value+=d,c.focus();c.keyup()},_stopMouseupEvent:function(a){a.stopPropagation()},_showEmotion:function(a){a.stopPropagation();var b=this,c=this.$(a.currentTarget),d=(this.$(".list_pm"),Talent.$("._tt_plandetailcontent"));if(window.top!==window.self){var e="//"+location.host+"/widget#more/emotion";return void(window.iTalentSDK&&window.iTalentSDK.showPopup(e,474,252))}d=d.length?d:Talent.$("body"),this.emotionView&&(this.emotionView.close(),this.emotionView.hide()),this.emotionView=new EmotionView({triggerNode:c,inputNode:this.ui.input,dialogShowOption:{container:b.$el,boundingEl:d,adjust:100,topBias:-10}}),this.emotionView.render()},onClose:function(){Talent.$(document).off("click.Publish-Mblog"+this.settings.id),$(".tipsy").remove()},show:function(){this.$el.slideDown()},hide:function(){this.$el.slideUp()},_bindSMS:function(){this.settings.isShowSendSms&&this.ui.smsText.tipsy({gravity:"s"})},_showLocalInput:function(){var a=this.storage.getItem(this.localStroageKey),b=this.ui.input,c=this;a&&(this.ui.label.hide(),b.val(a),setTimeout(function(){c.bindInputAutoResize||(c.bindInputAutoResize=!0,c.ui.input.autosize()),c.bindInputAutoResize&&b.trigger("input.autosize")},0),this.model.set("context",a),this.ui.inputWrap.addClass("input-blur"),this._changeTotal())},_resetModel:function(){this.model.set({context:"",total:0,toUserName:this.options.toUserName||"",visibility:1==this.settings.privateValue?1:2,privateObjId:3==this.settings.privateValue?this.depId:0,privateObjType:3==this.settings.privateValue?15:0,privateValue:this.settings.privateValue||1,files:[],isSendSMS:!1,feedId:0,commentId:0,YFYDocuments:[],privateText:this.settings.privateText})},_renderToreplyView:function(){var a=this.model.get("toUserName"),b=this.settings.type;if("comment"==b){if(""==a)return void(this.publistMblogToreplyView&&this.publistMblogToreplyView.close());this.publistMblogToreplyView&&this.publistMblogToreplyView.close(),this.publistMblogToreplyView=new PublistMblogToreplyView({model:this.model});var c=this.publistMblogToreplyView.render().$el;this.ui.box.prepend(c),Talent._.animate(c,"badgeDown")}},_bindWindow:function(){var a=this;Talent.$(document).off("click.Publist-Mblog-View-"+this.settings.id),Talent.$(document).on("click.Publist-Mblog-View-"+this.settings.id,function(){setTimeout(function(){var b=$.trim(a.model.get("context"));b!=a.settings.value&&""!=b||a.model.get("files").length||(a._resetModel(),a._reset(),"line"==a.settings.shape&&(a.$el.addClass("tt_line_publishmblog"),a.ui.input.css("height","")),a.settings.defaultHide&&a.$el.hide())},50)}),this.$el.off("click.Publist-Mblog-View-"+this.settings.id),this.$el.on("click.Publist-Mblog-View-"+this.settings.id,function(a){a.stopPropagation()})},_bindAt:function(){var a=this;if(this.settings.isShowAt){this.memberSmemberView=new UserSelector({collection:new UserSelectorCollection}),this.memberSmemberView.addAtNode(this.ui.input,this.ui.at,{viewType:"single",triggerChar:"@",input:!0,muti:this.settings.atMuti,stringLen:{Name:34,Email:30,DepartmentName:30}});this.ui.input.on("submit",function(){a.bindInputAutoResize?$(this).trigger("input.autosize").trigger("keyup"):$(this).trigger("keyup.publish-mblog")})}},_reset:function(){var a=this.settings.privateDropDownOptions;this.rangeView&&this.rangeView.model.set(a),this.render()},_customFeedComment:function(){"feed"==this.settings.type&&this.ui.cancel.remove(),"comment"==this.settings.type&&this.ui.range.remove()},_customAt:function(){if(this.settings.isShowAt){var a=this;this.ui.at.find(".icon-at").tipsy({title:function(){return a.settings.atTipText},gravity:"sw"})}},_customAtAll:function(){if(this.settings.isShowAtAll){var a=this;this.ui.atAll.find(".icon-at").tipsy({title:function(){return a.settings.atAllTipText},gravity:"sw"})}},_customAttachment:function(){if(this.settings.isShowAttachment){var a=Context.IsOpenYifangyun();this.titaUploadBtn=new UploaderComponentView({container:this.$el,openYFY:a}),this.listenTo(this.titaUploadBtn,"uploadEnd",function(a){this.model.set("files",a.dfs),this.model.set("YFYDocuments",a.YFYresp),this._upLoadEndInputContext()},this),this.listenTo(this.titaUploadBtn,"deleteItem",function(a){this.model.set("files",a.dfs),this.model.set("YFYDocuments",a.YFYresp),this._upLoadEndInputContext()},this),this.ui.attachment.html(this.titaUploadBtn.render().$el)}},_upLoadEndInputContext:function(){var a=this.model.get("context"),b=this.model.get("files"),c=this.model.get("YFYDocuments"),d=b.length;c&&c.length&&(d+=c.length),file_cont=""==a?"分享了"+d+"个文件":a+"分享了"+d+"个文件",d>0&&a.search(/分享了.{1,2}个文件/)>=0&&(file_cont=a.replace(/分享了.{1,2}个文件/,"分享了"+d+"个文件")),0==d&&(file_cont=a.replace(/分享了.{1,2}个文件/,"")),this.model.set("context",file_cont),this.ui.input.val(file_cont).trigger("keyup.publish-mblog"),this.ui.inputWrap.addClass("input-blur")},_smsClickData:function(){var a=this.model.get("isSendSMS");a?(this.ui.smsInput.removeClass("checkbox-checked"),this.model.set("isSendSMS",!1)):(this.ui.smsInput.addClass("checkbox-checked"),this.model.set("isSendSMS",!0))},_requestCheckSms:function(a){var b=this,c=Talent.$(a.currentTarget);SMSCollection.getSmsCheck({to_user_id:this.userInfo.Id}).done(function(a){2==a||4==a?ConfirmDialogView(c,"目前您企业的短信已超出许可量，请联系超管进行短信充值",{cancel:!1,sure:function(){},pos:"left",leftBias:100}):b._smsClickData()})},_customRange:function(){this.settings.isShowRangeDropDown||(this.ui.rangeCaret.remove(),this.ui.range.css("cursor","default")),1==this.settings.privateValue&&this.ui.lock.hide()},_labelClcikHandler:function(a){Talent.$(a.currentTarget);this.ui.input.focus()},_focusHandler:function(a){{var b=Talent.$(a.currentTarget);$.trim(b.val())}if(this.ui.inputWrap.removeClass("input-blur input-error"),this.ui.inputWrap.addClass("input-focus"),this.ui.label.css("opacity",.5),"line"==this.settings.shape){this.$el.removeClass("tt_line_publishmblog")}this.bindInputAutoResize||(this.bindInputAutoResize=!0,this.ui.input.autosize(),this._showLocalInput())},_keyupHandler:function(a){if(a.ctrlKey&&13==a.keyCode)return void this._submitData();if(!this.tajax){var b=Talent.$(a.currentTarget),c=$.trim(b.val());c==this.settings.value?this.model.set("context",""):this.model.set("context",c),this.storage.setItem(this.localStroageKey,c),this._changeContext()}},_blurHandler:function(a){var b=Talent.$(a.currentTarget),c=$.trim(b.val());this.ui.inputWrap.removeClass("input-focus").removeClass("input-error"),""==c?this.settings.value?(b.val(this.settings.value),this.ui.inputWrap.addClass("input-blur")):this.ui.label.css("opacity",1).show():this.ui.inputWrap.addClass("input-blur")},_cancelClcikHandler:function(){this.storage.removeItem(this.localStroageKey),this._resetModel(),this._reset()},_rangeClcikHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget);if(this.settings.isShowRangeDropDown&&!b.hasClass("quna_pm-disabled")){this.rangeView&&this.rangeView.close();var c=this.settings.privateDropDownOptions;c.privateValue=this.settings.privateValue,this.rangeView=new PrivateRangView(c),this.listenTo(this.rangeView,"selected",function(a){this.model.set("rangeViewSelected",!0),2==a.privateValue&&this._checkAtText(),this.model.set({visibility:a.visibility,privateObjType:a.privateObjType,privateObjId:a.privateObjId,privateValue:a.privateValue,privateText:a.text})},this),this.ui.box.append(this.rangeView.render().$el),this.rangeView.show(b,{topBias:10,container:this.ui.box,pos:"bottomRight"}),this.rangeView.model.set({privateValue:this.model.get("privateValue")})}},_checkAtText:function(){var a=/@\[(.*?):([\w\.-])+@([\w-]+\.)+[\w-]{2,4}\]\s?/g,b=this.model.get("context");0==a.test(b)&&(this.ui.at.trigger("click"),this.bindInputAutoResize&&this.ui.input.trigger("input.autosize"))},_changeContext:function(){var a=this.model.get("context"),b=/@\[(.+?):(.+?)_members\]/g,c=/@\[(.+?):(\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+)/g,d=/@\[(.+?):all_members\]/g;""!=a?this.ui.label.hide():this.ui.label.show(),d.test(a)?(this.model.set("visibility",1),this.ui.range.addClass("quna_pm-disabled")):c.test(a)||b.test(a)?this.model.get("rangeViewSelected")||(this.model.set("visibility",2),this.ui.lock.show(),this.model.set({privateText:"私密",privateValue:2}),this.ui.rangeCont.html("私密")):(this.model.get("rangeViewSelected")||(this.model.set({visibility:this.settings.privateValue,privateValue:this.settings.privateValue,privateText:this.settings.privateText}),1==this.settings.privateValue?(this.ui.lock.hide(),this.ui.rangeCont.html("公开")):(this.ui.lock.show(),this.ui.rangeCont.html(this.settings.privateText))),this.ui.range.removeClass("quna_pm-disabled")),this._changeTotal()},_changeTotal:function(){var a=this.model.get("context").length;this.ui.count.text(a),this.ui.submit.removeClass("btn-disabled"),a>0&&(this.ui.count.addClass("cur_num_pm"),this.ui.count.removeClass("error_num_pm")),1>a&&(this.ui.count.removeClass("cur_num_pm").removeClass("error_num_pm"),this.ui.submit.addClass("btn-disabled")),a>this.settings.maxlength&&this.settings.isLimit&&(this.ui.count.text(this.settings.maxlength-a),this.ui.count.addClass("error_num_pm"),this.ui.submit.addClass("btn-disabled")),this.model.set("total",a)},_changePrivateValue:function(){var a=this.model.get("privateValue");1==a?(this.ui.lock.hide(),this.ui.input.removeClass("writelock")):(this.ui.lock.show(),this.ui.input.addClass("writelock")),this.ui.rangeCont.html(this.model.get("privateText"))},_atAllClickHandler:function(a){var b=(Talent.$(a.currentTarget),this.ui.input.val());""==$.trim(b)&&(b="");var c=this._getCurPos(this.ui.input.get(0)),d=b.substring(0,c.start);this.ui.input.val(c.end<0?this.settings.atAllValue:d+this.settings.atAllValue+b.substring(c.end)),this._setCurPos(this.ui.input.get(0),d.length+this.settings.atAllValue.length),this.ui.input.trigger("keyup.publish-mblog")},_getCurPos:function(a){var b=0,c=0;if("number"==typeof a.selectionStart)b=a.selectionStart,c=a.selectionEnd;else if(document.selection){var d=document.selection.createRange();if(d.parentElement().id==a.id){var e=document.body.createTextRange();for(e.moveToElementText(a),b=0;e.compareEndPoints("StartToStart",d)<0;b++)e.moveStart("character",1);for(var f=0;b>=f;f++)"\n"==a.value.charAt(f)&&b++;var e=document.body.createTextRange();for(e.moveToElementText(a),c=0;e.compareEndPoints("StartToEnd",d)<0;c++)e.moveStart("character",1);for(var f=0;c>=f;f++)"\n"==a.value.charAt(f)&&c++}}return{start:b,end:c}},_setCurPos:function(a,b,c){if(c=c||b,a.setSelectionRange)a.focus(),a.setSelectionRange(b,c);else if(a.createTextRange){var d=a.createTextRange();d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d.select()}},_submitData:function(){var a=this.model.get("context");if(""!=a&&!(a.length>this.settings.maxlength)){a=Context.encodeScript(a),a=a.replace(/[\n\r]/g,"<br/>"),this.model.set("context",a);var b=this;if(!this.tajax){this.tajax=!0,this.ui.submit.html("正在"+this.settings.submitText+"……").addClass("btn-disabled");{Talent._.extend(this.model.toJSON(),this.settings.params)}this.settings.submitRequest(this.ui.submit,this.model.toJSON(),this.settings.params).done(function(){b.storage.removeItem(b.localStroageKey),b.ui.submit.html(b.settings.submitText).removeClass("btn-disabled"),b.ui.inputWrap.removeClass("input-focus"),b._resetModel(),b.rangeView&&b.rangeView.model.set(b.model.toJSON()),"feed"==b.settings.type?(b.ui.inputWrap.addClass("success_pm"),setTimeout(function(){b.ui.inputWrap.removeClass("success_pm"),b._reset(),b.tajax=!1},500)):(b._reset(),b.tajax=!1)}).fail(function(){b.tajax=!1,b.ui.submit.html(b.settings.submitText).removeClass("btn-disabled")})}}}}),ExperienceView=Talent.Layout.extend({defaults:{id:"ExperienceView",requestSubmit:function(){var a=new Talent.$.Deferred;return a}},template:jst["experience/experience"],className:"experience-view-twidget",initialize:function(a){this.settings=Talent._.extend({},this.defaults,a)},regions:{content:"[data-name=experience-contant]"},onRender:function(){},show:function(a,b){this._renderDialogView(a,b)},_renderDialogView:function(a,b){var c=this;this.dialogView||(this._renderTaskCreateView(),this.dialogView=new TDialogView({showClosed:!0,sure:!1,type:"dialog",cancel:!1}),this.listenTo(this.dialogView,"hide",function(){this.trigger("hide")}),b.container.append(this.dialogView.render().$el),this.dialogView.$el.on("mouseup",function(a){a.stopPropagation()}),Talent.$(document).off("mouseup.TT-Dialog-View-Confirm"),Talent.$(document).on("mouseup.TT-Dialog-View-Confirm",function(){Talent.$(document).off("mouseup.TT-Dialog-View-Confirm"),c.dialogView.close(),c.trigger("hide")})),this.dialogView.show(a,this.$el,b)},_renderTaskCreateView:function(){var a={privateRangeOptions:!1,extendPersonOptions:!1,applyUserOptions:!1,participatorOptions:!1,replaceOptions:!1,hourDateOptions:!1,principalOptions:!1,classOptions:!1,nameOptions:!1,dateOptions:!1,bottomOptions:{isShowFileUpload:!0,isShowPrivateBtn:!1,isShowMessage:!1,isShowPackUpBtn:!1,pubBtnText:"发布"},id:this.settings.id};a.requestSubmit=this.settings.requestSubmit,this.taskCreateView=new TaskCreateView(a),this.content.show(this.taskCreateView)},onClose:function(){this.dialogView&&this.dialogView.close()}}),FeedTmpl=function(){function a(a,b){var c="",d=b||"",e=Context.getI18n();
if(20==a)switch(c=e.task_1,d){case 5:c="客户支持";break;case 6:c="任务";break;case 7:c="任务";break;case 8:c="任务";break;case 16:c="任务";break;case 17:c="任务";break;case 19:c="审批";break;case 21:c="任务";break;case 22:c="任务"}return c}function b(a,b){var c=b.url?b.url:"javascript:void(0);";switch(a){case 1:c="#more/shareinfo?id="+b.feedId;break;case 5:var d=1;26==b.reportType&&(d=2),27==b.reportType&&(d=3),c="#daily?daily_id="+b.feedId+"&to_user_id="+b.publishUser.userId+"&date="+b.dailyDate+"&dailyType="+d+"&plan_table_id="+b.planTableId}return c}function c(a){if(!a)return a;var a=a||"";a&&""!=a&&(a=a.replace(/(&apos;)/g,"'").replace(/(!%nr%!)/g,"<br/>").replace(/[\r\n]/g,"<br/>"));var b=(a.split("<br/>")||[],!1);return{contentMax:b,content:a,subStringContent:a}}function d(a,b,c,d,e){var f=a,g=(moment().year(),Context.formatDate(b)),h=Context.formatDate(c);switch(f){case 0:return"";case 2:return g+" - "+h;case 3:return"剩余 "+d+" 天";case 4:if(1==d){var i=c.split(" ")[1]||c;return"今天 "+i+" 截止"}return c;case 5:return 0==e?'<span class="date-error_ftb">已过期</span>':'<span class="date-error_ftb">已过期 '+e+" 天</span>"}}function e(a,b){for(var c=[],d=0,a=h(a),e=0;e<a.length;e++){var f=a.charAt(e);c.push(f);var i=escape(f);if(i.length>=4&&("%uFF60">i||i>"%uFF9F")?d+=2:d++,d>=b)break}return c=g(c.join("")),c!=a?c+"...":c}function f(a){var b=a,c="";switch(b){case 0:c="";break;case 1:c="来自 Android App";break;case 2:c="来自 iOS App";break;case 3:c="来自 Windows Phone App";break;case 4:c="来自 移动Web";break;case 5:c="来自 移动App";break;case 6:c="来自 Android Web";break;case 7:c="来自 iOS Web";break;case 8:c="Windows Phone Web";break;default:c="来自 "+a}return c.length>15&&(c=c.substring(0,15)+"..."),c}function g(a){return 0==a.length?"":(s=a.replace(/</g,"&lt;"),s=s.replace(/>/g,"&gt;"),s=s.replace(/ /g,"&nbsp;"),s)}function h(a){return 0==a.length?"":(s=a.replace(/&apos;/g,"'"),s=s.replace(/&quot;/g,'"'),s=s.replace(/&amp;/g,"&"),s=s.replace(/!%nr%!/g,"<br/>"),s)}function i(a){return fileName=a.replace(/\.none$/,""),fileName}function j(a,b,c,d){var e="",f=Context.getI18n();switch(c.objType){case 3:e="团队中";break;case 4:e=f.work_1+"中",d&&(e=402==d.appId?"目标中":203==d.appId?"职位中":"中");break;case 15:e="部门中"}return 20==a&&(6==b||7==b||8==b||16==b||21==b||22==b)&&(e="职位中"),6==a&&d&&(e=203==d.appId&&c&&3==c.objSubType?"在":"中"),e}function k(a,b,c,d){var e="",f=Context.getI18n();switch(a){case 1:e="说：";break;case 20:e=d?"的"+f.plan_1:19==b?"发起的申请":"发起的"+f.task_1;break;case 4:e="的"+f.plan_1+"表";break;case 5:e="的日报",26==b&&(e="的周报"),27==b&&(e="的月报");break;case 6:3==b&&(e="创建的职位");break;case 7:e="的考核";break;case 9:e="的审批";break;case 80:e="的签到"}return e}function l(a,b,c){var d={};if(6==a&&4==b)switch(c){case 3:d.ico=203,d.text="职位"}return d}return{showTimeTmplFun:d,postSourceTmplFun:f,getShortString:e,encodeScript:g,decodeScript:h,fileNameTmplFun:i,setSourceContFun:j,dealContent:c,typeUrl:b,typeName:a,setSourceTypeContFun:k,typeIco:l}}(),feedActionMore=Talent.ItemView.extend({defaults:{id:"",detail:!0,deleted:!0,setTop:!0,detailUrl:"javascript:void(0);"},className:"more-feedbox",template:jst["feed/feed-action-more"],ui:{detail:"li[data-name=feed-action-detail]",deleted:"li[data-name=feed-action-del]",top:"li[data-name=feed-action-top]"},events:function(){var a={};return a["click "+this.ui.detail]="_detailHandler",a["click "+this.ui.deleted]="_deleteHandler",a["click "+this.ui.top]="_topHandler",a},modelEvents:{"change:isTop":"render","change:setTop":"render","change:detailUrl":"render"},initialize:function(){var a=this;this.settings=Talent._.extend({},this.defaults,this.options),this.id=this.settings.id,this.model.set(this.settings),Talent.$(document).off("click.Feed-Action-More-View"),Talent.$(document).on("click.Feed-Action-More-View",function(){Talent._.animate(a.$el,"fadeOutUp",1,"",function(){a.$el.hide()})}),this.$el.on("click",function(a){a.stopPropagation()}),"undefined"==typeof this.model.get("isTop")&&(this.model.set("isTop",!1),this.settings.setTop=!1);Context.getUserInfo();this.hasAppend=!1,this.webHost=Context.isAbsolutePath()},show:function(a){this.hasAppend||(this.hasAppend=!0,this.$el.html(this.template(this.model.toJSON())).appendTo("body"));var b=a.offset(),c=this.$el.outerWidth(),d=a.outerHeight(),e=a.width();this.$el.css({left:b.left-c+e+3.5,top:b.top+d+5,position:"absolute"}).show();Talent._.animate(this.$el,"fadeInDown",1)},hide:function(){this.$el.hide()},setOptions:function(a){this.settings=Talent._.extend({},this.settings,a),this.id=this.settings.id,this.model.set(a,{silent:!0}),this.render()},_selfHandler:function(a){a.stopPropagation()},_detailHandler:function(a){var b=Talent.$(a.currentTarget);this.trigger("detail_"+this.id,b),this.hide()},_deleteHandler:function(a){var b=Talent.$(a.currentTarget);this.trigger("delete_"+this.id,b,this.model.toJSON())},_topHandler:function(a){var b=Talent.$(a.currentTarget),c=this.model.get("isTop");this.trigger("top_"+this.id,b,{isTop:!c}),this.hide()},onClose:function(){Talent.$(document).off("click.Feed-Action-More-View")}}),FeedAttachmentItemView=Talent.ItemView.extend({tagName:"li",template:jst["feed/feed-attachment-item"],className:"item_afb",templateHelpers:function(){var a=this.model.get("fileName"),b=this.model.get("fileType").toLowerCase(),c=this.model.get("documentSource"),d=this.model.get("imageUrl"),e=this.model.get("isImage");return d||c&&3==c&&(e=!1),/^jpg|png|gif|jpeg|image|JPG|PNG|GIF|JPEG$/.test(b)||(b=/^(rar|zip|exe|pdf|txt|doc|docx|ppt|pptx|xls|xlsx)$/.test(b)?b:/^(mp3|wma|wav|flac|ape|ogg|aac|m4a)$/.test(b)?"music":/^(mp4|mkv|rm|rmvb|avi|3gp|flv|wmv|asf|mpeg|mpg|mov|ts|m4v)$/.test(b)?"video":"none"),{fileName:Talent._.substringWithM(a,14,!0),fileType:b,webHost:Context.isAbsolutePath(),deleteable:!1,documentSource:c,isImage:e}}}),FeedAttachmentListView=Talent.CompositeView.extend({className:"attachment_fb",template:Talent._.template("<ul/>"),itemView:FeedAttachmentItemView,itemViewContainer:"ul",ui:{deleted:"a[data-name=attachment-deleted]",preview:"a[data-name=feed-attachment-preview]",previewButton:"span[data-name=feed-attachment-preview-button]",dialog:"span[data-name=feed-attachment-preview-dialog]"},collectionEvents:{reset:"_dealData"},_dealData:function(){this.collection.each(function(a){var b=Context.getAttachmentType().image,c=a.get("fileType").toLowerCase(),d=a.get("previewUrl"),e=a.get("documentSource");a.set("isImage",!1),a.set("documentSource",e);for(var f=0;f<b.length;f++)if(c==b[f]){a.set("isImage",!0);var g=d.lastIndexOf(".");if(g>0){var h=d.substr(0,g)+"_b."+d.substr(g+1),i=d.substr(0,g)+"_s."+d.substr(g+1);"gif"==c&&(i=d),a.set("bigUrl",h),a.set("smallUrl",i)}3==e&&a.set("isImage",!1);break}null!=d&&""!=d?a.set("isPreview",!0):a.set("isPreview",!1)})},initialize:function(){this._dealData()},events:function(){var a={};return a["click "+this.ui.deleted]="_deletedHandler",a["click "+this.ui.preview]="_renderImgPreviewView",a["click "+this.ui.previewButton]="_renderImgPreviewView",a["click "+this.ui.dialog]="_renderImgPreviewView",a},_deletedHandler:function(a){var b=Talent.$(a.currentTarget),c=b.attr("id"),d=this.collection.toJSON(),e=[];Talent._.each(d,function(a){a.documentId!==c&&e.push(a)}),this.collection.reset(e),this.trigger("delete")},_renderImgPreviewView:function(a){var b=Talent.$(a.currentTarget),c=b.attr("data-name"),d=this.$("[data-name="+c+"]"),e=d.index(b),f=Talent._.where(this.collection.toJSON(),{isImage:!0,documentSource:1})||[];f.length&&(0>e||(this.imgPreviewView&&this.imgPreviewView.close(),this.imgPreviewView=new ImgPreviewView({collection:new Talent.Collection(f),index:e}),this.$el.append(this.imgPreviewView.render().el)))}}),FeedCommentItemView=Talent.ItemView.extend({defaults:{feedType:""},className:"comment_item_box",template:jst["feed/feed-comment-item"],ui:{lock:"span[data-name=feed-comment-lock]",slide:'a[data-name="comment-content-slide"]',attachment:"div[data-name=feed-comment-attachment]",rewardGive:"[data-name=feed-reward-give]"},templateHelpers:function(){var a=this.model.get("content"),b=this.model.get("commentType");return 10==b&&(a='<span class="taoshang_ico"></span>'+a),9==b&&(a='<span class="dashang_ico"></span>'+a),{webHost:Context.isAbsolutePath(),content:a}},modelEvents:{"change:toggleContent":"render"},events:function(){var a={};return a["click "+this.ui.slide]="_slideMoreContentHandler",a["click "+this.ui.rewardGive]="_clickRewardGiveHandler",a},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options)},onRender:function(){this._lockTipsy(),this._renderAttachmentListView(),this.ui.slide.remove()},_clickRewardGiveHandler:function(a){var b=Talent.$(a.currentTarget);window.top==window.self&&this.settings.feedType&&""!=this.settings.feedType&&this.trigger("rewardGive",b,this.model.toJSON())},_renderAttachmentListView:function(){this.attachmentCollection=new Talent.Collection(this.model.get("attachments")||[]),this.attachmentCollection.length&&(this.feedAttachmentListView||(this.feedAttachmentListView=new FeedAttachmentListView({collection:this.attachmentCollection}),this.ui.attachment.html(this.feedAttachmentListView.render().$el)))},_slideMoreContentHandler:function(){this.model.get("contentShowAll")?(this.model.set("contentShowAll",!1),this.model.set("toggleContent",this.subStringContent)):(this.model.set("contentShowAll",!0),this.model.set("toggleContent",this.originContent))},_lockTipsy:function(){if(this.ui.lock&&!this.hasBindTipsy){this.hasBindTipsy=!0;var a=this.model.get("privateTipText");this.ui.lock.tipsy({title:function(){return a},gravity:"s"})}}}),FeedCommentListView=Talent.CompositeView.extend({defaults:{isPrivate:!1,privateTipText:"所有可见",actionMore:{detail:!0,deleted:!0,setTop:!1},defaultCount:4,feedId:"",sort:"append",feedType:""},className:"comment_list_fb",template:jst["feed/feed-comment-list"],itemViewContainer:"div[data-name=comment-list]",itemView:FeedCommentItemView,ui:{reply:"a[data-name=feed-comment-reply]",total:"div[data-name=feed-comment-total]",totalNum:"span[data-name=feed-comment-total-num]",deleted:"a[data-name=feed-comment-deleted]",deHua:"span[data-name=feed-dehua]",commentList:"div[data-name=comment-list]",totalIco:"b[data-name=feed-comment-total-ico]"},modelEvents:{"change:total":"_changeTotalHandler"},events:function(){var a={};return a["click "+this.ui.reply]="_replyHandler",a["click "+this.ui.total]="_toggleMoreHandler",a["click "+this.ui.deleted]="_deletedHandler",a["mouseenter "+this.ui.deHua]="_overDehuaHandler",a["mouseleave "+this.ui.deHua]="_leaveDeHuaHandler",a},initialize:function(){var a=this;this.settings=Talent._.extend({},this.defaults,this.options),this.options.actionMore&&(this.settings.actionMore=Talent._.extend({},this.defaults.actionMore,this.options.actionMore)),this.slideStatus=!1,this.overDeHua=!1,this.childViews={},this.on("itemview:rewardGive",function(b,c){a.trigger("rewardGive",c,b.model.toJSON())})},onRender:function(){this.model.get("total")==this.collection.length,this.model.get("total")<this.settings.defaultCount+1},onBeforeItemAdded:function(a){var b=a.model.get("commentId");this.childViews[b]=a;var c="undefined"!=typeof this.model.get("isPrivate")?this.model.get("isPrivate"):this.settings.isPrivate,d=this.model.get("privateTipText")?this.model.get("privateTipText"):this.settings.privateTipText;a.model.set({isPrivate:c,privateTipText:d})},addNewItemComment:function(a){var b=this.itemViewOptions()||{},c=this.buildItemView(a,this.itemView,b);return this.collection.add([a],{silent:!0}),c.render().$el},itemViewOptions:function(){return{feedType:this.settings.feedType}},_overDehuaHandler:function(a){var b=Talent.$(a.currentTarget),c=b.attr("data-parent-id");this.overDeHua=!0,this._requestDehua(b,c)},_requestDehua:function(a,b){var a=a,c=this,b=b;a.data("tipsy")||a.tipsy({gravity:"s",trigger:"manual",html:!0}),a.attr("original-title")?this.overDeHua&&a.tipsy("show"):CommentV2.getCommentGetByIds({comment_id:b}).done(function(b){if(!b||!b.content)return a.attr("original-title","内容已删除"),void(c.overDeHua&&a.tipsy("show"));var d=Context.dencodeScript(b.content);a.attr("original-title",d),c.overDeHua&&a.tipsy("show")})},_leaveDeHuaHandler:function(a){this.overDeHua=!1;var b=Talent.$(a.currentTarget);b.tipsy("hide")},_replyHandler:function(a){a.stopPropagation(),this.feedActionMoreView&&this.feedActionMoreView.hide();var b=Talent.$(a.currentTarget),c=b.attr("id"),d=this.collection.get(c).toJSON();this.trigger("reply",d)},_toggleMoreHandler:function(a){var b=Talent.$(a.currentTarget),c=this.ui.totalIco;if(this.slideStatus){var d=this.collection.toJSON(),e=d.length;this.collection.reset(d.slice(e-this.settings.defaultCount,e)),this.slideStatus=!1,c.removeClass("icon-drop-up").addClass("icon-drop-down")}else this.slideStatus=!0,c.addClass("icon-drop-up").removeClass("icon-drop-down");this.slideStatus&&this.trigger("more",b)},_deletedHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=b.attr("id"),d=this.childViews[c],e=d.$el,f=this;ConfirmDialogView(b,"此操作不可恢复，您确定删除吗？",{pos:"topRight",leftBias:0,topBias:0,container:e,sure:function(){Talent._.animate(b,"bounceOut",3,"",function(){e.slideUp()}),f._deleteCalll(),f.trigger("delete",b,{commentId:c,total:f.model.get("total")})}})},_deleteCalll:function(){var a=this.model.get("total")-1;this.model.set("total",a)},_changeTotalHandler:function(){var a=this.model.get("total");this.ui.totalNum.html(a)},appendHtml:function(a,b){"prepend"==this.settings.sort?this.ui.commentList.prepend(b.el):this.ui.commentList.append(b.el)}}),FeedTrackView=Talent.CompositeView.extend({defaults:{defaultCount:4},template:jst["feed/feed-track"],ui:{slide:"div[data-name=task-track-slide]"},modelEvents:{"change:comments":"render"},events:function(){var a={};return a["click "+this.ui.slide]="_slideMoreHandler",a},templateHelpers:function(){return this._dealData(),{defaultCount:this.settings.defaultCount,content:this.model.get("content")}},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options),this.model.set("taskTrackShowAll",!1)},_dealData:function(){var a=this.model.get("comments")||[],b=0,c="";if(a.length){a[0].dealCreateDate=a[0].createDate,a[0].isShowIco=!0;for(var d=1;d<a.length;d++){var e=a[d],f=moment(e.createDate,"YYYY/MM/DD HH:mm").format("YYYY/MM/DD")||e.createDate,g=moment(a[b].createDate,"YYYY/MM/DD HH:mm").format("YYYY/MM/DD");c=g,f==c?(e.dealCreateDate=moment(e.createDate,"YYYY/MM/DD HH:mm").format("HH:mm"),e.isShowIco=!1):(b=d,e.dealCreateDate=e.createDate,e.isShowIco=!0),d==a.length-1&&(e.isShowIco=!0),e.content=e.content}}},_slideMoreHandler:function(a){a.stopPropagation();var b=this.model.get("taskTrackShowAll");if(b){var c=this.model.get("comments"),d=this.settings.defaultCount,e=c.length;this.model.set("taskTrackShowAll",!1),this.model.set("comments",c.slice(e-d,e))}else this.model.set("taskTrackShowAll",!0),this.trigger("showAll")}}),FeedDailyView=Talent.Layout.extend({className:"simpletask_fb",template:jst["feed/feed-daily"],ui:{},regions:{content:"dd[data-name=feed-daily-content]"},templateHelpers:function(){var a=this.model.get("evaluation"),b="";a&&(b=Talent._.TitaWidget_evaluation(a));var c={8:"日报",26:"周报",27:"月报"},d=this.model.get("reportType"),e={1:"按时提交",2:"逾期提交"},f=this.model.get("submitState");return{evaluation:b,dailyType:c[d],dailySubmit:{content:e[f],type:f},webHost:Context.isAbsolutePath(),url:FeedTmpl.typeUrl(this.model.get("feedType"),this.model.toJSON())}},events:function(){var a={};return a},modelEvents:{},onShow:function(){this._renderShareView()},_renderShareView:function(){this.feedShareView=new FeedShareView({model:this.model,options:{isShowIco:!1}}),this.content.show(this.feedShareView)},_renderFeedTrackView:function(){var a=this.model.get("feedOperations");a&&a.comments&&(this.feedTrackView||(this.feedTrackView=new FeedTrackView({model:new Talent.Model({id:this.model.get("feedId")})}),this.listenTo(this.feedTrackView,"showAll",function(){this._requestMoreTrack()},this),this.feedTrackView.model.set(a),this.$el.insertAfter(this.feedTrackView.render().el)))},_requestMoreTrack:function(){var a=this,b=this.model.get("feedId");CommentV2.getCommentGet({feed_id:b,comment_type:1}).done(function(b){a.feedTrackView.model.set("comments",b.comments)})}}),FeedActionView=Talent.ItemView.extend({defaults:{isShowPraise:!1,isShowReply:!0,isShowCollect:!0},className:"action_wrap_fb clearfix",template:jst["feed/feed-action"],ui:{reply:'li[data-name="feed-action-reply"]',collect:'li[data-name="feed-action-collect"]',praise:'li[data-name="feed-action-praise"]',beg:'li[data-name="feed-action-beg"]',reward:'li[data-name="feed-action-reward"]'},events:function(){var a={};return a["click "+this.ui.reply]="_replyHandler",a["click "+this.ui.collect]="_collectHandler",a["click "+this.ui.praise]="_praiseHandler",a["click "+this.ui.beg]="_rewardBegHandler",a["click "+this.ui.reward]="_rewardGiveHandler",a},templateHelpers:function(){var a=Context.getGlobal("Header")||[],b=Talent._.findWhere(a,{Code:"950"})?!0:!1;return{isShowPraise:this.settings.isShowPraise,isShowReply:this.settings.isShowReply,isShowCollect:this.settings.isShowCollect,postSource:FeedTmpl.postSourceTmplFun(this.model.get("postSource")),isShowReward:b}},modelEvents:{"change:isPraise":"render","change:isCollect":"render"},initialize:function(a){this.settings=Talent._.extend({},this.defaults,a),"undefined"==typeof this.model.get("isPraise")&&this.model.set("isPraise",!1),"undefined"==typeof this.model.get("isCollect")&&this.model.set("isCollect",!1)},_replyHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget);this.trigger("reply",b,{feedId:this.model.get("feedId")})},_collectHandler:function(a){var b=Talent.$(a.currentTarget),c=this.model.get("isCollect");this.trigger("collect",b,{feedId:this.model.get("feedId"),isCollect:!c})},_praiseHandler:function(a){var b=Talent.$(a.currentTarget),c=this.model.get("isPraise");this.model.set("isPraise",!c),this.trigger("praise",b,{feedId:this.model.get("feedId")})},_rewardBegHandler:function(){this.trigger("rewardBeg",this.model.toJSON())},_rewardGiveHandler:function(a){a.preventDefault(),this.trigger("rewardGive",this.model.toJSON())}}),FeedItemSourceView=Talent.ItemView.extend({defaults:{isInAppPage:!1},template:jst["feed/feed-item-source"],ui:{dashangIco:"[data-name=dashang-ico]"},modelEvents:{"change:isTop":"render"},templateHelpers:function(){var a=this.model.get("obj")||{},b=this.model.get("feedType");app=this.model.get("app"),appId=app&&app.appId?app.appId:"",isPlan=this.model.get("isPlan")||!1,type=0;var c="";return 20==b&&(type=this.model.get("taskType")),5==b&&(type=this.model.get("reportType")),6==b&&(type=a.objSubType||0),c=FeedTmpl.setSourceContFun(b,type,a,app),{isInAppPage:this.settings.isInAppPage,sourceCont:c,webHost:Context.isAbsolutePath(),sourceTypeCont:FeedTmpl.setSourceTypeContFun(b,type,appId,isPlan)}},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options)},onRender:function(){this.ui.dashangIco.tipsy({gravity:"s"})}}),FeedLeftView=Talent.ItemView.extend({defaults:{isInAppPage:!1},template:jst["feed/feed-left"],templateHelpers:function(){var a=this.settings.isInAppPage,b=(this.model.get("feedType"),this.model.get("app")),c="//st-web.tita.com/ux/tita-web-v4/release/app/images/app/logo-906.png";return b&&(b.appObj&&""==b.appObj.appObjLogo?b.appObj.appObjLogo=c:b.appLogo&&""==b.appLogo&&(b.appLogo=c)),{isInAppPage:a,webHost:Context.isAbsolutePath(),app:b}},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options)}}),FeedMainView=Talent.Layout.extend({defaults:{actionMore:{detail:!0,deleted:!0,setTop:!0},isInAppPage:!1},className:"main_fb",template:jst["feed/feed-main"],regions:{infoSource:"div[data-name=feed-source]"},templateHelpers:function(){var a=this.model.get("feedType"),b=0;1==a&&(b=10),20==a&&(b=7),5==a&&(b=8);var c=!0,d=this.model.get("app");return 80==a&&(a=!0),20==a&&d&&"203"==d.appId&&(c=!1),6==a&&(c=!1),{setRemindType:b,isShowSlideMore:c}},ui:{lock:"span[data-name=feed-lock]",remind:"span[data-name=feed-remind]",slideMore:"span[data-name=feed-action-slide]",topAction:"div[data-name=feed-top-action]",action:"div[data-name=feed-actoin]",userMark:"img[data-name=feed-user-mark]"},events:function(){var a={};return a["click "+this.ui.slideMore]="_slideMoreHandler",a["mouseenter "+this.ui.remind]="_tipShowHandler",a["mouseleave "+this.ui.remind]="_tipHideHandler",a["mouseenter "+this.ui.userMark]="_tipShowHandler",a["mouseleave "+this.ui.userMark]="_tipHideHandler",a["mouseenter "+this.ui.lock]="_tipShowHandler",a["mouseleave "+this.ui.lock]="_tipHideHandler",a},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options),this.webHost=Context.isAbsolutePath(),"undefined"==typeof this.model.get("isTop")&&this.model.set("isTop",!1)},onRender:function(){this._renderFeedItemSourceView(),this._customizeActionMore();var a=this.settings.actionMore;a.detail||a.deleted||a.setTop||this.ui.slideMore.remove(),0==a.detail&&0==this.model.get("editTopAble")&&0==this.model.get("isEdit")&&this.ui.slideMore.remove()},_customizeActionMore:function(){var a=this.model.get("feedType"),b=this.settings.actionMore;return b.setTop=this.model.get("editTopAble"),b.deleted=this.model.get("isEdit"),(80==a||6==a)&&(b.detail=!1),(2==a||4==a||20==a||6==a)&&(b.deleted=!1),b},_renderFeedItemSourceView:function(){var a=new FeedItemSourceView({model:this.model,isInAppPage:this.settings.isInAppPage});this.infoSource.show(a)},_slideMoreHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=this,d=this.model.get("feedType");this.feedId=this.model.get("feedId");var e=Talent._.extend({},{model:this.model},this.settings.actionMore);e.id=this.feedId,e.setTop=this.model.get("editTopAble"),e.deleted=this.model.get("isEdit"),0==this.settings.actionMore.setTop&&(e.setTop=!1),0==this.settings.actionMore.detail&&(e.detail=!1),0==this.settings.actionMore.deleted&&(e.deleted=!1),e=Talent._.extend({},e,this._customizeActionMore()),e.detailUrl=FeedTmpl.typeUrl(d,this.model.toJSON()),this.feedActionMoreView=new FeedActionMoreView(e),this.stopListening(this.feedActionMoreView,"delete_"+this.feedId),this.listenTo(this.feedActionMoreView,"delete_"+this.feedId,function(){c.feedActionMoreView.hide();c.feedId;ConfirmDialogView(b,"此操作不可恢复，您确定删除吗？",{pos:"left",container:this.$el,leftBias:21,sure:function(){c.trigger("delete")}})},this),this.stopListening(this.feedActionMoreView,"top_"+this.feedId),this.listenTo(this.feedActionMoreView,"top_"+this.feedId,function(a,b){this.model.set("isTop",b.isTop),this.trigger("top",a,b)},this),this.feedActionMoreView.model.set("isTop",this.model.get("isTop")),this.feedActionMoreView.show(b)},_tipShowHandler:function(a){var b=Talent.$(a.currentTarget);b.data("tipsy")||b.tipsy({gravity:"s",trigger:"manual"}),b.tipsy("show")},_tipHideHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget);b.tipsy("hide")}}),FeedStepView=Talent.ItemView.extend({defatuls:{step:[]},className:"feedstep_fb clearfix",template:jst["feed/feed-step"],templateHelpers:function(){for(var step=eval("("+this.settings.step+")"),activeIndex=0,data=[],status=1==step[step.length-1].status?2:1,i=0;i<step.length&&!(step.length>4&&activeIndex>2&&i>activeIndex+2);i++){var item=step[i];1==item.status&&(item.className="complete"),2==item.status&&(item.className="active",step[i-1]&&(step[i-1].className="unfinished"),activeIndex=i),3==item.status&&2==status&&(item.className="skip-a",step[i-1]&&(step[i-1].className="skip-b"))}if(step.length<=4)data=step;else if(3>activeIndex&&2!=status)data=step.slice(0,4);else{var end=activeIndex+2,start=activeIndex-2;0>start&&(start=0),end>step.length&&(end=step.length,start=end-4),2==status&&(end=step.length,start=end-4),data=step.slice(start,end)}return{step:data,total:step.length,status:status}},initialize:function(){this.settings=Talent._.extend({},this.defatuls,this.options)}}),FeedPlanView=Talent.ItemView.extend({className:"simpletask_fb",template:jst["feed/feed-plan"],initialize:function(){}}),FeedPraiseView=Talent.ItemView.extend({className:"praise_fb",template:jst["feed/feed-praise"],modelEvents:{"change:total":"render"},ui:{praise:'span[data-name="feed-praise-praise"]',allUser:"span[data-name=feed-praise-all]"},events:function(){var a={};return a["click "+this.ui.praise]="_praiseHandler",a["mouseenter "+this.ui.allUser]="_requestAllUser",a["mouseleave "+this.ui.allUser]="_tipHideHandler",a},initialize:function(){},_praiseHandler:function(a){var b=Talent.$(a.currentTarget),c=this.model.get("isPraise");this.model.set("isPraise",!c),this.trigger("praise",b,{feedId:this.model.get("FeedId")})},_requestAllUser:function(a){var b=this,c=this.model.get("total"),d=null;this.collection=this.model.get("praisesList"),this.collection.length!=c?Talent.app.request("FeedV2:getPraiseAlluser",{}).done(function(c){b.collection=b.collection.concat(c||[]),d=Talent._.pluck(b.collection,"name").join("，"),b._tipShowHandler(a,d)}):(d=Talent._.pluck(this.collection,"name").join("，"),this._tipShowHandler(a,d))},_tipShowHandler:function(a,b){var c=Talent.$(a.currentTarget);c.data("tipsy")||c.tipsy({gravity:"s",trigger:"manual",title:function(){return b}}),c.tipsy("show")},_tipHideHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget);b.tipsy("hide")}}),FeedShareView=Talent.ItemView.extend({defauts:{isShowIco:!0},className:"dynamic_fed",template:jst["feed/feed-share"],ui:{slide:'a[data-name="content-slide"]'},events:function(){var a={};return a["click "+this.ui.slide]="_slideMoreContentHandler",a},templateHelpers:function(){return{isShowIco:this.settings.isShowIco}},modelEvents:{"change:content":"render"},onRender:function(){this.ui.slide.remove()},initialize:function(){this.settings=Talent._.extend({},this.defauts,this.options.options);var a=this.model.get("content");this.dealContent=FeedTmpl.dealContent(a),this.originContent=this.dealContent.content,this.subStringContent=this.dealContent.subStringContent,this.model.set("contentShowAll",!1),this.model.set({content:this.dealContent.subStringContent,contentMax:this.dealContent.contentMax})},_slideMoreContentHandler:function(){this.model.get("contentShowAll")?(this.model.set("contentShowAll",!1),this.model.set("content",this.subStringContent)):(this.model.set("contentShowAll",!0),this.model.set("content",this.originContent))}}),FeedSigninTrackView=Talent.ItemView.extend({defaults:{defaultCount:4},className:"signintrack_sfb",tagName:"ul",template:jst["feed/feed-signin-track"],ui:{buttonSlide:"a[data-name=feed-signin-slide]"},modelEvents:{"change:signinTimeSites":"render"},events:function(){var a={};return a["click "+this.ui.buttonSlide]="_slideMoreHandler",a},templateHelpers:function(){return{defaultCount:this.settings.defaultCount}},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options),this.model.set("singinTrackShowAll",!1)},onRender:function(){},_slideMoreHandler:function(){var a=this.model.get("singinTrackShowAll");if(a){var b=this.model.get("signinTimeSites");this.model.set("signinTimeSites",b.slice(0,4)),this.model.set("singinTrackShowAll",!1)}else this.getMoreSigninTrack();this.trigger("showAll")}}),FeedSigninView=Talent.ItemView.extend({className:"signin_fb",template:jst["feed/feed-signin"],initialize:function(){},onShow:function(){this._renderFeedTaskTrackView()},_renderFeedTaskTrackView:function(){this.feedSigninTrackView||(this.feedSigninTrackView=new FeedSigninTrackView({model:this.model}),this.$el.after(this.feedSigninTrackView.render().el))}}),FeedTaskView=Talent.ItemView.extend({className:"task_fb",template:jst["feed/feed-task"],templateHelpers:function(){var a=this.model.get("showType"),b=(this.model.get("startDate"),this.model.get("deadline"),this.model.get("remainDay")),c=this.model.get("deadLineDay"),d=this.model.get("feedType"),e=this.model.get("taskType"),f=this.model.get("labelType")||0,g=FeedTmpl.showTimeTmplFun(a,this.model.get("startDate"),this.model.get("deadline"),b,c),h=this.model.get("app"),i=this.model.get("labelName");h&&""!=h.appName&&(i=0==f?h.appName:i,f=h.appType);var j=this.model.get("evaluation"),k="";return j&&(k=Talent._.TitaWidget_evaluation(j)),{date:g,labelName:_.substring(i,8),labelType:f,webHost:Context.isAbsolutePath(),typeName:FeedTmpl.typeName(d,e),evaluation:k}},ui:{labelName:"div[data-name=feed-lable]",name:"a[data-name=feed-task-name]",tipNode:"[original-title]"},events:function(){var a={};return a["mouseenter "+this.ui.tipNode]="_tipShowHandler",a["mouseleave "+this.ui.tipNode]="_tipHideHandler",a["mouseenter "+this.ui.labelName]="_labelTipShowHandler",a["mouseleave "+this.ui.labelName]="_tipHideHandler",a["click "+this.ui.name]="_openPullSreen",a},initialize:function(){this.model.get("app")&&(this.$el.addClass("task_app_fb"),this.template=jst["feed/feed-task-app"]),this.overTipTrue=!1},onShow:function(){this._renderFeedTrackView(),this._renderFeedTaskExtraInfoListView()},_openPullSreen:function(a){a.stopPropagation(),a.preventDefault();var b=this,c=(b.$(a.currentTarget),this.model.get("feedId"));Context.changeHash({plan_item_id:c},"add"),Talent.app.vent.trigger("global-pull-screen",c,"task",this.model)},_labelTipShowHandler:function(a){var b=Talent.$(a.currentTarget),c=this;if(this.overTipTrue=!0,b.data("tipsy"))this.overTipTrue&&b.tipsy("show");else{var d=this.model.get("labelType"),e=this.model.get("labelId");if(17!=d)return b.tipsy({gravity:"sw",trigger:"manual",offset:-5,title:function(){return c.model.get("labelName")}}),void(this.overTipTrue&&b.tipsy("show"));LableCollection.getLabelFullName({lableId:e}).done(function(a){b.tipsy({gravity:"sw",trigger:"manual",offset:-5}),b.attr("original-title",a),this.overTipTrue&&b.tipsy("show")})}},_tipShowHandler:function(a){this.overTipTrue=!0;var b=Talent.$(a.currentTarget);b.data("tipsy")||b.tipsy({gravity:"s",trigger:"manual"}),this.overTipTrue&&b.tipsy("show")},_tipHideHandler:function(a){this.overTipTrue=!1;var b=Talent.$(a.currentTarget);b.tipsy("hide")},_renderFeedTrackView:function(){var a=this.model.get("feedOperations");a&&a.comments&&(this.feedTrackView||(this.feedTrackView=new FeedTrackView({model:new Talent.Model({id:this.model.get("feedId")})}),this.listenTo(this.feedTrackView,"showAll",function(){this._requestMoreTrack()},this),this.feedTrackView.model.set(a),this.$el.after(this.feedTrackView.render().el)))},_renderFeedTaskExtraInfoListView:function(){var a=this.model.get("customizeData")||[];a&&a.length&&(this.feedExtraInfoListView||(this.feedExtraInfoListView=new FeedExtraInfoListView({collection:new Talent.Collection(a)}),this.$el.after(this.feedExtraInfoListView.render().el)))},_requestMoreTrack:function(){var a=this,b=this.model.get("feedId");CommentV2.getCommentGet({feed_id:b,comment_type:1}).done(function(b){a.feedTrackView.model.set("comments",b.comments)})}}),FeedWorkView=Talent.ItemView.extend({className:"work_fb",template:jst["feed/feed-work"],templateHelpers:function(){var a=this.model.get("showType"),b=(this.model.get("startDate"),this.model.get("deadline"),this.model.get("remainDay")),c=this.model.get("deadLineDay"),d=this.model.get("feedType"),e=this.model.get("taskType"),f=this.model.get("obj")||{},g=f.objType||0;objSubType=f.objSubType||0;var h=FeedTmpl.showTimeTmplFun(a,this.model.get("startDate"),this.model.get("deadline"),b,c),i=this.model.get("evaluation"),j="";i&&(j=Talent._.TitaWidget_evaluation(i));var k=FeedTmpl.typeIco(d,g,objSubType);return{date:h,webHost:Context.isAbsolutePath(),typeName:FeedTmpl.typeName(d,e),evaluation:j,labIcoType:k}},ui:{name:"a[data-name=feed-task-name]",tipNode:"[original-title]"},events:function(){var a={};return a["mouseenter "+this.ui.tipNode]="_tipShowHandler",a["mouseleave "+this.ui.tipNode]="_tipHideHandler",a},initialize:function(){},onShow:function(){this._renderFeedTrackView(),this._renderFeedTaskExtraInfoListView()},_tipShowHandler:function(a){var b=Talent.$(a.currentTarget);b.data("tipsy")||b.tipsy({gravity:"s",trigger:"manual"}),b.tipsy("show")},_tipHideHandler:function(a){var b=Talent.$(a.currentTarget);
b.tipsy("hide")},_renderFeedTrackView:function(){var a=this.model.get("feedOperations");a&&a.comments&&(this.feedTrackView||(this.feedTrackView=new FeedTrackView({model:new Talent.Model({id:this.model.get("feedId")})}),this.listenTo(this.feedTrackView,"showAll",function(){this._requestMoreTrack()},this),this.feedTrackView.model.set(a),this.$el.after(this.feedTrackView.render().el)))},_renderFeedTaskExtraInfoListView:function(){var a=this.model.get("customizeData")||[];a&&a.length&&(this.feedExtraInfoListView||(this.feedExtraInfoListView=new FeedExtraInfoListView({collection:new Talent.Collection(a)}),this.$el.after(this.feedExtraInfoListView.render().el)))},_requestMoreTrack:function(){var a=this,b=this.model.get("feedId");CommentV2.getCommentGet({feed_id:b,comment_type:1}).done(function(b){a.feedTrackView.model.set("comments",b.comments)})}}),FeedOkrView=Talent.ItemView.extend({className:"okr_fb",template:jst["feed/feed-okr"],templateHelpers:function(){var a=this.model.get("showType"),b=(this.model.get("startDate"),this.model.get("deadline"),this.model.get("remainDay")),c=this.model.get("deadLineDay"),d=this.model.get("feedType"),e=this.model.get("taskType"),f=this.model.get("obj")||{},g=f.objType||0;objSubType=f.objSubType||0;var h=FeedTmpl.showTimeTmplFun(a,this.model.get("startDate"),this.model.get("deadline"),b,c),i=this.model.get("evaluation"),j="";i&&(j=Talent._.TitaWidget_evaluation(i));var k=FeedTmpl.typeIco(d,g,objSubType);return{date:h,webHost:Context.isAbsolutePath(),typeName:FeedTmpl.typeName(d,e),evaluation:j,labIcoType:k}},ui:{name:"a[data-name=feed-task-name]",tipNode:"[original-title]",workflow:"[data-name=feed-work-flow]"},events:function(){var a={};return a["mouseenter "+this.ui.tipNode]="_tipShowHandler",a["mouseleave "+this.ui.tipNode]="_tipHideHandler",a},initialize:function(){},onShow:function(){this._renderFeedStepView(),this._renderFeedTrackView(),this._renderFeedTaskExtraInfoListView()},_tipShowHandler:function(a){var b=Talent.$(a.currentTarget);b.data("tipsy")||b.tipsy({gravity:"s",trigger:"manual"}),b.tipsy("show")},_tipHideHandler:function(a){var b=Talent.$(a.currentTarget);b.tipsy("hide")},_renderFeedTrackView:function(){var a=this.model.get("feedOperations");a&&a.comments&&(this.feedTrackView||(this.feedTrackView=new FeedTrackView({model:new Talent.Model({id:this.model.get("feedId")})}),this.listenTo(this.feedTrackView,"showAll",function(){this._requestMoreTrack()},this),this.feedTrackView.model.set(a),this.$el.after(this.feedTrackView.render().el)))},_renderFeedTaskExtraInfoListView:function(){var a=this.model.get("customizeData")||[];a&&a.length&&(this.feedExtraInfoListView||(this.feedExtraInfoListView=new FeedExtraInfoListView({collection:new Talent.Collection(a)}),this.$el.after(this.feedExtraInfoListView.render().el)))},_renderFeedStepView:function(){var a=this.model.get("step")||"";""!=a&&(this.feedStepView||(this.feedStepView=new FeedStepView({status:this.model.get("status"),step:this.model.get("step")}),this.ui.workflow.html(this.feedStepView.render().el)))},_requestMoreTrack:function(){var a=this,b=this.model.get("feedId");CommentV2.getCommentGet({feed_id:b,comment_type:1}).done(function(b){a.feedTrackView.model.set("comments",b.comments)})}}),FeedItemView=Talent.Layout.extend({defaults:{isInAppPage:!1,onlyComment:!1,mBlogOptions:{defaultHide:!0,defaultValue:""},custom:{more:!0,remind:!0,collect:!0,reply:!0},actionMore:{detail:!0,deleted:!0,setTop:!0,setTopPramas:{}},isPrivate:!1,privateTipText:"",feedId:"",feedType:"",defaultCount:4,sort:"append"},isFromCommitListView:!1,template:jst["feed/feed-item"],className:"feed_item_box_v2",regions:{content:"div[data-name=feed-content]",action:"div[data-name=feed-actoin]",comment:"div[data-name=feed-comment]",mblog:"div[data-name=feed-pubblog]",main:"div[data-name=feed-main]",left:"div[data-name=feed-left]"},ui:{content:"div[data-name=feed-content]",action:"div[data-name=feed-actoin]",comment:"div[data-name=feed-comment]",submain:"div[data-name=feed-sub-main]",rewardGive:"[data-name=feed-reward-give]"},events:function(){var a={};return a},initialize:function(){this.setOptions(),this.isFromCommitListView&&(this.settings.onlyComment=!0,this.settings.mBlogOptions.defaultHide=!1),"undefined"==typeof this.model.get("isTop")&&this.model.set("isTop",!1),this.feedId=this.model.get("feedId"),this.settings.onlyComment&&(this.feedId=this.settings.feedId),this.commentId=0,this.userInfo=Talent.Context.getUserInfo(),this._privateTipText()},onRender:function(){this.settings.onlyComment?this.$el.addClass("only_comment_fb"):(this._renderMainView(),this._renderLeftView(),this._renderShareView(),this._renderAttachmentListView(),this._renderFeedAction(),this._renderDailyView(),this._renderFeedTaskView(),this._renderPlanView(),this._renderSigninView(),this._renderWorkView(),this._renderOkrView(),this._renderFeedType8View(),this._renderFeedType9View()),this._rendCommentListView(),this.settings.mBlogOptions.defaultHide||this._renderMblogView()},onClose:function(){this.rewardAppView&&this.rewardAppView.close()},addNewItemComment:function(a){a.set({isPrivate:this.model.set("isPrivate"),privateTipText:this.model.set("privateTipText")});var b=this.feedCommentListView.addNewItemComment(a);return b},_renderLeftView:function(){var a=new FeedLeftView({model:this.model,isInAppPage:this.settings.isInAppPage});this.left.show(a)},setOptions:function(){this.settings=Talent._.extend({},this.defaults,this.options),this.settings.mBlogOptions=Talent._.extend({},this.defaults.mBlogOptions,this.options.mBlogOptions),this.settings.custom=Talent._.extend({},this.defaults.custom,this.options.custom),this.settings.actionMore=Talent._.extend({},this.defaults.actionMore,this.options.actionMore)},_privateTipText:function(){var a="undefined"!=typeof this.model.get("isPrivate")?this.model.get("isPrivate"):this.settings.isPrivate;this.model.get("isPrivate",a);var b=this.settings.privateTipText;if(""!=b)return void this.model.set("privateTipText",b);var c=this.model.get("feedType"),d=this.model.get("isPrivate"),e=this.model.get("obj")||{},f=e.objType||"",g=this.model.get("app"),h=g&&g.appType||"",i=_.privateTipText(c,d,f,h);this.model.set("privateTipText",i)},_renderMainView:function(){{var a=this.model.get("feedType"),b=this.settings.actionMore;this.model.get("feedId")}(2==a||3==a||4==a)&&(b.deleted=!1);var c=new FeedMainView({model:this.model,actionMore:this.settings.actionMore,isInAppPage:this.settings.isInAppPage});this.listenTo(c,"delete",function(){this._requestDeleteFeed()},this),this.listenTo(c,"top",function(){this._requestTopFeed()},this),this.main.show(c)},_requestDeleteFeed:function(){var a=this;UserFeedV2.deleteUserFeed({feed_id:this.feedId}).done(function(){a.$el.slideUp(function(){a.$el.remove()})})},_requestTopFeed:function(){var a=this.model.get("isTop"),b="userFeedTop";a||(b="userFeedCancelTop");var c=this.settings.actionMore.setTopPramas,d=Talent._.extend({},c,{feed_id:this.feedId});UserFeedV2[b](d).done(function(){})},_renderAttachmentListView:function(){this.attachmentCollection=new Talent.Collection(this.model.get("attachments")||[]),this.attachmentCollection.length&&(this.feedAttachmentListView||(this.feedAttachmentListView=new FeedAttachmentListView({collection:this.attachmentCollection}),this.ui.content.after(this.feedAttachmentListView.render().$el)))},_renderPlanView:function(){var a=this.model.get("feedType");(4==a||2==a||3==a)&&(this.feedPlanView||(this.feedPlanView=new FeedPlanView({model:this.model}),this.content.show(this.feedPlanView)))},_renderWorkView:function(){6==this.model.get("feedType")&&(this.feedWorkView||(this.feedWorkView=new FeedWorkView({model:this.model}),this.content.show(this.feedWorkView)))},_renderFeedType8View:function(){8==this.model.get("feedType")&&(this.feedType8View||(this.feedType8View=new FeedType8View({model:this.model}),this.content.show(this.feedType8View)))},_renderFeedType9View:function(){9==this.model.get("feedType")&&(this.feedType9View||(this.feedType9View=new FeedType9View({model:this.model}),this.content.show(this.feedType9View)))},_renderSigninView:function(){80==this.model.get("feedType")&&(this.feedSigninView||(this.feedSigninView=new FeedSigninView({model:this.model}),this.content.show(this.feedSigninView)))},_renderFeedTaskView:function(){20==this.model.get("feedType")&&(this.FeedTaskView||(this.feedTaskView=new FeedTaskView({model:this.model}),this.content.show(this.feedTaskView)))},_renderDailyView:function(){5==this.model.get("feedType")&&(this.feedDailyView||(this.feedDailyView=new FeedDailyView({model:this.model}),this.content.show(this.feedDailyView)))},_renderOkrView:function(){7==this.model.get("feedType")&&(this.FeedOkrView||(this.feedOkrView=new FeedOkrView({model:this.model}),this.content.show(this.feedOkrView)))},_renderFeedPraiseView:function(){1==this.model.get("feedType")&&(this.model.get("praisesList")&&this.model.get("praisesList").length&&this.ui.submain.show(),this.feedPraiseView||(this.feedPraiseView=new FeedPraiseView({model:this.model}),this.listenTo(this.feedPraiseView,"praise",function(){this._setPraise()},this),this.ui.comment.before(this.feedPraiseView.render().el)))},_renderFeedAction:function(){this.feedActionView||(this.feedActionView=new FeedActionView({model:this.model}),this.listenTo(this.feedActionView,"reply",function(a,b){this._renderMblogView(b)},this),this.listenTo(this.feedActionView,"collect",function(a,b){this._requestFeedCollecte(a,b)},this),this.listenTo(this.feedActionView,"praise",function(){this._setPraise()},this),this.listenTo(this.feedActionView,"rewardBeg",function(){this._renderRewardAppView("beg")}),this.listenTo(this.feedActionView,"rewardGive",function(){this._renderRewardAppView("give")}),this.action.show(this.feedActionView))},_renderRewardAppView:function(a,b,c){var d=this.model.get("feedType"),e={};e.user=b||this.model.get("publishUser"),c="undefined"!=typeof c&&0==c?!1:!0,20!=d||b||(e.user=this.model.get("principalUser")),e.user.userId==this.userInfo.Id&&(e.user={},c=!0),this.rewardAppView&&this.rewardAppView.close(),this.rewardAppView=new RewardAppView({model:new Talent.Model(e),feedId:this.feedId,feedType:this.model.get("feedType")||this.settings.feedType,rewardType:a,isEditUser:c}),this.listenTo(this.rewardAppView,"addComment",function(a){this._addFeedCommentList(a)}),this.rewardAppView.render(),this.rewardAppView.onShow()},_requestFeedCollecte:function(a){var b=this,c=this.model.get("isCollect"),d="userFeedCancelCollect";c||(d="userFeedCollecte"),UserFeedV2[d]({feed_id:this.feedId}).done(function(){var d=c?"已取消收藏":"收藏成功";TipDialogView(a,d,{className:"success",pos:"topCenter",topBias:10}),b.model.set("isCollect",!c)})},_setPraise:function(){var a=this.model.get("praiseTotal"),b=Talent.Context.getUserInfo(),c=this.feedPraiseView.model.get("isPraise"),d=this.model.get("praisesList");c?(d.unshift({name:b.Name}),a+=1):(d.shift(),a-=1),this.model.get("isPraise")&&this._afterClickPraise(),this.model.set({praisesList:d,praiseTotal:a})},_afterClickPraise:function(){var a=this;if(!this.t_praise){var b=Talent.Context.getStaticUrl("images/praise-animate.gif"),c=$('<img src="'+b+'">'),d=Talent.$(window).width(),e=Talent.$(window).height(),f=Talent.$("body").scrollTop();c.css({position:"absolute",top:e/2-255.5+f,left:d/2-216}),Talent.$("body").append(c),this.t_praise=setTimeout(function(){clearTimeout(a.t_praise),a.t_praise=null,c.remove()},1850)}},_renderShareView:function(){1==this.model.get("feedType")&&(this.feedShareView=new FeedShareView({model:this.model}),this.content.show(this.feedShareView))},_rendCommentListView:function(){if(this.settings.onlyComment)var a=this.model.toJSON();else var a=this.model.get("feedComments")||{};if(a.comments&&0!=a.comments.length&&!this.feedCommentListView){var b=Talent.Collection.extend({initialize:function(){this.model=Talent.Model.extend({idAttribute:"commentId"})}});if(this.options.collection)var c=this.options.collection.toJSON()||[];else var c=a.comments;var d=this.model.get("feedType");c&&c.length&&this.ui.submain.show(),this.feedCommentListView=new FeedCommentListView({model:new Talent.Model(a),isPrivate:this.model.get("isPrivate"),privateTipText:this.model.get("privateTipText"),collection:new b(c),mBlogOptions:this.settings.mBlogOptions,defaultCount:this.settings.defaultCount,sort:this.settings.sort,feedType:d||this.settings.feedType,actionMore:{detailUrl:FeedTmpl.typeUrl(d,this.model.toJSON())}}),this.listenTo(this.feedCommentListView,"reply",function(a){var b=a.publishUser;this._renderMblogView({toUserName:b.name,commentId:a.commentId})},this),this.listenTo(this.feedCommentListView,"more",function(a,b){this.settings.onlyComment&&!this.settings.feedId?this.trigger("more",a,b):this._requestCommentData(a,b)}),this.listenTo(this.feedCommentListView,"delete",function(a,b){0==b.total&&this.ui.submain.hide(),this._requestDeleteCommentData(a,b)},this),this.listenTo(this.feedCommentListView,"rewardGive",function(a,b){this._renderRewardAppView("give",b.publishUser,!1)}),this.comment.show(this.feedCommentListView)}},_requestCommentData:function(){var a=this;CommentV2.getCommentGet({feed_id:this.feedId}).done(function(b){a.feedCommentListView.collection.reset(b.comments)})},_requestDeleteCommentData:function(a,b){CommentV2.deleteCommentGetByIds({feed_id:this.feedId,comment_id:b.commentId}).done(function(){})},_renderMblogView:function(a){var a=a||{},b=this.settings.mBlogOptions,c=this,d=Context.getUserInfo(),e=Talent._.extend({},{submitText:"回复",id:this.feedId,type:"comment",inFocus:!0,toUserName:"",commentId:"",isShowAtAll:2==d.Role||1==d.Role?!0:!1,submitRequest:function(a,b,d){b.files=b.files.join(",");var e=new Talent.$.Deferred;return c._requestFeed(a,b,d),e.resolve(""),e}},b);this.publistMblogView||(this.publistMblogView=new PublistMblogView(e),this.mblog.show(this.publistMblogView)),this.publistMblogView.show(),this.publistMblogView.ui.input.focus(),this.publistMblogView.model.set(a.toUserName?{toUserName:a.toUserName,commentId:a.commentId}:{toUserName:"",commentId:0})},_requestFeed:function(a,b,c){if(this.settings.onlyComment&&!this.feedId)return void this.trigger("reply",a,b);var d=this,b={FeedId:this.feedId,CommentId:b.commentId||0,Content:b.context,FileUrl:b.files,ObjId:b.privateObjId,ObjType:b.privateObjType,IsSendSMS:b.isSendSMS,OtherDocuments:b.YFYDocuments};b=Talent._.extend({},b,c),CommentV2.postCommentAdd(b).done(function(a){d.ui.submain.is(":hidden")&&d.ui.submain.show(),d._addFeedCommentList(a)})},_addFeedCommentList:function(a){if(this.feedCommentListView){var b=this.feedCommentListView.model.get("total");this.feedCommentListView.model.set("total",b+1),this.feedCommentListView.collection.add(a)}else this.settings.onlyComment?(this.model.set("total",1),this.model.set("comments",[a])):this.model.set("feedComments",{total:1,comments:[a]}),this._rendCommentListView()}}),CommitListView=FeedItemView.extend({isFromCommitListView:!0}),FeedListView=Talent.CompositeView.extend({defaults:{isInAppPage:!1,mBlogOptions:{defaultHide:!0},custom:{more:!0,remind:!0,collect:!0,reply:!0},actionMore:{detail:!0,"delete":!0,setTop:!0,setTopPramas:{}},requestMoreFeed:function(){var a=new Talent.$.Deferre;return a}},itemView:FeedItemView,template:jst["feed/feed-list"],itemViewContainer:"div[data-name=feed-list-box]",className:"feed_list_v2",ui:{btnMore:"div[data-name=feed-more]",btnMoreText:"span[data-name=feed-more-text]"},modelEvents:{"change:isEnd":"_isShowMoreEvent"},events:function(){var a={};return a["click "+this.ui.btnMore]="_getMoreFeed",a},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options);var a=!0,b="";"boolean"==typeof this.options.model.get("isEnd")&&(a=this.options.model.get("isEnd")),this.options.model.get("lastId")&&(b=this.options.model.get("lastId")),this.model.set({lastId:b,isEnd:a}),this.collection.model=Talent.Model.extend({idAttribute:"feedId"}),this.collection.reset(this.model.get("feeds"))},templateHelpers:function(){return{i18n:Context.getI18n()}},addNewItemFeed:function(a){var b=this.itemViewOptions(),c=this.buildItemView(a,this.itemView,b);return this.collection.add([a],{silent:!0}),c.render().$el},itemViewOptions:function(){var a=this.settings;return{mBlogOptions:a.mBlogOptions,custom:a.custom,actionMore:a.actionMore,isInAppPage:a.isInAppPage}},_getMoreFeed:function(a){{var b=this,c=Talent.$(a.currentTarget);c.html()}this.ui.btnMoreText.html("加载中…"),this.settings.requestMoreFeed({lastId:this.model.get("lastId")}).done(function(a){a&&a.feeds&&b.collection.add(a.feeds),b.model.set({isEnd:a.isEnd,lastId:a.lastId}),b.ui.btnMoreText.html("查看更多")})},_isShowMoreEvent:function(){var a=this.model.get("isEnd");a?this.ui.btnMore.hide():this.ui.btnMore.show()}}),FeedTabView=Talent.Layout.extend({defaults:{feedType:"department",isShowSearch:!0},className:"feed-tab",template:jst["feed/feed-tab"],templateHelpers:function(){var a=decodeURIComponent(location.hash),b=/(feedType)/.test(a);return b&&(a=a.substring(0,a.indexOf("?"))),a+=a.indexOf("?")>0?"&":"?",{i18n:Context.getI18n(),hash:a,feedAboutMeIndicator:RedRemindView.numberCustomize(this.model.get("feedAboutMeIndicator")),feedDepartmentIndicator:RedRemindView.numberCustomize(this.model.get("feedDepartmentIndicator")),feedTenantIndicator:RedRemindView.numberCustomize(this.model.get("feedTenantIndicator"))}},regions:{search:"div[data-name=feed-search]"},ui:{navLi:"ul[data-name=feed-nav] li",subNav:"ul[data-name=feed-sub-nav]",subNavLi:"ul[data-name=feed-sub-nav] li",aboutmeAll:"li[data-name=aboutme-all]",aboutmeIndicator:"[data-name=feed-aboutme-indicator]",departmentIndicator:"[data-name=feed-department-indicator]",allIndicator:"[data-name=feed-all-indicator]"},events:function(){var a={};return a["click "+this.ui.navLi]="_navLiClickHandler",a["click "+this.ui.subNavLi]="_subNavLiClickHandler",a},modelEvents:{"change:feedAboutMeIndicator":"_feedAboutMeIndicatorChangeEvent","change:feedDepartmentIndicator":"_feedDepartmentIndicatorChangeEvent","change:feedTenantIndicator":"_feedTenantIndicatorChangeEvent"},initialize:function(){var a=this;this.settings=Talent._.extend({},this.defaults,this.options),this.feedType=this.settings.feedType,this.model.set({feedAboutMeIndicator:0,feedDepartmentIndicator:0,feedTenantIndicator:0},{silent:!0}),Talent.app.vent.on("GlobalIndicatorUpdate",function(b){var c=b.get("feedAboutMeIndicator")&&b.get("feedAboutMeIndicator").get("value")||0,d=b.get("feedDepartmentIndicator")&&b.get("feedDepartmentIndicator").get("value")||0,e=b.get("feedTenantIndicator")&&b.get("feedTenantIndicator").get("value")||0;a.model.set({feedAboutMeIndicator:c,feedDepartmentIndicator:d,feedTenantIndicator:e})})},onShow:function(){for(var a=this.settings.feedType,b=this.$el.find("a"),c=b.first(),d=0;d<b.length;d++){var e=Talent.$(b[d]),f=decodeURIComponent(e.attr("href")),g=Context.parseUrl(f);if(g.feedType==a){c=e,e.parent().trigger("click");break}}var h=c.text();this._renderSearchView(h),this._showInitIndicator()},_showInitIndicator:function(){if(window.BSGlobal&&!window.BSGlobal.indicator){var a=BSGlobal.indicator,b=Talent._.findWhere(a,{type:"feedAboutMeIndicator"});b&&this.model.set("feedAboutMeIndicator",b.value);var c=Talent._.findWhere(a,{type:"feedDepartmentIndicator"});c&&this.model.set("feedDepartmentIndicator",c.value);var d=Talent._.findWhere(a,{type:"feedTenantIndicator"});d&&this.model.set("feedTenantIndicator",d.value)}},_feedAboutMeIndicatorChangeEvent:function(){var a=this.model.get("feedAboutMeIndicator");RedRemindView.updateIndicator(this.ui.aboutmeIndicator,a)},_feedDepartmentIndicatorChangeEvent:function(){var a=this.model.get("feedDepartmentIndicator");RedRemindView.updateIndicator(this.ui.departmentIndicator,a)},_feedTenantIndicatorChangeEvent:function(){var a=this.model.get("feedTenantIndicator");RedRemindView.updateIndicator(this.ui.allIndicator,a)},_navLiClickHandler:function(a){var b=Talent.$(a.currentTarget),c=b.find("a"),d=decodeURIComponent(c.attr("href")),e=Context.parseUrl(d);this.feedType=e.feedType,"aboutme-all"==this.feedType?this.ui.subNav.show():this.ui.subNav.hide(),this.ui.navLi.removeClass("active"),b.addClass("active");var f=c.text();this._renderSearchView(f),Context.changeHash({feedType:this.feedType},"edit"),this.trigger("activeItem",b,{type:this.feedType});var g={"aboutme-all":"feedAboutMeIndicator",department:"feedDepartmentIndicator",all:"feedTenantIndicator"};g[this.feedType]&&(this.model.set(g[this.feedType],0),Talent.app.vent.trigger("GlobalIndicatorDelete",{indicatorType:g[this.feedType],messageType:0}),this.model.set(g[this.feedType],0))},_subNavLiClickHandler:function(a){this.ui.aboutmeAll.addClass("active");var b=Talent.$(a.currentTarget),c=b.find("a"),d=decodeURIComponent(c.attr("href")),e=Context.parseUrl(d);this.ui.subNavLi.removeClass("active"),b.addClass("active"),this.feedType=e.feedType;var f=c.text();"aboutme-all"==this.feedType&&(f=this.ui.navLi.first().find("a").text()),this._renderSearchView(f),Context.changeHash({feedType:this.feedType},"edit"),this.trigger("activeItem",b,{type:this.feedType});var g={"aboutme-tome":"mLeaveIndicator","aboutme-replyme":"mCommentIndicator"};g[this.feedType]&&(Talent.app.vent.trigger("GlobalIndicatorDelete",{indicatorType:g[this.feedType],messageType:0}),this.model.set(g[this.feedType],0))},_renderSearchView:function(a){if(this.settings.isShowSearch){var b="搜索"+a||"搜索动态";this.searchFormView=new SearchFormView({defaultvalue:b}),this.listenTo(this.searchFormView,"submit",function(a){this.searchFilters=a,this.trigger("search",a)},this),this.search.show(this.searchFormView)}}});if("undefined"!=typeof Context.getGlobal("isNewFeed")&&Context.getGlobal("isNewFeed"))var FeedTabSubItemView=Talent.ItemView.extend({template:Talent._.template('<a href="javascript:void(0);" data-trigger="false"><%=name%></a>'),tagName:"li",initialize:function(){},onRender:function(){this.$el.attr("id",this.model.get("id"))}}),FeedTabSubView=Talent.CollectionView.extend({defaults:{level:"main"},itemView:FeedTabSubItemView,itemViewContainer:"ul",tagName:"ul",className:"sub-tab-nav",initialize:function(){var a=this;this.options=Talent._.extend({},this.defaults,this.options),"dropdown"==this.options.level&&(Talent.$(document).on("mousedown.TitaWidget-Feed-Tab-dropdown",function(b){b.stopPropagation(),b.preventDefault(),a.close(),Talent.$(document).off("mousedown.TitaWidget-Feed-Tab-dropdown")}),this.$el.on("mousedown",function(a){a.stopPropagation()}))},onAfterItemAdded:function(a){a.$el.attr("data-level",this.options.level)},show:function(a,b){Context.setPosition(a,this.$el,b)},onClose:function(){Talent.$(document).off("mousedown.TitaWidget-Feed-Tab-dropdown")}}),FeedTabItemView=Talent.ItemView.extend({template:jst["feed/feed-tab-item-v2"],tagName:"li",className:"item clearfix",initialize:function(){},onRender:function(){this.$el.attr("id",this.model.get("id"))}}),FeedTabView=Talent.CompositeView.extend({template:jst["feed/feed-tab-v2"],itemView:FeedTabItemView,itemViewContainer:"ul[data-name=feed-nav]",className:"feed-tab",ui:{mainLi:"li[data-level=main]",subLi:"li[data-level=sub]",dropdownLi:"li[data-level=dropdown]",dropdownBtn:"[data-name=dropdown]"},modelEvents:{"change:activeId":"_idChangeEvent"},events:function(){var a={};return a["click "+this.ui.mainLi]="_mainClickHandler",a["click "+this.ui.subLi]="_subClickHandler",a["click "+this.ui.dropdownLi]="_dropdownClickHandler",a["click "+this.ui.dropdownBtn]="_dropdownBtnClickHandler",a},initialize:function(){this.data={},this.subMenuCollection=new Talent.Collection,this.dropMenuCollection=new Talent.Collection,this.subMenuMapping={};for(var a=Context.getGlobal("channelList").channels||[],b=0;b<a.length;b++){var c=a[b],d=c.subChannels||[];1==c.type&&d.length&&""==c.name&&(c.id=d[0].id,c.name=d[0].name)}this.collection.reset(a)},onShow:function(){this._redRemind(),this._renderSubMenuView(),this.$el.find("li[data-level=main]").first().trigger("click")},onAfterItemAdded:function(a){a.$el.attr("data-level","main")},_redRemind:function(){var a=this,b=this.$el.find("[data-name=feed-aboutme-indicator]"),c=this.$el.find("[data-name=feed-all-indicator]");this.model.on("change:feedAboutMeIndicator change:feedDepartmentIndicator change:feedTenantIndicator",function(a){RedRemindView.updateIndicator(b,a.get("feedAboutMeIndicator")),RedRemindView.updateIndicator(c,a.get("feedTenantIndicator"))},this),this.model.set({feedAboutMeIndicator:0,feedDepartmentIndicator:0,feedTenantIndicator:0},{silent:!0}),Talent.app.vent.on("GlobalIndicatorUpdate",function(b){var c=b.get("feedAboutMeIndicator")&&b.get("feedAboutMeIndicator").get("value")||0,d=b.get("feedTenantIndicator")&&b.get("feedTenantIndicator").get("value")||0;a.model.set({feedAboutMeIndicator:c,feedTenantIndicator:d})}),this.on("activeItem",function(a){var b={3:"mLeaveIndicator",4:"mCommentIndicator",2:"feedAboutMeIndicator"};b[a.activeId]&&Talent.app.vent.trigger("GlobalIndicatorDelete",{indicatorType:b[a.activeId],messageType:0})})},_idChangeEvent:function(){this.trigger("activeItem",{activeId:this.model.get("activeId"),activeName:this.model.get("activeName")})},_dropdownBtnClickHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=b.attr("id");model=this.collection.get(c),subChannels=model&&model.get("subChannels")||[],pNode=b.parents("li"),subChannels.length&&(this.feedTabDropdownView&&this.feedTabDropdownView.close(),this.dropMenuCollection.reset(subChannels),this.feedTabDropdownView=new FeedTabSubView({collection:this.dropMenuCollection,level:"dropdown",className:"dropdown-nav",container:pNode}),pNode.append(this.feedTabDropdownView.render().$el),this.feedTabDropdownView.show(b,{container:pNode,leftBias:-50}))},_mainClickHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=b.attr("id"),d=(b.attr("data-level")||"main",this.collection.get(c)),e=d.get("type"),f=d&&d.get("subChannels")||[];this.ui.mainLi.removeClass("active"),b.addClass("active"),0==e&&f.length?(this.subMenuCollection.reset(f),this.feedTabSubView.$el.find("li:first").trigger("click")):(f.length?(this.subMenuCollection.reset(f[0].subChannels||[]),this.feedTabSubView.$el.find("li:first").trigger("click")):this.subMenuCollection.reset([]),this.model.set({activeId:Number(c),activeName:d.get("name")}))},_subClickHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=b.attr("id"),d=(b.attr("data-level"),this.subMenuCollection.get(c));b.siblings().removeClass("active"),b.addClass("active"),this.model.set({activeId:Number(c),activeName:d.get("name")})},_dropdownClickHandler:function(a){a.stopPropagation();{var b=Talent.$(a.currentTarget),c=b.attr("id"),d=(b.attr("data-level"),this.dropMenuCollection.get(c));d.get("type"),d&&d.get("subChannels")||[]}this.collection.add(d,{silent:!0}),b.parents("li").attr("id",c).trigger("click").find("[data-name=title]").html(d.get("name")),this.feedTabDropdownView&&this.feedTabDropdownView.close()},_renderSubMenuView:function(){this.feedTabSubView=new FeedTabSubView({collection:this.subMenuCollection,level:"sub"}),this.$el.append(this.feedTabSubView.render().$el)},_renderSearchView:function(a){if(this.settings.isShowSearch){var b="搜索"+a||"搜索动态";this.searchFormView=new SearchFormView({defaultvalue:b}),this.listenTo(this.searchFormView,"submit",function(a){this.searchFilters=a,this.trigger("search",a)},this),this.search.show(this.searchFormView)}}});var FeedExtraInfoListItemView=Talent.ItemView.extend({template:jst["feed/feed-extra-info-list-item"],tagName:"li",templateHelpers:function(){var a=this.model.get("value");return a&&""!=a&&(a=a.replace(/(<br\/>)/g,"")),{value:a}}}),FeedExtraInfoListView=Talent.CollectionView.extend({itemView:FeedExtraInfoListItemView,itemViewContainer:"ul",className:"extra_info_fb",tagName:"ul",initialize:function(){this.collectionLen=this.collection.length||0,this._sliceCollection()},onRender:function(){this.collection.toJSON();this.collectionLen>8&&this.$el.append("<li>……</li>")},_sliceCollection:function(){var a=this.collection.toJSON();this.collectionLen>0&&this.collection.reset(a.slice(0,8))}}),SearchFormView=Talent.ItemView.extend({defaults:{defaultvalue:"搜索同事"},className:"search-form-list",template:jst["feed/search-form"],ui:{input:"input[data-type=new-content]",inputWarp:".input-default",submitBtn:"a[data-type=submit-content]",form:"form"},events:function(){var a={};return a["focus "+this.ui.input]="_focusHandler",a["blur "+this.ui.input]="_blurHandler",a["submit "+this.ui.form]="_submitHandler",a["click "+this.ui.submitBtn]="_submitHandler",a},initialize:function(){this.isInitVal=!0,this.settings=Talent._.extend({},this.defaults,this.options)},onRender:function(){this.ui.input.val(this.settings.defaultvalue)},_focusHandler:function(a){var b=Talent.$(a.currentTarget);this.ui.inputWarp.addClass("input-focus");var c=Talent.$.trim(b.val());this.isInitVal=!1,c==this.settings.defaultvalue&&b.val("")},_blurHandler:function(a){var b=Talent.$(a.currentTarget),c=Talent.$.trim(b.val());""==c&&(this.isInitVal=!0,b.val(this.settings.defaultvalue),this.ui.inputWarp.removeClass("input-focus"))},_submitHandler:function(){var a=this.ui.input.val();return a=Talent.$.trim(a),this.isInitVal||(this.model.set("filter",a),this.trigger("submit",a)),!1}}),FeedTabListView=Talent.Layout.extend({defaults:{feedType:"aboutme-all",isShowSearch:!0},template:jst["feed/feed-tab-list"],regions:{tab:"div[data-name=feed-tab]",list:"div[data-name=feed-list]",empty:"div[data-name=feed-list-empty]"},typeMapping:{"aboutme-all":2,"aboutme-replyme":25,"aboutme-tome":23,"aboutme-fromme":1,"aboutme-myfollow":24,"aboutme-collect":26,all:7,newreply:2525,newleave:2323,profile:3,department:4},emptyTextMapping:{7:"全公司的公开动态都会显示在这里",2:'我的计划、任务、项目的所有动态以及别人给我的消息<br/>都会显示在这里<br/>我们就从 <a href="#plan">本周计划</a>开始吧～',1:"所有我发表的动态，都会在这里显示",23:"所有@我的消息，都会在这里显示",25:"所有回复我的消息，都会在这里显示",26:"您还没有收藏任何动态，在动态右侧操作区点击“收藏”，收藏内容就会在这里显示",4:"暂无该部门动态"},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options),self.feedTypeName=this.settings.feedType,this.feedType=this.typeMapping[this.settings.feedType],this.lastId="",this.dataType={},this._getRouterData()},_getRouterData:function(){var a=this,b=Talent.app.request("history:getQueryObject"),c=new Talent.$.Deferred;return b.done(function(b){a.routerData=b||{};var c=b.feedType?b.feedType:a.settings.feedType;a.feedType=a.typeMapping[c],a.feedTypeName=c}),c},onShow:function(){var a=new FeedTabView({feedType:this.feedTypeName,isShowSearch:this.settings.isShowSearch});this.listenTo(a,"activeItem",function(a,b){var c=b.type;this.lastId="",this.searchFilters="",this.feedType=this.typeMapping[c],this._renderRequestData()},this),this.listenTo(a,"search",function(a){this.lastId=1,this.searchFilters=a,this._renderRequestData()},this),this.tab.show(a)},addNewItemFeed:function(a){{var b=this.feedListView.itemViewOptions(),c=this.feedListView.buildItemView(new Talent.Model(a),this.feedListView.getItemView(),b);this.feedListView.collection.model}return this.feedListView.collection.add([new Talent.Model(a)],{silent:!0}),c.render().$el},_requestSearchData:function(){var a=new LoadingView;this.list.show(a);var b=this,c=new Talent.$.Deferred;return UserFeedV2.userFeedSearch({type:this.feedType,start:1,content:this.searchFilters}).done(function(a){b.dataType[b.feedType]=a,c.resolve(a)}),c},_requestData:function(){var a=this,b=new Talent.$.Deferred;return UserFeedV2.getUserFeed({type:this.feedType,start:this.lastId}).done(function(c){a.dataType[a.feedType]=c,b.resolve(c)}),b},_renderRequestData:function(){this.emptyView&&this.emptyView.close();var a=new LoadingView;this.list.show(a);var b=this;this.searchFilters?this._requestSearchData().done(function(a){b.lastId=a.lastId||"",b._renderFeedListView()}):this._requestData().done(function(a){b.lastId=a.lastId||"",b._renderFeedListView()})},_renderEemptyView:function(a){var b=this.emptyTextMapping[this.feedType];!a.isEnd||a.feeds.length>20||(this.searchFilters&&(b="很抱歉，没有符合条件的信息，请尝试其它查询"),this.emptyView=new EmptyView({emptyContext:b}),this.empty.show(this.emptyView))
},_renderFeedListView:function(){var a=this,b=a.dataType[this.feedType];this._renderEemptyView(b),this.feedListView=new FeedListView({model:new Talent.Model(b),requestMoreFeed:function(){var b=new Talent.$.Deferred;return a._requestData().done(function(c){a.lastId=c.lastId||"",b.resolve(c)}),b}}),this.list.show(this.feedListView)}});if("undefined"!=typeof Context.getGlobal("isNewFeed")&&Context.getGlobal("isNewFeed"))var FeedTabListView=Talent.Layout.extend({defaults:{},template:jst["feed/feed-tab-list"],regions:{tab:"div[data-name=feed-tab]",list:"div[data-name=feed-list]",empty:"div[data-name=feed-list-empty]"},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options),this.model.set({lastId:"",searchFilters:""})},onShow:function(){this._renderFeedTabView()},_renderFeedTabView:function(){var a=new FeedTabView;this.listenTo(a,"activeItem",function(a){this.model.set({tabActiveId:a.activeId,tabActiveName:a.activeName,lastId:"",searchFilters:""}),this.emptyView&&this.emptyView.close(),this._getFeedData()},this),this.tab.show(a)},addNewItemFeed:function(a){{var b=this.feedListView.itemViewOptions(),c=this.feedListView.buildItemView(new Talent.Model(a),this.feedListView.getItemView(),b);this.feedListView.collection.model}return this.feedListView.collection.add([new Talent.Model(a)],{silent:!0}),c.render().$el},_getFeedData:function(){var a=this,b=new LoadingView;this.list.show(b),this._requestFeedData().done(function(b){a._renderFeedListView(b)}).fail(function(b){a._renderEmptyView(b)})},_requestFeedData:function(){var a=this,b=new Talent.$.Deferred;return FeedChannelCollection.getByChannelIdData({channelId:this.model.get("tabActiveId"),startId:this.model.get("lastId")||"",pageSize:20,commentCount:4}).done(function(c){a.model.set("lastId",c.lastId||""),b.resolve(c)}).fail(function(a){b.reject(a)}),b},_renderFeedListView:function(a){var b=this;return a.feeds&&0!=a.feeds.length?(this.feedListView=new FeedListView({model:new Talent.Model(a),requestMoreFeed:function(){var a=new Talent.$.Deferred;return b._requestFeedData().done(function(b){a.resolve(b)}),a}}),void this.list.show(this.feedListView)):void this._renderEmptyView("暂无"+this.model.get("tabActiveName")+"动态，您所有相关工作的变化都会显示在这里。")},_renderEmptyView:function(a){this.list.close(),this.emptyView=new EmptyView({emptyContext:a}),this.empty.show(this.emptyView)}});var FeedType8View=Talent.ItemView.extend({className:"feedtype8_fb",template:jst["feed/feed-type8"],events:function(){var a={};return a},initialize:function(){},onShow:function(){this._renderFeedTrackView(),this._renderFeedTaskExtraInfoListView()},_renderFeedTrackView:function(){var a=this.model.get("feedOperations");a&&a.comments&&(this.feedTrackView||(this.feedTrackView=new FeedTrackView({model:new Talent.Model({id:this.model.get("feedId")})}),this.listenTo(this.feedTrackView,"showAll",function(){this._requestMoreTrack()},this),this.feedTrackView.model.set(a),this.$el.after(this.feedTrackView.render().el)))},_renderFeedTaskExtraInfoListView:function(){var a=this.model.get("customizeData")||[];a&&a.length&&(this.feedExtraInfoListView||(this.feedExtraInfoListView=new FeedExtraInfoListView({collection:new Talent.Collection(a)}),this.$el.after(this.feedExtraInfoListView.render().el)))},_requestMoreTrack:function(){var a=this,b=this.model.get("feedId");CommentV2.getCommentGet({feed_id:b,comment_type:1}).done(function(b){a.feedTrackView.model.set("comments",b.comments)})}}),FeedType9View=Talent.ItemView.extend({className:"feedtype9_fb",template:jst["feed/feed-type9"],templateHelpers:function(){var a=this.model.get("showType"),b=(this.model.get("startDate"),this.model.get("deadline"),this.model.get("remainDay")),c=this.model.get("deadLineDay"),d=this.model.get("feedType"),e=this.model.get("taskType"),f=this.model.get("obj")||{},g=f.objType||0;objSubType=f.objSubType||0;var h=FeedTmpl.showTimeTmplFun(a,this.model.get("startDate"),this.model.get("deadline"),b,c),i=this.model.get("evaluation"),j="";i&&(j=Talent._.TitaWidget_evaluation(i));var k=FeedTmpl.typeIco(d,g,objSubType);return{date:h,webHost:Context.isAbsolutePath(),typeName:FeedTmpl.typeName(d,e),evaluation:j,labIcoType:k}},ui:{name:"a[data-name=feed-task-name]",tipNode:"[original-title]",workflow:"[data-name=feed-work-flow]"},events:function(){var a={};return a["mouseenter "+this.ui.tipNode]="_tipShowHandler",a["mouseleave "+this.ui.tipNode]="_tipHideHandler",a},initialize:function(){},onShow:function(){this._renderFeedStepView(),this._renderFeedTrackView(),this._renderFeedTaskExtraInfoListView()},_tipShowHandler:function(a){var b=Talent.$(a.currentTarget);b.data("tipsy")||b.tipsy({gravity:"s",trigger:"manual"}),b.tipsy("show")},_tipHideHandler:function(a){var b=Talent.$(a.currentTarget);b.tipsy("hide")},_renderFeedTrackView:function(){var a=this.model.get("feedOperations");a&&a.comments&&(this.feedTrackView||(this.feedTrackView=new FeedTrackView({model:new Talent.Model({id:this.model.get("feedId")})}),this.listenTo(this.feedTrackView,"showAll",function(){this._requestMoreTrack()},this),this.feedTrackView.model.set(a),this.$el.after(this.feedTrackView.render().el)))},_renderFeedTaskExtraInfoListView:function(){var a=this.model.get("customizeData")||[];a&&a.length&&(this.feedExtraInfoListView||(this.feedExtraInfoListView=new FeedExtraInfoListView({collection:new Talent.Collection(a)}),this.$el.after(this.feedExtraInfoListView.render().el)))},_renderFeedStepView:function(){var a=this.model.get("step")||"";""!=a&&(this.feedStepView||(this.feedStepView=new FeedStepView({status:this.model.get("status"),step:this.model.get("step")}),this.ui.workflow.html(this.feedStepView.render().el)))},_requestMoreTrack:function(){var a=this,b=this.model.get("feedId");CommentV2.getCommentGet({feed_id:b,comment_type:1}).done(function(b){a.feedTrackView.model.set("comments",b.comments)})}}),TaskCreateDropDownItemView=Talent.ItemView.extend({template:Talent._.template("<%=name%>"),tagName:"li",templateHelpers:function(){return{name:Talent._.TitaWidget_substring(this.model.get("name"),60,!0)}},initialize:function(){var a=this.model.get("name");this.model.set("name",a.replace(/<br\/>/g,""))}}),TaskCreateDropDownCollectionView=Talent.CollectionView.extend({itemView:TaskCreateDropDownItemView,className:"ux_task_list",tagName:"ul",ui:{liName:"li"},events:function(){var a={};return a["click "+this.ui.liName]="_clickName",a},initialize:function(){},onRender:function(){},_clickName:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=Talent._.unescape(b.html());c&&""!=c&&this.trigger("choose",c)},onClose:function(){}}),TaskCreateClassView=Talent.ItemView.extend({defaults:{disable:!1,parentEl:"",classDialogOptions:{}},className:"task-create-class-wraper clearfix",template:jst["task-create/task-create-class"],ui:{formKlass:'[data-name="task-create-class"]',formKlassName:'[data-name="task-create-class-name"]',classContainer:'[data-name="class-area"]'},events:function(){var a={};return a["click "+this.ui.formKlass]="_clickClassHandler",a},modelEvents:{"change:labelName":"_changeLabName"},templateHelpers:function(){return this.settings.classOptions},initialize:function(a){this.settings=Talent._.extend({},a,a.classOptions),this.settings.classOptions=Talent._.extend({},this.defaults,a.classOptions)},_clickClassHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget);this.settings.classOptions.disable||(this.ui.formKlassName.addClass("active"),this._renderKlassView(b))},_renderKlassView:function(a){var b=this.settings.classDialogOptions;this.classComponentView&&this.classComponentView.close(),this.classComponentView=new ClassComponentView(b),this.listenTo(this.classComponentView,"submit",function(a){return a.id||this.model.get("labelId")?void this.model.set({labelType:a.type,labelId:a.id,labelName:a.name}):this.ui.formKlassName.removeClass("active")}),this.listenTo(this.classComponentView,"reset",function(){this.model.set({labelType:0,labelId:null,labelName:""}),this.classComponentView.close(),this.ui.formKlassName.removeClass("active")}),this.listenTo(this.classComponentView,"reset",function(){this.model.set({labelType:0,labelId:null,labelName:""}),this.classComponentView.close(),this.ui.formKlassName.removeClass("active")}),this.settings.parentEl.append(this.classComponentView.render().el),this.classComponentView.show(a,{container:this.settings.parentEl,pos:"bottom",topBias:-44})},_changeLabName:function(){var a=this.model.get("labelName"),b=this.model.get("labelId"),a=Talent._.substringWithM(a,6,!0);b&&""!=a||(a="分类/项目",this.ui.formKlassName.removeClass("active")),this.ui.formKlassName.html(a)},onClose:function(){this.classComponentView&&this.classComponentView.close()}}),TaskCreateNameView=Talent.ItemView.extend({defaults:{parentEl:"",defaultText:"输入任务名称",iconShow:!0,iconClassName:"icon-task-txt",dropdownData:[],showBorderLeft:!0},template:jst["task-create/task-create-name"],ui:{taskName:'input[data-name="task-create-name"]',dropDown:'[data-name="task-create-name-dropdown"]'},className:"ns-task-create-name",events:function(){var a={};return a["focus "+this.ui.taskName]="_onFocus",a["keyup "+this.ui.taskName]="_onKeyHandler",a["keydown paste cut"+this.ui.taskName]="_onKeyHandler",a["input "+this.ui.taskName]="_onKeyHandler",a["blur "+this.ui.taskName]="_unFocus",a["change "+this.ui.taskName]="_onInputChange",a},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options.nameOptions),this.uxAddTaskContainer=this.options.parentEl,this.localStroage=Context.getLocalStorage(),this.userInfo=Context.getUserInfo(),this.settings.iconShow||this.$el.addClass("no-icon"),this.onIME=!1},templateHelpers:function(){return this.settings},onRender:function(){var a=this.localStroage,b=a.getItem("TaskCreateName_"+this.userInfo.Id+this.model.get("id")),c=this.model.get("taskTitle");!c&&b&&(this.ui.taskName.val(b),this.model.set({taskTitle:b}),this.trigger("keyup",this.ui.taskName))},_onInputChange:function(a){var b=this.$(a.currentTarget),c=this.settings.dropdownData,d=Talent.$.trim(b.val());""==d&&c&&c.length&&this._renderDropDown(),this.trigger("change",b)},_unFocus:function(a){var b=this.$(a.currentTarget),c=this;this.uxAddTaskContainer.removeClass("input-focus"),this.blurTag=!0,setTimeout(function(){c.blurTag&&c.settings.dropdownData.length&&c.ui.dropDown.hide()},300),this.trigger("unfocus",b)},_onFocus:function(a){var b=this.$(a.currentTarget),c=this.options.nameOptions.dropdownData;this.uxAddTaskContainer.addClass("input-focus"),c&&c.length&&""==b.val()&&this._renderDropDown(),this.trigger("focus",b)},_renderDropDown:function(){var a=this,b=this.options.nameOptions.dropdownData,c=this.ui.dropDown;this.dropDownView&&this.dropDownView.close(),this.dropDownView=new TaskCreateDropDownCollectionView({collection:new Talent.Collection(b)}),c.html(this.dropDownView.render().el).show(),this.listenTo(this.dropDownView,"choose",function(b){this.blurTag=!1,this.model.set("taskTitle",b),this.ui.taskName.val(b,this.ui.taskName),this.trigger("keyup",this.ui.taskName),c.hide(),a.localStroage.setItem("TaskCreateName_"+this.userInfo.Id+this.model.get("id"),b)})},_onKeyHandler:function(a){var b="",c="";a.type&&(b=a.type),(a.keyCode||"0"==a.keyCode)&&(c=a.keyCode),b&&"keydown"==b&&(this.onIME="0"==c||"229"==c?!0:!1);var d=this.$(a.currentTarget),e=$.trim(d.val()),f=this.ui.uxAddTaskContainer;""!=e&&this.ui.dropDown.hide(),e.length>500&&(e=e.substring(0,500),d.val(e)),this.localStroage.setItem("TaskCreateName_"+this.userInfo.Id+this.model.get("id"),e),this.model.set("taskTitle",e),13!=c||"keyup"!=b||this.onIME?this.trigger("keyup",d):""==e?(f.removeClass("input-focus").addClass("border-warn"),setTimeout(function(){f.removeClass("border-warn")},1500)):this.trigger("submit",d)}}),TaskCreatePrincipleView=Talent.ItemView.extend({template:jst["task-create/task-create-principle"],ui:{principle:'[data-name="task-create-principle-inner"]'},className:"ns-task-principle",events:function(){var a={};return a},modelEvents:{"change:principalUser":"render"},templateHelpers:function(){return this.settings},initialize:function(){this.settings=Talent._.extend({},this.options,this.options.principalOptions)},onRender:function(){this._bindUserSelect()},_bindUserSelect:function(){var a=this;this.userSelectorView=new UserSelector({collection:new UserSelectorCollection});var b={muti:!1};this.settings.container&&(b.container=a.settings.container),this.userSelectorView.addNode(this.$el,b),this.$el.on("submit",function(b,c){b.stopPropagation(),a.trigger("changePrincipal",{user:c,node:a.$(b.currentTarget)})}),Talent.$(document).off("mouseup.task-create-principle-view"),Talent.$(document).on("mouseup.task-create-principle-view",function(){a.userSelectorView&&a.userSelectorView.deleteView()})},onClose:function(){Talent.$(document).off("mouseup.task-create-principle-view"),this.userSelectorView&&this.userSelectorView.close()}}),TaskCreateDateView=Talent.ItemView.extend({defaults:{dateOptions:{showBorderLeft:!0,pos:"bottomRight"},dataTimeRangeOptions:{isShowDateView:!0,isShowCycleView:!0,isShowLongView:!0,count:2,rangepickerOptions:{timePicker:!0}},parentEl:""},template:jst["task-create/task-create-date"],ui:{dateBox:"[data-name=task-create-date-box]",dateIcon:"[data-name=task-create-date-ico]",dateArea:'[data-name="task-create-date-area"]'},className:"ns-task-create-date",events:function(){var a={};return a["click "+this.ui.dateBox]="_showPop",a},modelEvents:{"change:isCycle":"_changeCycle","change:startDate change:endDate change:isLongTerm":"_renderDate","change:cycStartDate change:cycEndDate":"_renderDate","change:cycStartHour change:cycStartMinute change:cycEndHour change:cycEndMinute":"_renderDate"},templateHelpers:function(){this.model.toJSON();return Talent._.extend({},this.settings,{dateTip:this.getDateTip(),cycleTip:this._getCycleTaskHtml(),showBorderLeft:this.settings.dateOptions.showBorderLeft})},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options),this.settings.dateOptions=Talent._.extend({},this.defaults.dateOptions,this.options.dateOptions),this.settings.dataTimeRangeOptions=Talent._.extend({},this.defaults.dataTimeRangeOptions,this.options.dataTimeRangeOptions),this.settings.dataTimeRangeOptions.rangepickerOptions=Talent._.extend({},this.defaults.dataTimeRangeOptions.rangepickerOptions,this.options.dataTimeRangeOptions.rangepickerOptions)},onRender:function(){var a="se";"bottom"==this.settings.dateOptions.pos&&(a="sw"),this.$("[original-title]").tipsy({gravity:a}),1==this.settings.dataTimeRangeOptions.count&&this.model.set("endDate",this.model.get("startDate"),{silent:!0})},_changeCycle:function(){this.render(),this.model.get("isCycle")||this.ui.dateIcon.addClass("icon-task-during-active")},_showPop:function(a){a&&a.stopPropagation();var b=this.$(a.currentTarget);this.dateTimePickerView&&this.dateTimePickerView.close();var c=Talent._.extend({},this.settings.dataTimeRangeOptions,{viewType:this.model.get("isCycle")?"cycle":this.model.get("isLongTerm")?"long":"date",model:this.model});this.dateTimePickerView=new DateTimePickerView(c),this.listenTo(this.dateTimePickerView,"sure",function(){this._renderDate(),this.trigger("selectDate",this.ui.dateBox,this.model.toJSON())}),this.settings.parentEl.append(this.dateTimePickerView.render().el),this.dateTimePickerView.onShow(),this.dateTimePickerView.show(b,{container:this.settings.parentEl,pos:this.settings.dateOptions.pos})},getDateTip:function(){var a=this.model.get("startDate"),b=this.model.get("endDate"),c=moment(a,"YYYY/MM/DD HH:mm"),d=moment(b,"YYYY/MM/DD HH:mm"),e=this.model.get("isLongTerm"),f="起止时间：",g="YYYY/MM/DD HH:mm",h=this.settings.dataTimeRangeOptions.rangepickerOptions;return h&&!h.timePicker&&(g="YYYY/MM/DD"),f+=e?c.format("YYYY/MM/DD")+"-长期":c.format(g)+"-"+d.format(g),1==this.settings.dataTimeRangeOptions.count&&(f=c.format("YYYY/MM/DD")),f},_getCycleTaskHtml:function(){var a="循环周期：",b=this.model.toJSON(),c=b.cycType,d=b.isCycle,e=b.cycStartHour+":"+b.cycStartMinute,f=b.cycEndHour+":"+b.cycEndMinute,g=b.cycStartDayTxt,h=b.cycEndDayTxt;return this.isFirstRender||!d?"设置循环时间":(1==c?(a+="每天",a+=" "+e,a+=" - "+f):2==c?(a+="每个工作日",a+=" "+e,a+=" - "+f):3==c?(a+="每周",a+=" "+g+" "+e+" - "+h+" "+f):4==c&&(a+="每月",a+=" "+g+"日 "+e+" - "+h+"日 "+f),a)},_renderDate:function(){var a=this.getDateTip(),b=(this.model.toJSON(),this.model.get("isCycle"));return b?void this._renderCycle():(this.ui.dateBox.attr("original-title",a),void this.ui.dateIcon.addClass("icon-task-during-active"))},_renderCycle:function(){var a=this._getCycleTaskHtml();this.ui.dateBox.attr("original-title",a),this.ui.dateIcon.addClass("icon-action-cycle-active")},onClose:function(){this.dateTimePickerView&&this.dateTimePickerView.close()}}),TaskCreateWorkHourView=Talent.ItemView.extend({defaults:{showBorderLeft:!0,parentEl:"body",hourDropdownOpitons:{pos:"bottomRight"}},className:"task-create-work-hour-box",template:jst["task-create/task-create-workhour"],ui:{workhour:'[data-name="task-create-workhour"]'},events:function(){var a={};return a["click "+this.ui.workhour]="_renderWorkHourView",a},modelEvents:{"change:hourDate":"render","change:minuteDate":"render"},templateHelpers:function(){return{workHour:this._formateDate(),showBorderLeft:this.settings.showBorderLeft}},initialize:function(){this.settings=Talent._.extend({},this.options,this.options.hourDateOptions)},_renderWorkHourView:function(a){var b=this.$(a.currentTarget);a.stopPropagation(),this.workHourView&&this.workHourView.close(),this.workHourView=new WorkHourView({model:new Talent.Model({hourDate:this.model.get("hourDate"),minuteDate:this.model.get("minuteDate")})}),this.listenTo(this.workHourView,"sure",function(a){this.model.set({hourDate:a.hourDate,minuteDate:a.minuteDate})});var c=Talent._.extend({},this.settings.hourDropdownOpitons);c.container=this.settings.parentEl,this.workHourView.show(b,c)},_formateDate:function(){var a=this.model.get("hourDate"),b=this.model.get("minuteDate"),c="",d=[{minute:"0",hour:"00"},{minute:"15",hour:"25"},{minute:"30",hour:"50"},{minute:"45",hour:"75"}];if(a&&b){var e=_.findWhere(d,{minute:b});c=a+"."+e.hour}if(!a&&b){var e=_.findWhere(d,{minute:b});c="0."+e.hour}return a&&!b&&(c=a+".00"),a||b||(c=""),c},onClose:function(){this.workHourView&&this.workHourView.close()}}),TaskCreateParticipatorView=Talent.ItemView.extend({template:jst["task-create/task-create-participator"],ui:{participator:'[data-name="task-create-participator"]'},events:function(){var a={};return a["click "+this.ui.participator]="_showAddUser",a},modelEvents:{"change:participatorsCount":"render"},_showAddUser:function(a){var b=this.$(a.currentTarget);this.trigger("toggleAddUser",b)},templateHelpers:function(){return this.settings},initialize:function(){this.settings=Talent._.extend({},this.options,this.options.participatorOptions)},onClose:function(){}}),TaskCreateApplyUserView=Talent.ItemView.extend({template:jst["task-create/task-create-apply-user"],className:"ns-task-create-applyuser",ui:{deleteApplyUser:'[data-name="task-create-delete-applyuser"]',applyUser:'[data-name="task-create-applyuser"]'},events:function(){var a={};return a["click "+this.ui.deleteApplyUser]="_deleteApprover",a},modelEvents:{"change:applyUser":"render"},templateHelpers:function(){return this.settings},initialize:function(){this.settings=Talent._.extend({},this.options,this.options.applyUserOptions)},onRender:function(){var a=this;this.userSelectorView=new UserSelector({collection:new UserSelectorCollection});var b={muti:!1};this.settings.container&&(b.container=this.settings.container),this.userSelectorView.addNode(this.ui.applyUser,b),this.ui.applyUser.on("submit",function(b,c){b.stopPropagation(),a._checkApplyUser(c)}),Talent.$(document).off("mouseup.task-create-apply-user-view"),Talent.$(document).on("mouseup.task-create-apply-user-view",function(){a.userSelectorView&&a.userSelectorView.deleteView()})},_checkApplyUser:function(a){a.userId=a.Id;var b=this.model.get("principalUser").Id;return b==a.Id?void TipDialogView(this.ui.applyUser,"负责人和审批人不能是同一人",{pos:"topCenter",container:this.settings.parentEl,topBias:48}):void this.model.set("applyUser",a)},_deleteApprover:function(a){var b=this,c=Talent.$(a.currentTarget);a.stopPropagation(),ConfirmDialogView(c,"此操作不可恢复，您确定删除吗？",{sure:function(){b.model.set({applyUser:null})},pos:"bottom",topBias:32,leftBias:-20,container:this.settings.parentEl})},onClose:function(){Talent.$(document).off("mouseup.task-create-apply-user-view")}}),TaskCreateExternalPersonView=Talent.ItemView.extend({template:jst["task-create/task-create-external-person"],ui:{externalPerson:'[data-name="task-create-extend-person"]'},events:function(){var a={};return a["click "+this.ui.externalPerson]="_showExternalPerson",a},modelEvents:{"change:extend_user":"render"},templateHelpers:function(){return this.settings},initialize:function(){this.settings=Talent._.extend({},this.options,this.options.extendPersonOptions)},_showExternalPerson:function(a){var b=this.$(a.currentTarget);this.trigger("showExtendPerson",b)},onClose:function(){}}),TaskCreateReplaceView=Talent.ItemView.extend({defaults:{parentEl:""},template:jst["task-create/task-create-replace"],className:"create-replace-box",ui:{checkWraper:'[data-name="task-create-replace-check-wraper"]',replace:'[data-name="task-create-replace-check"]',replaceLabel:'[data-name="task-create-replace-label"]'},events:function(){var a={};return a["click "+this.ui.checkWraper]="_checkReplace",a},modelEvents:{"change:isCanReplace":"render","change:replaceRadioChecked":"_radioCheckedEvent"},templateHelpers:function(){return this.settings},initialize:function(){var a=this;this.settings=Talent._.extend({},this.options,this.options.replaceOptions),this.userInfo=Context.getUserInfo(),this.model.set({replaceRadioChecked:!1,isCanReplace:!1},{silent:!0}),this.userSelectorView=new UserSelector({collection:new UserSelectorCollection}),Talent.$(document).off("mouseup.task-create-replace"),Talent.$(document).on("mouseup.task-create-replace",function(){a.userSelectorView&&a.userSelectorView.deleteView()})},onRender:function(){this.$("[original-title]").tipsy({gravity:"s"})},_checkReplace:function(){var a=(this.ui.replace,this.model.toJSON()),b=(a.principalUser,a.replaceRadioChecked),c=a.isCanReplace;c&&(b?(this.model.set("replaceRadioChecked",!1),this._radioCheckedEvent(),this.trigger("cancelReplace")):(this.model.set("replaceRadioChecked",!0),this._radioCheckedEvent(),this._bindUserSelector()))},_radioCheckedEvent:function(){var a=this.model.get("replaceRadioChecked");if(a){var b=this.model.get("principalUser");this.model.set({publisher:b}),this.ui.replace.removeClass("checkbox").addClass("checkbox-checked"),this.ui.replaceLabel.text("代ta发起："+b.Name)}else this.model.set({publisher:null},{silent:!0}),this.userSelectorView.unBindNodeEvents(this.ui.replaceLabel),this.ui.replace.removeClass("checkbox-checked").addClass("checkbox"),this.ui.replaceLabel.text("代ta发起")},_bindUserSelector:function(){var a=this,b={muti:!1,bias:{left:-35,top:0}};this.settings.container&&(b.container=this.settings.container),this.userSelectorView.addNode(this.ui.replaceLabel,b),this.ui.replaceLabel.on("submit",function(b,c){return c.Id==a.userInfo.Id?void TipDialogView(a.ui.replaceLabel,"不能选择自己作为代发人",{container:a.settings.settings,pos:"topCenter",topBias:48}):(a.ui.replaceLabel.text("代ta发起："+c.Name),a.model.set({publisher:c}),void a.trigger("publisherChanged"))})},onClose:function(){this.userSelectorView&&this.userSelectorView.close(),Talent.$(document).off("mouseup.task-create-replace")}}),TaskCreateBottomView=Talent.Layout.extend({template:jst["task-create/task-create-bottom"],defaults:{privateRangeOptions:{privateValue:2,sort:[2,3,1],privateOptions:{name:"私密",des:"仅任务成员可见"},publicOptions:{name:"公开",des:"所有人可见"},departmentOptions:{name:"部门可见",des:"仅我的部门可见"}},nameOptions:!1,shape:"line",parentEl:"",bottomOptions:{isShowFileUpload:!0,isShowPrivateBtn:!0,isShowPrivateDropDown:!0,isShowMessage:!0,isShowPackUpBtn:!0,pubBtnText:"发布"}},className:"task-create-bottom-box",ui:{uploadNewFile:".upload_new_file",pubBtn:'[data-name="set-pub-btn"]',toggle:'[data-name="toggle"]',msgTip:'[data-name="data-message"]',publishWraper:'[data-name="publish-wraper"]',privated:"div[data-name=task-create-private]",privatedCaret:'[data-name="range-caret"]',attachment:"a[data-name=file]"},events:function(){var a={};return a["click "+this.ui.pubBtn]="_submitTask",a["click "+this.ui.toggle]="_toggle",a["click "+this.ui.msgTip]="_msgTip",a["click "+this.ui.privated]="_renderPrivateView",a},modelEvents:{"change:sendUserStatus":"_changeUserMessage"},templateHelpers:function(){var a=this.settings.privateRangeOptions.privateValue,b=this.privateView&&this.privateView.getDefaultPrivateText(a)||"";return this.settings.bottomOptions.privateText=b,this.settings.bottomOptions},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options),this.settings.bottomOptions=Talent._.extend({},this.defaults.bottomOptions,this.options.bottomOptions),this.settings.privateRangeOptions=Talent._.extend({},this.defaults.privateRangeOptions,this.options.privateRangeOptions),this.model.set({packUp:"line"==this.settings.shape?!0:!1,visibility:this.settings.privateRangeOptions.privateValue}),this.privateView=new PrivateRangView(this.settings.privateRangeOptions),this.listenTo(this.privateView,"selected",function(a){this.model.set({privateText:a.text,visibility:a.visibility,privateObjType:a.privateObjType,privateObjId:a.privateObjId,privateValue:a.privateValue});var b=a.text;(2==a.privateValue||3==a.privateValue)&&(b='<i class="icon-lock" data-name="lock" style=""></i>'+a.text),this.ui.privated.html(b),this.settings.bottomOptions.isShowPrivateDropDown&&this.ui.privated.append(this.ui.privatedCaret)})},onRender:function(){this._renderUploadView(),this._customizeRange()},closeView:function(){this.privateView&&this.privateView.hide()},_customizeRange:function(){this.settings.bottomOptions.isShowPrivateDropDown?this.ui.privated.addClass("pointer"):this.ui.privatedCaret.remove()},_renderUploadView:function(){var a=this;this.uploaderView=new UploaderComponentView({container:this.$el,openYFY:Context.IsOpenYifangyun()}),this.uploaderView.on("uploadEnd",function(){a.trigger("uploadClose",a._getUploadFile())}),this.uploaderView.on("deleteItem",function(){a.trigger("uploadClose",a._getUploadFile())}),this.uploaderView.on("error",function(b){a.$el.find('div[id="'+b.timestamp+'"]').remove()}),this.ui.attachment.html(this.uploaderView.render().$el)},_renderPrivateView:function(a){if(this.settings.bottomOptions.isShowPrivateDropDown){a.stopPropagation();var b=Talent.$(a.currentTarget);this.$el.append(this.privateView.render().$el),this.privateView.show(b,{container:this.$el.parent(),pos:"topRight"})}},changePubBtnDisable:function(a){var b=this.ui.pubBtn;a?b.removeClass("btn-disabled"):b.addClass("btn-disabled")},_msgTip:function(a){var b=this.$(a.currentTarget),c=b.hasClass("checkbox-checked")?!1:!0;c?this._checkNum():this.model.set("sendUserStatus",c)},_checkNum:function(a){var b=this,c=a?a:!1;SMSCollection.getSmsCheck({to_user_id:b.model.get("principalUser").Id}).done(function(a){1==a?(c||b.model.set("sendUserStatus",!0),b.model.set("telephone",""),b.model.set("is_notify",0),b.model.set("setCheck",!1)):2==a||4==a?c?b.model.get("sendUserStatus")&&(b.model.set("sendUserStatus",!1),b._moreMessagePop()):b._moreMessagePop():3==a&&(c?b.model.get("sendUserStatus")&&(b.model.set("sendUserStatus",!1),b._hasNoNumberPop()):b._hasNoNumberPop())}).fail(function(){b.model.set("sendUserStatus",!1)})},_moreMessagePop:function(){var a=this;this.saveDialog&&this.saveDialog.close(),this.saveDialog=new TDialogView({sure:!0,cancel:!1,type:"tipsy",showClosed:!1,minWidth:300,arrow:!0,autoHide:!1,sure:function(){a.saveDialog.$el.hide()}}),$("body").append(this.saveDialog.render().$el),this.saveDialog.show(this.ui.msgTip,"目前您企业的短信已超出许可量，请联系超管进行短信充值",{className:"warn",leftBias:8})},_hasNoNumberPop:function(){var a=this;this.saveDialog&&this.saveDialog.close(),this.saveDialog=new TDialogView({type:"",showClosed:!0,arrow:!0,sure:!0,cancel:!0,autoHide:!1,minWidth:350,sure:function(){var b=a.saveDialog.$el.find('input[name="telephone"]').val();if(!a._validatePhoneNum(b))return a.saveDialog.$el.find('input[name="telephone"]').parent().addClass("input-error"),a.saveDialog.$el.find(".errortext_mcsmt").html("请填写正确的11位手机号码"),!1;var c=a.model.get("setCheck")?1:0;a.model.set("is_notify",c),a.model.set("telephone",b),a.model.set("sendUserStatus",!0)}}),this.$el.parent().append(this.saveDialog.render().$el),this.saveDialog.show(this.ui.msgTip.parent(),'<div class="ux_create_task_pop"><h2>请填写负责人的手机号码</h2><div class="input-default"><input type="text" name="telephone" class=""></div><div class="errortext_mcsmt"></div><div class="checkbox_wrap"><a href="javascript:void(0);" title="" class="checkbox"><span class="ico"></span></a><span>通知对方添加手机号，避免您重复填写</span></div></div>',{leftBias:0,pos:"bottom",container:this.$el.parent()}),this.saveDialog.$el.find('input[name="telephone"]').on("focus",function(){a.saveDialog.$el.find('input[name="telephone"]').parent().addClass("input-focus")}),this.saveDialog.$el.find('input[name="telephone"]').on("blur",function(){a.saveDialog.$el.find('input[name="telephone"]').parent().removeClass("input-focus")}),this.saveDialog.$el.find('input[name="telephone"]').on("keyup",function(){a.saveDialog.$el.find(".errortext_mcsmt").html(""),a.saveDialog.$el.find('input[name="telephone"]').parent().removeClass("input-error")}),this.saveDialog.$el.find(".checkbox").on("click",function(b){var c=Talent.$(b.currentTarget),d=c.hasClass("checkbox-checked")?!1:!0;a.model.set("setCheck",d),c.hasClass("checkbox-checked")?c.removeClass("checkbox-checked"):c.addClass("checkbox-checked")}),this.saveDialog.$el.find(".closed_dialog").on("click",function(){return!0})},_changeUserMessage:function(){var a=this.model.get("sendUserStatus"),b=this.ui.msgTip;b.removeClass("checkbox checkbox-checked"),a?b.addClass("checkbox-checked").attr({"original-title":"取消短信通知负责人"}):b.addClass("checkbox").attr({"original-title":"短信通知负责人"})},_validatePhoneNum:function(a){var b=/^1((3[0-9])|(5[012356789])|(8[01256789])|(4[7]))\d{8}$/,c=RegExp(b);return c.test(a)?!0:!1},_toggle:function(a){a.stopPropagation();var b=this.model.get("packUp"),c=this.$(a.currentTarget),d=c.find(".l"),e=c.find(".r");this.model.set("packUp",!b),e.removeClass("icon-arrow-up-double icon-arrow-down-double"),this.ui.publishWraper.removeClass("packup"),b?(e.addClass("icon-arrow-up-double"),d.text("收起")):(e.addClass("icon-arrow-down-double"),this.ui.publishWraper.addClass("packup"),d.text("更多信息")),this.trigger("openAdvancedMode",c,{open:!b})},_submitTask:function(a){var b=this.$(a.currentTarget);if(this.model.get("pubBtnIsActive"))return this.settings.nameOptions&&!this.model.get("taskTitle")?void this.trigger("onSubmitError"):void this.trigger("onSubmit",b)},_getUploadFile:function(){var a=this.uploaderView.fileCollection.where({Msg:"上传成功"}),b=new Talent.Collection(a);return b.toJSON()},onClose:function(){this.saveDialog&&this.saveDialog.close(),this.privateView&&this.privateView.close()}}),TaskCreateAddUserItemView=Talent.ItemView.extend({template:jst["task-create/task-create-add-user-item"],tagName:"li",ui:{uxUserArea:".ux_user_area"},initialize:function(){if(this.model.has("name")){this.model.set("departmentTag",!0);var a='<span class="square" >'+this.model.get("name").substr(0,1)+"</span>";this.model.set("Name",this.model.get("name")),this.model.set("imgTemplate",a),this.model.set("HasAvatar","")}else this.model.set("departmentTag",!1)},onRender:function(){this.model.has("UserAvatar")?(this.userAvatar=this.model.get("UserAvatar"),this.userAvatar.HasAvatar&&this.$el.find("img").addClass("radius_img30")):this.userAvatar="",this.$el.find("[title]").tipsy({gravity:"s"})},events:function(){var a={};return a["mouseover "+this.ui.uxUserArea]="_changeHideNode",a["mouseout "+this.ui.uxUserArea]="_changeShowNode",a["click "+this.ui.uxUserArea]="_deleteUser",a
},_deleteUser:function(a){this.trigger("deleteUser",this.model),a.stopPropagation()},_changeHideNode:function(a){var b=Talent.$(a.currentTarget);this.userAvatar.HasAvatar?b.find("img").hide():b.find("span").hide()},_changeShowNode:function(a){var b=Talent.$(a.currentTarget);this.userAvatar.HasAvatar?b.find("img").show():b.find("span").show()}}),TaskCreateAddUserCompositeView=Talent.CompositeView.extend({itemView:TaskCreateAddUserItemView,className:"task-create-member-list",itemViewContainer:"ul",template:jst["task-create/task-create-add-user-composite"],ui:{addUserBtn:'em[data-name="add-user-btn"]'},initialize:function(a){this.userInfo=Context.getUserInfo(),this.settings=a},modelEvents:{},onRender:function(){var a=this;this.on("itemview:deleteUser",function(b){a.collection.remove(b.model),$("body .tipsy").remove(),a.trigger("deleteUserApi",b.model),a.trigger("selectUser",a.collection.toJSON())}),this.userSelectorView=new UserSelector({collection:new UserSelectorCollection});var b={muti:!0};this.settings.container&&(b.container=this.settings.container),this.userSelectorView.addNode(this.ui.addUserBtn,b),this.ui.addUserBtn.on("submit",function(b,c){b.stopPropagation(),a._changeResponsible(c.data?c.data:c)}),Talent.$(document).off("mouseup.task-create-add-user-composite"),Talent.$(document).on("mouseup.task-create-add-user-composite",function(){a.userSelectorView&&a.userSelectorView.deleteView()})},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a),d=Marionette.getOption(this,"itemViewOptions");_.isFunction(d)&&(d=d.call(this,a,c));var e=this.buildItemView(a,b,d);this.addChildViewEventForwarding(e),this.children.add(e),e.render(),this.$el.find(this.itemViewContainer).find("li:first-child").length?this.$el.find(this.itemViewContainer).find("li:first-child").before(e.el):this.$el.find(this.itemViewContainer).append(e.el),this._isShown&&Marionette.triggerMethod.call(e,"show"),this.triggerMethod("after:item:added",e)},_changeResponsible:function(a){if(a.length>0){var b=0;Talent._.each(a,function(a){"department"==a.type?b+=a.totalUserCount:b++});var c=this.collection.length+b,d=this._checkParticipatorsLimit(c);d&&(this._smemberListSelect(a),this.trigger("selectUser",this.collection.toJSON()))}else{var c=this.collection.length+1,d=this._checkParticipatorsLimit(c);d&&(this._smemberSelect(a),this.trigger("selectUser",this.collection.toJSON()))}},_checkParticipatorsLimit:function(a){var b=this.model.get("participatorsLimit");return a>b?(TipDialogView(this.ui.addUserBtn,"参与者不能超过"+b+"人",{container:this.$el,pos:"top",topBias:47}),!1):!0},_smemberListSelect:function(a){var b=this,c=0,d=new Talent.Collection;_.each(a,function(a){if(a.Id)var e=b.collection.where({Id:a.Id});else var e=b.collection.where({id:a.id});e.length>0?c++:d.add(a)}),c==a.length?TipDialogView(this.ui.addUserBtn,"添加的人都已存在",{container:this.$el,pos:"top",topBias:47}):(this.trigger("addUserApi",d.toJSON()),_.each(d.models,function(a){b.collection.add(a)}))},_smemberSelect:function(a){a=a||{};var b=this.collection.where({Id:a.Id});if(b.length>0)return void TipDialogView(this.ui.addUserBtn,"该联系人已存在",{container:this.$el,pos:"top",topBias:43});var c=this.model.get("principalUser").Id;if(a.Id==c)return void TipDialogView(this.ui.addUserBtn,"ta已是任务负责人，不能成为参与人",{container:this.$el,pos:"top",topBias:43});var d=this.model.get("publisher");if(d&&d.Id==a.Id)return void TipDialogView(this.ui.addUserBtn,"ta已是任务发起人，不能成为参与人",{container:this.$el,pos:"top",topBias:43});this.userInfo.Id!=a.Id||d||(TipDialogView(this.ui.addUserBtn,"只有在代别人发布任务的时候才能成为参与人",{container:this.$el,pos:"top",topBias:43}),this.trigger("addSelf"));var e=new Talent.Collection(a);this.trigger("addUserApi",e.toJSON()),this.collection.add(a)},onClose:function(){Talent.$(document).off("mouseup.task-create-add-user-composite"),this.tDialogViewError&&this.tDialogViewError.close(),this.userSelectorView&&this.userSelectorView.close(),Talent.$(".tipsy").remove()}}),TaskCreateAddExtendUserView=Talent.ItemView.extend({template:Talent._.template('<input data-name="task-create-extend-user" value="<%=extendUser%>" placeHolder="填写外部联系人"/>'),className:"task-create-extend-user",ui:{uxInput:'input[data-name="task-create-extend-user"]'},events:function(){var a={};return a["focus "+this.ui.uxInput]="_onFocus",a["blur "+this.ui.uxInput]="_onBlur",a},initialize:function(a){this.parentEl=a.parentEl},onRender:function(){},_onFocus:function(a){Talent.$(a.currentTarget);this.parentEl.addClass("input-focus")},_onBlur:function(a){var b=Talent.$(a.currentTarget);this.parentEl.removeClass("input-focus"),this.model.set("extendUser",b.val())}}),i18n=Context.getI18n(),TaskCreateView=Talent.Layout.extend({defatuls:{id:"",shape:"default",templateName:"default",extraClass:"",richEditorOptions:{defaultText:"详细说明"},extendPersonOptions:!1,applyUserOptions:{showBorderLeft:!0},participatorOptions:{limit:100,showBorderLeft:!1},replaceOptions:{showBorderLeft:!0},hourDateOptions:!1,hourDropdownOpitons:{pos:"bottomRight"},principalOptions:{showBorderLeft:!0},classOptions:{disable:!1,showBorderLeft:!1},classDialogOptions:{},nameOptions:{defaultText:"任务"==i18n.task_1?"请输入需要安排的工作名称":"输入"+i18n.task_1+"名称",iconShow:!0,iconClassName:"icon-task-txt",dropdownData:[],showBorderLeft:!0},dateOptions:{showBorderLeft:!0,pos:"bottomRight"},dataTimeRangeOptions:{},bottomOptions:{isShowFileUpload:!0,isShowPrivateBtn:!0,isShowPrivateDropDown:!0,isShowMessage:!0,isShowPackUpBtn:!0,pubBtnText:"发布"},privateRangeOptions:{},requestSubmit:function(){var a=new Talent.$.Deferred;return a},toUserId:""},template:jst["task-create/task-create"],className:"tt-task-create",ui:{uxAddTaskContainer:'[data-name="task-create-add-input"]',uxMemberList:'[data-name="task-create-member-list"]',uxExtend:'[data-name="task-create-extend"]',uxAddInput:'[data-name="task-create-add-input"]',uxRicheditor:'[data-name="task-create-richeditor"]',uxTools:'[data-name="task-create-tools"]',bottomArea:'[data-name="task-create-bottom"]',uxTaskContent:'input[data-name="task-create-name"]',principle:'[data-name="task-create-principle-inner"]',richEditorContent:".redactor_editor",richEditorDefaultLabel:".redactor_box label",richEditorBox:".redactor_box",uxExtendUser:'input[name="extend_user"]',uxExtendArea:'[data-name="task-create-layout-extend"]',pubBtn:'[data-name="set-pub-btn"]'},regions:{uxAddInput:'[data-name="task-create-add-input"]',uxTools:'[data-name="task-create-tools"]',bottomArea:'[data-name="task-create-bottom"]',uxMemberList:'[data-name="task-create-member-list"]',uxRicheditor:'[data-name="task-create-richeditor"]',uxExtend:'[data-name="task-create-extend"]',classArea:'[data-name="task-create-class"]',inputArea:'[data-name="task-create-name"]',principleArea:'[data-name="task-create-principle-area"]',taskDateArea:'[data-name="task-create-date"]',workHourArea:'[data-name="task-create-hour-date"]',participatorArea:'[data-name="task-create-participator"]',applyUserArea:'[data-name="task-create-apply-user"]',externalPersonArea:'[data-name="task-create-external-person"]',replaceArea:'[data-name="task-create-replace"]',uxExtendArea:'[data-name="task-create-layout-extend"]'},events:function(){var a={};return a},modelEvents:{"change:taskTitle":"_onValueChange","change:code":"_onValueChange"},initialize:function(a){this.defaults;this.userInfo=Context.getUserInfo(),this.tenantId=Context.getGlobal("tenantInfo").Id,this.settings=Talent._.extend({},this.defatuls,a),this.model.set("id",this.settings.id),this._customTemplate();for(var b in a)"object"==typeof a[b]&&(this.settings[b]=Talent._.extend({},this.defatuls[b],a[b]));this.settings.extraClass&&this.$el.addClass(this.settings.extraClass),this.participatorCollection=new Talent.Collection,this.listenTo(this.participatorCollection,"add remove reset",function(){this._synNum()}),this.localStorage=Context.getLocalStorage(),this.initModelData=this.model.toJSON(),this._initData()},onRender:function(){this._renderBottomView(),this._renderAll(),this._customModuleShow()},onShow:function(){},_customModuleShow:function(){var a=this.settings;"line"!=a.shape&&this._showAdvancedMode(),a.classOptions||this.$el.addClass("task-create-none-class"),a.applyUserOptions&&this._getCurrentUserApproval(),a.participatorOptions&&this._renderAddUserCompositeView(),a.richEditorOptions||this.ui.uxRicheditor.hide(),a.classOptions||a.nameOptions||a.principalOptions||a.dateOptions||this.ui.uxAddTaskContainer.remove(),a.hourDateOptions||a.participatorOptions||a.extendPersonOptions||a.applyUserOptions||a.replaceOptions||this.ui.uxTools.remove()},_customTemplate:function(){this.settings.template&&(this.template=this.settings.template),"dateRichEditor"==this.settings.templateName&&(this.settings=Talent._.extend({},this.settings,{privateRangeOptions:!1,extendPersonOptions:!1,applyUserOptions:!1,participatorOptions:!1,replaceOptions:!1,hourDateOptions:!1,principalOptions:!1,classOptions:!1,nameOptions:!1,dateOptions:{showBorderLeft:!1,pos:"bottom"},dataTimeRangeOptions:{isShowDateView:!1,isShowCycleView:!1,isShowLongView:!0,count:2,isShowTab:!1,rangepickerOptions:{timePicker:!1,format:"YYYY/MM/DD"}}}),this.settings.bottomOptions=Talent._.extend({},this.settings.bottomOptions,{isShowPrivateBtn:!1,isShowMessage:!1,isShowPackUpBtn:!1}),this.template=jst["task-create/task-create-customize-date-richeditor"],this.$el.addClass("tt-task-create-date-richeditor")),"workhour"==this.settings.templateName&&(this.settings=Talent._.extend({},this.settings,{privateRangeOptions:!1,extendPersonOptions:!1,applyUserOptions:!1,participatorOptions:!1,replaceOptions:!1,principalOptions:!1,classOptions:!1,nameOptions:{iconShow:!1,defaultText:"工作内容",showBorderLeft:!1},hourDateOptions:{showBorderLeft:!0},hourDropdownOpitons:{pos:"bottomRight"},dateOptions:{showBorderLeft:!0,pos:"bottomRight",isShowTab:!1},dataTimeRangeOptions:{isShowTab:!1,count:1,rangepickerOptions:{maxDate:moment(),isShowCycleView:!1,isShowLongView:!1}}}),this.settings.bottomOptions=Talent._.extend({},this.settings.bottomOptions,{isShowPrivateBtn:!1,isShowMessage:!1}),this.template=jst["task-create/task-create-customize-work-hour"])},_renderAll:function(){for(var a=this.settings,b=[{condition:a.classOptions,method:"_renderClassView"},{condition:a.principalOptions,method:"_renderPrincipleView"},{condition:a.hourDateOptions,method:"_renderWorkHourView"},{condition:a.participatorOptions,method:"_renderParticipatorsView"},{condition:a.applyUserOptions,method:"_renderApplyUserView"},{condition:a.extendPersonOptions,method:"_renderExternalPersonView"},{condition:a.replaceOptions,method:"_renderReplacerView"},{condition:a.nameOptions,method:"_renderTaskCreateNameView"},{condition:a.dateOptions,method:"_renderDateView"},{condition:a.richEditorOptions,method:"_renderRichEditor"}],c=0,d=b.length;d>c;c++)b[c].condition&&this[b[c].method]()},_getUserInfo:function(){var a=this,b=this.settings.toUserId;UserCollection.getData({ids:[b].join(",")}).done(function(c){var d=c[b];d&&a.model.set({principalUser:{Id:d.Id,Name:d.Name,Email:d.Email}})}).fail(function(){})},_submitSuccess:function(){var a=this,b=this.localStorage,c=this.model.get("id"),d=this.model.get("publisher");b.removeItem("TaskCreateName_"+this.userInfo.Id+c),b.removeItem("TaskCreateDes_"+this.userInfo.Id+c),this._initData(),this.render();var e=this.bottomView.ui.pubBtn;d?this._tipMessage(e,{msg:"查看代他人发起的任务到任务中心-代发任务",sureText:"马上查看",cancelText:"我知道了",sure:function(){a.Dialog.close(),Talent.$(document).trigger("click")},container:a.$el,cancel:!0,pos:"topRight",sureLink:"#more/tasks?relation=4"}):TipDialogView(e,"已发布成功",{pos:"topRight",container:a.$el,className:"success"}),this.TAjaxIng=!1},_submitError:function(a){if(this.TAjaxIng=!1,a){var b=this.bottomView.ui.pubBtn;TipDialogView(b,a,{pos:"topRight",container:this.$el})}},_invalidError:function(){this.ui.uxAddTaskContainer.css("border-color","red"),this.ui.uxAddTaskContainer.animate({"border-color":"#aaa"},2e3)},_onValueChange:function(){var a=this.model.get("code");this.settings.nameOptions&&(a=this.model.get("taskTitle")),this.bottomView&&this.bottomView.model.set("pubBtnIsActive",a?!0:!1)},_initData:function(){this.participatorCollection.reset([]);var a={participatorsCount:0,participators:"",principalUser:{Id:this.userInfo.Id,Name:this.userInfo.Name},applyUser:"",publisher:null,labelId:"",labelType:"",labelName:"",taskTitle:"",startDate:moment().format("YYYY/MM/DD 08:00"),endDate:moment().format("YYYY/MM/DD 18:00"),isCycle:!1,isLongTerm:!1,hourDate:"",minuteDate:"",extendUser:"",cycType:2,cycStartDay:"",cycEndDay:"",cycStartHour:"08",cycStartMinute:"00",cycEndHour:"18",cycEndMinute:"00",visibility:1,privateObjType:0,privateObjId:0,code:"",sendUserStatus:!1,file:[]},b=this.settings.dataTimeRangeOptions;b&&b.rangepickerOptions&&(a.startDate=b.rangepickerOptions.startDate||moment().format("YYYY/MM/DD 08:00"),a.endDate=b.rangepickerOptions.endDate||moment().format("YYYY/MM/DD 18:00"));var c=Talent._.extend({},a,this.initModelData);this.model.set(c,{silent:!0}),""!=this.settings.toUserId&&this._getUserInfo()},_synNum:function(){this.model.set("participatorsCount",this.participatorCollection.length)},_onSubmitForm:function(){var a=this,b=(this.model.toJSON(),this.formatPostData()),c=this.settings.participatorOptions.limit,d=this.bottomView.ui.pubBtn;if(!this.TAjaxIng){if(this.TAjaxIng=!0,this.model.get("participatorsCount")>c)return void TipDialogView(this.$('[data-name="set-pub-btn"]'),"参与者不能超过"+c+"人",{container:this.$el,pos:"topRight"});this.model.has("telephone")&&this.model.has("is_notify")&&this._addBothPhoneNum(),d.html("正在"+this.settings.bottomOptions.pubBtnText+"……"),this.settings.requestSubmit(b,this.model.toJSON()).done(function(){a._submitSuccess()}).fail(function(b){d.html(a.settings.bottomOptions.pubBtnText),a._submitError(b)})}},formatPostData:function(){var a=this.model.toJSON(),b={Participators:a.participatorsCount?this._getParticipators(this.participatorCollection.models):[],MessageUsers:[],TaskName:Talent._.escape(a.taskTitle),PrincipalUser:a.principalUser.Id,StartDate:a.startDate,EndDate:a.endDate,Importance:!1,Visibility:3==a.visibility?2:a.visibility,DepartmentId:a.privateObjId,Description:a.code,FileUrls:this._getFileUrls(),RemindTime:"",RemindContent:"",RemindType:0,hourDate:a.hourDate,minuteDate:a.minuteDate,extend_user:a.extendUser,CycType:"",CycStartDate:"",CycStartTime:"",CycEndDate:"",CycEndTime:"",ApplyUserId:a.applyUser&&a.applyUser.Id?a.applyUser.Id:0,IsLongTerm:a.isLongTerm,LabId:a.labelId,LabType:a.labelType,PublisherId:a.publisher?a.publisher.Id:0,documents:this._getYFYFile()};if(a.sendUserStatus){var c=this.model.get("principalUser"),d={Email:c.Email,Name:c.Name,Id:c.Id};b.MessageUsers=[d]}var e=a.cycStartHour+":"+a.cycStartMinute,f=a.cycEndHour+":"+a.cycEndMinute;return a.isCycle&&(b.CycType=a.cycType,b.CycStartDate=a.cycStartDay,b.CycStartTime=moment().format("YYYY/MM/DD")+" "+e,b.CycEndTime=moment().format("YYYY/MM/DD")+" "+f,b.CycEndDate=a.cycEndDay,b.IsLongTerm=!1),b},_addBothPhoneNum:function(){var a=this.model.get("telephone"),b=this.model.get("principalUser").Id,c=this.model.get("is_notify"),d=SMSCollection.postSmsNotifyAddNum;d({phoneNum:a,to_user_id:b,is_notify:c})},_getFileUrls:function(){var a=[],b="";return _.each(this.model.get("file"),function(b){b.DfsPath&&a.push(b.DfsPath)}),b=a.join(",")},_getYFYFile:function(){var a=[];return _.each(this.model.get("file"),function(b){if(b.isFromYFY){var c={};c.relatedFileId=b.id,c.name=b.FileName,c.size=b.size,c.fileType=b.MediaType,c.shareCode=b.share_code,c.thumbnailGenerated=b.imageUrl?!0:!1,c.documentSource=3,a.push(c)}}),a},_getParticipators:function(a){var b=new Talent.Collection([]);return _.each(a,function(a){if(a.get("departmentTag")){var a=new Talent.Model({Email:a.get("Name")+":"+a.get("id")+":dep_members",Name:a.get("Name"),Id:a.get("id")});b.add(a)}else{var a=new Talent.Model({Email:a.get("Email"),Name:a.get("Name"),Id:a.get("Id")});b.add(a)}}),b.toJSON()},_renderRichEditor:function(){var a=this,b=this.settings.richEditorOptions.defaultText;this.richEditor=new TRicheditorView({model:this.model,richEditorOptions:this.settings.richEditorOptions}),this.listenTo(this.model,"change:code",function(){var a=this.localStorage,b=this.ui.richEditorContent.html()||"",c=b.toLowerCase();/(<(img|table)[^>]*>)/g.test(c)||(c=c.replace(/(<[^>]*>(<[^>]*>|&nbsp;)?(<\/[^>]*>)?)|&nbsp;/g,""),c=Talent.$.trim(c),""==c&&(b="")),this.model.set("code",b),a.setItem("TaskCreateDes_"+this.userInfo.Id+this.model.get("id"),b),this.ui.richEditorDefaultLabel.html(""),this._changePubBtn()}),this.listenTo(this.richEditor,"focusEditor",function(){this.ui.richEditorBox.addClass("redactor_box_focus"),this.ui.uxRicheditor.addClass("has-focus"),this.bottomView&&this.bottomView.closeView()}),this.listenTo(this.richEditor,"unfocusEditor",function(){this.ui.richEditorBox.removeClass("redactor_box_focus"),this.ui.uxRicheditor.removeClass("has-focus"),this.trigger("desUnfocus",this.model.toJSON())}),this.listenTo(this.richEditor,"emptyCode",function(){this.model.set("code",""),this.ui.richEditorDefaultLabel.html(b)}),this.uxRicheditor.show(this.richEditor),this.ui.richEditorContent=this.$(".redactor_editor"),this.ui.richEditorBox=this.$(".redactor_box"),this.ui.richEditorBox.find("label").length||this.ui.richEditorBox.append("<label></label>"),this.ui.richEditorDefaultLabel=this.$(".redactor_box label");var c=this.localStorage,d=c.getItem("TaskCreateDes_"+this.userInfo.Id+this.model.get("id"));d?(this.richEditor.callMethods("setCode",d),this.model.set("code",d)):this.ui.richEditorDefaultLabel.html(b),this.ui.richEditorDefaultLabel.on("click",function(){a.ui.richEditorContent.trigger("focus")})},_renderBottomView:function(){var a=this;this.bottomView=new TaskCreateBottomView({model:this.model,shape:this.settings.shape,bottomOptions:this.settings.bottomOptions,nameOptions:this.settings.nameOptions,privateRangeOptions:this.settings.privateRangeOptions,parentEl:this.$el}),this.listenTo(this.bottomView,"openAdvancedMode",function(a,b){b.open?this._hideAdvancedMode():this._showAdvancedMode()}),this.listenTo(this.bottomView,"onSubmitError",function(){this._invalidError()}),this.listenTo(this.bottomView,"onSubmit",function(a){this._onSubmitForm(a)}),this.listenTo(this.bottomView,"uploadClose",function(b){a.model.set("file",b)}),this.listenTo(this.bottomView,"resetData",function(){a.model.set(a.initData)}),this.bottomArea.show(this.bottomView)},_renderClassView:function(){this.classView=new TaskCreateClassView({model:this.model,parentEl:this.$el,classOptions:this.settings.classOptions,classDialogOptions:this.settings.classDialogOptions}),this.classArea.show(this.classView)},_renderTaskCreateNameView:function(){this.inputView=new TaskCreateNameView({model:this.model,parentEl:this.ui.uxAddTaskContainer,nameOptions:this.settings.nameOptions}),this.listenTo(this.inputView,"keyup",function(){this._changePubBtn()}),this.listenTo(this.inputView,"submit",function(){this._onSubmitForm()}),this.inputArea.show(this.inputView)},_changePubBtn:function(){if(!this.settings.nameOptions){var a=this.model.get("code");return void this.bottomView.changePubBtnDisable(a&&""!=a?!0:!1)}var b=Talent.$.trim(this.model.get("taskTitle"));this.bottomView.changePubBtnDisable(b&&""!==b?!0:!1)},_renderPrincipleView:function(){this.principleView=new TaskCreatePrincipleView({model:this.model,principalOptions:this.settings.principalOptions,container:this.$el}),this.listenTo(this.principleView,"changePrincipal",function(a){this._changePrincipalAfter(a.user),this.trigger("changePrincipal",this.model.toJSON())}),this.principleArea.show(this.principleView)},_changePrincipalAfter:function(a){if(!this.settings.applyUserOptions)return void this.model.set({principalUser:a});var b=this.model.get("applyUser");if(b&&b.Id==a.Id)return void this.model.set({applyUser:null,isCanReplace:!0,principalUser:a});var c=Talent._.filter(this.participatorCollection.toJSON(),function(b){return b.Id!=a.Id});this.participatorCollection.reset(c),this.model.set("participatorsCount",c.length),a.Id!=this.model.get("principalUser").Id&&this._getApprovalUserData(a.Id),this.model.set({principalUser:a,isCanReplace:a.Id==this.userInfo.Id?!1:!0})},_renderDateView:function(){this.taskDateView=new TaskCreateDateView({model:this.model,parentEl:this.$el,dateOptions:this.settings.dateOptions,dataTimeRangeOptions:this.settings.dataTimeRangeOptions}),this.listenTo(this.taskDateView,"selectDate",function(a){this.trigger("selectDate",a,this.model.toJSON())}),this.taskDateArea.show(this.taskDateView)},_getCurrentUserApproval:function(){var a=this.model.get("applyUser"),b=this.model.get("principalUser").Id;this.settings.applyUserOptions&&!a&&this._getApprovalUserData(b)},_getApprovalUserData:function(a){var b=this,c=OrgCollection.getToUserIdSuperior;c({to_user_id:a}).done(function(a){b.model.set("applyUser",a)})},_renderWorkHourView:function(){this.workHourView=new TaskCreateWorkHourView({model:this.model,parentEl:this.$el,hourDateOptions:this.settings.hourDateOptions,hourDropdownOpitons:this.settings.hourDropdownOpitons}),this.workHourArea.show(this.workHourView)},_renderParticipatorsView:function(){this.participatorView=new TaskCreateParticipatorView({model:this.model,participatorOptions:this.settings.participatorOptions}),this.listenTo(this.participatorView,"toggleAddUser",function(){this._showAddUserArea()}),this.participatorArea.show(this.participatorView)},_showAddUserArea:function(){this.uxExtendArea.show(this.addUserCompositeView),this.ui.uxExtendArea.is(":hidden")||"extend"==this.currentExtend?(this._showExtendArea(),this.currentExtend="adduser"):this._hideExtendArea()},_renderAddUserCompositeView:function(){var a=this;this.addUserCompositeView=new TaskCreateAddUserCompositeView({collection:this.participatorCollection,model:this.model,container:this.$el}),this.listenTo(this.addUserCompositeView,"selectUser",function(b){var c=0;Talent._.each(b,function(a){"department"==a.type?c+=a.totalUserCount:c++}),a.model.set("participatorsCount",c),a.participatorCollection.reset(b)}),this.listenTo(this.addUserCompositeView,"addSelf",function(){this.model.set({replaceRadioChecked:!0,publisher:this.model.get("principalUser")})})},_renderAddExtendUserItemView:function(){this.addExtendUserItemView||(this.addExtendUserItemView=new TaskCreateAddExtendUserView({model:this.model,parentEl:this.ui.uxExtendArea}))},_showExtendPersonArea:function(){this.uxExtendArea.show(this.addExtendUserItemView),this.ui.uxExtendArea.is(":hidden")||"adduser"==this.currentExtend?(this._showExtendArea(),this.addExtendUserItemView.ui.uxInput.focus(),this.currentExtend="extend"):this._hideExtendArea()},_hideExtendArea:function(){this.ui.uxExtendArea.hide(),this.ui.uxRicheditor.removeClass("has-extend")},_showExtendArea:function(){this.ui.uxExtendArea.show(),this.ui.uxRicheditor.addClass("has-extend")},_renderApplyUserView:function(){this.applyUserView=new TaskCreateApplyUserView({model:this.model,applyUserOptions:this.settings.applyUserOptions,parentEl:this.$el,container:this.$el}),this.applyUserArea.show(this.applyUserView)},_renderExternalPersonView:function(){this.externalPersonView=new TaskCreateExternalPersonView({model:this.model,extendPersonOptions:this.settings.extendPersonOptions}),this.listenTo(this.externalPersonView,"showExtendPerson",function(){this._showExtendPersonArea()}),this.externalPersonArea.show(this.externalPersonView),this._renderAddExtendUserItemView()},_renderReplacerView:function(){this.replaceView=new TaskCreateReplaceView({model:this.model,replaceOptions:this.settings.replaceOptions,parentEl:this.$el,container:this.$el}),this.listenTo(this.replaceView,"cancelReplace",function(){var a=this.participatorCollection.findWhere({Id:this.userInfo.Id});a&&this.participatorCollection.remove(a)}),this.listenTo(this.replaceView,"publisherChanged",function(){var a=this.model.get("publisher");this.participatorCollection.remove(this.participatorCollection.findWhere({Id:a.Id}))}),this.replaceArea.show(this.replaceView)},_showAdvancedMode:function(){this.ui.uxTools&&this.ui.uxTools.show(),this.ui.uxRicheditor&&this.ui.uxRicheditor.show()},_hideAdvancedMode:function(){this.ui.uxTools&&this.ui.uxTools.hide(),this.ui.uxRicheditor&&this.ui.uxRicheditor.hide(),this.ui.uxExtendArea.hide()},_tipMessage:function(a,b){var c={msg:"",kclass:"warn",leftBias:0,topBias:0,sureText:"确定",cancelText:"取消",sure:!1,cancel:!1,autoHide:!1,pos:"topCenter",quirkTheme:!1},d=Talent._.extend({},c,b);this.Dialog&&this.Dialog.close(),this.Dialog=new TDialogView({type:"tipsy",quirkTheme:d.quirkTheme,sureText:d.sureText,cancelText:d.cancelText,sure:d.sure,cancel:d.cancel,sureLink:d.sureLink}),d.container.append(this.Dialog.render().$el),this.Dialog.show(a,d.msg,{pos:d.pos,arrow:!1,autoHide:d.autoHide,className:d.kclass,leftBias:d.leftBias,topBias:d.topBias,container:d.container})},onClose:function(){Talent.$("body .redactor_dropdown").remove(),this.Dialog&&this.Dialog.close()}}),TaskItemStatusView=Talent.ItemView.extend({template:jst["task-list/plan-item-status"],className:"tt_changestatusview",events:function(){var a={};return a["click li"]="changeStatusFun",a},templateHelpers:function(){var a=!1,b=this.model.get("isChildTask");return void 0!=typeof b&&(a=b),{isChildTask:a}},initialize:function(){var a=this;Talent.$(document).off("mouseup.Task-Item-Status-View"),Talent.$(document).on("mouseup.Task-Item-Status-View",function(){a.hide()}),this.$el.on("mouseup.Task-Item-Status-View",function(a){a.stopPropagation()})},changeStatusFun:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=b.attr("status");this.hide(),this.model.set("status",parseInt(c)),this.trigger("click:status",this.model.toJSON())},show:function(a,b){Context.setPosition(a,this.$el,b),this.$el.css({position:"absolute","z-index":99}).show()},hide:function(){this.$el.hide()},onClose:function(){Talent.$(document).off("click.Task-Item-Status-View")}}),TaskListItemView=Talent.CompositeView.extend({tagName:"li",className:"planitem",itemViewContainer:".child-list",template:jst["task-list/task-list-item"],modelEvents:{change:"renderAfterCollectData","change:tasks":"_resetCollection"},ui:{kClass:".klass_ttpl"},events:function(){var a={};return a["mouseenter "+this.ui.kClass]="_mouseenterkKlass",a["mouseleave "+this.ui.kClass]="_mouseleavekKlass",a},initialize:function(a){this.i18n=Context.getI18n(),this.settings=Talent._.extend({},a),this.userInfo=Context.getUserInfo(),this.counter=this.model.get("counter"),this.tTipClass=!1,this.tipTitle=!1,delete this.settings.model,delete this.settings.collection,this.settings.childrenModel[this.model.get("taskId")]=this.model;var b=this.model.get("tasks")||[],c=this.model.get("currentDeploy"),d=b.length?this.settings.deployAll:!1;this.model.set({isChildTask:this.settings.isChildTask,detail_checked:this.settings.compositeModel.get("detail_checked")&&this.settings.hasDetailodel,currentDeploy:void 0==c?d:c},{silent:!0});var e=Talent.Collection.extend({initialize:function(){this.model=Talent.Model.extend({idAttribute:"taskId"})}});0!=b.length&&(this.collection=new e(b))},templateHelpers:function(){var a=(this.model.toJSON(),{1:"进行中 ",2:"已完成",3:"已延迟",4:"已取消",0:"未开始",6:"暂停中",5:"未接受"}),b=this.model.get("status"),c=this.model.get("startDate"),d=this.model.get("deadLine"),e=this.model.get("time")?this.model.get("time"):"",f="";f="push-screen-id="+this.model.get("Id");var g=this.model.get("counter");g.workTimeTotal=this.counter.workTimeTotal;var h=Talent._.extend({},this.options,{loginUserId:Context.getUserInfo().Id,StatusTip:a[b],startDate:this.isThisYear(c),deadLine:this.isThisYear(d),fromNow:this._fromNow(d),createDate:this.isThisYear(this.model.get("createDate")),i18n:this.i18n,time:e,url:f,context:Context,counter:g,taskName:this.model.get("taskName")});return delete h.isChildTask,delete h.deployAll,h},onRender:function(){if(this.$(".plan_list_li").first().addClass(this.model.get("currentDeploy")?"border-over":""),this.model.get("isChildTask")){var a=this.model.collection,b=a.length,c=this.model,d=a.indexOf(c);d==b-1&&this.$(".border-left").first().addClass("last")}},_resetCollection:function(){var a=this.model.get("tasks")||[],b=Talent.Collection.extend({initialize:function(){this.model=Talent.Model.extend({idAttribute:"taskId"})}});a.length>0&&(this.collection=new b(a))},_mouseenterkKlass:function(a){var b=this,c=Talent.$(a.currentTarget),d=this.model.get("labelId");d&&"0"!=d&&(c.data("tipsy")?this.tTipClass||c.tipsy("show"):17!=this.model.get("labelType")?(c.tipsy({gravity:$.fn.tipsy.autoNS,html:!0,trigger:"manual",title:function(){var a=b.model.get("labelName");return'<div class="class_tip_content">'+a+"</div>"}}),c.tipsy("show")):(this.tTipClass=!0,LableCollection.getLabelFullName({lableId:d}).done(function(a){b.tTipClass=!1,c.tipsy({gravity:$.fn.tipsy.autoNS,html:!0,trigger:"manual",title:function(){return'<div class="class_tip_content">'+a+"</div>"}}),c.tipsy("show")})))},_mouseleavekKlass:function(a){var b=Talent.$(a.currentTarget);b.data("node")&&b.tipsy("hide")},isThisYear:function(a){if(!a)return"";var b=moment().year(),a=new Date(a),c=moment(a).format("YYYY");return moment(a).format(b==c?"MM/DD":"YYYY/MM/DD")},_fromNow:function(a){var b=moment().year(),c=moment().month()+1,d=moment().date(),a=new Date(a),e=moment(a).format("YYYY"),f=moment(a).format("MM"),g=moment(a).format("DD");return b==e&&c==f?g-d+1:999},itemViewOptions:function(){return Talent._.extend({},this.settings,{isShowKclass:!1,isChildTask:!0})},renderAfterCollectData:function(){this.getCollectionData(),this.render()},getCollectionData:function(){if(this.collection.length>0){this.children.each(function(a){a.getCollectionData()});var a=this.collection.toJSON();this.model.set({tasks:a},{silent:!0})}}}),TaskListView=Talent.CompositeView.extend({defaults:{isShowKclass:!0,isShowOwnerTag:!1,quirkOwnerTag:!1,isShowStar:!0,isShowSetRemind:!1,objType:7,isShowDelete:!1,isChildTask:!1,deployAll:!0,pageSize:50,isShowPercent:!1,isShowCommentTotal:!0,isShowTaskTotal:!0,isShowExperienceTotal:!0,isShowBusinessTripTotal:!0,isShowMeetingTotal:!0,isShowMoreBtn:!1,isShowToggle:!1,hasDetailodel:!1,addChildViewTop:!1,data:!1,classComponentViewOptions:{},requestData:function(){var a=new Talent.$.Deferred;return a}},itemView:TaskListItemView,tagName:"div",className:"tt_planlist",template:jst["task-list/task-list"],itemViewContainer:".list-container",currentPage:1,ui:{submit:".submint",planitem:".planitem",notice:'span[data-name="notice_plan"]',done:".status_ttpl",setMark:'span[data-name="set-mark"]',deletePlan:'span[data-name="plan-delete"]',tipsyNode:"[original-title]",iconCycle:'span[data-name="task-cycle"]',updateKlass:'[data-name="update-klass"]',taskName:'[data-name="taskName"]',packup:'[data-name="packup"]',showMore:'[data-name="showmore"]'},modelEvents:{"change:detail_checked":"render"},events:function(){var a={};return a["click "+this.ui.notice]="_bindNotice",a["click "+this.ui.done]="_changeStatus",a["click "+this.ui.setMark]="_setMark",a["click "+this.ui.deletePlan]="_checkDelete",a["mouseup "+this.ui.deletePlan]="_stopMouseUpEvent",a["click "+this.ui.updateKlass]="_clickUpdateKlass",a["mouseup "+this.ui.updateKlass]="_stopMouseUpEvent",a["click "+this.ui.taskName]="_onClickName",a["mouseenter "+this.ui.tipsyNode]="_showTipHandler",a["mouseleave "+this.ui.tipsyNode]="_hideTipHandler",a["mouseenter "+this.ui.iconCycle]="_showTitle",a["mouseleave "+this.ui.iconCycle]="_hideTipHandler",a["click "+this.ui.packup]="_togglePackHandler",a["click "+this.ui.showMore]="_showMore",a},initialize:function(a){var b=this;this.childrenModel={},this.settings=_.extend({},this.defaults,a,{childrenModel:this.childrenModel,compositeModel:this.model});var c=this.options.classComponentViewOptions||{};this.settings.classComponentViewOptions=Talent._.extend({},this.defaults.classComponentViewOptions,c),this._customSettings(),this.settings.addChildViewTop&&(this.addChildView=this.addChildViewTop),delete this.settings.model,delete this.settings.collection,Talent.app.vent.on("GlobalTaskListItemModel",function(a,c){var d=b.childrenModel[a];
d&&d.set(c)}),this._initData(),this.model.set("currentPage",this.currentPage)},_customSettings:function(){var a=Context.getGlobal("tenant_function");if(a&&"object"==typeof a){var b=a.IsUseMeet,c=a.IsUseBusinessTrip;this.settings.isShowMeetingTotal=b,this.settings.isShowBusinessTripTotal=c}},_initData:function(){return this.settings.data?void this._addDataToCollection(this.settings.data):void this._requestData().done(function(a){self._addDataToCollection(a)})},_requestData:function(){var a=new Talent.$.Deferred;return this.settings.requestData(this.model.toJSON()).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a},_addDataToCollection:function(a){var a=a||options.data,b=Talent.Collection.extend({initialize:function(){this.model=Talent.Model.extend({idAttribute:"taskId"})}});this.collection=new b;var a=this._formatData(a||[]);this.collection.reset(a)},itemViewOptions:function(){return delete this.settings.emptyView,this.settings},addChildViewTop:function(a){var b=this.getItemView(a),c=this.collection.indexOf(a),d=Marionette.getOption(this,"itemViewOptions");_.isFunction(d)&&(d=d.call(this,a,c));var e=this.buildItemView(a,b,d);this.addChildViewEventForwarding(e),this.children.add(e),e.render(),this.$el.find(this.itemViewContainer).children("li:first-child").length?this.$el.find(this.itemViewContainer).children("li:first-child").before(e.el):this.$el.find(this.itemViewContainer).append(e.el),this._isShown&&Marionette.triggerMethod.call(e,"show"),this.triggerMethod("after:item:added",e)},onRender:function(){this.$(".planitem").first().css({borderTop:"none"});var a=this.settings.isShowMoreBtn;a||this.hideMoreBtn()},_showMore:function(a){var b=this.$(a.currentTarget),c=this;this.isLoading||(b.find("span").text("加载中..."),this.currentPage+=1,this.model.set("currentPage",this.currentPage),this.settings.data?this.trigger("showMore",b,this.currentPage,this._formatData):this._requestData().done(function(a){var a=c._formatData(a);c.collection.add(a),c.trigger("showMore",b,this.currentPage,this._formatData)}),this.isLoading=!0)},loadingCompelte:function(){this.isLoading=!1,this.ui.showMore.find("span").text("查看更多")},hideMoreBtn:function(){this.ui.showMore.hide()},showMoreBtn:function(){this.ui.showMore.show()},_formatData:function(a){function b(c){Talent._.each(c,function(c){var d=c.taskId;if(d){var e=Talent._.where(a,{parentTaskId:d});if(e=Talent._.compact(e),!e.length)return void(c.tasks=[]);c.tasks=e,Talent._.each(e,function(a){a.level=c.level+1}),b(e)}})}var a=a||[];if(a.length){var c=Talent._.where(a,{parentTaskId:null})||[];return Talent._.each(c,function(a){a.level=1}),b(c),c}},_togglePackHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=this._getChildModelByNode(b),d=c.toJSON();d.tasks&&d.tasks.length?c.set({currentDeploy:!d.currentDeploy}):this.trigger("openSub",b,c,this._formatData)},_setMark:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=this,d=this._getChildModelByNode(b);if(d){var e=!d.get("isMark"),f=d.get("taskId");if(e)var g=1;else var g=2;PlanCollection.postPlanSetMark({plan_id:f,type:g}).done(function(){Talent.$(b).tipsy("hide"),d.set("isMark",e)}).fail(function(a){TipDialogView(b,a,{container:c.$el,topBias:15,pos:"bottomRight",className:"warn"})})}},_bindNotice:function(a){a.stopPropagation();{var b=Talent.$(a.currentTarget);b.find(".notice")}this.setNoticeView&&this.setNoticeView.close(),this.setNoticeView=new SetNoticeView,this.listenTo(this.setNoticeView,"cancelRemind",function(){var a=this._getChildModelByNode(b);a.set("isRemind",!1)}),this.listenTo(this.setNoticeView,"sure",function(a,c){var d=this._getChildModelByNode(b);d.set({isRemind:!0,time:Context.formatDate(c.time)})}),this.$el.append(this.setNoticeView.render().el),this.setNoticeView.setPosition(b,{leftBias:5,topBias:8,container:this.$el,pos:"bottomRight",caretBias:229})},_changeStatus:function(a){a.stopPropagation();var b=this,c=Talent.$(a.currentTarget),d=this._getChildModelByNode(c);d.get("editStatusable")&&(this.planItemStatusView&&this.planItemStatusView.close(),this.planItemStatusView=new TaskItemStatusView({model:new Talent.Model({status:d.get("status"),id:d.get("taskId"),isChildTask:d.get("isChildTask")})}),this.listenTo(this.planItemStatusView,"click:status",function(a){d.get("status")!=a.status&&PlanCollection.PutUpdateStatus({plan_item_id:a.id,Status:a.status}).done(function(){2==a.status&&d.get("isAddExperience")?b._renderSummaryView(c,d,a):d.set("status",a.status)}).fail(function(a){TipDialogView(c,a,{container:b.$el,topBias:-30,className:"warn"}),d.set("isApply",!0)})}),this.planItemStatusView.render(),this.$el.append(this.planItemStatusView.$el),this.planItemStatusView.show(c,{container:this.$el,pos:"bottomCenter",topBias:8}))},_stopMouseUpEvent:function(a){a.stopPropagation()},_checkDelete:function(a){var b=this,c=Talent.$(a.currentTarget);ConfirmDialogView(c,"此操作不可恢复，您确定删除吗？",{pos:"bottomRight",type:"tipsy",className:"ask",container:this.$el,sure:function(){var a=c.attr("data-id");b._sureDelFun(c,a)}})},_sureDelFun:function(a,b){var c=this,d=this.childrenModel[b];PlanCollection.deleteData({plan_item_id:b}).done(function(){d.collection.remove(d),c.trigger("delete",a,d)}).fail(function(b){TipDialogView(a,b,{container:c.$el,topBias:-25,pos:"bottomRight",className:"warn"})})},_clickUpdateKlass:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=this._getChildModelByNode(b),d=b.attr("data-id"),e=b.attr("data-type"),f=b.attr("data-lab");this._renderKlassView(b,"update",{id:d,label_type:e||0,label_id:f||null,isShowWorkLable:c.get("IsShowWorkLable"),model:c})},_renderKlassView:function(a,b,c){var d=c&&c.label_type&&0!=c.label_type?c.label_type:17,e=this.settings.classComponentViewOptions;e.model=new Talent.Model({type:d}),this.classComponentView&&this.classComponentView.close(),this.classComponentView=new ClassComponentView(e),this.listenTo(this.classComponentView,"submit",function(d){0!=d.id&&("update"==b?this._requestUpdateKlass({planItem_id:c.id,label_type:d.type,label_id:d.id,label_name:d.name},a):c.model.set({label_type:d.type,label_id:d.id,label_name:d.name}))}),this.listenTo(this.classComponentView,"new",function(a){LableCollection.postAddLableData({obj_id:this.userInfo.Id,obj_type:"1",name:a.name,parent_id:a.parent_id}).done(function(b){a.call(b)})}),this.listenTo(this.classComponentView,"reset",function(){c.label_type&&this._requestUpdateKlass({planItem_id:c.id,label_type:0,label_id:null,label_name:""},a)}),this.$el.append(this.classComponentView.render().el),this.classComponentView.show(a,{container:this.$el,pos:"bottom",leftBias:-1})},_requestUpdateKlass:function(a,b){var c=this,d=a.planItem_id,e=a.label_id,f=a.label_type,g=a.label_name;PlanCollection.postUpdateLable({planItem_id:d,lable_id:e,lable_type:f}).done(function(){var a=c._getChildModelByNode(b);a.set({labelId:e,labelType:f,labelName:g})}).fail(function(a){TipDialogView(b,a,{container:c.$el,topBias:-30})})},_renderSummaryView:function(a,b,c){var d=this;this.summaryView&&this.summaryView.close(),this.summaryView=new ExperienceView({id:b.get("taskId"),requestSubmit:function(a,e){var f=new Talent.$.Deferred;return ExperienceCollection.addShare({ObjId:b.get("taskId"),ObjType:7,Content:e.code,FileUrls:a.FileUrls,StartDate:e.startDate,EndDate:e.endDate,DocumentModels:a.documents}).done(function(a){setTimeout(function(){d.summaryView.close()},1e3);var e=Talent._.clone(b.get("counter"));e.experienceTotal+=1,b.set({counter:e}),b.set("status",c.status),f.resolve(a)}).fail(function(a){f.reject(a)}),f}}),this.listenTo(this.summaryView,"hide",function(){b.set("status",c.status)}),this.$el.append(this.summaryView.render()),this.summaryView.show(a,{container:this.$el,topBias:-30})},_showTipHandler:function(a){var b=Talent.$(a.currentTarget);b.data("tipsy")||b.tipsy({gravity:$.fn.tipsy.autoNS,tirgger:"manual"}),b.tipsy("show")},_hideTipHandler:function(a){var b=Talent.$(a.currentTarget);b.tipsy("hide"),this.tipTitle=!1},_showTitle:function(a){a.stopPropagation();var b=this,c=Talent.$(a.currentTarget),d=c.attr("data-cys");return this.tipTitle=!0,c.data("tipsy")?void c.tipsy("show"):void TaskCollection.getCycleTask({cycle_id:d}).done(function(a){var d=a.CycType,e=a.CycStartDate,f=a.CycEndDate,g={0:"零",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七"},h={1:"每天",2:"每个工作日",3:"每周"+(e==f?g[e]:g[e]+"-"+g[f]),4:"每月"+(e==f?e:e+"-"+f)};c.tipsy({gravity:$.fn.tipsy.autoNS,title:function(){return h[d]},trigger:"manual"}),b.tipTitle&&c.tipsy("show")}).fail(function(a){TipDialogView(b.ui.icon_cycle,a,{container:b.$el,topBias:-15})})},_getChildModelByNode:function(a){var b=a.attr("data-id");if(!b){var c=JSON.parse(a.attr("data"));b=c.objid}var d=this.childrenModel[b];return d},_onClickName:function(a){a.stopPropagation(),a.preventDefault();var b=this,c=b.$(a.currentTarget),d=c.attr("id"),e=this.childrenModel[d];Talent.app.vent.trigger("global-pull-screen",d,"task",e)},onClose:function(){Talent.$(document).off("click.Plan-List-Composite:PlanSetNotice"),this.planItemStatusView&&this.planItemStatusView.close(),this.classComponentView&&this.classComponentView.close(),this.summaryView&&this.summaryView.close(),Talent.app.vent.off("GlobalTaskListItemModel")}}),TaskApplyItemView=Talent.ItemView.extend({defaults:{type:"approval"},className:"apply_item clearfix",template:jst["task-apply/task-apply-item"],initialize:function(a){this.settings=Talent._.extend({},this.defaults,a),this.i18n=Talent.Context.getI18n(),this.model.set("state",1)},ui:{sureItem:'button[data-name="sure-item"]',cancelItem:'button[data-name="cancel-item"]'},events:function(){var a={};return a["click "+this.ui.sureItem]="_checkSureNode",a["click "+this.ui.cancelItem]="_onClickCancel",a},onRender:function(){this.i18n=Context.getI18n();var a=this;setTimeout(function(){a._setApplyTreeHeight()},0)},_setApplyTreeHeight:function(){var a=this.$el.height();if(this.$el.find(".apply_end").length){var a=a-27;this.$el.find(".apply_tree").css({height:a+"px"})}},templateHelpers:function(){var a=this.model.toJSON(),b=a.applyType,c=a.publishUser,d=a.planName,e=a.oldLableName,f=a.planId,g=this.i18n.task_1;if(e||(e="未分类"),d='<span id ="'+f+'">'+d+"</span>",1==b){var h=this.model.get("oldName"),i=this.model.get("newName");h='<span id ="'+f+'">'+h+"</span>",i='<span id ="'+f+'">'+i+"</span>";var j=c.name+":将"+g+"名称<span>"+h+"</span>改成<span>"+i+"</span>"}else if(2==b){var k=this.model.get("isNewLong");if(k)var l="长期";else var l=this.model.get("newDeadLine");var m=this.model.get("isOldLong");if(m)var n="长期";else var n=this.model.get("oldDeadLine");if(this.model.get("oldStartDate")||n)var j=c.name+":将"+g+d+"起止时间<span>"+this.model.get("oldStartDate")+" - "+n+"</span>修改成<span>"+this.model.get("newStartDate")+" - "+l+"</span>";else var j=c.name+":将"+g+d+"起止时间修改成<span>"+this.model.get("newStartDate")+" - "+l+"</span>"}else if(3==b)var j=c.name+":将"+g+d+"分类<span>"+e+"</span>改成<span>"+this.model.get("newLableName")+"</span>";else if(4==b)var j=c.name+":将"+g+d+"<span>删除了</span>";else if(5==b)var j=c.name+":将"+g+d+"状态<span>"+this.model.get("oldState")+"</span>改成<span>"+this.model.get("newState")+"</span>";else if(15==b){var o=this.model.get("oldDescription");if(!o&&this.model.get("newDescription"))var j=c.name+":给"+g+d+"添加了描述与备注<span>"+this.model.get("newDescription")+"</span>";else if(!this.model.get("newDescription")&&o)var j=c.name+":将"+g+d+"的描述与备注<span>删除了</span>";else var j=c.name+":将"+g+d+"描述与备注<span>"+o+"</span>改成<span>"+this.model.get("newDescription")+"</span>"}var p=moment(new Date(this.model.get("planDate"))),q=p.format("YYYY/MM/DD"),r=p.format("HH:mm"),s=u="",t=this.model.get("applyDate");if(t)var s=moment(t,"YYYY/MM/DD HH:mm").format("YYYY/MM/DD"),u=moment(t,"YYYY/MM/DD HH:mm").format("HH:mm");return{txtTemplate:j,startDate:Context.formatDate(q),startHour:r,endDate:Context.formatDate(s),endHour:u,type:this.settings.type}},onShow:function(){},_onClickCancel:function(a){var b=this,c=Talent.$(a.currentTarget),d='<div class="task-apply-rejected-titaw"><h2>驳回理由</h2><textarea class="apply_desc" data-name="task-apply-reject-input"></textarea></div>';ConfirmDialogView(c,d,{pos:"bottomRight",type:"dialog",container:this.$el,topBias:-38,sure:function(){b.model.set("state",3),b._requestUpdateState()}})},_checkSureNode:function(a){var b=this,c=Talent.$(a.currentTarget);ConfirmDialogView(c,"您确定同意该审批项吗？",{pos:"bottomRight",className:"ask",container:this.$el,topBias:-38,sure:function(){b.model.set("state",2),b._requestUpdateState()}})},_requestUpdateState:function(){var a=this,b=this.$el.find("textarea[data-name=task-apply-reject-input]"),c="";b.length&&(c=Talent.$.trim(b.val())),ApplyCollection.UpdateState({ApplyIds:this.model.get("applyId"),State:this.model.get("state"),ApplyContent:c}).done(function(){a.trigger("delete")}).fail(function(b){TipDialogView(a.ui.sureItem,b)})}}),TaskApplyView=Talent.CompositeView.extend({defaults:{type:"approval",isShowAllButton:!1},itemView:TaskApplyItemView,itemViewContainer:"div[data-name=task-apply-list]",template:jst["task-apply/task-apply"],className:"task-apply-titaw",ui:{taskName:'[data-name="plan-name"]',buttonAll:"[data-name=task-apply-all]",buttonSure:"[data-name=task-apply-sure-all]",buttonCancel:"[data-name=task-apply-cancel-all]"},events:function(){var a={};return a["click "+this.ui.taskName]="_onClickName",a["click "+this.ui.buttonSure]="_onSure",a["click "+this.ui.buttonCancel]="_onCancel",a},templateHelpers:function(){return{isShowAllButton:this.settings.isShowAllButton}},initialize:function(a){this.settings=Talent._.extend({},this.defaults,a)},onRender:function(){var a=this;this.on("itemview:delete",function(b){a.collection.remove(b.model)}),this.collection.length>1&&this.ui.buttonAll.show()},itemViewOptions:function(){return{type:this.settings.type}},_onSure:function(a){var b=this,c=Talent.$(a.currentTarget);ConfirmDialogView(c,"您确定同意全部审批项吗？",{pos:"bottomRight",className:"ask",container:this.$el,topBias:-38,sure:function(){b.model.set("state",2),b._requestUpdateState()}})},_onCancel:function(a){var b=this,c=Talent.$(a.currentTarget);ConfirmDialogView(c,"您确定驳回全部审批项吗？",{pos:"bottomRight",className:"ask",container:this.$el,topBias:-38,sure:function(){b.model.set("state",3),b._requestUpdateState()}})},_requestUpdateState:function(){var a=this,b=this.collection.toJSON(),c=Talent._.pluck(b,"applyId")||[];ApplyCollection.UpdateState({ApplyIds:c.join(","),State:this.model.get("state"),ApplyContent:""}).done(function(){a.collection.reset([]),a.ui.buttonAll.hide()}).fail(function(b){TipDialogView(a.ui.sureItem,b)})},onClose:function(){}}),ErrorLayoutMessageView=Talent.ItemView.extend({template:jst["task-detail/error-layout-message"],defaults:{content:"暂时没有查看权限",subContent:"",isShowClose:!0},initialize:function(){var a=this;this.settings=Talent._.extend({},this.defaults,this.options),Talent.$(window).on("resize.planDetailLayout",function(){a.setPosition()})},ui:{close:".close_pdtb"},events:function(){var a={};return a["click "+this.ui.close]="onCloseHandler",a},templateHelpers:function(){return{content:this.settings.content,subContent:this.settings.subContent||"",isShowClose:this.settings.isShowClose}},onCloseHandler:function(){this.trigger("errorLayoutMessageView:close")},onRender:function(){this.setPosition()},setPosition:function(){{var a=Talent.$(window).height(),b=Talent.$("._tt_header").outerHeight();Talent.$(document).scrollTop()}Talent.$(this.el).css({height:a-b}),this.$el.css({height:a-b,"overflow-y":"scroll"})}}),ShareRangeItemView=Talent.ItemView.extend({tagName:"li",className:"item_sr",template:jst["task-detail/share-range-item"],onRender:function(){var a=this;1==this.model.get("Type")&&this.$el.addClass("disable"),this.$el.tipsy({gravity:"s",title:function(){var b=a.$el.hasClass("disable")?"":"删除：";return b+a.model.get("User").Name}})}}),ShareRangeEmptyView=Talent.ItemView.extend({template:Talent._.template("<%= emptyText%>"),defaults:{},tagName:"li",className:"empty_sr",templateHelpers:function(){return this.settings},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options)}}),ShareRangeView=Talent.CompositeView.extend({className:"tt_sharerange",defaults:{deleteTip:"您确定把ta从关注者里删除？",addBtnTips:"添加关注者",title:"关注者",isEdit:!1,emptyText:"暂无关注者",userSelectOptions:{viewType:"single",input:!0,stringLen:{Name:34,Email:30,DepartmentName:30},bias:{left:30,top:-302},muti:!0}},template:jst["task-detail/share-range"],itemView:ShareRangeItemView,itemViewContainer:"ul",ui:{add:"a[data-name=add]","delete":"span[data-name=delete]"},events:{"mouseenter li":"_liOverHandler","mouseleave li":"_liOutHandler","click span[data-name=delete]":"_deleteShareItem"},modelEvents:{"change:isEdit":"render"},templateHelpers:function(){return this.settings},onRender:function(){var a=this;if(!this.collection.length&&!this.model.get("isEdit")){var b=new ShareRangeEmptyView({emptyText:this.settings.emptyText});this.$el.find("ul").html(b.render().$el)}this._addShareUser(),this.ui.add.tipsy({gravity:"s",title:function(){return a.settings.addBtnTips}})},initialize:function(){this.settings=Talent.$.extend({},this.defaults,this.options),this.settings.userSelectOptions=Talent._.extend({},this.defaults.userSelectOptions,this.options.userSelectOptions),this.model.set(this.settings)},appendHtml:function(a,b){this.model.get("isEdit")?a.$el.find("li:last").before(b.el):(b.$el.addClass("disable"),b.$el.find(".del_sr").remove(),a.$el.find("ul").append(b.el))},closeView:function(){this.memberSmemberView.deleteView()},_addShareUser:function(){var a=this,b=this.ui.add;this.memberSmemberView=new UserSelector({collection:new UserSelectorCollection});var c=this.settings.userSelectOptions;c.container=this.$el,this.memberSmemberView.addNode(b,c),b.on("submit",function(c,d){var e,f=[];e=d.data?d.data:[d],Talent._.each(e,function(a){f.push("department"==a.type?{Id:a.id,Name:a.name,Email:a.name+":"+a.id+":dep_members"}:{Id:a.Id,Name:a.Name,Email:a.Email})}),a.trigger("add",b,f)})},_liOverHandler:function(a){var b=Talent.$(a.currentTarget);b.find(".del_sr").show()},_liOutHandler:function(a){var b=Talent.$(a.currentTarget);b.find(".del_sr").hide()},_deleteShareItem:function(a){a.stopPropagation(),a.preventDefault();var b=Talent.$(a.currentTarget),c=b.attr("Id"),d=this;Talent.$(".tipsy").remove(),ConfirmDialogView(b,this.settings.deleteTip,{sure:function(){d.trigger("delete",b,c)},pos:"topCenter",container:this.$el})},onClose:function(){this.delDialog&&this.delDialog.close()}}),TaskAcceptPopView=Talent.ItemView.extend({template:jst["task-detail/task-accept-pop"],className:"_tt_dialog task-accept-pop",defaults:{title:"接受todo",classEditable:!0,dateEditable:!0},modelEvents:{"change:startDate change:endDate change:isLongTerm":"_renderDate"},ui:{sureBtn:"[data-name=task-detail-accept-sure]",cancelBtn:"[data-name=task-detail-accept-cancel]",taskDate:'[data-name="task-detail-accept-date"]',dateConainer:'[data-name="task-detail-accept-date-box"]',dateArea:'[data-name="task-detail-accept-date-area"]'},events:function(){var a={};return a["click "+this.ui.sureBtn]="_surePlanType",a["click "+this.ui.cancelBtn]="_cancelPlanType",a["click "+this.ui.taskDate]="_showDatePop",a},templateHelpers:function(){return{i18n:this.i18n,title:this.settings.title,classEditable:this.settings.classEditable}},initialize:function(a){var b=this;this.settings=Talent._.extend({},this.defaults,a),this.i18n=Talent.Context.getI18n(),$(document).on("mouseup.Task-Accept-Pop-View",function(){b.$el.hide()}),this.$el.on("mouseup.Task-Accept-Pop-View",function(a){a.stopPropagation()})},open:function(a,b){var c={pos:"bottom",topBias:10},b=Talent._.extend({},c,b);Context.setPosition(a,this.$el,b),this.$el.show()},hide:function(){this.$el.hide()},_surePlanType:function(){this.trigger("submit"),this.$el.hide()},_cancelPlanType:function(){this.trigger("cancel"),this.$el.hide()},_showDatePop:function(a){if(this.settings.dateEditable){a&&a.stopPropagation();var b=this.$(a.currentTarget);this.dateTimePickerView&&this.dateTimePickerView.close(),this.dateTimePickerView=new DateTimePickerView({viewType:"date",model:this.model,rangepickerOptions:{timePickerOpens:"left",showLong:!0,format:"YYYY/MM/DD HH:mm",timePicker:!0},isShowDateView:!0,isShowCycleView:!1,isShowLongView:!0,isShowTab:!0}),this.ui.dateConainer.append(this.dateTimePickerView.render().el),this.dateTimePickerView.onShow(),this.dateTimePickerView.show(b,{container:this.ui.dateConainer,pos:"bottom",leftBias:-50})}},_renderDate:function(){var a=this.model.get("startDate"),b=this.model.get("endDate"),c=this.model.get("isLongTerm");this.ui.taskDate.val(a+" - "+(c?"长期":b))},onClose:function(){this.ui.taskDate.data("daterangepicker")&&this.ui.taskDate.data("daterangepicker").remove(),$(document).off("mouseup.Task-Accept-Pop-View")}}),SelectPlanItemView=Talent.ItemView.extend({tagName:"li",template:Talent._.template("<%=_.substring(Name,30,true)%>"),onRender:function(){this.$el.attr("id",this.model.get("Id"))}}),SelectPlanCollectionView=Talent.CompositeView.extend({itemView:SelectPlanItemView,template:Talent._.template(""),tagName:"ul",className:"list-data",hide:function(){this.$el.hide()},show:function(){this.$el.show()},onAfterItemAdded:function(a){this.model.get("taskId")==a.model.get("Id")?a.$el.addClass("active"):a.$el.removeClass("active")}}),SelectPlanTaskView=Talent.ItemView.extend({defaults:{isShowButtomReset:!1,extraId:""},template:jst["task-detail/select-plan-task-relate"],templateHelpers:function(){return{i18n:this.i18n,isShowButtomReset:this.settings.isShowButtomReset}},ui:{task:"div[data-name=plan-relate-task]",year:'div[data-name="plan-relate-year"]',month:'div[data-name="plan-relate-month"]',week:'div[data-name="plan-relate-week"]',taskList:"div[data-name=plan-relate-task-list]",yearList:"ul[data-name=plan-relate-year-list]",monthList:"ul[data-name=plan-relate-month-list]",weekList:"ul[data-name=plan-relate-week-list]",taskDrop:"span[data-name=plan-relate-task-drop]",yearLabel:'div[data-name="plan-relate-year"] label',monthLabel:'div[data-name="plan-relate-month"] label',weekLabel:'div[data-name="plan-relate-week"] label',taskLabel:"label[data-name=plan-relate-task-label]",dropList_li:"ul.list-data li",btnReset:'[data-name="task-relate-reset"]',btnSure:'[data-name="task-relate-sure"]',btnCancel:'[data-name="task-relate-cancel"]'},events:function(){var a={};return a["click "+this.ui.year]="_showDataList",a["click "+this.ui.month]="_showDataList",a["click "+this.ui.week]="_showDataList",a["click "+this.ui.task]="_showDataList",a["click "+this.ui.planName]="_showPlanList",a["click "+this.ui.dropList_li]="_checkoutLiHandler",a["click "+this.ui.btnReset]="_resetHandel",a["click "+this.ui.btnSure]="_sureHandel",a["click "+this.ui.btnCancel]="_cancelHandel",a},initialize:function(a){var b=this;this.settings=Talent._.extend({},this.defaults,a),this.userInfo=Context.getUserInfo(),this.i18n=Context.getI18n(),this.iTask=this.i18n.task_1,this.groupId=0,this.today=moment().format("YYYY/MM/DD"),this.selectPlanCollectionView=new SelectPlanCollectionView({model:this.model}),this.$el.on("click",function(){b._hideAllList()}),this.$el.on("mouseup click",function(a){a.stopPropagation()}),this.Tajax=!1},onRender:function(){this._getPlantList(),this.ui.taskList.html(this.selectPlanCollectionView.render().el)},onShow:function(){this.ui.taskDrop.hide()},_resetHandel:function(a){var b=$(a.currentTarget);this.model.set("taskId",""),this.trigger("reset",b,this.model.toJSON())},_sureHandel:function(a){var b=$(a.currentTarget);this.trigger("sure",b,this.model.toJSON())},_cancelHandel:function(a){var b=$(a.currentTarget);this.trigger("cancel",b,this.model.toJSON())},_checkoutLiHandler:function(a){if(a.stopPropagation(),!this.Tajax){var b=$(a.currentTarget),c=b.attr("id"),d=Talent.$.trim(b.text()),e=this.type,f=this.model.get("date").split("/");switch(e){case"year":this.model.set({year:d,yearId:c,date:d+"/"+f[1]+"/"+f[2]}),this.trigger("clickYear"),this.ui.yearLabel.text(d);break;case"month":var g=Number(c)-1;10>g&&(g="0"+g),this.model.set({month:d,monthId:c,date:f[0]+"/"+g+"/"+f[2]}),this.trigger("clickMonth"),this.ui.monthLabel.text(d);break;case"week":this.model.set({week:d,weekId:c}),this.trigger("clickWeek"),this.ui.dropList_li.removeClass("active"),this._getPlantList(),this.ui.weekLabel.text(d);break;case"task":this.model.set({task:d,taskId:c}),this.ui.taskLabel.text(d)}b.addClass("active"),this._hideAllList()}},_hideAllList:function(){this.ui.yearList.hide(),this.ui.monthList.hide(),this.ui.weekList.hide(),this.selectPlanCollectionView.hide()},_showDataList:function(a){a.stopPropagation();var b=$(a.currentTarget),c=b.attr("data-name"),d=c.split("-")[2];if(this._hideAllList(),this.type=d,"plan-relate-task"==c){if(!this.selectPlanCollectionView.collection.length)return;this.selectPlanCollectionView.show()}else this.ui[d+"List"].show();this.trigger("changeDate",c)},_getPlantList:function(){var a=this;this.Tajax=!0,this.ui.taskLabel.html("加载中……"),PlanCollection.getDataList({to_user_id:this.userInfo.Id,plan_table_id:this.model.get("weekId"),plan_table_type:this.model.get("weekType"),feed_id:"",task_id:this.settings.extraId}).done(function(b){a.Tajax=!1;var c=b.PlanItemCollectionModels||[];Talent._.map(c,function(a){return a.Name=a.Name.replace(/<br\/>/g,""),a}),a.selectPlanCollectionView.collection.reset(c),c.length?(a.ui.taskDrop.show(),a.ui.taskLabel.html("选择"+a.iTask)):(a.ui.taskDrop.hide(),a.ui.taskLabel.html("没有"+a.iTask))}).fail(function(){a.Tajax=!1})}}),SelectPlanTaskRelateView=Talent.ItemView.extend({template:_.template(""),defaults:{title:"关联任务",tri:"",container:"",isShowButtomReset:!1,extraId:""},initialize:function(a){this.userInfo=Context.getUserInfo(),this.settings=Talent._.extend({},this.defaults,a),this.i18n=Context.getI18n(),this.iTask=this.i18n.task_1,this.groupId=0;var b=moment().format("YYYY/MM/DD");this.model.set({date:b,yearId:0}),this._showDialogView(),this.$el.on("mouseup",function(a){a.stopPropagation()})},onRender:function(){try{var a=this;this._getPlanData().done(function(){a._renderSelectPlanTaskView()})}catch(b){alert(b)}},show:function(){this.onRender()},_showDialogView:function(){this.dialogView=ConfirmDialogView(this.settings.tri,this.$el,{type:"dialog",pos:"bottom",container:this.settings.container,sure:!1,cancel:!1}),this.dialogView.$el.on("mouseup",function(a){a.stopPropagation()})},_getPlanData:function(a){var a=a||{},b=a.date||this.model.get("date"),c=(a.group_id||this.model.get("group_id"),this),d=new Talent.$.Deferred;return PlanCollection.getPlan({group_id:0,date:b}).done(function(a){for(var b=a.taglist||[],e=0;e<b.length;e++){var f=b[e].PlanTableListModels,g=[];Talent._.each(f,function(a){14!=a.TagId&&g.push(a)}),b[e].PlanTableListModels=g}var h=Talent._.findWhere(b,{Active:!0})||b[0],i=Talent._.findWhere(h.PlanTableListModels,{Active:!0})||h.PlanTableListModels[0],j=Talent._.findWhere(i.PlanTableModels,{Active:!0})||i.PlanTableModels[0];c.model.set({activeYear:h,activeMonth:i,activeWeek:j,YearList:b,monthList:h.PlanTableListModels,weekList:i.PlanTableModels,yearId:h.GroupId,monthId:i.TagId,weekId:j.PlanTableId,weekType:j.PlanTableType,year:h.GroupName,month:i.TagName,week:j.Name,taskName:"",taskId:""}),d.resolve(b)}),d},_renderSelectPlanTaskView:function(){var a=this;this.selectPlanTaskView=new SelectPlanTaskView({model:this.model,extraId:this.settings.extraId,isShowButtomReset:this.settings.isShowButtomReset}),this.listenTo(this.selectPlanTaskView,"clickYear",function(){this._reloadSelectPlanView("isCheckYear")}),this.listenTo(this.selectPlanTaskView,"clickMonth",function(){this._reloadSelectPlanView("isCheckMonth")}),this.listenTo(this.selectPlanTaskView,"sure",function(b){this._surePlanType(b,a.model.toJSON())}),this.listenTo(this.selectPlanTaskView,"reset",function(b){this.trigger("reset",b,a.model.toJSON()),this.dialogView.hide()}),this.listenTo(this.selectPlanTaskView,"cancel",function(a){this._cancelPlanType(a)}),this.selectPlanTaskView.render(),this.dialogView.show(this.options.tri,this.selectPlanTaskView.$el,{type:"dialog",container:this.settings.container}),this.selectPlanTaskView.onShow()},_reloadSelectPlanView:function(a){var b=this,c=this.model.get("year"),d=this.model.get("monthId")-1;10>d&&(d="0"+d);var e=this.model.get("year")+"/"+d+"/01";moment().year()==c&&moment().month()==d-1&&(e=moment().format("YYYY/MM/DD")),"isCheckYear"==a&&moment().year()==c?e=moment().format("YYYY/MM/DD"):"isCheckYear"==a&&moment().year()!=c?e=this.model.get("year")+"/00/11":"isCheckMonth"==a&&(moment().year()!=c||moment().month()!=Number(d)-1)&&(e=this.model.get("year")+"/"+d+"/00"),this._getPlanData({date:e,group_id:0}).done(function(){b.selectPlanTaskView.render()})},_surePlanType:function(a){var b=this.model.get("taskId");return b?(this.trigger("submit",a,this.model.toJSON()),void this.dialogView.hide()):(TipDialogView(a,"请选择一个"+this.iTask,{pos:"topCenter"}),!1)},_cancelPlanType:function(a){this.trigger("cancel",a,this.model.toJSON()),this.dialogView.hide()}}),TaskDetailUnacceptView=Talent.ItemView.extend({template:jst["task-detail/task-unaccept"],className:"ux_edittask_accept",initialize:function(a){this.options=a,this.i18n=Context.getI18n(),this.userInfo=Context.getUserInfo(),this.StartDate=this.model.get("weekStartDate"),this.EndDate=this.model.get("weekEndDate"),this.model.set({isTransfer:!1,transferUser:""}),this.datePopModel=new Talent.Model},ui:{acceptTask:'a[data-name="accept-task"]',sureTransfer:'a[data-name="sure-transfer"]',cancelTransfer:'a[data-name="cancel-transfer"]',transferTask:'a[data-name="transfer-task"]',uxEdittaskAcceptOther:'div[data-name="ux_edittask_accept_other"]',refuseTask:'[data-name="refuse-task"]',participateTask:'[data-name="participate-task"]',acceptContainer:'[data-name="accept-container"]',acceptArea:'[data-name="accept-area"]'},modelEvents:{"change:isTransfer":"render","change:transferUser":"render"},events:function(){var a={};return a["click "+this.ui.acceptTask]="_showAcceptPop",a["click "+this.ui.sureTransfer]="_sureTransferTask",a["click "+this.ui.cancelTransfer]="_cancelTransferTask",a["click "+this.ui.refuseTask]="_refuseTaskPop",a["click "+this.ui.participateTask]="_participateTaskPop",a},templateHelpers:function(){return{i18n:this.i18n,userInfo:this.userInfo}},onRender:function(){var a=this;this.userSelectorView=new UserSelector({collection:new UserSelectorCollection}),this.userSelectorView.addNode(this.ui.transferTask,this.options.addUserSelectonOptions),this.ui.transferTask.on("submit",function(b,c){b.stopPropagation();var d=a.model.get("principalUser");if(c.Id==d.userId)return void TipDialogView(a.ui.transferTask,"转交他人不能是自己",{className:"warn",pos:"bottomCenter",topBias:-40});var e=a.model.get("applyUser");if(e&&e.userId==c.Id)return void TipDialogView(a.ui.transferTask,"负责人和审批人不能是同一人",{className:"warn",pos:"bottomCenter",topBias:-40});var f=a._formatChangeUser(c);a.model.set("transferUser",f),a.model.set("isTransfer",!0)})},_refuseTaskPop:function(a){a.stopPropagation();var b=this,c=Talent.$(a.currentTarget),d="参与任务可跟踪任务进展，您确定不参与吗？";ConfirmDialogView(c,d,{className:"warn",container:c.parent(),sure:function(){b._requestDeleteParticipator(c)}})},_requestDeleteParticipator:function(a){var b=this;TaskCollection.taskDeleteParticipator({task_id:this.model.get("taskId"),to_user_id:this.userInfo.Id}).done(function(){b.render(),b.trigger("notToJoin",a,b.model.toJSON())}).fail(function(b){TipDialogView(a,b,{className:"warn"})})},_participateTaskPop:function(a){a.stopPropagation();var b=this,c=Talent.$(a.currentTarget),d="确认参与该任务";ConfirmDialogView(c,d,{className:"ask",container:c.parent(),sure:function(){b._requestAccept(c)}})},_requestAccept:function(a){var b=this;TaskCollection.participatorAccept({task_id:this.model.get("taskId")}).done(function(){b.trigger("takeInTask",b.model.toJSON())}).fail(function(b){TipDialogView(a,b,{className:"warn"})})},_showAcceptPop:function(a){a.stopPropagation();var b=this,c=Talent.$(a.currentTarget),d=this.model.get("startDate"),e=this.model.get("deadLine"),f=c.attr("data-type"),g=this.model.get("cycleId")||0;
this.datePopModel.set({startDate:d,endDate:e,labelName:this.model.get("labelName"),labelType:this.model.get("labelType"),labelId:this.model.get("labelId"),isLongTerm:this.model.get("isLongTerm"),cycleId:this.model.get("cycleId")}),this.setTaskDatePop&&this.setTaskDatePop.close(),this.setTaskDatePop=new TaskAcceptPopView({model:this.datePopModel,title:"接受"+this.i18n.task_1,classEditable:"1"==f?!1:!0,createPickerOpens:"left",dateEditable:g?!1:!0}),this.listenTo(this.setTaskDatePop,"submit",function(){TaskCollection.taskAccept({task_id:this.model.get("taskId"),start_date:this.datePopModel.get("startDate"),end_date:this.datePopModel.get("endDate"),parent_task_id:this.datePopModel.get("taskId"),lab_id:this.datePopModel.get("labelId"),lab_type:this.datePopModel.get("labelType"),isLongTerm:this.datePopModel.get("isLongTerm")}).done(function(){b.trigger("takeInTask",b.model.toJSON())}).fail(function(a){TipDialogView(b.ui.acceptTask,a)})}),this.$el.append(this.setTaskDatePop.render().el),this.setTaskDatePop.open(c,{container:this.$el})},_formatChangeUser:function(a){var b={};return b.userId=a.Id,b.avatar=a.UserAvatar,b.name=a.Name,b},_sureTransferTask:function(){var a=this,b=this.model.get("transferUser");TaskCollection.updateTaskPrincipalUser({task_id:this.model.get("taskId"),to_user_id:b.userId}).done(function(){a.trigger("transfer",a.model.toJSON())}).fail(function(b){TipDialogView(a.ui.sureTransfer,b)})},_cancelTransferTask:function(){this.model.set("isTransfer",!1)},onClose:function(){this.setTaskDatePop&&this.setTaskDatePop.close(),this.userSelectorView&&this.userSelectorView.close()}}),TaskDetailActionview=Talent.ItemView.extend({template:jst["task-detail/task-action"],className:"tt_plandetailtopbar",ui:{setTaskNotice:'a[data-name="set-task-notice"]',setTaskStar:'a[data-name="set-task-star"]',setTaskDelete:'a[data-name="set-task-delete"]',setTaskStatus:'li[data-name="task-set-status"]',quitTask:'[data-name="quit-task"]',tipsyNode:"[original-title]",followBtn:'[data-name="follow-btn"]'},modelEvents:{"change:isMark":"render","change:isFollow":"_onFollowChange","change:isRemind":"render"},templateHelpers:function(){var a={0:"未开始",1:"进行中 ",2:"已完成",3:"已延迟",4:"已取消",5:"未接受",6:"暂停中"},b=this.model.get("status");return{StatusTip:a[b]}},events:function(){var a={};return a["click "+this.ui.setTaskStar]="_renderSetStar",a["click "+this.ui.setTaskDelete]="_onDeleteHandler",a["click "+this.ui.setTaskStatus]="_changeTaskStatus",a["mouseup "+this.ui.setTaskStatus]="_stopMouseupHandler",a["click "+this.ui.quitTask]="_onQuitTaskHandler",a["click "+this.ui.setTaskNotice]="_clickRemindHandler",a["mouseup "+this.ui.setTaskNotice]="_stopMouseupHandler",a["mouseenter "+this.ui.tipsyNode]="_showTipHandler",a["mouseleave "+this.ui.tipsyNode]="_hideTipHandler",a["click "+this.ui.followBtn]="_follow",a},initialize:function(a){this.options=a,this.iTask=this.model.get("iTask"),this.userInfo=Context.getUserInfo(),this.model.set({isFollow:6==this.model.get("relation")?!0:!1}),this.isClose=!1},onRender:function(){},_stopMouseupHandler:function(a){a.stopPropagation()},_follow:function(a){function b(){TaskCollection.deleteFollower({taskId:this.model.get("taskId"),toUserId:f.Id}).done(function(){c.model.set({isFollow:!e}),c.trigger("request")})}var c=this,d=this.$(a.currentTarget),e=this.model.get("isFollow"),f=this.userInfo,g=null;a.stopPropagation(),e?(g=Talent._.bind(b,this),ConfirmDialogView(d,'确定取消关注？取消后进展信息将不再<br>推送到"动态"下',{sure:g,className:"ask",container:this.$el,topBias:-30})):TaskCollection.addFollower({taskId:this.model.get("taskId"),followers:[f]}).done(function(){c.isClose||(ConfirmDialogView(d,"关注成功，默认所有进展将推送到动态下。",{cancel:!1,quirkTheme:!0,sureText:"关闭",className:"success",container:this.$el,topBias:-30,sure:function(){}}),c.model.set({isFollow:!e}))}).fail(function(a){TipDialogView(d,a,{pos:"bottom"})})},_onFollowChange:function(){var a=this.ui.followBtn,b=this.model.get("isFollow");a[0].className=b?"icon-task-followed":"icon-task-follow",a.attr("original-title",b?"取消关注":"关注")},_clickRemindHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget);this.setNoticeView&&this.setNoticeView.close(),this.setNoticeView=new SetNoticeView,this.listenTo(this.setNoticeView,"sure",function(){this.model.set("isRemind",!0),b.removeClass("icon-clock-active"),b.addClass("icon-action-alarm-clock-highlight-over")}),this.listenTo(this.setNoticeView,"cancelRemind",function(){this.model.set("isRemind",!1),b.removeClass("icon-clock icon-action-alarm-clock-highlight-over")}),this.$el.append(this.setNoticeView.render().el),this.setNoticeView.setPosition(b,{className:"task-detail-setnotice",topBias:8,leftBias:3,container:this.$el,pos:"bottom"})},_showTipHandler:function(a){var b=Talent.$(a.currentTarget);b.data("tipsy")||b.tipsy({gravity:"s",tirgger:"manual"}),b.tipsy("show")},_hideTipHandler:function(a){var b=Talent.$(a.currentTarget);b.tipsy("hide")},_onDeleteHandler:function(a){a.stopPropagation();var b=this,c=Talent.$(a.currentTarget),d="此操作不可恢复，您确定删除吗？";ConfirmDialogView(c,d,{pos:"bottomCenter",container:this.$el,sure:function(){b.trigger("delete",c,b.model.toJSON())},cancel:!0})},_onQuitTaskHandler:function(a){a.stopPropagation();var b=this,c=Talent.$(a.currentTarget),d="确定退出该任务？";ConfirmDialogView(c,d,{pos:"bottomCenter",container:this.$el,sure:function(){b.trigger("exit",c,b.model.toJSON())}})},_changeTaskStatus:function(a){a.stopPropagation();var b=this,c=Talent.$(a.currentTarget);$(".tipsy").hide(),this.planItemStatusView&&this.planItemStatusView.hide(),this.planItemStatusView=new OperationStatusView({model:new Talent.Model({status:this.model.get("status"),id:this.model.id})}),this.listenTo(this.planItemStatusView,"click:status",function(a){var d=this.model.get("cycleId");return 2==a.status&&d?void ConfirmDialogView(c,"您确定完成此循环"+b.iTask+"吗？完成后不可重启",{container:this.$el,topBias:-30,sure:function(){b.model.set("status",a.status),b._requestUpStatus(a)}}):void this._requestUpStatus(a)}),this.planItemStatusView.render(),this.$el.append(this.planItemStatusView.$el),this.planItemStatusView.show(c,{leftBias:20})},_renderExperience:function(){var a=this;this.experienceView=new ExperienceView({id:a.model.get("taskId"),requestSubmit:function(b,c){var d=new Talent.$.Deferred;return ExperienceCollection.addShare({ObjId:a.model.get("taskId"),Content:c.code,FileUrls:c.file,StartDate:moment().format("YYYY/MM/DD"),EndDate:moment().format("YYYY/MM/DD"),DocumentModels:b.documents}).done(function(b){a.isClose||(a.trigger("changeStatus",a.ui.setTaskStatus,a.model.toJSON()),d.resolve(b))}).fail(function(a){d.reject(a)}),d}}),this.listenTo(this.experienceView,"hide",function(){this.trigger("changeStatus",this.ui.setTaskStatus,this.model.toJSON())}),this.$el.append(this.experienceView.render().el),this.experienceView.show(this.ui.setTaskStatus,{container:this.$el,topBias:-30})},_requestUpStatus:function(a){var b=this,c=this.ui.setTaskStatus;TaskCollection.updateStatus({task_id:this.model.get("taskId"),status:a.status}).done(function(){b.isClose||(b.model.set("status",a.status),1==b.model.get("relation")&&2==a.status?b._renderExperience():b.trigger("changeStatus",b.ui.setTaskStatus,b.model.toJSON()))}).fail(function(a){b.isClose||(b.model.get("applyUser")&&!b.model.get("isApply")&&setTimeout(function(){b.model.set("isApply",!0),b.render()},3e3),TipDialogView(c,a,{pos:"bottom",container:b.$el,topBias:-40}))})},_renderSetStar:function(a){var b=this;$("body .tipsy").remove();var c=!this.model.get("isMark"),d=(Talent.$(a.currentTarget),c?1:2);TaskCollection.taskSetMark({task_id:this.model.get("taskId"),type:d}).done(function(){b.isClose||b.model.set("isMark",c)})},onClose:function(){this.isClose=!0,Talent.$(".tipsy").remove(),this.planItemStatusView&&this.planItemStatusView.close()}}),TaskDetailRelateView=Talent.ItemView.extend({template:jst["task-detail/task-relate"],className:"ux_edittask_plan_share",initialize:function(a){this.i18n=Context.getI18n(),this.options=a,this.userInfo=Context.getUserInfo(),this.datePopModel=new Talent.Model},ui:{editTaskPlan:'a[data-name="edit-task-plan"]',taskName:"[data-name=edit-task-link]",tipsyNode:"[original-title]",text:"[data-name=task-relate-text]"},events:function(){var a={};return a["click "+this.ui.editTaskPlan]="_editTaskHandler",a["mouseup "+this.ui.editTaskPlan]="_stopPropagation",a["click "+this.ui.taskName]="_onClickName",a["mouseenter "+this.ui.tipsyNode]="_showTipHandler",a["mouseleave "+this.ui.tipsyNode]="_hideTipHandler",a},onRender:function(){},templateHelpers:function(){var a=this.model.get("parentName")||"";return a=a.replace(/<br\/>/g,""),{i18n:this.i18n,parentName:_.substring(a,30,!0)}},_stopPropagation:function(a){a.stopPropagation()},_editTaskHandler:function(a){a.stopPropagation();var b=this.model.get("relation");if(1==b||3==b){var c=this.model.get("parentId")||"";this.selectPlanTaskRelateView=new SelectPlanTaskRelateView({tri:this.ui.editTaskPlan,container:this.$el,extraId:this.model.get("taskId"),isShowButtomReset:""!=c?!0:!1}),this.listenTo(this.selectPlanTaskRelateView,"submit",function(a,b){this._requestChangeTask(b,"change")}),this.listenTo(this.selectPlanTaskRelateView,"reset",function(a,b){this._requestChangeTask(b,"reset")}),this.selectPlanTaskRelateView.show()}},_requestChangeTask:function(a,b){var c=this;TaskCollection.changeTask({task_id:this.model.get("taskId"),parent_task_id:a.taskId,old_parent_task_id:this.model.get("parentId")}).done(function(a){c.model.set({parentName:a.parentName,parentId:a.parentId,labelType:a.labelType,labelId:a.labelId,labelName:a.labelName}),c.render()}).fail(function(a){var d=a;"change"==b&&(d="不能关联当前任务"),TipDialogView(c.ui.text,d,{pos:"bottom",container:this.$el})})},_showTipHandler:function(a){var b=Talent.$(a.currentTarget);b.data("tipsy")||b.tipsy({gravity:$.fn.tipsy.autoNS,tirgger:"manual"}),b.tipsy("show")},_hideTipHandler:function(a){var b=Talent.$(a.currentTarget);b.tipsy("hide")},_onClickName:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=b.attr("id");Talent.app.vent.trigger("global-pull-screen",c,"task")},onClose:function(){}}),TaskInfoView=Talent.Layout.extend({template:jst["task-detail/task-info"],regions:{taskDescEdit:'div[data-name="task-detail-descript-edit"]'},modelEvents:{},ui:{taskNameWrap:'div[data-name="task-detail-name"]',taskName:'div[data-name="task-detail-name"] input',taskNameTxt:'div[data-name="task-name"]',taskDesc:'div[data-name="task-detail-descript"]',taskDescAdd:'a[data-name="task-detail-descript-add"]',taskDescEdit:'div[data-name="task-detail-descript-edit"]'},className:"ux_edittask_info_container",templateHelpers:function(){var a=this.model.get("taskName");return this.model.get("editable")&&(a=a.replace(/(\<br\/\>)/g,"\n")),{taskName:a}},events:function(){var a={};return a["mouseenter "+this.ui.taskNameWrap]="_mouseEnterHandler",a["mouseleave "+this.ui.taskNameWrap]="_leaveHandler",a["click "+this.ui.taskNameTxt]="_onTaskNameTxtClick",a["blur "+this.ui.taskName]="_onInputFocusOut",a["keyup "+this.ui.taskName]="_onKeyup",a["mouseenter "+this.ui.taskDesc]="_mouseEnterHandlerA",a["mouseleave "+this.ui.taskDesc]="_leaveHandlerA",a["click "+this.ui.taskDescAdd]="_showRichEditor",a["click "+this.ui.taskDesc]="_showRichEditor",a},initialize:function(a){this.setting=Talent._.extend({},this.defaults,a),this.isClose=!1,this.isShowRich=!1,this.isFocusInName=!1},onRender:function(){},onShow:function(){this.bindResize||(this.bindResize=!0)},_showRichEditor:function(a){a.stopPropagation();var b=this,c=this.model.get("editable");if(c){var d=this.model.get("description")||"";this.ui.taskDesc.hide(),this.ui.taskDescAdd.hide(),this.ui.taskDescEdit.show(),this.isShowDesEdit=!0,this.richEditorView&&this.richEditorView.close(),this.richEditorView=new TRicheditorView,Talent.$(document).off("mouseup.Task-Detail-Info-View"),Talent.$(document).on("mouseup.Task-Detail-Info-View",function(){b.isClose||b.isShowRich&&b._hideRichEditor()}),this.taskDescEdit.show(this.richEditorView),this.ui.taskDescEdit.addClass("input-focus"),this.isShowRich=!0,""!=d&&this.richEditorView.callMethods("setCode","<p>"+d+"</p>")}},_hideRichEditor:function(){if(this.richEditorView&&!this.isClose){var a=this.richEditorView.callMethods("getCode"),b=this.model.get("description");if(!/(<(img|table)[^>]*>)/g.test(a)){var c=a.toLowerCase();c=c.replace(/(<[^>]*>(<[^>]*>|&nbsp;)?(<\/[^>]*>)?)|&nbsp;/g,""),c=Talent.$.trim(c),""==c&&(a="")}this.isShowRich=!1,b!=a?this._requestDes(a):(""==a?this.ui.taskDescAdd.show():this.ui.taskDesc.show(),this.ui.taskDescEdit.hide(),this.isShowDesEdit=!1)}},_requestDes:function(a){var b=this;TaskCollection.UpdateDescription({task_id:this.model.get("taskId"),Description:a}).done(function(){b.isClose||(b.model.set("description",a),b.ui.taskDesc.html(a),""!=a?b.ui.taskDesc.show():b.ui.taskDescAdd.show(),b.ui.taskDescEdit.hide())}).fail(function(a){b.isClose||(TipDialogView(b.ui.taskDescEdit,a,{pos:"topCenter"}),b.render())})},_renderDescription:function(){var a=this.model.get("description");Description?(this.$el.find('div[data-name="ux-redactor-editor"]').html(a),this.ui.uxRedactorEditor.show()):(this.$el.find('div[data-name="ux-redactor-editor"]').html(a),this.$el.find('div[data-name="ux-redactor-editor"]').hide(),this.$el.find('a[data-name="add-task-descript"]').show())},_mouseEnterHandler:function(a){Talent.$(a.target);this.ui.taskDesc.addClass("task-edit"),this.ui.taskNameWrap.removeClass("task-edit")},_leaveHandler:function(a){if(!this.isFocusInName){{Talent.$(a.target)}this.ui.taskNameWrap.addClass("task-edit")}},_mouseEnterHandlerA:function(a){Talent.$(a.target);this.isFocusInName||this.ui.taskNameWrap.addClass("task-edit"),this.ui.taskDesc.removeClass("task-edit")},_leaveHandlerA:function(a){Talent.$(a.target);this.ui.taskDesc.addClass("task-edit")},_onTaskNameTxtClick:function(a){var b=this.model.get("editable");if(b){a.stopPropagation();var c=Talent.$(a.target),d=_.unescape(this.model.get("taskName"));c.hide(),this.ui.taskName.val(d).show().focus(),this.isFocusInName=!0,this.ui.taskNameWrap.removeClass("task-edit").addClass("input-focus")}},_onInputFocusOut:function(a){a.stopPropagation();Talent.$(a.target);this.isFocusInName=!1,this.ui.taskNameWrap.hasClass("input-focus")&&this.ui.taskNameWrap.removeClass("input-focus"),this.ui.taskNameWrap.addClass("task-edit"),this._changeTaskName()},_onKeyup:function(a){a.stopPropagation();var b=Talent.$(a.target),c=Talent.$.trim(b.val());c.length>500&&(c=_.TitaWidget_substring(c,500,!1),b.val(c))},_changeTaskName:function(){var a=this,b=_.escape(Talent.$.trim(this.ui.taskName.val())),c=this.model.get("taskName");return b==c?(this.ui.taskName.hide(),void this.ui.taskNameTxt.show()):(b=Context.encodeScript(b),b=b.replace(/[\n\r]/g,"<br/>"),void TaskCollection.updateTaskName({task_id:this.model.get("taskId"),TaskName:b}).done(function(){a.model.set({taskName:b}),a.ui.taskNameTxt.html(b),a.ui.taskName.hide(),a.ui.taskName.val(""),a.ui.taskNameTxt.show()}).fail(function(b){a.isClose||(a.ui.taskName.hide(),a.ui.taskName.val(""),a.ui.taskNameTxt.show(),TipDialogView(a.ui.taskNameWrap,b,{pos:"topCenter"}))}))},onClose:function(){this.isClose=!0,Talent.$(document).off("click.Task-Detail-Info-View")}}),TaskDetailBaseInfoView=Talent.ItemView.extend({defaults:function(){return{id:"",classDialogOptions:{model:new Talent.Model({type:17}),isShowSearch:!0,isShowProject:this.model.get("labelEditable")}}},template:jst["task-detail/task-base-info"],className:"ux_editask_base",ui:{setTaskDate:'span[data-name="set-task-date"]',taskAddPartnerDelete:"em[data-name=task-detail-parnter-delete]",taskAddPartner:'a[data-name="task-add-partner"]',taskTransferUser:'a[data-name="task-transfer-user"]',applyArea:"[data-name=apply-area]",taskApplyWrap:"span[data-name=task-apply-wrap]",taskApplyAdd:"a[data-name=task-apply-user-add]",taskDeleteApply:"em[data-name=task-apply-user-delete]",taskApplyEdit:"a[data-name=task-apply-user-edit]",taskEditClass:'a[data-name="task-edit-class"]',editCycle:'[data-name="task-edit-cycle-edit"]',cycleText:'[data-name="task-edit-cycle"]',dateArea:"[data-name=date-area]",dateEdit:"a[data-name=task-detail-date-edit]",cycleArea:"[data-name=cycle-area]",cancelCycle:"a[data-name=task-detail-cancel-cycle]",pricalArea:'div[data-name="prical-area"]',classArea:'div[data-name="class-area"]',paticipatorsArea:'div[data-name="participators-area"]',toggle:'div[data-name="task-detail-toggle"]',allInfo:'[data-name="task-detail-all-info"]',kclass:'[data-name="kclass"]',uploaderBtn:"div[data-name=task-detail-attachment-button]",attachemntList:"div[data-name=task-detail-attachment-list]",classContainer:'[data-name="class-container-wrap"]',classText:"[data-name=task-class-text]"},modelEvents:{"change:startDate":"render","change:deadLine":"render","change:principalUser":"render","change:isLongTerm":"render","change:labelName":"render","change:cycleInfo":"render","change:applyUser":"render","change:participators":"render"},events:function(){var a={};return a["click "+this.ui.taskAddPartnerDelete]="_deleteParticipator",a["click "+this.ui.taskDeleteApply]="_deleteApprover",a["mouseenter "+this.ui.dateArea]="_showDateEditNode",a["mouseleave "+this.ui.dateArea]="_hideDateEditNode",a["mouseenter "+this.ui.classContainer]="_showClassNode",a["mouseleave "+this.ui.classContainer]="_hideClassNode",a["mouseenter "+this.ui.cycleArea]="_showcancelCycleNode",a["mouseleave "+this.ui.cycleArea]="_hidecancelCycleNode",a["mouseenter "+this.ui.paticipatorsArea]="_showAddPartnerNode",a["mouseleave "+this.ui.paticipatorsArea]="_hideAddPartnerNode",a["mouseenter "+this.ui.pricalArea]="_showPricalAreaNode",a["mouseleave "+this.ui.pricalArea]="_hidePricalAreaNode",a["mouseenter "+this.ui.applyArea]="_showApplyAreaNode",a["mouseleave "+this.ui.applyArea]="_hideApplyAreaNode",a["click "+this.ui.taskEditClass]="_changeTaskClass",a["mouseup "+this.ui.taskEditClass]="_stopMouseUp",a["click "+this.ui.editCycle]="_editCycleHandler",a["mouseup "+this.ui.editCycle]="_editDateMouseupHandler",a["click "+this.ui.dateEdit]="_editDateHandler",a["mouseup "+this.ui.dateEdit]="_editDateMouseupHandler",a["click "+this.ui.cancelCycle]="_cancleCycleTask",a["mouseup "+this.ui.cancelCycle]="_editDateMouseupHandler",a["click "+this.ui.toggle]="_toggle",a["mouseenter "+this.ui.classText]="_showTipHandler",a["mouseleave "+this.ui.classText]="_hideTipHandler",a},templateHelpers:function(){var a=Number(this.model.get("cycleId")),b=(this.model.get("feedType"),this.model.get("isPrivate")),c=this.model.get("labelType"),d=this.model.get("app")||{},e=d.appType||0,f=0,g=this.model.get("departmentId");if(a>0)var h=this._formateCyCleHtml();c?f=f:g&&(f=15);var i=this.model.get("startDate"),j=this.model.get("deadLine");return{startDate:Context.formatDate(i),deadLine:Context.formatDate(j),cycleHtml:h?h:"",privateText:_.privateTipText(20,b,f,e),isPackUp:this.model.get("isPackUp")}},initialize:function(a){this.settings=Talent._.extend({},this.defaults(),a),this.id=this.settings.id,this.userInfo=Context.getUserInfo(),this.iTask=this.model.get("iTask"),this.isClose=!1,!this.model.get("isAccept")||this.model.get("isAccept")&&!this.model.get("editable")?(this.model.set("isPackUp",!0),this.toggleOpen=!0):(this.model.set("isPackUp",!1),this.toggleOpen=!1),this.model.set({remainTime:this._getRemainTime(this.model.get("deadLine"))}),this.showLabelTipsy=!1},onRender:function(){var a=this;a.hideAddPartnerTimer&&clearTimeout(a.hideAddPartnerTimer),this.hideClassTimer&&clearTimeout(this.hideClassTimer),this.hideDateEditTimer&&clearTimeout(this.hideDateEditTimer),this.hideCancelCycleTimer&&clearTimeout(this.hideCancelCycleTimer),this.hideAddPartnerTimer&&clearTimeout(this.hideAddPartnerTimer),this.hidePricalAreaTimer&&clearTimeout(this.hidePricalAreaTimer),this.hideApplyAreaTimer&&clearTimeout(this.hideApplyAreaTimer),this._changeFZR();var b=this.model.get("applyUser");this._changeSPR(b&&b.name?this.ui.taskApplyEdit:this.ui.taskApplyAdd),this._addParnter(),this._renderAttachmentView(),this._renderAttachmentList(this.model.get("attachments")||[])},closeUserSelect:function(){this.FZR_userSelectorView.deleteView(),this.SPR_userSelectorView.deleteView(),this.CYZ_userSelectorView.deleteView()},_showDateEditNode:function(a){Talent.$(a.currentTarget);clearTimeout(this.hideDateEditTimer),this.ui.dateEdit.show()},_hideDateEditNode:function(a){var b=(Talent.$(a.currentTarget),this);this.hideDateEditTimer&&clearTimeout(this.hideDateEditTimer),this.hideDateEditTimer=setTimeout(function(){b.ui.dateEdit.hide()},500)},_showClassNode:function(a){Talent.$(a.currentTarget);clearTimeout(this.hideClassTimer),this.ui.taskEditClass.show()},_hideClassNode:function(a){var b=(Talent.$(a.currentTarget),this);this.hideClassTimer&&clearTimeout(this.hideClassTimer),this.hideClassTimer=setTimeout(function(){b.ui.taskEditClass.hide()},500)},_showcancelCycleNode:function(a){Talent.$(a.currentTarget);clearTimeout(this.hideCancelCycleTimer),this.ui.cancelCycle.show(),this.ui.editCycle.show()},_hidecancelCycleNode:function(a){var b=(Talent.$(a.currentTarget),this);this.hideCancelCycleTimer&&clearTimeout(this.hideCancelCycleTimer),this.hideCancelCycleTimer=setTimeout(function(){b.ui.cancelCycle.hide(),b.ui.editCycle.hide()},500)},_showAddPartnerNode:function(a){Talent.$(a.currentTarget);clearTimeout(this.hideAddPartnerTimer),this.ui.taskAddPartner.show()},_hideAddPartnerNode:function(a){var b=(Talent.$(a.currentTarget),this),c=this.model.get("participators")||[];c.length&&(this.hideAddPartnerTimer&&clearTimeout(this.hideAddPartnerTimer),this.hideAddPartnerTimer=setTimeout(function(){b.ui.taskAddPartner.hide()},500))},_showPricalAreaNode:function(a){Talent.$(a.currentTarget);clearTimeout(this.hidePricalAreaTimer),this.ui.taskTransferUser.show()},_hidePricalAreaNode:function(a){var b=(Talent.$(a.currentTarget),this);this.hidePricalAreaTimer&&clearTimeout(this.hidePricalAreaTimer),this.hidePricalAreaTimer=setTimeout(function(){b.ui.taskTransferUser.hide()},500)},_showApplyAreaNode:function(a){Talent.$(a.currentTarget);clearTimeout(this.hideApplyAreaTimer),this.ui.taskApplyEdit.show()},_hideApplyAreaNode:function(a){var b=(Talent.$(a.currentTarget),this);this.hideApplyAreaTimer&&clearTimeout(this.hideApplyAreaTimer),this.hideApplyAreaTimer=setTimeout(function(){b.ui.taskApplyEdit.hide()},500)},_showTipHandler:function(a){var b=Talent.$(a.currentTarget),c=this.model.get("labelId"),d=this;return c&&""!=c?void LableCollection.getLabelFullName({lableId:this.model.get("labelId")}).done(function(a){d.isClose||(d.showLabelTipsy=!0,b.tipsy({gravity:"s",tirgger:"manual",title:function(){return a}}),b.tipsy("show"))}):void 0},_hideTipHandler:function(a){if(this.showLabelTipsy){var b=Talent.$(a.currentTarget);b.tipsy("hide")}},_editCycleHandler:function(a){a.stopPropagation();var b=this.model.get("cycleInfo"),c=b.CycStartTime.split(":"),d=b.CycEndTime.split(":");this._renderDatePicker(a,"cycle",{rangepickerOptions:{startDate:this.model.get("startDate"),endDate:this.model.get("deadLine")},isShowDateView:!1,isShowCycleView:!0,isShowLongView:!1,isShowTab:!0,viewType:"cycle",model:new Talent.Model({cycType:b.CycType,cycStartDay:b.CycStartDate,cycEndDay:b.CycEndDate,cycStartHour:c[0],cycStartMinute:c[1],cycEndHour:d[0],cycEndMinute:d[1]}),leftBias:0})},_requestUpdateCycle:function(a){var b=this.model.get("cycleInfo"),c=this,d=moment().format("YYYY-MM-DD");TaskCollection.UpdateCycleTask({cycle_id:this.model.get("cycleId"),CycType:a.cycType,CycStartDate:a.cycStartDay,CycStartTime:d+" "+a.cycStartHour+":"+a.cycStartMinute,CycEndDate:a.cycEndDay,CycEndTime:d+" "+a.cycEndHour+":"+a.cycEndMinute}).done(function(){if(!c.isClose){var d=Talent._.extend({},b,{CycEndDate:a.cycEndDay,CycEndTime:a.cycEndHour+":"+a.cycEndMinute,CycStartDate:a.cycStartDay,CycStartTime:a.cycStartHour+":"+a.cycStartMinute,CycType:a.cycType});c.model.set("cycleInfo",d);var e=c._formateCyCleHtml();c.ui.cycleText.html(e)}})},_editDateHandler:function(a){a.stopPropagation(),this._renderDatePicker(a,"date",{viewType:this.model.get("isLongTerm")?"long":"date",rangepickerOptions:{startDate:this.model.get("startDate"),endDate:this.model.get("deadLine")},isShowCycleView:!1,leftBias:-150})},_editDateMouseupHandler:function(a){a.stopPropagation()},_renderDatePicker:function(a,b,c){a.stopPropagation();var d=Talent.$(a.currentTarget);d.show(),this.dateTimePickerView&&this.dateTimePickerView.close(),this.dateTimePickerView=new DateTimePickerView(c),this.listenTo(this.dateTimePickerView,"sure",function(a,c){"date"==b&&this._requestUpdateDate(c),"cycle"==b&&this._requestUpdateCycle(c)},this),this.$el.append(this.dateTimePickerView.render().el),this.dateTimePickerView.onShow(),this.dateTimePickerView.show(d,{container:this.$el,pos:"bottom",leftBias:c.leftBias})},_requestUpdateDate:function(a){var b=this;TaskCollection.updateTaskDate({task_id:this.id,Deadline:a.endDate,StartDate:a.startDate,IsLongTerm:a.isLongTerm}).done(function(a){b.isClose||(b.model.set(a),b.render())}).fail(function(a){b.isClose||TipDialogView(b.ui.setTaskDate,a,{pos:"topCenter"})})},_renderAttachmentView:function(){var a=['<a href="javascript:void(0);" title="" data-name="file" class="upload_node <%if(!openYFY){%>upload_new_file<%}%>">点击添加</a>',"<%if(openYFY){%>",'<div class="tt_upload_type_container" data-name="upload-type">','<dl class="upload_type_item"><span class="upload_new_file">本地上传</span></dl>','<dl class="upload_type_item"><span id="fc_upload" class="fang_cloud_btn">亿方云</span></dl>',"</div>","<%}%>"].join(""),b=UploaderComponentView.extend({template:Talent._.template(a)}),c=Context.IsOpenYifangyun();this.titaUploadBtn=new b({container:this.$el,openYFY:c}),this.listenTo(this.titaUploadBtn,"uploadEnd",function(a,b){this._requestAddAttachment(b.dfs,b.YFYresp)},this),this.titaUploadBtn.render()},_requestAddAttachment:function(a,b){var c=this;TaskCollection.addAttachment({objId:this.model.get("taskId"),dfsUrls:a.join(","),documents:b}).done(function(a){c.isClose||(c.attachmentListView.collection.add(a),c.model.set("attachments",c.attachmentListView.collection.toJSON()))}).fail(function(){})},_requestDeleteAttachment:function(a){var b=this;TaskCollection.deleteAttachment({task_id:this.id,document_id:a}).done(function(){b.isClose||b.model.set("attachments",b.attachmentListView.collection.toJSON())})},_renderAttachmentList:function(a){this.attachmentListView&&this.attachmentListView.close(),this.attachmentListView=new AttachmentListView({collection:new Talent.Collection(a)}),this.listenTo(this.attachmentListView,"delete",function(a){this._requestDeleteAttachment(a)}),this.ui.attachemntList.html(this.attachmentListView.render().el)},_changeFZR:function(){var a=this,b=this.ui.taskTransferUser;this.FZR_userSelectorView=new UserSelector({collection:new UserSelectorCollection}),this.FZR_userSelectorView.addNode(this.ui.taskTransferUser,{input:!0,muti:!1,container:this.$el}),b.on("submit",function(c,d){var e={name:d.Name,type:0,avatar:d.UserAvatar,userId:d.Id},f=a.model.get("principalUser");return f.userId==e.userId?(b.show(),TipDialogView(b,"转交他人不能是当前负责人",{pos:"topCenter",topBias:26}),void b.css("display","")):(b.show(),ConfirmDialogView(b,"此"+a.iTask+"转交给"+d.Name+"负责？",{pos:"topCenter",topBias:26,leftBias:30,container:b.parent(),sure:function(){a._requestFZR(e)}}),void b.css("display",""))})},_requestFZR:function(a){var b=this;TaskCollection.updateTaskPrincipalUser({task_id:this.id,to_user_id:a.userId}).done(function(){b.isClose||(b.model.set("principalUser",a),b.render(),b.trigger("changFZR",b.ui.taskTransferUser))}).fail(function(a){b.isClose||(b.ui.taskTransferUser.show(),TipDialogView(b.ui.taskTransferUser,a,{pos:"topCenter"}),b.render())})},_changeSPR:function(a,b){if(a){var c={input:!0,muti:!1},b=Talent._.extend({},c,b);b.container=b.container||this.$el;var d="您确定修改审批人？",e=this.model.get("applyUser"),f=this;e&&e.userId&&(d="您确定添加审批人？"),this.SPR_userSelectorView=new UserSelector({collection:new UserSelectorCollection}),this.SPR_userSelectorView.addNode(a,b),a.on("submit",function(b,c){var d={};d.userId=c.Id,d.name=c.Name,d.type=0,d.avatar=c.UserAvatar,f._requestEditApplyUser(a,d)})}},_addParnter:function(){var a=this.ui.taskAddPartner,b=this;this.CYZ_userSelectorView=new UserSelector({collection:new UserSelectorCollection}),this.listenTo(this.CYZ_userSelectorView,"more",function(){a.show()}),this.CYZ_userSelectorView.addNode(a,{input:!0,muti:!0,container:this.$el}),a.on("submit",function(a,c){b._requestAddMember(c)})},_requestAddMember:function(a){var b=this,c=[];a.data?c=a.data:c.push(a);var d=this.model.get("participators"),e=this._formatSelectUserData(c);TaskCollection.taskAddParticipator({task_id:this.id,users:e}).done(function(a){return b.addMemberHasSelf?void b.trigger("addPartner",{users:e,changeLimit:!0}):(Talent._.map(a,function(a){d.push({userId:a.UserId,name:a.Name,avatar:a.Avatar})}),b.model.set("participators",d),b.trigger("addPartner",{users:e,changeLimit:!1}),void b.render())}).fail(function(){TipDialogView(b.ui.taskAddPartner.parents(".partner"),"该联系人已存在",{pos:"topCenter"})})},_formatSelectUserData:function(a){var b=[],c=this;return Talent._.each(a,function(a){"department"==a.type?(b.push({Email:a.name+":"+a.id+":dep_members",Name:a.name,Id:a.id}),a.id==c.userInfo.Id&&(c.addMemberHasSelf=!0)):(b.push({Email:a.Email,Name:a.Name,Id:a.Id}),a.id==c.userInfo.Id&&(c.addMemberHasSelf=!0))}),b},_deleteParticipator:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=b.attr("id");this._requestDeleteParnter(b,c)},_requestDeleteParnter:function(a,b){var c=this;TaskCollection.taskDeleteParticipator({task_id:this.id,to_user_id:b}).done(function(){var a=c.model.get("participators"),d=Talent._.filter(a,function(a){return a.userId!=b});c.model.set("participators",d),b==c.userInfo.Id&&c.trigger("permissionChange")}).fail(function(a){TipDialogView(c.ui.taskAddPartnerDelete,a,{pos:"topCenter"})})},_bindKlassNotice:function(){var a=(this.model.get("labFullName"),this);this.ui.updateKclassLabel.tipsy({gravity:"s",html:!0,title:function(){var b=a.model.get("labFullName");return b?'<div class="class_tip_content">'+a.model.get("labFullName")+"</div>":""}})},_toggle:function(){var a=this.ui.toggle,b=a.find(".icon"),c=a.find(".txt"),d=this.model.get("isPackUp");d?(c.text("属性展开"),b.removeClass("icon-arrow-up").addClass("icon-arrow-down"),this.ui.allInfo.hide(),this.model.set("isPackUp",!1)):(c.text("属性收起"),b.removeClass("icon-arrow-down").addClass("icon-arrow-up"),this.ui.allInfo.show(),this.model.set("isPackUp",!0))},_cancleCycleTask:function(a){var b=this,c=Talent.$(a.currentTarget);ConfirmDialogView(c,"您确定要取消此循环吗？此操作将不可恢复",{pos:"topCenter",container:c.parent(),topBias:26,sure:function(){TaskCollection.cancelCycle({cycle_id:b.model.get("cycleId"),task_id:b.id}).done(function(){b.model.set("cycleId",0),b.model.unset("cycleInfo")})}})},_stopMouseUp:function(a){a.stopPropagation()},_changeTaskClass:function(a){a.stopPropagation();var b=this,c=Talent.$(a.currentTarget),d=this.settings.classDialogOptions;this.classComponentView&&this.classComponentView.close(),this.classComponentView=new ClassComponentView(d),this.listenTo(this.classComponentView,"submit",function(a){0!=a.id&&a.id&&b._requestTaskClass(a)}),this.listenTo(this.classComponentView,"new",function(a){Talent.app.request("Lable:postAddLableData",{obj_id:this.userInfo.Id,obj_type:"1",name:a.name,parent_id:a.parent_id}).done(function(b){a.call(b)})}),this.listenTo(this.classComponentView,"reset",function(){var a={type:0,id:"",name:"未分类"};this._requestTaskClass(a)}),this.ui.classArea.html(this.classComponentView.render().el),this.classComponentView.show(c,{parentEl:this.ui.classContainer,pos:"bottomLeft"})},_requestTaskClass:function(a){var b=this;TaskCollection.updateLable({task_id:this.settings.id,lab_id:a.id,lab_type:a.type}).done(function(){b.isClose||b.model.set({labelType:a.type,labelId:a.id,labelName:a.name})}).fail(function(a){b.isClose||TipDialogView(b.ui.classText,a,{pos:"topCenter",topBias:26})})},_requestEditApplyUser:function(a,b){var c=this;
TaskCollection.updateApplyUser({task_id:this.id,to_user_id:b.userId}).done(function(){if(!c.isClose){{c.model.get("applyUser")}a.hide(),c.model.set({applyUser:b.userId?b:null})}}).fail(function(a){if(!c.isClose){var b=c.model.get("applyUser");!b||!b.userId,TipDialogView(c.ui.taskApplyWrap,a,{pos:"topCenter",topBias:26})}})},_deleteApprover:function(a){a.stopPropagation();var b=this,c=Talent.$(a.currentTarget),d="您确定删除审批人？";ConfirmDialogView(c,d,{pos:"topCenter",topBias:26,container:c.parent(),sure:function(){b._requestEditApplyUser(c,{userId:0})}})},_getRemainTime:function(a){var b=new Date,c=new Date(a),d=Number(c)-Number(b),e=864e5,f=Math.floor(d/e),g=d-e*f,h=b-new Date(b.getFullYear(),b.getMonth(),b.getDate());return g>h&&(f+=1),f+=1},_formateCyCleHtml:function(){var a="",b=this.model.get("cycleInfo"),c=b.CycType;return 1==c?a+="每天 "+b.CycStartTime+" —— "+b.CycEndTime:2==c?a+="每个工作日 "+b.CycStartTime+" —— "+b.CycEndTime:3==c?a+="每周 "+this._getWeek(b.CycStartDate)+" "+b.CycStartTime+" —— "+this._getWeek(b.CycEndDate)+" "+b.CycEndTime:4==c&&(a+="每月"+b.CycStartDate+"日 "+b.CycStartTime+"  —— "+b.CycEndDate+"日 "+b.CycEndTime),a},_getWeek:function(a){var b=["","周一","周二","周三","周四","周五","周六","周日"];return b[a]},onClose:function(){this.isClose=!0,this.classComponentView&&this.classComponentView.close(),this.FZR_userSelectorView&&this.FZR_userSelectorView.close(),this.SPR_userSelectorView&&this.SPR_userSelectorView.close(),this.CYZ_userSelectorView&&this.CYZ_userSelectorView.close(),this.cycleTaskView&&this.cycleTaskView.close()}}),TaskDetailTrackView=Talent.Layout.extend({defaults:{id:""},tagName:"div",template:jst["task-detail/task-track"],regions:{trakList:"div[data-name=task-detail-task-track]"},initialize:function(a){this.settings=Talent._.extend({},this.defaults,a)},events:function(){var a={};return a},onShow:function(){this._renderTrackListView()},_renderTrackListView:function(){if(!this.feedTrackView){{var a=this;this.model.get("feedOperations")}this.feedTrackView=new FeedTrackView({model:this.model,defaultCount:5}),this.listenTo(this.feedTrackView,"showAll",function(){CommentV2.getCommentGet({feed_id:a.settings.id,comment_type:1}).done(function(b){a.feedTrackView.model.set("comments",b.comments)})}),this.trakList.show(this.feedTrackView)}},onClose:function(){}}),TaskDetailShareListItemView=Talent.ItemView.extend({tagName:"li",className:"task_item clearfix",template:jst["task-detail/task-share-list-item"],ui:{shareDelete:'[data-name="share-delete"]',attachment:"div[data-name=task-detail-share-attachment]",cont:'div[data-name="task-detail-share-edit"]',rich:"div[data-name=task-detail-share-rich]",time:"[data-name=task-detail-share-time]"},templateHelpers:function(){var a=this._formatDate();return{dateText:a}},initialize:function(){this.close=!1},events:function(){var a={};return a["click "+this.ui.shareDelete]="_checkShare",a["click "+this.ui.cont]="_eidtHandler",a["mouseup "+this.ui.cont]="_stopMouseupHandler",a["click "+this.ui.time]="_showTimePicker",a},modelEvents:{"change:startDate":"render","change:endDate":"render","change:code":"render"},onRender:function(){this._renderAttachmentList()},_stopMouseupHandler:function(a){a.stopPropagation()},_formatDate:function(){var a=this.model.get("startDate"),b=this.model.get("endDate");a=Context.formatDate(a),b=Context.formatDate(b);var c=a;return a!=b&&(c=a+"-"+b),c},_showTimePicker:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=b.attr("id");startDate=this.model.get("startDate"),endDate=this.model.get("endDate"),this.dateTimePickerView&&this.dateTimePickerView.close(),this.dateTimePickerView=new DateTimePickerView({isShowTab:!1,rangepickerOptions:{timePicker:!1,startDate:moment(startDate,"YYYY/MM/DD"),endDate:moment(endDate,"YYYY/MM/DD"),format:"YYYY/MM/DD"}}),this.listenTo(this.dateTimePickerView,"sure",function(a,b){this.model.set("startDate",b.startDate),this.model.set("endDate",b.endDate),this._requestEditData(c,b)},this),this.dateTimePickerView.render(),this.$el.append(this.dateTimePickerView.el),this.dateTimePickerView.onShow(),this.dateTimePickerView.show(b,{container:this.$el,pos:"bottom",leftBias:-60,topBias:5})},_requestEditData:function(a,b){ExperienceCollection.editShareDate({experience_id:a,startDate:b.startDate,endDate:b.endDate}).done(function(){})},_eidtHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=this;this.id=b.attr("id"),this.tRicheditorView&&this.tRicheditorView.close(),this.tRicheditorView=new TRicheditorView,this.listenTo(this.tRicheditorView,"focusEditor",function(){this.ui.rich.addClass("input-focus")}),Talent.$(document).off("mouseup.Task-Detail-Info-View"),Talent.$(document).on("mouseup.Task-Detail-Info-View",function(){if(!c.close){var a=c.tRicheditorView.callMethods("getCode");c.model.set("content",a),c.ui.rich.removeClass("input-focus",a),c._requestEditContentShare()}}),this.ui.rich.html(this.tRicheditorView.render().el),this.tRicheditorView.onShow(),this.tRicheditorView.callMethods("setCode","<p>"+this.model.get("content")+"</p>"),b.hide(),this.ui.rich.show(),setTimeout(function(){c.ui.rich.trigger("focus")},10)},_requestEditContentShare:function(){var a=this;ExperienceCollection.editShareContent({experience_id:this.id,content:this.model.get("content")}).done(function(){a.ui.cont&&a.ui.cont.show(),a.ui.cont.html(a.model.get("content")),a.ui.rich&&a.ui.rich.hide()})},_renderAttachmentList:function(){this.attachmentCollection=new Talent.Collection(this.model.get("attachments")||[]),this.attachmentListView&&this.attachmentListView.close(),this.attachmentListView=new AttachmentListView({collection:this.attachmentCollection,isShowDeleted:!1}),this.$el.append(this.attachmentListView.render().$el)},onClose:function(){this.close=!0,Talent.$(document).off("click.Task-Share-List-Item-Share-View")}}),TaskDetailShareListView=Talent.CompositeView.extend({defaults:{id:"",maxLength:5,isShowCreate:!0},className:"tt_share_list_container",itemView:TaskDetailShareListItemView,itemViewContainer:"ul[data-name=task-detail-share-list]",template:jst["task-detail/task-share-list"],templateHelpers:function(){return{isShowCreate:this.settings.isShowCreate}},ui:{more:'[data-name="task-detail-share-more"]',moreText:'[data-name="task-detail-share-more-text"]',moreIcon:'[data-name="task-detail-share-icon"]',deleted:"[data-name=task-detail-share-delete]",newShare:"div[data-name=task-detail-share-new]",newBox:"div[data-name=task-detail-share-new-box]",listBox:"ul[data-name=task-detail-share-list]"},events:function(){var a={};return a["click "+this.ui.newShare]="_newShareHandler",a["click "+this.ui.more]="_moreToggle",a["click "+this.ui.deleted]="_deleteHandler",a},itemViewOptions:function(){return{emptyContext:"需要分解具体的事吗？试试添加新的心得"}},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options),this.allData=this.collection.toJSON(),this.collection.model=Talent.Model.extend({idAttribute:"commentId"}),this.collection.reset(this.allData.slice(0,this.settings.maxLength),{silent:!0}),this.model.set({isShowMore:this.allData.length>this.settings.maxLength?!0:!1,open:!1},{silent:!0}),this.model.get("experienceTotal")||this.model.set({experienceTotal:this.allData.length||0},{silent:!0}),this.$el.on("click",function(a){a.stopPropagation()}),this.childViews={}},onRender:function(){},onBeforeItemAdded:function(a){var b=a.model.get("commentId");this.childViews[b]=a},_deleteHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget);this.id=b.attr("id");var c=this;ConfirmDialogView(b,"此操作不可恢复，您确定删除吗？",{pos:"bottomRight",sure:function(){c._requestDeleted()}})},_requestDeleted:function(){var a=this;ExperienceCollection.deleteShare({obj_id:this.settings.id,experience_id:this.id}).done(function(){var b=a.collection.get(a.id);a.collection.remove(b),a.model.set("experienceTotal",a.model.get("experienceTotal")-1)})},_moreToggle:function(){var a=this.model.get("open"),b=this.ui.moreIcon,c=this.ui.moreText;if(b.removeClass("icon-arrow-down-2t icon-arrow-up-2t"),a){c.text("展开"),b.addClass("icon-arrow-down-2t");{this.allData.slice(0,this.settings.maxLength)}this.collection.reset(this.allData.slice(0,5))}else c.text("收起"),b.addClass("icon-arrow-up-2t"),this.collection.reset(this.allData);this.model.set({open:!a})},_newShareHandler:function(){var a=this;this.taskCreateView||(this.taskCreateView=new TaskCreateView({id:this.settings.id+"_task-share",templateName:"dateRichEditor",requestSubmit:function(b,c){var d=new Talent.$.Deferred;return ExperienceCollection.addShare({ObjId:a.settings.id,Content:c.code,FileUrls:b.FileUrls,StartDate:c.startDate,EndDate:c.endDate,DocumentModels:b.documents}).done(function(b){a.collection.add(b),a.model.set("experienceTotal",a.model.get("experienceTotal")+1),a.ui.newShare.show(),a.ui.newBox.hide(),a.trigger("add"),d.resolve(b)}).fail(function(a){d.reject(a)}),d},dataTimeRangeOptions:{isShowDateView:!0,isShowCycleView:!1,isShowLongView:!1,count:2,timePicker:!1,rangepickerOptions:{format:"YYYY/MM/DD",timePicker:!1}}}),Talent.$(document).off("mouseup.Task-Share-List-Share-View"),Talent.$(document).on("mouseup.Task-Share-List-Share-View",function(){a.ui.newShare&&a.ui.newShare.show(),a.ui.newBox.hide()}),this.$el.off("mouseup.Task-Share-List-Share-View"),this.$el.on("mouseup.Task-Share-List-Share-View",function(a){a.stopPropagation()}),this.ui.newBox.html(this.taskCreateView.render().el)),this.ui.newShare.hide(),this.ui.newBox.show(),this.taskCreateView.ui.richEditorDefaultLabel.trigger("click")},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a),d=Marionette.getOption(this,"itemViewOptions");_.isFunction(d)&&(d=d.call(this,a,c));var e=this.buildItemView(a,b,d);this.addChildViewEventForwarding(e),this.children.add(e),e.render(),this.$el.find(this.itemViewContainer).find("li:first").length?this.$el.find(this.itemViewContainer).find("li:first").before(e.el):this.$el.find(this.itemViewContainer).append(e.el),this._isShown&&Marionette.triggerMethod.call(e,"show"),this.triggerMethod("after:item:added",e)},onClose:function(){Talent.$(document).off("mouseup.Task-Share-List-Share-View"),this.$el.off("mouseup.Task-Share-List-Share-View")}}),TaskDetailShareView=Talent.Layout.extend({defaults:{id:"",isShowCreate:!0},template:jst["task-detail/task-share-detail"],className:"task-detail-share",regions:{taskShareList:'div[data-name="task-detail-share-list"]'},ui:{total:"span[data-name=task-detail-share-total]"},modelEvents:{"change:experienceTotal":"_totalChangeHandler"},_totalChangeHandler:function(){this.ui.total.html(this.model.get("experienceTotal"))},initialize:function(a){this.settings=Talent._.extend({},this.defaults,a),this.model.set("experienceTotal",this.collection.length),this.model.get("isEditAdd")||this.model.get("isEditAdd",!1)},events:function(){var a={};return a},onRender:function(){this._renderTaskShareList()},triggerIn:function(){this.taskDetailShareListView&&this.taskDetailShareListView.ui.newShare.trigger("click")},_renderTaskShareList:function(){var a=this,b=EmptyView.extend({defaults:{emptyContext:"需要分解具体的事吗？试试添加新的心得"}});this.taskDetailShareListView=new TaskDetailShareListView({collection:this.collection,id:this.settings.id,isShowCreate:this.settings.isShowCreate,emptyView:b}),this.taskDetailShareListView.model.on("change:experienceTotal",function(){var b=a.taskDetailShareListView.model.get("experienceTotal");a.model.set("experienceTotal",b)}),this.taskShareList.show(this.taskDetailShareListView)}}),TaskDetailCommentView=Talent.Layout.extend({defaults:{id:"",feedType:""},tagName:"div",template:jst["task-detail/task-feed"],regions:{feedList:"div[data-name=task-detail-task-feed]"},initialize:function(a){this.settings=Talent._.extend({},this.defaults,a)},events:function(){var a={};return a},onShow:function(){this._renderCommentView()},_renderCommentView:function(){var a=new FeedItemView({model:this.model,onlyComment:!0,isInAppPage:!1,mBlogOptions:{defaultValue:"",defaultHide:!1,isShowSendSms:!0},custom:{more:!0,remind:!0,collect:!0,reply:!0},actionMore:{detail:!0,"delete":!0,setTop:!0},isPrivate:!1,privateTipText:"",feedType:this.settings.feedType,feedId:this.settings.id,defaultCount:5});this.feedList.show(a)},onClose:function(){}}),TaskDetailQuickView=Talent.ItemView.extend({template:jst["task-detail/task-quick"],initialize:function(){this.i18n=Context.getI18n(),this.map=[{key:"task-apply",name:"审批",icon:"apply",ui:"applyBox",isShow:this.model.get("applys")},{key:"task-list",name:this.i18n.task_1,icon:"task",ui:"task",isShow:this.model.get("tasks")},{key:"task-work-hour",name:"工时",icon:"hour",ui:"workHour",isShow:this.model.get("workTimes")},{key:"task-meet",name:"会议",icon:"meet",ui:"taskMeet",isShow:this.model.get("meets")},{key:"task-travel",name:"出差",icon:"travel",ui:"taskTravel",isShow:this.model.get("businessTrips")},{key:"task-share",name:"心得",icon:"share",ui:"share",isShow:this.model.get("experience")}]},className:"task-quick-do-titaw",ui:{li:"li",quickDoAll:'div[data-name="task-quick-all"]',quickList:'ul[data-name="task-quick-list"]'},events:function(){var a={};return a["click "+this.ui.quickDoAll]="_changeQuickDo",a["click "+this.ui.li]="_clickRadiusDiv",a},templateHelpers:function(){var a=Talent._.where(this.map,{isShow:!0});return{quickList:this.map,isShowAll:a.length?!0:!1}},onRender:function(){this.$el.find("[original-title]").tipsy({gravity:"s"})},_clickRadiusDiv:function(a){var b=Talent.$(a.currentTarget),c=b.attr("data-key"),d=Talent._.findWhere(this.map,{key:c});this.trigger("areaPostion",b,d)},_changeQuickDo:function(a){Talent.$(".tipsy").hide();Talent.$(a.currentTarget);this.ui.quickDoAll.hasClass("ico-all-active")?(this.ui.quickDoAll.removeClass("ico-all-active").attr({"original-title":"收起"}),this.ui.quickList.css({visibility:"visible"})):(this.ui.quickDoAll.addClass("ico-all-active").attr({"original-title":"展开"}),this.ui.quickList.css({visibility:"hidden"}))}}),TaskTaskDetailView=Talent.Layout.extend({template:jst["task-detail/task-task-detail"],defaults:{id:"",isShowCreate:!1},templateHelpers:function(){return{iTask:this.i18n.task_1,total:this.collection.length||0,isShowMore:this.collection.length<6?!1:!0}},collectionEvents:{reset:"_onChangeTotal",add:"_onChangeTotal",remove:"_onChangeTotal"},regions:{addArea:'[data-name="task-detail-task-add"]',listArea:'[data-name="task-detail-task-list"]'},ui:{total:"span[data-name=task-detail-task-total]",more:"[data-name=task-detail-task-more]",moreText:"[data-name=task-detail-task-more-text]",moreIco:"[data-name=task-detail-task-icon]"},events:function(){var a={};return a["click "+this.ui.more]="_showMoreHandler",a},_onChangeTotal:function(){var a=this.collection.length;this.ui.total.html(a),this.model.set("tasks",this.collection.toJSON(),{silent:!0})},initialize:function(a){this.i18n=Talent.Context.getI18n(),this.settings=Talent._.extend({},this.defaults,a),this.isShowMore=!1,this.allData=this.collection.toJSON()},onShow:function(){this.settings.isShowCreate&&this._renderCreateView(),this._renderTaskList()},triggerIn:function(){this.taskListView&&this.$el.find("[data-name=task-create-name]").trigger("focus")},_showMoreHandler:function(a){if(a.stopPropagation(),this.isShowMore){var b=this.allData.slice(0,5);this.taskListView.collection.reset(b),this.ui.moreText.html("展开"),this.ui.moreIco.removeClass("icon-arrow-up-2t").addClass("icon-arrow-down-2t"),this.isShowMore=!1}else this.taskListView.collection.reset(this.allData),this.ui.moreText.html("收起"),this.ui.moreIco.removeClass("icon-arrow-down-2t").addClass("icon-arrow-up-2t"),this.isShowMore=!0},_renderCreateView:function(){var a=this.model.get("labelType"),b=2;4!=a||this.model.get("isPrivate")||(b=1);var c={shape:"line",id:this.settings.id+"_task-task",hourDateOptions:!1,extendPersonOptions:!1,participatorOptions:{showBorderLeft:!1},nameOptions:{showBorderLeft:!1},classOptions:!1,bottomOptions:{isShowPrivateDropDown:17==a||0==a?!0:!1},privateRangeOptions:{privateValue:b},dataTimeRangeOptions:{rangepickerOptions:{startDate:moment().format("YYYY/MM/DD 08:00"),endDate:moment().format("YYYY/MM/DD 18:00")}}};c.requestSubmit=Talent._.bind(this._addTask,this);var d=moment().format("YYYY/MM/DD HH:mm"),e=this.model.get("startDate")||moment().format("YYYY/MM/DD 08:00"),f=this.model.get("deadLine")||moment().format("YYYY/MM/DD 18:00"),g=this.model.get("isLongTerm");moment(d).isBefore(f)&&!g?moment(d).isBefore(e)?(c.dataTimeRangeOptions.rangepickerOptions.startDate=moment(e).format("YYYY/MM/DD HH:00"),c.dataTimeRangeOptions.rangepickerOptions.endDate=f):(c.dataTimeRangeOptions.rangepickerOptions.startDate=moment(d).format("YYYY/MM/DD HH:00"),c.dataTimeRangeOptions.rangepickerOptions.endDate=f):(c.dataTimeRangeOptions.rangepickerOptions.startDate=moment().format("YYYY/MM/DD 08:00"),c.dataTimeRangeOptions.rangepickerOptions.endDate=moment().format("YYYY/MM/DD 18:00")),this.createTaskView=new TaskCreateView(c),this.listenTo(this.createTaskView,"selectDate",function(a,b){(b.startDate<this.model.get("startDate")||b.endDate>this.model.get("deadLine"))&&TipDialogView(a,"超出了母任务时间",{container:this.createTaskView.$el,pos:"bottomRight",topBias:-45})}),this.addArea.show(this.createTaskView)},_addTask:function(a){a.parentTaskId=this.settings.id;var b=this,c=new Talent.$.Deferred;return a.LabId=this.model.get("labelId"),a.LabType=this.model.get("labelType"),TaskCollection.addTask(a).done(function(a){a.tasks=[],a.level=b.model.get("level")+1,b.taskListView.collection.unshift([a]),b.collection.unshift([a]),c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},_renderTaskList:function(){{var a=this;this.model.get("isLongTerm")}this.taskListView=new TaskListView({model:this.model,data:this.allData.slice(0,5),isShowSetRemind:!1,isShowDelete:!0,isShowStar:!0,isShowKclass:!1,isShowOwnerTag:!0,pageSize:5}),this.taskListView.collection.on("remove",function(){a.collection.reset(a.taskListView.collection.toJSON())}),this.listArea.show(this.taskListView)}}),TaskApplyDetailView=Talent.Layout.extend({template:jst["task-detail/task-apply-detail"],defaults:{id:"",isShowAllButton:!1},templateHelpers:function(){return{total:this.collection.length||0}},collectionEvents:{reset:"_onChangeTotal",add:"_onChangeTotal",remove:"_onChangeTotal"},regions:{listArea:'[data-name="task-detail-apply-list"]'},ui:{total:"span[data-name=task-detail-apply-total]"},_onChangeTotal:function(){var a=this.collection.length;this.ui.total.html(a)},initialize:function(a){this.i18n=Talent.Context.getI18n(),this.settings=Talent._.extend({},this.defaults,a)},onShow:function(){this._renderList()},_renderList:function(){var a=(this.model.get("isLongTerm"),EmptyView.extend({defaults:{emptyContext:"暂无任何审批"}}));this.taskApplyView=new TaskApplyView({collection:this.collection,emptyView:a,isShowAllButton:this.settings.isShowAllButton}),this.listArea.show(this.taskApplyView)}}),TaskAddDoView=Talent.ItemView.extend({defaults:{isShowTask:!0,isShowWorkTime:!0,isShowMeeting:!0,isShowTravel:!0,isShowShare:!0},template:jst["task-detail/task-add-do"],initialize:function(a){this.settings=Talent._.extend({},this.defaults,a),this.i18n=Talent.Context.getI18n()},className:"task-detial-adddo",ui:{distributeTask:'a[data-name="distribute_task"]',WorkHour:'a[data-name="task-work-hour"]',Travel:'a[data-name="task-travel"]',Meet:'a[data-name="task-meet"]',Share:'a[data-name="task-share"]'},events:function(){var a={};return a["click "+this.ui.distributeTask]="_distributeTask",a["click "+this.ui.WorkHour]="_taskWorkHour",a["click "+this.ui.Travel]="_taskTravel",a["click "+this.ui.Meet]="_taskMeet",a["click "+this.ui.Share]="_taskShare",a},templateHelpers:function(){var a=Talent.Context.getGlobal("tenant_function");return{i18n:this.i18n,IsUseMeet:a.IsUseMeet,IsUseBusinessTrip:a.IsUseBusinessTrip,social:a.social,isShowTask:this.settings.isShowTask,isShowWorkTime:this.settings.isShowWorkTime,isShowMeeting:this.settings.isShowMeeting,isShowTravel:this.settings.isShowTravel,isShowShare:this.settings.isShowShare}},onRender:function(){this.$("[original-title]").tipsy({gravity:"s"})},_distributeTask:function(){var a=this.ui.distributeTask;a.hasClass("btn-disabled")||this.trigger("task")},_taskWorkHour:function(a){a.stopPropagation(),this.trigger("work_hour")},_taskTravel:function(a){a.stopPropagation(),this.trigger("task_travel")},_taskMeet:function(a){a.stopPropagation(),this.trigger("task_meet")},_taskShare:function(a){a.stopPropagation(),this.trigger("task_share")},onClose:function(){}}),TaskTravelListItemView=Talent.ItemView.extend({tagName:"li",className:"task-detail-common-list-item clearfix",template:jst["task-detail/task-travel-list-item"],ui:{toggleItemDetail:'[data-name="toggle-item-detail"]',itemDetail:'[data-name="item-detail"]',itemTitle:'[data-name="item-title"]',itemTitleEdit:'[data-name="item-edit"]',itemTitleInput:'[data-name="item-title-input"]',detailTimeRight:'[data-name="detail-time-right"]',detailTimeContainer:"[data-name=item-time-container]",detailStartDate:'[data-name="startDate"]',detailEndDate:'[data-name="endDate"]',addContactUser:'a[data-name="addContractUser"]',contractUserTitle:".contractUserTitle",contractUserTitleEdit:'[data-name="contract-edit"]',contractUserEditInput:'[data-name="contract-edit-input"]',richeditorContainer:'[data-name="richeditor-area"]',detailDescription:'[data-name="detail-description"]',addDescriptionBtn:'[data-name="add-description-btn"]',attachment:'[data-name="detail-attachment"]',addBtn:'[data-name="file"]',participatorArea:'[data-name="detail-participator"]'},templateHelpers:function(){return{viewType:this.settings.viewType,startDate:Context.formatDate(this.model.get("startDate")),endDate:Context.formatDate(this.model.get("deadLine"))}},initialize:function(a){this.settings=Talent._.extend({},a);var b=this.model.get("description")||"";this.model.set({code:b,open:!1}),this.isClose=!1,this.isShowRich=!1},events:function(){var a={};return a["click "+this.ui.toggleItemDetail]="_onToggleDetail",a["click "+this.ui.itemTitle]="_onClickItemTitle",a["blur "+this.ui.itemTitleInput]="_onBlurItemTitleInput",a["click "+this.ui.detailTimeContainer]="_showDatePicker",a["mouseup "+this.ui.detailTimeContainer]="_mouseupDateHandler",a["click "+this.ui.addContactUser]="_focusContactUserInput",a["click "+this.ui.contractUserTitle]="_focusContactUserInput",a["blur "+this.ui.contractUserTitleEdit]="_onBlurContractUserInput",a["click "+this.ui.detailDescription]="_showRichEditor",a["click "+this.ui.addDescriptionBtn]="_showRichEditor",a},onRender:function(){this.$("[original-title]").tipsy({gravity:"s"}),this.model.get("editable")&&(this._renderFileView(),this._renderUserListView()),this._renderAttachmentsView()},_focusContactUserInput:function(a){var b=this.$(a.currentTarget);b.hide(),this.ui.contractUserTitleEdit.show(),this.ui.contractUserEditInput.focus()},_onToggleDetail:function(a){a.stopPropagation();var b=this.model.get("open");b?(this.model.set("open",!1),this.ui.itemDetail.hide(),this.render()):(this.model.set("open",!0),this._requestDetailData(),this.ui.itemDetail.show())},_requestDetailData:function(){var a=this;MeetCollection.getDetail({meet_id:this.model.get("id"),obj_id:this.settings.id,obj_type:"7"}).done(function(b){a.model.set(b),a.model.set({code:a.model.get("description")}),a.render()}).fail(function(){var b=a.userListCompositeView.collection.where({Id:user.Id});a.userListCompositeView.collection.remove(b)})},_renderUserListView:function(){var a=this,b=this.model.get("participantUsers");Talent._.map(b,function(a){a.Id=a.userId,a.Name=a.name,a.UserAvatar=a.avatar}),this.userListCompositeView=new AddUserCompositeView({collection:new Talent.Collection(b),addUserSelectonOptions:{muti:!0,container:this.settings.container},title:""}),this.listenTo(this.userListCompositeView,"addUser",function(b){a._requestAddUser(b)}),this.listenTo(this.userListCompositeView,"deleteUser",function(b){a._requestDeleteUser(b)}),this.ui.participatorArea.html(this.userListCompositeView.render().$el)},_requestAddUser:function(a){var b=this,c=[];if(a.data)for(var d=0;d<a.data.length;d++){var e=a.data[d];c.push({Id:e.id,Name:e.name,Email:e.name+":"+e.id+":dep_members"})}else c.push(a);MeetCollection.addParticipator({meet_id:this.model.get("id"),add_objects:c}).done(function(a){var a=a||[],c=[];Talent._.each(a,function(a){c.push({Name:a.name,UserAvatar:a.avatar,Avatar:a.avatar,UserId:a.userId,Id:a.userId})}),b.userListCompositeView.collection.add(c);var d=b.model.get("participantUsers");Talent._.each(a,function(a){d.push(a)}),b.model.set("participantUsers",d)}).fail(function(a){TipDialogView(b.userListCompositeView.ui.addUserBtn,a,{container:b.userListCompositeView.$el,pos:"topCenter",topBias:40})})},_requestDeleteUser:function(a){var b=this;MeetCollection.deleteParticipator({meet_id:this.model.get("id"),to_user_id:a.Id}).done(function(){var c=b.model.get("participantUsers");$(c).each(function(b,d){d.userId==a.Id&&c.splice(b,1)}),b.model.set("participantUsers",c)}).fail(function(){var c=b.userListCompositeView.collection.where({Id:a.Id});b.userListCompositeView.collection.add(c)})},_onClickItemTitle:function(a){if(this.model.get("editable")){var b=this.$(a.currentTarget);b.hide(),this.ui.itemTitleEdit.show(),this.ui.itemTitleInput.focus()}},_mouseupDateHandler:function(a){a.stopPropagation()},_showDatePicker:function(a){var b=this,c=this.$(a.currentTarget);this.model.get("editable")&&(a.stopPropagation(),this.dateTimePickerView&&this.dateTimePickerView.close(),this.dateTimePickerView=new DateTimePickerView({viewType:"date",rangepickerOptions:{startDate:this.model.get("startDate"),endDate:this.model.get("deadLine")},isShowDateView:!0,isShowCycleView:!1,isShowLongView:!1,isShowTab:!1}),this.listenTo(this.dateTimePickerView,"sure",function(a,c){this._updateTravalInfo(c).done(function(){b.model.set({startDate:c.startDate,deadLine:c.endDate}),b.ui.detailStartDate.html(Context.formatDate(c.startDate)),b.ui.detailEndDate.html(Context.formatDate(c.endDate)),b.render()}).fail(function(a){TipDialogView(b.ui.startDate,a),b.model.set({startDate:b.initStartDate,deadLine:b.initDeadLine})})}),this.ui.detailTimeRight.append(this.dateTimePickerView.render().el),this.dateTimePickerView.onShow(),this.dateTimePickerView.show(c,{parentEl:this.ui.detailTimeRight,pos:"bottomLeft"}))},_showRichEditor:function(a){var b=this;a.stopPropagation();var b=this;this.ui.richeditorContainer.show(),this.isShowRich=!0,this.ui.addDescriptionBtn.hide(),this.ui.detailDescription.hide(),this.richEditor&&this.richEditor.close(),this.richEditor=new TRicheditorView,Talent.$(document).off("mouseup.Task-Detail-Travel-View"),Talent.$(document).on("mouseup.Task-Detail-Travel-View",function(){b.isClose||b.isShowRich&&b._hideRichEditor()}),this.ui.richeditorContainer.html(this.richEditor.render().el),this.richEditor.onShow(),this.model.get("description")&&this.richEditor.richEditor.setCode("<p>"+this.model.get("description")+"</p>"),this.ui.richeditorContainer.find(".redactor_box").addClass("focus")},_hideRichEditor:function(){var a=this;if("none"!=this.ui.richeditorContainer.css("display")){this.ui.detailDescription.find(".redactor_box").removeClass("focus"),this.ui.detailDescription.hide(),this.isShowRich=!1;var b=this.richEditor.richEditor.getCode(),c=this.model.get("code");if(!/(<(img|table)[^>]*>)/g.test(b)){var d=b.toLowerCase();d=d.replace(/(<[^>]*>(<[^>]*>|&nbsp;)?(<\/[^>]*>)?)|&nbsp;/g,""),d=Talent.$.trim(d),""==d&&(b="")}c!=b?(a.model.set("code",b),a.model.set("description",b),this._updateTravalInfo().done(function(){a._changeDescription()}).fail(function(){})):(a.model.set("code",b),this._changeDescription())}},_changeDescription:function(){this.ui.richeditorContainer.hide();var a=this.model.get("code");"<p><br></p>"==a&&(a=""),a?this.ui.detailDescription.html(a).show():(this.ui.detailDescription.html(""),this.ui.addDescriptionBtn.show())},_onBlurItemTitleInput:function(a){var b=this,c=this.$(a.currentTarget),d=this.ui.itemTitleInput.val();d!=this.model.get("title")?(this.model.set("title",d),this._updateTravalInfo().done(function(){b.ui.itemTitle.text(d).show(),b.ui.itemTitleEdit.hide()}).fail(function(a){TipDialogView(c,a)})):(this.ui.itemTitle.show(),this.ui.itemTitleEdit.hide())},_onBlurContractUserInput:function(a){var b=this,c=Talent.$(a.currentTarget),d=this.ui.contractUserEditInput.val();d!=this.model.get("contractUser")?(b.model.set("contractUser",d),this._updateTravalInfo().done(function(){b.ui.contractUserTitle.html(d).show(),b.ui.contractUserTitleEdit.hide()}).fail(function(a){TipDialogView(c,a)})):d?(this.ui.contractUserTitleEdit.hide(),this.ui.contractUserTitle.show()):(this.ui.addContactUser.show(),this.ui.contractUserTitleEdit.hide())},_updateTravalInfo:function(a){var b=new Talent.$.Deferred,c=this.model.toJSON();return MeetCollection.updateMeet({MeetType:this.settings.viewType,meet_id:c.id,Title:c.title,StartDate:a&&a.startDate||c.startDate,DeadLine:a&&a.endDate||c.deadLine,ContractUser:c.contractUser,Description:c.description}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},_renderAttachmentsView:function(){this.attachmentView=new AttachmentListView({collection:new Talent.Collection(this.model.get("attachments")),isShowDeleted:this.model.get("editable")}),this.listenTo(this.attachmentView,"delete",function(a){this._deleteAttachment(a)}),this.attachmentView.render(),this.ui.attachment.append(this.attachmentView.el)},_renderFileView:function(){var a=this,b=['<a href="javascript:void(0);" title="" data-name="file" class="upload_node <%if(!openYFY){%>upload_new_file<%}%>">点击添加</a>',"<%if(openYFY){%>",'<div class="tt_upload_type_container" data-name="upload-type">','<dl class="upload_type_item"><span class="upload_new_file">本地上传</span></dl>','<dl class="upload_type_item"><span id="fc_upload" class="fang_cloud_btn">亿方云</span></dl>',"</div>","<%}%>",'<div class="error_container"></div>','<div class="loading_container"></div>'].join(""),c=UploaderComponentView.extend({template:Talent._.template(b)}),d=Context.IsOpenYifangyun();this.uploaderView=new c({container:this.$el,openYFY:d}),this.uploaderView.render(),this.uploaderView.on("uploadEnd",function(b,c){a._addAttachment(c.dfs,c.YFYresp)}),this.uploaderView.on("error",function(b){a.$el.find('div[id="'+b.timestamp+'"]').remove()})},_addAttachment:function(a,b){var c=this;MeetCollection.addAttachment({objId:this.model.get("id"),dfsUrls:a.join(","),documents:b}).done(function(a){var b=c.model.get("attachments")||[];Talent._.each(a,function(a){b.push(a)}),c.model.set("attachments",b),c.attachmentView.collection.add(a)}).fail(function(){})},_deleteAttachment:function(a){var b=this;MeetCollection.deleteAttachment({meet_id:this.model.get("id"),document_id:a}).done(function(){var c=b.model.get("attachments"),d=[];Talent._.each(c,function(b){b.DocumentId!=a&&d.push(b)}),b.model.set("attachments",d)}).fail(function(a){TipDialogView(b.$el.find(".upload_file_input"),a)})},onClose:function(){this.isClose=!0,Talent.$(document).off("mouseup.Task-Detail-Travel-View")}}),TaskTravelListView=Talent.CompositeView.extend({itemView:TaskTravelListItemView,itemViewContainer:'[data-name="task-detail-travel-list"]',template:jst["task-detail/task-travel-list"],defaults:{id:"",viewType:1,isShowCreate:!0,taskCreateOptions:{classOptions:!1,shape:"line",nameOptions:{iconShow:!1,defaultText:"出差地点",showBorderLeft:!1},hourDateOptions:!1,participatorOptions:!1,extendPersonOptions:{showBorderLeft:!1},replaceOptions:!1,principalOptions:!1,applyUserOptions:!1,bottomOptions:{isShowPrivateBtn:!1,isShowMessage:!1}}},ui:{taskContainer:'[data-name="task-create-container"]',listContaier:"[data-name=task-detail-travel-list]",itemDelete:'[data-name="item-delete"]'},events:function(){var a={};return a["click "+this.ui.itemDelete]="_onDeleteItem",a},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options),"object"==typeof this.options.taskCreateOptions&&(this.settings.taskCreateOptions=Talent._.extend({},this.defaults.taskCreateOptions,this.options.taskCreateOptions))
},onRender:function(){this.settings.isShowCreate&&this._renderCreateView()},_onDeleteItem:function(a){a.stopPropagation();var b=this,c=this.$(a.currentTarget),d=c.attr("id"),e=c.closest("li");ConfirmDialogView(c,"此操作不可恢复，您确定删除吗？",{pos:"topRight",container:e,className:"ask",topBias:30,sure:function(){b._requestDelete(d,e)}})},_requestDelete:function(a){var b=this;MeetCollection.deleteMeet({id:a}).done(function(){b.collection.remove(b.collection.get(a)),b.trigger("delete",b.collection.toJSON())})},_renderCreateView:function(){var a=this.settings.taskCreateOptions;a.id=this.settings.id+"_"+this.settings.viewType,a.extraClass="task-travel-create",a.requestSubmit=Talent._.bind(this._addMeet,this),a.dataTimeRangeOptions={isShowDateView:!1,isShowCycleView:!1,isShowLongView:!0,count:2,isShowTab:!1},this.createTaskView=new TaskCreateView(a),this.ui.taskContainer.html(this.createTaskView.render().$el)},_addMeet:function(a){var b=this,c=new Talent.$.Deferred;return MeetCollection.addMeet({ObjId:b.settings.id,ObjType:7,Title:a.TaskName,ContractUser:a.extend_user,StartDate:a.StartDate,DeadLine:a.EndDate,FileUrls:a.FileUrls,MeetType:this.settings.viewType,Description:a.Description,OtherDocuments:a.documents,Participators:a.Participators}).done(function(a){b.collection.unshift([a]),c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a),d=Marionette.getOption(this,"itemViewOptions");_.isFunction(d)&&(d=d.call(this,a,c));var e=this.buildItemView(a,b,d);this.addChildViewEventForwarding(e),this.children.add(e),e.render(),this.$el.find(this.itemViewContainer).find("li:first").length?this.$el.find(this.itemViewContainer).find("li:first").before(e.el):this.$el.find(this.itemViewContainer).append(e.el),this._isShown&&Marionette.triggerMethod.call(e,"show"),this.triggerMethod("after:item:added",e)},itemViewOptions:function(){return delete this.settings.model,delete this.settings.collection,this.$el.css("position","relative"),this.settings.container=this.settings.container||this.$el,this.settings},onClose:function(){this.createTaskView&&this.createTaskView.close()}}),TaskTravelDetailView=Talent.Layout.extend({defaults:{id:"",isShowCreate:!0},template:jst["task-detail/task-travel-detail"],initialize:function(a){this.settings=Talent._.extend({},this.defaults,a)},regions:{taskTravelList:'div[data-name="task-travel-list"]'},ui:{total:'[data-name="task-detail-travel-total"]'},events:function(){var a={};return a},collectionEvents:{add:"_onChangeTotal",reset:"_onChangeTotal",remove:"_onChangeTotal"},templateHelpers:function(){return{total:this.collection.length}},onShow:function(){this._renderTaskTravelList()},triggerIn:function(){this.taskTravelListCompositeView&&this.$el.find("[data-name=task-create-name]").trigger("focus")},_onChangeTotal:function(){this.ui.total.text(this.collection.length),this.model.set("businessTrips",this.collection.toJSON())},_renderTaskTravelList:function(){var a=EmptyView.extend({defaults:{emptyContext:"如果涉及到了出差，不妨记录下来"}});this.taskTravelListCompositeView=new TaskTravelListView({collection:this.collection,emptyView:a,viewType:2,id:this.settings.id,isShowCreate:this.settings.isShowCreate}),this.taskTravelList.show(this.taskTravelListCompositeView)}}),TaskMeetDetailView=Talent.Layout.extend({defaults:{id:"",isShowCreate:!0},template:jst["task-detail/task-meet-detail"],initialize:function(a){this.settings=Talent._.extend({},this.defaults,a)},regions:{taskMeetList:'div[data-name="task-travel-list"]'},ui:{total:'[data-name="task-detail-meet-total"]'},modelEvents:{"change:focusForm":"_focusMeet"},events:function(){var a={};return a},collectionEvents:{add:"_onChangeTotal",reset:"_onChangeTotal",remove:"_onChangeTotal"},templateHelpers:function(){return{total:this.collection.length}},onShow:function(){this._renderTaskMeetList()},triggerIn:function(){this.taskMeetListCompositeView&&this.$el.find("[data-name=task-create-name]").trigger("focus")},_focusMeet:function(){var a=this;setTimeout(function(){a.taskMeetListCompositeView.createTaskView&&a.taskMeetListCompositeView.createTaskView.$el.find("input[name=ux_task_content]").trigger("focus"),a.model.set({focusForm:!1},{silent:!0})},0)},_onChangeTotal:function(){this.ui.total.text(this.collection.length),this.model.set("meets",this.collection.toJSON())},_renderTaskMeetList:function(){var a=EmptyView.extend({defaults:{emptyContext:"所有开会记录可以汇总到这里"}});this.taskMeetListCompositeView=new TaskTravelListView({id:this.settings.id,collection:this.collection,model:this.model,viewType:1,emptyView:a,isShowCreate:this.settings.isShowCreate,taskCreateOptions:{participatorOptions:{showBorderLeft:!1},extendPersonOptions:{showBorderLeft:!0},nameOptions:{iconShow:!1,defaultText:"会议主题",showBorderLeft:!1}}}),this.taskMeetList.show(this.taskMeetListCompositeView)}}),TaskDetailWorkHourItemDetail=Talent.ItemView.extend({template:jst["task-detail/task-work-hour-list-item-detail"],className:"work-hour-item-detail",ui:{desAdd:"[data-name=task-detail-workhour-des-add]",desEdit:"[data-name=task-detail-workhour-des-edit]",desRich:"[data-name=task-detail-workhour-des-rich]",attachmentList:"[data-name=task-detail-workhour-attachment-list]",uploader:"[data-name=task-detail-work-hour-attachment-add]"},events:function(){var a={};return a["click "+this.ui.desAdd]="_showRichEditor",a["click "+this.ui.desEdit]="_showRichEditor",a},initialize:function(){this.isClose=!1,this.isShowRich=!1},onRender:function(){this.model.get("editable")&&this._renderAttachmentView(),this._renderAttachmentList(this.model.get("attachments")||[])},_renderAttachmentView:function(){var a=this,b=['<a href="javascript:void(0);" title="" data-name="file" class="upload_node <%if(!openYFY){%>upload_new_file<%}%>">点击添加</a>',"<%if(openYFY){%>",'<div class="tt_upload_type_container" data-name="upload-type">','<dl class="upload_type_item"><span class="upload_new_file">本地上传</span></dl>','<dl class="upload_type_item"><span id="fc_upload" class="fang_cloud_btn">亿方云</span></dl>',"</div>","<%}%>",'<div class="error_container"></div>','<div class="loading_container"></div>'].join(""),c=UploaderComponentView.extend({template:Talent._.template(b)}),d=Context.IsOpenYifangyun();this.uploaderView=new c({container:this.$el,openYFY:d}),this.uploaderView.render(),this.ui.uploader.prepend(this.uploaderView.$el),this.uploaderView.on("uploadEnd",function(b,c){a._requestAddAttachment(c.dfs,c.YFYresp)}),this.uploaderView.on("error",function(b){a.$el.find('div[id="'+b.timestamp+'"]').remove()})},_requestAddAttachment:function(a,b){var c=this;WorkTimeCollection.addAttachment({objId:this.model.get("id"),dfsUrls:a.join(","),documents:b}).done(function(a){c.attachmentListView.collection.add(a)})},_requestDeleteAttachment:function(a){WorkTimeCollection.deleteAttachment({work_time_id:this.model.get("id"),document_id:a}).done(function(){})},_renderAttachmentList:function(a){var b=Talent.Collection.extend({model:Talent.Model.extend({idAttribute:"documentId"})});this.attachmentListView=new AttachmentListView({collection:new b(a)}),this.listenTo(this.attachmentListView,"delete",function(a){this._requestDeleteAttachment(a)}),this.ui.attachmentList.html(this.attachmentListView.render().el)},_showRichEditor:function(a){a.stopPropagation();var b=this,c=this.model.get("editable");if(c){var d=this.model.get("description");this.ui.desAdd.hide(),this.ui.desEdit.hide(),this.ui.desRich.show(),this.richEditor=new TRicheditorView,Talent.$(document).off("mouseup.Task-Detail-Info-View"),Talent.$(document).on("mouseup.Task-Detail-Info-View",function(){b.isShowRich&&b._hideRichEditor()}),this.ui.desRich.html(this.richEditor.render().$el),this.richEditor.onShow(),this.isShowRich=!0,this.richEditor.callMethods("setCode","<p>"+d+"</p>")}},_hideRichEditor:function(){this.isShowRich=!1;var a=this.richEditor.callMethods("getCode"),b=this.model.get("description");if(!/(<(img|table)[^>]*>)/g.test(a)){var c=a.toLowerCase();c=c.replace(/(<[^>]*>(<[^>]*>|&nbsp;)?(<\/[^>]*>)?)|&nbsp;/g,""),c=Talent.$.trim(c),""==c&&(a="")}a&&""!=a?this.ui.desEdit.show():this.ui.desAdd.show(),b!=a&&(this.model.set("description",a),this.trigger("des",this.model.toJSON())),this.render()},onClose:function(){this.isClose=!0,Talent.$(document).off("mouseup.Task-Work-Hour-List-View")}}),TaskDetailWorkHourListItemView=Talent.ItemView.extend({defaults:{id:""},tagName:"li",className:"task_item",template:jst["task-detail/task-work-hour-list-item"],ui:{name:"[data-name=task-detail-workhour-name]",nameInputBox:"[data-name=task-detail-workhour-name-input]",nameInput:"[data-name=task-detail-workhour-name-input] input",detailBox:"[data-name=task-detail-workhour-item-detail-box]",detailBtn:"[data-name=task-detail-workhour-item-detail-btn]",detailIco:"[data-name=task-detail-workhour-item-detail-btn] em"},modelEvents:{"change:time":"render","change:hours":"_changeWorkHourEvent","change:minutes":"_changeWorkHourEvent","change:hoursTotal":"render"},_changeWorkHourEvent:function(){var a=Number(this.model.get("hours")),b=Number(this.model.get("minutes"));hoursTotal=b?(60*a+b)/60:a,this.model.set("hoursTotal",hoursTotal),this.trigger("itemHourTotalChange")},templateHelpers:function(){var a=this.model.get("name"),b=this.model.get("time");return{name:Talent._.substring(a,50,!0),time:Context.formatDate(b)}},initialize:function(a){this.settings=Talent._.extend({},this.defaults,a),this.detailBoxOpen=!1,this._judgeCurrentUser(),this.isClose=!1},events:function(){var a={};return a["mouseenter "+this.ui.name]="_overNameHandler",a["mouseleave "+this.ui.name]="_leaveNameHandler",a["click "+this.ui.name]="_clickNameHandler",a["blur "+this.ui.nameInput]="_blurNameHandler",a["click "+this.ui.detailBtn]="_detailToggleHandler",a},onRender:function(){this.detailBtnTxt=this.ui.detailBtn.find(".txt")},_judgeCurrentUser:function(){var a=Context.getUserInfo().Id,b=this.model.get("user").userId;a==b?this.model.set("isLoginUser",!0):this.model.set("isLoginUser",!1)},_detailToggleHandler:function(a){a.stopPropagation(),this.detailBoxOpen?(this.detailBoxOpen=!1,this.ui.detailBox.hide(),this.detailBtnTxt.html("详情"),this.ui.detailIco.addClass("icon-drop-down").removeClass("icon-drop-up")):(this.detailBoxOpen=!0,this._requestGetDetail(),this.ui.detailBox.show(),this.detailBtnTxt.html("收起"),this.ui.detailIco.addClass("icon-drop-up").removeClass("icon-drop-down"))},_requestGetDetail:function(){var a=this;WorkTimeCollection.getDetail({obj_id:this.settings.id,obj_type:7,work_time_id:this.model.get("id")}).done(function(b){a.isClose||a._renderItemDetail(b)})},_renderItemDetail:function(a){this.TaskDetailWorkHourItemDetail=new TaskDetailWorkHourItemDetail({model:new Talent.Model(a)}),this.listenTo(this.TaskDetailWorkHourItemDetail,"des",function(a){this.trigger("des",a)}),this.ui.detailBox.html(this.TaskDetailWorkHourItemDetail.render().$el)},_overNameHandler:function(a){var b=Talent.$(a.currentTarget),c=this._dealNameLength(this.model.get("name"));if(!b.data.tipsy&&c>50){var d=this;b.tipsy({gravity:"s",tirgger:"manual",title:function(){return d.model.get("name")}})}b.tipsy("show"),this.model.get("editable")&&this.ui.name.addClass("editable")},_dealNameLength:function(a){var b=/[\u4e00-\u9fa5]/,c=a.split(""),d=0;return Talent._.each(c,function(a){d+=b.test(a)?2:1}),d},_leaveNameHandler:function(a){var b=Talent.$(a.currentTarget);b.tipsy("hide"),this.model.get("editable")&&this.ui.name.removeClass("editable")},_clickNameHandler:function(){if(this.model.get("editable")){this.ui.name.hide(),this.ui.nameInputBox.show();var a=this.model.get("name");this.ui.nameInput.val(a).trigger("focus")}},_blurNameHandler:function(a){var b=Talent.$(a.currentTarget),c=Talent.$.trim(b.val());this.model.set("name",c),this.trigger("name",this.model.toJSON()),this.ui.name.html(Talent._.substring(c,50,!0)),this.ui.name.show(),this.ui.nameInputBox.hide()},onClose:function(){this.isClose=!0}}),TaskDetailWorkHourListView=Talent.CompositeView.extend({defaults:{id:"",pageSize:5},className:"work-hour-list",itemView:TaskDetailWorkHourListItemView,itemViewContainer:"[data-name=task-detail-work-hour-list]",template:jst["task-detail/task-work-hour-list"],ui:{listToggle:"[data-name=task-detail-work-hour-user-toggle]",listToggleTxt:"[data-name=task-detail-work-hour-user-toggle] .txt",listToggleIco:"[data-name=task-detail-work-hour-user-toggle-ico]",listBox:"[data-name=task-detail-work-hour-list-box]",date:"[data-name=task-detail-workhour-date]",hour:"[data-name=task-detail-workhour-hour]",total:"[data-name=task-detail-work-hour-total]",more:"[data-name=task-detail-work-hour-more]",moreText:"[data-name=task-detail-work-hour-more-text]",moreIco:"[data-name=task-detail-work-hour-icon]",deleted:"[data-name=task-detail-workhour-delete]"},events:function(){var a={};return a["click "+this.ui.listToggle]="_openListHandler",a["click "+this.ui.date]="_dateHandler",a["click "+this.ui.hour]="_hourHandler",a["click "+this.ui.more]="_showMoreHandler",a["click "+this.ui.deleted]="_deletedHandler",a},itemViewOptions:function(){return{id:this.options.id}},templateHelpers:function(){return{isShowMore:this.allCollection.length>this.settings.pageSize}},collectionEvents:{add:"_collectionAdd"},modelEvents:{"change:totalHours":"_modelTotalHours"},initialize:function(){this.settings=Talent._.extend({},this.defaults,this.options),this.allCollection=new Talent.Collection(this.model.get("workTimes"));var a=this.allCollection.length,b=this.settings.pageSize;if(a>b)var c=this.allCollection.slice(0,b);else var c=this.allCollection.toJSON();this.collection=new Talent.Collection(c),this.on("itemview:name",function(a,b){this._requestUpdate("name",b)}),this.on("itemview:des",function(a,b){this._requestUpdate("des",b)}),this.on("itemview:itemHourTotalChange",function(){for(var a=Talent._.pluck(this.collection.toJSON(),"hoursTotal"),b=0,c=0;c<a.length;c++)b+=Number(a[c]);this.model.set("totalHours",b),this.ui.total.html(b+"h")}),this.isShowMore=!1,this.isClose=!1,this._loginUserShowWorkList()},_loginUserShowWorkList:function(){var a=Context.getUserInfo().Id,b=this.model.get("user").userId,c=!1;a==b&&(c=!0),this.model.set("showList",c)},_modelTotalHours:function(){this.ui.total.html(this.model.get("totalHours")+"h")},_collectionAdd:function(){this.allCollection.unshift(this.collection.toJSON())},_countHourTotal:function(){},_deletedHandler:function(a){a.stopPropagation();var b=this,c=Talent.$(a.currentTarget),d=c.attr("id");ConfirmDialogView(c,"此操作不可恢复，您确定删除吗？",{pos:"topRight",container:c.parent().parent(),sure:function(){b._requestDelete(d)}})},_requestDelete:function(a){var b=this;WorkTimeCollection.deleteWorkHour({id:a}).done(function(){if(!b.isClose){var c=b.collection.get(a);b.collection.remove(c),b.allCollection.remove(c),b.model.set("totalHours",b.model.get("totalHours")-c.get("hoursTotal")),b.trigger("remove",c.toJSON())}})},_showMoreHandler:function(a){if(a.stopPropagation(),this.isShowMore){var b=this.allCollection.slice(0,this.settings.pageSize);this.collection.reset(b),this.ui.moreText.html("展开"),this.ui.moreIco.removeClass("icon-arrow-up-2t").addClass("icon-arrow-down-2t"),this.isShowMore=!1}else this.collection.reset(this.allCollection.toJSON()),this.ui.moreText.html("收起"),this.ui.moreIco.removeClass("icon-arrow-down-2t").addClass("icon-arrow-up-2t"),this.isShowMore=!0},_hourHandler:function(a){a.stopPropagation();var b=this.$(a.currentTarget);this.nodeId=b.attr("id");var c=this.collection.get(this.nodeId);this.itemViewModel=this.collection.get(this.nodeId),this.workHourVie&&this.workHourVie.close(),this.workHourView=new WorkHourView({parentEl:this.$el}),this.listenTo(this.workHourView,"sure",function(a){this.itemViewModel.set({hours:a.hourDate,minutes:a.minuteDate}),a.id=this.nodeId,a.hours=c.get("hours"),a.minutes=c.get("minutes"),a.time=c.get("time"),this._requestUpdate("date",a)},this),this.workHourView.model.set({hourDate:this.itemViewModel.get("hours"),minuteDate:this.itemViewModel.get("minutes")}),this.workHourView.show(b,{pos:"bottomRight",container:this.$el})},_dateHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget);this.nodeId=b.attr("id");var c=this.collection.get(this.nodeId);this.dateTimePickerView&&this.dateTimePickerView.close(),this.dateTimePickerView=new DateTimePickerView({count:1,isShowDateView:!0,isShowCycleView:!1,isShowLongView:!1,rangepickerOptions:{timePicker:!1,format:"YYYY/MM/DD",maxDate:moment().format("YYYY/MM/DD"),startDate:c.get("time")}}),this.listenTo(this.dateTimePickerView,"sure",function(a,b){b.id=this.nodeId,b.hours=c.get("hours"),b.minutes=c.get("minutes"),b.time=b.startDate,c.set("time",b.startDate),this._requestUpdate("date",b)},this),this.$el.append(this.dateTimePickerView.render().el),this.dateTimePickerView.onShow(),this.dateTimePickerView.show(b,{container:this.$el,pos:"bottomRight"})},_openListHandler:function(){var a=this.ui.listBox.is(":visible");this.ui.listToggleIco.removeClass("icon-drop-down icon-drop-up"),a?(this.ui.listBox.hide(),this.ui.listToggleIco.addClass("icon-drop-down"),this.ui.listToggleTxt.html("展开")):(this.ui.listBox.show(),this.ui.listToggleIco.addClass("icon-drop-up"),this.ui.listToggleTxt.html("收起"))},_requestUpdate:function(a,b){var c={ObjId:this.settings.id,ObjType:7,work_time_id:b.id};switch(a){case"name":c.Name=b.name;break;case"des":c.Description=b.description;break;case"date":c.Time=b.time,c.Hour=b.hours,c.Minute=b.minutes}WorkTimeCollection.updateWokHour(c).done(function(){}).fail(function(){})},onClose:function(){this.isClose=!0}}),TaskDetailWorkHourUserListView=Talent.CompositeView.extend({defaults:{id:"",isShowCreate:!0,autoCompleteData:[]},template:Talent._.template('<div class="workhourlist" />'),itemView:TaskDetailWorkHourListView,itemViewContainer:".workhourlist",itemViewOptions:function(){return{id:this.settings.id}},initialize:function(a){this.settings=Talent._.extend({},this.defaults,a),this.on("itemview:remove",function(a){this.trigger("remove",a.model.toJSON())})},onShow:function(){this.settings.isShowCreate&&this._renderCreateView()},_renderCreateView:function(){{var a=this;this.settings.taskCreateOptions}this.createTaskView=new TaskCreateView({id:this.settings.id+"_work-hour",shape:"line",templateName:"workhour",nameOptions:{dropdownData:this.settings.autoCompleteData,defaultText:"输入工时名称",iconShow:!1},dataTimeRangeOptions:{count:1,rangepickerOptions:{timePicker:!1,maxDate:moment().format("YYYY/MM/DD"),format:"YYYY/MM/DD"}},requestSubmit:function(b,c){var d=new Talent.$.Deferred;return WorkTimeCollection.addWorkHour({ObjId:a.settings.id,ObjType:7,Name:c.taskTitle,Description:c.code,Time:c.startDate,Hour:c.hourDate,Minute:c.minuteDate,FileUrl:b.FileUrls,Documents:b.documents}).done(function(b){return b?(a._requestAddWorkHour(b),a.trigger("add",b),void d.resolve(b)):void d.resolve("")}).fail(function(a){d.reject(a)}),d}}),this.$el.prepend(this.createTaskView.render().$el)},_requestAddWorkHour:function(a){var b=this,c=!1;return this.collection.length?(this.children.each(function(d){var e=d.model;if(e.get("user").userId==a.user.userId){c=!0;var f=e.get("workTimes");d.collection.unshift(a),d.render(),e.set("totalHours",e.get("totalHours")+a.hoursTotal),b.model.set("workTimes",f)}}),void(c||this.collection.unshift([{taotal:1,totalHours:a.hoursTotal,user:a.user,workTimes:[a]}]))):void this.collection.add([{taotal:1,totalHours:a.hoursTotal,user:a.user,workTimes:[a]}])},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a),d=Marionette.getOption(this,"itemViewOptions");_.isFunction(d)&&(d=d.call(this,a,c));var e=this.buildItemView(a,b,d);this.addChildViewEventForwarding(e),this.children.add(e),e.render(),this.$el.find(this.itemViewContainer).find(".work-hour-list:first-child").length?this.$el.find(this.itemViewContainer).find(".work-hour-list:first-child").before(e.el):this.$el.find(this.itemViewContainer).append(e.el),this._isShown&&Marionette.triggerMethod.call(e,"show"),this.triggerMethod("after:item:added",e)}}),TaskDetailWorkHourView=Talent.Layout.extend({defaults:{id:"",isShowCreate:!0,autoCompleteData:""},template:jst["task-detail/task-work-hour-detail"],initialize:function(a){this.options=a},regions:{taskWorkHourList:'div[data-name="task-detail-work-hour-list"]'},ui:{total:"span[data-name=task-detail-work-hour-total]"},modelEvents:{"change:workHourTotal":"_changeTotal"},initialize:function(a){this.settings=Talent._.extend({},this.defaults,a),this.model.set({workHourTotal:0},{silent:!0})},events:function(){var a={};return a},onShow:function(){this._countTotal(),this._renderTaskWorkHourList()},triggerIn:function(){this.taskDetailWorkHourUserListView&&this.$el.find("[data-name=task-create-name]").trigger("focus")},_changeTotal:function(){this.ui.total.html(this.model.get("workHourTotal"))},_countTotal:function(){for(var a=this.collection.toJSON(),b=0,c=0;c<a.length;c++)b+=a[c].workTimes.length;this.model.set("workHourTotal",b)},_renderTaskWorkHourList:function(){var a=EmptyView.extend({defaults:{emptyContext:"想了解工作耗费多少时间吗？试试记录工时"}});this.taskDetailWorkHourUserListView=new TaskDetailWorkHourUserListView({collection:this.collection,id:this.settings.id,emptyView:a,isShowCreate:this.settings.isShowCreate,autoCompleteData:this.settings.autoCompleteData}),this.listenTo(this.taskDetailWorkHourUserListView,"add",function(){var a=this.model.get("workHourTotal");this.model.set("workHourTotal",a+1)}),this.listenTo(this.taskDetailWorkHourUserListView,"remove",function(){var a=this.model.get("workHourTotal");this.model.set("workHourTotal",a-1)}),this.taskWorkHourList.show(this.taskDetailWorkHourUserListView)}}),TaskDetailView=Talent.Layout.extend({template:jst["task-detail/task-detail-layout"],className:"task-detail-layout",defaults:{isShowTask:!0,isShowWorkTime:!0,isShowMeeting:!1,isShowTravel:!1,isShowShare:!0,topBias:"0",isShowScroll:!0},regions:{taskUnaccept:"div[data-name=task-detail-unaccept]",taskStatus:'div[data-name="task-detail-status"]',action:"div[data-name=task-detail-action]",relate:"div[data-name=task-detail-relate]",info:"div[data-name=task-detail-info]",baseInfo:"div[data-name=task-detail-base-info]",evaluation:"div[data-name=task-detail-evaluation]",taskTrack:"div[data-name=task-detail-track]",taskAddDo:"[data-name=task-detail-add-do]",share:"div[data-name=task-detail-share]",comment:"div[data-name=task-detail-comment]",taskTravel:'div[data-name="task-detail-travel"]',taskMeet:"[data-name=task-detail-meet]",task:"[data-name=task-detail-task-list]",workHour:"[data-name=task-detail-work-hour]",taskCustom:'div[data-name="ux-customizetDatas"]',taskFollower:'[data-name="task-detail-follower"]',taskShareUser:'[data-name="task-share-user"]',applyBox:"[data-name=task-apply]",reward:"[data-name=task-detail-reward]"},ui:{share:"div[data-name=task-detail-share]",taskTravel:'div[data-name="task-detail-travel"]',taskMeet:'[data-name="task-detail-meet"]',task:"[data-name=task-detail-task-list]",workHour:"[data-name=task-detail-work-hour]",taskCustom:'div[data-name="ux-customizetDatas"]',taskShareUser:'[data-name="task-share-user"]',taskScoll:"[data-name=task-detail-scroll]",applyBox:"[data-name=task-apply]"},modelEvents:{},templateHelpers:function(){var a=Context.getGlobal("Header")||[],b=Talent._.findWhere(a,{Code:"950"})?!0:!1;return{isOpenReward:b}},_labIdChnageHandler:function(){this._renderTaskDetail()},events:function(){var a={};return a},initialize:function(a){var b=this;this.settings=Talent._.extend({},this.defaults,a),this._customizeSettings(),this.id=this.settings.id||this.model.get("taskId")||"",this.i18n=Talent.Context.getI18n(),this.userInfo=Talent.Context.getUserInfo(),this.experienceColletion=new Talent.Collection,this.businessTripsceColletion=new Talent.Collection,this.tasksCollection=new Talent.Collection,this.meetsColletion=new Talent.Collection,this.applysColletion=new Talent.Collection,this.workTimesColletion=new Talent.Collection,this.commentsModel=new Talent.Model,this.tracksModel=new Talent.Model,this.isClose=!1,this.model||(this.model=new Talent.Model),this.model.set({i18n:this.i18n,iTask:this.i18n.task_1,taskId:this.id},{silent:!0}),this.openAdd={1:!0,2:!0,3:!0},this.$el.on("click",function(a){a.stopPropagation(),b.taskBaseInfoView&&b.taskBaseInfoView.closeUserSelect(),b.shareRangeView&&b.shareRangeView.closeView()}),Talent.$(window).on("resize.Task-Detail-Layout-View",function(){b._setScrollAreaHeight()})},onRender:function(){this._getTaskDetailData()},_customizeSettings:function(){var a=Context.getGlobal("tenant_function");a&&"object"==typeof a&&(this.settings.isShowMeeting=a.IsUseMeet,this.settings.isShowTravel=a.IsUseBusinessTrip)},_getTaskDetailData:function(){var a=this,b=this.id;TaskCollection.getTaskInfo({task_id:b}).done(function(b){return b.code<1?void a._showErrowPage(b.code):(a.model.set(b),b.cycleId&&""!=b.cycleId?TaskCollection.getCycleTask({cycle_id:b.cycleId}).done(function(b){a.model.set("cycleInfo",b),a._showLayout()}):a._showLayout(),a._renderRewardUserListView(),void a.trigger("getDataAfter"))}).fail(function(){})},_setScrollAreaHeight:function(){if(this.settings.isShowScroll){var a=this.taskRelateView&&this.taskRelateView.$el.outerHeight()||0,b=this.taskUnacceptView&&this.taskUnacceptView.$el.outerHeight()||0,c=this.taskActionview&&this.taskActionview.$el.outerHeight()||0,d=Talent.$(window).height()-this.settings.topBias;this.ui.taskScoll.height(d-b-a-c)}},_showLayout:function(){var a=this;this.isClose||(this._renderAllView(),this._renderLoadingView(),Talent.$.when(this._getTaskInfoObj(),this._getTaskFeed()).done(function(){a.isClose||(a.loadingView&&a.loadingView.close(),a._setScrollAreaHeight(),a._rendereQuickView())}))},_getTaskInfoObj:function(){var a=this,b=this.id,c=new Talent.$.Deferred;return TaskCollection.getTaskInfoObj({task_id:b}).done(function(b){a.isClose||(a.tasksCollection.reset(b.tasks||[]),a.experienceColletion.reset(b.experience||[]),a.businessTripsceColletion.reset(b.businessTrips||[]),a.meetsColletion.reset(b.meets||[]),a.applysColletion.reset(b.applys||[]),a.workTimesColletion.reset(b.workTimes||[]),a._renderObjView(),c.resolve())}).fail(function(){c.reject()}),c.promise()},_getTaskFeed:function(){var a=this,b=new Talent.$.Deferred;return UserFeedV2.getFeedById({feed_id:this.id,comment_count:5}).done(function(c){a.isClose||(a.commentsModel.set(c.feedComments||{}),a.tracksModel.set(c.feedOperations||{}),a._renderCommentView(c),a._renderTaskTrackView(),b.resolve())}).fail(function(){b.reject()}),b.promise()},_renderRewardUserListView:function(){var a=this.model.get("principalUser"),b={avatar:{big:a.avatar.big,color:a.avatar.Color,hasAvatar:a.avatar.HasAvatar,large:a.avatar.Large,medium:a.avatar.Medium,normal:a.avatar.Normal,original:a.avatar.Original,small:a.avatar.Small},email:a.email,name:a.name,userId:a.userId};this.rewardDetailView=new RewardDetailView({feedId:this.id,feedType:20,user:b}),this.reward.show(this.rewardDetailView)},_renderLoadingView:function(){this.loadingView&&this.loadingView.close(),this.loadingView=new LoadingView({y:this.height/2}),this.ui.taskScoll.append(this.loadingView.render().$el)},_showErrowPage:function(a){var b="该"+this.i18n.task_1+"不存在";switch(a){case 0:b="该"+this.i18n.task_1+"已被主人删除了~";break;case-1:b="该"+this.i18n.task_1+"现在是私密状态"}this.errorTrackerView=new ErrorLayoutMessageView({content:b,isShowClose:this.settings.isPushScreen?!0:!1}),this.listenTo(this.errorTrackerView,"errorLayoutMessageView:close",function(){this.trigger("taskDetailItem:close")}),this.isClose||this.$el.html(this.errorTrackerView.render().el)},_renderAllView:function(){this._renderEvaluationView(),this._renderFeedExtraInfoListView(),this._renderTaskRelateView(),this._rendUnacceptView(),this._renderTaskActionview(),this._renderInfoView(),this._rendBaseInfoView(),this._renderPlanShareRangeView()},_renderObjView:function(){this._renderAddDoView();var a=this.businessTripsceColletion.toJSON();a&&a.length&&this.settings.isShowTravel&&this._renderTravelDetailView(a);var b=this.meetsColletion.toJSON();b&&b.length&&this.settings.isShowMeeting&&this._renderMeetDetailView(b);var c=this.tasksCollection.toJSON();c&&c.length&&this.settings.isShowTask&&this._renderTaskView(c);var d=this.experienceColletion.toJSON();d&&d.length&&this.settings.isShowShare&&this._renderShareView();var e=this.workTimesColletion.toJSON();e&&e.length&&this.settings.isShowWorkTime&&this._renderWokHourView(e);var f=this.applysColletion.toJSON();f&&f.length&&this._renderTaskApplyView()},_renderTaskApplyView:function(){var a=!1;this.model.get("applyUser")&&this.model.get("applyUser").userId&&(a=this.userInfo.Id==this.model.get("applyUser").userId),this.taskApplyDetailView=new TaskApplyDetailView({collection:this.applysColletion,isShowAllButton:a}),this.applyBox.show(this.taskApplyDetailView)},_renderEvaluationView:function(){if(2==this.model.get("status")){var a=this.model.get("evaluateModels")||[];a.length&&(this.evaluationView=new EvaluationView({collection:new Talent.Collection(a),customOptions:this.model.get("evaluateSettingsModel"),evaluationObject:"还没有对"+this.i18n.task_1+"进行评价",isAdd:this.model.get("evaluateable")}),this.listenTo(this.evaluationView,"saveEvaluation",function(a,b){this._requestEvaluation(a,b)}),this.evaluation.show(this.evaluationView))}},_requestEvaluation:function(a,b){var c=this,d=[];$(b.evaluateInfos).each(function(a,b){d.push({evaluateType:b.type,cType:b.cType,value:b.value,name:b.name,goal:b.goal,lvl:b.lvl})}),TaskCollection.evaluateTask({objId:this.id,objType:7,evaluateInfo:d,remark:b.remark}).done(function(a){var b=c.model.get("evaluateModels"),d=a.user.UserId;Talent._.each(b,function(b){b.user.UserId==d&&(b=a)}),c.model.set("evaluateModels",b),c.evaluationView&&c.evaluationView.render()}).fail(function(b){TipDialogView(a,b)})},_renderPlanShareRangeView:function(){var a=this,b=this.model.get("followers"),c=this._formatFollowerData(b),d=(this.model.get("relation"),this.model.get("addFollowEnable"));this.shareRangeView=new ShareRangeView({collection:new Talent.Collection(c),isEdit:d,userSelectOptions:{visibleMode:d}}),this.listenTo(a.shareRangeView,"add",function(b,c){a._addShareUser(b,c)}),this.listenTo(a.shareRangeView,"delete",function(b,c){a._deleteShareUser(b,c)}),this.taskShareUser.show(this.shareRangeView)},_formatFollowerData:function(a){var b=[];return Talent._.map(a,function(a){var c=null;a.Id=a.userId,a.Name=a.name,a.UserAvatar=a.avatar,c={Type:a.type,User:a},b.push(c)}),b},_rendereQuickView:function(){this.taskDetailQuickView&&this.taskDetailQuickView.close(),this.taskDetailQuickView=new TaskDetailQuickView({model:new Talent.Model({applys:this.applysColletion.length?!0:!1,tasks:this.tasksCollection.length?!0:!1,workTimes:this.workTimesColletion.length?!0:!1,meets:this.meetsColletion.length?!0:!1,businessTrips:this.businessTripsceColletion.length?!0:!1,experience:this.experienceColletion.length?!0:!1})}),this.listenTo(this.taskDetailQuickView,"areaPostion",function(a,b){this._scrollTo(this.ui[b.ui])}),this.$el.append(this.taskDetailQuickView.render().$el)},_deleteShareUser:function(a,b){var c=this;TaskCollection.deleteFollower({taskId:this.model.get("taskId"),toUserId:b}).done(function(){if(!c.isClose){for(var a=c.shareRangeView.collection,d=null,e=0,f=a.length;f>e;e++)a.at(e).get("User").Id==b&&(d=a.at(e));d&&a.remove(d)}})},_addShareUser:function(a,b){var c=this;TaskCollection.addFollower({taskId:this.model.get("taskId"),followers:b}).done(function(a){if(!c.isClose){Talent._.map(a,function(a){a.avatar=a.Avatar,a.type=0,a.name=a.Name,a.userId=a.UserId});var b=c._formatFollowerData(a);c.shareRangeView.collection.add(b)}}).fail(function(b){c.isClose||ConfirmDialogView(a,b,{cancel:!1,quirkTheme:!0,sureText:"关闭",autoHide:!1,pos:"topCenter",container:c.shareRangeView.$el,sure:function(){}})})},_renderFeedExtraInfoListView:function(){var a=this.model.get("customizetDatas");a&&a.length?(this.feedExtraInfoList=new FeedExtraInfoListView({collection:new Talent.Collection(a)}),this.taskCustom.show(this.feedExtraInfoList)):this.ui.taskCustom.hide()
},_renderAddDoView:function(){var a=this.model.get("relation");if(this.openAdd[a]&&this.model.get("isAccept")){var b=new TaskAddDoView({isShowTask:this.settings.isShowTask,isShowWorkTime:this.settings.isShowWorkTime,isShowMeeting:this.settings.isShowMeeting,isShowTravel:this.settings.isShowTravel,isShowShare:this.settings.isShowShare});this.listenTo(b,"task",function(){this._renderTaskView(),this._scrollTo(this.ui.task),this.taskTaskDetailView.triggerIn()}),this.listenTo(b,"work_hour",function(){this._renderWokHourView(),this._scrollTo(this.ui.workHour),this.taskDetailWorkHourView.triggerIn()}),this.listenTo(b,"task_travel",function(){this._renderTravelDetailView(),this._scrollTo(this.ui.taskTravel),this.taskTravelDetailView.triggerIn()}),this.listenTo(b,"task_meet",function(){this._renderMeetDetailView(),this._scrollTo(this.ui.taskMeet),this.taskMeetDetailView.triggerIn()}),this.listenTo(b,"task_share",function(){this._renderShareView(),this.taskDetailShareView.triggerIn(),this._scrollTo(this.ui.share)}),this.taskAddDo.show(b)}},_renderWokHourView:function(a){var b=this.model.get("isAccept"),c=this.model.get("relation");this.taskDetailWorkHourView=new TaskDetailWorkHourView({collection:this.workTimesColletion,id:this.id,isShowCreate:1==this.openAdd[c]&&b?!0:!1,autoCompleteData:[{name:this.model.get("taskName")}]}),this.workHour.show(this.taskDetailWorkHourView)},_renderTaskView:function(){var a=this.model.get("isAccept"),b=this.model.get("relation");this.taskTaskDetailView=new TaskTaskDetailView({model:this.model,id:this.id,collection:this.tasksCollection,isShowCreate:1==this.openAdd[b]&&a?!0:!1}),this.task.show(this.taskTaskDetailView)},_renderTravelDetailView:function(a){var b=this.model.get("isAccept"),c=this.model.get("relation");this.taskTravelDetailView=new TaskTravelDetailView({collection:this.businessTripsceColletion,id:this.id,isShowCreate:1==this.openAdd[c]&&b?!0:!1}),this.taskTravel.show(this.taskTravelDetailView)},_renderMeetDetailView:function(a){var b=this.model.get("isAccept"),c=this.model.get("relation");this.taskMeetDetailView=new TaskMeetDetailView({collection:this.meetsColletion,id:this.id,model:this.model,isShowCreate:(1==this.openAdd[c]&&b)>0?!0:!1}),this.taskMeet.show(this.taskMeetDetailView)},_renderShareView:function(){var a=this.model.get("isAccept"),b=this.model.get("relation");this.taskDetailShareView=new TaskDetailShareView({collection:this.experienceColletion,id:this.id,isShowCreate:(1==this.openAdd[b]&&a)>0?!0:!1}),this.share.show(this.taskDetailShareView)},_renderCommentView:function(a){var b=this.model.get("feedComments")||[];b.feedId=this.id;var c=new TaskDetailCommentView({model:this.commentsModel,collection:new Talent.Collection(b.comments||[]),id:this.id,feedType:a.feedType});this.comment.show(c)},_rendBaseInfoView:function(){this.taskBaseInfoView=new TaskDetailBaseInfoView({model:this.model,id:this.id,container:this.$el}),this.listenTo(this.taskBaseInfoView,"changFZR",function(){this.render()}),this.listenTo(this.taskBaseInfoView,"addPartner",function(a){a.changeLimit&&this.render(),this._changeFollowUser(a.users)}),this.baseInfo.show(this.taskBaseInfoView)},_changeFollowUser:function(){for(var a=this.model.get("followers"),b=this.model.get("participators"),c=[],d=0;d<a.length;d++){var e=a[d],f=Talent._.findWhere(b,{userId:e.userId});f||c.push(e)}this.model.set("followers",c);var g=this._formatFollowerData(c);this.shareRangeView.collection.reset(g)},_renderInfoView:function(){this.taskInfoView=new TaskInfoView({model:this.model}),this.info.show(this.taskInfoView)},_renderTaskRelateView:function(){this.taskRelateView=new TaskDetailRelateView({model:this.model}),this.relate.show(this.taskRelateView)},_rendUnacceptView:function(){this.taskUnacceptView=new TaskDetailUnacceptView({model:this.model}),this.listenTo(this.taskUnacceptView,"takeInTask",function(){this.render()},this),this.listenTo(this.taskUnacceptView,"transfer",function(){this.render()}),this.listenTo(this.taskUnacceptView,"notToJoin",function(){this.render()}),this.taskUnaccept.show(this.taskUnacceptView)},_renderTaskActionview:function(){this.taskActionview=new TaskDetailActionview({model:this.model}),this.listenTo(this.taskActionview,"delete",function(a){this._requestDeleteTask(a)},this),this.listenTo(this.taskActionview,"exit",function(a){this._requestExitTask(a)},this),this.listenTo(this.taskActionview,"changeStatus",function(){this.render()}),this.action.show(this.taskActionview)},_renderTaskTrackView:function(){this.tracksModel.get("total")&&(this.taskDetailTrackView=new TaskDetailTrackView({model:this.tracksModel,id:this.id}),this.taskTrack.show(this.taskDetailTrackView))},_requestDeleteTask:function(a){var b=this;TaskCollection.taskDelete({task_id:this.model.get("taskId")}).done(function(){b.isClose||(b.trigger("delete",b.model.toJSON()),b.render())}).fail(function(c){b.isClose||TipDialogView(a,c,{className:"warn",pos:"bottom"})})},_requestExitTask:function(){var a=this;TaskCollection.taskDeleteParticipator({task_id:a.model.get("taskId"),to_user_id:a.userInfo.Id}).done(function(){a.isClose||(a.trigger("exit",a.model.toJSON()),a.render())}).fail(function(b){a.isClose||TipDialogView(node,b,{className:"warn",pos:"bottom"})})},_scrollTo:function(a){var b=a.offset().top;if(this.settings.isShowScroll){var c=this.ui.taskScoll.scrollTop(),d=b-this.ui.taskScoll.offset().top;this.ui.taskScoll.scrollTop(d+c)}else{var e=Talent.$(window).height(),d=b-e/2;$("html,body").scrollTop(d)}},onClose:function(){this.isClose=!0,Talent.$(".tipsy").hide(),Talent.$(window).off("resize.Task-Detail-Layout-View"),this.taskInfoView&&this.taskInfoView.close(),this.taskDetailQuickView&&this.taskDetailQuickView.close()}}),PullScreenLayoutView=Talent.Layout.extend({defaults:{topBias:0,position:"right",width:820,duration:500,id:"",type:"task",showFullScreenButton:!1,status:""},template:JST["pull-screen/push-screen-layout"],className:"pull-screen-container",regions:{detailContainer:"[data-name=pull-screen-content]",loading:"[data-name=pull-screen-load]"},ui:{detailContainer:"[data-name=pull-screen-content]",iframe:"[data-name=pull-screen-iframe]",closed:"[data-name=pull-screen-close]",loading:"[data-name=pull-screen-load]",openScreen:"[data-name=open-full-screen-button]",actionBox:"[data-name=pull-screen-action]"},templateHelpers:function(){return{showFullScreenButton:this.settings.showFullScreenButton,isShowIfame:"iframe"==this.settings.status?!0:!1}},events:function(){var a={};return a["click "+this.ui.closed]="_closeHandler",a},initialize:function(a){var b=this;this.settings=Talent._.extend({},this.defaults,a),this.settings.width=this.settings.width,this.height=Talent.$(window).height(),this.isOpen=!1,this.isCanClosed=!0,this.changeUrl=!0,this.bias=20,this.$el.on("click",function(a){a.stopPropagation()}),Talent.$(document).on("click.Pull-Screen-Region-View",function(){b.isOpen&&b.closed()}),Talent.$(window).on("resize.Pull-Screen-Region-View",function(){b.height=Talent.$(window).height(),b.$el.height(b.height)}),this._getRouterData(),this._listenGlobalEvent(),this.viewModel=new Talent.Model,this._initSet()},onRender:function(){var a=this.model.get("id");a&&this.open()},onClose:function(){},_initSet:function(){this.$el.css("left"==this.settings.position?{top:this.settings.topBias+"px",left:-(this.settings.width+this.bias),width:this.settings.width,height:this.height-this.settings.topBias}:{top:this.settings.topBias,right:-(this.settings.width+this.bias),width:this.settings.width,height:this.height})},_getRouterData:function(){var a=this,b=Talent.app.request("history:getQueryObject"),c=new Talent.$.Deferred;return b.done(function(b){a.routerData=b||{};var c=a.routerData.pullScreeId||"";a.routerData.pullScreeId=c,a.routerData.pullScreenOpen=b.pullScreenOpen||!1,a.routerData.pullScreenType=b.pullScreenType||"",a.model.set("id",c,{silent:!0}),a.model.set("pullScreenOpen",b.pullScreenOpen),a.model.set("type",b.pullScreenType)}),c},_listenGlobalEvent:function(){var a=this;Talent.app.vent.on("global-pull-screen",function(b,c,d,e){if(b&&""!=b||alert("id是必传的"),"string"==typeof b&&"closed"==b)return"boolean"==typeof c&&0==c?void(a.isCanClosed=!1):(a.isCanClosed=!0,void a.closed());a.changeUrl=!0;var b=b||(new Date).getTime();if("task"==c){var b=b;return b&&""!=b?(a.viewModel=d||new Talent.Model,a.model.set({id:b,type:c}),void a._idChangeHandler()):void alert("请给我ivd,不能显示详情页")}var e=d;e&&"undefined"!=typeof e.changeUrl&&(a.changeUrl=e.changeUrl),a.model.set({id:b,type:c}),a._idChangeHandler()})},_idChangeHandler:function(){var a=(this.settings.duration,this),b=this.settings;b.close=!0,this.trigger("closed",{duration:this.settings.duration,width:this.settings.width}),this.$el.stop().animate(this._dealAnimationData(b),b.duration,function(){a._fullScreenUrl(),a.open()})},open:function(){var a=this,b=this.model.get("id");b&&(this.changeUrl&&Context.changeHash({pullScreeId:b,pullScreenOpen:!0,pullScreenType:this.model.get("type")},"add",!1),this.isOpen=!0,this.trigger("open",{duration:this.settings.duration,width:this.settings.width}),this._pushAnimate().done(function(){a._fullScreenUrl(),a._renderViewByType()}))},closed:function(a){if(!this.isCanClosed){var b=this.model.get("id");return void(b&&""!=b&&Talent.app.vent.trigger("global-pull-screen:closed:"+b))}var c=this.model.get("id")||"";c&&""!=c&&Talent.app.vent.trigger("global-pull-screen:closed:"+c),this.isCanClosed&&(a&&a.stopPropagation(),this.model.set("id",""),this._closeAnimate())},_closeAnimate:function(){var a=this.settings,b=this;a.close=!0,this._closeView(),this.changeUrl&&Context.changeHash(["pullScreeId","pullScreenOpen","pullScreenType"],"deleted",!1),this.isOpen=!1,this.trigger("closed",{duration:this.settings.duration,width:this.settings.width}),this.$el.stop().animate(this._dealAnimationData(a),a.duration,function(){b.ui.iframe.hide()})},_closeView:function(){var a=this.model.get("type");"task"==a?this.taskDetailView&&this.taskDetailView.close():this.detailContainer.close()},_renderViewByType:function(){var a=this.model.get("type");if(this.ui.actionBox.show(),"iframe"==this.settings.status)return void this._renderIframe();if("task"==a)return void this._renderTaskDetailView();var b=a;this.containerView=b,this.loadingView&&this.loadingView.close(),this.detailContainer.show(this.containerView)},_closeHandler:function(){this.closed()},_renderLoadingView:function(){this.loadingView=new LoadingView({y:this.height/2}),this.loading.show(this.loadingView)},_pushAnimate:function(){this.ui.iframe.hide(),this._renderLoadingView();var a=this.settings;a.close=!1;var b=new Talent.$.Deferred;return this.$el.stop().animate(this._dealAnimationData(a),a.duration,function(){b.resolve()}),b},_fullScreenUrl:function(){var a=this.model.get("type"),b="";"task"==a&&(b="#more/taskinfo?id="+this.model.get("id")),""!=b&&this.settings.showFullScreenButton?this.ui.openScreen.attr("href",b).show():this.ui.openScreen.hide()},_renderTaskDetailView:function(){this.taskDetailView=new TaskDetailView({id:this.model.get("id"),topBias:this.settings.topBias,model:this.viewModel||new Talent.Model}),this.listenTo(this.taskDetailView,"getDataAfter",function(){this.loadingView&&this.loadingView.close()}),this.detailContainer.show(this.taskDetailView)},_renderIframe:function(){var a=this,b=this.model.get("id"),c=Context.getUserInfo(),d=(Context.getGlobal("env")||"Production",this.height),e=Context.getGlobal("webPath"),f=(Context.getGlobal("env")||"Production","//www."+e+"/"+c.Id+"/ITalentHome?v="+(new Date).getTime()+"#more/taskinfo?Id="+b);this.ui.iframe.css({height:d+"px"});var g=this.ui.iframe[0];g.attachEvent?g.attachEvent("onload",function(){a.ui.iframe.show(),a.loadingView&&a.loadingView.close()}):g.onload=function(){a.ui.iframe.show(),a.loadingView&&a.loadingView.close()},g.src=f},_dealAnimationData:function(a){var b,c={};return b="left"===a.position||"right"===a.position?a.close?"-"+(a.width+this.bias)+"px":"0px":a.close?"-"+(a.height+this.bias)+"px":"0px",c[a.position]=b,c},onClose:function(){Talent.$(document).off("click.Pull-Screen-Region-View"),Talent.$(window).off("resize.Pull-Screen-Region-View")}}),MembershipView=Talent.Layout.extend({defaults:{showShare:!0,type:0,changeShareRoute:null,changeGroupRoute:null,requestShare:function(){var a=new Deferred;return a.resolve(),a.reject(),a}},template:jst["membership/membership-tab-component"],regions:{tabRegion:{selector:"#membership_tab"}},ui:{arrow:".membership_arrow_icon",arrowBtn:".membership_arrow",tab:".membership_tab_title",tabLi:".membership_tab_title li"},events:function(){var a={};return a["click "+this.ui.arrowBtn]="afterArrowClick",a["click "+this.ui.tabLi]="afterTabClick",a},modelEvents:{"change:mode":"afterViewModeChange","change:viewName":"afterViewNameChange"},initialize:function(a){var b=this;this.setting=Talent._.extend({},this.defaults,a);var c=Talent.app.request("history:getQueryObject"),d=new Talent.$.Deferred;return c.done(function(c){b.routerData=c;var d={mode:"narrow",viewName:"membership",showBottom:!1,showTab:!1},e=Talent.$.extend({},d,a);"undefined"!=typeof b.routerData.viewName&&b.routerData.viewName&&(e.viewName=b.routerData.viewName),b.model=new Talent.Model(e),b.userInfo=Context.getUserInfo(),b.userInfo.MidAvatar=b.userInfo.Avatar.replace("_s","_m"),b.options.model&&b.listenTo(b.options.model,"change:viewName",function(){var a=b.options.model.get("viewName");b.model.set("viewName",a),b.$el.find(".membership_tab_title li").removeClass("active"),b.$el.find("li[data-name="+a+"]").addClass("active")})}),d},onRender:function(){var a=this;Talent.app.vent.off("membership:show:wide"),Talent.app.vent.on("membership:show:wide",function(){a.model.set("mode","wide")}),0==this.model.get("showTab")&&this.$el.find(".membership_tab_top").remove(),this.$el.find(".membership_tab_title li span").tipsy({gravity:"se"}),this.ui.arrowBtn.tipsy({title:function(){return"wide"==a.model.get("mode")?"收起隔级查看":"展开隔级查看"},gravity:"e"}),this.afterViewModeChange(!0)},getActiveId:function(){var a=this,b=new Talent.$.Deferred,c=Talent.app.request("history:getQueryObject");return c.done(function(c){a.activeId=c.to_user_id?c.to_user_id:Context.getUserInfo().Id,b.resolve(a.activeId)}),b.promise()},renderMembershipView:function(){"wide"==this.model.get("mode")?this.renderMembershipTabView():this.renderMembershipTabThumbView()},renderMembershipTabThumbView:function(){var a=this;this.getActiveId().done(function(b){{var c=Context.getUserInfo().Id;OrgCollection.getSubordinateData({id:c,type:a.setting.type}).done(function(c){var d=(c[0],c);d=1==d.length?[]:d,this.subordinate=d;var e=new MembershipTabThumbCompositeView({collection:new Talent.Collection(d),model:new Talent.Model({activeId:b,viewName:"membership"})});e.on("change:mode",function(b){a.model.set("mode",b)}),a.tabRegion&&a.tabRegion.show(e),a.bindEvents(e)})}})},renderMembershipTabView:function(){var a=this,b=Context.getUserInfo().Id;this.getActiveId().done(function(c){a.membershipTabLayout?(b==c&&a.membershipTabLayout.model.set({middleId:c,direction:"down",activeId:c,profileId:c,type:a.setting.type}),a.tabRegion.show(a.membershipTabLayout)):(a.membershipTabLayout=new MembershipTabLayout({model:new Talent.Model({middleId:c,direction:"down",activeId:c,profileId:c,type:a.setting.type})}),a.tabRegion.show(a.membershipTabLayout),a.bindEvents(a.membershipTabLayout))})},renderShareView:function(){var a=this;this.getActiveId().done(function(b){this.setting.requestShare().done(function(){var c=resp;a.afterRenderShareView(b,c)})})},afterRenderShareView:function(a,b){b=b&&b.length?b:[];var c=new MembershipTabThumbCompositeView({collection:new Talent.Collection(b),model:new Talent.Model({activeId:a,viewName:"share"})});this.tabRegion.show(c),this.bindEvents(c)},renderNarrowViewByData:function(){var a=this;this.$el.find(".membership_tab_title li span").tipsy("enable"),this.ui.arrow.removeClass("membership_arrow_right").addClass("membership_arrow_left"),this.$el.find(".membership_right").addClass("short"),this.$el.find(".membership_tab_title").fadeIn("fast"),this.getActiveId().done(function(b){this.setting.requestShare().done(function(c){var d=c||[];OrgCollection.getSubordinateData({id:b}).done(function(c){var e=(c[0]&&c[0].subordinate,c),f="membership",g=e.length&&1!=e.length?e:[];(1==e.length||0==e.length)&&d.length&&(f="share",g=d);var h=new MembershipTabThumbCompositeView({collection:new Talent.Collection(g),model:new Talent.Model({activeId:b,viewName:f})});a.tabRegion.show(h),a.bindEvents(h),a.model.set("viewName",f,{silent:!0}),"share"==f?(a.ui.tab.find(".active").removeClass("active"),a.ui.tab.find("li[data-name=share]").addClass("active")):(a.ui.tab.find(".active").removeClass("active"),a.ui.tab.find("li[data-name=membership]").addClass("active"))})})})},afterArrowClick:function(){var a="wide"==this.model.get("mode")?"narrow":"wide";this.model.set("mode",a)},afterViewModeChange:function(){this.tabRegion.close();{var a=this,b=this.model.get("mode");this.model.get("showTab")}"wide"==b?(this.$el.find(".membership_icon_st").tipsy("disable"),this.$el.find(".membership_icon_share").tipsy("disable"),this.ui.arrow.removeClass("membership_arrow_left").addClass("membership_arrow_right"),this.$el.find(".membership_right").removeClass("short"),this.$el.find(".membership_tab_title").removeClass("short").fadeIn("fast"),this.$el.find(".membership_right").animate({width:278},300,function(){a.afterViewNameChange()})):(this.$el.find(".membership_tab_title li span").tipsy("enable"),this.ui.arrow.removeClass("membership_arrow_right").addClass("membership_arrow_left"),this.$el.find(".membership_right").addClass("short"),this.$el.find(".membership_tab_title").fadeIn("fast"),this.$el.find(".membership_right").animate({width:65},300,function(){a.afterViewNameChange()}))},afterTabClick:function(a){Talent.$(".tipsy").remove();var b=Talent.$(a.currentTarget);if(!b.hasClass("active")){var c=b.attr("data-name");this.model.set("viewName",c),this.ui.tab.find(".active").removeClass("active"),b.addClass("active");var d=decodeURIComponent(location.hash);Talent.app.execute("history:navigate",d,!1)}},afterViewNameChange:function(){"membership"==this.model.get("viewName")?this.renderMembershipView():(this.renderShareView(),this.operate.close()),this.$el.find(".membership_tab_title li").removeClass("active"),this.$el.find("li[data-name="+this.model.get("viewName")+"]").addClass("active")},changeRoute:function(a){var b=this.model.get("viewName");return"share"==b?void this.changeShareRoute(a):void this.changeGroupRoute(a)},changeShareRoute:function(a){if("function"==typeof this.setting.changeShareRoute)return void this.setting.changeShareRoute(a);var b,c=decodeURIComponent(location.hash);b=c.indexOf("?")>0?c.split("?")[0]:c,c=b+"?to_user_id="+a+"&viewName=share",Talent.app.execute("history:navigate",c,!0)},changeGroupRoute:function(a){if("function"==typeof this.setting.changeGroupRoute)return void this.setting.changeGroupRoute(a);var b=decodeURIComponent(location.hash),c="to_user_id="+a;-1!=b.indexOf("to_user_id")?b=b.replace(/to_user_id=\w+/,c):b+=b.indexOf("?")<0?"?to_user_id="+a:"&to_user_id="+a,Talent.app.execute("history:navigate",b,!0)},routerDataChange:function(){this.ui.arrow.hasClass("membership_arrow_left")&&this.renderMembershipTabThumbView()},bindEvents:function(a){var b=this;a.off("detailIdChanged"),a.on("detailIdChanged",function(a){b.changeRoute(a)})},templateHelpers:function(){return{showShare:this.setting.showShare}},onClose:function(){Talent.app.vent.off("membership:show:wide")}}),MembershipCompositeView=Talent.CompositeView.extend({template:jst["membership/membership-tab-composite"],tagName:"ul",initialize:function(a){this.options=a||{},this.itemViewOptions={direction:this.options.direction,middleId:this.options.middleId,activeId:this.options.activeId,hasSuperior:"0"==this.model.get("Id")?!1:!0},this.dealData(),this.collection=this.model.subordinate},onRender:function(){1==this.model.get("level")&&this.$el.addClass("first_ul"),2==this.model.get("level")&&this.$el.addClass("second_ul"),this.model.get("Id")==this.options.activeId&&this.$el.find("div:first").addClass("active"),this.options.hasSuperior?"0"==this.model.get("subordinateCount")&&"3"!=this.model.get("level")&&this.$el.find(".membership_line").addClass("membership_line_last"):"0"==this.model.get("subordinateCount")&&(this.$el.find(".membership_line").addClass("membership_line_last"),this.$el.find(".membership_line").css({width:0}))},appendHtml:function(a,b){a.$("li:first").find(".membership_subordinate_container").append(b.el)},dealData:function(){var a=12;(1==this.model.get("level")||2==this.model.get("level"))&&(a=6),this.model.set("subName",this.subString(this.model.get("Name"),a,!0))},subString:function(a,b,c){for(var d=0,e="",f=/[^\x00-\xff]/g,g="",a=a||"",h=a.replace(f,"**").length,i=0;h>i&&(g=a.charAt(i).toString(),null!=g.match(f)?d+=2:d++,!(d>b));i++)e+=g;return c&&h>b&&(e+="..."),e}}),MembershipTabCompositeView=Talent.CollectionView.extend({itemView:MembershipCompositeView,events:{"click .membreship_subordinate_btn":"changeActiveId","click .membership_item_short":"changeActiveId","click .membership_item_long":"changeProfileId"},initialize:function(a){this.itemViewOptions=this.model.toJSON()},changeActiveId:function(a){var b=this,c=Talent.$(a.target).parents("li"),d=c.attr("data-id"),e=c.attr("level");if(3!=e){var f=OrgCollection.getSuperior({id:d}),g="1"==e?"1-3":"2-3";f.done(function(a){b.trigger("changeActiveId",{middleId:a,direction:g,activeId:d})})}else this.trigger("changeActiveId",{middleId:d,direction:"3-2",activeId:d});a.stopPropagation()},changeProfileId:function(a){{var b=Talent.$(a.target).parents("li"),c=b.attr("data-id");b.attr("")}this.trigger("changeProfileId",{profileId:c,activeId:c,middleId:this.model.get("middleId")})},onRender:function(){this.$el.find(".second_ul .membership_subordinate_container>ul:last").find(".membership_line").addClass("membership_line_last")},onShow:function(){this.trigger("allItemShow")}}),regionType=Talent.Region.extend({show:function(a){var b=this;this.ensureEl();var c=a.isClosed||_.isUndefined(a.$el),d=a!==this.currentView;d&&this.close(),a.render(),d||c?this.open(a).done(function(){b.currentView=a,Marionette.triggerMethod.call(b,"show",a),Marionette.triggerMethod.call(a,"show")}):(this.currentView=a,Marionette.triggerMethod.call(this,"show",a),Marionette.triggerMethod.call(a,"show"))},open:function(a){var b=new $.Deferred;return this.$el.empty().append(a.el),addAnimate(a,b),b.promise()}}),MembershipTabLayout=Talent.Layout.extend({template:jst["membership/membership-tab-layout"],className:"membership_tab_container",regions:{tab:{selector:".membership_tab_staff_container",regionType:regionType}},ui:{tab:".membership_tab_staff_container",backContainer:".membership_back",backBtn:".membership_back_btn"},events:{"click .membership_back_btn":"showTopStaffView"},modelEvents:{"change:middleId":"renderTabView","change:profileId":"renderProfileView","change:activeId":"renderActive"},initialize:function(){},onRender:function(){},getTabData:function(){{var a=new $.Deferred;OrgCollection.getDataType({id:this.model.get("middleId"),activeId:this.model.get("activeId"),type:this.model.get("type")}).done(function(b){a.resolve(b)})}return a.promise()},renderTabView:function(){var a=this,b=Talent.Model.extend({initialize:function(){var a=this.get("subordinate");a&&(this.subordinate=new c(a),this.unset("subordinate"))}}),c=Talent.Collection.extend({model:b});this.getTabData().done(function(b){if(!b){var d=new MembershipTabLimitsView;return a.renderTabBottomStaff(d),void a.updateDimension()}a.membershipTabCompositeView=new MembershipTabCompositeView({collection:new c(b),model:a.model}),0==b[0].Id&&0==b[0].subordinate[0].Id?(a.ui.backBtn.slideUp("slow"),a.ui.tab.addClass("membership_top_staff")):(a.ui.backBtn.slideDown("slow"),a.ui.tab.removeClass("membership_top_staff")),a.renderTabBottomStaff(a.membershipTabCompositeView),a.bindEvents(a.membershipTabCompositeView)})},renderTabBottomStaff:function(a){var b=this;b.tab.show(a),b.topContainer=!1},bindEvents:function(a){var b=this;a.on("changeActiveId",function(a){b.model.set(a)}),a.on("changeProfileId",function(a){b.model.set(a)}),a.on("allItemShow",function(){b.afterTabAllRender()})},afterTabAllRender:function(){this.updateDimension();var a=this,b=Talent._.debounce(function(){a.updateDimension()},400);$(window).off("resize.membership_page"),$(window).on("resize.membership_page",b)},renderProfileView:function(){var a=this.model.get("profileId");this.trigger("detailIdChanged",a)},renderActive:function(){var a=this.model.get("activeId"),b=this.ui.tab.find('[data-id="'+a+'"]').find("div:first");b.hasClass("active")||(this.ui.tab.find(".active").removeClass("active"),b.addClass("active"))},onShow:function(){this.renderTabView()},showTopStaffView:function(){var a=Context.getUserInfo().Id;this.model.set({middleId:a,direction:"2-3"})},getIsMobile:function(){for(var a=navigator.userAgent,b=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),c=!0,d=0;d<b.length;d++)if(a.indexOf(b[d])>0){c=!1;break}return c},updateDimension:function(){var a=Talent.$("#header-region").outerHeight(),b=(Talent.$("#main-region").outerHeight(),Talent.$(window).height()-a),c=b-11-Talent.$(".membership_tab_top").outerHeight()-Talent.$(".membership_back").outerHeight(),d=this.$el.find("#membership_scroll_container");d.height(c);var e=this.getIsMobile();e?d.scrollable({setStyle:!0}):this.tabScroll=new iScroll("membership_scroll_container",{hScrollbar:!1,scrollbarClass:"myScrollbar"})}}),MembershipTabLimitsView=Talent.ItemView.extend({template:jst["membership/membership-tip-limits"],tipTemplate:jst["membership/membership-tab-limits-tip"],className:"membership_none_limited",ui:{askForBtn:"a[data-type=askForButton]",successCont:".membership_askfor_success",askForCont:".membership_askfor",helpBtn:".gohelp a"},events:function(){var a={};return a["click "+this.ui.askForBtn]="askForOpen",a["click "+this.ui.helpBtn]="showHelp",a},templateHelpers:function(){var a=this.i18n;return{i18n:a}},initialize:function(){var a=this;this.i18n=Context.getI18n(),Talent.$(document).off("click.Membership-Tab-Limits-Tip:ShowHlep"),Talent.$(document).on("click.Membership-Tab-Limits-Tip:ShowHlep",function(){a.helpDialog&&a.helpDialog.hide()})},onClose:function(){Talent.$(document).off("click.Membership-Tab-Limits-Tip:ShowHlep")},askForOpen:function(){var a=this;OrgCollection.getOpenUserOrg({}).done(function(b){b&&(a.ui.askForCont.hide(),a.ui.successCont.show())})},showHelp:function(a){a.stopPropagation(),this.helpDialog=new Tdialog({sure:!1,cancel:!0,cancelText:"关闭",type:1}),this.helpDialog.render(),Talent.$("body").append(this.helpDialog.$el);var b=this.i18n,c=this.tipTemplate({imgUrl:Context.getStaticUrl("images/member-ship-limits-tip.jpg"),i18n:b});this.helpDialog.show(this.ui.helpBtn,c,{pos:"bottomCenter",arrow:!1})}}),MembershipThumbItemView=Talent.ItemView.extend({template:jst["membership/membership-tab-thumb-item"],tagName:"li",onRender:function(){this.$el.attr("data-id",this.model.get("Id")),this.$el.find(".membership_thumb_img").tipsy({gravity:"e",fallback:this.model.get("Name")});var a=this.model.get("Type")?this.model.get("Type"):0;a&&this.$el.addClass("dotted_radius_parent")}}),MembershipEmptyView=Talent.ItemView.extend({template:Talent._.template('<div class="membership_empty_tips"><%= text  %></div>'),initialize:function(a){var a=a||{};this.templateHelpers=a}}),MembershipTabThumbCompositeView=Talent.CompositeView.extend({className:"membership_thumb_container",template:jst["membership/membership-tab-thumb-composite"],itemView:MembershipThumbItemView,itemViewContainer:".membership_thumb_container",emptyView:MembershipEmptyView,events:{"click .membership_thumb_img":"changeActiveId","click .membership_fold":"changeMode"},initialize:function(){if(0==this.collection.models.length){var a="membership"==this.model.get("viewName")?"暂无下属":"暂无共享";this.itemViewOptions={text:a}}},onAfterItemAdded:function(a){var b=parseInt(this.model.get("activeId"));(b==parseInt(a.model.get("Id"))||b==parseInt(a.model.get("id")))&&a.$el.find(".membership_thumb_img").addClass("active")},changeMode:function(){this.trigger("change:mode","wide")},changeActiveId:function(a){var b=Talent.$(a.currentTarget),c=b.parents("li").attr("data-id");this.$el.find(".membership_thumb_img").removeClass("active"),b.addClass("active"),this.trigger("detailIdChanged",c)},onRender:function(){"share"==this.model.get("viewName")&&this.$el.addClass("membership_share_container"),"membership"==this.model.get("viewName")&&this.$el.find("li").first().after('<div class="membership_fold_container"><div class="membership_fold"><span class="membership_fold_arrow"></span>展开</div></div>')},onShow:function(){this.updateDimension();var a=this,b=Talent._.debounce(function(){a.updateDimension()},400);$(window).off("resize.membership_page"),$(window).on("resize.membership_page",b)},updateDimension:function(){var a=Talent.$("#header-region").outerHeight(),b=(Talent.$("#main-region").outerHeight(),Talent.$(window).height()-a),c=b-1-Talent.$(".membership_tab_top").outerHeight()-Talent.$(".membership_bottom").outerHeight(),d=this.$el.find("#membership_scroll_container");d.height(c);var e=this.getIsMobile();e?d.scrollable({setStyle:!0}):this.tabScroll=new iScroll("membership_scroll_container",{hScrollbar:!1,scrollbarClass:"myScrollbar"})},getIsMobile:function(){for(var a=navigator.userAgent,b=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),c=!0,d=0;d<b.length;d++)if(a.indexOf(b[d])>0){c=!1;break}return c}}),RewardUserSelectItemView=Talent.ItemView.extend({className:"user-info",tagName:"li",template:jst["reward/reward-user-select-item"],templateHelpers:function(){return{name:Talent._.TitaWidget_substring(this.model.get("name"),6,!1)}},onRender:function(){this.$el.attr("id",this.model.get("userId"))}}),RewardEmptyView=Talent.ItemView.extend({className:"reward-empty",tagName:"li",template:Talent._.template("暂无其他成员")}),RewardUserSelectView=Talent.CompositeView.extend({defaults:{feedId:""},itemView:RewardUserSelectItemView,itemViewContainer:"ul",className:"reward-other",template:jst["reward/reward-user-select"],emptyView:RewardEmptyView,ui:{userItem:"li",userList:"ul",loading:".reward-loading"},events:function(){var a={};return a["click "+this.ui.userItem]="_userItemHandler",a},initialize:function(a){var b=this;this.isClosed=!1,this.settings=Talent._.extend({},this.defaults,a),Talent.$(document).off("mousedown.reward-user-select-view"),Talent.$(document).on("mousedown.reward-user-select-view",function(a){a.preventDefault(),b.close()}),this.$el.off("mousedown.reward-user-select-view"),this.$el.on("mousedown.reward-user-select-view",function(a){a.stopPropagation()})},onRender:function(){},show:function(a,b){this._setPosition(a,b),this._requestMembers()},_userItemHandler:function(a){a.stopPropagation();var b=Talent.$(a.currentTarget),c=b.attr("id"),d=Talent._.filter(this.collection.toJSON(),function(a){return a.userId==c});this._changeModel(d[0])},_changeModel:function(a){a.avatar.color=a.avatar.Color,a.avatar.medium=a.avatar.Medium,this.model.set(a),this.trigger("changeUser",a)},_setPosition:function(a,b){Context.setPosition(a,this.$el,{container:b,topBias:8})},_requestMembers:function(){var a=this,b={task_id:this.settings.feedId};this.ui.userList.hide(),TaskCollection.membersTask(b).done(function(b){if(!a.isClosed){a.ui.loading.hide(),a.ui.userList.show();for(var b=b&&b.length>0?b:[],c=Talent.Context.getUserInfo(),d=[],e=0;e<b.length;e++){var f=b[e];f.userId!==c.Id&&d.push(f)}var g=d.length;g>4||4==g||0==g?(a.$el.width(230),a.$el.find("ul").width(200)):(a.$el.width(50*g+30),a.$el.find("ul").width(50*g)),a.collection.reset(d)}})},onClose:function(){this.isClosed=!0,this.$el.off("mousedown.reward-user-select-view"),Talent.$(document).off("mousedown.reward-user-select-view")}}),RewardAppView=Talent.ItemView.extend({defaults:{feedId:"",feedType:"",rewardType:"give",isEditUser:!0},template:jst["reward/reward-give"],className:"reward-app",modelEvents:{"change:stage":"render","change:payStatus":"render"},ui:{close:"[data-name=close]",headBox:"[data-name=head-box]",icoChangeUser:"[data-name=ico-change-user]",buttonSubmit:"[data-name=submit-btn]",form:"form",inputIntro:"[data-name=intro]",inputMoney:"[data-name=set-money]",totalNum:"[data-name=num]",others:"[data-name=others]",erwerma:"[data-name=erwerma]",erwermaImg:"[data-name=erwerma] img",erwermaLoadingText:"[data-name=erwerma] p",erwermaTip:"[data-name=erwerma-tip]",refresh:"[data-name=refresh]",buttonAgain:"[data-name=reward-again]"},events:function(){var a={};
return a["click "+this.ui.close]="_closeHandler",a["click "+this.ui.buttonSubmit]="_submitHandler",a["focus "+this.ui.inputIntro]="_focusIntroHandler",a["keyup "+this.ui.inputIntro]="_keyupIntroHandler",a["blur "+this.ui.keyup]="_inputIntroHandler",a["blur "+this.ui.inputIntro]="_blurIntroHandler",a["focus "+this.ui.inputMoney]="_focusIntroHandler",a["keyup "+this.ui.inputMoney]="_keyupIntroHandler",a["blur "+this.ui.inputMoney]="_blurIntroHandler",a["keydown "+this.ui.inputMoney]="_keypressMoneyHandler",a["click "+this.ui.others]="_showOtherHandler",a["click "+this.ui.refresh]="_refreshHandler",a["click "+this.ui.buttonAgain]="_agaminhHandler",a["click "+this.ui.erwermaTip]="_submitHandler",a},templateHelpers:function(){return{rewardType:this.settings.rewardType,isShowOtherBtn:20==this.settings.feedType?!0:!1,isEditUser:this.settings.isEditUser,maxMoney:this.maxMoney}},initialize:function(a){var b=this;this.settings=Talent._.extend({},this.defaults,a),this.moneyKeyCode=0,this.maxMoney=200,this.introMax=20,this.orderResMaxTimer=18e5,this.initIntroNum,this.initMoneyNum,this.model.set({stage:1,money:0,payStatus:0}),"give"==this.settings.rewardType?Talent._.extend(this.ui,{setMoney:"[data-name=set-money]",errorTip:"[data-name=error-tip]"}):Talent._.extend(this.ui,{}),"beg"==this.settings.rewardType&&this.$el.addClass("reward-app-tao"),this.$el.off("click.reward-app-view"),this.$el.on("click.reward-app-view",function(a){a.stopPropagation()}),this.$el.off("mousedown.reward-app-view"),this.$el.on("mousedown.reward-app-view",function(a){a.stopPropagation(),b.rewardUserSelectView&&b.rewardUserSelectView.close()})},onRender:function(){var a=this;this.inputTime=null,this.Timer&&clearInterval(this.Timer),this.ui.inputIntro.bind("input propertychange",function(b){a._inputIntroHandler(b)}),this.ui.inputMoney.bind("input propertychange",function(b){a.inputTime&&clearTimeout(a.inputTime),a.inputTime=setTimeout(function(){a._inputIntroHandler(b)},200)}),this.propertychange_value="",this._setUserHandler(this.ui.icoChangeUser)},onShow:function(){this._randomText(),this._renderSimplemodal()},_close:function(){this.simplemodal&&this.simplemodal.close()},_getObjType:function(a){return{1:10,5:8,7:32,20:7,80:26}[a]||10},_agaminhHandler:function(){this.model.set({payStatus:0,stage:1}),this._randomText()},_changeUserEvent:function(){this.render(),this._randomText()},_showOtherHandler:function(){this.rewardUserSelectView&&this.rewardUserSelectView.close(),this.rewardUserSelectView=new RewardUserSelectView({feedId:this.settings.feedId}),this.listenTo(this.rewardUserSelectView,"changeUser",function(a){this.model.set({stage:1,money:0,user:a}),this._changeUserEvent()}),this.ui.headBox.append(this.rewardUserSelectView.render().$el),this.rewardUserSelectView.show(this.ui.others,this.ui.headBox)},_keypressMoneyHandler:function(a){var b=a.keyCode;this.moneyKeyCode=b,8==b||110==b||46==b||57>=(b>=48)||105>=(b>=96)||(a.returnValue=!1)},_randomText:function(){var a=["一毛也是真爱啊","四舍五入就是一块钱啊，拿去买糖吧","拿了我的9毛9，加油努力久久久","继续加油，大步走向人生巅峰","就喜欢你笑傲江湖的样子","特别的爱给特别努力的你","多一份爱，多一份努力","牛牛牛，拿去挥霍吧","少给一分，怕你骄傲","多给一分，不怕你骄傲","十分投入，十分回报","感觉你贰贰哒，继续努力哦","你我同心,其利断金","辣么厉害，32个赞","要努力！！为了你的奥迪我的迪奥","雄心壮志是茫茫黑夜中的北斗星","天下才有一石,你独占八斗","感谢你的兢兢业业","加油，加油，我为你而加油","与你搭档，干活不累","你就是那面大旗","赐予你力量！","只有一块不生气"],b=["0.10","0.50","0.99","1.21","2.33","5.20","5.21","6.66","9.99","10.01","10.00","2.22","2.00","3.20","8.88","7.77","8.00","11.11","9.18","5.32","9.00","1.80","1.00"];"beg"==this.settings.rewardType&&(a=["我的月光女神，赐予我力量吧","我的魅力男神，请赐予我爱得光芒吧","给我一个红包，我的小宇宙就燃烧了","不管大红包，小红包，给我一个就是好红包","我只想要红包，真爱就算了","如果不能给我一只机器猫，就给我一个红包吧","报告老板，给我一个红包吧","两只黄鹂鸣翠柳，来个红包做朋友","天苍苍，野茫茫，一个红包就疯狂","金包银包不如来个红包","心有灵犀一点通，没有红包说不通","佛说，任由七苦，一苦谓之求而不得","大河向东流啊，红包给我就知足","身无彩凤双飞翼，不给红包就生气","急需一个红包安慰","要想工作没烦恼，红包打赏少不了","没有什么是一个红包解决不了的","不给点东风，任务怎么能快速完成呢"]);var c=Math.floor(Math.random()*a.length);this.initIntroNum==c&&(c+=1,c>a.length&&(c-=1),this.initIntroNum=c);var d=a[c]||a[0],e=b[c]||b[0];this.model.set({introContent:d,money:e}),this.ui.inputIntro.val(d),this.ui.totalNum.text(d.length),"give"==this.settings.rewardType&&this.ui.setMoney.val(e)},_refreshHandler:function(){this._randomText(),this._toggleSubmitBtn()},_focusIntroHandler:function(a){var b=Talent.$(a.currentTarget);b.parent().removeClass("error-input").addClass("focus-input"),b.select()},_blurIntroHandler:function(a){var b=Talent.$(a.currentTarget),c=Talent.$.trim(b.val()),d=b.attr("data-name");if(b.parent().removeClass("focus-input"),"set-money"==d&&(c=Number(c)||0),"set-money"==d&&0!=c){var e=c.toString().split(".");1==e.length&&(c+=".00"),2==e.length&&(""==e[0]&&""==e[1]&&(c="0.00"),""==e[0]&&""!=e[1]&&(c="0"+c),""!=e[0]&&""==e[1]&&(c+="00"),""!=e[0]&&""!=e[1]&&1==e[1].length&&(c+="0")),this.propertychange_value=c,this.model.set({money:this.propertychange_value}),b.val(this.propertychange_value)}else"set-money"==d&&0==c?(this._toggleSubmitBtn(),this.propertychange_value="0.00",this.model.set({money:this.propertychange_value}),b.val(this.propertychange_value)):this.model.set({introContent:c})},_inputIntroHandler:function(a){var b=Talent.$(a.currentTarget),c=Talent.$.trim(b.val()),d=b.attr("data-name");if("set-money"==d&&this.propertychange_value!==c){if(""==c)return this.model.set("money","0.00"),void this._toggleSubmitBtn();if(c=this._validateIsMoney(c),this.propertychange_value=c,this.model.set("money",this.propertychange_value),c.toString().length>6&&(this.propertychange_value=Number(c.toString().substr(0,6)),this.model.set("money",this.propertychange_value),b.val(this.propertychange_value)),Number(c)>this.maxMoney)return b.parent().addClass("error-input"),this._toggleSubmitBtn(),void this._toggleErrorTip(!0);b.parent().removeClass("error-input"),this._toggleErrorTip(!1),b.val(this.propertychange_value)}else this.propertychange_value!==c&&"intro"==d?(c.length>this.introMax&&(this.propertychange_value=c.substr(0,this.introMax)),c.length<=this.introMax&&(this.propertychange_value=c),b.val(this.propertychange_value),this.model.set({introContent:this.propertychange_value}),this.ui.totalNum.text(c.length)):this.propertychange_value==c&&0==c.length&&("intro"==d&&(this.ui.totalNum.text(0),this.model.set({introContent:""})),"set-money"==d&&this.model.set({money:"0.00"}));this._toggleSubmitBtn()},_keyupIntroHandler:function(a){var b=a.keyCode,c=Talent.$(a.currentTarget),d=Talent.$.trim(c.val()),e=c.attr("data-name");8==b&&(this.propertychange_value=d,"set-money"==e?this.model.set("money",d):(this.model.set("introContent",d),this.ui.totalNum.text(d.length)),this._toggleSubmitBtn())},_toggleErrorTip:function(a){a?this.ui.errorTip.show():this.ui.errorTip.hide()},_validateIsMoney:function(a){for(var b="",c=0,d=!1,e=0,f=0;f<a.length;f++){var g=a[f];if(!/[0-9\.]/.test(g))return b;if(d&&f>c+2)return b;if("."==g){if(e+=1,e>1)return b;c=f,d=!0}b+=g}return b},_getUserInfo:function(){var a=this;UserCollection.getByIds({ids:this.model.get("userId")}).done(function(b){return b&&b.length?(a.model.set({weixinPayDimensionCode:b[0].weixinPayDimensionCode,email:b[0].email}),void a._renderSimplemodal()):void(a.simplemodal&&a.simplemodal.close())}).fail(function(){})},_toggleSubmitBtn:function(){var a=this.model.get("user")||{},b=this.model.get("money"),c=this.model.get("introContent");return a.userId?""==b||0==Number(b)||b>this.maxMoney?void this.ui.buttonSubmit.addClass("disabled"):""==c?void this.ui.buttonSubmit.addClass("disabled"):void this.ui.buttonSubmit.removeClass("disabled"):void this.ui.buttonSubmit.addClass("disabled")},_submitHandler:function(a){var b=Talent.$(a.currentTarget),c=this.model.get("user"),d=this.model.get("money");b.hasClass("disabled")||""!=d&&0!=Number(d)&&c&&c.userId&&("give"==this.settings.rewardType?(this.model.set({stage:2}),this._requestOrderAjax()):this._addComment())},_requestOrderAjax:function(){var a=this;data=this.model.toJSON();var b="打赏"+data.user.name+" "+data.money+"元，"+data.introContent;WxpayCollection.UpdateState({toUserId:data.user.userId,totalFee:data.money,objId:this.settings.feedId,objType:this._getObjType(this.settings.feedType),description:b}).done(function(b){a.ui.erwermaLoadingText.hide(),a.ui.erwermaImg.attr("src",b.url||""),a.Timer&&clearInterval(a.Timer),a.Timer=setInterval(function(){a._getPayResult(b.orderId)},1e3)}).fail(function(){a.ui.erwermaTip.show(),a.ui.erwerma.hide()})},_getPayResult:function(a){var b=this,c=location.host,d=Context.getGlobal("apiPath");if(d.split("//")[1]===c)var e=window;else var e=$('iframe[src="'+d+'/iframe.html"]')[0].contentWindow;var f=e.XMLHttpRequest?new e.XMLHttpRequest:e.ActiveXObject?new e.ActiveXObject("Microsoft.XMLHTTP"):new e.XMLHttpRequest;f.open("GET",Context.getApiUrl("wx/pay/order")+"?orderId="+a,!0),f.onreadystatechange=function(){if(4===f.readyState){if(200===f.status){var a=JSON.parse(f.responseText);1==a.Code&&(0!==a.Data.status&&b.Timer&&clearInterval(b.Timer),1==a.Data.status?(b.model.set("payStatus",1),b._addComment()):6==a.Data.status&&b.model.set("payStatus",-1))}if(401===f.status){{BSGlobal.logoutUrl||"/Account/Logout"}location.reload()}}},f.setRequestHeader("Accept","*"),f.setRequestHeader("Content-Type","application/json;charset=utf-8"),f.setRequestHeader("X-Beisen-ts",(new Date).getTime()),f.setRequestHeader("X-XSRF-Token",Context.getGlobal("webApiToken")),f.send(null)},_addComment:function(){var a=this.model.toJSON();if("give"!=this.settings.rewardType){var b=a.user.name+"，"+a.introContent+'，<a href="javascript:void(950);" data-name="feed-reward-give" class="reward-give_feb">打赏</a> 一个呗',c=this,d={FeedId:this.settings.feedId,Content:b,Type:10};"give"==this.settings.rewardType&&(d.Type=9),CommentV2.postCommentAdd(d).done(function(a){c.trigger("addComment",a),"beg"==c.settings.rewardType&&c._close()}),"beg"==this.settings.rewardType&&this._triggerMessage()}},_triggerMessage:function(){var a=this.model.toJSON(),b=a.user.name+"，"+a.introContent+"，打赏一个呗";MessageCollection.taoShangMessage({toUserid:this.model.get("user").userId,content:b,objId:this.settings.feedId,objType:this._getObjType(this.settings.feedType),feedType:this.settings.feedType})},_closeHandler:function(a){a.stopPropagation(),this.Timer&&clearInterval(this.Timer),this.simplemodal&&this.simplemodal.close()},_setUserHandler:function(a){var b=this;this.userSelectorView&&this.userSelectorView.close();var c=new UserSelectorCollection;c.excludeSelf=!0,this.userSelectorView=new UserSelector({collection:c}),this.userSelectorView.addNode(a,{muti:!1,container:this.$el}),a.on("submit",function(a,c){a.stopPropagation(),b.model.set({user:{name:c.Name,userId:c.Id,mail:c.Email,avatar:{Big:c.UserAvatar.Big,color:c.UserAvatar.Color,hasAvatar:c.UserAvatar.HasAvatar,medium:c.UserAvatar.Medium,small:c.UserAvatar.Small,original:c.UserAvatar.Original}},stage:1}),b._changeUserEvent()})},_renderSimplemodal:function(){this.simplemodal=new Simplemodal({autoResize:!0,escClose:!1,fixed:!0,zIndex:3e3,overlayClose:!1,closeHTML:"",containerCss:{background:"transparent",border:"none"}}),Talent.$("body").on("click",".simplemodal-overlay",function(a){a.stopPropagation()}),Talent.$("body").on("click",".simplemodal-close",function(a){a.stopPropagation()}),this.simplemodal.render(this.$el).appendTo("body")},onClose:function(){this.Timer&&clearInterval(this.Timer),this.simplemodal&&this.simplemodal.close()}}),RewardDetailUserListItemView=Talent.ItemView.extend({template:jst["reward/reward-detail-userlist-item"],tagName:"span",className:"avatar-item",initialize:function(){this.$el.attr({"data-tip":"infotip","data-body":this.model.get("orderRecord"),container:this.$el})}}),RewardDetailUserListView=Talent.CompositeView.extend({template:jst["reward/reward-detail-userlist"],itemView:RewardDetailUserListItemView,itemViewContainer:"div[data-name=user-list]",className:"userlist-box",templateHelpers:function(){return{beyond:this.beyond,total:this.allData.length}},ui:{more:"[data-name=more]",userListBox:"div[data-name=user-list]"},events:function(){var a={};return a["click "+this.ui.more]="_moreHandler",a},initialize:function(){this.allData=this.collection.toJSON(),this.beyond=!1,this.moreNum=30,this.allData.length>this.moreNum&&(this.collection.reset(this.allData.slice(0,this.moreNum)),this.beyond=!0)},onShow:function(){$('[data-tip="infotip"]').infotip({delay:{show:100,hide:200},container:this.$el})},appendHtml:function(a,b){this.beyond?this.ui.more.before(b.el):this.ui.userListBox.append(b.el)},_moreHandler:function(a){var a=Talent.$(a.currentTarget);this.collection.reset(this.allData),a.hide()}}),RewardDetailView=Talent.ItemView.extend({defatuls:{feedId:"",feedType:"",user:{email:"",name:"",userId:"",avatar:""}},className:"dangshang-userlist",template:jst["reward/reward-detail"],templateHelpers:function(){return{}},ui:{shange:"[data-name=reward-shang]",tao:"[data-name=reward-tao]"},events:function(){var a={};return a["click "+this.ui.shange]="_renderRewardAppView",a["click "+this.ui.tao]="_renderRewardAppView",a},initialize:function(){this.userInfo=Talent.Context.getUserInfo(),this.settings=Talent._.extend({},this.defaults,this.options)},onRender:function(){var a=Context.getGlobal("Header")||[],b=Talent._.findWhere(a,{Code:"950"})?!0:!1;return b?void this._getDetailData():void this.$el.html("")},onShow:function(){$('[data-tip="infotip"]').infotip({delay:{show:100,hide:200},container:this.$el})},_getObjType:function(a){return{1:10,5:8,7:32,20:7,80:26}[a]||10},_getDetailData:function(){var a=this;WxpayCollection.getDaShangDetail({objId:this.settings.feedId,objType:this._getObjType(this.settings.feedType)}).done(function(b){var c=b&&b.orderRecords||[];c.length&&(a.rewardDetailUserListView&&a.rewardDetailUserListView.close(),a.rewardDetailUserListView=new RewardDetailUserListView({collection:new Talent.Collection(c),model:new Talent.Model(b)}),a.$el.append(a.rewardDetailUserListView.render().$el),a.rewardDetailUserListView.onShow())})},_renderRewardAppView:function(a){var b=Talent.$(a.currentTarget),c=b.data(),d={};d.user=this.settings.user.userId==this.userInfo.Id?{}:this.settings.user,this.rewardAppView&&this.rewardAppView.close(),this.rewardAppView=new RewardAppView({model:new Talent.Model(d),feedId:this.settings.feedId,feedType:this.settings.feedType,rewardType:c.reward}),this.rewardAppView.render(),this.rewardAppView.onShow()}}),titaWidget={PublistMblogView:PublistMblogView,TaskTrackVIew:FeedTrackView,TrackView:FeedTrackView,CommentListView:CommitListView,FeedListView:FeedListView,FeedTabListView:FeedTabListView,FeedExtraInfoListView:FeedExtraInfoListView,TaskCreateView:TaskCreateView,TaskListView:TaskListView,TaskDetailView:TaskDetailView,PullScreenView:PullScreenView,TipDialogView:TipDialogView,ConfirmDialogView:ConfirmDialogView,TDialogView:TDialogView,UploaderComponentView:UploaderComponentView,AttachmentListView:AttachmentListView,DateTimePickerView:DateTimePickerView,ClassComponentView:ClassComponentView,PlanDataJson:PlanDataJson,MembershipView:MembershipView,SetPosition:Context.setPosition,EmotionView:EmotionView,SetNoticeView:SetNoticeView,RewardDetailView:RewardDetailView};return titaWidget}),define("collections/plan-group-collection",["talent","collections/base-collection","collections/plan-list-collection","TitaWidget","moment"],function(a,b,c,d,e){a.$.ajax;return b.extend({url:"User/Plan/Table/item?",getTaskData:function(b){var c=new a.$.Deferred,d={type:"personal",to_user_id:"",StartDate:"",EndDate:"",startNum:1,count:100,planTableId:"",planTableType:"",fromLevel:1,toLevel:1};b=a._.extend({},d,b);var e="PlanTableTask/PersionTask?to_user_id="+b.to_user_id;return"personal"!=b.type&&(e="PlanTableTask/TeamTask"),this.request2({url:e,type:"post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getShareAndFeed:function(b){var c=new a.$.Deferred,d={to_user_id:"",planTableId:""};b=a._.extend({},d,b);var e="PlanTableTask/GetFeed";return this.request2({url:e,type:"get",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},_formatTree:function(b){function c(b){a._.each(b,function(b){var d=b.taskId,f=a._.where(e,{PId:d});return f=a._.compact(f),f.length?(b.Tasks=f,a._.each(f,function(a){a.level=b.level+1}),void c(f)):void(b.Tasks=[])})}var d=b||{},e=d.tasks;if(e&&e.length){var f=a._.where(e,{parentTaskId:null});a._.each(f,function(a){a.level=1}),c(f)}return d.tasks=f,d},GetSubPlans:function(b){var c=new a.$.Deferred,d={type:1,to_user_id:"",userIds:"",status:"",LableModels:"",SortType:"",RelationType:"",parentTaskId:"",StartDate:"",EndDate:"",fromLevel:1,toLevel:2,IsTeam:!1};b=a._.extend({},d,b);var e="PlanTableTask/SubTask?to_user_id="+b.to_user_id+"&type="+b.type;return this.request2({url:e,data:b,type:"post"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},getSearchPlanData:function(b){var c=new a.$.Deferred,d={type:"personal",to_user_id:"",StartDate:"",EndDate:"",startNum:1,count:100,planTableId:"",planTableType:"",Status:"",LableModels:"",UserIds:"",SortType:"",RelationType:"",fromLevel:1,toLevel:1,IsPage:!1};b=a._.extend({},d,b);var e="PlanTableTask/PersionTask?to_user_id="+b.to_user_id;return"personal"!=b.type&&(e="PlanTableTask/TeamTask"),this.request2({url:e,type:"post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getDataList:function(b){var c=new a.$.Deferred,d={to_user_id:"",plan_table_id:"",plan_table_type:"",feed_id:"",task_id:""};b=a._.extend({},d,b);var e="PlanV2/PersionlPlanItemList?to_user_id="+b.to_user_id+"&plan_table_id="+b.plan_table_id+"&plan_table_type="+b.plan_table_type+"&feed_id="+b.feed_id+"&task_id="+b.task_id;return this.request({url:e,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getNoticeTime:function(b){var c=new a.$.Deferred,d={obj_ids:"",obj_type:"7"};b=a._.extend({},d,b);var e="RemindV2/GetByObjIds?obj_type="+b.obj_type;return this.request({url:e,type:"POST",data:JSON.stringify(b.obj_ids),contentType:"application/json"}).done(function(b){c.resolve(a._.values(b))}).fail(function(a){c.reject(a)}),c},getDataPlanTask:function(b){var c=new a.$.Deferred,d={to_user_id:"",date:"",status:""};b=a._.extend({},d,b);var e="Plan/UserPlanItems?to_user_id="+b.to_user_id+"&date="+b.date+"&status="+b.status;return this.request({url:e,type:"Get"}).done(function(b){c.resolve(a._.values(b))}).fail(function(a){c.reject(a)}),c},getDataTeamPlanTask:function(b){var c=new a.$.Deferred,d={date:""},b=a._.extend({},d,b),e="Plan/PlanItemStatistic?date="+b.date;return this.request({url:e,type:"Get"}).done(function(b){var b=b||[];a._.each(b,function(a){a.UserId=a.User.UserId}),c.resolve(b)}).fail(function(a){c.reject(a)}),c},planSetMark:function(b){var c=new a.$.Deferred,d={type:"",plan_id:""},b=a._.extend({},d,b),e="PlanV2/Mark";return this.request({url:e,type:"POST",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getDataTeamPlan:function(b){var c=new a.$.Deferred,d={to_user_id:"",plan_table_id:"",start_date:"",end_date:""},b=a._.extend({},d,b),e="PlanV2/TeamPlanItemList",f=a.Context.splicingUrl(b,["plan_table_id","plan_table_type","start_date","end_date"]);return e=e+"?"+f,this.request({url:e,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getDataWeek:function(b){var c=new a.$.Deferred,d={date:""},b=a._.extend({},d,b);return this.request({url:"Plan/WeekPlanTable?",data:b,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getMonthPlan:function(b){var c={diff:"my",to_user_id:"",tag_id:""},d=new a.$.Deferred,b=a._.extend({},c,b),e="Home/Index?toUserId="+b.to_user_id+"&groupId="+b.group_id;return this.request({type:"Get",url:e}).done(function(a){d.resolve(a)}),d},getExpirePlan:function(b){var c=new a.$.Deferred,d={IsSubordinate:0},b=a._.extend({},d,b),e="Plan/ExpirePlanItems?IsSubordinate="+b.IsSubordinate;return this.request({url:e,type:"Get"}).done(function(b){var b=b||[];a._.each(b,function(a){a.UserId=a.User.UserId}),c.resolve(b)}).fail(function(a){c.reject(a)}),c},updateStatusData:function(a){return this.request({url:"PlanV2/UpdateStatus?"+a.queryUrl,type:"PUT"})},updateData:function(a){return a&&a.Description&&a.Description.replace(/[\n\r]/g,"<br>"),this.request({url:this.url,data:a,type:"PUT"})},updateDesc:function(a){return url="PlanV2/UpdateDescription",a&&a.Description&&a.Description.replace(/[\n\r]/g,"<br>"),this.request({url:url,data:a,type:"PUT"})},updateName:function(a){return url="PlanV2/UpdateName",a&&a.Description&&a.Description.replace(/[\n\r]/g,"<br>"),this.request({url:url,data:a,type:"PUT"})},updateDate:function(a){return url="PlanV2/UpdateDate",a&&a.Description&&a.Description.replace(/[\n\r]/g,"<br>"),this.request({url:url,data:a,type:"PUT"})},deleteData:function(a){return this.request({url:"PlanV2/Remove?"+a.queryUrl,type:"DELETE"})},addData:function(b){var c={Name:"",GroupId:"",PlanTableId:"",TagId:"",StartDate:"",DeadLine:"",LabType:"",LabName:"",LabId:"",Source:1,IsLongTerm:""},d="User/Plan/Table/item",b=a._.extend({},c,b);return b.table&&(d="User/Plan/Table"),this.request({url:d,data:b,type:"POST"})},getLinkPlan:function(b){var c=new a.$.Deferred;return this.request({url:"User/Plan/Table/item/",data:b,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},addDataByNameTime:function(b){var c={time:"",name:"",LabType:"",LabName:"",LabId:""},b=a._.extend({},c,b),d="User/Plan/Table/item?time="+b.time;return this.request({url:d,data:b,type:"Post"})},getItemData:function(b){var c=new a.$.Deferred;return this.request({url:"User/Plan/Table/item/"+b.plan_item_id,data:b,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getShareUserData:function(b){var c=new a.$.Deferred;return this.request({url:"planshare/UserPlanShare/GetCanLookMyPlanUsers",data:b,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},addShareUserData:function(b){var c=new a.$.Deferred;return this.request({url:"planshare/UserPlanShare/AddShareUser?tag_id="+b.tag_id+"&group_id="+b.group_id+"&plan_table_id="+b.plan_table_id,data:JSON.stringify(b.data),type:"Post",contentType:"application/json"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},deleteShareUserData:function(b){var c=new a.$.Deferred,d=a.Context.splicingUrl(b,["to_user_id","tag_id","group_id","plan_table_id"]);return this.request({url:"planshare/UserPlanShare/DeleteShareUser?"+d,data:b,type:"Post"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getShareWidthMeData:function(b){var c=new a.$.Deferred;return this.request({url:"planshare/UserPlanShare/GetShareMePlanUsers",data:b,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getAllHistroyData:function(b){var c=this,d=new a.$.Deferred;return this.request({url:"User/Plan/operation",data:b,type:"Get"}).done(function(a){return a?(c._dateHandler(a),c._hashUrl(a,"plan/histroy"),void d.resolve(a)):(a=[],void d.resolve(a))}).fail(function(a){d.reject(a)}),d},getHistroyData:function(b){var c=this,d=new a.$.Deferred,e=a.Context.splicingUrl(b,["group_id","tag_id","plan_table_id","to_user_id"]);return this.request({url:"User/Plan/operation?"+e,type:"Get"}).done(function(a){return a?(c._dateHandler(a),c._hashUrl(a,"plan"),void d.resolve(a)):(a=[],void d.resolve(a))}).fail(function(a){d.reject(a)}),d},getChartsData:function(b){var c="Plan/PlanTableStatistic?type="+b.type,d=new a.$.Deferred;return this.request({url:c,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},_dateHandler:function(a){var b=new Date,c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate();b.setDate(e-1);var f=b.getDate(),g=a[0];g&&c==g.Year&&d==g.Month&&e==g.Day&&(a[0].Today="今天"),g&&c==g.Year&&d==g.Month&&f==g.Day&&(a[0].Today="昨天");var h=a[1];h&&c==h.Year&&d==h.Month&&e==h.Day&&(a[1].Today="今天"),h&&c==h.Year&&d==h.Month&&f==h.Day&&(a[1].Today="昨天")},_hashUrl:function(a,b){for(x in a)a[x].Hash=b},getDataTask:function(b){var c="Plan/Table/item/Tasks?plan_item_id="+b.planItemId,d=new a.$.Deferred;return this.request({url:c,data:b,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},getPermanentShareUser:function(b){var c=new a.$.Deferred,d={};b=a._.extend({},d,b);var e="planshare/UserPlanShare/GetPermanentShareUser";return this.request({url:e,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},postAddPermanentShareUser:function(b){var c=new a.$.Deferred,d={to_user_id:""};b=a._.extend({},d,b);var e="planshare/UserPlanShare/AddPermanentShareUser?to_user_id="+b.to_user_id;return this.request({url:e,type:"Post"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},postDeletePermanentShareUser:function(b){var c=new a.$.Deferred,d={to_user_id:""},b=a._.extend({},d,b),e="planshare/UserPlanShare/DeletePermanentShareUser?to_user_id="+b.to_user_id;return this.request({url:e,type:"Post"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},postUpdateLable:function(b){var c=new a.$.Deferred,d={planItem_id:"",lable_id:"",lable_type:""},b=a._.extend({},d,b),e="PlanV2/UpdateLable";return this.request({url:e,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getLabelFullName:function(b){var c=new a.$.Deferred,d={lableId:0},b=a._.extend({},d,b),e="Lable/GetFullName?lableId="+b.lableId;return this.request({url:e,type:"get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getPlanDetailData:function(b){var c=new a.$.Deferred;return this.request({url:"PlanV2/GetObj?plan_item_id="+b.plan_item_id,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getMockDateData:function(b){var c=JSON.stringify(d.PlanDataJson),e={Data:JSON.parse(c)},f=this._findData(e,b),g=new a.$.Deferred;return g.resolve(f),g.promise();var f,g},_findData:function(b,c){var d=b.Data.taglist,f=c.date.split("/");if(0!=c.group_id&&e().year()!=f[0]){var g=a._.findWhere(d,{GroupId:c.group_id}),h=g,i=h.PlanTableListModels[2],j=i.PlanTableModels[0];return h.Active=!0,i.Active=!0,j.Active=!0,b}for(var k=!1,l=0;l<d.length;l++){var g=d[l],m=g.PlanTableListModels||[];if(k)break;for(var n=0;n<m.length;n++){var o=m[n]||{},p=o.PlanTableModels||[],q=o.TagId;if(k)break;for(var r=0;r<p.length;r++){var s=p[r],t=this._formatDate(s.StartDate),u=this._formatDate(s.EndDate);if(t<=c.date&&u>=c.date&&q>1&&14>q&&0!=r){if(g.GroupId==c.group_id||0==c.group_id)s.Active=!0,s.IsCurrentDate=!0,o.Active=!0,g.Active=!0;else{var g=a._.findWhere(d,{GroupId:c.group_id}),h=g,i=h.PlanTableListModels[2],j=i.PlanTableModels[0];h.Active=!0,i.Active=!0,j.Active=!0}k=!0}t>c.date&&(s.IsCurrentDate=!1)}}}return b},_formatDate:function(a){var a=a.replace("年","/");return a=a.replace("月","/"),a=a.replace("日",""),e(new Date(a)).format("YYYY/MM/DD")}})}),define("collections/user-collection",["talent","collections/base-collection"],function(a,b){return b.extend({url:"contact",getData:function(b){var c=new a.$.Deferred;return this.request({data:b,type:"GET"}).done(function(b){c.resolve(a._.values(b))}),c},search:function(b){var c=new a.$.Deferred;return this.request({url:"user",data:b,type:"GET"}).done(function(a){c.resolve(a)}),c},getSeeUserData:function(b){var c=new a.$.Deferred;return this.request({url:"RemindV2/Get",data:b,type:"GET"}).done(function(a){c.resolve(a)}),c},getByIds:function(a){var b={ids:[]},c=new Talent.$.Deferred,a=Talent._.extend({},b,a),d="user/GetByIds",e="?ids="+a.ids;return this.request2({url:d+e,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},loginValidate:function(a){var b={password:""},c=new Talent.$.Deferred,a=Talent._.extend({},b,a),d="user/login/validate";return this.request2({url:d,type:"POST",data:a}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c}})}),define("collections/plan-tag-collection",["talent","collections/base-collection"],function(a,b){return b.extend({url:"User/Plan/Table/Tag",create:function(b){var c=new a.$.Deferred,d={UserIds:"",MessageContent:"",EmailContent:"",GroupId:"",TagId:"",PlanTableId:"",MessageType:"12",Date:"",IsStatistics:0};b=a._.extend({},d,b);var e="PlanNotify/Notify";return this.request({url:e,type:"Post",data:b}).done(function(b){c.resolve(a._.values(b))}).fail(function(a){c.reject(a)}),c},update:function(b){var c=new a.$.Deferred;return this.request({data:JSON.stringify(b),type:"POST",contentType:"application/json"}).done(function(b){c.resolve(a._.values(b))}).fail(function(a){c.reject(a)}),c},getData:function(b){var c=new a.$.Deferred;return this.request({data:b,type:"GET"}).done(function(b){c.resolve(a._.values(b))}).fail(function(a){c.reject(a)}),c},notifyAdmin:function(b){var c=new a.$.Deferred;return this.request({url:"Notify/NotifyAdmin?notifyType="+b.notifyType,data:b,type:"Post"}).done(function(b){c.resolve(a._.values(b))}).fail(function(a){c.reject(a)}),c}})}),define("collections/user-subordinate-collection",["talent","collections/base-collection"],function(a,b){var c=[];return b.extend({url:"user",getData:function(b){var c=new a.$.Deferred,d={lv:1,type:0};return b=a._.extend({},d,b),this.request({url:"org/GetMySubordinates",type:"GET",data:b}).done(function(b){c.resolve(a._.values(b))}).fail(function(a){c.reject(a)}),c},getDirectSuperior:function(b){var c=new a.$.Deferred;return this.request({url:"org/DirectSuperior",type:"GET",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getSubordinate:function(b){var d=new a.$.Deferred;return this.request({url:"org/GetMySubordinates?lv="+b.level+"&type=0",type:"GET"}).done(function(b){var e=a.Context.getUserInfo().Id,f=a._.values(b),g=a._.pluck(f,"User");g=a._.compact(g);var h=a._.filter(g,function(a){return a.Id!=e});c=h,d.resolve(h)}).fail(function(a){d.reject(a)}),d},getAll:function(){var b=new a.$.Deferred;return this.request({url:"org/Get",type:"GET"}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},getDottedInfo:function(b){var c=new a.$.Deferred;return this.request({url:"org/GetMyDottedLineSuperior",type:"GET",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getSubInfo:function(b){var c=new a.$.Deferred;return this.request({url:"org/GetDottedLineSuperiors",type:"GET",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},addDotted:function(b){var c=new a.$.Deferred;return this.request({url:"org/AddDottedLineReporting",type:"POST",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},deleteDotted:function(b){var c=new a.$.Deferred;return this.request({url:"org/Remove",type:"POST",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},addData:function(b){var c=new a.$.Deferred;return this.request({data:b,type:"PUT"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},deleteData:function(b){var c=new a.$.Deferred;return this.request({url:"user?subordinate_user_id="+b.subordinate_user_id,type:"DELETE"}).done(function(b){c.resolve(a._.values(b))}).fail(function(a){c.reject(a)}),c}})}),define("collections/plan-common-collection",["talent","collections/base-collection"],function(a,b){return b.extend({postSendNotice:function(b){var c=new a.$.Deferred,d={UserIds:"",MessageContent:"",EmailContent:"",GroupId:"",TagId:"",PlanTableId:"",MessageType:"12",Date:"",IsStatistics:0};b=a._.extend({},d,b);var e="PlanNotify/Notify";return this.request({url:e,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c}})}),define("collections/feed-attachment-collection",["talent","collections/base-collection"],function(a,b){var c=b.extend({getData:function(b){var c=new a.$.Deferred;return this.request({url:"Document/AddFavorites/"+b.id,data:b,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c}});return c}),define("collections/schedule-list-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getData:function(b){var c="Schedule/Today?time="+b.time,d=new a.$.Deferred;return this.request({url:c,type:"GET"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)
}),d}})}),define("collections/indicator-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getData:function(b){var c=new a.$.Deferred;return this.request({url:"Indicator/Get",data:b,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},deleteData:function(b){var c=new a.$.Deferred;return this.request({url:"Indicator/Delete?indicatorType="+b.indicatorType,type:"DELETE"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getPlanOperationData:function(b){var c=new a.$.Deferred;return this.request({url:"Indicator/PlanOperation",data:b,type:"Get"}).done(function(a){a>99&&(a="99+"),0>a&&(a=0),c.resolve(a)}).fail(function(a){c.reject(a)}),c},indicatorClear:function(a){var b=new Talent.$.Deferred,c={messageType:0,indicatorType:0},a=Talent._.extend({},c,a),d="Indicator/Clear",e="?message_type="+a.messageType+"&indicator_type="+a.indicatorType;return this.request({url:d+e,type:"DELETE"}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b}})}),define("collections/project-detail-collection",["talent","collections/base-collection"],function(a,b){var c={feed:"Trends",task:"taskV2",principal:"TasksWithOutLevel",conference:"Conferences",file:"Documents",user:"Members",statisticsTasks:"StatisticsTasks"};return b.extend({defaults:{page_num:1,page_size:5},url:"Work/",getData:function(a){var b=this.url+c[a.detail_type]+"?work_id="+a.work_id;if("task"==a.detail_type&&(b="WorkMileStone/GetWorkMileStones?workId="+a.work_id+"&AppId="+a.appId+"&AppType="+a.appType),"conference"==a.detail_type){var d=a.conference_status?a.conference_status:1;b=b+"&status="+d}if("file"==a.detail_type){var e=a.pageNum||1,f=a.pageSize||20;b=b+"&pageNum="+e+"&pageSize="+f}return"operate"==a.detail_type&&(b="work/GetOperationV2?work_id="+a.work_id),"statistics"==a.detail_type&&(b="work/TaskStatistics?work_id="+a.work_id),"milepost"==a.detail_type&&(b="WorkMileStone/GetWorkMileStones?workId="+a.work_id),"statisticsTasks"==a.detail_type&&(b="Work/Grant?work_id="+a.work_id),this.request({url:b})},_formatTree:function(b){function c(b){a._.each(b,function(b){var d=b.taskId,f=a._.where(e,{parentTaskId:d});return f=a._.compact(f),f.length?(b.Tasks=f,a._.each(f,function(a){a.level=b.level+1}),void c(f)):void(b.Tasks=[])})}var d=b||{},e=d.tasks;if(e&&e.length){var f=a._.where(e,{parentTaskId:null});a._.each(f,function(a){a.level=1}),c(f)}return d.tasks=f,d},getTask:function(b){var c=new a.$.Deferred,d={work_id:"",mile_stone_id:"",fromLevel:1,toLevel:2,startNum:1,count:50};b=a._.extend({},d,b);var e="Work/Task?work_id="+b.work_id+"&mile_stone_id="+b.mile_stone_id;return this.request({url:e,type:"post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},searchTask:function(b){var c={userIds:"",status:"",date:"",LableModels:"",SortType:"",RelationType:"",work_id:"",mile_stone_id:""},d=new a.$.Deferred,b=a._.extend({},c,b),e="Work/Task?work_id="+b.work_id+"&mile_stone_id="+b.mile_stone_id;return this.request({type:"POST",url:e,data:b}).done(function(a){d.resolve(a)}),d.promise()},getDetailData:function(b){var c=new a.$.Deferred,d=a.Context.getApiUrl(this.url+"Get?work_id="+b.work_id);return a.$.ajax({url:d,type:"GET"}).done(function(a){c.resolve(0==a.Code?a:a.Data)}),c.promise()},updateData:function(){},deleteData:function(){},addData:function(){},shareData:function(a){return this.request(a)}})}),define("collections/message-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getData:function(b){var c,d=new a.$.Deferred,e="";return c=a.Context.splicingUrl(b,["pageIndex","pageSize","isRead","appType","appId"]),e="messages/GetMessages?"+c,this.request({url:e,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},getMessage:function(b){var c={page_size:20,page_num:1,status:1,app_type:-1,app_id:-1};b=a._.extend({},c,b);var d=new a.$.Deferred,e="messages/Get";return this.request({url:e,data:b,type:"get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},getDaiban:function(b){var c={app_type:-1,app_id:-1,page_num:1,page_size:20,status:1};b=a._.extend({},c,b);var d=new a.$.Deferred,e="todo/Get";return this.request({url:e,data:b,type:"get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},getMessageApproval:function(b){var c=new a.$.Deferred,d={},b=a._.extend({},d,b),e="Apply/Plan/GetSuperRule",f="is_dailyset="+!0;return this.request({url:e+"?"+f,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c}})}),define("collections/membership-collection",["talent","collections/base-collection"],function(a,b){return b.extend({url:"user",getData:function(a){var b=new $.Deferred;return this.request({url:this.url,type:"POST",data:{ids:a.data.join(",")}}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b.promise()}})}),define("collections/membership-group-collection",["talent","collections/base-collection","collections/membership-collection"],function(a,b,c){return b.extend({getData:function(b){var d=new $.Deferred,e=(a.Context.getUserInfo().Id,parseInt(b.id)),f=b.activeId&&parseInt(b.activeId)||0,g=this;return this.request({url:"org/all",type:"Get"}).done(function(b){if(!b.Res)return void d.resolve(b.Res);b=b.Data,b=g.getSuperiorAndSubordinate(b);var h=a._.where(b,{Id:parseInt(e)}),i=a._.pluck(a._.where(b,{Superior:e}),"Id");i=a._.compact(i);var j=a._.indexOf(i,f);-1!=j&&(i=i.slice(0,j).concat(i.slice(j+1,i.length)),i=[f].concat(i));var k=h&&h[0]&&h[0].Superior||0,l=[k,e].concat(i),m=new c;m.getData({data:l}).done(function(c){var f=a._.map(i,function(d){var e=c[d];if(e)return e.subordinateCount=a._.where(b,{Superior:d}).length,e.level=3,e});f=a._.compact(f);var g=c[e]||{Id:0};g.subordinateCount=a._.where(b,{Superior:e}).length,g.level=2,g.subordinate=f;var h=c[k]||{Id:0};h.level=1,h.subordinateCount=a._.where(b,{Superior:k}).length,h.subordinate=[g];var j=[h];d.resolve(j)})}).fail(function(a){d.reject(a)}),d.promise()},getDataType:function(b){var d=new $.Deferred,e=(a.Context.getUserInfo().Id,parseInt(b.id)),f=b.activeId&&parseInt(b.activeId)||0,g=this,h="org/allByType";if(1==b.type)var h=h+"?type=1";return this.request({url:h,type:"Get"}).done(function(b){if(!b.Res)return void d.resolve(b.Res);b=b.Data;var h=b;b=g.getSuperiorAndSubordinate(b);var i=a._.where(b,{Id:parseInt(e)}),j=a._.pluck(a._.where(b,{Superior:e}),"Id");j=a._.compact(j);var k=a._.indexOf(j,f);-1!=k&&(j=j.slice(0,k).concat(j.slice(k+1,j.length)),j=[f].concat(j));var l=i&&i[0]&&i[0].Superior||0,m=[l,e].concat(j),n=new c;n.getData({data:m}).done(function(c){var f=a._.map(j,function(d){var e=c[d];if(e)return e.subordinateCount=a._.where(b,{Superior:d}).length,e.level=3,e});f=a._.compact(f),a._.map(f,function(b){var c=a._.where(h,{Id:b.Id});if(c.length>1)var c=a._.where(c,{Superior:e});b.Type=c&&c[0]?c[0].Type:0}),a._.sortBy(f,"Type");var g=c[e]||{Id:0};g.subordinateCount=a._.where(b,{Superior:e}).length,g.level=2,g.subordinate=f;var i=c[l]||{Id:0};i.level=1,i.subordinateCount=a._.where(b,{Superior:l}).length,i.subordinate=[g];var k=[i];d.resolve(k)})}).fail(function(a){d.reject(a)}),d.promise()},getSubordinateData:function(b){b=b||{};var c=new a.$.Deferred,d="org/GetMySubordinates?lv=2";return d+=1==b.type?"&type=1":"&type=0",this.request({url:d,type:"Get"}).done(function(b){b&&b.length||c.resolve([]);var d=[];a._.each(b,function(a){a.User.Type=a.Type,d.push(a.User)}),c.resolve(d)}).fail(function(a){c.reject(a)}),c},getToUserIdSuperior:function(b){b=b||{};var c=new a.$.Deferred,d="org/Superiors?to_user_id="+b.to_user_id+"&lv=2";return this.request({url:d,type:"Get"}).done(function(a){var b=a||[];c.resolve(b.length?b[0].ParentUser:a)}).fail(function(a){c.reject(a)}),c},getSuperior:function(b){var c=new $.Deferred,d=this,e=(a.Context.getUserInfo().Id,parseInt(b.id));return this.request({url:"org/allByType",type:"Get"}).done(function(b){b=b.Data;var b=d.getSuperiorAndSubordinate(b),f=a._.where(b,{Id:e});if(0==f.length)var g=0;else var g=f[0].Superior||0;c.resolve(g)}),c.promise()},getOpenUserOrg:function(){var a=new $.Deferred;return this.request({url:"org/AppOpenUserOrg",type:"POST"}).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a.promise()},getSuperiorAndSubordinate:function(b){function c(d){var e=a._.where(b,{Superior:d});a._.each(e,function(a){f.push(a),1!=a.Type&&c(a.Id)})}var d=a.Context.getUserInfo().Id,e=a._.where(b,{Id:d})[0];if(a._.isEmpty(b))return b;if(0==e.Superior)return b;{var f=[];e.Superior}return f.push({Id:d,Superior:0}),c(d),f},checkDottedLineSubs:function(b){b=b||{};var c=new a.$.Deferred,d="org/CheckDottedLineSubs";return this.request({url:d,type:"Get",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c}})}),define("collections/remind-me-list-collection",["talent","collections/base-collection"],function(a,b){return b.extend({url:"RemindV2/Get",getData:function(b){var c=this,d={dateTime:""},e=new a.$.Deferred,b=a._.extend({},d,b),f="RemindV2/Get";return this.request({type:"Get",url:f,data:b}).done(function(a){a&&a.Reminds&&a.Reminds.length&&c._parseData(a.Reminds),e.resolve(a)}),e},deleteData:function(a){return this.request({url:"RemindV2/Delete",type:"POST",data:a})},deleteOneData:function(a){return this.request({url:"RemindV2/Delete?obj_id="+a.obj_id+"&obj_type="+a.obj_type,type:"POST",data:a})},addOneData:function(a){return this.request({url:"RemindV2/Add?time="+a.time,type:"POST",data:a})},updateData:function(a){return this.request({url:"RemindV2/Update",type:"POST",data:a})},setData:function(a){return this.request({url:"RemindV2/Set?time="+a.time,type:"POST",data:a})},setAllData:function(a){return this.request({url:"RemindV2/BatchSet?time="+a.time,type:"POST",data:a})},deleteAllData:function(a){return this.request({url:"RemindV2/BatchDelete",type:"POST",data:a})},_parseData:function(b){var c=a.Context.getI18n();return a._.map(b,function(a){var b;switch(a.ObjType){case 7:b=c.task_1;break;case 4:b=c.work_1;break;case 10:b=c.home_1;break;case 11:b=c.plan_1;break;case 8:b="日报";break;case 20:b="会议";break;case 21:b="出差"}return a.typeText=b}),b}})}),define("collections/smember-group-collection",["talent"],function(a){return a.Collection.extend({getContact:function(){var b=this;return this.viewType="Contact",b.deferred&&b.deferred.reject(),b.deferred=new $.Deferred,$.ajax({url:a.Context.getApiUrl("Contact?v=")+(new Date).getTime(),type:"GET",success:function(c){if("Contact"==b.viewType)if(c&&1==c.Code){var d=a._.values(c.Data);d.length>0?(a._.map(d,function(b){return b.MidAvatar=b.UserAvatar.Medium,b.imgTemplate=a._.convertImage({shape:"radius",name:b.Name,src:b.MidAvatar,bgColor:b.UserAvatar.Color})}),b.deferred.resolve(d)):b.deferred.resolve([])}else b.deferred.resolve([])}}),b.deferred.promise()},getSubordinate:function(){var b=this;this.viewType="Subordinates",b.deferred&&b.deferred.reject(),b.deferred=new $.Deferred;return $.ajax({url:a.Context.getApiUrl("org/GetMySubordinates?lv=2&type=0"),type:"GET",success:function(c){if("Subordinates"==b.viewType)if(c&&1==c.Code){var d=a._.values(c.Data);d.length>0?(a._.map(d,function(b){return b.User&&(b.User.imgTemplate=a._.convertImage({shape:"radius",name:b.User.Name,src:b.User.MidAvatar,bgColor:b.User.UserAvatar.Color})),b}),d=a._.filter(d,function(b){return b.User.Id!=a.Context.getUserInfo().Id}),d=a._.pluck(d,"User"),b.deferred.resolve(d)):b.deferred.resolve([])}else b.deferred.resolve([])}}),b.deferred.promise()},getSearch:function(b){var c=this;this.viewType="Search",c.deferred&&c.deferred.reject(),c.deferred=new $.Deferred;var d=b&&b.searchCondition||{};this.filters=d.name;var e=a.Context.getApiUrl("user?v="+(new Date).getTime()+"&filters="+encodeURIComponent(d.name)||"");return""==d.name?c.deferred.resolve([]):$.ajax({url:e,type:"GET",success:function(b){if("Search"==c.viewType)if(b&&1==b.Code){var d=b&&b.Data||{};if(d.Filters==c.filters){var e=d.SimpleUserModel||{};e=a._.values(e),a._.map(e,function(b){return b.MidAvatar=b.UserAvatar.Medium,b.imgTemplate=a._.convertImage({shape:"radius",name:b.Name,src:b.MidAvatar,bgColor:b.UserAvatar.Color})}),c.deferred.resolve(e)}}else c.deferred.resolve([])}}),c.deferred.promise()},getDepartmentData:function(){var b=new $.Deferred;return $.ajax({url:a.Context.getApiUrl("department/All"),type:"GET",success:function(c){if(c&&1==c.Code){var d=c.Data||[];a._.map(d,function(a){a.count=a.TotalUserCount,a.Data=[],a.type="department"}),b.resolve(d)}else b.resolve([])}}),b.promise()},getDepartment:function(){var b=this;this.viewType="Department",b.deferred&&b.deferred.reject(),b.deferred=new $.Deferred;return this.getDepartmentData().done(function(c){if("Department"==b.viewType){var d=c;d=a._.filter(d,function(a){return 0==a.PId}),b.deferred.resolve(d)}}),b.deferred.promise()},getDepartmentDetail:function(b){var c=this;this.viewType="Department",c.deferred&&c.deferred.reject(),c.deferred=new $.Deferred;var d=parseInt(b.id);return this.getDepartmentData().done(function(e){var f=e;f=a._.filter(f,function(a){return a.PId==d}),f=f||[],$.ajax({url:a.Context.getApiUrl("department/DepartmentOfUser?department_id=")+b.id,type:"GET",success:function(b){if("Department"==c.viewType){var d=b.Data||[];a._.map(d,function(b){return b.imgTemplate=a._.convertImage({shape:"radius",name:b.Name,src:b.MidAvatar,bgColor:b.UserAvatar.Color})}),f=d.concat(f),c.deferred.resolve(f)}}})}),c.deferred.promise()},invite:function(b){var c=new $.Deferred;return $.ajax({url:a.Context.getApiUrl("userinvite/inviteUser"),type:"POST",data:b}).done(function(a){c.resolve(a)}),c.promise()}})}),define("collections/staff-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getData:function(b){var c,d=new a.$.Deferred,e="";return c=a.Context.splicingUrl(b,["name","page_num","page_size","id"]),e="staff/Staffs?"+c,this.request({url:e,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},addManager:function(b){var c={to_user_id:1,role_type:3};b=a._.extend({},c,b);var d=new a.$.Deferred,e="EnterpriseManage/AddTitaManager?to_user_id="+b.to_user_id+"&role_type="+b.role_type;return this.request({url:e,type:"POST"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},deleteManager:function(b){var c={to_user_id:1,role_type:3};b=a._.extend({},c,b);var d=new a.$.Deferred,e="EnterpriseManage/DeleteTitaManager?to_user_id="+b.to_user_id+"&role_type="+b.role_type;return this.request({url:e,type:"POST"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},addBoss:function(b){var c={to_user_id:1};b=a._.extend({},c,b);var d="EnterpriseManage/AddBoss?to_user_id="+b.to_user_id,e=new a.$.Deferred;return this.request({url:d,type:"POST"}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e},deleteBoss:function(b){var c={to_user_id:1};b=a._.extend({},c,b);var d="EnterpriseManage/DeleteBoss?to_user_id="+b.to_user_id,e=new a.$.Deferred;return this.request({url:d,type:"POST"}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e},getAllMark:function(){var b="EnterpriseManage/GetAllMark",c=new a.$.Deferred;return this.request({url:b,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},setMark:function(b){var c={mark_id:0,to_user_id:0};b=a._.extend({},c,b);var d=new a.$.Deferred,e="EnterpriseManage/SetMark?mark_id="+b.mark_id+"&to_user_id="+b.to_user_id;return this.request({url:e,type:"POST"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},addDepartmentLeader:function(b){var c={to_user_id:1,department_id:0};b=a._.extend({},c,b);var d=new a.$.Deferred,e="department/AddLeader?to_user_id="+b.to_user_id+"&department_id="+b.department_id;return this.request({url:e,type:"POST"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},deleteDepartmentLeader:function(b){var c={to_user_id:1,department_id:0};b=a._.extend({},c,b);var d=new a.$.Deferred,e="department/DeleteLeader?to_user_id="+b.to_user_id+"&department_id="+b.department_id;return this.request({url:e,type:"POST"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},deliverSuper:function(b){var c={to_user_id:1};b=a._.extend({},c,b);var d=new a.$.Deferred,e="EnterpriseManage/ChangeSystemManager?to_user_id="+b.to_user_id;return this.request({url:e,type:"POST"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},getBoss:function(){var b="EnterpriseManage/GetBoss",c=new a.$.Deferred;return this.request({url:b,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getSimpleDeparts:function(){var b=new a.$.Deferred,c="Department/AllSimple";return this.request({url:c,type:"Get"}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},getSimpleDepartsV2:function(){var b=new a.$.Deferred,c="Department/AllSimple";return this.request({url:c,type:"Get"}).done(function(c){function d(b){a._.each(b,function(b){var e=b.Id,f=a._.where(c,{PId:e});f=a._.compact(f),f.length?(b.children=f,b.isEnd=!1):(b.children=null,b.isEnd=!0),d(f)})}var e=[],f=a._.where(c,{PId:-1});f=a._.compact(f),e=e.concat(f),d(e),b.resolve(e)}).fail(function(a){b.reject(a)}),b},GetDepartmentUsers:function(b){var c={department_id:"",to_departmentId:"",type:""},d=new a.$.Deferred,e="PlanStatistic/GetDepartmentUsers";return b=a._.extend({},c,b),this.request({url:e+"?department_id="+b.department_id+"&to_departmentId="+b.to_departmentId+"&type="+b.type,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},getAllDeparts:function(b){var c={department_id:""},d=new a.$.Deferred,e="PlanStatistic/DepartmentList";return b=a._.extend({},c,b),this.request({url:e+"?department_id="+b.department_id,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},getAllDepartsV2:function(b){var c={department_id:""},d=new a.$.Deferred,e="PlanStatistic/DepartmentList";return b=a._.extend({},c,b),this.request({url:e+"?department_id="+b.department_id,type:"Get"}).done(function(c){function e(b){a._.each(b,function(b){var d=b.Id,f=a._.where(c,{PId:d});f=a._.compact(f),f.length?(b.children=f,b.isEnd=!1):(b.children=null,b.isEnd=!0),e(f)})}var c=c||[],f=[],g=a._.where(c,{Id:b.department_id});g=a._.compact(g),f=f.concat(g),e(f),d.resolve(f)}).fail(function(a){d.reject(a)}),d},attentionData:function(b){var c,d=new a.$.Deferred,e="";return c=a.Context.splicingUrl(b,["to_user_id"]),e="staff/Follow?"+c,this.request({url:e,type:"Post"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},cancelAttentionData:function(b){var c,d=new a.$.Deferred,e="";return c=a.Context.splicingUrl(b,["to_user_id"]),e="staff/CancelFollow?"+c,this.request({url:e,type:"Post"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},getManagersData:function(){var b=new a.$.Deferred,c="staff/Managers?";return this.request({url:c,type:"GET"}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},getDeptLeaderData:function(b){params=a.Context.splicingUrl(b,["department_id"]);var c=new a.$.Deferred,d="department/DepartmentLeaders?"+params;return this.request({url:d,type:"GET"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},searchData:function(b){var c,d=new a.$.Deferred,e="";return c=a.Context.splicingUrl(b,["filter","pinyin","page_num","page_size"]),e="Search/Staffs?"+c,this.request({url:e,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d}})}),define("collections/xtcc-collection",["talent","collections/base-collection"],function(a,b){return b.extend({mockDataManage:{Code:1,Data:{tableList:[{Name:"张晓飞",Email:"zhangxiaofei@beisen.com",Pass:"12312312312344444444444444",Status:"已完成 已完成 已完成 已完成 已完成 已完成",Result:"职业性格测评 职业性格测评 职业性格测评",Report:"报告",ReportNum:"2",Id:"01",Avatar:"http://dfiles.tms.beisen.com/Image/200422/c9374b20e4c74fffb3c90e5366fd3953_m.png"},{Name:"李小明",Email:"lixiaoming@beisen.com",Pass:"12312",Status:"已完成",Result:"职业性格测评2",Report:"报告",ReportNum:"3",Id:"02",Avatar:"http://dfiles.tms.beisen.com/Image/200422/c9374b20e4c74fffb3c90e5366fd3953_m.png"}],adminList:[{Avatar:"http://dfiles.tms.beisen.com/Image/200422/7904abb4ca7e435f825192332d574914_s.png",Department:"默认部门",Email:"zyn@yy.com",Id:100140323,IsRoot:!0,MidAvatar:"http://dfiles.tms.beisen.com/Image/200422/7904abb4ca7e435f825192332d574914_m.png",Name:"安宁宁",Position:"产品经理",Role:2}],activityList:[{Name:"职位测评系统活动一职位测评系统活动一职位测评系统活动一职位测评系统活动一职位测评系统活动一",Id:"01"},{Name:"职位测评系统活动二",Id:"02"},{Name:"职位测评系统活动三",Id:"03"}],dateNum:{SurplusNum:"100",FinishNum:"40",UnfinishedNum:"50"}}},getDataManage:function(b){var c="Assessment/AssessmentManager",d=new a.$.Deferred;return this.request({url:c,data:b,type:"Post"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},mockDataTable:{Code:1,Data:{tableList:[{Name:"修改一",Email:"zhangxiaofei@beisen.com",Pass:"12312",Status:"已完成",Result:"职业性格测评",Report:"报告",ReportNum:"2",Id:"011",Avatar:"http://dfiles.tms.beisen.com/Image/200422/c9374b20e4c74fffb3c90e5366fd3953_m.png"},{Name:"修改二",Email:"zhangxiaofei@beisen.com",Pass:"12312",Status:"已完成",Result:"职业性格测评",Report:"报告",ReportNum:"2",Id:"021",Avatar:"http://dfiles.tms.beisen.com/Image/200422/feae0ddd737f438695c70f76d426a425_m.png"}],dateNum:{SurplusNum:"20",FinishNum:"10",UnfinishedNum:"5"}}},getDataTable:function(b){var c="Assessment/AllUserAssessmentActivitys?activity_id="+parseInt(b.choiseId)+"&page_index="+parseInt(b.pageIndex)+"&page_size="+parseInt(b.pageSize),d=new a.$.Deferred;return this.request({url:c,data:b,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},mockDataReport:{Code:1,Data:{Name:"张晓飞",ReportList:[{Sn:"1498883385048314988833850483",Status:1,FinishTime:"2013-10-11",ActivityName:"职业性格测评活动职业性格测评活动职业性格测评活动",ReportViewUrl:"http://xxx",ReportName:"职业性格测评报告职业性格测评报告职业性格测评报告",TestName:null,ActivityImage:"http://st-web.tita.com/ux/tita-web-v4/release/app/images/xtcc/pic_invite01.gif"}]}},getDataReport:function(b){var c="Assessment/CompleteAssessmentReports?to_user_id="+b.reportSubmit.ToUserId+"&activity_id="+b.reportSubmit.ActiviyId+"&sn="+b.reportSubmit.Sn,d=new a.$.Deferred;return this.request({url:c,data:b,type:"Post"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},mockDatalist:{Code:1,Data:{inviteList:[{Name:"职业规划测评活动",PassNumber:"14988833850483"},{Name:"职业规划测评活动a",PassNumber:"00222222"}],inviteReportList:[{ReportName:"职业性格测评报告职业性格测评报告职业性格测评报告",PassNumber:"1498883385048314988833850483",Isfinish:"已完成已完成",Finishtime:"2013.06.02",Activityname:"职业性格测评活动职业性格测评活动职业性格测评活动",ActivityImage:"http://st-web.tita.com/ux/tita-web-v4/release/app/images/xtcc/pic_invite01.gif"},{ReportName:"职业性格测评报告",PassNumber:"14988833850483",Isfinish:"已完成",Finishtime:"2013.06.02",Activityname:"职业性格测评活动1",ActivityImage:"http://st-web.tita.com/ux/tita-web-v4/release/app/images/xtcc/pic_invite01.gif"},{ReportName:"职业性格测评报告",PassNumber:"14988833850483",Isfinish:"已完成",Finishtime:"2013.06.02",Activityname:"职业性格测评活动2",ActivityImage:"http://st-web.tita.com/ux/tita-web-v4/release/app/images/xtcc/pic_invite01.gif"}],personalInformation:{Name:"罗翀",Department:"研发部12",Mobilephone:"13810246572",Telephone:"010-64554247",Email:"luoxiaochong@beisen.com"}}},getDataInviteList:function(b){var c=Date.parse(new Date),d="/Assessment/MyAssessment?ver="+c,e=new a.$.Deferred;return this.request({url:d,data:b,type:"Get"}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e},mockDataInvite:{Code:1,Data:{adminList:[],dateNum:{SurplusNum:"2"},personalInformation:{Name:"罗翀",Department:"研发部121",Mobilephone:"13810246572",Telephone:"010-64554247",Email:"luoxiaochong@beisen.com"},ActivityList:[{ActivityName:"职位测评系统活动一 职位测评系统活动一职位测评系统活动一 ",ActivityId:"01"},{ActivityName:"职位测评系统活动二",ActivityId:"02"},{ActivityName:"职位测评系统活动三",ActivityId:"03"}]}},getDataInvite:function(b){var c="Assessment/Activitys",d=new a.$.Deferred;return this.request({url:c,data:b,type:"Post"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},mockSendDataInvite:{Code:1,Data:{adminList:[{Avatar:"http://dfiles.tms.beisen.com/Image/200422/7904abb4ca7e435f825192332d574914_s.png",Department:"默认部门",Email:"zyn@yy.com",Id:100140323,IsRoot:!0,MidAvatar:"http://dfiles.tms.beisen.com/Image/200422/7904abb4ca7e435f825192332d574914_m.png",Name:"安宁宁",Position:"产品经理",Role:2}]}},sendDataInvite:function(b){var c="sendDataInvite",d=new a.$.Deferred;return this.request({url:c,data:b.invitationList,type:"Post",mockData:this.mockSendDataInvite}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},getDataAddUser:function(b){var c="Assessment/AddManager?to_user_id="+b.userId,d=new a.$.Deferred;return this.request({url:c,data:b,type:"Post"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},getDataDelUser:function(b){var c="Assessment/RemoveManager?to_user_id="+b.userId,d=new a.$.Deferred;return this.request({url:c,data:b,type:"Post"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},postDataInvite:function(b){var c="Assessment/InviteUserJoinAssessment?activity_id="+b.activityId+"&user_ids="+b.adminId,d=new a.$.Deferred;return this.request({url:c,data:b,type:"Post"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d}})}),define("collections/daily-collection",["talent","collections/base-collection"],function(a,b){return b.extend({planDialyAdd:function(a){var b=new Talent.$.Deferred,c={content:"",visibility:"",fileUrls:"",objId:"",objType:"",dateTime:"",reportType:8,planTableId:""},a=Talent._.extend({},c,a),d="PlanDialy/AddV2",e="?dateTime="+a.dateTime;return this.request({url:d+e,type:"POST",data:a}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},getAllDailyByDate:function(b){var c=new a.$.Deferred,d={toUser_id:"",date:"2014/03/26",type:1,dailyType:1};b=a._.extend({},d,b);var e="PlanDialy/UserAll",f=[8,26,27],g=f[b.dailyType-1];return 2==b.type&&(e="PlanDialy/TeamAll"),e=e+"?toUser_id="+b.toUser_id+"&date="+b.date+"&report_type="+g,b.plan_table_id&&(e+="&plan_table_id="+b.plan_table_id),this.request({url:e,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getMonthCompleteStatus:function(b){var c=new a.$.Deferred,d={toUser_id:"",date:"2014/03/25",type:"1",dailyType:1};b=a._.extend({},d,b);var e=[8,26,27],f=e[b.dailyType-1],g="PlanDialy/Month?toUser_id="+b.toUser_id+"&date="+b.date+"&type="+b.type+"&report_type="+f;return this.request({url:g,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getAllDailyByDay:function(b){var c=new a.$.Deferred,d={toUser_id:"",date:"2014/03/25",type:"1",dailyType:1};b=a._.extend({},d,b);var e="PlanDialy/UserDay",f=[8,26,27],g=f[b.dailyType-1];return 2==b.type&&(e="PlanDialy/TeamDay"),e=e+"?toUser_id="+b.toUser_id+"&report_type="+g,b.plan_table_id&&(e+="&plan_table_id="+b.plan_table_id),b.date&&(e+="&date="+b.date),this.request({url:e,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getMySubmitDailySetting:function(b){var c=new a.$.Deferred,d="PlanDialy/MySubmitDailySetting",e={dailyType:1};b=a._.extend({},e,b);var f=[8,26,27],g=f[b.dailyType-1];return d=d+"?report_type="+g,this.request({url:d,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getDialyShareData:function(b){var c=new a.$.Deferred,d={to_user_id:""};b=a._.extend({},d,b);var e="PlanDialy/ShareUsers";return e=e+"?to_user_id="+b.to_user_id,this.request({url:e,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},postAddDailyData:function(b){var c=new a.$.Deferred,d={content:"",fileUrls:"",dateTime:"",visibility:"1",objType:"",objId:"",dailyType:1,planTableId:""};b=a._.extend({},d,b);var e="PlanDialy/Add?dateTime="+b.dateTime,f=[8,26,27],g=f[b.dailyType-1];return this.request({url:e,type:"Post",data:{content:b.content,fileUrls:b.fileUrls,visibility:b.visibility,objId:b.objId,objType:b.objType,reportType:g,planTableId:b.planTableId}}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},updateVisibility:function(b){var c=new a.$.Deferred,d={plan_item_id:"",visibility:"1",obj_id:"",obj_type:""};b=a._.extend({},d,b);var e="PlanDialy/UpdateVisibility";return this.request({url:e+"?plan_item_id="+b.plan_item_id+"&visibility="+b.visibility+"&obj_id="+b.obj_id+"&obj_type="+b.obj_type,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},addAttachment:function(b){var c=new a.$.Deferred,d={objId:"",dfsUrls:"",documents:[]};b=a._.extend({},d,b);var e="PlanDialy/AddAttachment";return this.request({url:e,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},deleteAttachment:function(b){var c=new a.$.Deferred,d={plan_item_id:"",document_id:""};b=a._.extend({},d,b);var e="PlanDialy/DeleteAttachment";return this.request({url:e+"?plan_item_id="+b.plan_item_id+"&document_id="+b.document_id,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getDetailDaiyData:function(b){var c=new a.$.Deferred,d={daily_id:""};b=a._.extend({},d,b);var e="PlanDialy/Get?daily_id="+b.daily_id;return this.request({url:e,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},postUpdateDaily:function(b){var c=new a.$.Deferred,d={daily_id:"",content:"",fileUrls:""};b=a._.extend({},d,b);var e="PlanDialy/Update";return this.request({url:e,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getSetDailySubmitDate:function(){var b=new a.$.Deferred,c="PlanDialy/MySubmitDailySetting";return this.request({url:c,type:"get"}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},postSetDailySubmitDate:function(b){var c=new a.$.Deferred,d="PlanDialy/SetSubmitDailySetting",e={dailyPeriodType:"",time:""};return b=a._.extend({},e,b),this.request({url:d,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getSetDailyAutoRemindDate:function(){var b=new a.$.Deferred,c="PlanDialy/MyAutoNotifyDailySetting";return this.request({url:c,type:"get"}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},getAllRemindDate:function(){var b=new a.$.Deferred,c="PlanDialy/MyAllReportSetting";return this.request({url:c,type:"get"}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},setAllRemindDate:function(b){var c=new a.$.Deferred,d=b.dailyType||1,e=b.PeriodType||0,f=b.lateDay,g=[8,26,27][d-1],h={};h.ReportType=g,1==d?(h.SubmitType=f,h.RemindType=e):2==d?(h.SubmitType=5,h.RemindType=e>0?5:0):3==d&&(h.SubmitType=6,h.RemindType=e>0?6:0),h.SubmitDate=1==d?0:b.lateDay,h.RemindDate=1==d||0==e?0:b.remindDay,h.SubmitTime=b.lateHour,h.RemindTime=b.remindHour,1==d&&3==e&&(h.RemindTime=b.remindDay);var i="PlanDialy/SetReportSetting";return this.request({url:i,type:"post",data:h}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getTodayDoneDaiy:function(){var b=new a.$.Deferred,c="PlanDialy/Today";return this.request({url:c,type:"get"}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},EvaluateDaily:function(b){var c=new a.$.Deferred,d="PlanDialy/EvaluatePlan",e={objId:"",objType:"",remark:"",evaluateInfo:[]},b=a._.extend({},e,b);return this.request({url:d,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getAutoDaily:function(b){var c=new a.$.Deferred,d="PlanDialy/Auto",e={date:"",report_type:8,plan_table_id:null},b=a._.extend({},e,b),d=d+"?date="+b.date+"&report_type="+b.report_type+"&plan_table_id="+b.plan_table_id;return this.request({url:d,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getDailyShareUser:function(b){var c=new a.$.Deferred,d={};b=a._.extend({},d,b);var e="PlanDialy/MyShareUser?to_user_id="+b.to_user_id;return this.request({url:e,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getDailyShareMeUser:function(b){var c=new a.$.Deferred,d={};b=a._.extend({},d,b);var e="PlanDialy/ShareMeUser";return this.request({url:e,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)
}),c},addDailyShareUser:function(b){var c=new a.$.Deferred,d={toUser_id:""};b=a._.extend({},d,b);var e="PlanDialy/AddShareUser?toUser_id="+b.toUser_id;return this.request({url:e,type:"Post"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},deleteDailyShareUser:function(b){var c=new a.$.Deferred,d={toUser_id:""},b=a._.extend({},d,b),e="PlanDialy/DeleteShareUser?toUser_id="+b.toUser_id;return this.request({url:e,type:"Post"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},AutoDailyNotify:function(b){var c=new a.$.Deferred,d={UserIds:"",EmailContent:"",Date:""},b=a._.extend({},d,b),e="PlanDialy/AutoDailyNotify";return this.request({url:e,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getMockDateData:function(b){var c={Code:1,Message:null,Data:{taglist:[{GroupId:1,GroupName:"2013",Active:!1,PlanTableListModels:[{TagId:2,TagName:"1月",TagType:1,Date:"2013/01/01",Active:!1,PlanTableModels:[]},{TagId:3,TagName:"2月",TagType:1,Date:"2013/02/01",Active:!1,PlanTableModels:[]},{TagId:4,TagName:"3月",TagType:1,Date:"2013/03/01",Active:!1,PlanTableModels:[]},{TagId:5,TagName:"4月",TagType:1,Date:"2013/04/01",Active:!1,PlanTableModels:[]},{TagId:6,TagName:"5月",TagType:1,Date:"2013/05/01",Active:!1,PlanTableModels:[]},{TagId:7,TagName:"6月",TagType:1,Date:"2013/06/01",Active:!1,PlanTableModels:[]},{TagId:8,TagName:"7月",TagType:1,Date:"2013/07/01",Active:!1,PlanTableModels:[]},{TagId:9,TagName:"8月",TagType:1,Date:"2013/08/01",Active:!1,PlanTableModels:[]},{TagId:10,TagName:"9月",TagType:1,Date:"2013/09/01",Active:!1,PlanTableModels:[]},{TagId:11,TagName:"10月",TagType:1,Date:"2013/10/01",Active:!1,PlanTableModels:[]},{TagId:12,TagName:"11月",TagType:1,Date:"2013/11/01",Active:!1,PlanTableModels:[]},{TagId:13,TagName:"12月",TagType:1,Date:"2013/12/01",Active:!1,PlanTableModels:[]}]},{GroupId:2,GroupName:"2014",Active:!1,PlanTableListModels:[{TagId:2,TagName:"1月",TagType:1,Date:"2014/01/01",Active:!1,PlanTableModels:[]},{TagId:3,TagName:"2月",TagType:1,Date:"2014/02/01",Active:!1,PlanTableModels:[]},{TagId:4,TagName:"3月",TagType:1,Date:"2014/03/01",Active:!1,PlanTableModels:[]},{TagId:5,TagName:"4月",TagType:1,Date:"2014/04/01",Active:!1,PlanTableModels:[]},{TagId:6,TagName:"5月",TagType:1,Date:"2014/05/01",Active:!1,PlanTableModels:[]},{TagId:7,TagName:"6月",TagType:1,Date:"2014/06/01",Active:!1,PlanTableModels:[]},{TagId:8,TagName:"7月",TagType:1,Date:"2014/07/01",Active:!1,PlanTableModels:[]},{TagId:9,TagName:"8月",TagType:1,Date:"2014/08/01",Active:!1,PlanTableModels:[]},{TagId:10,TagName:"9月",TagType:1,Date:"2014/09/01",Active:!1,PlanTableModels:[]},{TagId:11,TagName:"10月",TagType:1,Date:"2014/10/01",Active:!1,PlanTableModels:[]},{TagId:12,TagName:"11月",TagType:1,Date:"2014/11/01",Active:!1,PlanTableModels:[]},{TagId:13,TagName:"12月",TagType:1,Date:"2014/12/01",Active:!1,PlanTableModels:[]}]},{GroupId:3,GroupName:"2015",Active:!1,PlanTableListModels:[{TagId:2,TagName:"1月",TagType:1,Date:"2015/01/01",Active:!1,PlanTableModels:[]},{TagId:3,TagName:"2月",TagType:1,Date:"2015/02/01",Active:!1,PlanTableModels:[]},{TagId:4,TagName:"3月",TagType:1,Date:"2015/03/01",Active:!1,PlanTableModels:[]},{TagId:5,TagName:"4月",TagType:1,Date:"2015/04/01",Active:!1,PlanTableModels:[]},{TagId:6,TagName:"5月",TagType:1,Date:"2015/05/01",Active:!1,PlanTableModels:[]},{TagId:7,TagName:"6月",TagType:1,Date:"2015/06/01",Active:!1,PlanTableModels:[]},{TagId:8,TagName:"7月",TagType:1,Date:"2015/07/01",Active:!1,PlanTableModels:[]},{TagId:9,TagName:"8月",TagType:1,Date:"2015/08/01",Active:!1,PlanTableModels:[]},{TagId:10,TagName:"9月",TagType:1,Date:"2015/09/01",Active:!1,PlanTableModels:[]},{TagId:11,TagName:"10月",TagType:1,Date:"2015/10/01",Active:!1,PlanTableModels:[]},{TagId:12,TagName:"11月",TagType:1,Date:"2015/11/01",Active:!1,PlanTableModels:[]},{TagId:13,TagName:"12月",TagType:1,Date:"2015/12/01",Active:!1,PlanTableModels:[]}]},{GroupId:4,GroupName:"2016",Active:!1,PlanTableListModels:[{TagId:2,TagName:"1月",TagType:1,Date:"2016/01/01",Active:!1,PlanTableModels:[]},{TagId:3,TagName:"2月",TagType:1,Date:"2016/02/01",Active:!1,PlanTableModels:[]},{TagId:4,TagName:"3月",TagType:1,Date:"2016/03/01",Active:!1,PlanTableModels:[]},{TagId:5,TagName:"4月",TagType:1,Date:"2016/04/01",Active:!1,PlanTableModels:[]},{TagId:6,TagName:"5月",TagType:1,Date:"2016/05/01",Active:!1,PlanTableModels:[]},{TagId:7,TagName:"6月",TagType:1,Date:"2016/06/01",Active:!1,PlanTableModels:[]},{TagId:8,TagName:"7月",TagType:1,Date:"2016/07/01",Active:!1,PlanTableModels:[]},{TagId:9,TagName:"8月",TagType:1,Date:"2016/08/01",Active:!1,PlanTableModels:[]},{TagId:10,TagName:"9月",TagType:1,Date:"2016/09/01",Active:!1,PlanTableModels:[]},{TagId:11,TagName:"10月",TagType:1,Date:"2016/10/01",Active:!1,PlanTableModels:[]},{TagId:12,TagName:"11月",TagType:1,Date:"2016/11/01",Active:!1,PlanTableModels:[]},{TagId:13,TagName:"12月",TagType:1,Date:"2016/12/01",Active:!1,PlanTableModels:[]}]},{GroupId:5,GroupName:"2017",Active:!1,PlanTableListModels:[{TagId:2,TagName:"1月",TagType:1,Date:"2017/01/01",Active:!1,PlanTableModels:[]},{TagId:3,TagName:"2月",TagType:1,Date:"2017/02/01",Active:!1,PlanTableModels:[]},{TagId:4,TagName:"3月",TagType:1,Date:"2017/03/01",Active:!1,PlanTableModels:[]},{TagId:5,TagName:"4月",TagType:1,Date:"2017/04/01",Active:!1,PlanTableModels:[]},{TagId:6,TagName:"5月",TagType:1,Date:"2017/05/01",Active:!1,PlanTableModels:[]},{TagId:7,TagName:"6月",TagType:1,Date:"2017/06/01",Active:!1,PlanTableModels:[]},{TagId:8,TagName:"7月",TagType:1,Date:"2017/07/01",Active:!1,PlanTableModels:[]},{TagId:9,TagName:"8月",TagType:1,Date:"2017/08/01",Active:!1,PlanTableModels:[]},{TagId:10,TagName:"9月",TagType:1,Date:"2017/09/01",Active:!1,PlanTableModels:[]},{TagId:11,TagName:"10月",TagType:1,Date:"2017/10/01",Active:!1,PlanTableModels:[]},{TagId:12,TagName:"11月",TagType:1,Date:"2017/11/01",Active:!1,PlanTableModels:[]},{TagId:13,TagName:"12月",TagType:1,Date:"2017/12/01",Active:!1,PlanTableModels:[]}]},{GroupId:6,GroupName:"2018",Active:!1,PlanTableListModels:[{TagId:2,TagName:"1月",TagType:1,Date:"2018/01/01",Active:!1,PlanTableModels:[]},{TagId:3,TagName:"2月",TagType:1,Date:"2018/02/01",Active:!1,PlanTableModels:[]},{TagId:4,TagName:"3月",TagType:1,Date:"2018/03/01",Active:!1,PlanTableModels:[]},{TagId:5,TagName:"4月",TagType:1,Date:"2018/04/01",Active:!1,PlanTableModels:[]},{TagId:6,TagName:"5月",TagType:1,Date:"2018/05/01",Active:!1,PlanTableModels:[]},{TagId:7,TagName:"6月",TagType:1,Date:"2018/06/01",Active:!1,PlanTableModels:[]},{TagId:8,TagName:"7月",TagType:1,Date:"2018/07/01",Active:!1,PlanTableModels:[]},{TagId:9,TagName:"8月",TagType:1,Date:"2018/08/01",Active:!1,PlanTableModels:[]},{TagId:10,TagName:"9月",TagType:1,Date:"2018/09/01",Active:!1,PlanTableModels:[]},{TagId:11,TagName:"10月",TagType:1,Date:"2018/10/01",Active:!1,PlanTableModels:[]},{TagId:12,TagName:"11月",TagType:1,Date:"2018/11/01",Active:!1,PlanTableModels:[]},{TagId:13,TagName:"12月",TagType:1,Date:"2018/12/01",Active:!1,PlanTableModels:[]}]},{GroupId:7,GroupName:"2019",Active:!1,PlanTableListModels:[{TagId:2,TagName:"1月",TagType:1,Date:"2019/01/01",Active:!1,PlanTableModels:[]},{TagId:3,TagName:"2月",TagType:1,Date:"2019/02/01",Active:!1,PlanTableModels:[]},{TagId:4,TagName:"3月",TagType:1,Date:"2019/03/01",Active:!1,PlanTableModels:[]},{TagId:5,TagName:"4月",TagType:1,Date:"2019/04/01",Active:!1,PlanTableModels:[]},{TagId:6,TagName:"5月",TagType:1,Date:"2019/05/01",Active:!1,PlanTableModels:[]},{TagId:7,TagName:"6月",TagType:1,Date:"2019/06/01",Active:!1,PlanTableModels:[]},{TagId:8,TagName:"7月",TagType:1,Date:"2019/07/01",Active:!1,PlanTableModels:[]},{TagId:9,TagName:"8月",TagType:1,Date:"2019/08/01",Active:!1,PlanTableModels:[]},{TagId:10,TagName:"9月",TagType:1,Date:"2019/09/01",Active:!1,PlanTableModels:[]},{TagId:11,TagName:"10月",TagType:1,Date:"2019/10/01",Active:!1,PlanTableModels:[]},{TagId:12,TagName:"11月",TagType:1,Date:"2019/11/01",Active:!1,PlanTableModels:[]},{TagId:13,TagName:"12月",TagType:1,Date:"2019/12/01",Active:!1,PlanTableModels:[]}]},{GroupId:8,GroupName:"2020",Active:!1,PlanTableListModels:[{TagId:2,TagName:"1月",TagType:1,Date:"2020/01/01",Active:!1,PlanTableModels:[]},{TagId:3,TagName:"2月",TagType:1,Date:"2020/02/01",Active:!1,PlanTableModels:[]},{TagId:4,TagName:"3月",TagType:1,Date:"2020/03/01",Active:!1,PlanTableModels:[]},{TagId:5,TagName:"4月",TagType:1,Date:"2020/04/01",Active:!1,PlanTableModels:[]},{TagId:6,TagName:"5月",TagType:1,Date:"2020/05/01",Active:!1,PlanTableModels:[]},{TagId:7,TagName:"6月",TagType:1,Date:"2020/06/01",Active:!1,PlanTableModels:[]},{TagId:8,TagName:"7月",TagType:1,Date:"2020/07/01",Active:!1,PlanTableModels:[]},{TagId:9,TagName:"8月",TagType:1,Date:"2020/08/01",Active:!1,PlanTableModels:[]},{TagId:10,TagName:"9月",TagType:1,Date:"2020/09/01",Active:!1,PlanTableModels:[]},{TagId:11,TagName:"10月",TagType:1,Date:"2020/10/01",Active:!1,PlanTableModels:[]},{TagId:12,TagName:"11月",TagType:1,Date:"2020/11/01",Active:!1,PlanTableModels:[]},{TagId:13,TagName:"12月",TagType:1,Date:"2020/12/01",Active:!1,PlanTableModels:[]}]}]}},d=c.Data,e=b.date.split("/");if(0==b.group_id)var f=a._.findWhere(d.taglist,{GroupName:e[0]})||d.taglist[0];else var f=a._.findWhere(d.taglist,{GroupId:b.group_id})||d.taglist[0];f.Active=!0;var g=f.PlanTableListModels[0];if(f.GroupName==e[0]){var h=Number(e[1])+1;g=a._.findWhere(f.PlanTableListModels,{TagId:h}),g.Date=b.date}g.Active=!0;var i=new a.$.Deferred;return i.resolve(c),i.promise()}})}),define("collections/document-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getYifangyun:function(){var b=new a.$.Deferred,c="YiFangyun/SSO";return this.request({url:c,type:"Get"}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},getUserDoc:function(b){var c=new a.$.Deferred,d={parent_doc_id:0,page_index:1,page_size:10};b=a._.extend({},d,b);var e="Document/GetUserDoc";return e=e+"?parent_doc_id="+b.parent_doc_id+"&page_index="+b.page_index+"&page_size="+b.page_size,this.request({url:e,type:"Get"}).done(function(b){function d(b){var c=a._.findWhere(e,{PId:b});if(c){g.push(c);var f=c.Id;d(f)}}var e=b.ParentFolders,f=a.Context.getI18n(),g=[{Id:0,PId:0,FileName:"个人"+f.document_1}];d(0),b.ParentFolders=g,c.resolve(b)}).fail(function(a){c.reject(a)}),c},getShareDocData:function(b){var c=new a.$.Deferred,d={parent_doc_id:0,page_index:1,page_size:10};b=a._.extend({},d,b);var e="Document/GetShareDoc";return e=e+"?parent_doc_id="+b.parent_doc_id+"&page_index="+b.page_index+"&page_size="+b.page_size,this.request({url:e,type:"Get"}).done(function(b){function d(b){var c=a._.findWhere(e,{PId:b});if(c){g.push(c);var f=c.Id;d(f)}}var e=b.ParentFolders,f=a.Context.getI18n(),g=[{Id:0,PId:0,FileName:"企业"+f.document_1}];d(0),b.ParentFolders=g,c.resolve(b)}).fail(function(a){c.reject(a)}),c},postAddShareFolder:function(b){var c=new a.$.Deferred,d={parent_doc_id:0,folder_name:""};b=a._.extend({},d,b);var e="Document/AddShareFolder";return this.request({url:e,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},postAddPersonalShareFolder:function(b){var c=new a.$.Deferred,d={parent_doc_id:0,folder_name:""};b=a._.extend({},d,b);var e="Document/AddUserFolder?parent_doc_id="+b.parent_doc_id;return this.request({url:e,type:"Post",data:{"":b.folder_name}}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},postDeleteShareDocument:function(b){var c=new a.$.Deferred,d={parent_document_id:0,document_ids:[]};b=a._.extend({},d,b),b.document_ids=b.document_ids.join(",");var e="Document/DeleteShareDocument";return this.request({url:e,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},postDeletePersonalShareDocument:function(b){var c=new a.$.Deferred,d={parent_document_id:0,document_ids:[]};b=a._.extend({},d,b),b.document_ids=b.document_ids.join(",");var e="Document/DeleteUserDocument?document_ids="+b.document_ids;return this.request({url:e,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},postUpdateDocAllowDownloadData:function(b){var c=new a.$.Deferred,d={document_id:0,allow_download:[]};b=a._.extend({},d,b);var e="Document/UpdateDocAllowDownload";return this.request({url:e,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},postAddShareDocumentData:function(b){var c=new a.$.Deferred,d={parent_doc_id:0,dfs_urls:""};b=a._.extend({},d,b);var e="Document/AddShareDocument";return this.request({url:e,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},postAddPersonalShareDocumentData:function(b){var c=new a.$.Deferred,d={parent_doc_id:0,dfs_urls:""};b=a._.extend({},d,b);var e="Document/AddUserDocument?parent_doc_id="+b.parent_doc_id+"&dfs_urls="+b.dfs_urls;return this.request({url:e,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},postUpdateDocNameData:function(b){var c=new a.$.Deferred,d={document_id:0,new_name:[]};b=a._.extend({},d,b);var e="Document/UpdateDocName";return this.request({url:e,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},postUpdatePersonalDocNameData:function(b){var c=new a.$.Deferred,d={document_id:0,new_name:[]};b=a._.extend({},d,b);var e="Document/UpdateUserDocName?document_id="+b.document_id;return this.request({url:e,type:"Post",contentType:"application/json",data:JSON.stringify(b.new_name)}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},postMoveDocumentData:function(b){var c=new a.$.Deferred,d={document_ids:[],new_parent_id:""};b=a._.extend({},d,b),b.document_ids=b.document_ids.join(",");var e="Document/MoveDocument";return this.request({url:e,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},postMovePersonalDocumentData:function(b){var c=new a.$.Deferred,d={document_ids:[],new_parent_id:""};b=a._.extend({},d,b),b.document_ids=b.document_ids.join(",");var e="Document/MoveUserDocument?document_ids="+b.document_ids+"&new_parent_id="+b.new_parent_id;return this.request({url:e,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getShareFoldersData:function(b){var c=new a.$.Deferred,d={};b=a._.extend({},d,b);var e="Document/GetShareFolders";return this.request({url:e,type:"Get"}).done(function(b){function d(c){a._.each(c,function(c){var e=c.Id,f=a._.where(b,{PId:e});f=a._.compact(f),f.length?(c.children=f,c.isEnd=!1):(c.children=null,c.isEnd=!0),d(f)})}var e={};e.original=b;var f=a.Context.getI18n(),g=[{Id:0,PId:0,FileName:"企业"+f.document_1}],h=a._.where(b,{PId:0});h=a._.compact(h),d(g),e.process=g,c.resolve(e)}).fail(function(a){c.reject(a)}),c},getPersonalFolders:function(b){var c=new a.$.Deferred,d={};b=a._.extend({},d,b);var e="Document/GetUserFolders";return this.request({url:e,type:"Get"}).done(function(b){function d(c){a._.each(c,function(c){var e=c.Id,f=a._.where(b,{PId:e});f=a._.compact(f),f.length?(c.children=f,c.isEnd=!1):(c.children=null,c.isEnd=!0),d(f)})}var e={};e.original=b;var f=a.Context.getI18n(),g=[{Id:0,PId:0,FileName:"我的"+f.document_1}],h=a._.where(b,{PId:0});h=a._.compact(h),d(g),e.process=g,c.resolve(e)}).fail(function(a){c.reject(a)}),c},getUploadDocumentData:function(b){var c=new a.$.Deferred;return this.request({url:"Document/Upload?",data:b,type:"post"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c}})}),define("collections/bench-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getBenchItemModuleData:function(b){var c={type:"my",StartDate:"",EndDate:"",startNum:"",count:50,WorkTableType:0,fromLevel:1,toLevel:2},d=new a.$.Deferred,b=a._.extend({},c,b),e="WorkTable/PersonalPlan";"group"==b.type&&(e="WorkTable/TeamPlan"),delete b.type;return this.request2({type:"post",url:e,data:b}).done(function(a){d.resolve(a)}),d},getBenchSearchPlanData:function(b){var c={type:"my",userIds:"",status:"",LableModels:"",StartDate:"",EndDate:"",SortType:"",RelationType:"",startNum:"",count:50,WorkTableType:0,fromLevel:1,toLevel:2,IsPage:!1},d=new a.$.Deferred,b=a._.extend({},c,b),e="WorkTable/PersonalPlan";"group"==b.type&&(e="WorkTable/TeamPlan"),delete b.type;return this.request2({type:"post",url:e,data:b}).done(function(a){console.log(a),d.resolve(a)}),d},getModuleData:function(b){var c={channel_type:1,view_name:"",StartDate:"",EndDate:"",startNum:1,count:50,WorkTableType:0},d=new a.$.Deferred,b=a._.extend({},c,b),e="WorkTable/View?channel_type="+b.channel_type+"&view_name="+b.view_name;delete b.channel_type;return this.request2({type:"post",url:e,data:b}).done(function(a){d.resolve(a.data)}),d},_formatTree:function(b){function c(b){a._.each(b,function(b){var d=b.taskId,f=a._.where(e,{parentTaskId:d});return f=a._.compact(f),f.length?(b.Tasks=f,a._.each(f,function(a){a.level=b.level+1}),void c(f)):void(b.Tasks=[])})}var d=b||{},e=d.tasks;if(e&&e.length){var f=a._.where(e,{parentTaskId:null});a._.each(f,function(a){a.level=1}),c(f)}return d.tasks=f,d},getRightPartData:function(b){var c={channel_type:1},d=new a.$.Deferred,b=a._.extend({},c,b),e="WorkTable/Views";return this.request2({type:"get",url:e,data:b}).done(function(a){d.resolve(a)}),d},getBenchMorePlanData:function(b){var c={diff:"my",UserIds:"",LableIds:"",Status:"",Date:"",Mark:0,PageIndex:"",PageCount:10,Type:""},d=new a.$.Deferred,b=a._.extend({},c,b),e="workTable/SearchPersionlPlanByPage";return"group"==b.diff&&(e="workTable/SearchTeamPlanByPage"),this.request({type:"POST",url:e,data:b}).done(function(a){d.resolve(a)}),d},setBenchFirstData:function(b){var c=new a.$.Deferred;return this.request({data:b,type:"POST",url:"Preference/Set?type="+b.type}).done(function(b){c.resolve(a._.values(b))}),c}})}),define("collections/pay-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getPackageData:function(b){var c="PayService/GetPackageProduct?package_id="+b.package_id,d=new a.$.Deferred;return this.request({type:"GET",url:c}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},getBuyTypeData:function(b){var c="PayService/BuyTitaInfo?order_type="+b.order_type,d=new a.$.Deferred;return this.request({type:"GET",url:c}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},postOrderData:function(b){var c="PayService/CommitOrder",d=new a.$.Deferred;return this.request({type:"POST",url:c,data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},postPayMoneyData:function(b){var c="PayService/PayOrder",d=new a.$.Deferred;return this.request({type:"Post",url:c,data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},getOffLinePayData:function(b){var c="PayService/OffLineNotify?order_id="+b.order_id+"&mobile="+b.mobile,d=new a.$.Deferred;return this.request({type:"GET",url:c}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},getOrderByIdData:function(b){var c="PayService/PayOrder?order_id="+b.order_id,d=new a.$.Deferred;return this.request({type:"GET",url:c}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},tenantAuthorizeSet:function(){var b="TenantAuthorize/Set",c=new a.$.Deferred;return this.request({type:"POST",url:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c}})}),define("collections/home-collection",["talent","collections/base-collection"],function(a,b){return b.extend({postApplyOPenMeetting:function(b){var c,d={type:1},e=new a.$.Deferred,f=[700,901];return b=a._.extend({},d,b),c="Notify/OpenApp?app_id="+f[b.type-1],this.request({url:c,type:"Post"}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e}})}),define("collections/evaluation-collection",["talent","collections/base-collection"],function(a,b){return b.extend({postAddEvaluation:function(b){var c=new a.$.Deferred,d={objectType:"",objectId:"",evaluateType:1,evaluateValue:""};b=a._.extend({},d,b);var e="Evaluate/Add";return this.request({url:e,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},postUpdateEvaluation:function(b){var c=new a.$.Deferred,d={objectType:"",objectId:"",evaluateType:1,evaluateValue:""};b=a._.extend({},d,b);var e="Evaluate/Update";return this.request({url:e,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c}})}),define("collections/italent-collection",["talent","collections/base-collection"],function(a,b){return b.extend({postDelete:function(b){var c=new a.$.Deferred,d={meta_objid:"",obj_dataid:""};b=a._.extend({},d,b);var e="iTalent/user/view/Delete?meta_objid="+b.meta_objid+"&obj_dataid="+b.obj_dataid;return this.request({url:e,type:"Post"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c}})}),define("collections/sms-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getSmsCheck:function(b){var c=new a.$.Deferred,d={to_user_id:""};b=a._.extend({},d,b);var e="SMS/Check?to_user_id="+b.to_user_id;return this.request({url:e,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},postSmsNotifyAddNum:function(b){var c=new a.$.Deferred,d={to_user_id:"",phoneNum:"",is_notify:""};b=a._.extend({},d,b);var e="SMS/NotifyAddNum";return this.request({url:e,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c}})}),define("collections/task-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getTaskListData:function(b){var c,d=new a.$.Deferred,e="";return 0==b.relation?(c=a.Context.splicingUrl(b,["pageNum","pageSize"]),e="task/UserFinishTask?"+c):4==b.relation?(c=a.Context.splicingUrl(b,["pageNum","pageSize"]),e="task/UserSubstituteTask?"+c):(c=a.Context.splicingUrl(b,["relation"]),e="task/UserTask?"+c),this.request({url:e,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},participatorAccept:function(b){var c={task_id:""},d=new a.$.Deferred,e=a._.extend({},c,b),f="task/ParticipatorAccept";return this.request({url:f,type:"post",data:e}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},addFollower:function(b){var c={taskId:"",followers:[]},d=new a.$.Deferred,e=a._.extend({},c,b),f="task/AddFollower?taskId="+e.taskId;return this.request({url:f,type:"post",contentType:"application/json",data:JSON.stringify(e.followers)}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},deleteFollower:function(b){var c={taskId:"",toUserId:""},d=new a.$.Deferred,e=a._.extend({},c,b),f="task/Deletefollower?taskId="+e.taskId+"&toUserId="+e.toUserId;return this.request({url:f,type:"post"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d}})}),define("collections/lable-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getLableData:function(b){var c=new a.$.Deferred,d={obj_id:"",obj_type:"1"},b=a._.extend({},d,b),e="lable/get";return 2==b.obj_type?e=e+"?obj_id="+b.obj_id+"&obj_type="+b.obj_type:b.to_userId&&(e+="?to_userId="+b.to_userId),this.request({url:e,type:"Get"}).done(function(b){function d(c,e){a._.each(c,function(c){var f=c.id;e&&(c.fullName=e.fullName+"/"+c.name);var g=a._.where(b,{parent_id:f});g=a._.compact(g),g.length?(c.children=g,c.isEnd=!1):(c.children=null,c.isEnd=!0),d(g,c)})}var b=b.lables||[],e={};e.lables=b;var f=[{id:"0",parent_id:"0",name:"类别",fullName:"类别"}],g=a._.where(b,{parent_id:"0"});g=a._.compact(g),d(f),e.lables=f,c.resolve(e)}).fail(function(a){c.reject(a)}),c},GetDepartmentData:function(b){var c=new a.$.Deferred,d={obj_id:"",obj_type:"1",lvl:10},b=a._.extend({},d,b),e="lable/getDepartment";return e=e+"?obj_id="+b.obj_id+"&obj_type="+b.obj_type+"lvl="+b.lvl,this.request({url:e,type:"Get"}).done(function(b){function d(c){a._.each(c,function(c){var e=c.id,f=a._.where(b,{parent_id:e});f=a._.compact(f),f.length?(c.children=f,c.isEnd=!1):(c.children=null,c.isEnd=!0),d(f)})}var b=b.lables||[],e={};e.lables=b;var f=[{id:"0",parent_id:"0",name:"我的分类",enterName:"我的分类"}],g=a._.where(b,{parent_id:"0"});g=a._.compact(g),d(f),e.lables=f,c.resolve(e)}).fail(function(a){c.reject(a)}),c},addLabel:function(b){var c=new a.$.Deferred;return this.request({url:"org/Add",type:"post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},postAddLableData:function(b){var c=new a.$.Deferred,d={obj_id:"",obj_type:"1",name:"",parent_id:""},b=a._.extend({},d,b),e="lable/add";return this.request({url:e,type:"post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},deleteLableData:function(b){var c=new a.$.Deferred,d={lable_id:""},b=a._.extend({},d,b),e="lable/remove";return e=e+"?lable_id="+b.lable_id,this.request({url:e,type:"delete"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},putRenameLableData:function(b){var c=new a.$.Deferred,d={lable_id:"",name:""},b=a._.extend({},d,b),e="lable/name";return this.request({url:e,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getEnterLableData:function(b){var c=new a.$.Deferred,d={obj_id:"",obj_type:"2"},b=a._.extend({},d,b),e="lable/Get";return e=e+"?obj_id="+b.obj_id+"&obj_type="+b.obj_type,this.request({url:e,type:"Get"}).done(function(b){function d(c){a._.each(c,function(c){var e=c.id,f=a._.where(b,{parent_id:e});f=a._.compact(f),f.length?(c.children=f,c.isEnd=!1):(c.children=null,c.isEnd=!0),d(f)})}var b=[]||b.lables,e={};e.lables=b;var f=[{id:"0",parent_id:"0",name:"我的分类",enterName:"我的分类"}],g=a._.where(b,{parent_id:"0"});g=a._.compact(g),d(f),e.lables=f,c.resolve(e)}).fail(function(a){c.reject(a)}),c},postEnterAddLableData:function(b){var c=new a.$.Deferred,d={obj_id:"",obj_type:"2",name:"",parent_id:""},b=a._.extend({},d,b),e="lable/add";return this.request({url:e,type:"post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},deleteEnterLableData:function(b){var c=new a.$.Deferred,d={lable_id:""},b=a._.extend({},d,b),e="lable/remove";return e=e+"?lable_id="+b.lable_id,this.request({url:e,type:"delete"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getSeeUserList:function(b){var c=new a.$.Deferred,d={lable_id:""},b=a._.extend({},d,b),e="lable/GetLablePrivilegedUsers";return e=e+"?lable_id="+b.lable_id,this.request({url:e,type:"GET"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},putEnterRenameLableData:function(b){var c=new a.$.Deferred,d={lable_id:"",name:""},b=a._.extend({},d,b),e="lable/name";return this.request({url:e,type:"Post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},ifAddClassLableData:function(b){var c=new a.$.Deferred,d={lable_id:"",is_allow:""},b=a._.extend({},d,b),e="lable/allow?lable_id="+b.lable_id+"&is_allow="+b.is_allow;return this.request({url:e,type:"GET"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},classPerEnterLableData:function(b){var c=new a.$.Deferred,d={LableId:"",AddObjectModels:""},b=a._.extend({},d,b),e="lable/UpdateUsers";return this.request({url:e,type:"POST",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.resolve(a)}),c},searchClassData:function(b){var c=new a.$.Deferred,d={},b=a._.extend({},d,b),e="Lable/Search";return this.request({url:e,type:"POST",data:{"":b.filter}}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c}})}),define("collections/work-hour-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getWorkHourList:function(b){var c="worktime/Get",d=new a.$.Deferred,e={obj_id:"",obj_type:""};b=a._.extend({},e,b);var f="obj_id="+b.obj_id+"&obj_type="+b.obj_type;return this.request({url:c+"?"+f,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},addWorkHour:function(b){var c="worktime/Add",d=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},updateWokHour:function(b){var c="worktime/Update?work_time_id="+b.work_time_id,d=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},deleteWorkHour:function(b){var c="worktime/Delete",d=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},addAttachment:function(b){var c="WorkTime/AddAttachment",d=new a.$.Deferred,e={work_time_id:"",dfs_urls:""};b=a._.extend({},e,b);var f="work_time_id="+b.work_time_id+"&dfs_urls="+b.dfs_urls;return this.request({url:c+"?"+f,type:"POST"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},deleteAttachment:function(b){var c="WorkTime/DeleteAttachment",d=new a.$.Deferred,e={work_time_id:"",document_id:""};b=a._.extend({},e,b);var f="work_time_id="+b.work_time_id+"&document_id="+b.document_id;return this.request({url:c+"?"+f,type:"POST"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()}})}),define("collections/share-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getShareList:function(b){var c="PlanV2/GetExperience",d=new a.$.Deferred,e={plan_item_id:""};b=a._.extend({},e,b);var f="plan_item_id="+b.plan_item_id;return this.request({url:c+"?"+f,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},addShare:function(b){var c="PlanV2/AddExperience",d=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},editShare:function(b){var c="PlanV2/UpdateExperience",d=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},editShareDate:function(b){var c="PlanV2/UpdateExperienceDate",d=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},deleteShare:function(b){var c="PlanV2/DeleteExperience",d={plan_item_id:"",comment_id:""};b=a._.extend({},d,b);var e="plan_item_id="+b.plan_item_id+"&comment_id="+b.comment_id,f=new a.$.Deferred;return this.request({url:c+"?"+e,type:"POST"}).done(function(a){f.resolve(a)}).fail(function(a){f.reject(a)}),f.promise()},addAttachment:function(b){var c="PlanV2/AddExperienceAttachment",d=new a.$.Deferred,e={comment_id:"",dfs_urls:""};return b=a._.extend({},e,b),this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},deleteAttachment:function(b){var c="PlanV2/DeleteExperienceAttachment",d=new a.$.Deferred,e={comment_id:"",document_id:""};return b=a._.extend({},e,b),this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()}})}),define("collections/meet-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getMeetList:function(b){var c="Meet/Get",d=new a.$.Deferred,e={obj_id:"",obj_type:"",type:1},b=a._.extend({},e,b),f="obj_id="+b.obj_id+"&obj_type="+b.obj_type+"&type="+b.type;return this.request({url:c+"?"+f,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},getDetail:function(b){var c="Meet/MeetInfo",d=new a.$.Deferred,e={id:""};b=a._.extend({},e,b);var f="id="+b.id;return this.request({url:c+"?"+f,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},getTravelList:function(b){var c="Meet/Get",d=new a.$.Deferred,e={obj_id:"",obj_type:"",type:2};b=a._.extend({},e,b);var f="obj_id="+b.obj_id+"&obj_type="+b.obj_type+"&type="+b.type;return this.request({url:c+"?"+f,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},updateMeet:function(b){var c={Title:"",StartDate:"",DeadLine:"",MeetType:"",meet_id:"",StartDate:"",DeadLine:"",ContractUser:""};b=a._.extend({},c,b);var d="Meet/Update?meet_id="+b.meet_id,e=new a.$.Deferred;return this.request({url:d,type:"POST",data:b}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)
}),e.promise()},addMeet:function(b){var c="Meet/Add",d=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},deleteMeet:function(b){var c="Meet/Delete",d=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},addAttachment:function(b){var c="Meet/AddAttachment",d=new a.$.Deferred,e={meet_id:"",dfs_urls:""};b=a._.extend({},e,b);var f="meet_id="+b.meet_id+"&dfs_urls="+b.dfs_urls;return this.request({url:c+"?"+f,type:"POST"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},deleteAttachment:function(b){var c="Meet/DeleteAttachment",d=new a.$.Deferred,e={meet_id:"",document_id:""};b=a._.extend({},e,b);var f="meet_id="+b.meet_id+"&document_id="+b.document_id;return this.request({url:c+"?"+f,type:"POST"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},addParticipator:function(b){var c="Meet/AddParticipator",d=new a.$.Deferred,e={meet_id:"",add_objects:""};b=a._.extend({},e,b);var f="meet_id="+b.meet_id;return this.request({url:c+"?"+f,type:"POST",contentType:"application/json",data:JSON.stringify(b.add_objects)}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},deleteParticipator:function(b){var c="Meet/DeleteParticipator",d=new a.$.Deferred,e={meet_id:"",to_user_id:""};b=a._.extend({},e,b);var f="meet_id="+b.meet_id+"&to_user_id="+b.to_user_id;return this.request({url:c+"?"+f,type:"POST"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()}})}),define("collections/report-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getWorkImplementation:function(b){var c="Work/WorkImplementation",d=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},getWorkTotal:function(b){var c="PlanStatistic/TeamPlanItemList",d=new a.$.Deferred,e={UserDepartmentId:"",ToDepartmentId:"",StartDate:"",EndDate:"",UserIds:"",LableModels:"",Type:""};return b=a._.extend({},e,b),this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},getHourTotal:function(b){var c="PlanStatistic/TeamPlanItemWorkTimeList",d=new a.$.Deferred,e={UserDepartmentId:"",ToDepartmentId:"",StartDate:"",EndDate:"",UserIds:"",LableModels:"",Type:""};return b=a._.extend({},e,b),this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},getDailyTotal:function(b){var c="PlanStatistic/TeamPlanDailyStatistic",d=new a.$.Deferred,e={department_id:"",toDepartment_id:"",date:"",type:"",get_type:"",report_type:"8"};return b=a._.extend({},e,b),this.request({url:c+"?department_id="+b.department_id+"&toDepartment_id="+b.toDepartment_id+"&date="+b.date+"&type="+b.type+"&get_type="+b.get_type+"&report_type="+b.report_type,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},getExcel:function(b){var c=new a.$.Deferred;return this.request({type:"post",url:"PlanStatistic/"+b.url,data:b.data}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c}})}),define("collections/note-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getNoteList:function(b){var c="Note/GetNotes",d=new a.$.Deferred,e={user_id:""};b=a._.extend({},e,b);var f="user_id="+b.user_id;return this.request({url:c+"?"+f,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},getNotePage:function(b){var c="Note/GetNotesPage",d=new a.$.Deferred,e={user_id:"",page_num:1,page_size:5};b=a._.extend({},e,b);var f="user_id="+b.user_id+"&page_num="+b.page_num+"&page_size="+b.page_size;return this.request({url:c+"?"+f,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},addNote:function(b){var c="Note/Add",d=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},editNote:function(b){var c="Note/Update",d=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},deleteNote:function(b){var c="Note/Delete",d=new a.$.Deferred,e={user_id:"",noteId:""};b=a._.extend({},e,b);var f="noteId="+b.noteId+"&user_id="+b.user_id;return this.request({url:c+"?"+f,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()}})}),define("collections/apply-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getGroupApplyList:function(b){var c={state:"",obj_type:11};b=a._.extend({},c,b);var d="Apply/Plan/GetByUser";if("work"==b.name)var d="Apply/Work/GetByUser";var e=new a.$.Deferred,f="state="+b.state+"&obj_type="+b.obj_type;return this.request({url:d+"?"+f,type:"Get"}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},GetByObjList:function(b){var c="Apply/Plan/GetByObj",d=new a.$.Deferred,e={obj_id:"",obj_type:11};b=a._.extend({},e,b);var f="obj_id="+b.obj_id+"&obj_type="+b.obj_type;return this.request({url:c+"?"+f,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},updateApplyBatchState:function(b){var c="Apply/Plan/UpdateState",d={ApplyIds:"",State:"",ApplyContent:""};if(b=a._.extend({},d,b),"work"==b.name)var c="Apply/Work/UpdateStateWork";var e=new a.$.Deferred;return this.request({url:c,type:"POST",data:b}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},getPlanApplyList:function(b){var c="Apply/Plan/GetByObj",d=new a.$.Deferred,e={state:"",obj_id:"",obj_type:""};b=a._.extend({},e,b);var f="obj_id="+b.obj_id+"&obj_type="+b.obj_type+"&state="+b.state;return this.request({url:c+"?"+f,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()}})}),define("collections/temp-storage-collection",["talent","collections/base-collection"],function(a,b){return b.extend({saveData:function(a){var a=a||{};return this.request({url:"HelpUI/save",type:"POST",data:a})},getData:function(a){var a=a||{};return this.request({url:"HelpUI/get",type:"GET",data:a})}})}),define("collections/approval-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getPageData:function(b){var c=new a.$.Deferred,d={},b=a._.extend({},d,b),e="Apply/Plan/GetApplySet";return this.request({url:e,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},postAddLableData:function(b){var c=new a.$.Deferred,d={LableIds:"",PlanApplySetTypes:""},b=a._.extend({},d,b),e="Apply/Plan/AddApplySet";return this.request({url:e,type:"post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getMyApprovalData:function(b){var c=new a.$.Deferred,d={},b=a._.extend({},d,b),e="";return this.request({url:e,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c}})}),define("collections/resourceUI-collection",["talent","collections/base-collection"],function(a,b){return b.extend({setLanguage:function(b){var c=new a.$.Deferred,d={appId:100,language:1};b=a._.extend({},d,b);var e="Resource/SetLanguage?appId="+b.appId+"&language="+b.language;return this.request({url:e,type:"POST"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()}})}),define("collections/customize-collection",["talent","collections/base-collection"],function(a,b){return b.extend({postUpdateNavigation:function(b){var c={customize_BehaviorType:"",navigation_itemModels:[{id:0,Value:[],Score:0}]},b=a._.extend({},c,b),d="Customize/UpdateNavigation",e=new a.$.Deferred,f="customize_BehaviorType="+b.customize_BehaviorType;return this.request({url:d+"?"+f,type:"POST",contentType:"application/json",data:JSON.stringify(b.navigation_itemModels)}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},getData:function(b){var c={obj_id:"",obj_type:1,customize_type:"1,2"},d=new a.$.Deferred,b=a._.extend({},c,b),e="Customize/Get?obj_id="+b.obj_id+"&obj_type="+b.obj_type+"&customize_type="+b.customize_type;return this.request({type:"Get",url:e}).done(function(a){d.resolve(a)}),d},setData:function(b){var c={ObjId:"",TenantId:"",ObjType:1,CustomizaBehaviorType:"1,2",Fields:""},d=new a.$.Deferred,b=a._.extend({},c,b),e="Customize/Add";return this.request({type:"post",url:e,data:b}).done(function(a){d.resolve(a)}),d}})}),define("collections/signin-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getListData:function(b){var c=new a.$.Deferred,d={UserDepartmentId:"",ToDepartmentId:"",UserIds:"",StartDate:"",EndDate:"",Type:""},b=a._.extend({},d,b),e="Signin/SigninStatistic";return this.request({url:e,type:"post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},getSigninByFeedId:function(b){var c=new a.$.Deferred,d={to_user_id:"",feedId:""},b=a._.extend({},d,b),e="Signin/GetSigninByFeedId";return e=e+"?to_user_id="+b.to_user_id+"&feedId="+b.feedId,this.request({url:e,type:"Get"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},exportExcel:function(b){var c=new a.$.Deferred,d={user_departmentId:"",to_departmentId:"",user_ids:"",start_time:"",end_time:"",type:""},b=a._.extend({},d,b),e="Signin/ExportSigninReport";return this.request({url:e,type:"get",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c}})}),define("collections/tenant-collection",["talent","collections/base-collection"],function(a,b){return b.extend({postUpdateTenant:function(b){var c={Logo:"",Abbreviation:""},b=a._.extend({},c,b),d="Tenant/Update",e=new a.$.Deferred;return this.request({url:d,type:"POST",data:b}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},getPlatformApp:function(b){var c={},b=a._.extend({},c,b),d="Tenant/PlatformApp",e=new a.$.Deferred;return this.request({url:d,type:"get",data:b}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},postPlatformApp:function(b){var c={data:b.data},b=a._.extend({},c,b),d="Tenant/UpdatePlatformApps",e=new a.$.Deferred;return this.request({url:d,type:"POST",data:b.data}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()}})}),define("collections/work-table-colletion",["talent","collections/base-collection"],function(a,b){return b.extend({sendMail:function(b){var c="WorkTable/SendDailyEmail",d=new a.$.Deferred,e={startDate:"",endDate:"",userIds:""};return b=a._.extend({},e,b),this.request({url:c,type:"post",data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},_formatTree:function(b){function c(b){a._.each(b,function(b){var d=b.taskId,f=a._.where(e,{parentTaskId:d});return f=a._.compact(f),f.length?(b.Tasks=f,a._.each(f,function(a){a.level=b.level+1}),void c(f)):void(b.Tasks=[])})}var d=b||[],e=d;if(e&&e.length){var f=a._.where(e,{parentTaskId:null});a._.each(f,function(a){a.level=1}),c(f)}return d=f},GetSubPlans:function(b){var c=this,d=new a.$.Deferred,e={diff:"my",userIds:"",status:"",date:"",LableModels:"",SortType:"",RelationType:"",parentTaskId:"",planTimeType:0,work_id:"",mile_stone_id:""};b=a._.extend({},e,b);var f="Work/SubTask?work_id="+b.work_id+"&mile_stone_id="+b.mile_stone_id;return this.request({url:f,data:b,type:"post"}).done(function(a){d.resolve(c._formatTree(a))}).fail(function(a){d.reject(a)}),d.promise()},checkworkuser:function(b){var c=new a.$.Deferred,d={workId:"",toUserId:""};b=a._.extend({},d,b);var e="Work/CheckWorkUser";return this.request({url:e,type:"get",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()}})}),define("collections/work-mile-stone-collection",["talent","collections/base-collection"],function(a,b){return b.extend({addMile:function(b){var c=new a.$.Deferred,d={workId:"",mileStoneName:"",startDate:"",endDate:"",PrincipalId:""};b=a._.extend({},d,b);var e="WorkMileStone/Add";return this.request({url:e,type:"post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},getMileTask:function(b){var c=new a.$.Deferred,d={workId:"",mileStoneId:""};b=a._.extend({},d,b);var e="WorkMileStone/GetMileStoneTask";return this.request({url:e,type:"get",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},deleteMile:function(b){var c=new a.$.Deferred,d={workMileStoneId:""};b=a._.extend({},d,b);var e="WorkMileStone/Delete?workMileStoneId="+b.workMileStoneId;return this.request({url:e,type:"post"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},updateName:function(b){var c=new a.$.Deferred,d={workMileStoneId:"",workId:"",mileStoneName:"",startDate:"",endDate:"",principalId:""};b=a._.extend({},d,b);var e="WorkMileStone/UpdateName?workMileStoneId="+b.workMileStoneId;return this.request({url:e,type:"post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},updateDate:function(b){var c=new a.$.Deferred,d={workMileStoneId:"",workId:"",mileStoneName:"",startDate:"",endDate:"",principalId:""};b=a._.extend({},d,b);var e="WorkMileStone/UpdateDate?workMileStoneId="+b.workMileStoneId;return this.request({url:e,type:"post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},updatePrincipal:function(b){var c=new a.$.Deferred,d={workMileStoneId:"",workId:"",mileStoneName:"",startDate:"",endDate:"",principalId:""};b=a._.extend({},d,b);var e="WorkMileStone/UpdatePrincipal?workMileStoneId="+b.workMileStoneId;return this.request({url:e,type:"post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},updateTaskMileStone:function(b){var c=new a.$.Deferred,d={workMileStoneId:"",oldWorkMileStoneId:"",workId:"",taskId:""};b=a._.extend({},d,b);var e="WorkMileStone/UpdateTaskMileStone";return this.request({url:e,type:"post",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()}})}),define("collections/notify-collection",["talent","collections/base-collection"],function(a,b){return b.extend({sendEmail:function(b){var c="Notify/SendEmail",d=new a.$.Deferred,e={};b=a._.extend({},e,b);var f="";return this.request({url:c+f,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()}})}),define("collections/work-tag-collection",["talent","collections/base-collection"],function(a,b){return b.extend({tagAddTo:function(b){var c={tagId:"",objId:"",objType:""},b=a._.extend({},c,b),d="tag/addto",e=new a.$.Deferred;return this.request({url:d,type:"POST",data:b}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},tagCreateTo:function(b){var c={tagName:"",color:"",objId:"",objType:""};b=a._.extend({},c,b);var d="tag/createto",e=new a.$.Deferred;return this.request({url:d,type:"POST",data:b}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},getTagAll:function(){var b="tag/all",c=a.$.Deferred();return this.request({url:b,type:"GET"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},tagRemovefrom:function(b){var c={tagId:"",objId:"",objType:""},b=a._.extend({},c,b),d="tag/removefrom",e=new a.$.Deferred;return this.request({url:d,type:"POST",data:b}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},getMyUsedTag:function(){var b="tag/myused",c=new a.$.Deferred;return this.request({url:b,type:"GET"}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},tagAdd:function(b){var c={tagName:"",color:"",shareTypes:""},b=a._.extend({},c,b),d="tag/add",e=new a.$.Deferred;return this.request({url:d,type:"POST",data:b}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},tagShare:function(b){var c={tagIds:[],shareTypes:[]},b=a._.extend({},c,b),d="tag/share",e=new a.$.Deferred;return this.request({url:d,type:"POST",data:b}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},tagDelete:function(b){var c={tagIds:[]},b=a._.extend({},c,b),d="tag/delete",e=new a.$.Deferred;return this.request({url:d,type:"POST",data:b}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},tagDragSort:function(b){var c={beforeId:"",tagId:"",afterId:""},b=a._.extend({},c,b),d="tag/drag",e=new a.$.Deferred;return this.request({url:d,type:"POST",data:b}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},getWorkItemsByTag:function(b){var c={pageIndex:"",pageSize:"",tagId:"",objType:"4"},b=a._.extend({},c,b),d="?pageIndex="+b.pageIndex+"&pageSize="+b.pageSize+"&tagId="+b.tagId+"&objType="+b.objType,e="tag/workitems",f=new a.$.Deferred;return this.request({url:e+d,type:"GET"}).done(function(a){f.resolve(a)}).fail(function(a){f.reject(a)}),f.promise()}})}),define("collections/todo-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getTodoData:function(b){var c={app_type:-1,app_id:-1,page_num:1,page_size:20,status:1},b=a._.extend({},c,b),d="todo/Get",e="",f=new a.$.Deferred;return this.request({url:d+e,type:"get",data:b}).done(function(a){f.resolve(a)}).fail(function(a){f.reject(a)}),f.promise()}})}),define("collections/wxpay-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getPayCashResult:function(b){var c={},b=a._.extend({},c,b),d="wx/pay/cash/result",e=new a.$.Deferred;return this.request({url:d,type:"GET"}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},getPayRecord:function(b){var c={page_num:"",page_size:"",type:""},b=a._.extend({},c,b),d="wx/pay/record",e="?page_num="+b.page_num+"&page_size="+b.page_size+"&type="+b.type,f=new a.$.Deferred;return this.request({url:d+e,type:"GET"}).done(function(a){f.resolve(a)}).fail(function(a){f.reject(a)}),f.promise()},getPayCashRecord:function(b){var c={page_num:"",page_size:""},b=a._.extend({},c,b),d="wx/pay/cash/record",e="?page_num="+b.page_num+"&page_size="+b.page_size,f=new a.$.Deferred;return this.request({url:d+e,type:"GET"}).done(function(a){f.resolve(a)}).fail(function(a){f.reject(a)}),f.promise()},addPayCash:function(b){var c={totalFee:""},b=a._.extend({},c,b),d="wx/pay/cash/add",e="?totalFee="+b.totalFee,f=new a.$.Deferred;return this.request({url:d+e,type:"POST"}).done(function(a){f.resolve(a)}).fail(function(a){f.reject(a)}),f.promise()}})}),define("collections/manage-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getManagerListData:function(b){var c={pageIndex:0,pageSize:0},d=new a.$.Deferred,b=a._.extend({},c,b),e="manage/datamanagers";return this.request({type:"get",url:e,data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},getAuthorityListData:function(){var b=new a.$.Deferred,c="manage/objlist";return this.request({type:"get",url:c}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b},addManages:function(b){var c={UserIds:[],MenuIds:[]},d=new a.$.Deferred,b=a._.extend({},c,b),e="manage/datamanager";return this.request({type:"post",url:e,data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},resetAuthority:function(b){var c={UserIds:[],MenuIds:[]},d=new a.$.Deferred,b=a._.extend({},c,b),e="manage/reset";return this.request({type:"post",url:e,data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},deleteManage:function(b){var c={UserIds:[]},d=new a.$.Deferred,b=a._.extend({},c,b),e="manage/deldatamanager";return this.request({type:"post",url:e,data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},getAssessListData:function(b){var c={pageIndex:1,pageSize:20},d=new a.$.Deferred,b=a._.extend({},c,b),e="manage/assesslist";return this.request({type:"get",url:e,data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},getProjectListData:function(b){var c={appId:0,appType:0,pageNum:0,pageSize:0,searchObj:[],status:0,applyStatus:0,relation:0,orderType:0,filterKey:"",isAll:!1},d=new a.$.Deferred,b=a._.extend({},c,b),e="manage/work";return this.request({type:"post",url:e,data:b}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d},getMenuListData:function(){var b=new a.$.Deferred,c="manage/menulist";return this.request({type:"get",url:c}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b}})}),define("collections/work-v2-collection",["talent","collections/base-collection"],function(a,b){return b.extend({createProject:function(b){var c={workId:0,workName:"",description:"",startDate:"",endDate:"",principalId:0,visibility:0,participators:[],followers:[],isLong:!0,applyUserId:0,reCreateWorkId:0},b=a._.extend({},c,b),d="work/add",e=new a.$.Deferred;return this.request2({url:d,type:"POST",data:b}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},getWorkList:function(b){var c={appId:0,appType:0,pageNum:0,pageSize:0,searchObj:[],status:0,applyStatus:0,relation:0,orderType:0,filterKey:"",isAll:!1},b=a._.extend({},c,b),d="user/work",e="?toUserId="+b.toUserId,f=new a.$.Deferred;return this.request2({url:d+e,type:"POST",data:b}).done(function(a){f.resolve(a)}).fail(function(a){f.reject(a)}),f.promise()},getTenantWorkList:function(b){var c={appId:0,appType:0,pageNum:0,pageSize:0,searchObj:[],status:0,applyStatus:0,relation:0,orderType:0,filterKey:"",isAll:!1},b=a._.extend({},c,b),d="tenant/work",e=new a.$.Deferred;return this.request2({url:d,type:"POST",data:b}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()}})}),define("collections/menu-collection",["talent","collections/base-collection"],function(a,b){return b.extend({getHomePage:function(b){var c={toUser_id:""},b=a._.extend({},c,b),d="menu/homepage",e=new a.$.Deferred,f="?toUser_id="+b.toUser_id;return this.request({url:d+f,type:"GET"}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()}})}),define("collections/setting-collection",["talent","collections/base-collection"],function(a,b){return b.extend({setAvatar:function(b){var c="Upload/AvatarV2",d=new a.$.Deferred,e={x:"",y:"",w:"",h:"",dfs_url:""};b=a._.extend({},e,b);var f="?x="+b.x+"&y="+b.y+"&w="+b.w+"&h="+b.h+"&dfs_url="+b.dfs_url;return this.request({url:c+f,type:"POST"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},resetAvatar:function(b){var c="Upload/RestoreAvatarV2",d=new a.$.Deferred,e={};return b=a._.extend({},e,b),this.request({url:c,type:"Get"}).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()}})}),require(["talent","collections/feed-group-collection","collections/feed-comment-collection","collections/project-group-collection","collections/user-list-collection","collections/task-list-collection","collections/file-list-collection","collections/plan-group-collection","collections/user-collection","collections/plan-tag-collection","collections/user-subordinate-collection","collections/plan-common-collection","collections/feed-attachment-collection","collections/schedule-list-collection","collections/indicator-collection","collections/project-detail-collection","collections/message-collection","collections/membership-group-collection","collections/remind-me-list-collection","collections/smember-group-collection","collections/staff-collection","collections/xtcc-collection","collections/daily-collection","collections/document-collection","collections/bench-collection","collections/pay-collection","collections/home-collection","collections/evaluation-collection","collections/italent-collection","collections/sms-collection","collections/task-collection","collections/lable-collection","collections/work-hour-collection","collections/share-collection","collections/meet-collection","collections/report-collection","collections/note-collection","collections/apply-collection","collections/temp-storage-collection","collections/approval-collection","collections/resourceUI-collection","collections/customize-collection","collections/signin-collection","collections/tenant-collection","collections/work-table-colletion","collections/work-mile-stone-collection","collections/notify-collection","collections/work-tag-collection","collections/todo-collection","collections/wxpay-collection","collections/manage-collection","collections/work-v2-collection","collections/menu-collection","collections/setting-collection"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_){a.app.reqres.setHandler("Notify",function(a,b){var c=new U;return c[b](a)}),a.app.reqres.setHandler("Feed",function(a,c){var d=new b;return d[c](a)}),a.app.reqres.setHandler("Comment",function(a,b){var d=new c;return d[b](a)}),a.app.reqres.setHandler("Plan",function(a,b){var c=new h;return c[b](a)}),a.app.reqres.setHandler("Project",function(a,b){var c=new d;return c[b](a)}),a.app.reqres.setHandler("User",function(a,b){return e.instance||(e.instance=new e),e.instance[b](a)}),a.app.reqres.setHandler("File",function(a,b){var c=new g;return c[b](a)}),a.app.reqres.setHandler("Task",function(a,b){var c=new f;return c[b](a)}),a.app.reqres.setHandler("Users",function(a,b){var c=new i;return c[b](a)}),a.app.reqres.setHandler("PlanTag",function(a,b){var c=new j;return c[b](a)}),a.app.reqres.setHandler("UserSubordinate",function(a,b){var c=new k;return c[b](a)}),a.app.reqres.setHandler("PlanCommmon",function(a,b){var c=new l;return c[b](a)}),a.app.reqres.setHandler("Attachment",function(a,b){var c=new m;return c[b](a)}),a.app.reqres.setHandler("Schedule",function(a,b){var c=new n;return c[b](a)}),a.app.reqres.setHandler("Indicator",function(a,b){var c=new o;return c[b](a)}),a.app.reqres.setHandler("ProjectDetail",function(a,b){var c=new p;return c[b](a)}),a.app.reqres.setHandler("Message",function(a,b){var c=new q;return c[b](a)}),a.app.reqres.setHandler("Membership",function(a,b){return r.instance||(r.instance=new r),r.instance[b](a)}),a.app.reqres.setHandler("Remindme",function(a,b){return s.instance||(s.instance=new s),s.instance[b](a)}),a.app.reqres.setHandler("SMember",function(a,b){return t.instance||(t.instance=new t),t.instance[b](a)}),a.app.reqres.setHandler("Staff",function(a,b){return u.instance||(u.instance=new u),u.instance[b](a)}),a.app.reqres.setHandler("Xtcc",function(a,b){return v.instance||(v.instance=new v),v.instance[b](a)}),a.app.reqres.setHandler("Daily",function(a,b){return w.instance||(w.instance=new w),w.instance[b](a)}),a.app.reqres.setHandler("Document",function(a,b){return x.instance||(x.instance=new x),x.instance[b](a)}),a.app.reqres.setHandler("Bench",function(a,b){return y.instance||(y.instance=new y),y.instance[b](a)}),a.app.reqres.setHandler("Pay",function(a,b){return z.instance||(z.instance=new z),z.instance[b](a)}),a.app.reqres.setHandler("Home",function(a,b){return A.instance||(A.instance=new A),A.instance[b](a)}),a.app.reqres.setHandler("Evaluation",function(a,b){return B.instance||(B.instance=new B),B.instance[b](a)}),a.app.reqres.setHandler("Italent",function(a,b){return C.instance||(C.instance=new C),C.instance[b](a)}),a.app.reqres.setHandler("TaskCenter",function(a,b){return E.instance||(E.instance=new E),E.instance[b](a)}),a.app.reqres.setHandler("SMS",function(a,b){return D.instance||(D.instance=new D),D.instance[b](a)}),a.app.reqres.setHandler("Lable",function(a,b){return F.instance||(F.instance=new F),F.instance[b](a)}),a.app.reqres.setHandler("WorkHour",function(a,b){return G.instance||(G.instance=new G),G.instance[b](a)}),a.app.reqres.setHandler("Share",function(a,b){return H.instance||(H.instance=new H),H.instance[b](a)}),a.app.reqres.setHandler("Meet",function(a,b){return I.instance||(I.instance=new I),I.instance[b](a)}),a.app.reqres.setHandler("Report",function(a,b){return J.instance||(J.instance=new J),J.instance[b](a)}),a.app.reqres.setHandler("Note",function(a,b){return K.instance||(K.instance=new K),K.instance[b](a)}),a.app.reqres.setHandler("Apply",function(a,b){return L.instance||(L.instance=new L),L.instance[b](a)}),a.app.reqres.setHandler("TempStorage",function(a,b){return M.instance||(M.instance=new M),M.instance[b](a)}),a.app.reqres.setHandler("Approval",function(a,b){return N.instance||(N.instance=new N),N.instance[b](a)}),a.app.reqres.setHandler("ResourceUI",function(a,b){return O.instance||(O.instance=new O),O.instance[b](a)}),a.app.reqres.setHandler("Customize",function(a,b){return P.instance||(P.instance=new P),P.instance[b](a)}),a.app.reqres.setHandler("SignIn",function(a,b){return Q.instance||(Q.instance=new Q),Q.instance[b](a)}),a.app.reqres.setHandler("Tenant",function(a,b){return R.instance||(R.instance=new R),R.instance[b](a)}),a.app.reqres.setHandler("WorkTable",function(a,b){return S.instance||(S.instance=new S),S.instance[b](a)}),a.app.reqres.setHandler("WorkMile",function(a,b){return T.instance||(T.instance=new T),T.instance[b](a)}),a.app.reqres.setHandler("WorkTag",function(a,b){return V.instance||(V.instance=new V),V.instance[b](a)}),a.app.reqres.setHandler("Todo",function(a,b){return W.instance||(W.instance=new W),W.instance[b](a)}),a.app.reqres.setHandler("Wxpay",function(a,b){return X.instance||(X.instance=new X),X.instance[b](a)}),a.app.reqres.setHandler("Manage",function(a,b){return Y.instance||(Y.instance=new Y),Y.instance[b](a)}),a.app.reqres.setHandler("WorkV2",function(a,b){return Z.instance||(Z.instance=new Z),Z.instance[b](a)}),a.app.reqres.setHandler("Menu",function(a,b){return $.instance||($.instance=new $),$.instance[b](a)}),a.app.reqres.setHandler("Setting",function(a,b){return _.instance||(_.instance=new _),_.instance[b](a)})}),define("collections/index",function(){}),define("routers/home/index-router",["talent"],function(a){return a.Router.extend({routes:{"home/feeds":"handler"},handler:function(){alert("handler")}})}),define("routers/index",["talent","routers/home/index-router"],function(a,b){a.app.addInitializer(function(){new b})}),define("helpers/context",["talent"],function(a){var b=BSGlobal.apiPath,c={},d={start:BSGlobal.start,getGlobal:function(a){return BSGlobal[a]},changeHash:function(b,c,d){var e=decodeURIComponent(location.hash),f=e.split("?"),g=a.Context.parseUrl(e),h=[],i="",j=c||[],k=d||!1;a._.extend(g,b);for(var l=0,m=j.length;m>l;l++)delete g[j[l]];for(var n in g)h.push(n+"="+g[n]);i=h.length?f[0]+"?"+h.join("&"):f[0],a.app.execute("history:navigate",i,k)},setPosition:function(b,c,d){var e=a.$("body"),f={parentEl:e,pos:"bottomRight",leftBias:0,topBias:0,boundingEl:e};d=a._.extend({},f,d);var g=d.parentEl,h=b.outerHeight(),i=b.outerWidth(),j=c.outerWidth(),k=c.outerHeight(),l=d.boundingEl,m=l.offset(),n=g.offset(),o={},p=b.position();switch(b==g&&(p={left:0,top:0}),d.pos){case"top":o={top:-k,left:-(j-i)/2};break;case"topLeft":o={top:-k,left:0};break;case"topRight":o={top:-k,left:i-j};break;case"bottom":o={top:h,left:-(j-i)/2};break;case"bottomLeft":o={top:h,left:0};break;case"bottomRight":o={top:h,left:i-j}}o.left+=p.left,o.top+=p.top,d.leftBias&&(o.left=o.left+d.leftBias),d.topBias&&(o.top=o.top+d.topBias),n.left+=o.left,n.top+=o.top,n.left<m.left?o.left+=m.left-n.left:n.left-m.left>l[0].scrollWidth-j&&(o.left-=n.left-m.left-(l[0].scrollWidth-j)),n.top<m.top?o.top+=m.top-n.top:n.top-m.top>l[0].scrollHeight-k&&(o.top-=n.top-m.top-(l[0].scrollHeight-k)),c.css(o)},setPosition:function(a,b,c){var d={container:Talent.$("body"),pos:"bottom",leftBias:0,topBias:0,autoFrames:"body"},c=Talent._.extend({},d,c),e=c.container||Talent.$("body"),f=e.offset(),g=a.offset(),h=a.outerHeight(),i=a.outerWidth(),j=b.outerWidth(),k=b.outerHeight(),l={},m="",n=g.top,o=g.left,p=n-f.top,q=o-f.left;switch(c.pos){case"top":l={top:p-k,left:q},m="bottom";break;case"topCenter":l={top:p-k,left:q+i/2-j/2},m="bottom";break;case"topRight":l={top:p-k,left:q+i-j},l.left<0&&(l.left=0),m="bottom";break;case"bottom":l={top:p+h,left:q},m="top";break;case"bottomCenter":l={top:p+h,left:q+i/2-j/2},m="top";break;case"bottomRight":l={top:p+h,left:q+i-j},l.left<0&&(l.left=0),m="top";
break;case"left":l={top:p,left:q-j},m="right";break;case"leftCenter":l={top:p+h/2-k/2,left:q-j},m="right";break;case"leftBottom":l={top:p+h-k,left:q-j},m="right";break;case"right":l={top:p,left:q+i},m="left";break;case"rightCenter":l={top:p+h/2-k/2,left:q+i},m="left";break;case"rightBottom":l={top:p+h-k,left:q+i},m="left"}c.leftBias&&(l.left=l.left+c.leftBias),c.topBias&&(l.top=l.top+c.topBias);var r=Talent.$(window).height(),s=Talent.$(window).width(),t=Talent.$(document).scrollTop(),u=Talent.$(document).scrollLeft();if(f.top+l.top+k>r+t){var v=r+t-(f.top+l.top+k);l.top=l.top+v}if(f.top+l.top<t){var v=t-(f.top+l.top);l.top=l.top+v}if(f.left+l.left+j>s+u){var w=s+u-(f.left+l.left+j);l.left=l.left+w}if(f.left+l.left<u){var w=u-(f.left+l.left);l.left=l.left+w}b.css(l)},getLocalStorage:function(){if("object"==typeof localStorage)return localStorage;if("object"==typeof globalStorage)return globalStorage[location.host];throw new Error("local storage not available")},deleteGlobalProp:function(a){delete BSGlobal[a]},setGlobal:function(a,b){BSGlobal[a]=b},setPageTitle:function(a){var b=location.hash.split("?")[0];if(a)document.title=a,c[b]=a;else{var d=c[b]||"tita";if(!d)return;document.title=c[b]}},getTenantInfo:function(){return BSGlobal.tenantInfo},getUserInfo:function(){return BSGlobal.loginUserInfo},getStaticUrl:function(a){var b=BSGlobal.staticPath;return b+"/"+a},getApiUrl:function(a){var c=this.getUserInfo().Id,d=this.getTenantInfo().Id;return b+"/api/v1/"+d+"/"+c+"/"+a},getApiUrlV2:function(a){var c=this.getUserInfo().Id,d=this.getTenantInfo().Id;return b+"/api/v2/"+d+"/"+c+"/"+a},getApiHost:function(){return b},getI18n:function(){var b={home_1:"动态",plan_1:"计划",work_1:"项目",document_1:"文件",workmate_1:"同事",app_1:"应用",task_1:"任务",task_2:"循环任务",schedule_1:"日程",share_1:"分享",sharing_1:"分享",follow_1:"立即关注",following_1:"正在关注",cancelfollow_1:"取消关注",myfollowmate_1:"我关注的",myfans_1:"我的粉丝",publishshare_1:"发分享",publishtask_1:"派任务",myfollowfeed_1:"与我相关",mypublishfeed_1:"我发表的",myleavefeed_1:"@我的",myreplayfeed_1:"回复我的",mycollectfeed_1:"我收藏的",myallfeed_1:"所有动态",message_1:"消息",remind_1:"提醒",myschedule_1:"我的日程",href_1:"常用链接",invitemate_1:"邀请同事",helpcenter_1:"帮助中心",onlineuser_1:"在线同事"},c={guide_1:"打开导览"};return BSGlobal&&BSGlobal.BSi18n?a._.extend({},BSGlobal.BSi18n,c):a._.extend({},b,c)},getWebUrl:function(a){return BSGlobal.titaHost+"/"+a},parseUrl:function(a){var b={};if(!a)return b;var c=a.indexOf("?");if(c>-1)for(var d=a.slice(c+1),e=d.split("&"),f=0;f<e.length;f++){var g=e[f].split("=");b[g[0]]=decodeURIComponent(g[1])}return b},getLoginUrl:function(){var a=this.getWebUrl("Account/LogIn");return a+"?ReturnUrl="+encodeURIComponent(location.href)},getLoading:function(){var a=(this.getStaticUrl("images/load_m.gif"),['<div class="_tt_loading_m">',"  加载中...","</div>"].join(""));return a},getModuleLoading:function(){var a=(this.getStaticUrl("images/load_m.gif"),['<div class="tt_module_loading_m">',"<span></span> 加载中...","</div>"].join(""));return a},removeModuleLoading:function(a){a&&a.length&&a.find(".tt_module_loading_m").remove()},getAttachmentType:function(){return{image:["jpg","png","gif","jpeg","JPG","PNG","GIF","JPEG"],file:["rar","zip","exe","pdf","txt","doc","docx","ppt","pptx","XLS","XLSX","RAR","ZIP","EXE","PDF","TXT","DOC","DOCX","PPT","PPTX","XLS","XLSX"],music:["mp3","wma","wav","flac","ape","ogg","aac","m4a","MP3","WMA","WAV","FLAC","APE","OGG","AAC","M4A"],video:["mp4","mkv","rm","rmvb","avi","3gp","flv","wmv","asf","mpeg","mpg","mov","ts","m4v"]}},getEmptyTemplate:function(b,c){if(b){var d=a._.extend({},{className:""},c),e=b.replace(/<[^>].*?>/g,"").replace(/[&nbsp;]/g,"").length,f="content_emptyinit";e>24&&(f="small_content_emptyinit");var g=['<div class="tt_common_emptyinit '+d.className+'">','<div class="'+f+'">',b,"</div>","</div>"].join("");return g}},removeEmptyTemplate:function(a){a&&a.length&&a.find(".tt_common_emptyinit").remove()},packDialog:function(b,c){var d={arrowPos:"",sure:null,cancel:null,arrow:1},e=$.extend({},d,c);2==c.arrow?e.arrow=" arrow2":1==c.arrow&&(e.arrow="");var f=['<div class="_tt_dialog">','<div class="arrow '+e.arrowPos+e.arrow+'"></div>','<div class="content_dialog"></div>','<div class="uibutton">','<a href="javascript:void(0);" title="" class="btn btn-sure">确定</a>','<a href="javascript:void(0);" title="" class="btn btn-cancel">取消</a>',"</div>","</div>"];e.arrow===!1&&(f[1]=""),e.cancel||(f[5]=""),e.sure||(f[4]=""),e.cancel||e.sure||(f[3]="",f[4]="",f[5]="",f[6]="");var g=a.$(f.join(""));return g.find(".content_dialog").html(b),g},setMainRegionsHeight:function(b){var c=a.$("._tt_layout_tabnav").height(),d=a.$("#header-region").outerHeight(),e=a.$("#footer-region").outerHeight(),f=a.$("#main-region").outerHeight(),g=$(window).height()-d-e,h=g;a.$("._tt_layout_tabnav").length?(h=g>c?g:c,h=f>h?f:h):f>g&&(h=f),b.css({minHeight:h})},splicingUrl:function(a,b){var b=b||[],c=[];if(!b.length)return a;for(var d=0;d<b.length;d++){var e=encodeURIComponent(a[b[d]]);c.push(b[d]+"="+e)}return c.join("&")},decodeScript:function(a){return 0==a.length?"":(s=a.replace(/&lt;/g,"<"),s=s.replace(/&gt;/g,">"),s=s.replace(/&nbsp;/g," "),s=s.replace(/&apos;/g,"'"),s=s.replace(/&quot;/g,'"'),s=s.replace(/&amp;/g,"&"),s)},getAppName:function(a){var b={0:"tita",4:"工作",3:"团队",100:"iTalent",200:"内部推荐",203:"招聘",201:"入职帮帮",300:"Microsof CRM",400:"绩效管理",500:"继任发展",600:"客户支持",700:"会议预定",800:"够快存储",820:"IMO通讯"};if(a){var a=parseInt(a);return b[a]||""}return b},getData:function(b,c,d){if(!b)return void alert("url不存在");var e=a.$.Deferred(),b=a.Context.getApiUrl(b);return a.$.ajax({url:b,data:c,type:d||"Get"}).done(function(a){1==a.Code?e.resolve(a.Data):e.reject(a.Message)}),e.promise()},subString:function(a,b,c,d){for(var e=0,f="",g=/[^\x00-\xff]/g,h="",a=a||"",i=a.replace(g,"**").length,d=d||0,j=0;i>j&&(h=a.charAt(j).toString(),null!=h.match(g)?e+=2:e++,!(e+(i>b?d:0)>b));j++)f+=h;return c&&i>b&&(f+="…"),f},getStrLength:function(a){var b=/[^\x00-\xff]/g;return a.replace(b,"**").length},getPageUrl:function(b,c){var d={appId:1,appType:1,userId:""};c=a._.extend({},d,c);var e={profile:"#italent/home?appid="+c.appId+"&apptype="+c.appType+"&name=TalentProfile-record&to_user_id="+c.userId};return e[b]},formatDate:function(a,b){var c=new Date(a),d={"M+":c.getMonth()+1,"d+":c.getDate(),"H+":c.getHours(),"m+":c.getMinutes(),"s+":c.getSeconds(),"q+":Math.floor((c.getMonth()+3)/3),S:c.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(c.getFullYear()+"").substr(4-RegExp.$1.length)));for(var e in d)new RegExp("("+e+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?d[e]:("00"+d[e]).substr((""+d[e]).length)));return b},getUploadOptions:function(b){var c=this.getGlobal("env"),d="tita.com";"develop"==c&&(d="tita-inc.com");var e={validate:{format:[],onceLimt:20,allLimt:-1,nameLimt:-1},callbackName:"jsCallback",url:a.Context.getApiUrl("Upload/PostFiles"),ajaxUrl:a.Context.getApiUrl("Upload/PostFiles?format=json"),fileInputName:"file_upload",extendData:{domain:"document.domain="+d},error:{error_allLimt:"文件超出最大限度",error_format:"文件格式不合法",error_nameLimt:"名字长度不合格"},isPaste:!0,isDrag:!0,callbackValue:"parent._callback_"};return b&&(e=a._.extend({},e,b)),e},useLocalStorage:function(){return!0},customModuleIsShow:function(){for(var b=a.Context.getGlobal("navigations")||{},c=b.titaHomeNavigation||[],d={},e=0;e<c.length;e++){var f=c[e],g=f.navigationValue,h=g.url.substr(1);d[h]=g.isUse}return d.task=d.plan,d.calendar=!1,d},IsOpenWorkMilePost:function(){var b=a.Context.getGlobal("navigations")||{},c=b.titaWorkDetailNavigation||[];if(0==c.length)return!1;var d=_.findWhere(c,{id:"36dc413a-8a56-4bf3-a516-df80fb40c9ca"});return d?d.navigationValue.isUse:!1},IsOpenYifangyun:function(){var b=a.Context.getGlobal("WebHead")||{},c=b.AppHead||[],d=_.findWhere(c,{AppId:"801"});return d?!0:!1},textMark:function(a,b,c){var d,e={divFlag:!0,divStr:"",markClass:"",markColor:"#c23934"},f=Talent._.extend({},e,c||{});d=f.markClass?'class="'+f.markClass+'"':'style="font-weight: bold; color:'+f.markColor+'"',a=Talent.$.trim(a);var g=[];f.divFlag?g=a.split(f.divStr):g.push(a);var h=function(a){var b=/[\^\.\\\|\(\)\*\+\-\$\[\]\?]/g,c={"^":"\\^",".":"\\.","\\":"\\\\","|":"\\|","(":"\\(",")":"\\)","*":"\\*","+":"\\+","-":"\\-",$:"$","[":"\\[","]":"\\]","?":"\\?"};return a=a.replace(b,function(a){return c[a]})};return Talent.$.each(g,function(a,c){var d=new RegExp(h(c),"g");d.test(b)&&(b=b.replace(d,"♂"+c+"♀"),test=1)}),b=b.replace(/♂/g,"<span "+d+">").replace(/♀/g,"</span>")}};return a.Context=a._.extend({},d),a.Context}),function(a){"function"==typeof define&&define.amd?define("$.mousewheel",["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var e,f=b||window.event,g=[].slice.call(arguments,1),h=0,i=0,j=0,k=0,l=0;return b=a.event.fix(f),b.type="mousewheel",f.wheelDelta&&(h=f.wheelDelta),f.detail&&(h=-1*f.detail),f.deltaY&&(j=-1*f.deltaY,h=j),f.deltaX&&(i=f.deltaX,h=-1*i),void 0!==f.wheelDeltaY&&(j=f.wheelDeltaY),void 0!==f.wheelDeltaX&&(i=-1*f.wheelDeltaX),k=Math.abs(h),(!c||c>k)&&(c=k),l=Math.max(Math.abs(j),Math.abs(i)),(!d||d>l)&&(d=l),e=h>0?"floor":"ceil",h=Math[e](h/c),i=Math[e](i/d),j=Math[e](j/d),g.unshift(b,h,i,j),(a.event.dispatch||a.event.handle).apply(this,g)}var c,d,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],f="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(a.event.fixHooks)for(var g=e.length;g;)a.event.fixHooks[e[--g]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=f.length;a;)this.addEventListener(f[--a],b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=f.length;a;)this.removeEventListener(f[--a],b,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),define("helpers/underscore",["talent","_","helpers/context","$.mousewheel","moment"],function(a,b,c,d,e){var f={};return $(document).on("splash",function(a,c){c||(c=location.hash.slice(1));var d=BSGlobal.start;BSGlobal.splashStart&&(d=BSGlobal.splashStart);var e=new Date-d;b.up("[splash] "+c,e)}),b.splash=function(a){$(document).trigger("splash",a)},b.alert=function(a){alert(a)},b.error=function(a){throw new Error(a)},b.dd=function(a){window.console&&console.log&&console.log(a)},b.time=function(a){f[a]=new Date},b.timeEnd=function(a){var c=new Date-(f[a]||0);delete f[a],b.up(a,c)},b.up=function(a,b,d){var e=c.getUserInfo().Id,f=c.getTenantInfo().Id,g=c.getGlobal("env"),h=g+".ux.tita.com",i=0;void 0===d?(type=1,d=0,i=e+"-"+Math.round(1e3*Math.random())):type=2;var j="http://opsapi.tita.com/opsapi/AddLog",k="?appName="+h+"&label="+encodeURIComponent(a)+"&uid="+e+"&tid="+f+"&time="+b+"&type="+type+"&sid="+i+"&step="+d+"&ts="+(new Date).getTime(),l=new Image;l.src=j+k;new Image,{pid:"tita",tid:f,uid:e,env:g,label:a,duration:b,ts:+new Date}},b.upWindow=function(a,b,d){var e=c.getUserInfo().Id,f=c.getTenantInfo().Id,g=c.getGlobal("env"),h=g+".ux.tita.com",i=0;void 0===d?(type=1,d=0,i=e+"-"+Math.round(1e3*Math.random())):type=2;var j=screen.width,k=screen.height,l="http://opsapi.beisen.com/api/Performance",m="?appName="+h+"&label="+encodeURIComponent(a)+"&uid="+e+"&tid="+f+"&time="+b+"&type="+type+"&sid="+i+"&step="+d+"&winh="+k+"&winw="+j,n=new Image;n.src=l+m},b.log=function(a,c){clearTimeout(b.log.timer);var d=b.log.lastDate||new Date,e=new Date;if(window.console){c=c||"null";var f=(e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds(),((e-d)/1e4).toString().slice(2)||"0000");console.log("[%s] %s:%s",f,c,a)}b.log.lastDate=e,b.log.timer=setTimeout(function(){delete b.log.lastDate},3e3)},b.formatDate=function(a,b){return a=a||"",0!=a.indexOf("/Date")?a:(b=b||"YYYY.MM.DD",e(new Date(a.replace("/\\/ig",""))).format(b))},b.formatStringDate=function(a,b){return b=b||"YYYY-MM-DD",(a=a||"")?e(new Date(a)).format(b):void 0},b.calChineseLen=function(a){a||(a="");for(var b=0,c="",d=/[^\x00-\xff]/g,e="",f=a.replace(d,"**").length,g=0;f>g&&(e=a.charAt(g).toString(),null!=e.match(d)?b+=2:b++,!(b>len));g++)c+=e;return f},b.substring=function(a,b,c){a||(a="");for(var d=0,e="",f=/[^\x00-\xff]/g,g="",h=a.replace(f,"**").length,i=0;h>i&&(g=a.charAt(i).toString(),null!=g.match(f)?d+=2:d++,!(d>b));i++)e+=g;return c&&h>b&&(e+="..."),e},b.substringWithM=function(a,b,c){a||(a="");for(var d=0,e="",f=/[^\x00-\xff]/g,g="",h=a.replace(f,"**").length,i=0;h>i&&(g=a.charAt(i).toString(),null!=g.match(f)?d+=2:"m"==g||"w"==g?d+=2:d++,!(d>b));i++)e+=g;return c&&h>b&&(e+="…"),e},b.isStringBeyondLength=function(a,b){var c=/[^\x00-\xff]/g,d=a.replace(c,"**").length;return d>b?!0:!1},b.preventMouseWheel=function(a){$(a).off("mousewheel.preventDefault"),$(a).on("mousewheel.preventDefault",function(a,b){b>0?this.scrollTop-=30:this.scrollTop+=30,a.preventDefault()})},b.convertImage=function(a){var c="",a=a||{},d={className:"",size:30,shape:"radius",name:"",src:""};return a=b.extend({},d,a),a.bgColor?(50==a.size?a.subName=b.substring(a.name,6,!1):30==a.size?a.subName=b.substring(a.name,2,!1):64==a.size?a.subName=b.substring(a.name,6,!1):80==a.size?a.subName=b.substring(a.name,6,!1):100==a.size?a.subName=b.substring(a.name,8,!1):150==a.size&&(a.subName=b.substring(a.name,10,!1)),c=['<span class="',a.shape,"_img",a.size," ",a.className,'" style="background-color:',a.bgColor,';"  original-title="',a.name,'">',a.subName,"</span>"].join("")):c=['<img class="',a.shape,"_img",a.size," ",a.className,'" width="',a.size,'" height="',a.size,'" src="',a.src,'" original-title="',a.name,'" />'].join(""),c},b.evaluation=function(a){var c={1:"medal-grade-one",2:"medal-grade-two",3:"medal-grade-three"},d={1:"太棒了！",2:"干的不错！",3:"再接再厉！"},a=a||{},e={type:1,value:"",lvl:5,goal:2},f=a.type;a=b.extend({},e,a),a.value=parseInt(a.value),a.type=parseInt(a.type),a.lvl||(a.lvl=5);var g=["","",""];if(1==f){var h=Math.floor(a.value/a.goal);g=['<span class="evaluation-star-list">',"","</span>"];var i=0,j=Math.ceil(a.value/a.goal);h!=j&&(i=j);for(var k=1;k<=a.lvl;k++)g[1]+=h>=k?'<span class="icon-star-m-active"></span>':i==k?'<span class="icon-star-m-half-active"></span>':'<span class="icon-star-m-disabled"></span>';g[1]+='<div class="last-score"><span class="score-value">'+a.value+'</span><span class="value-unit">分</span></div>'}return 2==f&&(a.name&&"null"!=a.name||(a.name=d[a.value]),g[1]='<span class="'+c[a.value]+' active medal-result"><span class="icon icon-'+c[a.value]+' active"></span>'+a.name+"</span>"),'<span class="tt_evaluation">'+g.join("")+"</span>"},b.evaluationMedal=function(a,b){var c={1:"medal-grade-one",2:"medal-grade-two",3:"medal-grade-three"},d="<span class='"+c[a]+" active medal-result' data-index='"+a+"'><span class='icon icon-"+c[a]+" active'></span>"+b+"</span>";return d},b}),define("helpers/$",["talent","$","helpers/underscore"],function(a,b,c){function d(a){a=a.toLowerCase();var b=/(webkit)[ \/]([\w.]+)/,c=/(opera)(?:.*version)?[ \/]([\w.]+)/,d=/(msie) ([\w.]+)/,e=/(mozilla)(?:.*? rv:([\w.]+))?/,f=b.exec(a)||c.exec(a)||d.exec(a)||a.indexOf("compatible")<0&&e.exec(a)||[];return{browser:f[1]||"",version:f[2]||"0"}}b(document).ajaxSend(function(a,b,d){var e="[ajax]["+d.type+"]"+d.url;c.time(e)}),b(document).ajaxSuccess(function(a,b,d){var e="[ajax]["+d.type+"]"+d.url;c.timeEnd(e)}),b(document).ajaxError(function(a,b,d,e){var f="[ajax]["+d.type+"]"+d.url;c.timeEnd(f),c.log(b.status+": "+b.statusText+": "+(e.message||":")+d.url,"ajaxError")}),b("body").on("beforeLoagPageView",function(){var a=b(BSGlobal.container).find("#main-region");a.length&&a.html('<div class="loginInitLoad pageInitLoad"><span class="logo_lil"></span><span class="load_lil"></span></div>')}),Talent.app.vent.on("route",function(){BSGlobal.splashStart=new Date}),Talent.app.vent.on("route",function(){BSGlobal.splashStart=new Date}),b.browser={},browserMatch=d(navigator.userAgent),browserMatch.browser&&(b.browser[browserMatch.browser]=!0,b.browser.version=browserMatch.version),b.browser.webkit&&(b.browser.safari=!0)}),define("helpers/dc",["talent","helpers/underscore","helpers/context"],function(a,b,c){function d(){return"/_pv/"+location.hash.slice(1)}$("body").on("render:main:start",function(){b.time("render:main")}),$("body").on("render:main:end",function(){b.timeEnd("render:main")});var e=a.Context.getGlobal("env");if("develop"!=e&&"Testing"!=e){window._gaq=[],_gaq.push(["_setAccount","UA-39733206-1"]),_gaq.push(["_trackPageview"]);var f=document.createElement("script");f.type="text/javascript",f.async=!0,f.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",window._hmt=[],a.app.vent.on("route",function(){_hmt.push(["_trackPageview",d()])});try{var g=c.getUserInfo().Id,h=c.getTenantInfo().Id;$(document).mousedown(function(b){if(!(b.clientX>=$(window).width()||b.clientY>=$(window).height())){{new Image}a.app.request("history:getFragments").done(function(a){({pid:"tita",uid:g,tid:h,page:a[0],fs:encodeURIComponent(a.join("/")),x:b.pageX,y:b.pageY,ww:$(window).width(),wh:$(window).height(),sl:$(document.body).scrollLeft(),st:$(document.body).scrollTop(),ts:+new Date}),{a:"tita",p:a[0],x:b.pageX,y:b.pageY,w:$("body").width()},new Image})}}),"performance"in window&&"timing"in window.performance&&setTimeout(function(){{var a=window.performance.timing;({pid:"tita",uid:g,tid:h,sw:screen.width,sh:screen.height,ww:$(window).width(),wh:$(window).height(),ts:a.navigationStart,redirect:a.redirectEnd-a.redirectStart,dns:a.domainLookupEnd-a.domainLookupStart,connect:a.connectEnd-a.connectStart,request:a.responseStart-a.requestStart,response:a.responseEnd-a.responseStart,domReady:a.domContentLoadedEventStart-a.responseEnd,pageLoaded:a.loadEventStart-a.responseEnd,pageTotal:a.loadEventEnd-a.navigationStart}),new Image}},5e3)}catch(i){}var j=document.createElement("script");j.src="//hm.baidu.com/hm.js?a5ae56c4474c2f66e1dbe83d8def8c56";var k=document.getElementsByTagName("script")[0];k.parentNode.insertBefore(j,k);var l=document.createElement("span");l.id="cnzz_stat_icon_1255851653",document.body.appendChild(l,k);var m=document.createElement("script");m.src="http://s95.cnzz.com/z_stat.php?id=1255851653";{document.getElementsByTagName("script")[0]}document.body.appendChild(m,k);var n=document.createElement("span");n.id="cnzz_stat_icon_1255976846",document.body.appendChild(n);var o=document.createElement("script");o.src="http://s95.cnzz.com/z_stat.php?id=1255976846",document.body.appendChild(o)}}),define("helpers/et",["talent"],function(a){var b=function(){window.ET.beforeOnWinError=function(){return BSGlobal.env&&"PRODUCTION"===BSGlobal.env.toUpperCase()},window.ET.getExtendEtParams=function(){return{applicationName:"ux.tita.com",userId:a.Context.getUserInfo().Id,tenantId:a.Context.getTenantInfo().Id}}};window.ET?b():document.addEventListener?document.addEventListener("etOnload",function(){b()},!1):(document.documentElement.etOnload=0,document.documentElement.attachEvent("onpropertychange",function(a){"etOnload"==a.propertyName&&(b(),document.documentElement.detachEvent("onpropertychange",arguments.callee))}))}),define("helpers/talent",["talent"],function(a){a.IndexRouter=a.IndexRouter.extend({loadPageView:function(){if(!Backbone.history.getFragment()){var b=BSGlobal.newNavigation||[],c=this.options.entryPageId;if(b.length){var d=b[0];if(c=d.href,d.children&&d.children.length>0){var d=d.children[0];c=d.href}var e="iTalentNavId="+d.id+(d.code&&""!=d.code?"&iTalentNavCode="+d.code:"");"iframe"==d.type?c="widget/italent?iTalentFrameType=iframe&"+e+"&iTalentFrame="+encodeURIComponent(c):"hash"==d.type&&(c+=c.indexOf("?")>0?"&"+e:"?"+e)}return Backbone.history.navigate(c,!0)}var f=this,g=this.getPageViewPath(),h=this.getPageViewPath(!0);$(document.body).trigger("beforeLoagPageView"),require([h],function(){require([g],function(b){var c=new b({queryObject:f.getQueryObject(),fragments:f.getFragments()});c.getLayoutView(function(b){a.app.container.currentView===b&&b.refresh?b.refresh():a.app.container.show(b)})})})}})}),define("helpers/index",["talent","helpers/context","helpers/underscore","helpers/$","helpers/dc","helpers/et","helpers/talent"],function(){}),define("network/index",["talent","helpers/context"],function(a,b){function c(){throw location.href=talent.Context.getLoginUrl(),new Error("401")}var d=a.$;d.ajaxSetup({converters:{"* mock":!0},headers:{"x-beisen-ajax":"1.0"},beforeSend:function(a){a.setRequestHeader("X-Beisen-ts",(new Date).getTime()),a.setRequestHeader("X-XSRF-Token",b.getGlobal("webApiToken"))},statusCode:{401:function(){c()},230:function(){talent.app.vent.trigger("errortracker",230)}}}),d.ajaxTransport("mock",function(a){return{send:function(b,c){c(200,"success",{text:a.mockData[a.type]})}}}),Backbone.emulateHTTP=!0;var e=Backbone.sync;Backbone.sync=function(a,f,g){f.mockData&&(g.dataType="mock",g.mockData=f.mockData),f.url&&f.url.indexOf&&0!=f.url.indexOf("http://")&&(f.url=b.getApiUrl(f.url)),g.url&&0!=g.url.indexOf("http://")&&(g.url=b.getApiUrl(g.url));var h,i=g.success;g.success=function(a,b,d){var e=a.Code;1==e?i&&i(a.Data,b,d):(401==e&&c(),d.error&&d.error(h,b,a.message))},g.beforeSend=function(a){a.setRequestHeader("X-Beisen-ts",(new Date).getTime()),a.setRequestHeader("X-XSRF-Token",b.getGlobal("webApiToken"))};var j=new d.Deferred;return h=e.apply(Backbone,arguments),h.done(function(a){var b=a.Code;1==b?j.resolve(a.Data):(401==b&&c(),j.reject(h,a.message))}),h.fail(j.reject),j}}),define("templates/common",[],function(){return this.JST=this.JST||{},this.JST["common/apply/apply-batch"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<button class="btn btn-sure" data-name="sure-all">全部同意</button>\n<button class="btn btn-cancel" data-name="cancel-all">全部驳回</button>';return __p},this.JST["common/apply/apply-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="apply_detail"><div class="apply_left">\n    <div class="apply_date ',1==state&&(__p+="no_padding_bottom"),__p+='">\n        <span class="blue_date">'+(null==(__t=t_start_date)?"":__t)+"</span><span>"+(null==(__t=t_start_hour)?"":__t)+"</span>\n    </div>\n    ",1!=state&&(__p+='\n        <div class="apply_date no_bottom_padding bottom_position">\n            <span class="blue_date">',t_start_date!=t_end_date&&(__p+=null==(__t=t_end_date)?"":__t),__p+="</span><span>"+(null==(__t=t_end_hour)?"":__t)+"</span>\n        </div>\n    "),__p+="\n    ",1==state&&0==IsEditApplyAble&&(__p+='\n        <div class="apply_date no_bottom_padding">\n            <span class="blue_date"></span><span></span>\n        </div>\n    '),__p+='\n</div>\n<div class="apply_middel">\n    <div class="apply_status ',2==state?__p+="apply_ok":3==state&&(__p+="apply_refuse"),__p+='"></div>\n    ',1!=state?__p+='\n        <div class="apply_tree"></div>\n        <div class="apply_end"></div>\n    ':1==state&&0==IsEditApplyAble&&(__p+='\n        <div class="apply_tree"></div>\n        <div class="apply_end"></div>\n    '),__p+='  \n</div>\n<div class="apply_right">\n    <div class="apply_msg ',1==state&&(__p+="no_padding_bottom"),__p+='">'+(null==(__t=txtTemplate)?"":__t)+"</span></div>\n   ",1!=state?(__p+='\n        <div class="apply_msg no_bottom_padding position">'+(null==(__t=ApplyUser.Name)?"":__t)+"：<span>",__p+=2==state?"已同意":"已驳回",__p+="</span></div>\n   "):1==state&&0==IsEditApplyAble&&(__p+='\n        <div class="apply_msg no_bottom_padding position">待审批</div>\n   '),__p+="\n</div>\n",IsEditApplyAble&&1==state&&(__p+='\n    <div class="apply_item_edit">\n        <button class="btn btn-sure" data-name="sure-item">同意</button>\n        <button class="btn btn-cancel" data-name="cancel-item">驳回</button>\n    </div>\n'),__p+="\n</div>\n",3==state&&ApplyDescription&&(__p+='\n <div class="apply_refuse_content">驳回理由：<span>'+(null==(__t=ApplyDescription)?"":__t)+"</span></div>\n "),__p+="\n";return __p},this.JST["common/apply/project-apply-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="apply_detail">\n    <div class="apply_left">\n        <div class="apply_date no_padding_bottom">\n            <span class="blue_date">'+(null==(__t=t_start_date)?"":__t)+"</span><span>"+(null==(__t=t_start_hour)?"":__t)+"</span>\n        </div>\n        ",1!=state&&(__p+='\n            <div class="apply_date no_bottom_padding bottom_position">\n                <span class="blue_date">'+(null==(__t=t_end_date)?"":__t)+"</span><span>"+(null==(__t=t_end_hour)?"":__t)+"</span>\n            </div>\n        "),__p+=' \n    </div>\n    <div class="apply_middel">\n        <div class="apply_status ',2==state?__p+="apply_ok":3==state&&(__p+="apply_refuse"),__p+='"></div>\n        ',1!=state&&(__p+='\n        <div class="apply_tree" style="height:118px;"></div>\n        <div class="apply_end"></div>\n        '),__p+='\n    </div>\n    <div class="apply_right" style="margin-top:-5px;">\n        <div class="apply_msg no_padding_bottom" style="line-height:30px;">'+(null==(__t=txtTemplate)?"":__t)+"<br>\n            起止时间：<span>"+(null==(__t=AddWorkStartDate)?"":__t)+" - ",__p+=AddWorkEndDate?null==(__t=AddWorkEndDate)?"":__t:"长期",__p+="</span><br>\n            负责人：<span>"+(null==(__t=AddWorkPrincipleName)?"":__t)+"</span><br>\n            ",AddWorkDescription&&(__p+="项目目标：<span>"+(null==(__t=_.substring(AddWorkDescription,170,!0))?"":__t),isShowAll&&(__p+='<a href="javascript:void(0)" data-name="show-all">查看全部</a>'),__p+="</span><br/>"),__p+="\n            ",AddWorkPaticipatesName&&(__p+="其他成员：<span>"+(null==(__t=AddWorkPaticipatesName)?"":__t)+"</span>"),__p+="\n        </div>\n        ",1!=state&&(__p+='\n            <div class="apply_msg no_bottom_padding position">'+(null==(__t=ApplyUser.Name)?"":__t)+"：<span>",__p+=2==state?"已同意":"已驳回",__p+="\n        </div>\n        "),__p+="   \n    </div>\n    ",IsEditApplyAble&&1==state&&(__p+='\n        <div class="apply_item_edit">\n            <button class="btn btn-sure" data-name="sure-item">同意</button>\n            <button class="btn btn-cancel" data-name="cancel-item">驳回</button>\n        </div>\n    '),__p+="\n</div>\n",3==state&&ApplyDescription&&(__p+='\n    <div class="reason">理由:<span>'+(null==(__t=ApplyDescription)?"":__t)+'</span>\n        <span class="icon-frame-top"></span>\n    </div>\n '),__p+="\n              ";return __p},this.JST["common/apply/template"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="tt_messagepage">\n	<div class="pagetitle">\n		<h2 class="ms_pagetitle">\n			<span>团队计划审批</span>\n		</h2>\n	</div>\n	<div class="ms_tablist">\n		\n	</div>\n	<div class="apply_list">\n		<div data-name="apply-betch"></div>\n		<div data-name="apply-common-list">\n			<div class="apply_common_list">\n				<div class="apply_item">\n   					<div class="apply_detail">\n				        <div class="apply_left">\n				            <div class="apply_date no_padding_bottom">\n				                <span class="blue_date">2014/10/30</span><span>17:06</span>\n				            </div>  \n				        </div>\n				        <div class="apply_middel">\n				            <div class="apply_status"></div>\n				        </div>\n				        <div class="apply_right" style="margin-top:-5px;">\n				            <div class="apply_msg no_padding_bottom" style="line-height:30px;">苏小杰:创建了\n				                <span>公开项目 &nbsp;&nbsp;十一黄金周促销方案</span><br>\n				                起止时间：<span>2014/09/19 - 2014/10/10</span><br>\n				                负责人：<span>苏小洁</span><br>\n				                其他成员：<span>张小环，杨晓晨，罗晓冲，杨晓烦</span>\n				            </div>\n				        </div>\n				        <div class="apply_item_edit">\n				            <button class="btn btn-sure" data-name="sure-item">同意</button>\n				            <button class="btn btn-cancel" data-name="cancel-item">驳回</button>\n				        </div>\n    				</div>\n				</div>\n				<div class="apply_item">\n				    <div class="apply_detail">\n				        <div class="apply_left">\n				            <div class="apply_date no_padding_bottom">\n				                <span class="blue_date">2014/10/30</span><span>17:06</span>\n				            </div>\n				            <div class="apply_date no_bottom_padding bottom_position">\n				           		<span class="blue_date">2014/10/30</span><span>17:06</span>\n				        	</div>\n				       	</div>\n				        <div class="apply_middel">\n				            <div class="apply_status apply_ok"></div>\n				            <div class="apply_tree" style="height:118px;"></div>\n				            <div class="apply_end"></div>\n				        </div>\n				        <div class="apply_right" style="margin-top:-5px;">\n				            <div class="apply_msg no_padding_bottom" style="line-height:30px;">苏小杰:创建了\n				                <span>公开项目 &nbsp;&nbsp;十一黄金周促销方案</span><br>\n				                起止时间：<span>2014/09/19 - 2014/10/10</span><br>\n				                负责人：<span>苏小洁</span><br>\n				                其他成员：<span>张小环，杨晓晨，罗晓冲，杨晓烦</span>\n				            </div>\n				            ',1!=state&&(__p+='\n				            	<div class="apply_msg no_bottom_padding position">\n				            		张哈哈：<span>已同意</span>\n				           		</div>\n				            '),__p+='\n				            \n				        </div>\n				        <div class="apply_item_edit">\n				            <button class="btn btn-sure" data-name="sure-item">同意</button>\n				            <button class="btn btn-cancel" data-name="cancel-item">驳回</button>\n				        </div>\n				    </div>\n				</div>\n				<div class="apply_item">\n				    <div class="apply_detail">\n				        <div class="apply_left">\n				            <div class="apply_date no_padding_bottom">\n				                <span class="blue_date">2014/10/30</span><span>17:06</span>\n				            </div>\n				            <div class="apply_date no_bottom_padding bottom_position">\n				           		<span class="blue_date">2014/10/30</span><span>17:06</span>\n				        	</div>\n				       	</div>\n				        <div class="apply_middel">\n				            <div class="apply_status apply_refuse"></div>\n				            <div class="apply_tree" style="height:118px;"></div>\n				            <div class="apply_end"></div>\n				        </div>\n				        <div class="apply_right" style="margin-top:-5px;">\n				            <div class="apply_msg no_padding_bottom" style="line-height:30px;">苏小杰:创建了\n				                <span>公开项目 &nbsp;&nbsp;十一黄金周促销方案</span><br>\n				                起止时间：<span>2014/09/19 - 2014/10/10</span><br>\n				                负责人：<span>苏小洁</span><br>\n				                其他成员：<span>张小环，杨晓晨，罗晓冲，杨晓烦</span>\n				            </div>\n				            <div class="apply_msg no_bottom_padding position">\n				            	张哈哈：<span>已同意</span>\n				            </div>\n				        </div>\n				        <div class="apply_item_edit">\n				            <button class="btn btn-sure" data-name="sure-item">同意</button>\n				            <button class="btn btn-cancel" data-name="cancel-item">驳回</button>\n				        </div>\n				    </div>\n				    <div class="apply_refuse_content">驳回理由：<span>参与的认识不对</span></div>\n				</div>\n				\n			</div>\n		</div>\n	</div>\n</div>';return __p},this.JST["common/empty"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="content_emptyinit">\r\n		<div class="className">'+(null==(__t=emptyContext)?"":__t)+"</div>\r\n</div>";return __p},this.JST["common/enter-admin-center"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)IsManager&&IsShow&&IsUseTitaManage&&(__p+='\n	<div class="bench-basic-modules">\n		<div class="title_bbm">\n			<div class="left_bbm">\n				<span class="name_bbm">',__p+=2==Role?"我是超级管理员":4==Role?"我是系统管理员":"我是管理员",__p+='</span>\n				<a class="icon-help" original-title="管理员常用操作说明" data-name="guide" href="//service.tita.com/pages/viewpage.action?pageId=589908"></a>\n			</div>\n		</div>\n\n		<div class="btn-container">\n			',(2==Role||4==Role)&&(__p+='\n			<div class="clearfix">\n				<a class="btn-sure btn-add" href="'+(null==(__t=TmUrl)?"":__t)+'#staff">添加/管理员工</a>\n				<a class="btn-sure" href="'+(null==(__t=TmUrl)?"":__t)+'#org">管理组织架构</a>\n			</div>\n			'),__p+='\n			<a class="btn enter-admin" href="'+(null==(__t=TmUrl)?"":__t)+'" target="_blank">进入后台管理</a>\n		</div>\n	</div>\n'),__p+="\n",1==Talent.Context.getGlobal("tenantAuthentication").Version&&IsShow&&IsUseTitaManage&&(__p+='\n    <!-- <a href="/u/'+(null==(__t=Talent.Context.getUserInfo().Id)?"":__t)+'/Invite/InviteMoreIndex" class="a-link-block"> -->\n    <a href="'+(null==(__t=url)?"":__t)+'" class="a-link-block">\n        <div class="invite-more clearfix">\n            <img src="'+__e(Talent.Context.getStaticUrl("images/invite-colleagues.png"))+'" alt="邀请同事">\n            <div class="text">\n                <div class="invite-text">\n                    邀请同事\n                </div>\n                <div class="desc-text">\n                    开启团队协作模式\n                </div>\n            </div>\n            <span class="icon-arrow-right"></span> \n        </div>\n    </a>\n'),__p+="\n",(2==Role||IsBose)&&ReportRole&&IsShow&&(__p+='\n    <a href="'+(null==(__t=ReportUrl)?"":__t)+'" class="a-link-block">\n        <div class="invite-more clearfix">\n            <img src="'+__e(Talent.Context.getStaticUrl("images/view-operational-reports.png"))+'" alt="查看运营报表">\n            <div class="text">\n                <div class="invite-text">\n                    查看运营报表\n                </div>\n                <div class="desc-text">\n                    检测员工活跃程度\n                </div>\n            </div>\n            <span class="icon-arrow-right"></span> \n        </div>\n    </a>\n'),__p+="\n",IsManager&&IsShow&&IsShowDueRemind&&IsUseTitaManage&&(__p+='\n<div class="tt_duetoremind">\n	<dl class="cont_dtr">\n		<dt><span>剩余</span> <span class="num_dtr">'+(null==(__t=tenantAuthentication.Day)?"":__t)+"</span> <span>天</span></dt>\n		<dd>试用到期时间："+(null==(__t=tenantAuthentication.DeadLine)?"":__t)+'</dd>\n	</dl>\n	<a href="#more/pay?package_id=F66281C3-A2E8-4429-8EE9-2830C74E4F0E&from=fromdue" title="" class="btn btn-sure">立即购买</a>\n</div>\n');
return __p},this.JST["common/error-layout-message"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="tt_plandetailreporttopbar"></div>\n<div class="tt_plandetailtopbar ap-title"><div class="higher-level"></div>\n',isShowClose&&(__p+='\n<a class="close_pdtb" href="javascript:void(0)">关闭</a></div>\n'),__p+='\n<div class="_tt_errotracker">\n	<div class="noaccess clearfix">\n		<div class="img_na"></div>\n		<div class="text_ma">\n			<div class="workhi_tma">\n				<br/><br/>\n				'+(null==(__t=content)?"":__t)+"\n			</div>\n			",subContent&&(__p+='\n			<div class="reason_tma">'+(null==(__t=subContent)?"":__t)+"</div>\n			"),__p+="\n		</div>\n	</div>\n</div>";return __p},this.JST["common/error-tracker"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="noaccess clearfix">\n	<div class="img_na"></div>\n	<div class="text_ma">\n		<div class="workhi_tma">\n			<br/><br/>\n			'+(null==(__t=content)?"":__t)+"\n		</div>\n		",subContent&&(__p+='\n		<div class="reason_tma">'+(null==(__t=subContent)?"":__t)+"</div>\n		"),__p+="\n	</div>\n</div>";return __p},this.JST["common/feed/feed-actions/more"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<ul class="list_mafed" style="overflow:hidden;">\r\n	',DetailUrl&&!NoMoreByLimits&&(__p+='\r\n	<li><a href="'+(null==(__t=DetailUrl)?"":__t)+'" hidefocus="true" class="detail_lmafed" target="_blank">查看详情</a></li>\r\n	'),__p+="\r\n	",Editable&&(__p+='\r\n	<li><a href="javascript:void(0);" hidefocus="true" class="del_lmafed" feed-id = "'+(null==(__t=FeedId)?"":__t)+'" comment-id="'+(null==(__t=CommentId)?"":__t)+'">删除此贴</a></li>\r\n	'),__p+="\r\n	",IsShowTop&&(__p+='\r\n	<li><a href="javascript:void(0);" hidefocus="true" class="top_lmafed" feed-id = "'+(null==(__t=FeedId)?"":__t)+'" comment-id="'+(null==(__t=CommentId)?"":__t)+'">',__p+=IsTop?"取消置顶":"设置置顶",__p+="</a></li>\r\n	"),__p+="\r\n</ul>\r\n";return __p},this.JST["common/feed/feed-actions/remind-me"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="wrap_noticesetting_tita" noticeid="0" id="noticesetting_feed" style="display: block; margin:15px -312px; left: '+(null==(__t=clientX)?"":__t)+"px; top: "+(null==(__t=clientY)?"":__t)+'px;">	\r\n	<div class="outer_nst">		\r\n		<div class="sa_nst"><em>◆</em><span>◆</span></div>		\r\n		<div class="content_nst">			\r\n			<div class="wrap_time_nst clearfix">				\r\n				<div class="day_time_nst">					\r\n				</div>				\r\n				<span class="timelabel_nst">提醒我</span>			\r\n			</div>			\r\n			<div class="desc_nst">				\r\n				<textarea class="default_nst" defaultvalue="提醒内容">提醒内容</textarea>			\r\n			</div>			\r\n			<div class="tip_nst"></div>			\r\n			<div class="btn_nst">				\r\n				<a class="sure_btn_nst" href="javascript:void(0)">确定</a>				\r\n				<a class="cancel_btn_nst" href="javascript:void(0)">取消</a>			\r\n			</div>		\r\n		</div>	\r\n	</div>\r\n</div>';return __p},this.JST["common/feed/feed-actions/reply"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="pubreply_fed" style="display: block;">\r\n	<div class="notice_prfed clearfix">\r\n		<span class="count_nprfed">\r\n			<b>0</b>/300\r\n		</span>\r\n		<div class="who_nprfed" style="display:block">\r\n			<span>回复</span>\r\n			<span class="toname_wnprfed"></span>\r\n			<span>：</span>\r\n			<a href="javascript:void(0);" hidefocus="true" title="" class="closed_wnprfed">关闭</a>\r\n		</div>\r\n	</div>\r\n	<div class="area_prfed">\r\n		<div class="wrap_aprfed">\r\n			<textarea class="input_waprfed cur_aprfed _bb_content" defaultval="添加进展" asff="true" style="overflow: hidden; word-wrap: break-word; resize: horizontal; height: 58px;"></textarea>\r\n		</div>\r\n	</div>\r\n	<div class="action_prfed clearfix" style="position: relative;">\r\n		<ul class="menu_aprfed clearfix">\r\n			<li class="fileli_maprfed _bb_upload_trigger">\r\n				<a href="javascript:void(0);" title="" hidefocus="true" class="ament_maprfed _bb_upload_link" style="position: relative; cursor: pointer;">文件/图片\r\n					<div class="actionUploadAttachment" id="110006_100107565_1_1_635042122208840152_AUA">\r\n						<div class="local_auatth" style="position: relative; overflow: hidden;">\r\n							<a href="javascript:void(0);">本地上传</a>\r\n							<form target="file_upload_iframe_feed" method="post" enctype="multipart/form-data" action="http://webapi.tita.com/api/v1/110006/101893065/Upload/PostFiles?timestamp=1368786379384" class="formupoadfile" style="position: absolute; top: 3px; left: -81px;" twj="1">\r\n								<input class="file_formupoadfile" type="file" multiple="true" name="file_upload[]" style="cursor:pointer;opacity:0;filter:alpha(opacity=0);">\r\n								<input class="file_formupoadfil_2" type="file" multiple="true" name="file_upload[]" style="cursor:pointer;opacity:0;filter:alpha(opacity=0);">\r\n								<input class="file_formupoadfil_3" type="file" multiple="true" name="file_upload[]" style="cursor:pointer;opacity:0;filter:alpha(opacity=0);">\r\n								<input name="jsCallback" type="hidden" value="parent.AATFV2_110006_100107565_1_1_635042122208840152.callback">\r\n								<input name="domain" type="hidden" value="document.domain=\'tita.com\'">\r\n								<input name="timestamp" type="hidden" value="1368786379384">\r\n							</form>\r\n							<input class="attachment_file_url" type="hidden">\r\n						</div>\r\n						<div class="own_auatth" style="display: block;">\r\n							<a href="javascript:void(0);">从我的文件中选择</a>\r\n						</div>\r\n					</div>\r\n				</a>\r\n			</li>\r\n			<li>\r\n				<a href="javascript:void(0);" hidefocus="true" title="" class="at_maprfed _bb_at">同事</a>\r\n			</li>\r\n		</ul>\r\n		<iframe style="display:none;" name="file_upload_iframe_feed" src="about:blank"></iframe>\r\n		<a href="javascript:void(0);" class="cancel_aprfed" hidefocus="true">\r\n		 <b><i>取消</i></b>\r\n		</a>\r\n		<a href="javascript:void(0);" class="pub_aprfed disable_pub_aprfed" hidefocus="true">\r\n			<b><i>回复</i></b>\r\n		</a>\r\n		<span class="submitMask" style="position: absolute; opacity: 0.5; background-color: rgb(255, 255, 255); width: 58px; height: 24px; left: 440px; top: 6px; display: block;">\r\n		</span>\r\n	</div>\r\n	<div style="display:none">将文件拖到分享框任何区域并释放鼠标</div>\r\n	<div class="_bb_drop_tip" style="display:none;margin:0 10px;padding:8px; text-align:center; border:1px dashed #ccc; color:#333;">将文件拖到此区域并释放鼠标</div>\r\n	<div class="preview_prfed _bb_preview_wrapper" style="display: block;">\r\n		<div id="attachmentViewBox_110006_100107565_1_1_635042122208840152" style="padding-top: 8px; display: none;">\r\n		</div>\r\n	</div>\r\n</div>';return __p},this.JST["common/feed/feed-attachment-item"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=(_.escape,Array.prototype.join);with(obj)IsImage&&PreviewUrl?(__p+='\r\n	<div class="pic_fed clearfix">\r\n		<div class="img_pfed">\r\n			<a class="min_ipfed" hidefocus="true" href="'+(null==(__t=BigUrl)?"":__t)+'" rel="'+(null==(__t=PreviewUrl)?"":__t)+'"><img src="'+(null==(__t=SmallUrl)?"":__t)+'" alt="图片" class="artZoom" /></a>\r\n		</div>\r\n	</div>\r\n	<div class="file_fed imgfile_fed clearfix">\r\n		',print(FeedHelper.fileNameTmplFun(FileName)),__p+='<span class="kb_nffed">('+(null==(__t=Size)?"":__t)+'kB)</span>\r\n		<p class="down_ffed">\r\n			<a href="'+(null==(__t=DownloadUrl)?"":__t)+'" title="" hidefocus="true" class="btn_dffed skip_mmfed">下载</a>\r\n		</p>\r\n	</div>\r\n'):(__p+='\r\n	<div class="file_fed clearfix">\r\n		<div class="ico_ffed">\r\n			',print(FeedHelper.fileTypeIconTmplFun(FileType)),__p+='\r\n		</div>\r\n		<p class="name_ffed">\r\n			'+(null==(__t=FileName)?"":__t)+'<span class="kb_nffed">('+(null==(__t=Size)?"":__t)+"kB)</span>\r\n		</p>\r\n		",IsImage||(__p+='\r\n			<p class="down_ffed">\r\n				',IsPreview&&(__p+='\r\n					<a href="'+(null==(__t=PreviewUrl)?"":__t)+'" title="" hidefocus="true" class="preview_dffed skip_mmfed" target="_blank">预览</a>\r\n				'),__p+='\r\n				<a href="'+(null==(__t=DownloadUrl)?"":__t)+'" title="" hidefocus="true" class="btn_dffed skip_mmfed">下载</a>			\r\n			</p>\r\n		'),__p+="\r\n	</div>\r\n"),__p+="\r\n			";return __p},this.JST["common/feed/feed-comment-item"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=(_.escape,Array.prototype.join);with(obj)PublishUser&&ParentUser&&(__p+='\r\n<div class="item_cfed">\r\n	<div class="left_icfed">\r\n		',3==CommentType?__p+='\r\n				<img src="//st-web.tita.com/titacn/tita/common/images/transparent.gif" alt="图片" width="30" height="30" class="stream_lifed" />\r\n		':(__p+='\r\n			<a href="#italent/home?appid='+(null==(__t=routerData.appid)?"":__t)+"&apptype="+(null==(__t=routerData.apptype)?"":__t)+"&name=TalentProfile-record&to_user_id="+(null==(__t=PublishUser.UserId)?"":__t)+'" title="" hidefocus="true">\r\n				',__p+=PublishUser.Avatar.HasAvatar===!1?"\r\n					"+(null==(__t=_.convertImage({className:"photo",src:PublishUser.Avatar.Small,size:30,shape:"square",name:PublishUser.Name,bgColor:PublishUser.Avatar.Color}))?"":__t)+"\r\n				":'\r\n					<img src="'+(null==(__t=PublishUser.Avatar.Small)?"":__t)+'" alt="'+(null==(__t=PublishUser.Name)?"":__t)+'" width="30" height="30" />\r\n				',__p+="\r\n			</a>\r\n		"),__p+='\r\n	</div>\r\n	<div class="right_icfed">\r\n		<div class="master_cfed">\r\n			<a href="#italent/home?appid='+(null==(__t=routerData.appid)?"":__t)+"&apptype="+(null==(__t=routerData.apptype)?"":__t)+"&name=TalentProfile-record&to_user_id="+(null==(__t=PublishUser.UserId)?"":__t)+'" title="" class="avatar_mcfed skip_cmfed" hidefocus="true">'+(null==(__t=PublishUser.Name)?"":__t)+"</a>\r\n			",ParentUser&&2==CommentType&&(__p+='\r\n				<span class="amal_fed">回复</span>\r\n				<a href="#italent/home?appid='+(null==(__t=routerData.appid)?"":__t)+"&apptype="+(null==(__t=routerData.apptype)?"":__t)+"&name=TalentProfile-record&to_user_id="+(null==(__t=ParentUser.UserId)?"":__t)+'" title="" class="avatar_mcfed skip_cmfed" hidefocus="true">'+(null==(__t=ParentUser.Name)?"":__t)+'</a>\r\n				<a hidefocus="true" class="dehua_mcfed" href="javascript:void(0);">的话</a>\r\n			'),__p+="<span>："+(null==(__t=Content)?"":__t)+'</span>\r\n		</div>\r\n		<div class="action_cfed clearfix">\r\n			<div class="btn_acfed">\r\n				<ul>\r\n					<li class="more_bacfed"><a hidefocus="true" href="javascript:void(0);">更多</a></li>\r\n					<li class="reply_bacfed"><a hidefocus="true" href="javascript:void(0);">回复</a></li>\r\n				</ul>\r\n			</div>\r\n			',Private&&(__p+='<span class="lock_fed">私密</span>'),__p+='\r\n			<span class="time_acfed">'+(null==(__t=CreateDate)?"":__t)+"</span>\r\n			",0!=PostSource&&(__p+='\r\n				<span class="from_fed">',print(FeedHelper.postSourceTmplFun(PostSource)),__p+="</span>\r\n			"),__p+="\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n"),__p+="\r\n";return __p},this.JST["common/feed/feed-composite"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+='<div id="feed-item-container"></div>\r\n',IsEnd||(__p+='\r\n<div class="showmorefeed" id="pagerFeed" data-name="feed-page">\r\n	<a href="javascript:void(0);" hidefocus="true" title="" class="text_fsm" style="border-top:none;">\r\n		<span>查看更多</span>\r\n	</a>\r\n</div>\r\n'),__p+="\r\n";return __p},this.JST["common/feed/feed-item-composite"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=(_.escape,Array.prototype.join);with(obj)__p+="	",IsOnlyShowComment||(__p+="\r\n\r\n	","undefined"!=typeof FromIndicator&&FromIndicator&&(__p+='\r\n	<span class="indicator_ifed"></span>\r\n	'),__p+='\r\n	<div class="left_ifed">\r\n		',App&&0==IsInAppPage?__p+='\r\n			<a href="'+(null==(__t=App.AppUrl)?"":__t)+'" hidefocus="true"><img width="50" height="50" src="'+(null==(__t=App.AppLogo)?"":__t)+'" alt="图片" /></a>\r\n		':(__p+="\r\n			","undefined"!=typeof ObjType&&ObjType&&0==IsInAppPage?(__p+="\r\n				",3==ObjType||4==ObjType?__p+='\r\n					<a href="'+(null==(__t=ObjUrl)?"":__t)+'" hidefocus="true"><img width="50" height="50" src="'+(null==(__t=ObjLogo)?"":__t)+'" alt="图片" /></a>\r\n				':15==ObjType&&(__p+="\r\n					"+(null==(__t=_.convertImage({className:"photo",src:"",size:50,shape:"square",name:ObjName,bgColor:ObjColor}))?"":__t)+"\r\n				"),__p+="\r\n			"):__p+='\r\n				<a href="'+(null==(__t=PublishUserUrl)?"":__t)+'" hidefocus="true">\r\n				'+(null==(__t=_.convertImage({className:"photo",src:PublishUser.Avatar.Medium,size:50,shape:"square",name:PublishUser.Name,bgColor:PublishUser.Avatar.Color}))?"":__t)+"\r\n				</a>\r\n			",__p+="\r\n		"),__p+='\r\n	</div>\r\n	<div class="right_ifed">\r\n		<div class="main_fed">\r\n			',App?(__p+="\r\n				",Private?(__p+='\r\n					<span class="lockline_fed">',print(FeedHelper.lineLockTmplFun(FeedType,Private,"",App.AppType)),__p+="</span>\r\n				"):(__p+='\r\n					<span class="openline_fed">',print(FeedHelper.lineLockTmplFun(FeedType,Private,"",App.AppType)),__p+="</span>\r\n				"),__p+="\r\n			"):(__p+="\r\n				",ObjType?(__p+="\r\n					",Private?(__p+='\r\n						<span class="lockline_fed">',print(FeedHelper.lineLockTmplFun(FeedType,Private,ObjType)),__p+="</span>\r\n					"):(__p+='\r\n						<span class="openline_fed">',print(FeedHelper.lineLockTmplFun(FeedType,Private,ObjType)),__p+="</span>\r\n					"),__p+="\r\n				"):(__p+="\r\n					",Private?(__p+='\r\n						<span class="lockline_fed">',print(FeedHelper.lineLockTmplFun(FeedType,Private)),__p+="</span>\r\n					"):(__p+='\r\n						<span class="openline_fed">',print(FeedHelper.lineLockTmplFun(FeedType,Private)),__p+="</span>\r\n					"),__p+="\r\n				"),__p+="\r\n			"),__p+='\r\n			<div class="source_fed">\r\n				',1==FeedType&&(__p+="\r\n					",App?(__p+="\r\n						",0==IsInAppPage&&(__p+='\r\n							<a href="'+(null==(__t=App.AppUrl)?"":__t)+'" hidefocus="true" class="name_sfed skip_mmfed" target="_blank">'+(null==(__t=App.AppName)?"":__t)+"</a>\r\n							",ObjType&&(__p+="\r\n								",ObjName&&ObjId&&(__p+='\r\n									<a href="'+(null==(__t=ObjUrl)?"":__t)+'" hidefocus="true" class="appuser_sfed skip_mmfed">'+(null==(__t=ObjName)?"":__t)+"</a>",print(FeedHelper.setSourceContFun(ObjType,App.AppType)),__p+="\r\n								"),__p+="\r\n							"),__p+="\r\n						"),__p+='\r\n						<a href="'+(null==(__t=PublishUserUrl)?"":__t)+'" hidefocus="true" class="appuser_sfed skip_mmfed">'+(null==(__t=PublishUser.Name)?"":__t)+"</a>"+(null==(__t=MarkImg)?"":__t)+'<span class="cont_sfed">说：</span>\r\n					'):(__p+="\r\n						",ObjType&&0==IsInAppPage?(__p+="\r\n\r\n							",__p+=ObjUrl&&""!=ObjUrl?'\r\n							<a href="'+(null==(__t=ObjUrl)?"":__t)+'" hidefocus="true" class="name_sfed skip_mmfed" target="_blank">'+(null==(__t=ObjName)?"":__t)+"</a>\r\n							":'\r\n							<a href="javascript:void(0);" class="name_sfed" target="_blank">'+(null==(__t=ObjName)?"":__t)+"</a>\r\n							",__p+='<span class="cont_sfed">',print(FeedHelper.setSourceContFun(ObjType)),__p+='</span>\r\n							<a href="'+(null==(__t=PublishUserUrl)?"":__t)+'" hidefocus="true" class="appuser_sfed skip_mmfed">'+(null==(__t=PublishUser.Name)?"":__t)+"</a>"+(null==(__t=MarkImg)?"":__t)+'<span class="cont_sfed">说：</span>\r\n						'):__p+='\r\n							<a href="'+(null==(__t=PublishUserUrl)?"":__t)+'" hidefocus="true" class="name_sfed skip_mmfed">'+(null==(__t=PublishUser.Name)?"":__t)+"</a>"+(null==(__t=MarkImg)?"":__t)+'<span class="cont_sfed">说：</span>\r\n						',__p+="	\r\n					"),__p+="\r\n				"),__p+="\r\n				\r\n				",2==FeedType&&(__p+="\r\n					",App&&(__p+="\r\n						",400==App.AppType&&(__p+='\r\n							<a href="'+(null==(__t=App.AppUrl)?"":__t)+'" hidefocus="true" class="name_sfed skip_mmfed" target="_blank">'+(null==(__t=App.AppName)?"":__t)+"</a>\r\n						"),__p+="\r\n					"),__p+="\r\n				"),__p+="\r\n\r\n				",3==FeedType&&(__p+="\r\n					",App&&(__p+="\r\n						",400==App.AppType&&(__p+='\r\n							<a href="'+(null==(__t=App.AppUrl)?"":__t)+'" hidefocus="true" class="name_sfed skip_mmfed" target="_blank">'+(null==(__t=App.AppName)?"":__t)+"</a>\r\n						"),__p+="\r\n					"),__p+="\r\n				"),__p+="\r\n\r\n				",4==FeedType&&(__p+="\r\n					",__p+=1==PlanType?'\r\n					<a href="'+(null==(__t=PublishUserUrl)?"":__t)+'" hidefocus="true" class="name_sfed skip_mmfed">'+(null==(__t=PublishUser.Name)?"":__t)+"</a>"+(null==(__t=MarkImg)?"":__t)+'<span class="cont_sfed">的'+(null==(__t=i18n.plan_1)?"":__t)+"表</span>\r\n					":'\r\n					<a href="'+(null==(__t=PublishUserUrl)?"":__t)+'" hidefocus="true" class="name_sfed skip_mmfed">'+(null==(__t=PublishUser.Name)?"":__t)+"</a>"+(null==(__t=MarkImg)?"":__t)+'<span class="cont_sfed">的'+(null==(__t=i18n.plan_1)?"":__t)+"</span>\r\n					",__p+="\r\n				"),__p+="\r\n				",80==FeedType&&(__p+='\r\n					\r\n					<a href="'+(null==(__t=PublishUserUrl)?"":__t)+'" hidefocus="true" class="name_sfed skip_mmfed">'+(null==(__t=PublishUser.Name)?"":__t)+"</a>"+(null==(__t=MarkImg)?"":__t)+'<span class="cont_sfed">的签到</span>\r\n					\r\n				'),__p+="\r\n				",5==FeedType&&(__p+="\r\n					",App?__p+="\r\n					\r\n					":(__p+="\r\n						",ObjType&&0==IsInAppPage?(__p+="\r\n							",__p+=ObjUrl&&""!=ObjUrl?'\r\n							<a href="'+(null==(__t=ObjUrl)?"":__t)+'" hidefocus="true" class="name_sfed skip_mmfed" target="_blank">'+(null==(__t=ObjName)?"":__t)+"</a>\r\n							":'\r\n							<a href="javascript:void(0);" class="name_sfed" target="_blank">'+(null==(__t=ObjName)?"":__t)+"</a>\r\n							",__p+='<span class="cont_sfed">',print(FeedHelper.setSourceContFun(ObjType)),__p+='</span>\r\n							<a href="'+(null==(__t=PublishUserUrl)?"":__t)+'" hidefocus="true" class="appuser_sfed skip_mmfed">'+(null==(__t=PublishUser.Name)?"":__t)+"</a>"+(null==(__t=MarkImg)?"":__t)+'<span class="cont_sfed">的'+(null==(__t=dailyName)?"":__t)+"</span>\r\n						"):__p+='\r\n							<a href="'+(null==(__t=PublishUserUrl)?"":__t)+'" hidefocus="true" class="name_sfed skip_mmfed">'+(null==(__t=PublishUser.Name)?"":__t)+"</a>"+(null==(__t=MarkImg)?"":__t)+'<span class="cont_sfed">的'+(null==(__t=dailyName)?"":__t)+"</span>\r\n						",__p+="\r\n					"),__p+="\r\n				"),__p+="\r\n\r\n				",20==FeedType&&(__p+="\r\n					",App?(__p+="\r\n						",901==App.AppId?__p+='\r\n							<a href="'+(null==(__t=App.AppUrl)?"":__t)+'" hidefocus="true" class="name_sfed skip_mmfed" target="_blank">'+(null==(__t=App.AppName)?"":__t)+'</a>中<a href="'+(null==(__t=PublishUserUrl)?"":__t)+'" hidefocus="true" class="appuser_sfed skip_mmfed">'+(null==(__t=PublishUser.Name)?"":__t)+"</a>的申请\r\n\r\n						":(__p+="\r\n							",0==IsInAppPage?(__p+='\r\n								<a href="'+(null==(__t=App.AppUrl)?"":__t)+'" hidefocus="true" class="name_sfed skip_mmfed" target="_blank">'+(null==(__t=App.AppName)?"":__t)+"</a>\r\n								",ObjType&&(__p+="\r\n									",ObjName&&ObjId&&(__p+='\r\n										<a href="'+(null==(__t=ObjUrl)?"":__t)+'" hidefocus="true" class="appuser_sfed skip_mmfed">'+(null==(__t=ObjName)?"":__t)+'</a><span class="cont_sfed">',print(FeedHelper.setSourceContFun(ObjType,App.AppType)),__p+="的"+(null==(__t=i18n.task_1)?"":__t)+"</span>\r\n									"),__p+="\r\n								"),__p+="\r\n							"):__p+='\r\n								<a href="'+(null==(__t=PublishUserUrl)?"":__t)+'" hidefocus="true" class="name_sfed skip_mmfed">'+(null==(__t=PublishUser.Name)?"":__t)+"</a>"+(null==(__t=MarkImg)?"":__t)+'<span class="cont_sfed">'+(null==(__t=IsShowPlan?"的"+i18n.plan_1:"发起的"+i18n.task_1)?"":__t)+"</span>\r\n							",__p+="\r\n						"),__p+="\r\n					"):(__p+="\r\n						",ObjType&&0==IsInAppPage?(__p+="\r\n							",__p+=ObjUrl&&""!=ObjUrl?'\r\n							<a href="'+(null==(__t=ObjUrl)?"":__t)+'" hidefocus="true" class="name_sfed skip_mmfed" target="_blank">'+(null==(__t=ObjName)?"":__t)+"</a>\r\n							":'\r\n							<a href="javascript:void(0);" class="name_sfed" target="_blank">'+(null==(__t=ObjName)?"":__t)+"</a>\r\n							",__p+='<span class="cont_sfed">',print(FeedHelper.setSourceContFun(ObjType)),__p+="的"+(null==(__t=i18n.task_1)?"":__t)+"</span>\r\n\r\n						"):__p+='\r\n							<a href="'+(null==(__t=PublishUserUrl)?"":__t)+'" hidefocus="true" class="name_sfed skip_mmfed">'+(null==(__t=PublishUser.Name)?"":__t)+"</a>"+(null==(__t=MarkImg)?"":__t)+'<span class="cont_sfed">'+(null==(__t=IsShowPlan?"的"+i18n.plan_1:"发起的"+i18n.task_1)?"":__t)+"</span>\r\n						",__p+="\r\n					"),__p+="\r\n				"),__p+="\r\n\r\n				",30==FeedType&&(__p+="\r\n					",__p+=ObjId&&ObjName&&4==ObjType&&0==IsInAppPage?'\r\n							<a href="'+(null==(__t=ObjUrl)?"":__t)+'" hidefocus="true" class="name_sfed skip_mmfed" target="_blank">'+(null==(__t=ObjName)?"":__t)+'</a><span class="cont_sfed">'+(null==(__t=i18n.work_1)?"":__t)+"中的讨论</span>\r\n					":'\r\n						<a href="'+(null==(__t=PublishUserUrl)?"":__t)+'" hidefocus="true" class="name_sfed skip_mmfed">'+(null==(__t=PublishUser.Name)?"":__t)+"</a>"+(null==(__t=MarkImg)?"":__t)+'<span class="cont_sfed">发起了讨论</span>\r\n					',__p+="	\r\n				"),__p+="\r\n\r\n				","undefined"!=typeof IsTop&&IsTop&&(__p+='<span class="top_sfed"></span>'),__p+="\r\n			</div>\r\n			\r\n			",1==FeedType?__p+='\r\n				<div class="master_mfed">\r\n					<span class="lquote_mmfed"></span><span class="content_mmfed">'+(null==(__t=Content)?"":__t)+'</span><span class="rquote_mmfed"></span>\r\n				</div>\r\n				<div data-name="feed-attachment"></div>\r\n			':20==FeedType?(__p+='\r\n				<div class="task_mfed clearfix">\r\n					<h2 class="name_tmfed">\r\n						',__p+=App&&901==App.AppId?'\r\n							<span class="ico_ntmfed">审批</span>\r\n						':'\r\n							<span class="ico_ntmfed">'+(null==(__t=IsCycle?"循环"+i18n.task_1:i18n.task_1)?"":__t)+"</span>\r\n						",__p+="\r\n						\r\n						",__p+=IsTita&&isPushPullScreen?'\r\n							<span  href="'+(null==(__t=hash+"?plan_item_id="+FeedId)?"":__t)+'" data-name="push" class="skip_mmfed">'+(null==(__t=Talent._.escape(TaskName))?"":__t)+"</span>\r\n						":'\r\n							<a href="'+(null==(__t=Url)?"":__t)+'" class="skip_mmfed">'+(null==(__t=Talent._.escape(TaskName))?"":__t)+"</a>\r\n						",__p+='\r\n					</h2>\r\n					<div class="info_tmfed clearfix">\r\n						<div class="left_itmfed">\r\n							',0==Status?__p+='\r\n								<span class="undo_litmfed">未开始</span>\r\n							':1==Status?__p+='\r\n								<span class="doing_litmfed">进行中</span>\r\n							':2==Status&&(__p+='\r\n								<span class="done_litmfed">已完成</span>\r\n									',print(FeedHelper.showPraise(Status,Evaluation)),__p+="\r\n							"),__p+="\r\n							",PlanTableName&&(__p+='\r\n							<a href="'+(null==(__t=PlanTableUrl)?"":__t)+'" class="limit" target="_blank">'+(null==(__t=PlanTableName)?"":__t)+"</a>\r\n							"),__p+="\r\n							",1!=ShowType&&2!=Status&&0!=Status&&(__p+="\r\n								",FeedHelper.showTimeTmplFun(ShowType,StartDate,Deadline,RemainDay,Deadline,DeadLineDay)&&(__p+='\r\n									<span class="time_litmfed">',print(FeedHelper.showTimeTmplFun(ShowType,StartDate,Deadline,RemainDay,Deadline,DeadLineDay)),__p+="</span>\r\n								"),__p+="\r\n							"),__p+="\r\n							","undefined"!=typeof Evaluation&&Evaluation&&(__p+="\r\n								"+(null==(__t=_.evaluation(Evaluation))?"":__t)+"\r\n							"),__p+='\r\n						</div>\r\n						\r\n						<div class="right_itmfed">\r\n							',PrincipalUser&&PrincipalUser.UserId&&(__p+="\r\n								",PrincipalUser&&PrincipalUser.UserId!=PublishUser.UserId?(__p+='\r\n								<a href="'+(null==(__t=PublishUserUrl)?"":__t)+'" name="'+(null==(__t=PublishUser.Name)?"":__t)+'" hidefocus="true" class="pic_itmfed">\r\n									'+(null==(__t=_.convertImage({className:"photo",src:PublishUser.Avatar.Small,size:30,shape:"square",name:PublishUser.Name,bgColor:PublishUser.Avatar.Color}))?"":__t)+"\r\n								</a>\r\n								",__p+=App&&901==App.AppId?'\r\n									<span class="tip_itmfed">提交给</span>\r\n								':'\r\n									<span class="tip_itmfed">安排给</span>\r\n								',__p+="\r\n								"):__p+='\r\n									<span class="tip_itmfed">'+(null==(__t=PrincipalUser.Name)?"":__t)+"（负责人）</span>\r\n								",__p+='\r\n								<a href="'+(null==(__t=PrincipalUserUrl)?"":__t)+'" name="'+(null==(__t=PrincipalUser.Name)?"":__t)+'" hidefocus="true" class="pic_itmfed">\r\n									'+(null==(__t=_.convertImage({className:"photo",src:PrincipalUser.Avatar.Small,size:30,shape:"square",name:PrincipalUser.Name,bgColor:PrincipalUser.Avatar.Color}))?"":__t)+"\r\n									\r\n								</a>\r\n							"),__p+="\r\n						</div>\r\n						\r\n					</div>\r\n				</div>\r\n			"):30==FeedType||31==FeedType?(__p+="\r\n				",31==FeedType&&24==ActionType?(__p+='\r\n					<div class="master_mfed">\r\n						<span class="lquote_mmfed"></span>\r\n						',print(FeedBack),__p+='\r\n						<span class="rquote_mmfed"></span>\r\n					</div>\r\n				'):(__p+='\r\n					<div class="meeting_mfed clearfix">\r\n						<div class="assign_mmfed">\r\n							<ul>\r\n								',"undefined"!=typeof Participator&&(__p+="\r\n								",_.each(Participator.slice(0,3),function(a){__p+='\r\n									<li class="parter_ammfed">\r\n										<a href="'+(null==(__t=a.Id)?"":__t)+'" hidefocus="true">\r\n											<img alt="'+(null==(__t=a.Name)?"":__t)+'" src="'+(null==(__t=a.Avatar.Small)?"":__t)+'" />\r\n										</a>\r\n										<span>'+(null==(__t=a.Name)?"":__t)+"</span>\r\n									</li>\r\n								"}),__p+="\r\n								",Participator.length>3&&(__p+='\r\n									<li>\r\n										<a href="'+(null==(__t=Url)?"":__t)+'" hidefocus="true" class="more_ammfed" target="_blank">更多</a>\r\n									</li>\r\n								'),__p+="\r\n								"),__p+='\r\n							</ul>\r\n						</div>\r\n						<h2 class="name_mmfed">\r\n							<a href="'+(null==(__t=Url)?"":__t)+'" title="'+(null==(__t=ConferenceName)?"":__t)+'" hidefocus="true" class="skip_mmfed"  target="_blank">\r\n								',print(FeedHelper.conferenceNameTmplFun(ConferenceName)),__p+="\r\n							</a>\r\n						</h2>\r\n					</div>\r\n				"),__p+="			\r\n			"):2==FeedType||3==FeedType?(__p+='\r\n				<div class="task_mfed epm_mfed clearfix">\r\n					<h2 class="name_tmfed">\r\n						',__p+=3==FeedType?'\r\n						<span class="ico_ntmfed epm_ico_ntmfed">考核表</span>\r\n						':'\r\n						<span class="ico_ntmfed epm_ico_ntmfed">目标</span>\r\n						',__p+='\r\n						<a href="'+(null==(__t=App.AppObjeUrl)?"":__t)+'" hidefocus="true" class="skip_mmfed" target="_blank">'+(null==(__t=App.AppObjeName)?"":__t)+'</a>\r\n					</h2>\r\n					<div class="info_tmfed clearfix">\r\n						<div class="left_itmfed">\r\n							\r\n						</div>\r\n						<div class="right_itmfed">\r\n							<span class="tip_itmfed">'+(null==(__t=PublishUser.Name)?"":__t)+'</span>\r\n							<a href="'+(null==(__t=PublishUserUrl)?"":__t)+'" hidefocus="true" class="pic_itmfed" name="'+(null==(__t=PublishUser.Name)?"":__t)+'">\r\n								'+(null==(__t=_.convertImage({className:"photo",src:PublishUser.Avatar.Small,size:30,shape:"square",name:PublishUser.Name,bgColor:PublishUser.Avatar.Color}))?"":__t)+"\r\n\r\n							</a>\r\n						</div>\r\n					</div>\r\n				</div>\r\n			"):4==FeedType?(__p+="\r\n				",1==PlanType?__p+='\r\n				<div class="task_mfed clearfix plan_mfed">\r\n					<h2 class="name_tmfed">\r\n						<span class="ico_ntmfed">'+(null==(__t=i18n.plan_1)?"":__t)+'表</span>\r\n						<a href="'+(null==(__t=Url)?"":__t)+'" hidefocus="true" class="skip_mmfed" target="_blank">'+(null==(__t=PlanName)?"":__t)+"</a>\r\n					</h2>\r\n				</div>\r\n				":2==PlanType&&(__p+='\r\n				<div class="task_mfed clearfix plan_mfed">\r\n					<h2 class="name_tmfed">\r\n						<span class="ico_ntmfed">'+(null==(__t=i18n.plan_1)?"":__t)+'</span>\r\n						<a href="'+(null==(__t=Url)?"":__t)+'" hidefocus="true" class="skip_mmfed" target="_blank">'+(null==(__t=PlanName)?"":__t)+'</a>\r\n					</h2>\r\n					<div class="info_tmfed clearfix">\r\n						<div class="left_itmfed">\r\n							<a href="'+(null==(__t=PlanTableUrl)?"":__t)+'" class="from_litmfed" target="_blank">'+(null==(__t=PlanTableName)?"":__t)+'</a>\r\n						</div>\r\n						<div class="right_itmfed">\r\n							<a href="'+(null==(__t=PublishUserUrl)?"":__t)+'" name="'+(null==(__t=PublishUser.Name)?"":__t)+'" hidefocus="true" class="pic_itmfed">\r\n								'+(null==(__t=_.convertImage({className:"photo",src:PublishUser.Avatar.Small,size:30,shape:"square",name:PublishUser.Name,bgColor:PublishUser.Avatar.Color}))?"":__t)+"\r\n							</a>\r\n							\r\n						</div>\r\n					</div>\r\n				</div>\r\n				"),__p+="\r\n				\r\n			"):80==FeedType?(__p+='\r\n				<div class="task_mfed clearfix signin_mfed">\r\n					<h2 class="name_tmfed">\r\n						<span class="ico_ntmfed">移动签到</span>\r\n						<span class="taget_tmfed" target="_blank">'+(null==(__t=Date)?"":__t)+'</span><span>&nbsp;&nbsp;&nbsp;&nbsp;工作计时：</span><span class="hour_tmfed">'+(null==(__t=WorkHours)?"":__t)+'h</span>\r\n					</h2>\r\n				</div>\r\n				<ul class="track_mfed">\r\n					',_.each(TimeSites,function(a,b){__p+="\r\n						",0==b?(__p+='\r\n						<li class="first_tkmfed">\r\n							<span class="icon-round-up-star"></span>\r\n							',TimeSites.length>2&&(__p+='\r\n							<span class="line_tkmfed"></span>\r\n							'),__p+='\r\n							<span class="hour_tkmfed">'+(null==(__t=a.Time)?"":__t)+"</span>\r\n							<span>&nbsp;签到地点：&nbsp;"+(null==(__t=a.Site)?"":__t)+"</span>\r\n							\r\n						</li>\r\n						"):b+1==TimeSites.length?(__p+='\r\n						<li class="last_tkmfed">\r\n							<span class="icon-round-down-end"></span>\r\n							',TimeSites.length>2&&(__p+='\r\n							<span class="line_tkmfed"></span>\r\n							'),__p+='\r\n							<span class="hour_tkmfed">'+(null==(__t=a.Time)?"":__t)+"</span>\r\n							<span>&nbsp;签到地点：&nbsp;"+(null==(__t=a.Site)?"":__t)+"</span>\r\n							",Total>2&&(__p+="\r\n								",__p+=TimeSites.length<3?'\r\n								&nbsp;&nbsp;<a href="javascript:void(0);" data-name="track-down" >展开('+(null==(__t=Total)?"":__t)+")<i></i></a>\r\n								":'\r\n								&nbsp;&nbsp;<a href="javascript:void(0);" data-name="track-down" class="cur">收起('+(null==(__t=Total)?"":__t)+")<i></i></a>\r\n								",__p+="\r\n							"),__p+="\r\n						</li>\r\n						"):__p+='\r\n						<li>\r\n							<span class="icon-line-bridge ico_tkmfed"></span>\r\n							<span class="hour_tkmfed">'+(null==(__t=a.Time)?"":__t)+"</span>\r\n							<span>&nbsp;签到地点：&nbsp;"+(null==(__t=a.Site)?"":__t)+"</span>\r\n\r\n						</li>\r\n						",__p+="\r\n					"}),__p+="\r\n				</ul>\r\n			"):5==FeedType&&(__p+='\r\n				<div class="task_mfed clearfix plan_mfed">\r\n					<h2 class="name_tmfed">\r\n						<span class="ico_ntmfed">'+(null==(__t=dailyName)?"":__t)+'</span>\r\n						<a href="'+(null==(__t=Url)?"":__t)+'" hidefocus="true" class="skip_mmfed">'+(null==(__t=Name)?"":__t)+'</a>\r\n					</h2>\r\n					<div class="info_tmfed clearfix">\r\n						<div class="left_itmfed">\r\n							<a href="'+(null==(__t=PlanTableUrl)?"":__t)+'" class="from_litmfed" target="_blank">'+(null==(__t=PlanTableName)?"":__t)+"</a>\r\n							","undefined"!=typeof Evaluation&&Evaluation&&(__p+="\r\n								"+(null==(__t=_.evaluation(Evaluation))?"":__t)+"\r\n							"),__p+='\r\n						</div>\r\n						<div class="right_itmfed">\r\n							<div class="submit_itmfed">'+(null==(__t=SubmitDate)?"":__t)+'</div>\r\n							<a href="'+(null==(__t=PublishUserUrl)?"":__t)+'" name="'+(null==(__t=PublishUser.Name)?"":__t)+'" hidefocus="true" class="pic_itmfed">\r\n								'+(null==(__t=_.convertImage({className:"photo",src:PublishUser.Avatar.Small,size:30,shape:"square",name:PublishUser.Name,bgColor:PublishUser.Avatar.Color}))?"":__t)+'\r\n							</a>\r\n							\r\n						</div>\r\n					</div>\r\n				</div>\r\n				<div class="master_mfed">\r\n					<span class="content_mmfed">'+(null==(__t=Content)?"":__t)+"</span>\r\n					",overMaxNumber&&(__p+='\r\n						<span class="toggle" data-name="toggle">\r\n							<a href="javascript:void(0)" class="txt">查看全部</a>\r\n							<span class="icon icon-arrow-down"></span>\r\n						</span>\r\n					'),__p+="\r\n				</div>\r\n			"),__p+='\r\n			\r\n			<div class="action_mfed clearfix">\r\n				<div class="btn_amfed">\r\n					<ul>\r\n						<li class="more_bamfed"><a hidefocus="true" href="javascript:void(0);">更多</a></li>\r\n						',1==FeedType&&(__p+="\r\n							",__p+=IsRemind?'\r\n								<li class="notice_bamfed"><a class="notice_setting notice_settinged" href="javascript:void(0)" data=\'{"objid":"'+(null==(__t=FeedId)?"":__t)+'","objType":"10"}\' title="已设提醒"></a></li>\r\n							':'\r\n								<li class="notice_bamfed"><a class="notice_setting" href="javascript:void(0)" data=\'{"objid":"'+(null==(__t=FeedId)?"":__t)+'","objType":"10"}\' title="设置提醒"></a></li>\r\n							',__p+="\r\n						"),__p+='\r\n						<li class="_bb_collect">\r\n							',__p+="undefined"!=typeof IsCollected&&IsCollected?'\r\n								<a hidefocus="true" href="javascript:void(0);" isCollected="'+(null==(__t=IsCollected)?"":__t)+'">取消收藏</a>\r\n							':'\r\n								<a hidefocus="true" href="javascript:void(0);" isCollected="false">收藏</a>\r\n							',__p+='\r\n						</li>\r\n						<li class="reply_bamfed"><a hidefocus="true" href="javascript:void(0);">回复</a></li>\r\n					</ul>\r\n				</div>\r\n				<span class="time_mmfed">'+(null==(__t=CreateDate)?"":__t)+"</span>\r\n				",0!=PostSource&&(__p+='\r\n				<span class="from_fed">',print(FeedHelper.postSourceTmplFun(PostSource)),__p+="</span>\r\n				"),__p+='\r\n			</div>\r\n			\r\n		</div>\r\n		\r\n		<div class="comment_fed">\r\n			<div class="corner_lfed"><span></span></div>\r\n			',!IsOnlyShowComment&&CommentTotal>4&&(__p+='\r\n				<div class="count_fed">\r\n					<div class="txt_cfed">\r\n						<a href="javascript:void(0);" hidefocus="true" >共<span class="num_cfed">'+(null==(__t=CommentTotal)?"":__t)+"</span>条回复<i></i></a>\r\n					</div>\r\n				</div>\r\n			"),__p+="\r\n		</div>\r\n	</div>\r\n	"),__p+='\r\n	<div class="comment_ifed">\r\n		<div class="list_cfed"></div>\r\n	</div>\r\n\r\n\r\n';
return __p},this.JST["common/feed/group-feed-component"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\r\n<div class="tt_feedtab">\r\n	',IsShowTab&&(__p+='\r\n	<ul class="tt_navtabs">\r\n		',__p+=236931==tenantInfo.Id||103239==tenantInfo.Id?'\r\n			<li><a href="#home?feedType=all" data-trigger="false">'+(null==(__t=i18n.myallfeed_1)?"":__t)+'</a></li>\r\n			<li><a href="#home?feedType=aboutme-all" data-trigger="false">'+(null==(__t=i18n.myfollowfeed_1)?"":__t)+'</a></li>\r\n			<li><a href="#home?feedType=aboutme-fromme" data-trigger="false">'+(null==(__t=i18n.mypublishfeed_1)?"":__t)+'</a></li>\r\n			<li><a href="#home?feedType=aboutme-tome" data-trigger="false">'+(null==(__t=i18n.myleavefeed_1)?"":__t)+'</a></li>\r\n			<li><a href="#home?feedType=aboutme-replyme" data-trigger="false">'+(null==(__t=i18n.myreplayfeed_1)?"":__t)+'</a></li>\r\n			<li><a href="#home?feedType=aboutme-collect" data-trigger="false">'+(null==(__t=i18n.mycollectfeed_1)?"":__t)+"</a></li>\r\n		":'\r\n			<li><a href="#home?feedType=aboutme-all" data-trigger="false">'+(null==(__t=i18n.myfollowfeed_1)?"":__t)+'</a></li>\r\n			<li><a href="#home?feedType=aboutme-fromme" data-trigger="false">'+(null==(__t=i18n.mypublishfeed_1)?"":__t)+'</a></li>\r\n			<li><a href="#home?feedType=aboutme-tome" data-trigger="false">'+(null==(__t=i18n.myleavefeed_1)?"":__t)+'</a></li>\r\n			<li><a href="#home?feedType=aboutme-replyme" data-trigger="false">'+(null==(__t=i18n.myreplayfeed_1)?"":__t)+'</a></li>\r\n			<li><a href="#home?feedType=aboutme-collect" data-trigger="false">'+(null==(__t=i18n.mycollectfeed_1)?"":__t)+'</a></li>\r\n			<li><a href="#home?feedType=department" data-trigger="false">部门动态</a></li>\r\n			<li><a href="#home?feedType=all" data-trigger="false">'+(null==(__t=i18n.myallfeed_1)?"":__t)+"</a></li>		\r\n		",__p+="\r\n	</ul>\r\n	"),__p+="\r\n	",isShowSearch&&(__p+='\r\n	<div data-name="feed-search" class="feed-search"></div>\r\n	'),__p+='\r\n</div>\r\n<div class="_tt_feedlist"></div>';return __p},this.JST["common/file/file-composite"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)isShowAction&&(__p+='\r\n	<div class="documentlist_action" data-name="action-area">\r\n		<a href="javascript:void(0);" title="" class="checkbox ch_dla" data-name="check-all"><span class="ico"></span></a><span class="total_dla" data-name="check-total">本页全选</span>\r\n		<button class="btn btn-disabled" data-name="btn-move">移动</button>\r\n		',isShowDelete&&(__p+='\r\n			<button class="btn btn-disabled" data-name="btn-delete">删除</button>\r\n		'),__p+="\r\n	</div>\r\n"),__p+='\r\n<div data-name="my-enclosure" class="my-enclosure ',needEnclosure&&(__p+="personal"),__p+='">\r\n	<img class="icon" src="'+(null==(__t=Talent.Context.getStaticUrl("images/file/folder2.png"))?"":__t)+'" />\r\n	<div class="mid">\r\n		<a href="#document?type='+(null==(__t=fileType)?"":__t)+'&id=-1" data-trigger="false" class="tt" data-name="folder-name">我发表过的附件</a>\r\n		<p class="des">这里汇集了我在tita发表的所有附件</p>\r\n	</div>\r\n</div>\r\n<ul class="documentlist" id="project_file_item">\r\n	\r\n</ul>\r\n<div class="pagelist">\r\n	<div class="pagination" data-name="page"></div>\r\n</div>\r\n<div class="documentlist_permissions" data-name="permissions-dropdown">\r\n	<ul>\r\n		<li data-type="true"><a href="javascript:void(0);" class="active">允许下载</a></li>\r\n		<li data-type="false"><a href="javascript:void(0);">不允许下载</a></li>\r\n	</ul>\r\n</div>\r\n';return __p},this.JST["common/file/file-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)isShowAction&&(__p+='\r\n<a href="javascript:void(0);" title="" class="checkbox cb_idl" id="'+(null==(__t=DocumentId)?"":__t)+'" pid="'+(null==(__t=pId)?"":__t)+'" data-name="check-item" data-type="'+(null==(__t=FileType)?"":__t)+'"><span class="ico"></span></a>\r\n'),__p+='\r\n<div class="ico_idl">\r\n		',__p+=isImage?'\r\n			<img src="'+(null==(__t=imageUrl)?"":__t)+'" alt="图片" style="width: 48px;height: 48px;">\r\n		':'\r\n			<img src="'+(null==(__t=iconUrl)?"":__t)+'" alt="图片" style="width: 48px;height: 48px;">\r\n		',__p+='\r\n</div>\r\n<div class="right_idl">\r\n	<div class="name_ridl" data-name="name">\r\n		',__p+="folder"==FileType?'\r\n		<a href="#document?type='+(null==(__t=fileType)?"":__t)+"&id="+(null==(__t=DocumentId)?"":__t)+'" data-trigger="false" data-name="folder-name">'+(null==(__t=FileName)?"":__t)+"</a>\r\n		":"\r\n		"+(null==(__t=FileName)?"":__t)+'\r\n		<span class="size_nridl">('+(null==(__t=Size)?"":__t)+"kB)</span>\r\n		",__p+='\r\n		\r\n	</div>\r\n	<div class="action_ridl">\r\n		<div class="who_aridl">\r\n			<a class="user_waridl" href="/u/'+(null==(__t=CreateUserId)?"":__t)+'">'+(null==(__t=CreateUserName)?"":__t)+"</a>\r\n			<span>上传于</span>"+(null==(__t=CreateDate)?"":__t)+"\r\n		</div>\r\n		","mine"==fileType?(__p+='\r\n			<div class="fun_aridl">\r\n				',"2"==FileSourceType?(__p+="\r\n						",PreviewUrl&&(__p+='\r\n							<a href="'+(null==(__t=PreviewUrl)?"":__t)+'" target="_blank">预览</a>\r\n						'),__p+='\r\n						<a href="'+(null==(__t=DownloadUrl)?"":__t)+'" data-name="download">下载</a>\r\n						<a href="javascript:void(0);"  id="'+(null==(__t=DocumentId)?"":__t)+'" pid="'+(null==(__t=pId)?"":__t)+'" data-name="move">移动</a>\r\n						<a href="javascript:void(0);" id="'+(null==(__t=DocumentId)?"":__t)+'" data-name="rename">重命名</a>\r\n						<a href="'+(null==(__t=SourceObjUrl)?"":__t)+'" target="_blank" class="original_faridl">查看原贴</a>\r\n				'):(__p+="\r\n					","folder"==FileType?__p+='\r\n						<a href="javascript:void(0);"  id="'+(null==(__t=DocumentId)?"":__t)+'" pid="'+(null==(__t=pId)?"":__t)+'" data-name="move">移动</a>\r\n						<a href="javascript:void(0);" id="'+(null==(__t=DocumentId)?"":__t)+'" data-name="rename">重命名</a>\r\n						<a href="javascript:void(0);" id="'+(null==(__t=DocumentId)?"":__t)+'" data-name="delete" data-type="'+(null==(__t=FileType)?"":__t)+'" file-type="'+(null==(__t=FileSourceType)?"":__t)+'">删除</a>\r\n					':(__p+="\r\n						",PreviewUrl&&(__p+='\r\n							<a href="'+(null==(__t=PreviewUrl)?"":__t)+'" target="_blank">预览</a>\r\n						'),__p+='\r\n						<a href="'+(null==(__t=DownloadUrl)?"":__t)+'" data-name="download">下载</a>\r\n						<a href="javascript:void(0);"  id="'+(null==(__t=DocumentId)?"":__t)+'" pid="'+(null==(__t=pId)?"":__t)+'" data-name="move">移动</a>\r\n						<a href="javascript:void(0);" id="'+(null==(__t=DocumentId)?"":__t)+'" data-name="rename">重命名</a>\r\n						<a href="javascript:void(0);" id="'+(null==(__t=DocumentId)?"":__t)+'" data-name="delete" data-type="'+(null==(__t=FileType)?"":__t)+'" file-type="'+(null==(__t=FileSourceType)?"":__t)+'">删除</a>\r\n					'),__p+="\r\n				"),__p+="\r\n			</div>\r\n		"):"company"==fileType?(__p+='\r\n			<div class="fun_aridl">\r\n				',PreviewUrl&&isPreview&&(__p+='\r\n					<a href="'+(null==(__t=PreviewUrl)?"":__t)+'" target="_blank">预览</a>\r\n				'),__p+="\r\n				",isShowDownload&&DownloadUrl&&"folder"!=FileType&&(__p+='\r\n				<a href="'+(null==(__t=DownloadUrl)?"":__t)+'" data-name="download">下载</a>\r\n				'),__p+="\r\n				",isShowMove&&(__p+='\r\n				<a href="javascript:void(0);"  id="'+(null==(__t=DocumentId)?"":__t)+'" pid="'+(null==(__t=pId)?"":__t)+'" data-name="move">移动</a>\r\n				'),__p+="\r\n				",isShowRename&&(__p+='\r\n				<a href="javascript:void(0);" id="'+(null==(__t=DocumentId)?"":__t)+'" data-name="rename">重命名</a>\r\n				'),__p+="\r\n				",isShowDelete&&(__p+='\r\n				<a href="javascript:void(0);" id="'+(null==(__t=DocumentId)?"":__t)+'" data-name="delete" data-type="'+(null==(__t=FileType)?"":__t)+'" file-type="'+(null==(__t=FileSourceType)?"":__t)+'">删除</a>\r\n				'),__p+="\r\n				\r\n				",isShowPermissions&&"folder"!=FileType&&(__p+='\r\n				<a href="javascript:void(0);" id="'+(null==(__t=DocumentId)?"":__t)+'" data-name="permissions">权限</a>\r\n				'),__p+="\r\n			</div>\r\n		"):"work"==fileType&&(__p+='\r\n			<div class="fun_aridl">\r\n				',PreviewUrl&&isPreview&&(__p+='\r\n					<a href="'+(null==(__t=PreviewUrl)?"":__t)+'" target="_blank">预览</a>\r\n				'),__p+="\r\n				",isShowDownload&&DownloadUrl&&"folder"!=FileType&&(__p+='\r\n				<a href="'+(null==(__t=DownloadUrl)?"":__t)+'" data-name="download">下载</a>\r\n				'),__p+='\r\n		\r\n				<a href="'+(null==(__t=SourceObjUrl)?"":__t)+'" target="_blank" class="original_faridl">查看原贴</a>\r\n			</div>\r\n		'),__p+="\r\n	</div>\r\n</div>";return __p},this.JST["common/file/file-move-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="title_tv" data-name="title">\n	',0==isEnd&&(__p+='\n	<span class="icon_tv" data-name="toggle"></span>\n	'),__p+='\n	<span class="icon_file_tv"></span>\n	<span class="text_tv">'+(null==(__t=FileName)?"":__t)+"</span>\n</div>\n<ul></ul>";return __p},this.JST["common/file/file-move-new"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<form data-name="file-move-new-form">\n	<div class="title_tv">\n		<span class="icon_file_tv"></span>\n		<div class="new_tv">\n			<div class="input-default input_ntv" data-name="file-move-new-input-warp">\n				<input type="text" placeholder="最多输入26个汉字" >\n			</div>\n			<span class="btn_ntv icon-radius-success-over" data-name="file-move-new-submit"></span>\n			<span class="btn_ntv icon-radius-error-over" data-name="file-move-new-cancel"></span>\n		</div>\n	</div>\n</form>';return __p},this.JST["common/file/file-move"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='\n	<div class="title_rd">\n		<h2>移动到</h2>\n		<span class="icon-dialog-closed closed_rd" data-name="file-move-close"></span>\n	</div>\n	<div class="cont_rd">\n		<div class="tt_tree_view" data-name="tree">\n			<div class="_tt_loading_m">努力加载中…</div>\n		</div>\n	</div>\n	<div class="bottom_rd">\n		<a class="btn btn-success new_rd" data-name="file-move-new-folder">新建文件夹</a>\n		<a class="btn btn-sure sure_rd" data-name="file-move-submit">确定</a>\n	</div>\n';return __p},this.JST["common/file/file-rename"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<form data-name="rename-form">\n	<div class="input-default input_ridl" data-name="rename-inputwrap">\n		<input type="text" value="'+(null==(__t=name)?"":__t)+'">\n	</div>\n	<a class="btn btn-sure" data-name="rename-sure">确定</a>\n	<a class="btn btn-cancel" data-name="rename-cancel">取消</a>\n</form>\n';return __p},this.JST["common/fileupload/file-upload"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="uploader_container"></div>\n<div  class="error_container" style="padding-top: 8px; display: none;"></div>\n<div class="preview_container"></div>\n<div class="loading_view" style="padding-top: 8px; display: none;padding-left:75px;"></div> ';return __p},this.JST["common/gantt/event"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)(EditStatusable||isTask&&finishTime)&&(__p+='\n	<div class="sch-resizable-handle sch-resizable-handle-start"></div>\n	<div class="sch-resizable-handle sch-resizable-handle-end"></div>\n'),__p+='\n<div unselectable="on" class="sch-event-inner {iconCls}">\n	<div class="block_container">\n		',_.each(config.blocks,function(a,b){__p+="\n			",__p+=isTask?'\n			<div class="sch-percent-allocated-bar" style="'+(null==(__t=a.style)?"":__t)+"background-color : "+(null==(__t=a.taskColor)?"":__t)+"; width: "+(null==(__t=percentArr[b])?"":__t)+'%;height: 16px; line-height: 16px;">\n 				<span class="sch-percent-allocated-bar-span" style="'+(null==(__t=a.textStyle)?"":__t)+' ">'+(null==(__t=a.text)?"":__t)+"</span>\n			</div>\n			":'\n			<div class="sch-percent-allocated-bar" style="'+(null==(__t=a.style)?"":__t)+"background-color : "+(null==(__t=a.planColor)?"":__t)+"; width: "+(null==(__t=percentArr[b])?"":__t)+'%;">\n 				<span class="sch-percent-allocated-bar-span" style="'+(null==(__t=a.textStyle)?"":__t)+' ">'+(null==(__t=a.text)?"":__t)+"</span>\n			</div>\n			",__p+="\n		"}),__p+='\n	</div>\n	<div class="node_container">\n		',isTask?(__p+="\n		",_.each(config.lines,function(a,b){__p+="\n			",0==b?__p+='\n				<span style="width : 5px; height : 24px; position : absolute; top : -3px; left : 0px; background-color : '+(null==(__t=a.color)?"":__t)+'"></span>\n			':2==b&&a.color?__p+='\n				<span style="width : 5px; height : 24px; position : absolute; top : -3px; right : 0px; background-color : '+(null==(__t=a.color)?"":__t)+'"></span>\n			':1==b&&a.color&&(__p+='\n				<span style="width : 5px; height : 24px; position : absolute; top : -3px; left : '+(null==(__t=percentArr[0])?"":__t)+"%; margin-left: -3px;background-color : "+(null==(__t=a.color)?"":__t)+'"></span>\n			'),__p+="\n		"}),__p+="\n		"):(__p+="\n		",_.each(config.lines,function(a,b){__p+="\n			",0==b?__p+='\n				<span style="width : 5px; height : 22px; position : absolute; top : -3px; left : 0px; background-color : '+(null==(__t=a.color)?"":__t)+'"></span>\n			':2==b&&a.color?__p+='\n				<span style="width : 5px; height : 22px; position : absolute; top : -3px; right : 0px; background-color : '+(null==(__t=a.color)?"":__t)+'"></span>\n			':1==b&&a.color&&(__p+='\n				<span style="width : 5px; height : 22px; position : absolute; top : -3px; left : '+(null==(__t=percentArr[0])?"":__t)+"%; margin-left: -3px;background-color : "+(null==(__t=a.color)?"":__t)+'"></span>\n			'),__p+="\n		"}),__p+="\n		"),__p+="\n	</div>\n</div>";return __p},this.JST["common/gantt/gantt-layout"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<!-- <div id="print-container"></div> -->\n<div class="_tt_loading_m">努力加载中…</div>\n<div id="gantt-tool">\n	<div style="width: 100%; height: 30px;margin-top: 15px;">\n		<!-- <input type="button" value="导出" id="exportPDF"/> -->\n		<input type="checkbox" style="width:18px;height:18px;margin-right:px;float:left;margin-top:6px;" name="showData" id="showDate" checked=true/>\n	',work&&score?__p+='\n        <label for="showDate" style="margin-top:4px;width:210px;float:left">显示开始/结束日期/评分/完成度</label>\n    ':!work&&score?__p+='\n        <label for="showDate" style="margin-top:4px;width:210px;float:left">显示开始/结束日期/评分</label>\n    ':work||score||(__p+='\n        <label for="showDate" style="margin-top:4px;width:210px;float:left">显示开始/结束日期</label>\n    '),__p+='  \n		<div style="float:right;width:450px;">\n			<label style="width:80px;float:left;margin-top:4px;font-size:14px;font-family:宋体;">时间范围</label>\n			<select id="gattConfigScale">\n				<option value="1" style="font-size:12px;color:#333;font-family:宋体;">按日查看</option>\n				<option value="2" style="font-size:12px;color:#333;font-family:宋体;">按周查看</option>	\n				<option value="3" style="font-size:12px;color:#333;font-family:宋体;">按月查看</option>\n		    	<option value="5" style="font-size:12px;color:#333;font-family:宋体;">按季度查看</option>\n		    	<option value="4" style="font-size:12px;color:#333;font-family:宋体;">按年查看</option>\n			<select>\n			<a id="legend" style="width:80px;margin-top:4px;margin-left:28px;" class=\'gantt_btn\'> 图例说明？</a>	\n		</div>\n	</div>\n</div>\n<div id="grid-configuration" style="height:'+(null==(__t=height)?"":__t)+"px;width:"+(null==(__t=width)?"":__t)+'px;">\n	\n</div>\n<div class="_tt_emptyplanlist gantt_empty">\n	<div class="content">\n		<span class="text">暂无数据！</span>\n	</div>\n</div>';return __p},this.JST["common/gantt/gantt-legend"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="lengendTip"style="width: 305px; height: 173px;">\n	<div class="lengendTip_left">\n		<div class="lengendTip_left_container lengendTip_left_plan" >\n			<span class="lengendTip_text" style="width:3em;">任务</span>\n			<div class="lengendTip_pic">\n				<!-- <span class="lengendTip_pic_left"></span> -->\n				<span class="lengendTip_pic_center"></span>\n				<!-- <span class="lengendTip_pic_right"></span> -->\n			</div>\n		</div>\n		<!-- <div class="lengendTip_left_container lengendTip_left_task">\n			<span class="lengendTip_text">子任务</span>\n			<div class="lengendTip_pic"> -->\n				<!-- <span class="lengendTip_pic_left"></span> -->\n				<!-- <span class="lengendTip_pic_center"></span> -->\n				<!-- <span class="lengendTip_pic_right"></span> -->\n			<!-- </div>\n		</div> -->\n	</div>\n	<div  class="lengendTip_right">\n		<div class="lengendTip_right_container ">\n			<span class="lengendTip_text">完成</span>\n			<div class="lengendTip_pic lengendTip_right_delay">\n				<!-- <span class="lengendTip_pic_left"></span> -->\n				<div  class="lengendTip_pic_center" style="background-color:#1da352;color:white;">\n					<span  class="lengendTip_pic_center_text">完成</span>\n				</div>\n				<!-- <span  class="lengendTip_pic_right"></span> -->\n			</div>\n		</div>\n		<div class="lengendTip_right_container ">\n			<span class="lengendTip_text">延期</span>\n			<div class="lengendTip_pic lengendTip_right_delay">\n				<!-- <span class="lengendTip_pic_left"></span> -->\n				<div  class="lengendTip_pic_center" style="background-color:#e54444;color:white;">\n					<span  class="lengendTip_pic_center_text">延期</span>\n				</div>\n				<!-- <span  class="lengendTip_pic_right"></span> -->\n			</div>\n		</div>\n		<div class="lengendTip_right_container ">\n			<span class="lengendTip_text">任务取消</span>\n			<div class="lengendTip_pic lengendTip_right_cancel">\n				<!-- <span class="lengendTip_pic_left"></span> -->\n				<div  class="lengendTip_pic_center" style="background-color:#e6e6e6;color:white;">\n					<span  class="lengendTip_pic_center_text">已取消</span>\n				</div>\n				<!-- <span  class="lengendTip_pic_right"></span> -->\n			</div>\n		</div>\n		<div class="lengendTip_right_container ">\n			<span class="lengendTip_text">任务暂停</span>\n			<div class="lengendTip_pic lengendTip_right_pause">\n				<!-- <span class="lengendTip_pic_left"></span> -->\n				<div  class="lengendTip_pic_center" style="background-color:#f5aa28;color:white;">\n					<span  class="lengendTip_pic_center_text">已暂停</span>\n				</div>\n				<!-- <span  class="lengendTip_pic_right"></span> -->\n			</div>\n		</div>\n		<div class="lengendTip_right_container ">\n			<span class="lengendTip_text">任务延迟</span>\n			<div class="lengendTip_pic lengendTip_right_setdelay">\n				<!-- <span class="lengendTip_pic_left"></span> -->\n				<div  class="lengendTip_pic_center" style="background-color:#b960e8;color:white;">\n					<span  class="lengendTip_pic_center_text">已延迟</span>\n				</div>\n				<!-- <span  class="lengendTip_pic_right"></span> -->\n			</div>\n		</div>\n	</div>\n<div>';return __p},this.JST["common/gantt/index-page"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div id="print-container"></div>\n<div class="_tt_loading_m">努力加载中…</div>\n\n<div id="grid-configuration">\n</div>\n\n<div class="_tt_emptyplanlist gantt_empty">\n	<div class="content">\n		<span class="text">暂无数据！</span>\n	</div>\n</div>';return __p},this.JST["common/guide"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\r\n	<a href="javascript:void(0);" title="" class="closed_guidebottom" data-name="closed"><span class="icon-closed "></span></a>\r\n	<div class="load_guidebottom"  data-name="load"><img src="'+(null==(__t=imgLoadUrl)?"":__t)+'" alt="" /><span>努力加载中…</span></div>\r\n	<iframe allowTransparency="true" src="" width="100%" height="355" frameborder="0" scrolling="no" class="iframe_guidebottom"  data-name="iframe" name="parent"> </iframe>\r\n\r\n';return __p},this.JST["common/italent/app-select-item"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<ul>\r\n	\r\n</ul>\r\n<a href="javascript:void(0);" title="" class="closed"></a>';return __p},this.JST["common/italent/base-module-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)mode&&"nomodule"==mode?(__p+='\r\n	<div class="talent_module_item_wrap">\r\n		<div id="talent_basic_module_main" class="talent_module_item">\r\n			',asyn&&(__p+='\r\n			<div class="talent_basic_module_load"><img src="'+(null==(__t=loadimgurl)?"":__t)+'"><span>加载中...</span></div>\r\n			'),__p+="\r\n		</div>\r\n	</div>\r\n"):(__p+='\r\n<div class="talent_module_item_wrap">\r\n	<div class="talent_module_item">\r\n		',__p+=mode&&"notitle"==mode?"\r\n			\r\n		":'\r\n			<div class="thead_tmi">\r\n				<span class="name_tmi">'+(null==(__t=title)?"":__t)+"</span>\r\n			</div>\r\n		",__p+='\r\n		<div class="tbody_tmi" id="talent_basic_module_main">\r\n			',asyn&&(__p+='\r\n			<div class="talent_basic_module_load"><img src="'+(null==(__t=loadimgurl)?"":__t)+'"><span>加载中...</span></div>\r\n			'),__p+="\r\n		</div>\r\n		"+(null==(__t=tfootTemplate)?"":__t)+"\r\n	</div>\r\n</div>\r\n");return __p},this.JST["common/italent/base-page"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="_tt_loading_m">努力加载中…</div>\n\n';return __p},this.JST["common/italent/modules/analysis-mid"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="talent_analysis_mid">\r\n	<ul>\r\n		\r\n	</ul>\r\n</div>';return __p},this.JST["common/italent/modules/basiccompetent-testing"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="talent_inventory_basiccompetenttesting">\n	<p class="date_tmi">'+(null==(__t=createtime)?"":__t)+'</p>\n	<div class="talent_progressbar">\n		<div class="progressbar_pb"></div>\n		<p class="value_pb"><span>'+(null==(__t=testcent)?"":__t)+"%</span></p>\n	</div>\n</div>";return __p},this.JST["common/italent/modules/capability-testing"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="talent_inventory_abilitytest">\n	<p class="date_tmi">'+(null==(__t=createtime)?"":__t)+'</p>\n	<div class="talent_progressbar">\n		<div class="progressbar_pb"></div>\n		<p class="value_pb"><span>'+(null==(__t=testcent)?"":__t)+"%</span>分</p>\n	</div>\n</div>";return __p},this.JST["common/italent/modules/ceping"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="talent_ceping">\n	<div class="list_ceping" data-name="list">\n	</div>\n</div>';return __p},this.JST["common/italent/modules/character-testing"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="talent_inventory_professionalpersonality">\n	<p class="date_tmi">2013年2月1日</p>\n	<p class="cont_prpe">\n		<span>'+(null==(__t=testcent)?"":__t)+"</span><br />\n		"+(null==(__t=testtype)?"":__t)+"\n	</p>\n</div>";return __p},this.JST["common/italent/modules/competency"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="talent_competency">\r\n	<table>\r\n		<thead>\r\n			<tr> \r\n				<th class="col_01">考核周期</th>\r\n				<th class="col_02">得分</th>\r\n				<th class="col_03">等级</th>\r\n				<th class="col_04">考核</th>\r\n				<th class="col_05">来源</th>\r\n				<th class="col_06"></th>\r\n			</tr>\r\n		</thead>\r\n		<tbody>\r\n		</tbody>\r\n	</table>\r\n</div>';return __p},this.JST["common/italent/modules/currently-end-i360"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='\n<div class="talent_inventory_i360">\n	<p class="date_tmi">2013年2月1日</p>\n	<div class="chart_i360"></div>\n</div>';return __p},this.JST["common/italent/modules/currently-end-performance"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<span class="ico_ee"></span>\r\n<span class="num_ee">'+(null==(__t=managerratescore)?"":__t)+'</span>\r\n<p class="name_ee">'+(null==(__t=name)?"":__t)+'</p>\r\n<p class="time_ee">'+(null==(__t=periodicitybegindate)?"":__t)+"—"+(null==(__t=periodicityenddate)?"":__t)+"</p>";return __p},this.JST["common/italent/modules/currently-end-successiondp"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div  class="talent_inventory_endsuccession">\n	<p class="from_es">来自：<a href="'+(null==(__t=url)?"":__t)+'" title="">'+(null==(__t=name)?"":__t)+"</a></p>\n	<ul>\n		",_.each(Targets,function(a){__p+='\n		<li>\n			<span class="ico_es"></span>\n			<a class="name_es">'+(null==(__t=a.name)?"":__t)+'</a>\n			<p class="time_es">'+(null==(__t=a.summary)?"":__t)+"</p>\n		</li>\n		"}),__p+="\n	</ul>\n</div>\n";return __p},this.JST["common/italent/modules/currently-end-talentReviewView"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<span class="ico_ee"></span>\r\n<a href="'+(null==(__t=url)?"":__t)+'" title="" class="name_ee">'+(null==(__t=name)?"":__t)+'</a>\r\n<p class="time_ee">'+(null==(__t=start_date)?"":__t)+"—"+(null==(__t=end_date)?"":__t)+"</p>";return __p},this.JST["common/italent/modules/epm"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="talent_epm">\n	<table>\n		<thead>\n			<tr> \n				<th class="col_01">考核周期</th>\n				<th class="col_02">得分</th>\n				<th class="col_03">等级</th>\n				<th class="col_04">考核</th>\n				<th class="col_05">来源</th>\n				<th class="col_06"></th>\n			</tr>\n		</thead>\n		<tbody>\n		</tbody>\n	</table>\n</div>';return __p},this.JST["common/italent/modules/fealty-testing"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="talent_inventory_organizationalloyalty">\n	<p class="date_tmi">'+(null==(__t=createtime)?"":__t)+'</p>\n	<div class="talent_progressbar">\n		<div class="progressbar_pb"></div>\n		<p class="value_pb"><span>'+(null==(__t=testcent)?"":__t)+"</span>分</p>\n	</div>\n</div>\n";return __p},this.JST["common/italent/modules/individuation-management-testing"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="talent_inventory_managementpersonality">\r\n	<p class="date_tmi">'+(null==(__t=createtime)?"":__t)+'</p>\r\n	<div class="chat_mp"></div>\r\n</div>';return __p},this.JST["common/italent/modules/interest-testing"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="talent_inventory_vocationalinterest ">\n	<p class="date_tmi">'+(null==(__t=createtime)?"":__t)+'</p>\n	<p class="cont_vi">'+(null==(__t=testcent)?"":__t)+"</p>\n</div>";return __p},this.JST["common/italent/modules/kernel-management-testing"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+="";return __p},this.JST["common/italent/modules/leadership-testing"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="talent_inventory_leadershipassessment">\n	<p class="date_tmi">'+(null==(__t=createtime)?"":__t)+'</p>\n	<div class="talent_progressbar">\n		<div class="progressbar_pb"></div>\n		<p class="value_pb"><span>'+(null==(__t=testcent)?"":__t)+"</span>分</p>\n	</div>\n</div>";return __p},this.JST["common/italent/modules/management-capability-testing"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="talent_inventory_managementpotentia">\n	<p class="date_tmi">'+(null==(__t=createtime)?"":__t)+'</p>\n	<div class="talent_progressbar">\n		<div class="progressbar_pb"></div>\n		<p class="value_pb"><span>'+(null==(__t=testcent)?"":__t)+"</span> </p>\n	</div>\n</div>\n";return __p},this.JST["common/italent/modules/management-competent-testing"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="talent_inventory_managementcompetenttesting">\n	<p class="date_tmi">'+(null==(__t=createtime)?"":__t)+'</p>\n	<div class="talent_progressbar">\n		<div class="progressbar_pb"></div>\n		<p class="value_pb"><span>'+(null==(__t=testcent)?"":__t)+"%</span></p>\n	</div>\n</div>";return __p},this.JST["common/italent/modules/management-style-testing"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="talent_inventory_managementstyle">\n	<p class="date_tmi">'+(null==(__t=createtime)?"":__t)+'</p>\n	<div class="cont_mm">\n		<span class="left_cmm">关<br/>系<br/>导<br/>向</span>\n		<ul class="torque_cmm">\n			',__p+="参与式"==testcent?'<li class="active_cmm">':"<li>",__p+='\n				<div class="a_cmm a1_cmm"><span>参与式</span></div>\n			</li>\n			',__p+="教练式"==testcent?'<li class="active_cmm">':"<li>",__p+='\n				<div class="a_cmm a2_cmm"><span>教练式</span></div>\n			</li>\n			',__p+="放权式"==testcent?'<li class="active_cmm">':"<li>",__p+='\n				<div class="a_cmm a3_cmm"><span>放权式</span></div>\n			</li>\n			',__p+="指示式"==testcent?'<li class="active_cmm">':"<li>",__p+='\n				<div class="a_cmm a4_cmm"><span>指示式</span></div>\n			</li>\n		</ul>\n		<span class="bottom_cmm">任务导向</span>\n	</div>\n</div>\n';return __p},this.JST["common/italent/modules/performance"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="talent_performance">\r\n	<table>\r\n		<thead>\r\n			<tr> \r\n				<th class="col_01">考核周期</th>\r\n				<th class="col_02">得分</th>\r\n				<th class="col_03">等级</th>\r\n				<th class="col_04">考核</th>\r\n				<th class="col_05">来源</th>\r\n				<th class="col_06"></th>\r\n			</tr>\r\n		</thead>\r\n		<tbody>\r\n		</tbody>\r\n	</table>\r\n</div>';return __p},this.JST["common/italent/modules/potential"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="talent_potential">\r\n	<table>\r\n		<thead>\r\n			<tr> \r\n				<th class="col_01">考核周期</th>\r\n				<th class="col_02">得分</th>\r\n				<th class="col_03">等级</th>\r\n				<th class="col_04">考核</th>\r\n				<th class="col_05">来源</th>\r\n				<th class="col_06"></th>\r\n			</tr>\r\n		</thead>\r\n		<tbody>\r\n		</tbody>\r\n	</table>\r\n	\r\n</div>\r\n';return __p},this.JST["common/italent/modules/reasoning-testing"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="talent_inventory_managementcompetenttesting">\r\n	<p class="date_tmi">'+(null==(__t=createtime)?"":__t)+'</p>\r\n	<div class="talent_progressbar">\r\n		<div class="progressbar_pb"></div>\r\n		<p class="value_pb"><span>'+(null==(__t=testcent)?"":__t)+"%</span> </p>\r\n	</div>\r\n</div>";return __p},this.JST["common/italent/modules/record-activity"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="<dl>\n	<dt>"+(null==(__t=appname)?"":__t)+"</dt>\n	",_.each(ActivityExperienceModels,function(a){__p+='\n	<dd><a href="'+(null==(__t=a.url)?"":__t)+'" title="">'+(null==(__t=a.name)?"":__t)+"</a></dd>\n	"}),__p+="\n</dl>\n\n";return __p},this.JST["common/italent/modules/record-avatar"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="talent_profile_userinfo">\n	<div class="user_ui">\n		<span class="avatar_ui">\n			\n\n			',__p+=0==has_avatar?"			\n				"+(null==(__t=_.convertImage({className:"",src:photo,size:50,shape:"radius",name:name,bgColor:color}))?"":__t)+"\n			":'\n				<img alt="'+(null==(__t=name)?"":__t)+'" src="'+(null==(__t=photo)?"":__t)+'">\n			',__p+='\n\n		</span>\n		<dl>\n			<dt>\n				<span class="ch_ui">'+(null==(__t=_.substringWithM(name,12,!0))?"":__t)+"</span>\n				",englishname&&""!=englishname&&(__p+='<span class="eh_ui">（'+(null==(__t=_.substringWithM(englishname,12,!0))?"":__t)+"）</span>"),__p+="\n				","undefined"!=typeof mark&&mark&&(__p+='\n					<img src="'+(null==(__t=mark.logo)?"":__t)+'" original-title="'+(null==(__t=mark.mark_name)?"":__t)+'">\n				'),__p+="\n\n				<!-- ",1!=routerData.appid||1!=routerData.apptype||routerData.ismyself||(__p+="\n					",__p+=0==is_follow?'\n						<a href="javascript:void(0);" title="" class="btn btn-attention" to-user-id="'+(null==(__t=userid)?"":__t)+'"><b>'+(null==(__t=i18n.follow_1)?"":__t)+"</b><span>"+(null==(__t=i18n.follow_1)?"":__t)+"</span></a>\n					":'\n						<a href="javascript:void(0);" title="" class="btn btn-cancel-attention" to-user-id="'+(null==(__t=userid)?"":__t)+'"><b>'+(null==(__t=i18n.following_1)?"":__t)+"</b><span>"+(null==(__t=i18n.cancelfollow_1)?"":__t)+"</span></a>\n					",__p+=" \n				"),__p+="-->\n			</dt>\n		</dl>\n		",routerData.ismyself&&(__p+='\n		<a href="#more/archives?appid='+(null==(__t=routerData.appid)?"":__t)+"&apptype="+(null==(__t=routerData.apptype)?"":__t)+'" title="" class="edit_ui"><span class="ico"></span><span>简档编辑</span></a>\n		'),__p+="\n	</div>\n</div>\n\n";return __p},this.JST["common/italent/modules/record-base"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="talent_record_basic">\n	<div class="talent_record_basic_box"></div>\n</div>\n';
return __p},this.JST["common/italent/modules/talent-dynamic"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div name="pubblog"></div>  \r\n<div name="feedlist"></div>';return __p},this.JST["common/italent/modules/talent-plan-statistics"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="talent-plan-statistics">\r\n	<div class="charts_ps"></div>\r\n	<div class="counttotal_ps">\r\n		<p class="tit_ps">'+(null==(__t=i18n.plan_1)?"":__t)+'完成率</p>\r\n		<ul class="watch_ps">\r\n			<li>\r\n				本周  '+(null==(__t=totaldata.weekdone)?"":__t)+"/"+(null==(__t=totaldata.weektotal)?"":__t)+"\r\n				<span>"+(null==(__t=totaldata.weekpercent)?"":__t)+'</span>\r\n			</li>\r\n			<li class="first">\r\n				本月  '+(null==(__t=totaldata.monthdone)?"":__t)+"/"+(null==(__t=totaldata.monthtotal)?"":__t)+"\r\n				<span>"+(null==(__t=totaldata.monthpercent)?"":__t)+"</span>\r\n			</li>\r\n		</ul>\r\n	</div>\r\n</div>";return __p},this.JST["common/italent/modules/talent-profile"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="ms_tablist">\r\n	<ul>\r\n		\r\n	</ul>\r\n</div>\r\n<div class="membership_container"></div>';return __p},this.JST["common/italent/modules/talent-task-statistics"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="talent-task-statistics">\r\n	<ul class="tab_ts">\r\n		<li class="active"><a href="javascript:void(0);" title="">本周</a><span class="caret"></span></li>\r\n		<li><a href="javascript:void(0);" title="">本月</a><span class="caret"></span></li>\r\n		<li><a href="javascript:void(0);" title="">本季度</a><span class="caret"></span></li>\r\n	</ul>\r\n	<div class="box_ts"></div>\r\n	<div class="classstatistic" data-name="class-statistic">\r\n		<p class="tit_ts">按分类统计</p>\r\n		<div class="tablecont_ts">\r\n			<table class="all_ts">\r\n				<tr> \r\n					<th class="col_01">我所有'+(null==(__t=task_1)?"":__t)+'统计 </th>\r\n					<th class="col_02">总数</th>\r\n					<th class="col_03">已完成</th>\r\n					<th class="col_04">未完成</th>\r\n					<th class="col_05">完成率</th>\r\n				</tr>\r\n				<tr> \r\n					<td>'+(null==(__t=CounterCollections2.all.name)?"":__t)+" </td>\r\n					<td>"+(null==(__t=CounterCollections2.all.total)?"":__t)+" </td>\r\n					<td>"+(null==(__t=CounterCollections2.all.done)?"":__t)+" </td>\r\n					<td>"+(null==(__t=CounterCollections2.all.undone)?"":__t)+" </td>\r\n					<td>"+(null==(__t=CounterCollections2.all.donepercent)?"":__t)+"</td>\r\n				</tr>\r\n			</table>\r\n			<ul>\r\n				",_.each(CounterCollections2.other,function(a){__p+='\r\n				<li>\r\n					<table class="app_4_ts">\r\n						<tr> \r\n							<th class="col_01">'+(null==(__t=a.name)?"":__t)+'</th>\r\n							<th class="col_02">总数</th>\r\n							<th class="col_03">已完成</th>\r\n							<th class="col_04">未完成</th>\r\n							<th class="col_05">完成率</th>\r\n							\r\n						</tr>\r\n						',_.each(a.usertaskcounters,function(a,b){__p+="\r\n						<tr ",b%2!=0&&(__p+=' class="zebra"'),__p+="> \r\n							<td>"+(null==(__t=a.name)?"":__t)+"</td>\r\n							<td>"+(null==(__t=a.total)?"":__t)+"</td>\r\n							<td>"+(null==(__t=a.done)?"":__t)+"</td>\r\n							<td>"+(null==(__t=a.undone)?"":__t)+"</td>\r\n							<td>"+(null==(__t=a.donepercent)?"":__t)+"</td>\r\n						</tr>\r\n						"}),__p+='\r\n					</table>\r\n					<div class="table_line"></div>\r\n				</li>\r\n				'}),__p+="\r\n			</ul>\r\n		<div>\r\n	</div>\r\n</div>";return __p},this.JST["common/italent/modules/user-performance"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="talent_home_epm">\r\n	<ul class="total_epm">\r\n		<li>\r\n			<p>'+(null==(__t=targettotal)?"":__t)+"</p>\r\n			目标\r\n		</li>\r\n		<li>\r\n			<p>"+(null==(__t=taskdonetotal)?"":__t)+"/<span>"+(null==(__t=tasktotal)?"":__t)+'</span></p>\r\n			任务\r\n		</li>\r\n	</ul>\r\n	<div class="basic_epm">\r\n		\r\n		<table class="name_epm">\r\n			<tr> \r\n				<td><i class="logo_epm"></i></td>\r\n				<td class="text_epm"><a href="'+(null==(__t=url)?"":__t)+'" title="">'+(null==(__t=name)?"":__t)+'</a></td>\r\n			</tr>\r\n		</table>\r\n		<ul class="intro_epm">\r\n			<li>考核周期：'+(null==(__t=periodicitybegindate)?"":__t)+"—"+(null==(__t=periodicityenddate)?"":__t)+"</li>\r\n			<li>考核结束时间："+(null==(__t=EndDate)?"":__t)+"</li>\r\n		</ul>\r\n	</div>\r\n	","undefined"!=typeof workflowstep&&workflowstep&&workflowstep.length&&(__p+='\r\n	<div class="step_epm">\r\n		<ul class="step_list_epm">\r\n			<li class="x_epm x0_epm"></li>\r\n			\r\n			',_.each(workflowstep,function(a){__p+="\r\n				",__p+=a.currentstep?'\r\n					<li class="x_epm x1_epm hl_epm">'+(null==(__t=a.stepname)?"":__t)+":"+(null==(__t=a.operatorname)?"":__t)+"</li>\r\n				":'\r\n					<li class="x_epm x1_epm">'+(null==(__t=a.stepname)?"":__t)+":"+(null==(__t=a.operatorname)?"":__t)+"</li>\r\n				",__p+="\r\n			"}),__p+="\r\n			\r\n			",__p+="undefined"!=typeof islaststep&&islaststep?'\r\n			<li class="x_epm h1_x4_epm"></li>\r\n			':'\r\n			<li class="x_epm x4_epm"></li>\r\n			',__p+="\r\n		</ul>\r\n	</div>\r\n	"),__p+="\r\n</div>";return __p},this.JST["common/italent/modules/user-successionidp"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="talent_home_succession">\n	<ul class="total_epm">\n		<li>\n			<p>'+(null==(__t=targettotal)?"":__t)+"</p>\n			目标\n		</li>\n		<li>\n			<p>"+(null==(__t=taskdonetotal)?"":__t)+"/<span>"+(null==(__t=tasktotal)?"":__t)+'</span></p>\n			任务\n		</li>\n	</ul>\n	<div class="basic_epm">\n		\n		<span class="leve_epm">'+(null==(__t=statues)?"":__t)+'</span>\n		\n		<table class="name_epm">\n			<tr> \n				<td><i class="logo_epm"></i></td>\n				<td class="text_epm"><a href="'+(null==(__t=url)?"":__t)+'" title="" target="_blank">'+(null==(__t=name)?"":__t)+'</a></td>\n			</tr>\n		</table>\n		<ul class="intro_epm">\n			<li>考核周期：'+(null==(__t=startdate)?"":__t)+"</li>\n			<li>考核结束时间："+(null==(__t=submitdate)?"":__t)+"</li>\n		</ul>\n	</div>\n</div>";return __p},this.JST["common/italent/modules/user-task"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="do_mt">\n	<div class="time_mt">\n		<span class="date_mt">'+(null==(__t=title)?"":__t)+'</span>\n		<span class="total_mt">'+(null==(__t=total)?"":__t)+"</span>\n	</div>\n	",_.each(tasks,function(a){__p+='\n	<div class="daylist_mt">\n	\n		\n		<div class="app_mt"><i class="app_'+(null==(__t=a.apptype)?"":__t)+'_amt"></i><span>'+(null==(__t=a.appName)?"":__t)+'</span></div>\n		<dl class="item_mt">\n			<dt></dt>\n			<dd>\n				<ul class="list_mt">\n					',_.each(a.Tasks,function(a){__p+="\n					",__p+=2==a.Status?'\n					<li class="complete_mt">\n					':a.IsDeadLine?'\n						<li class="expire_mt">\n					':"\n						<li>\n					",__p+='	\n						<span class="intro_lmt">'+(null==(__t=a.EndTime)?"":__t)+'</span>\n						<a href="'+(null==(__t=a.FeedUrl)?"":__t)+'" title="" class="name_lmt" target="_blank">'+(null==(__t=a.TaskName)?"":__t)+"</a>\n					</li>\n					\n					"}),__p+="\n				</ul>\n			</dd>\n		</dl>\n		\n		\n	</div>\n	"}),__p+="	\n</div>";return __p},this.JST["common/italent/modules/weather"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="talent_dayweather">\n	<div class="day_dw">'+(null==(__t=datenum.day)?"":__t)+'</div>\n	<div class="month_dw">'+(null==(__t=datenum.month)?"":__t)+"月"+(null==(__t=datenum.date)?"":__t)+'日</div>\n	<div id="weather_italent" class="weather_dw"></div>\n</div>\n\n';return __p},this.JST["common/italent/sidebar-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)"undefined"!=typeof items?(__p+="\n	",_.each(items,function(a){__p+='\n	<li>\n		<a href="'+(null==(__t=a.Url)?"":__t)+'" class="'+(null==(__t=a.ChannelType)?"":__t)+'_ttsn" ',a.targetframe&&(__p+='target="app_iframe"'),__p+=">\n			",__p+="undefined"!=typeof a.Icon&&a.Icon?'\n				<strong style="background-image:url('+(null==(__t=a.Icon)?"":__t)+')"></strong>\n			':"\n				<strong></strong>\n			",__p+="\n			<span>"+(null==(__t=a.Name)?"":__t)+"</span>\n		</a>\n	</li>\n	"}),__p+="\n"):__p+="\n	<li>加载中...</li>\n";return __p},this.JST["common/layouts/empty-layout"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div id="main-region"></div>\n<div id="pull-screen-region"></div>';return __p},this.JST["common/layouts/italent-layout"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="tu-page-header" data-name="header-region" ></div>\n<div class="tu-page-nav" data-name="nav-region"></div>\n<div class="tu-page-rightview" data-name="rightview-region"></div>\n<div class="tu-page-rightbar" data-name="rightbar-region"></div>\n\n\n\n<div class="tu-page-container tu-scroll" data-name="main-container-region">\n        <div class="tu-main-container-inner tu-clearfix" data-name="main-container-innner-region">\n            <div class="tu-col-3" data-tu-submenu=\'tu-submenu\'><div class="tu-col-container"></div></div>\n            <div class="tu-col-13"><div class="tu-col-container"></div></div>\n        </div>\n</div>\n';return __p},this.JST["common/layouts/master-layout"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div id="header-region"></div>\n\n<div class="_tt_layout_body">\n	<div id="sidebar-region"></div>\n	<div id="main-region" class="_tt_layout_container_fluid"></div>\n	<div id="right-sidebar-region"></div>\n\n</div>\n<div id="footer-region" class="_tt_footer"></div>\n<div id="tt_global_plan_detail_container"></div>\n\n';return __p},this.JST["common/loading-circle"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="loading-container">\n   \n    <div class="loading-content">\n        ',__p+=isShowGIF?'\n            <div class="img-ie">\n                <img src='+(null==(__t=ImgUrl)?"":__t)+">\n            </div>\n        ":'\n            <div class="spinner">\n                <div class="rect1"></div>\n                <div class="rect2"></div>\n                <div class="rect3"></div>\n                <div class="rect4"></div>\n            </div>\n        ',__p+="\n        ",isShowText&&(__p+='\n            <div class="text-loading">\n                '+(null==(__t=textContent)?"":__t)+"\n            </div>\n        "),__p+='\n    </div>\n    <div class="loading-mask"></div>\n</div>\n';return __p},this.JST["common/membership/membership-tab-component"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="membership_right">\n	<div class="membership_tab_top" ',showShare||(__p+='style="background-color:#eee;"'),__p+='>\n		<ul class="membership_tab_title">\n			<li data-name="membership" data-trigger="false"><span original-title="团队" class="membership_icon_st"></span><a href="javascript:void(0)">团队</a></li>\n			',showShare&&(__p+='\n				<li data-name="share" data-trigger="false"><span original-title="共享" class="membership_icon_share"></span><a href="javascript:void(0)">共享</a></li>\n			'),__p+='	\n		</ul>\n	</div>\n	<div class="membership_arrow membership_arrow_left">\n		<span class="membership_arrow_icon"></span>\n		<span class="membership_arrow_line"></span>\n	</div>\n	<div id="membership_tab"></div>\n	<div id="membership_bottom_container">\n	</div>\n</div>';return __p},this.JST["common/membership/membership-tab-composite"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<li class="membership_item_container" style="position:relative" data-id='+(null==(__t=Id)?"":__t)+" level="+(null==(__t=level)?"":__t)+">\n	",3==level?(__p+='\n		<div class="membership_item_long membership_item_level_'+(null==(__t=level)?"":__t)+" ",1==Type&&(__p+=" membership_item_dashed"),__p+='">\n			<div class="membership_image_container">\n				'+(null==(__t=_.convertImage({className:"membership_image_large",shape:"radius",size:50,src:UserAvatar.Medium,name:Name,bgColor:UserAvatar.Color}))?"":__t)+"\n				",subordinateCount>0&&!Type&&(__p+='\n					<div class="membreship_subordinate_btn">\n						<span></span>\n					</div>\n				'),__p+='\n			</div>\n			<div class="membership_span_container">\n				<span class="item_long_name" title='+(null==(__t=Name)?"":__t)+">"+(null==(__t=subName)?"":__t)+'</span>\n				<span class="item_long_position" title='+(null==(__t=Department)?"":__t)+">部门："+(null==(__t=Department)?"":__t)+'</span>\n				<span class="item_long_description" title='+(null==(__t=Position)?"":__t)+">职位："+(null==(__t=Position)?"":__t)+'</span>\n			</div>\n			<div class="membership_line membership_line_level'+(null==(__t=level)?"":__t)+' ">\n			</div>\n		</div>\n	'):(__p+="\n		",__p+=0!=Id?'\n			<div class="membership_item_short  membership_item_level_'+(null==(__t=level)?"":__t)+'">\n				'+(null==(__t=_.convertImage({className:"membership_image_short",shape:"radius",size:30,src:UserAvatar.Small,name:Name,bgColor:UserAvatar.Color}))?"":__t)+"\n				\n				<span>"+(null==(__t=subName)?"":__t)+'</span>\n				<div class="membership_line membership_line_level'+(null==(__t=level)?"":__t)+' ">\n				</div>\n			</div>\n		':"\n			<div></div>\n		",__p+='\n		<div class="membership_subordinate_container"></div>\n	'),__p+="\n</li>";return __p},this.JST["common/membership/membership-tab-layout"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="membership_back">\n	<div class="membership_back_btn">\n		返回最上级\n	</div>\n</div>\n<div class="membership_tab_staff_container"  id="membership_scroll_container">\n	\n</div>';return __p},this.JST["common/membership/membership-tab-limits-tip"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="membership_none_limit_tip">\r\n	<div class="title_mnlt">隔级查看是什么</div>\r\n	<p class="text_mnlt">所谓隔级查看，就是管理者可以一层一层向下盘点。比如老板可以看到一线员工的'+(null==(__t=i18n.plan_1)?"":__t)+'和任务执行情况、简档、工作报表、动态等。该功能为管理者快速查看间接下级的工作提供便利，从整体上把控现状，让管理更加深入细致，同时也对员工工作起到监督作用。<br/>\r\n	如下图所示，该租户开通了隔级查看后，纪小国可通过张小庆查看到他的下属罗小翀的全部状况。</p>\r\n	<div class="img_mnlt">\r\n		<img src="'+(null==(__t=imgUrl)?"":__t)+'" alt="" />\r\n	</div>\r\n	<br/><br/>\r\n</div>';return __p},this.JST["common/membership/membership-tab-operate"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="membership_bottom">	\n	<div class="membership_bottom_btn">\n		<span class="membership_bottom_text">团队操作</span>\n		<span class="membership_arrow_down"></span>\n		<span class="indicator indicator_all"></span>\n		<div class="dropdown-menu">\n			<ul class="menu-list">\n			</ul>\n		</div>\n	</div>\n</div>	';return __p},this.JST["common/membership/membership-tab-thumb-composite"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div id="membership_scroll_container">\n	<ul class="membership_thumb_container"></ul>\n</div>';return __p},this.JST["common/membership/membership-tab-thumb-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+=null==(__t=_.convertImage({className:"membership_thumb_img",shape:"radius",size:imgSize,src:UserAvatar.Medium,name:Name,bgColor:UserAvatar.Color}))?"":__t;return __p},this.JST["common/membership/membership-tip-limits"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="membership_askfor">\r\n	<p class="tiptext">您的企业尚未开通 <br />'+(null==(__t=i18n.plan_1)?"":__t)+'表隔级查看功能</p>\r\n	<p class="gohelp"><a href="javascript:void(0);" title="">什么是隔级查看？</a></p>\r\n	<a href="javascript:void(0);" title="" class="btn btn-success" data-type="askForButton">立即申请开通</a>\r\n\r\n	<p class="concat">如有任何问题，请咨询在线客服 <br />或拨打 <strong>400 650 3180</strong></p>\r\n</div>\r\n<div class="membership_askfor_success">\r\n	<p class="tiptext"><span class="ico"></span><span>已经提交申请</span></p>\r\n	<p class="comfort">我们会尽快审核，审核通过后，<br />tita客服会联系帮您开通，请耐心等待！</p>\r\n</div>';return __p},this.JST["common/messages/message-approval-detail"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="tt_plandetailreporttopbar"></div>\n<div class="tt_plandetailtopbar ap-title"><div class="higher-level">上级规定</div></div>\n<div class="_tt_plandetailcontent mar-top">\n<div class="ap-cf a-width">计划审批规定 <span class="des">当计划发生以下变动时需上级审批</span></div>\n	<div class="ap-select-range ap-bc" data-name="ap-select-range">\n		<span class="approval_title aoo-scope">范围:</span>\n		<div class="approval_desc message-scope" id="app-scope">',__p+=selectScope?"\n			"+(null==(__t=selectScope)?"":__t)+"\n			":"\n				所有范围\n			",__p+='</div>\n	</div>\n	<div class="ap-select-type ap-bc" data-name="ap-select-type">\n		<span class="approval_title aoo-scope">类型:</span>\n		<div class="approval_desc app-desc" id="approval_desc">\n			<ul></ul>\n		</div>\n	</div>\n	<!--if(hideDaily)-->\n<div class=" ap-cf daily-papers-tip a-width">总结规定 <span class="des">超过规定时间提交算迟交</span></div>\n	<div class="daily-wraper">\n		<div class="daily-paper ap-cf a-width">日报提交时间：<span class="data-daily" id="daily-paper">'+(null==(__t=daily_date)?"":__t)+'</span>\n		</div>\n		<div class="daily-paper ap-cf a-width">周报提交时间：<span class="data-daily" id="daily-paper">'+(null==(__t=week_date)?"":__t)+'</span>\n		</div>\n		<div class="daily-paper ap-cf a-width">月报提交时间：<span class="data-daily" id="daily-paper">'+(null==(__t=month_date)?"":__t)+"</span>\n		</div>\n	</div>\n	\n</div>\n\n";return __p},this.JST["common/messages/message-approval-list"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\n<a href="javascript:void(0);" data-name="check-item" name="items">\n	<span class="ico"></span>\n</a><span>'+(null==(__t=Name)?"":__t)+"</span>\n\n";return __p},this.JST["common/messages/message-deletePoint"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="tt_plandetailreporttopbar"></div>\n<div class="tt_plandetailtopbar ap-title"><div class="higher-level"></div>\n<a class="close_pdtb" href="javascript:void(0)">关闭</a></div>\n<div class="delete-point"><img src="'+(null==(__t=imgUrl)?"":__t)+'" alt=""></div>\n\n\n';return __p},this.JST["common/messages/message-empty-approval"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="tt_plandetailreporttopbar"></div>\n<div class="tt_plandetailtopbar ap-title"><div class="higher-level">上级规定</div>\n<a class="approval-close close_pdtb" href="javascript:void(0)">关闭</a></div>\n<div class="_tt_plandetailcontent mar-top">\n	<div class="ap-cf a-width">计划审批规定 <span class="des">当计划发生以下变动时需上级审批</span></div>\n	<div class="approval_empty" data-name="empty-show"></div>\n\n	<div class=" ap-cf daily-papers-tip a-width">总结规定 <span class="des">超过规定时间提交算迟交</span></div>\n	<div class="daily-wraper">\n		<div class="daily-paper ap-cf a-width">日报提交时间：<span class="data-daily" id="daily-paper">'+(null==(__t=daily_date)?"":__t)+'</span>\n		</div>\n		<div class="daily-paper ap-cf a-width">周报提交时间：<span class="data-daily" id="daily-paper">'+(null==(__t=week_date)?"":__t)+'</span>\n		</div>\n		<div class="daily-paper ap-cf a-width">月报提交时间：<span class="data-daily" id="daily-paper">'+(null==(__t=month_date)?"":__t)+"</span>\n		</div>\n	</div>\n</div>";return __p},this.JST["common/my-team"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<ul class="membertree_one">\r\n	<li>\r\n		<a class="top" href="'+(null==(__t=lv_2.LinkUrl)?"":__t)+'" >\r\n\r\n			'+(null==(__t=_.convertImage({className:"radius_img50",src:lv_2.avatar.Medium,size:50,shape:"radius",name:lv_2.name,bgColor:lv_2.avatar.Color}))?"":__t)+"\r\n		</a>\r\n		",lv_3.length&&(__p+='\r\n\r\n		<div class="membertree_line"></div>\r\n		<div class="membertree_box">我的下级</div>\r\n		<ul class="membertree_second">\r\n			',_.each(lv_3,function(a){__p+='\r\n				<li>\r\n					<a href="'+(null==(__t=a.LinkUrl)?"":__t)+'" ',1==a.type&&(__p+='class="dotted_radius_parent"'),__p+=">\r\n						"+(null==(__t=_.convertImage({className:"radius_img50",src:a.avatar.Medium,size:50,shape:"radius",name:a.name,bgColor:a.avatar.Color}))?"":__t)+"\r\n					</a>\r\n			</li>\r\n			"}),__p+="\r\n		</ul>\r\n		"),__p+="\r\n	</li>\r\n</ul>\r\n\r\n";return __p},this.JST["common/new-search/new-search"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+=1==type?'\n<div class="btn-wrap-1">\n	<span class="tu-icon-close btn-1 cancel" data-name="cancel"></span>\n	<span class="tu-icon-search btn-1" data-name="search-form-btn"></span>\n</div>\n<div class="tu-input-default">\n    <label class="placeholder" for="'+(null==(__t=searchName)?"":__t)+'" style="padding-left: 5px;">请输入关键字</label>\n    <input type="text" id="'+(null==(__t=searchName)?"":__t)+'" autocomplete="off" style="padding-left: 5px;">\n</div>\n\n':'\n	<div class="tu-input-default">\n	    <label class="placeholder" for="'+(null==(__t=searchName)?"":__t)+'" style="padding-left: 5px;">请输入关键字</label>\n	    <input type="text" id="'+(null==(__t=searchName)?"":__t)+'" value="'+(null==(__t=routerData.filterKey)?"":__t)+'" autocomplete="off" style="padding-left: 5px;">\n	</div>\n	<div class="btn-wrap-2 clearfix">\n		<button class="tu-btn tu-btn-small tu-btn-sure" data-name="search-form-btn">搜索</button>\n		<a href="javascript:;" data-name="cancel">清空搜索</a>\n	</div>\n\n';return __p},this.JST["common/note/color-list"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="note_color_list">\n	',colorList&&_.each(colorList,function(a,b){__p+='\n			<a href="javascript:void(0)" ',b==activeNum&&(__p+='class="active"'),__p+='data-name="'+(null==(__t=b)?"":__t)+'" style="background-color:'+(null==(__t=a)?"":__t)+';"></a>\n		'}),__p+="\n</div>";return __p},this.JST["common/note/note-add"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="note_add"><a href="javascript:void(0)">+ 新建标签</a></div>\n<div class="note_add_pop">\n	<div class="note_add_content">\n		<textarea></textarea>\n	</div>\n	<div class="note_foot">\n		<a href="javascript:void(0)" class="note_set_color"></a>\n		<div class="note_btn">\n			<a href="javascript:void(0)"  class="note_sure">确定</a>\n			<a href="javascript:void(0)" class="note_cancel">取消</a>\n		</div>\n	</div>\n</div>';return __p},this.JST["common/note/note-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="note_li" style="background-color:'+(null==(__t=color)?"":__t)+'">\n	<textarea style="background-color:'+(null==(__t=color)?"":__t)+';resize:none;" data-name="content">'+(null==(__t=_.substring(content,20,!0))?"":__t)+'</textarea>\n	<div class="note_close">\n		<a href="javascript:void(0)" data-name="edit-note-del" class="icon-dialog-closed"></a>\n	</div>\n	<div class="note_edit" data-name="note-edit">\n		<a href="javascript:void(0)" class="note_set_color" data-name="edit-note-color" style="background:'+(null==(__t=color)?"":__t)+'"></a>\n		<div class="note_btn">\n			<a href="javascript:void(0)"  class="note_sure" data-name="edit-note-sure">确定</a>\n			<a href="javascript:void(0)" class="note_cancel" data-name="edit-note-cancel">取消</a>\n		</div>\n	</div>\n</div>';return __p},this.JST["common/note/note-list"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="note_container">\n	\n	<div class="note_list">\n		',1==curPage&&(__p+='\n				<div class="note_add">\n					<a href="javascript:void(0)" data-name="note-add">+ 新建便签</a>\n				</div>\n			'),__p+='\n		<div class="note_add_pop" data-name="note-add-pop">\n			<div class="note_add_content" ',color&&(__p+='style="background:'+(null==(__t=color)?"":__t)+'"'),__p+='>\n					<textarea data-name="note-add-content" ',color&&(__p+='style="resize:none;background:'+(null==(__t=color)?"":__t)+'"'),__p+='></textarea>\n			</div>\n			<div class="note_foot">\n				<a href="javascript:void(0)" class="note_set_color" ',color&&(__p+='style="background:'+(null==(__t=color)?"":__t)+'"'),__p+=' data-name="add-note-color"></a>\n				<div class="note_btn">\n					<a href="javascript:void(0)"  class="note_sure" data-name="add-note-sure">确定</a>\n					<a href="javascript:void(0)" class="note_cancel" data-name="add-note-cancel">取消</a>\n				</div>\n			</div>\n		</div>	\n		<ul></ul>\n		',totalPage>1&&(__p+='\n			<div class="note_page">	\n				<a href="javascript:void(0)" class="icon-arrow-right-2t ',curPage<totalPage?__p+="arrow-right-hover-2t":curPage==totalPage&&(__p+="icon-arrow-right-disabled"),__p+='" data-name="next"></a>\n				<a href="javascript:void(0)" class="icon-arrow-left-2t ',curPage>1?__p+="arrow-left-hover-2t":1==curPage&&(__p+="icon-arrow-left-disabled"),__p+='" data-name="prev"></a>\n			</div>\n		'),__p+="\n		\n	</div>\n</div>";return __p},this.JST["common/onlineservice/onlineservice"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<li><a class="right-suspend-item" href="javascript:;">QQ咨询</a></li>\n<li><a class="right-suspend-item" href="javascript:;">帮助中心</a></li>';return __p},this.JST["common/operate-history"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\n<div class="item '+(null==(__t=isLast?"last":"")?"":__t)+'">\n	<span class="'+(null==(__t="icon-end")?"":__t)+'"></span>\n	<span class="day l">'+(null==(__t=day)?"":__t)+'</span>\n	<span class="time l">'+(null==(__t=time)?"":__t)+'</span>\n	<div class="right-wraper l">\n		<div class="right">\n			<span class="name l">'+(null==(__t=_.substring(PublishUser.Name,10,!0))?"":__t)+'</span>\n			<span class="detail l '+(null==(__t=isPushScreen?"isPushScreen":"")?"":__t)+'">'+(null==(__t=Content)?"":__t)+'</span>\n		</div>\n		<!-- <div class="reason">\n			理由:<span class="txt">打卡机的绿卡就登录啊了肯德基绿卡大刻录机都是啊</span>\n			<span class="icon-frame-top"></span>\n		</div> -->\n	</div>\n	\n	\n</div>\n\n';return __p},this.JST["common/page-regions/footer"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="box_foot">\n	<span class="copyright_foot">京ICP备05051632号 京公安网备110108002767号</span>   \n	<span class="link_foot">\n		<a href="'+(null==(__t=HelpUrl)?"":__t)+'" style="margin-left:0" target="_blank">帮助中心</a>\n		<a href="'+(null==(__t=HelpUrl)?"":__t)+'/ProIntro/TitaIntroduce">使用手册</a>\n		<a href="'+(null==(__t=HelpUrl)?"":__t)+'/App/MobilePageDescribe" target="_blank">手机客户端</a>\n		<a href="'+(null==(__t=HelpUrl)?"":__t)+'/CooperationZone/Index" target="_blank" >媒体报道</a>\n		<a href="http://weibo.com/titacom" target="_blank">官方微博</a>\n		<a href="/blog" target="_blank">官方博客</a>\n		<a href="'+(null==(__t=HelpUrl)?"":__t)+'/CommonProblem/SafyAndPrivate" target="_blank">安全与隐私</a>\n		<a href="'+(null==(__t=HelpUrl)?"":__t)+'/ContactUs/Index" target="_blank">联系我们</a>\n	</span>\n</div>\n\n\n';return __p},this.JST["common/page-regions/header-tita-extention"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<li class="guide_tthn ico_tthn">\n	<a href="javascript:void(0);" original-title="tita入门">tita入门</a>\n</li>\n',isShowInviteBtn&&(__p+='\n<li class="inivte_tthn ico_tthn">\n	<!-- <a href="/u/'+(null==(__t=UserInfo.Id)?"":__t)+'/Invite/InviteMoreIndex" data-name="invite-member" original-title="邀请同事">邀请同事</a> -->\n	<a href="'+(null==(__t=url)?"":__t)+'" data-name="invite-member" original-title="邀请同事">邀请同事</a>\n</li>\n'),__p+="\n",isShowCalendar&&(__p+='\n<li class="calendar_tthn">\n	<a href="#calendar">日程</a>\n</li>\n'),__p+="\n\n\n\n\n";return __p},this.JST["common/page-regions/header"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=(_.escape,Array.prototype.join);with(obj)__p+=tenantInfo.Logo&&1==routerData.appid?'\n<a class="logo" href="/u/'+(null==(__t=loginUserInfo.Id)?"":__t)+'/Home" title="返回首页" data-name="logo"><img src="" alt="" /></a>\n':'\n<a class="logo logo_'+(null==(__t=routerData.appid)?"":__t)+'" href="/u/'+(null==(__t=loginUserInfo.Id)?"":__t)+'/Home" title="返回首页" data-name="logo"></a>\n',__p+='\n<span class="brand" data-name="brand">\n	'+(null==(__t=tenantInfo.Abbreviation)?"":__t)+"\n</span>\n","undefined"!=typeof headerAppData&&headerAppData.length>0&&(__p+='\n<a class="italent_show_app_container"  href="javascript:void(0)"><span class="italent_show_app"></span></a>\n'),__p+='\n\n\n<ul class="_tt_headnav" data-name="head-nav">\n	\n	',isShowTask&&(__p+='\n	<li class="task_tthn">\n		<a href="javascript:void(0);">任务</a>\n	</li>\n	'),__p+='\n	<li class="notice_tthn" style="display:block">\n		<a href="javascript:void(0);" tipcont="暂无提醒">提醒</a>\n	</li>\n	<li class="msg_tthn">\n		<a href="javascript:void(0);">消息</a>\n	</li>\n	<li class="logout_tthn">\n		<a href="javascript:void(0);" class="avatar_ltthn">\n\n			'+(null==(__t=_.convertImage({className:"radius_img30",src:loginUserInfo.Avatar,size:30,shape:"radius",name:loginUserInfo.Name,bgColor:loginUserInfo.UserAvatar.Color}))?"":__t)+'\n\n		</a>\n		<a href="javascript:void(0);" class="namewrap_tthn"><span class="name_tthn">',print(loginUserInfo.Name.substring(0,3)),__p+='</span><b class="caret"></b></a>\n		<ul class="menu_ltthn">\n			<li class="profile_ltthn"><a href="#italent/home?appid='+(null==(__t=routerData.appid)?"":__t)+"&apptype="+(null==(__t=routerData.apptype)?"":__t)+'&name=TalentProfile-record">个人主页</a></li>\n			<li class="archives_ltthn"><a href="#more/archives?appid='+(null==(__t=routerData.appid)?"":__t)+"&apptype="+(null==(__t=routerData.apptype)?"":__t)+'">简档编辑</a></li>\n			<li class="set_ltthn"><a href="/u/'+(null==(__t=loginUserInfo.Id)?"":__t)+'/Setting/Avatar">个人设置</a></li>\n			<li><a data-name="logout" href="/Account/Logout">退出登录</a></li>\n		</ul>\n	</li>\n</ul>\n\n\n<div class="tt_headsearch" data-name="head-search">\n	<div class="text_tths"><input type="search"><label class="label_tths">搜索'+(null==(__t=i18n.workmate_1)?"":__t)+"、动态、"+(null==(__t=i18n.work_1)?"":__t)+'等</label></div>\n	<a href="javascript:void(0);" class="btn_tths"></a>\n</div>\n',isShowPlatForm&&(__p+='\n<a href="#'+(null==(__t=homeUrl)?"":__t)+'" class="platform_th" data-name="head-platform"></a>\n');return __p},this.JST["common/page-regions/sidebar"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<a href="'+(null==(__t=url)?"":__t)+'" class="'+(null==(__t=type_class)?"":__t)+'_ttsn"> <strong></strong><span>'+(null==(__t=name)?"":__t)+"</span></a>\n";return __p},this.JST["common/plan/plan-create"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\n<form class="tt_createnewitem">\n	<div class="input-default input-large">\n		<div class="klass_cni">\n			<div class="klass_innder" data-name="new-klass">\n				<span data-name="new-klass-name" class="klass_name">类别</span><span class="icon-arrow-down"></span>\n			</div>\n		</div>\n		<div>\n			<label class="name_label">输入'+(null==(__t=i18n.task_1)?"":__t)+'名称</label>\n			<input name="new-content" type="text" autocomplete=off class="name" />\n		</div>\n	</div>\n	<a href="javascript:void(0);" class="submint" >发布</a>\n</form>\n';return __p},this.JST["common/plan/plan-data-filter-dropdown"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div data-name="filter-all"><a href="javascript:void(0);" class="checkbox ',allChecked&&(__p+="checkbox-checked"),__p+='"><span class="ico"></span></a><span>全选</span></div>\n<ul>\n	',_.each(data,function(a){__p+='\n	<li id="'+(null==(__t=a.Id)?"":__t)+'">\n		',"undefined"!=typeof a.Checked&&a.Checked?(__p+='\n		<a href="javascript:void(0);" title="" class="checkbox checkbox-checked" data-name="input-checkbox"><span class="ico"></span></a><span ',"undefined"!=typeof a.Type&&1==a.Type&&(__p+='style="color:#8a8a8a;" data-name="dotted-tips"'),__p+=">"+(null==(__t=a.Name)?"":__t)+"</span>\n		"):(__p+='\n		<a href="javascript:void(0);" title="" class="checkbox" data-name="input-checkbox"><span class="ico"></span></a><span ',"undefined"!=typeof a.Type&&1==a.Type&&(__p+='style="color:#8a8a8a;" data-name="dotted-tips"'),__p+=">"+(null==(__t=a.Name)?"":__t)+"</span>\n		"),__p+="\n	</li>\n	"}),__p+='\n</ul>\n<div class="action_pdfd"><button class="btn btn-sure" data-name="submit">确定</button></div>';return __p},this.JST["common/plan/plan-data-filter"]=function(obj){obj||(obj={});
{var __p="";_.escape,Array.prototype.join}with(obj)__p+='<ul class="list_df">\n	',status&&(__p+='\n	<li class="status status-item" data-type="status"><span>状态</span><i class="icon-arrow-down-2t"></i></li>\n	'),__p+="\n	",Class&&(__p+='\n	<li class="class status-item" data-type="class"><span>类别</span><i class="icon-arrow-down-2t"></i></li>\n	'),__p+='\n</ul>\n\n<div class="filter-right">\n	',isShowDetail&&(__p+='\n	<div class="look_by_mark">\n		<a href="javascript:void(0);" title="" class="checkbox ',detail_checked&&(__p+="checkbox-checked"),__p+='" data-name="detail-mode"><span class="ico"></span></a>详情模式\n	</div>\n	'),__p+="\n	",memberType&&(__p+='\n	<li class="memberType status-item" data-type="memberType"><span>范围</span><i class="icon-arrow-down-2t"></i></li>\n	'),__p+="\n	",member&&(__p+='\n		<div class="member status-item" data-type="member">\n			<span>人员</span>\n			<i class="icon-arrow-down-2t"></i>\n		</div>\n	'),__p+='\n	\n	<div class="sort" data-type="class" data-name="sort">\n		<span>排序</span><i class="icon-arrow-down-2t"></i>\n	</div>\n	\n</div>\n\n\n\n';return __p},this.JST["common/plan/plan-item-status"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\r\n<ul>\r\n	<li status="2"><a href="javascript:void(0);" title="">\r\n		<span class="ico icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+'-2"></span>已完成\r\n	</a></li>\r\n	<li status="1"><a href="javascript:void(0);" title="" >\r\n		<span class="ico icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+'-1"></span>进行中</a></li>\r\n	<li status="4"><a href="javascript:void(0);" title="" >\r\n		<span class="ico icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+'-4"></span>已取消\r\n	</a></li>\r\n	<li status="3"><a href="javascript:void(0);" title="" >\r\n		<span class="ico icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+'-3"></span>已延迟\r\n	</a></li>\r\n	<li status="6"><a href="javascript:void(0);" title="" >\r\n		<span class="ico icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+'-6"></span>暂停中\r\n	</a></li>\r\n	<li status="0"><a href="javascript:void(0);" title="" >\r\n		<span class="ico icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+'-0"></span>未开始\r\n	</a></li>\r\n</ul>\r\n\r\n\r\n\r\n\r\n\r\n';return __p},this.JST["common/plan/plan-list-composite"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="list-container">\n\n</div>\n<div class="showmore" data-name="showmore">\n	<a href="javascript:void(0);"   class="text_fsm">\n		<span>查看更多</span>\n	</a>\n</div>';return __p},this.JST["common/plan/plan-list-empty"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="content">\r\n	',to_user_id==loginUserId?(__p+="\r\n\r\n\r\n		","bench"===hash?(__p+='\r\n			<p><span class="text">\r\n				',__p+=isThisDay===!0?"\r\n					今天":"当天",__p+="还没有"+(null==(__t=i18n.plan_1)?"":__t)+'，你可以:</span></p>\r\n\r\n			<p><span class="text">1.立即在当前发布</span></p>\r\n\r\n			<p><span class="text">2.在<a href="#plan">'+(null==(__t=i18n.plan_1)?"":__t)+"表</a>下发布,设置对应时间</span></p>\r\n\r\n		"):__p+='\r\n			<span class="text">把'+(null==(__t=i18n.plan_1)?"":__t)+"写下来，你就已经成功了一半！</span>\r\n		",__p+="\r\n	"):(__p+="\r\n		\r\n		",__p+="undefined"!=typeof IsNotify&&1==IsNotify?'\r\n		<span class="text">Ta还没有写'+(null==(__t=i18n.plan_1)?"":__t)+'，你可以</span>\r\n		<a user-id="'+(null==(__t=to_user_id)?"":__t)+'" href="javascript:void(0)" class="btnnotice btn btn-sure">正式通知Ta写'+(null==(__t=i18n.plan_1)?"":__t)+"</a>\r\n		":'\r\n		<span class="text">Ta还没有写'+(null==(__t=i18n.plan_1)?"":__t)+"</span>\r\n		",__p+="\r\n	"),__p+="\r\n</div>";return __p},this.JST["common/plan/plan-list-item-v2"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)isChildTask&&(__p+='\n	\n	<span class="border-left"></span>\n	<span class="icon-task-left-border"></span>\n'),__p+='\n\n<div class="plan_list_li '+(null==(__t=isChildTask?"p1":isShowKclass?"p3":"p2")?"":__t)+'">\n	<div class="right_ttpl">\n		',2==status&&evaluateModel?__p+="\n			"+(null==(__t=_.evaluation(evaluateModel))?"":__t)+"\n		":(__p+="\n			",__p+=cycleId>0?'\n				<span class="icon-task-cycle" data-name="task-cycle" data-id="'+(null==(__t=taskId)?"":__t)+'" data-cys="'+(null==(__t=cycleId)?"":__t)+'"></span>\n			':'\n				<span class="cycle-placeholder"></span>\n			',__p+="\n			",isLongTerm?__p+='\n				<span class="date">长期</span>\n			':(__p+="\n				",__p+=isDeadLine?'\n					<span class="date expire">'+(null==(__t=DeadLine)?"":__t)+"</span>\n				":2==status?'\n					<span class="date">'+(null==(__t=DeadLine)?"":__t)+"</span>\n				":'\n					<span class="date '+(null==(__t=1==fromNow?"warn":"")?"":__t)+'">'+(null==(__t=fromNow>0&&fromNow<4?"剩余"+fromNow+"天":DeadLine)?"":__t)+"</span>\n				",__p+="\n			"),__p+='	\n			<span class="principle">'+(null==(__t=context.subString(principalUser.name,6,!0,2))?"":__t)+"</span>\n			",needAlarm&&(__p+="\n				",__p+=0==cycleId?'\n					<span data-name="notice_plan" class="notice-wraper" original-title="'+(null==(__t=IsRemind?"已设提醒":"设置提醒")?"":__t)+'" data=\'{"objid":"'+(null==(__t=taskId)?"":__t)+'","objType":"'+(null==(__t=objType)?"":__t)+'"}\'>\n						<span class="sup-notice icon-clock'+(null==(__t=IsRemind?"-active":"")?"":__t)+'"></span>\n					</span>\n				':'\n					<span class="sup-notice-placeholder"></span>\n				',__p+="\n\n			"),__p+="\n			",isShowStar&&(__p+="\n				",__p+=isMark?'\n					<span class="sup-set-mark icon-star-active" original-title="取消星标" data-id="'+(null==(__t=taskId)?"":__t)+'" data-name="set-mark"></span>\n				':'\n					<span class="sup-set-mark icon-star" original-title="标为星标" data-id="'+(null==(__t=taskId)?"":__t)+'" data-name="set-mark"></span>\n				',__p+="\n			"),__p+="\n			",needAlarm&&(__p+="\n				",__p+=isShowDelete&&Deleteable?'\n					<span class="sup-delete"  data-name="plan-delete" data-id="'+(null==(__t=taskId)?"":__t)+'">删除</span>\n				':'	\n					<span class="sup-delete-placeholder"></span>\n				',__p+="\n			"),__p+="\n		"),__p+='\n	</div>\n\n	<div class="left_left left_ttp_'+(null==(__t=type)?"":__t)+'">\n		',(hasSubTask||Tasks&&Tasks.length)&&(__p+="\n			",__p+=Tasks&&Tasks.length?'\n				<span data-id="'+(null==(__t=taskId)?"":__t)+'" data-name="packup" class="packup '+(null==(__t=currentDeploy?"icon-minus":"icon-plus")?"":__t)+'"></span>\n			':'\n				<span data-id="'+(null==(__t=taskId)?"":__t)+'" data-name="packup" class="packup icon-plus"></span>\n			',__p+="\n			\n		"),__p+="\n		",__p+=isApply?'\n			<span class="status_ttpl_wraper" style="height:1px;"></span>\n			<span class="apply_status"></span>\n		':'\n			<span class="status_ttpl_wraper">	\n				<a href="javascript:void(0);" class="status_ttpl icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+"-"+(null==(__t=status)?"":__t)+(null==(__t=editStatusable?"":"-disable")?"":__t)+" "+(null==(__t=editStatusable?"":"status_disabled")?"":__t)+'" original-title="'+(null==(__t=StatusTip)?"":__t)+'" data-id="'+(null==(__t=taskId)?"":__t)+'"><span class="ico"></span></a>\n				\n			</span>\n		',__p+="\n		",isShowKclass&&(__p+="\n			",__p+=editLableable?'\n				<div class="klass_box_ttpl pointer" data-id="'+(null==(__t=taskId)?"":__t)+'" data-name="update-klass" data-lab="'+(null==(__t=labelId)?"":__t)+'" data-type="'+(null==(__t=labelType)?"":__t)+'">\n			':'\n				<div class="klass_box_ttpl">\n			',__p+='\n					<div class="kclass" data-name="kclass-area"></div>\n				',labelName&&"未分类"!=labelName?(__p+="\n					",__p+=4==labelType?'\n						<span class="icon-work-'+(null==(__t=402==appId?"target":203==appId?"position":902==appId?"icon-app-xxs-902":"small")?"":__t)+'"></span><span class="klass_ttpl">'+(null==(__t=_.substringWithM(labelName,8,!1))?"":__t)+"</span>  \n					":'\n						<span class="klass_ttpl">'+(null==(__t=_.substringWithM(labelName,10,!1))?"":__t)+"</span>  \n					",__p+="\n				"):__p+='\n					<span class="klass_ttpl none_klass_ttpl">未分类</span>  \n				',__p+="\n				</div>\n			"),__p+='\n			\n			\n			\n			\n	</div>\n	<div class="left_ttpl '+(null==(__t="group"==type?"group":"")?"":__t)+"  "+(null==(__t=isChildTask?"p1":isShowKclass?"p3":"p2")?"":__t)+'">\n		\n		',__p+=2==status||4==status||6==status?'\n			\n				<a  href="'+(null==(__t=url)?"":__t)+'" data-id="'+(null==(__t=taskId)?"":__t)+'" data-name="taskName" class="'+(null==(__t=isChildTask?"child":"")?"":__t)+' task-name disable">'+(null==(__t=taskName)?"":__t)+"</a>\n			\n		":'\n				<a  href="'+(null==(__t=url)?"":__t)+'"  data-id="'+(null==(__t=taskId)?"":__t)+'" data-name="taskName" class="'+(null==(__t=isChildTask?"child":"")?"":__t)+"  task-name "+(null==(__t=isDeadLine?"warn":"")?"":__t)+'">'+(null==(__t=taskName)?"":__t)+"</a>\n		",__p+='\n		<div class="all-icons">\n			',(203==appId||902==appId)&&(__p+='\n				<span class="icon-position icon-position-'+(null==(__t=taskType)?"":__t)+'">\n					'+(null==(__t={6:"面",7:"offer",8:"职",16:"筛",20:"审",21:"申"}[taskType])?"":__t)+"\n				</span>\n			"),__p+="\n			",isShowOwnerTag&&(__p+="\n				",__p+=1==userRelation?'\n					<span class="mine task-tag">'+(null==(__t=selfView?"我":"ta")?"":__t)+"派发的</span>\n				":2==userRelation?'\n					<span class="task-tag">上级安排</span>\n				':3==userRelation?'\n					<span class="join task-tag">'+(null==(__t=selfView?"我":"ta")?"":__t)+"参与的</span>\n				":'\n					<!-- <span class="task-tag-placeholder"></span> -->\n				',__p+="\n			"),__p+="\n			",isShowPercent&&counter.taskTotal&&(__p+='\n			<span class="percent task-tag" original-title="下一级任务（完成数/总数）">\n				<span class="icon-task"></span>\n				'+(null==(__t=counter.finishTaskTotal)?"":__t)+"/"+(null==(__t=counter.taskTotal)?"":__t)+"\n			</span>\n			"),__p+="\n\n			",counter.workTimeTotal&&(__p+='\n				<span class="work_hour">'+(null==(__t=counter.workTimeTotal)?"":__t)+"h</span>\n			"),__p+="\n			",detail_checked||(__p+="\n				",counter.taskTotal>0&&!isShowPercent&&(__p+='\n					<span class="icon-plan-task icon" original-title="有任务"></span>\n					<span class="num">'+(null==(__t=counter.taskTotal)?"":__t)+"</span>\n\n				"),__p+="\n				",counter.commentTotal>0&&social&&(__p+='\n					<span class="icon-plan-talk icon" original-title="有沟通"></span>\n					<span class="num">'+(null==(__t=counter.commentTotal)?"":__t)+"</span>\n				"),__p+="\n				",counter.experienceTotal>0&&(__p+='\n					<span class="icon-plan-summarize icon" original-title="有心得"></span>\n					<span class="num">'+(null==(__t=counter.experienceTotal)?"":__t)+"</span>\n				"),__p+="\n				",counter.businessTripTotal>0&&IsUseBusinessTrip&&(__p+='\n					<span class="icon-plan-trip icon" original-title="有出差"></span>\n					<span class="num">'+(null==(__t=counter.businessTripTotal)?"":__t)+"</span>\n				"),__p+="\n				",counter.meetTotal>0&&IsUseMeet&&(__p+='\n					<span class="icon-plan-meeting icon" original-title="有会议"></span>\n					<span class="num">'+(null==(__t=counter.meetTotal)?"":__t)+"</span>\n				"),__p+="\n				\n				\n			"),__p+="\n		</div>\n		\n	</div>	\n</div>\n\n",detail_checked&&(__p+='\n<div class="plan_list_total ',(hasSubTask||Tasks&&Tasks.length)&&currentDeploy&&(__p+="border-over"),__p+=" "+(null==(__t=isChildTask?"p1":isShowKclass?"p3":"p2")?"":__t)+'">\n	<div class="plan_total_left">\n		<span>'+(null==(__t=i18n.task_1)?"":__t)+"&nbsp;"+(null==(__t=counter.taskTotal)?"":__t)+"</span>\n		",social&&(__p+="\n			<span>沟通&nbsp;"+(null==(__t=counter.commentTotal)?"":__t)+"</span>\n		"),__p+="\n		<span>心得&nbsp;"+(null==(__t=counter.experienceTotal)?"":__t)+"</span>\n		",IsUseBusinessTrip&&(__p+="\n			<span>出差&nbsp;"+(null==(__t=counter.businessTripTotal)?"":__t)+"</span>\n		"),__p+="\n		",IsUseMeet&&(__p+="\n			<span>会议&nbsp;"+(null==(__t=counter.meetTotal)?"":__t)+"</span>\n		"),__p+='\n		\n		\n	</div>\n	<div class="plan_total_right">\n		<span class="start-date">创建于'+(null==(__t=moment(createDate).format("YYYY/MM/DD"))?"":__t)+"</span>\n		",0==cycleId&&(__p+="\n			",isRemind?(__p+='\n				<span data-name="notice_plan"  class="notice-wraper" original-title="已设提醒" data=\'{"objid":"'+(null==(__t=taskId)?"":__t)+'","objType":"'+(null==(__t=objType)?"":__t)+'"}\'>\n					<span class="notice icon-clock-active"></span>\n					<span class="txt">',time&&(__p+="于"+(null==(__t=time)?"":__t)+" "),__p+="提醒我</span>\n				</span>\n			"):__p+='\n				<span data-name="notice_plan" class="notice-wraper" original-title="设置提醒" data=\'{"objid":"'+(null==(__t=taskId)?"":__t)+'","objType":"'+(null==(__t=objType)?"":__t)+'"}\'>\n					<span class="notice icon-clock"></span>\n					<span class="txt">提醒我</span>\n				</span>\n				\n			',__p+="\n		"),__p+="\n		",isShowDelete&&(__p+="\n			",__p+=deleteable?'\n				<span class="delete icon-delete" original-title="删除" data-name="plan-delete" data-id="'+(null==(__t=taskId)?"":__t)+'"></span>\n			':'	\n				<span class="sub-delete-placeholder"></span>\n			',__p+="\n		"),__p+="\n	</div>\n</div>\n"),__p+='\n<div class="child-list-wraper '+(null==(__t=isChildTask?"p3":isShowKclass?"p1":"p2")?"":__t)+'">\n	\n	<ul class="child-list '+(null==(__t=currentDeploy?"":"hide")?"":__t)+'  "></ul>\n</div>\n\n\n';return __p},this.JST["common/plan/plan-list-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)isChildTask&&(__p+='\r\n	\r\n	<span class="border-left"></span>\r\n	<span class="icon-task-left-border"></span>\r\n'),__p+='\r\n\r\n<div class="plan_list_li '+(null==(__t=isChildTask?"p1":isShowKclass?"p3":"p2")?"":__t)+'">\r\n	<div class="right_ttpl">\r\n		',2==Status&&EvaluateModel?__p+="\r\n			"+(null==(__t=_.evaluation(EvaluateModel))?"":__t)+"\r\n		":(__p+="\r\n			",__p+=CycleId>0?'\r\n				<span class="icon-task-cycle" data-name="task-cycle" data-id="'+(null==(__t=Id)?"":__t)+'" data-cys="'+(null==(__t=CycleId)?"":__t)+'"></span>\r\n			':'\r\n				<span class="cycle-placeholder"></span>\r\n			',__p+="\r\n			",IsLongTerm?__p+='\r\n				<span class="date">长期</span>\r\n			':(__p+="\r\n				",__p+=IsDeadLine?'\r\n					<span class="date expire">'+(null==(__t=DeadLine)?"":__t)+"</span>\r\n				":2==Status?'\r\n					<span class="date">'+(null==(__t=DeadLine)?"":__t)+"</span>\r\n				":'\r\n					<span class="date '+(null==(__t=1==fromNow?"warn":"")?"":__t)+'">'+(null==(__t=fromNow>0&&fromNow<4?"剩余"+fromNow+"天":DeadLine)?"":__t)+"</span>\r\n				",__p+="\r\n			"),__p+='	\r\n			<span class="principle">'+(null==(__t=context.subString(PrincipalUser.Name,6,!0,2))?"":__t)+"</span>\r\n			",needAlarm&&(__p+="\r\n				",__p+=0==CycleId?'\r\n					<span data-name="notice_plan" class="notice-wraper" original-title="'+(null==(__t=IsRemind?"已设提醒":"设置提醒")?"":__t)+'" data=\'{"objid":"'+(null==(__t=Id)?"":__t)+'","objType":"'+(null==(__t=objType)?"":__t)+'"}\'>\r\n						<span class="sup-notice icon-clock'+(null==(__t=IsRemind?"-active":"")?"":__t)+'"></span>\r\n					</span>\r\n				':'\r\n					<span class="sup-notice-placeholder"></span>\r\n				',__p+="\r\n\r\n			"),__p+="\r\n			",isShowStar&&(__p+="\r\n				",__p+=IsMark?'\r\n					<span class="sup-set-mark icon-star-active" original-title="取消星标" data-id="'+(null==(__t=Id)?"":__t)+'" data-name="set-mark"></span>\r\n				':'\r\n					<span class="sup-set-mark icon-star" original-title="标为星标" data-id="'+(null==(__t=Id)?"":__t)+'" data-name="set-mark"></span>\r\n				',__p+="\r\n			"),__p+="\r\n			",needAlarm&&(__p+="\r\n				",__p+=isShowDelete&&Deleteable?'\r\n					<span class="sup-delete"  data-name="plan-delete" data-id="'+(null==(__t=Id)?"":__t)+'">删除</span>\r\n				':'	\r\n					<span class="sup-delete-placeholder"></span>\r\n				',__p+="\r\n			"),__p+="\r\n		"),__p+='\r\n	</div>\r\n\r\n	<div class="left_left left_ttp_'+(null==(__t=type)?"":__t)+'">\r\n		',(HasSubTask||Tasks&&Tasks.length)&&(__p+="\r\n			",__p+=Tasks&&Tasks.length?'\r\n				<span data-id="'+(null==(__t=Id)?"":__t)+'" data-name="packup" class="packup '+(null==(__t=currentDeploy?"icon-minus":"icon-plus")?"":__t)+'"></span>\r\n			':'\r\n				<span data-id="'+(null==(__t=Id)?"":__t)+'" data-name="packup" class="packup icon-plus"></span>\r\n			',__p+="\r\n			\r\n		"),__p+="\r\n		",__p+=IsApply?'\r\n			<span class="status_ttpl_wraper" style="height:1px;"></span>\r\n			<span class="apply_status"></span>\r\n		':'\r\n			<span class="status_ttpl_wraper">	\r\n				<a href="javascript:void(0);" class="status_ttpl icon-taskStatus'+(null==(__t=isChildTask?"-s":"")?"":__t)+"-"+(null==(__t=Status)?"":__t)+(null==(__t=EditStatusable?"":"-disable")?"":__t)+" "+(null==(__t=EditStatusable?"":"status_disabled")?"":__t)+'" original-title="'+(null==(__t=StatusTip)?"":__t)+'" data-id="'+(null==(__t=Id)?"":__t)+'"><span class="ico"></span></a>\r\n				\r\n			</span>\r\n		',__p+="\r\n		",isShowKclass&&(__p+="\r\n			",__p+=EditLableable?'\r\n				<div class="klass_box_ttpl pointer" data-id="'+(null==(__t=Id)?"":__t)+'" data-name="update-klass" data-lab="'+(null==(__t=LabId)?"":__t)+'" data-type="'+(null==(__t=LabType)?"":__t)+'">\r\n			':'\r\n				<div class="klass_box_ttpl">\r\n			',__p+='\r\n					<div class="kclass" data-name="kclass-area"></div>\r\n				',LabName&&"未分类"!=LabName?(__p+="\r\n					",__p+=4==LabType?'\r\n						<span class="icon-work-'+(null==(__t=402==AppId?"target":203==AppId?"position":"small")?"":__t)+'"></span><span class="klass_ttpl">'+(null==(__t=_.substringWithM(LabName,8,!1))?"":__t)+"</span>  \r\n					":'\r\n						<span class="klass_ttpl">'+(null==(__t=_.substringWithM(LabName,10,!1))?"":__t)+"</span>  \r\n					",__p+="\r\n				"):__p+='\r\n					<span class="klass_ttpl none_klass_ttpl">未分类</span>  \r\n				',__p+="\r\n				</div>\r\n			"),__p+='\r\n			\r\n			\r\n			\r\n			\r\n	</div>\r\n	<div class="left_ttpl '+(null==(__t="group"==type?"group":"")?"":__t)+"  "+(null==(__t=isChildTask?"p1":isShowKclass?"p3":"p2")?"":__t)+'">\r\n		\r\n		',__p+=2==Status||4==Status||6==Status?'\r\n			\r\n				<a  href="'+(null==(__t=url)?"":__t)+'" data-name="taskName" class="'+(null==(__t=isChildTask?"child":"")?"":__t)+' task-name disable">'+(null==(__t=Name)?"":__t)+"</a>\r\n			\r\n		":'\r\n				<a  href="'+(null==(__t=url)?"":__t)+'" data-name="taskName" class="'+(null==(__t=isChildTask?"child":"")?"":__t)+"  task-name "+(null==(__t=IsDeadLine?"warn":"")?"":__t)+'">'+(null==(__t=Name)?"":__t)+"</a>\r\n		",__p+='\r\n		<div class="all-icons">\r\n			',203==AppId&&(__p+='\r\n				<span class="icon-position icon-position-'+(null==(__t=TaskType)?"":__t)+'">\r\n					'+(null==(__t={6:"面",7:"offer",8:"职",16:"筛",21:"申"}[TaskType])?"":__t)+"\r\n				</span>\r\n			"),__p+="\r\n			",isShowOwnerTag&&(__p+="\r\n				",__p+=1==UserRelation?'\r\n					<span class="mine task-tag">'+(null==(__t=selfView?"我":"ta")?"":__t)+"派发的</span>\r\n				":2==UserRelation?'\r\n					<span class="task-tag">上级安排</span>\r\n				':3==UserRelation?'\r\n					<span class="join task-tag">'+(null==(__t=selfView?"我":"ta")?"":__t)+"参与的</span>\r\n				":'\r\n					<!-- <span class="task-tag-placeholder"></span> -->\r\n				',__p+="\r\n			"),__p+="\r\n			",isShowPercent&&SubTaskCount&&(__p+='\r\n			<span class="percent task-tag" original-title="下一级任务（完成数/总数）">\r\n				<span class="icon-task"></span>\r\n				'+(null==(__t=FinishSubTaskCount)?"":__t)+"/"+(null==(__t=SubTaskCount)?"":__t)+"\r\n			</span>\r\n			"),__p+="\r\n\r\n			",PlanCounter.WorkTimeTotal&&(__p+='\r\n				<span class="work_hour">'+(null==(__t=PlanCounter.WorkTimeTotal)?"":__t)+"h</span>\r\n			"),__p+="\r\n			",detail_checked||(__p+="\r\n				",PlanCounter.TaskTotal>0&&!isShowPercent&&(__p+='\r\n					<span class="icon-plan-task icon" original-title="有任务"></span>\r\n					<span class="num">'+(null==(__t=PlanCounter.TaskTotal)?"":__t)+"</span>\r\n\r\n				"),__p+="\r\n				",PlanCounter.CommentTotal>0&&social&&(__p+='\r\n					<span class="icon-plan-talk icon" original-title="有沟通"></span>\r\n					<span class="num">'+(null==(__t=PlanCounter.CommentTotal)?"":__t)+"</span>\r\n				"),__p+="\r\n				",PlanCounter.ExperienceTotal>0&&(__p+='\r\n					<span class="icon-plan-summarize icon" original-title="有心得"></span>\r\n					<span class="num">'+(null==(__t=PlanCounter.ExperienceTotal)?"":__t)+"</span>\r\n				"),__p+="\r\n				",PlanCounter.BusinessTripTotal>0&&IsUseBusinessTrip&&(__p+='\r\n					<span class="icon-plan-trip icon" original-title="有出差"></span>\r\n					<span class="num">'+(null==(__t=PlanCounter.BusinessTripTotal)?"":__t)+"</span>\r\n				"),__p+="\r\n				",PlanCounter.MeetTotal>0&&IsUseMeet&&(__p+='\r\n					<span class="icon-plan-meeting icon" original-title="有会议"></span>\r\n					<span class="num">'+(null==(__t=PlanCounter.MeetTotal)?"":__t)+"</span>\r\n				"),__p+="\r\n				\r\n				\r\n			"),__p+="\r\n		</div>\r\n		\r\n	</div>	\r\n</div>\r\n",detail_checked&&(__p+='\r\n<div class="plan_list_total">\r\n	<div class="plan_total_left">\r\n		<span>'+(null==(__t=i18n.task_1)?"":__t)+"&nbsp;"+(null==(__t=PlanCounter.TaskTotal)?"":__t)+"</span>\r\n		",social&&(__p+="\r\n			<span>沟通&nbsp;"+(null==(__t=PlanCounter.CommentTotal)?"":__t)+"</span>\r\n		"),__p+="\r\n		<span>心得&nbsp;"+(null==(__t=PlanCounter.ExperienceTotal)?"":__t)+"</span>\r\n		",IsUseBusinessTrip&&(__p+="\r\n			<span>出差&nbsp;"+(null==(__t=PlanCounter.BusinessTripTotal)?"":__t)+"</span>\r\n		"),__p+="\r\n		",IsUseMeet&&(__p+="\r\n			<span>会议&nbsp;"+(null==(__t=PlanCounter.MeetTotal)?"":__t)+"</span>\r\n		"),__p+='\r\n		\r\n		\r\n	</div>\r\n	<div class="plan_total_right">\r\n		<span class="start-date">创建于'+(null==(__t=moment(CreateDate).format("YYYY/MM/DD"))?"":__t)+"</span>\r\n		",0==CycleId&&(__p+="\r\n			",IsRemind?(__p+='\r\n				<span data-name="notice_plan"  class="notice-wraper" original-title="已设提醒" data=\'{"objid":"'+(null==(__t=Id)?"":__t)+'","objType":"'+(null==(__t=objType)?"":__t)+'"}\'>\r\n					<span class="notice icon-clock-active"></span>\r\n					<span class="txt">',time&&(__p+="于"+(null==(__t=time)?"":__t)+" "),__p+="提醒我</span>\r\n				</span>\r\n			"):__p+='\r\n				<span data-name="notice_plan" class="notice-wraper" original-title="设置提醒" data=\'{"objid":"'+(null==(__t=Id)?"":__t)+'","objType":"'+(null==(__t=objType)?"":__t)+'"}\'>\r\n					<span class="notice icon-clock"></span>\r\n					<span class="txt">提醒我</span>\r\n				</span>\r\n				\r\n			',__p+="\r\n		"),__p+="\r\n		",isShowDelete&&(__p+="\r\n			",__p+=Deleteable?'\r\n				<span class="delete icon-delete" original-title="删除" data-name="plan-delete" data-id="'+(null==(__t=Id)?"":__t)+'"></span>\r\n			':'	\r\n				<span class="sub-delete-placeholder"></span>\r\n			',__p+="\r\n		"),__p+="\r\n	</div>\r\n</div>\r\n"),__p+='\r\n<div class="child-list-wraper '+(null==(__t=isChildTask?"p3":isShowKclass?"p1":"p2")?"":__t)+'">\r\n	\r\n	<ul class="child-list '+(null==(__t=currentDeploy?"":"hide")?"":__t)+'  "></ul>\r\n</div>\r\n\r\n\r\n';return __p},this.JST["common/plugins/calendar/calendar"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){if(2==calendarType){__p+='\n	<div class="topbar">\n		<span data-name="pre" class="left icon" ',hidePre&&(__p+='style="display:none"'),__p+='>\n			<span class="icon-arrow-left"></span>\n		</span>\n		<span class="date">'+(null==(__t=year)?"":__t)+"年"+(null==(__t=month+1)?"":__t)+'月</span>\n		<span data-name="next" class="right icon" ',hideNext&&(__p+='style="display:none"'),__p+='>\n			<span class="icon-arrow-right"></span>\n		</span>\n	</div>\n	<div class="main">\n		';for(var i=0,len=calendar.length;len>i;i++){__p+="\n			";var item=calendar[i],mStart=moment(item.startDate),mEnd=moment(item.endDate);__p+='\n			<span date="'+(null==(__t=item.date)?"":__t)+'" planTableId="'+(null==(__t=item.planTableId)?"":__t)+'" data-name="item" class="item col1 '+(null==(__t="status"+item.status)?"":__t)+'">\n				<span class="l">第'+(null==(__t=i+1)?"":__t)+'周</span><span class="process">'+(null==(__t=parseInt(mStart.format("MM"))+"/"+parseInt(mStart.format("DD")))?"":__t)+"～"+(null==(__t=parseInt(mEnd.format("MM"))+"/"+parseInt(mEnd.format("DD")))?"":__t)+"</span>\n			</span>\n		"}__p+="\n	</div>\n"}else if(3==calendarType){__p+='\n	<div class="topbar">\n		<span data-name="pre" class="left icon" ',hidePre&&(__p+='style="display:none"'),__p+='>\n			<span class="icon-arrow-left"></span>\n		</span>\n		<span class="date">'+(null==(__t=year)?"":__t)+'年</span>\n		<span data-name="next" class="right icon" ',hideNext&&(__p+='style="display:none"'),__p+='>\n			<span class="icon-arrow-right"></span>\n		</span>\n	</div>\n	<div class="main">\n		';for(var i=0,len=calendar.length;len>i;i++){__p+="\n			";var item=calendar[i];__p+='\n			<span date="'+(null==(__t=item.date)?"":__t)+'" planTableId="'+(null==(__t=item.planTableId)?"":__t)+'" data-name="item" class="item '+(null==(__t="status"+item.status)?"":__t)+'">\n				'+(null==(__t=i+1)?"":__t)+"月\n			</span>\n		"}__p+="\n	</div>\n"}__p+="\n"}return __p},this.JST["common/plugins/calendar/highlight-calendar"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="highlightDate">\n	<div class="date_hd" data-name="date-picker"></div>\n	<div class="remark">\n		<h2 data-name="title">'+(null==(__t=title)?"":__t)+'</h2>\n		<div class="statics">\n			',_.each(labels,function(a,b){__p+="\n				",__p+=0==b?'\n				<span class="comStyle borderAll"></span>\n				':1==b?'\n				<span class="comStyle borderIn"></span>\n				':'\n				<span class="comStyle borderPart"></span>\n				',__p+="\n				<span>"+(null==(__t=a)?"":__t)+"</span>\n			"}),__p+="\n			\n		</div>\n	</div>\n</div>";return __p},this.JST["common/plugins/class/checked-class-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="checked_name">'+(null==(__t=name)?"":__t)+'</div>\n<a href="javascript:void(0)" data-handler="Delete" class="smember_btn_reduce">\n	<span></span>\n</a>';return __p},this.JST["common/plugins/class/class-component"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="top_cd">\n	<ul class="tab_cd" data-name="klass-tab">\n		<li class="active" data-type="17">选择分类</li>\n		',IsUseWorkLable&&isShowProject&&(__p+='\n			<li data-type="4">选择'+(null==(__t=i18n.work_1)?"":__t)+"</li>\n		"),__p+="\n		",isShowTarget&&(__p+='\n			<li data-type="402">选择目标</li>\n		'),__p+='\n	</ul>\n	<span class="icon-dialog-closed closed_cd" data-name="klass-close"></span>\n</div>\n<div class="box_cd" >\n	<div data-name="klass-content" class="plan-klass-content"></div>\n</div>';return __p},this.JST["common/plugins/class/class-move-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="title_tv" data-name="title">\n\n	',0==isEnd&&(__p+='\n	<span class="icon_tv" data-name="toggle"></span>\n	'),__p+="\n	","undefined"!=typeof IsTenant&&IsTenant?(__p+='\n		<span class="icon-enterprise_icon" data-name="enterprise"></span>\n		<div class="text_tv_parent">\n			<div class="text_tv text_width" data-name="title-name">'+(null==(__t=name)?"":__t)+"</div>\n			",IsAllowSetPersonalLable||(__p+='\n				<span class="m-lock icon-lock" data-name="lock-permission"></span>\n			'),__p+="\n		</div>\n	"):__p+="undefined"==typeof IsTenant||IsTenant?'\n		<div class="text_tv" data-name="title-name">'+(null==(__t=name)?"":__t)+"</div>\n	":'\n		<span class="icon-personal_img" data-name="person"></span>\n		<div class="text_tv_parent">\n			<div class="text_tv personal" data-name="title-name">'+(null==(__t=name)?"":__t)+"</div>\n		</div>\n	",__p+="\n	",0!=id&&isEdit&&(__p+="\n		","undefined"==typeof IsTenant||IsTenant||(__p+='\n			<div class="action_ttv" data-name="klass-item-action">\n				<a href="javascript:void(0);" data-name="edit" id="'+(null==(__t=id)?"":__t)+'">编辑</a>\n				<a href="javascript:void(0);" data-name="deleted" data-end="'+(null==(__t=isEnd)?"":__t)+'" id="'+(null==(__t=id)?"":__t)+'">删除</a>\n			</div> \n		'),__p+="  \n	"),__p+="\n</div>\n<ul></ul>";return __p},this.JST["common/plugins/class/class-move-new"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<form data-name="file-move-new-form">\n	',"rename"!=type&&(__p+='\n	<div class="title_tv">\n	'),__p+='\n		<div class="new_tv">\n			<div class="input-default input_ntv" data-name="file-move-new-input-warp">\n				<input type="text" value="'+(null==(__t=name)?"":__t)+'">\n			</div>\n			<span class="btn_ntv icon-radius-success-over" data-name="file-move-new-submit"></span>\n			<span class="btn_ntv icon-radius-error-over" data-name="file-move-new-cancel"></span>\n		</div>\n	',"rename"!=type&&(__p+="\n	</div>\n	"),__p+="\n</form>";return __p},this.JST["common/plugins/class/class-move"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="title_rd" data-name="title">\n		<h2>我的分类</h2>\n		<span class="icon-dialog-closed closed_rd" data-name="klass-move-close"></span>\n</div>\n	<div class="cont_rd">\n		<div class="tt_tree_view">\n			<div data-name="class-project-tab"></div>\n			<div data-name="search-class"></div>\n			<div data-name="tree" class ="moveTreeList">\n				<div class="_tt_loading_m">努力加载中…</div>\n			</div>\n			<div data-name="empty"></div>\n		</div>\n	</div>\n	<div class="bottom_rd" data-name="klass-action">\n		<button class="btn btn-cancel reset_rd" data-name="klass-move-reset">清空选项</button>\n		<button class="btn btn-cancel new_rd" data-name="klass-move-new-folder">添加分类</button>\n		<button class="btn btn-cancel cancel_rd" data-name="klass-move-cancel">取消</button>\n		<button class="btn btn-sure sure_rd" data-name="klass-move-submit">确定</button>\n		\n	</div>';return __p},this.JST["common/plugins/class/class-project-tab"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<!--<a href="javascript:void(0)" class="current" data-id="0">全部</a>-->\n<a href="javascript:void(0)" data-id="2771" class="current">Marco</a>\n<a href="javascript:void(0)" data-id="1669">Public</a>\n<a href="javascript:void(0)" data-id="1648">Private</a>';return __p},this.JST["common/plugins/class/class-rename"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<form data-name="rename-form">\n	<div class="input-default input_ridl" data-name="rename-inputwrap">\n		<input type="text" value="'+(null==(__t=name)?"":__t)+'">\n	</div>\n	<a class="btn btn-sure" data-name="rename-sure">确定</a>\n	<a class="btn btn-cancel" data-name="rename-cancel">取消</a>\n</form>\n';return __p},this.JST["common/plugins/class/class-search"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="smember_form_container">\n	<div class="smember_header_input">\n		<label class="smember_condition_label" data-name="smember-condition">搜索分类</label>\n		<input  autocomplete="off" id="lableName" class="smember_condition_input smemberInput " type="text"  name="content"></input>\n		<span class="icon-search"></span>\n	</div>\n	<div class="lable-list" id="lable-list" data-name="lable-list">\n		<ul class="lable-ul" data-name="lable-ul" id="lable-ul"></ul>\n	</div>\n</div>';return __p},this.JST["common/plugins/class/class-tree-component"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="class_data_pop_header">\n	'+(null==(__t=title)?"":__t)+'\n	<a href="javascript:void(0)" class="icon-dialog-closed" data-handler="Close"></a>\n</div>\n<div class="class_data_pop_content">\n	<div class="class_data_search_content_left">\n		<div class="tab">\n			<span class="class active" data-name="all">所有分类</span>\n			',1==pluginType&&(__p+='<span class="project" data-name="project">所有项目</span>'),__p+='\n		</div>\n		<div class="class_data_type_list"></div>\n	</div>\n	<div class="class_data_search_content_center">\n		<span class="smember_search_arrow_icon search_arrow_icon"></span>\n	</div>\n	<div class="class_data_search_content_right">\n		<span>已选类别</span>\n		<div class="class_data_checked_type_list"></div>\n	</div>\n</div>\n<div class="smember_footer">\n	<a href="javascript:void(0)" class="btn btn-cancel" data-handler="clean">清除全部</a>\n	<a href="javascript:void(0)" class="btn cancel_rd" data-handler="Cancel">取消</a>\n	<a href="javascript:void(0)" class="btn btn-sure sure_rd" data-handler="Submit">确定</a>\n</div>   ';return __p},this.JST["common/plugins/class/department-item"]=function(obj){obj||(obj={});
{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="title_tv" data-name="title">\n	',0==isEnd&&(__p+='\n	<span class="icon_tv" data-name="toggle"></span>\n	'),__p+='\n	<div class="text_tv" data-name="title-name">'+(null==(__t=Name)?"":__t)+"</div>\n</div>\n<ul></ul>";return __p},this.JST["common/plugins/class/department"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="title_rd" data-name="work-klass-title">\n	<h2>所有部门</h2>\n	<span class="icon-dialog-closed closed_rd" data-name="work-klass-close"></span>\n</div>\n<div class="cont_rd">\n	<div class="tt_tree_view">\n		<div data-name="work-box">\n			<div class="_tt_loading_m">努力加载中…</div>\n		</div>\n		<div data-name="work-klass-empty"></div>\n	</div>\n</div>\n<div class="bottom_rd" data-name="work-action">\n	<button class="btn btn-cancel reset_rd" data-name="work-klass-reset">清空选项</button>\n	<button class="btn btn-sure sure_rd" data-name="work-klass-submit">确定</button>\n</div>';return __p},this.JST["common/plugins/class/enterprise/class-enter-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="title_enter_tv" data-name="title">\n\n	',0==isEnd&&(__p+='\n	<span class="icon_tv" data-name="toggle"></span>\n	'),__p+="\n	",__p+="undefined"!=typeof IsTenant&&IsTenant?'\n		<span class="icon-enterprise_icon"></span><div class="text_tv text_width" data-name="title-name">'+(null==(__t=name)?"":__t)+"</div>\n	":"undefined"==typeof IsTenant||IsTenant?'\n		<div class="text_tv" data-name="title-name">'+(null==(__t=name)?"":__t)+"</div>\n	":'\n		<span class="icon-personal_img"></span><div class="text_tv personal " data-name="title-name">'+(null==(__t=name)?"":__t)+"</div>\n	",__p+="\n	",0!=id&&isEdit&&(__p+='\n		<div class="action_ttv" data-name="klass-item-action">\n			<a href="javascript:void(0);" data-name="edit" id="'+(null==(__t=id)?"":__t)+'">编辑</a>\n			<a href="javascript:void(0);" id="'+(null==(__t=id)?"":__t)+'" class="'+(null==(__t=IsAllowSetPersonalLable)?"":__t)+'" data-name="permissions">权限</a>\n			<a href="javascript:void(0);" data-name="deleted" data-end="'+(null==(__t=isEnd)?"":__t)+'" id="'+(null==(__t=id)?"":__t)+'">删除</a>\n		</div>\n	'),__p+=" \n</div>\n<ul></ul>\n<div class=\"documentlist_permissions\" data-name=\"permissions-dropdown\">\n	<div class='class-set' id=\"setScope\" data-name='set-scope'>设置分类可见范围</div>\n	<span class=\"icon-arrow-left-disabled\"></span><div class='class-set'  data-name='setting-addClass'>是否允许添加个人分类</div>\n</div>\n<div class=\"activeClass\" data-name='judge-add-class'>\n	<span id=\"yesAddClass\" class=\"right\"></span><div class='class-set'  data-name='yes-addClass'>允许添加</div>\n	<span id=\"noAddClass\" class=\"right\"></span><div class='class-set'   data-name='no-addClass'>不允许添加</div>\n</div>\n";return __p},this.JST["common/plugins/class/enterprise/class-enter-move"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='\n	<div class="title_rd" data-name="title">\n		<h2>我的分类</h2>\n		<span class="icon-dialog-closed closed_rd" data-name="klass-move-close"></span>\n	</div>\n	<div class="cont_rd">\n		<div class="tt_tree_view">\n			<div data-name="tree">\n				<div class="_tt_loading_m">努力加载中…</div>\n			</div>\n			<div data-name="empty"></div>\n		</div>\n		\n	</div>\n	<div class="bottom_rd" data-name="klass-action">\n		<button class="btn btn-success new_rd" data-name="klass-move-new-folder">添加类别</button>\n	</div>\n';return __p},this.JST["common/plugins/class/enterprise/class-enter-setting"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+="";return __p},this.JST["common/plugins/class/enterprise/class-move-new"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<form data-name="file-move-new-form">\n	',"rename"!=type&&(__p+='\n	<div class="title_tv">\n	'),__p+='\n		<div class="new_tv">\n			<div class="input-default input_ntv" data-name="file-move-new-input-warp">\n				<input type="text" value="'+(null==(__t=name)?"":__t)+'">\n			</div>\n			<span class="btn_ntv icon-radius-success-over" data-name="file-move-new-submit"></span>\n			<span class="btn_ntv icon-radius-error-over" data-name="file-move-new-cancel"></span>\n		</div>\n	',"rename"!=type&&(__p+="\n	</div>\n	"),__p+="\n</form>";return __p},this.JST["common/plugins/class/project"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="cont_rd">\n	<div class="tt_tree_view">\n		<div data-name="work-box">\n			<div class="_tt_loading_m">努力加载中…</div>\n		</div>\n		<div data-name="work-box-join"></div>\n		<div data-name="empty"></div>\n	</div>\n</div>';return __p},this.JST["common/plugins/class/work-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<span class="icon-work-small"></span><span>'+(null==(__t=WorkName)?"":__t)+"</span>";return __p},this.JST["common/plugins/class/work-list"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\n<div class="title_kw" data-name="work-title">\n	<span class="icon-minus-square" data-name="toggle"></span><span>'+(null==(__t=title)?"":__t)+'</span>\n</div>\n<ul data-name="work-list"></ul>';return __p},this.JST["common/plugins/class/work"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="title_rd" data-name="work-move-title">\n	<h2>'+(null==(__t=i18n.work_1)?"":__t)+'分类</h2>\n	<span class="icon-dialog-closed closed_rd" data-name="work-move-close"></span>\n</div>\n<div class="cont_rd">\n	<div class="tt_tree_view">\n		<div data-name="work-box">\n			<div class="_tt_loading_m">努力加载中…</div>\n		</div>\n		<div data-name="work-box-join"></div>\n		<div data-name="empty"></div>\n	</div>\n</div>\n<div class="bottom_rd" data-name="work-action">\n	<button class="btn btn-cancel reset_rd" data-name="work-move-reset">清空选项</button>\n	<button class="btn btn-cancel new_rd" data-name="work-move-new-folder">新建项目</button>\n	<button class="btn btn-cancel cancel_rd" data-name="work-move-cancel">取消</button>\n	<button class="btn btn-sure sure_rd" data-name="work-move-submit">确定</button>\n	\n</div>';return __p},this.JST["common/plugins/cycletask/cycle-task"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<h2>设置循环时间</h2>\n<div class="cycle_task_container">\n	<div class="cycle_type_list">\n		<ul>\n			<li cyctype="2">\n				<a href="javascript:void(0)" class="radio ',2==CycType&&(__p+="radio-checked"),__p+='"></a>\n				<label>每个工作日</label>\n			</li>\n			<li cyctype="1">\n				<a href="javascript:void(0)" class="radio ',1==CycType&&(__p+="radio-checked"),__p+='"></a>\n				<label>每天</label>\n			</li>\n			<li cyctype="3">\n				<a href="javascript:void(0)" class="radio ',3==CycType&&(__p+="radio-checked"),__p+='"></a>\n				<label>每周</label>\n			</li>\n			<li cyctype="4">\n				<a href="javascript:void(0)" class="radio ',4==CycType&&(__p+="radio-checked"),__p+='"></a>\n				<label>每月</label>\n			</li>\n		</ul>\n	</div>\n	<div class="cycle_type_date">\n		<div class="cycle_time">\n			<span>开始时间</span>\n			',(3==CycType||4==CycType)&&(__p+='\n				<div class="day_time_nst" style="width:60px;">\n					<a class="triday_nst" href="javascript:void(0)" data-name="start-date-arrow" style="margin-left:40px;"></a>\n					<label data-name="start-date-name">'+(null==(__t=curStartDate)?"":__t)+'</label>\n					<ul class="dayvalues_nst" data-name="start-date-list" style="width:60px;">\n						',_.each(dateData,function(a,b){__p+="\n							<li ",curStartDate==a&&(__p+='class="cur_nst"'),__p+='>\n								<a href="javascript:void(0)" index="'+(null==(__t=b)?"":__t)+'">'+(null==(__t=a)?"":__t)+"</a>\n							</li>\n						"}),__p+="\n					</ul>\n				</div>\n			"),__p+='\n			<div class="day_time_nst" style="margin-right:0;">\n				<a class="triday_nst" href="javascript:void(0)" data-name="start-time-hour-arrow"></a>\n				<label data-name="start-time-hour-name">'+(null==(__t=startCurHour)?"":__t)+'</label>\n				<ul class="dayvalues_nst" data-name="start-time-hour-list">\n					',_.each(hours,function(a){__p+="\n						<li ",startCurHour==a&&(__p+='class="cur_nst"'),__p+='>\n							<a href="javascript:void(0)" hour="'+(null==(__t=a)?"":__t)+'">'+(null==(__t=a)?"":__t)+"</a>\n						</li>\n					"}),__p+='\n				</ul>\n			</div><div style="float:left;font-weight:bold;line-height:30px;margin-left:3px;margin-right:3px;">:</div>\n			<div class="day_time_nst" style="margin-right:0;">\n				<a class="triday_nst" href="javascript:void(0)" data-name="start-time-minite-arrow"></a>\n				<label data-name="start-time-minite-name">'+(null==(__t=startCurMinite)?"":__t)+'</label>\n				<ul class="dayvalues_nst" data-name="start-time-minite-list">\n					',_.each(minites,function(a){__p+="\n						<li ",startCurMinite==a&&(__p+='class="cur_nst"'),__p+='>\n							<a href="javascript:void(0)" minite="'+(null==(__t=a)?"":__t)+'">'+(null==(__t=a)?"":__t)+"</a>\n						</li>\n					"}),__p+='\n				</ul>\n			</div>\n		</div>\n		<div class="cycle_time">\n			<span>结束时间</span>\n			',(3==CycType||4==CycType)&&(__p+='\n				<div class="day_time_nst" style="width:60px;">\n					<a class="triday_nst" href="javascript:void(0)" data-name="end-date-arrow" style="margin-left:40px;"></a>\n					<label data-name="end-date-name">'+(null==(__t=curEndDate)?"":__t)+'</label>\n					<ul class="dayvalues_nst" data-name="end-date-list" style="width:60px;">\n						',_.each(dateData,function(a,b){__p+="\n							<li ",curEndDate==a&&(__p+='class="cur_nst"'),__p+='>\n								<a href="javascript:void(0)" index="'+(null==(__t=b)?"":__t)+'">'+(null==(__t=a)?"":__t)+"</a>\n							</li>\n						"}),__p+="\n					</ul>\n				</div>\n			"),__p+='\n			<div class="day_time_nst" style="margin-right:0;">\n				<a class="triday_nst" href="javascript:void(0)" data-name="end-time-hour-arrow"></a>\n				<label data-name="end-time-hour-name">'+(null==(__t=endCurHour)?"":__t)+'</label>\n				<ul class="dayvalues_nst" data-name="end-time-hour-list">\n					',_.each(hours,function(a){__p+="\n						<li ",endCurHour==a&&(__p+='class="cur_nst"'),__p+=' >\n							<a href="javascript:void(0)" hour="'+(null==(__t=a)?"":__t)+'">'+(null==(__t=a)?"":__t)+"</a>\n						</li>\n					"}),__p+='\n				</ul>\n			</div>\n			<div style="float:left;font-weight:bold;line-height:30px;margin-left:3px;margin-right:3px;">:</div>\n			<div class="day_time_nst" style="margin-right:0;">\n				<a class="triday_nst" href="javascript:void(0)" data-name="end-time-minite-arrow"></a>\n				<label data-name="end-time-minite-name">'+(null==(__t=endCurMinite)?"":__t)+'</label>\n				<ul class="dayvalues_nst" data-name="end-time-minite-list">\n					',_.each(minites,function(a){__p+="\n						<li ",endCurMinite==a&&(__p+='class="cur_nst"'),__p+='>\n							<a href="javascript:void(0)" minite="'+(null==(__t=a)?"":__t)+'">'+(null==(__t=a)?"":__t)+"</a>\n						</li>\n					"}),__p+='\n				</ul>\n			</div>\n		</div>\n	</div>\n</div>\n<div class="uibutton">\n	<a href="javascript:void(0)" class="btn btn-cancel" data-name="reset-cycle" style="float:left;">取消循环</a>\n	<div style="float:right;margin-right:20px;">\n		<a href="javascript:void(0)" class="btn btn-sure" data-name="sure-cycle">确定</a>\n		<a href="javascript:void(0)" class="btn btn-cancel" data-name="close-cycle">取消</a>\n	</div>\n</div>';return __p},this.JST["common/plugins/evaluation/dimension-item"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<label class="dimension-title">'+__e(name)+'</label>\n<div class="star-list-container">\n</div>';return __p},this.JST["common/plugins/evaluation/evaluation-dimension-composite"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<label class="tt-eval-title">维度评分</label>\n<div class="tt-eval-item">\n	<ul></ul>\n</div>';return __p},this.JST["common/plugins/evaluation/evaluation-medal-item"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+=showRadio?radioChecked?'\n<label class="tt-eval-title radio-checked">奖章鼓励</label>\n':'\n<label class="tt-eval-title radio">奖章鼓励</label>\n':'\n<label class="tt-eval-title">奖章鼓励</label>\n',__p+='\n<div class="tt-eval-item">\n	',_.each(medals,function(a,b){__p+=cType!=a.cType?'\n		<span class="medal '+__e(cTypeClass[b])+'" data-ctype="'+__e(a.cType)+'" data-name="'+__e(a.name)+'" data-value="'+__e(b+1)+'"><span class="icon icon-'+__e(cTypeClass[b])+'"></span>'+__e(a.name)+"</span>\n		":'\n		<span class="medal '+__e(cTypeClass[b])+' active" data-ctype="'+__e(a.cType)+'" data-name="'+__e(a.name)+'" data-value="'+__e(b+1)+'"><span class="icon icon-'+__e(cTypeClass[b])+' active"></span>'+__e(a.name)+"</span>\n		",__p+="\n	"}),__p+="\n</div>";return __p},this.JST["common/plugins/evaluation/evaluation-score-item"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+=showRadio?radioChecked?'\n<label class="tt-eval-title radio-checked">'+__e(name||"综合评分")+"</label>\n":'\n<label class="tt-eval-title radio">'+__e(name||"综合评分")+"</label>\n":'\n<label class="tt-eval-title">'+__e(name||"综合评分")+"</label>\n",__p+='\n<div class="tt-eval-item">\n</div>';return __p},this.JST["common/plugins/evaluation/evaluation-task-item"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)settings[1]&&(__p+='\n<div class="tt-eval-task-item score-composite">\n</div>\n'),__p+="\n",settings[1]&&settings[4]&&settings[4].length&&(__p+='\n<div class="tt-eval-task-item muti-score">\n</div>\n'),__p+="\n",settings[2]&&settings[2].length&&(__p+='\n<div class="tt-eval-task-item medal-item">\n</div>\n'),__p+='\n<div class="tt-eval-task-item">\n	<label class="tt-eval-title">评语</label>\n	<div class="tt-eval-item">\n		<textarea class="comment" placeholder="完成的不错，继续努力！">'+__e(remark)+'</textarea>\n	</div>\n</div>\n<div class="tt-eval-task-operate">\n	',__p+=0==evaluateInfos.length?'\n		<span class="btn btn-disabled save-task-eval">确定</span><span class="btn btn-cancel">取消</span>\n	':'\n		<span class="btn btn-sure save-task-eval">确定</span><span class="btn btn-cancel">取消</span>\n	',__p+="\n</div>\n";return __p},this.JST["common/plugins/evaluation/evaluation"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="tt_grade">\n	<div class="type_gr">\n		<div class="title_gr">\n			<span class="radio ',1==type&&(__p+="radio-checked"),__p+='" data-name="radio"  data-type="1"></span><span>评价打分</span>\n		</div>\n		\n		<div class="edit_gr score_gr">\n			<span class="lable_sgr">评分：</span>\n			<div class="select_gr" data-name="select">\n				<span data-name=\'score-value\'></span><span class="icon-arrow-down ico_segr" data-name="score-arrow"></span>\n			</div>\n			<ul class="so_gr" data-name="select-list">\n				',_.each(scoreRange,function(a,b){__p+='\n					\n					<li data-value="'+(null==(__t=b)?"":__t)+'" ',value==a&&(__p+="active"),__p+='><span class="icon-right-small-default icon_sgr"></span><span>'+(null==(__t=a)?"":__t)+"</span></li>\n					\n				"}),__p+='\n			</ul>\n			<div class="star_gr" data-name=\'score-star\'></div>	\n		</div>\n	</div>\n	<div class="type_gr">\n		<div class="title_gr">\n			<span class="radio ',2==type&&(__p+="radio-checked"),__p+='" data-name="radio" data-type="2"></span><!-- <span>评价打分</span> --><span>奖章鼓励</span>\n		</div>\n		<div class="edit_gr">\n			<ul class="medal_gr" data-name="medal">\n				<li data-value="1" class="disabled"> \n					<div class="col01_gr col_gr">\n						<div class="icon_gr"><span class="icon-good-one-disabled"></span></div>\n						<p>太棒了！</p>\n						<div class="check_gr"><span class="icon-right-small-select"></span></div>\n					</div>\n				</li>\n				<li data-value="2" class="disabled">\n					<div class="col02_gr col_gr">\n						<div class="icon_gr"><span class="icon-good-three-disabled"></span></div>\n						<p>干的不错！</p>\n						<div class="check_gr"><span class="icon-right-small-select"></span></div>\n					</div>\n				</li>\n				<li  data-value="3" class="disabled">\n					<div class="col03_gr col_gr">\n						<div class="icon_gr"><span class="icon-good-two-disabled" ></span></div>\n						<p>再接再厉！</p>\n						<div class="check_gr"><span class="icon-right-small-select"></span></div>\n					</div>\n				</li>\n			</ul>\n		</div>\n	</div>\n	<div class="action_gr">\n		<a href="javascript:void(0)" class="btn btn-sure" data-name="sure">确定</a>\n		<a href="javascript:void(0)" class="btn btn-cancel" data-name="cancel">取消</a>\n	</div>\n</div>';return __p},this.JST["common/plugins/evaluation/star-item"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj){__p+='<ul class="tt-star-score-list">\n	';for(var i=1;i<=lvl;i++){var dataValue=i*goal;__p+="\n		",__p+=dataValue<=selectedValue?'\n		   <li class="icon-star-m-active" original-title="评分:'+__e(dataValue)+'分" data-value="'+__e(dataValue)+"\" data-index='"+__e(i-1)+"'></li>\n		":'\n		   <li class="icon-star-m" original-title="评分:'+__e(dataValue)+'分" data-value="'+__e(dataValue)+"\" data-index='"+__e(i-1)+"'></li>\n		",__p+="\n    "}__p+="\n</ul>\n",selectedValue&&(__p+='\n<div class="last-score">\n	<span class="score-value">'+__e(selectedValue)+'</span><span class="value-unit">分</span>\n</div>\n'),__p+="\n  "}return __p},this.JST["common/plugins/indicator/indicator-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\n	<span class="inner_indi">\n		<a href="'+(null==(__t=href)?"":__t)+'" target="_blank">\n			<span class="num_inii" data-name="indicator-num">'+(null==(__t=IndicatorValue)?"":__t)+"</span>\n			<span>"+(null==(__t=Contents)?"":__t)+"</span>\n		</a>\n	</span>\n";return __p},this.JST["common/plugins/indicator/indicator"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="indicater_tri" data-name="indicator-wrap">\n	<a href="javascript:void(0)" class="tri" data-name="indicator"></a>\n	<div class="indicater" data-name="indicator-list-wrap">\n   		<ul class="list_indi"></ul>\n	</div>\n</div>\'';return __p},this.JST["common/plugins/notice/add-user-list"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="title-pl">'+(null==(__t=title)?"":__t)+'</div>\n<div class="list-pl">\n<em class="ux_add_btn"></em>\n<ul></ul>\n</div>';return __p},this.JST["common/plugins/notice/add-user"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<a href="javascript:void(0)" title="删除:'+(null==(__t=Name)?"":__t)+'" id="'+(null==(__t=Id)?"":__t)+'" class="ux_user_area">'+(null==(__t=_.convertImage({src:Avatar.Small,size:30,name:Name,bgColor:Avatar.Color}))?"":__t)+"</a>";return __p},this.JST["common/plugins/popup/export-excel-pop"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="tBar">导出Excel</div>\n<div class="mBar">\n	<span class="label">任务层级</span>\n	<span class="level" data-name="level">所有层级</span>\n</div>\n<div class="bBar">\n	<a data-name="export" href="'+(null==(__t=downloadUrl)?"":__t)+'" class="btn btn-sure">导出</a>\n</div>\n';return __p},this.JST["common/plugins/popup/export-pop"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="tBar">导出日报</div>\n<div class="mBar">\n	<span class="label">导出日期</span>\n	<span class="date" data-name="timepicker">'+(null==(__t=timeTxt)?"":__t)+'</span>\n</div>\n<div class="bBar">\n	<a data-name="local" href="'+(null==(__t=downloadUrl)?"":__t)+'" class="local btn btn-sure">导出到本地</a>\n	<button class="mail btn btn-sure" data-name="mail">发送到邮箱</button>\n</div>\n';return __p},this.JST["common/plugins/popup/hour-pop"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){__p+='<div class="ux_hour_pop">\n	<div class="ux_hour_list">\n		<h2>小时</h2>\n		<div class="hour_list">\n			';for(var i=0;24>=i;i++)__p+='\n				<a href="javascript:void(0)" ',""!=hourDate&&hourDate==i&&(__p+='class="current"'),__p+='data-time="'+(null==(__t=i)?"":__t)+'">\n					',__p+=9>=i?"\n						0"+(null==(__t=i)?"":__t)+"\n					":"\n						"+(null==(__t=i)?"":__t)+"\n					",__p+="\n				</a>\n			";__p+='\n			\n		</div>\n	</div>\n	<div class="ux_minite_list">\n		<h2>分钟</h2>\n		<div class="minite_list">\n			<a href="javascript:void(0)"  data-time="0" ',""!==minuteDate&&0==minuteDate&&(__p+='class="current"'),__p+='>00</a>\n			<a href="javascript:void(0)"  data-time="15" ',15==minuteDate&&(__p+='class="current"'),__p+='>15</a>\n			<a href="javascript:void(0)"  data-time="30" ',30==minuteDate&&(__p+='class="current"'),__p+='>30</a>\n			<a href="javascript:void(0)"  data-time="45" ',45==minuteDate&&(__p+='class="current"'),__p+=">45</a>\n		</div>\n	</div>\n</div>"}return __p},this.JST["common/plugins/popup/import-task"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<div class="tBar">导入'+__e(typeData.name),"任务"==typeData.name&&(__p+='<span class="bar-info">导入的任务里有里程碑信息请先导入里程碑</span>'),__p+='</div>\n<div class="mBar">\n	<div class="uploader_container" style="position: relative;">\n		<a class="dowonload" href="'+(null==(__t=context.getWebUrl("Content/导入"+typeData.name+".rar"))?"":__t)+'">下载示例模板</a>\n	</div>\n	<div class="previewArea">\n		<div class="preview_container"></div>\n		<div class="error_container"></div>\n		<div class="loading_container"></div>\n	</div>\n	\n	<img class="loading" src="'+(null==(__t=context.getStaticUrl("images/load_m.gif"))?"":__t)+'"/>\n</div>\n';return __p},this.JST["common/plugins/popup/member-sort"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="mBar">\n	<div class="item" data-type="checkAll">\n		<span class="check checkbox'+(null==(__t=checkAll?"-checked":"")?"":__t)+'"><span class="ico"></span></span>\n		<span class="label">全选</span>\n	</div>\n	',isShowRes&&(__p+='\n	<div class="item" data-type="r">\n		<span class="check checkbox'+(null==(__t=r?"-checked":"")?"":__t)+'"><span class="ico"></span></span>\n		<span class="label">'+(null==(__t=isSelfView?"我":"ta")?"":__t)+"负责的</span>\n	</div>\n	"),__p+="\n	",isShowCreate&&(__p+='\n	<div class="item" data-type="c">\n		<span class="check checkbox'+(null==(__t=c?"-checked":"")?"":__t)+'"><span class="ico"></span></span>\n		<span class="label">'+(null==(__t=isSelfView?"我":"ta")?"":__t)+"派发的</span>\n	</div>\n	"),__p+="\n	",isShowPart&&(__p+='\n	<div class="item" data-type="p">\n		<span class="check checkbox'+(null==(__t=p?"-checked":"")?"":__t)+'"><span class="ico"></span></span>\n		<span class="label">'+(null==(__t=isSelfView?"我":"ta")?"":__t)+"参与的</span>\n	</div>\n	"),__p+='\n</div>\n<div class="bBar">\n	<button class="btn btn-sure '+(null==(__t=isEmpty?"btn-disabled":"")?"":__t)+'" data-name="sure">确定</button>\n</div>\n';return __p},this.JST["common/plugins/popup/sort-pop"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="mBar">\n	<div class="item '+(null==(__t=1==SortType?"active":"")?"":__t)+'" data-name="default">\n		<span class="txt">默认排序</span>\n	</div>\n	<div class="item '+(null==(__t=2==SortType||3==SortType?"active":"")?"":__t)+'" data-name="start" original-title="点击后最'+(null==(__t=3==SortType?"早":"晚")?"":__t)+'开始的在前面">\n		<span class="txt">开始时间</span>\n		<span class="icons">\n			<span class="up icon-arrow-up-solid'+(null==(__t=2==SortType?"-blue":"")?"":__t)+'">\n			</span>\n			<span class="down icon-arrow-down-solid'+(null==(__t=3==SortType?"-blue":"")?"":__t)+'"></span>\n		</span>\n	</div>\n	<div class="item '+(null==(__t=4==SortType||5==SortType?"active":"")?"":__t)+'" data-name="end" original-title="点击后最'+(null==(__t=5==SortType?"早":"晚")?"":__t)+'结束的在前面">\n		<span class="txt">结束时间</span>\n		<span class="icons">\n			<span class="up icon-arrow-up-solid'+(null==(__t=4==SortType?"-blue":"")?"":__t)+'">\n			</span>\n			<span class="down icon-arrow-down-solid'+(null==(__t=5==SortType?"-blue":"")?"":__t)+'"></span>\n		</span>\n	</div>\n	<div class="item '+(null==(__t=6==SortType||7==SortType?"active":"")?"":__t)+'" data-name="create" original-title="点击后最'+(null==(__t=7==SortType?"早":"晚")?"":__t)+'创建的在前面">\n		<span class="txt">创建时间</span>\n		<span class="icons">\n			<span class="up icon-arrow-up-solid'+(null==(__t=6==SortType?"-blue":"")?"":__t)+'">\n			</span>\n			<span class="down icon-arrow-down-solid'+(null==(__t=7==SortType?"-blue":"")?"":__t)+'"></span>\n		</span>\n	</div>\n	',isShowStar&&(__p+='\n	<div class="item '+(null==(__t=8==SortType?"active":"")?"":__t)+'" data-name="star" original-title="星标任务在最前面">\n		<span class="txt">星标</span>\n	</div>\n	'),__p+="\n</div>";return __p},this.JST["common/plugins/popup/summary"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="tt_summary_head">\n	<div class="title">填写心得</div>\n</div>\n<div class="tt_summary_content" data-name="summary_content"></div>';return __p},this.JST["common/plugins/popup/transfer-task-pop"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="tBar">转移任务</div>\n<div class="mBar">\n	<span class="label">转移到</span>\n	<span class="mile" data-name="choose-miles">\n		<span class="txt">'+(null==(__t=defaultData.value)?"":__t)+'</span>\n		<span class="icon icon-arrow-down"></span>\n	</span>\n</div>\n<div class="bBar '+(null==(__t=isShowCancelMile?"":"no-cancel")?"":__t)+'">\n	',isShowCancelMile&&(__p+='\n	<span class="cancel-mile" data-name="cancel-mile">取消设置里程碑</span>\n	'),__p+='\n	\n	<button data-name="cancel" class="btn btn-cancel">取消</button>\n	<button data-name="sure" class="btn btn-sure">确定</button>\n</div>';return __p},this.JST["common/plugins/popup/wrap"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+='<ul class="tBar">\n	',setDoubleDate&&(__p+='\n	<li class="item active" data-name="date">起止时间</li>\n	'),__p+="\n	",setCycle&&(__p+='\n	<li class="item" data-name="cycle" >循环时间</li>\n	'),__p+='\n</ul>\n<div class="mBar" data-name="content">\n</div>';return __p},this.JST["common/plugins/pubblog"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="publishsharewrap">\r\n	<div class="container_psw">\r\n		<div class="notice_cpsw clearfix">\r\n			<div class="who_cpsw">\r\n				<span>回复</span>\r\n					<span class="toname_wcpsw"></span>\r\n				<span>：</span>\r\n				<a class="closed_wcpsw" title="" hidefocus="true" href="javascript:void(0);">关闭</a>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="textarea_cpsw">\r\n			<div class="wrap_tcpsw">\r\n				<textarea name="" rows="" cols="" class="write_wtcpsw _bb_write_wtcpsw" style="resize:none;" placeholder="'+(null==(__t=defaultValue)?"":__t)+'"></textarea>\r\n			</div>\r\n			<div class="count_cpsw">\r\n				<span class="num_ccpsw">0</span>/<span class="leng_ccpsw">1000</span>\r\n			</div>\r\n		</div>\r\n		<div class="action_cpsw">\r\n			<ul class="list_acpsw">\r\n				<li class="ament_lacpsw"><a href="javascript:void(0);" title="" class="item_lacpsw">文件/图片</a></li>\r\n				<li class="at_lacpsw"><a href="javascript:void(0);" title="" class="item_lacpsw">同事</a></li>\r\n				<li class="atall_lacpsw"><a title="" href="javascript:void(0);" class="item_lacpsw">所有同事</a></li>\r\n			</ul>\r\n			',isShowSendSms&&(__p+='\r\n				<span class="pub_message" data-name="pub-send-sms">\r\n					<a href="javascript:void(0);" title="" class="checkbox"><span class="ico"></span></a>\r\n					短信通知\r\n				</span>\r\n			'),__p+='\r\n			<span class="quna_cpsw down_quna_cpsw" id="1" isvisible="0"><i>所有人可见</i></span>\r\n			<a hidefocus="true" class="cancel_cpsw" href="javascript:void(0);"> <b><i>取消</i></b></a>\r\n			<a class="pub_cpsw " href="javascript:void(0);"><b><i>发布</i></b></a>\r\n		</div>\r\n	</div>\r\n</div>';return __p},this.JST["common/plugins/pubblog/publish-mblog"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\r\n<div class="box_pm">\r\n	<div class="who_pm" data-name="to-reply">\r\n		<span>回复</span><span data-name="to-reply-name"></span>：\r\n		<a class="closed_pm" href="javascript:void(0);" data-name="to-reply-closed">×</a>\r\n	</div>\r\n	<div class="content_pm input-default" data-name ="new-content-wrap">\r\n		<div class="input_pm">\r\n			',defaultValue&&(__p+='\r\n			<label data-name="new-defaultvalue">'+(null==(__t=defaultValue)?"":__t)+"</label>\r\n			"),__p+='\r\n			<textarea  data-name="new-content" style="resize:none;">'+(null==(__t=value)?"":__t)+'</textarea>\r\n		</div>\r\n		<div class="count_pm">\r\n			',__p+=isLimit?'\r\n				<span class="num_pm" data-name="count">'+(null==(__t=total)?"":__t)+"</span>/"+(null==(__t=maxlength)?"":__t)+"\r\n			":'\r\n				<span class="num_pm" data-name="count">'+(null==(__t=total)?"":__t)+"</span>\r\n			",__p+='\r\n			\r\n		</div>\r\n	</div>\r\n	<div class="action_pm">\r\n		<ul class="list_pm">\r\n			',isShowAttachment&&(__p+='\r\n			<li class="ament_pm uploader_container"><a title="" href="javascript:void(0);" data-name="file" ></a></li>\r\n			'),__p+="\r\n			",isShowAt&&(__p+='\r\n			<li class="at_pm"><a href="javascript:void(0);" title="" data-name="at">'+(null==(__t=atText)?"":__t)+"</a></li>\r\n			"),__p+="\r\n			",isShowAtAll&&(__p+='\r\n			<li class="atall_pm"><a title="" href="javascript:void(0);" data-name="atall" >'+(null==(__t=atAllText)?"":__t)+"</a></li>\r\n			"),__p+='\r\n		</ul>\r\n		<button class="btn btn-sure btn-disabled" data-name="submit">'+(null==(__t=submitText)?"":__t)+'</button>\r\n		<button class="cancel_pm" data-name="cancel">取消</button>\r\n		',isShowRange&&(__p+='\r\n		<span class="quna_pm" id="1" isvisible="0" data-name="range"><i class="icon-lock" data-name="lock"></i><span data-name="range-cont">'+(null==(__t=privateText)?"":__t)+'</span><i class="caret" data-name="range-caret"></i></span>\r\n		'),__p+='\r\n		\r\n		\r\n	</div>\r\n	<div id="attachmentViewBox_homeMblog" class="error_container"></div>\r\n	<div id="attachmentViewBox_homeMblog" class="preview_container"></div>\r\n	<div id="attachmentViewBox_homeMblog" class="loading_view"></div>\r\n</div>\r\n';return __p},this.JST["common/plugins/pubblog/publish-range"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='\r\n<div class="qunartip">\r\n	<ul>\r\n		<li class="public_qunat cur" id="1" ><a href="javascript:void(0);" title=""><span>所有人可见</span></a></li>\r\n		<li class="private_qunat" id="2"><a href="javascript:void(0);" title=""><span>仅@的人可见</span></a></li>\r\n	</ul>\r\n</div>\r\n';return __p},this.JST["common/plugins/remindme-widget/remindme-time-picker"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)_.each(data,function(a){__p+="\n	<li data-id= "+(null==(__t=a.value)?"":__t)+" >"+(null==(__t=a.text)?"":__t)+"</li>\n"});return __p},this.JST["common/plugins/remindme-widget/remindme-widget-list-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="remindme_item_animate">\n	<span class="icon"></span><span>提醒</span>\n</div>\n<div class="remindme_item_content">\n	<p class="remindme_item_content_tips">\n		'+(null==(__t=Time)?"":__t)+"\n		<span>"+(null==(__t=Content)?"":__t)+'</span>\n	</p>\n	<p class="remindme_item_content_content">\n		<span class="remindme_item_content_type">'+(null==(__t=typeText)?"":__t)+'</span>\n		<a href="'+(null==(__t=Url)?"":__t)+'" class="remindme_item_content_title">'+(null==(__t=ObjName)?"":__t)+"</a>\n	</p>\n	",RemindUser&&(__p+='\n		<p class="remindme_item_content_tips"><span>提醒发起人:'+(null==(__t=RemindUser.Name)?"":__t)+"</span></p>\n	"),__p+='\n</div>\n<div class="remindme_item_btn_group">\n	<a href="javascript:void(0)" data-handler="show_tip" class="btn_remindme_blue btn_remindme_later">稍后<span></span></a>\n	<a href="javascript:void(0)" class="btn_remindme_default btn_remindme_clear">消除<span></span></a>\n</div>\n<div class="remindme_all_operate">\n	<a href="javascript:void(0)" data-handler="prev" class="btn_remindme_arrow_prev btn_remindme_prev"></a>\n	<span class="remindme_all_now_count">'+(null==(__t=index+1)?"":__t)+"/"+(null==(__t=count)?"":__t)+'</span>\n	<a href="javascript:void(0)" data-handler="next" class="btn_remindme_arrow_next btn_remindme_next"></a>\n	<a href="javascript:void(0)" class="btn_remindme_tip">展开全部</a>\n</div>';
return __p},this.JST["common/plugins/remindme-widget/remindme-widget"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<ul class="remindme_list_container">\n	\n</ul>\n<div class="remindme_list_foot">\n	<div class="remindme_foot_line"></div>\n	<div class="remindme_item_animate"></div>\n	<div class="remindme_item_content"></div>\n	<div class="remindme_item_btn_group"> \n		<a href="javascript:void(0)" class="btn_remindme_blue btn_remindme_later_all">全部稍后<span></span></a>\n		<a href="javascript:void(0)" class="btn_remindme_default btn_remindme_clear_all">全部消除<span></span></a>\n	</div>\n	<div class="remindme_all_operate">\n		<span class="remindme_list_foot_count">共<span>'+(null==(__t=count)?"":__t)+'</span>个提醒</span>\n		<span class="btn_remindme_tip">收起全部</span>\n		<a href="javascript:void(0)" class="a"></a>\n	</div>\n</div>';return __p},this.JST["common/plugins/tdialog/dialog"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="arrow"></div>\n',settings.showClosed&&(__p+='\n	<span class="icon-dialog-closed closed_dialog"></span>\n'),__p+='\n<div class="content_dialog"></div>\n',(settings.sure||settings.cancel)&&(__p+='\n<div class="uibutton">\n	',settings.sure&&(__p+='\n		<a data-bypass href="'+(null==(__t=settings.sureLink?settings.sureLink:"javascript:void(0);")?"":__t)+'"   class="btn btn-sure sure_dialog">'+(null==(__t=settings.sureText)?"":__t)+"</a>\n		"),__p+="\n	",settings.cancel&&(__p+='\n	<a href="javascript:void(0);" title="" class="btn btn-cancel cancel_dialog">'+(null==(__t=settings.cancelText)?"":__t)+"</a>\n	"),__p+="\n</div>\n");return __p},this.JST["common/pubdaily/pubdaily"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="	","dialog"==shape&&(__p+='\n	<div class="title_dp">\n		<div class="left_dp">'+(null==(__t=dialogTilte)?"":__t)+'</div>\n		<div class="right_dp">\n			<span class="icon-dialog-closed closed_dp" data-name="closed"></span>\n		</div>\n	</div>\n	'),__p+='\n	<div class="action_dp">\n		',"dialog"!=shape&&(__p+='\n		<div class="left_dp">'+(null==(__t=dialogTilte)?"":__t)+"</div>\n		"),__p+='\n		<div class="right_dp">\n			<ul class="check_dp" data-name="check-area">\n				\n			</ul>\n			',3!=dailyType&&(__p+='\n				<button class="btn" data-name="generate">生成'+(null==(__t=1==dailyType?"日报":"周报")?"":__t)+'</button>\n				<button class="btn" data-name="auto-send">发送邮件</button>\n			'),__p+='\n		</div>\n	</div>\n	<div data-name="pub-daily-form"></div>\n';return __p},this.JST["common/search-filter/search-filter-component"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)isShowTime&&(__p+='\n   <div class="report_label" data-name="report-date"></div>\n'),__p+="\n",isShowStaff&&(__p+='\n   <div class="report_label" data-name="report-staff"></div>\n'),__p+="\n",isShowType&&(__p+='\n  <div class="report_label" data-name="report-type"></div>\n'),__p+="\n",isShowStatus&&(__p+='\n   <div class="report_label" data-name="report_status_filter"></div>\n'),__p+="\n",isShowRange&&(__p+='\n   <div class="report_label" data-name="report_range_filter"></div>\n'),__p+="\n",isShowKey&&(__p+='\n   <div class="report_label" data-name="report_key_filter"></div>\n');return __p},this.JST["common/search-filter/search-filter-date"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<span class="report_title">'+__e(TimeLabelText)+'</span>\n<div class="report_desc">\n	<div class="input-default">\n		'+(null==(__t=startDate)?"":__t)+" - "+(null==(__t=endDate)?"":__t)+"	\n	</div>\n</div>";return __p},this.JST["common/search-filter/search-filter-key"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<span class="report_title">'+__e(KeyLabelText)+'</span>\n<div class="report_desc">\n	<div class="input-default">	\n		<input type="text" placeholder="'+__e(keyPlaceHolder)+'" />\n	</div>\n</div>\n';return __p},this.JST["common/search-filter/search-filter-range"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<span class="report_title">'+__e(RangeLabelText)+'</span>\n<div class="choose">\n	<div class="item" data-name="range-all" data-status="'+(null==(__t=checkRangeAll?1:0)?"":__t)+'">\n		<span class="check checkbox'+(null==(__t=checkRangeAll?"-checked":"")?"":__t)+'"><span class="ico"></span></span>\n		<span class="label">全选</span>\n		\n	</div>\n	<div class="item" data-name="range" data-type="charge" data-status="'+(null==(__t=charge?1:0)?"":__t)+'">\n		<span class="check checkbox'+(null==(__t=charge?"-checked":"")?"":__t)+'"><span class="ico"></span></span>\n		<span class="label">我负责的</span>\n	</div>\n	<div class="item" data-name="range"  data-type="pass" data-status="'+(null==(__t=pass?1:0)?"":__t)+'">\n		<span class="check checkbox'+(null==(__t=pass?"-checked":"")?"":__t)+'"><span class="ico"></span></span>\n		<span class="label">我派发的</span>\n	</div>\n	<div class="item" data-name="range"  data-type="join" data-status="'+(null==(__t=join?1:0)?"":__t)+'">\n		<span class="check checkbox'+(null==(__t=join?"-checked":"")?"":__t)+'"><span class="ico"></span></span>\n		<span class="label">我参与的</span>\n	</div>\n</div>';return __p},this.JST["common/search-filter/search-filter-staff"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<a href="javascript:void(0);" title="" class="checkbox ',checked&&(__p+="checkbox-checked"),__p+='"><span class="ico"></span></a>\n',UserAvatar&&(__p+="\n    "+(null==(__t=_.convertImage({src:UserAvatar.Small,size:30,name:Name,bgColor:UserAvatar.Color}))?"":__t)+"\n"),__p+="\n";return __p},this.JST["common/search-filter/search-filter-status"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<span class="report_title">'+__e(StatusLabelText)+'</span>\n<div class="choose">\n	<div class="item" data-name="all" data-status="'+(null==(__t=checkAll?1:0)?"":__t)+'">\n		<span class="check checkbox'+(null==(__t=checkAll?"-checked":"")?"":__t)+'"><span class="ico"></span></span>\n		<span class="label">全选</span>\n		\n	</div>\n	<div class="item" data-name="status" data-type="ing" data-status="'+(null==(__t=ing?1:0)?"":__t)+'">\n		<span class="check checkbox'+(null==(__t=ing?"-checked":"")?"":__t)+'"><span class="ico"></span></span>\n		<span class="label">进行中</span>\n	</div>\n	<div class="item" data-name="status" data-type="done" data-status="'+(null==(__t=done?1:0)?"":__t)+'">\n		<span class="check checkbox'+(null==(__t=done?"-checked":"")?"":__t)+'"><span class="ico"></span></span>\n		<span class="label">已完成</span>\n	</div>\n	<div class="item" data-name="status" data-type="postbone" data-status="'+(null==(__t=postbone?1:0)?"":__t)+'">\n		<span class="check checkbox'+(null==(__t=postbone?"-checked":"")?"":__t)+'"><span class="ico"></span></span>\n		<span class="label">已延迟</span>\n	</div>\n	<div class="item" data-name="status" data-type="cancel" data-status="'+(null==(__t=cancel?1:0)?"":__t)+'">\n		<span class="check checkbox'+(null==(__t=cancel?"-checked":"")?"":__t)+'"><span class="ico"></span></span>\n		<span class="label">已取消</span>\n	</div>\n	<div class="item" data-name="status" data-type="unstart" data-status="'+(null==(__t=unstart?1:0)?"":__t)+'">\n		<span class="check checkbox'+(null==(__t=unstart?"-checked":"")?"":__t)+'"><span class="ico"></span></span>\n		<span class="label">未开始</span>\n	</div>\n	<div class="item" data-name="status" data-type="stop" data-status="'+(null==(__t=stop?1:0)?"":__t)+'">\n		<span class="check checkbox'+(null==(__t=stop?"-checked":"")?"":__t)+'"><span class="ico"></span></span>\n		<span class="label">暂停中</span>\n	</div>\n</div>';return __p},this.JST["common/search-filter/search-filter-type"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){__p+='<span class="report_title">'+__e(TypeLabelText)+'</span>\n<div class="report_desc">\n	<div class="input-default ',typeList&&typeList.length&&(__p+="input-blur"),__p+='" data-name="report-type-checked">	\n		';var arr=[];_.each(typeList,function(a){1==a.type?arr.push(a.fullName||a.name):2==a.type&&arr.push('<span class="icon-work-small"></span>'+(a.fullName||a.name))}),__p+="\n		"+(null==(__t=arr.length?arr.join(","):"所有分类")?"":__t)+"\n	</div>\n</div>\n"}return __p},this.JST["common/search-filter/staff-list-composite"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<span class="report_title">'+__e(StaffLabelText)+'</span>\n<div class="report_desc">\n	',isShowAll&&(__p+='\n		<div class="all_checked">\n			<a href="javascript:void(0);" title="" class="checkbox checkbox-checked" data-name="all-checked"><span class="ico"></span></a>\n			<em>全选</em>\n		</div>\n	'),__p+="\n</div>";return __p},this.JST["common/search-form"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<form>\r\n<div class="input-default">\r\n	<a href="javascript:void(0);" title="" class="button_sfl" data-type="submit-content" ><span class="icon-search"></span></a>\r\n	<input type="text" data-type="new-content" autocomplete="off" />\r\n</div>\r\n</form>';return __p},this.JST["common/search-user/form"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="form"><div class="input-default" ><input type="search" value="" /></div></div>';return __p},this.JST["common/search-user/tab"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="menutab">\r\n	<a href="javascript:void(0);" title="" class="active" data-type="often">常用联系人</a>\r\n	<a href="javascript:void(0);" title="" data-type="search">搜索</a>\r\n</div>';return __p},this.JST["common/search-user/user-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\r\n<a href="javascript:void(0);" title="">\r\n	'+(null==(__t=Avatar)?"":__t)+'\r\n	<span class="name_uil">'+(null==(__t=Name)?"":__t)+'</span>\r\n	<span class="mail_uil">'+(null==(__t=Email)?"":__t)+"</span>\r\n</a>\r\n\r\n";return __p},this.JST["common/search-user/user"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="useritemlist">\r\n	<ol>\r\n	</ol>\r\n</div>';return __p},this.JST["common/search-user/warp"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="lay_form"></div>\r\n<div class="lay_menutab"></div>\r\n<div class="lay_userList"></div>\r\n';return __p},this.JST["common/send-notice/add-user-list"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<em class="ux_add_btn"></em>\n<ul></ul>';return __p},this.JST["common/send-notice/add-user"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<a href="javascript:void(0)" title="删除:'+(null==(__t=name)?"":__t)+'" class="ux_user_area">'+(null==(__t=imgTemplate)?"":__t)+"</a>";return __p},this.JST["common/send-notice/send-notice-component"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="title_nm" data-name="title">'+(null==(__t=title)?"":__t)+'</div>\r\n<div class="userwho">\r\n	<div class="title_uw">通知对象：</div>\r\n	<div class="list_uw" data-name="user-list"></div>\r\n</div>\r\n<div class="sendbox">\r\n	<div class="mailtemplate">\r\n		',__p+=isMailEdit?'\r\n			<div class="input-default" data-name="mail-cont"><textarea name="" rows="" cols=""></textarea></div>\r\n		':'\r\n			<div class="input-default input-disable" data-name="mail-cont"><textarea name="" rows="" cols="" disabled="true">'+(null==(__t=mailContent)?"":__t)+"</textarea></div>\r\n		",__p+='\r\n		<ul class="settype">\r\n		',isShowSystemNotice&&(__p+='\r\n			<li>\r\n				<a href="javascript:void(0);" class="checkbox-disable"><span class="ico"></span></a>\r\n				<strong>系统通知</strong><span>（内容为系统自动生成）</span>\r\n			</li>\r\n		'),__p+="\r\n		<!--",isShowFormalNotice&&editFormalNotice?(__p+='\r\n			<li>\r\n				<a href="javascript:void(0);" class="checkbox ',checkedSendMail&&(__p+="checkbox-checked"),__p+='" data-name="send-official-mail"><span class="ico"></span></a>\r\n				<strong>正式邮件通知</strong><span>（内容需自行编辑）</span>\r\n			</li>\r\n		'):isShowFormalNotice&&!editFormalNotice&&(__p+='\r\n			<li>\r\n				<a href="javascript:void(0);" class="checkbox-disable" data-name="send-official-mail"><span class="ico"></span></a>\r\n				<strong>正式邮件通知</strong><span>（内容需自行编辑）</span>\r\n			</li>\r\n		'),__p+='-->\r\n		</ul>\r\n		<div class="senderwrap">\r\n			<ul class="copytoself">\r\n				',isShowWithStatistics&&(__p+='\r\n				<li>\r\n					<a class="checkbox ',checkedWidthStatistics&&(__p+="checkbox-checked"),__p+='" href="javascript:void(0);" data-name="with-statistics"><span class="ico"></span></a>\r\n					<span>附带统计表</span>\r\n				</li>\r\n				'),__p+="\r\n				<li>\r\n				",isEditCopySelf?(__p+='\r\n					<a class="checkbox ',checkedCopySelf&&(__p+="checkbox-checked"),__p+='" href="javascript:void(0);" data-name="copy-my"><span class="ico"></span></a>\r\n					<span>同时抄送我自己</span>\r\n					\r\n				'):__p+='\r\n					<a class="checkbox-disable" href="javascript:void(0);"><span class="ico"></span></a>\r\n					<span>同时抄送我自己</span>\r\n				',__p+="\r\n				</li>\r\n				\r\n			</ul>\r\n		</div>\r\n	</div>\r\n</div>\r\n";return __p},this.JST["common/send-notice/send-notice-user-list-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+=(null==(__t=_.convertImage({className:"avatar_uw",src:avatar.Small,size:30,shape:"radius",name:name,bgColor:avatar.Color}))?"":__t)+'\r\n\r\n<a href="javascript:void(0);" class="select_uw"><span class="ico"></span></a>\r\n';return __p},this.JST["common/share-range/share-range-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<a href="/u/'+(null==(__t=User.Id)?"":__t)+'">\r\n\r\n	',__p+=0==User.UserAvatar.HasAvatar?"\r\n								\r\n		"+(null==(__t=_.convertImage({className:"",src:User.Avatar,size:30,shape:"radius",name:User.Name,bgColor:User.UserAvatar.Color}))?"":__t)+"\r\n	":'\r\n		<img class="radius_img30" alt="'+(null==(__t=User.Name)?"":__t)+'" src="'+(null==(__t=User.UserAvatar.Small)?"":__t)+'">\r\n	',__p+="\r\n\r\n</a>\r\n",0==Type&&(__p+='<span class="del_sr" id="'+(null==(__t=User.Id)?"":__t)+'" data-name="delete"><i class="ico"></i></span>'),__p+="\r\n";return __p},this.JST["common/share-range/share-range"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="\r\n	<h4>"+(null==(__t=title)?"":__t)+'</h4>\r\n	<ul class="list_sr">\r\n		',isEdit&&(__p+='\r\n		<li class="button_sr"><a href="javascript:void(0);" title="" class="add_sr" data-name="add"><span></span></a></li>\r\n		'),__p+="\r\n	</ul>\r\n";return __p},this.JST["common/share/share-range-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<a href="/u/'+(null==(__t=User.Id)?"":__t)+'">\r\n\r\n	',__p+=0==User.UserAvatar.HasAvatar?"\r\n								\r\n		"+(null==(__t=_.convertImage({className:"",src:User.Avatar,size:30,shape:"radius",name:User.Name,bgColor:User.UserAvatar.Color}))?"":__t)+"\r\n	":'\r\n		<img class="radius_img30" alt="'+(null==(__t=User.Name)?"":__t)+'" src="'+(null==(__t=User.Avatar)?"":__t)+'">\r\n	',__p+="\r\n\r\n</a>\r\n",0==Type&&(__p+='<span class="del_sr" id="'+(null==(__t=User.Id)?"":__t)+'"><i class="ico"></i></span>'),__p+="\r\n";return __p},this.JST["common/share/share-range"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+="\r\n	<h4>共享给谁？</h4>\r\n	<ul>\r\n		",IsEdit&&(__p+='\r\n		<li><a href="javascript:void(0);" title="" class="add_sr"><span></span></a></li>\r\n		'),__p+="\r\n	</ul>\r\n";return __p},this.JST["common/smember/invite-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="narrow"==viewType?'\n	<div class="invite_narrow_item">\n		<img src="//st-web.tita.com/titacn/tita/common/images/default_man_middle.jpg"/>邀请'+(null==(__t=name)?"":__t)+"加入\n	</div>\n":'\n	<div class="invite_item_wide">\n		<p class="invite_title">ta的邮箱</p>\n		<p class="invite_input"><input type="text" name="email" value="'+(null==(__t=name)?"":__t)+'" autocomplete="off"></p>\n		<p class="invite_tips invite_email_tips"></p>\n		<p class="invite_title invite_title_name">ta的姓名<span>（可选）</span></p>\n		<p class="invite_input"><input type="text" name="name" autocomplete="off"></p>\n		<p class="invite_tips  nvite_name_tips"></p>\n		<a class="btn_invite" href="javascript:void(0)">邀请加入</a>\n		<div class="invite_sucess"><span></span>邀请已发出！</div>\n	</div>\n';return __p},this.JST["common/sort-dropdown-menu/sort-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="item" original-title="',isShowTip.show&&(__p+=null==(__t=isShowTip.txt)?"":__t),__p+='">\n<span class="sort-name">'+(null==(__t=name)?"":__t)+"</span>\n",isSort.show&&(__p+='\n	<span class="sort-icons">\n		<span class="icon tu-icon-sort-up ',"up"==isSort.type&&(__p+="active"),__p+='"></span>\n		<span class="icon tu-icon-sort-down  ',"down"==isSort.type&&(__p+="active"),__p+='"></span>\n	</span>\n'),__p+="\n</div>\n\n\n";return __p},this.JST["common/tag-dialog/index-page"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='\n<div class="tit_amd">选择人员标识</div>\n<div class="list_adm">\n	<ul class="clearfix">\n	</ul>\n	<div class="kf_adm">如需 <b>自定义标识</b>，请联系客服<br>电话： 400 650 3180<br>QQ：1945 5939 03</div>\n</div>\n<div class="action_adm">\n	<a href="#" title="" class="btn-sure">确定</a>\n	<a href="#" title="" class="btn-cancel">取消</a>\n</div>\n\n';return __p},this.JST["common/tag-dialog/tag-item"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<input type="radio" title="首席执行官" name="mark" id="8378197F-B1B4-4190-A5AC-E717172F717C">\n<span>首席执行官</span><img src="//st-web.tita.com/titacn/tita/admin/luotro/img/CEO.png" alt="">';return __p},this.JST["common/tag"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="no-check ',(beCheck||del)&&(__p+="be-check"),__p+='">\n<div class="tag-wrap clearfix" data-name="tag-wrap">\n	<div class="tag-main ',__p+=gray?"gray":"color"+(null==(__t=color)?"":__t),__p+='" data-name="tag-main">\n		',beCheck&&!gray&&(__p+='\n		<span class="tu-icon-fontchoosen checked"></span>\n		'),__p+='\n		<span class="text">'+(null==(__t=tagName)?"":__t)+"</span>\n		",del&&!gray&&(__p+='\n		<span class="del tu-icon-fontclose" data-name="tag-del"></span>\n		'),__p+="\n	</div>\n	",showOrter&&(__p+='\n	<div class="tag-other" data-name="tag-other">\n		',2==getWay&&(__p+='\n		<span class="share-in tu-icon-fontsharetome" original-title="来自'+(null==(__t=fromUserName)?"":__t)+'的共享" data-name="share-in"></span>\n		'),__p+="\n		",1==shareType&&(__p+='\n		<span class="share-out tu-icon-fontsharedbyme" original-title="已共享给直属下级" data-name="share-out"></span>\n		'),__p+="\n		",objCount&&(__p+='\n		<span class="count" original-title="标签下工作事项数量" data-name="count">'+(null==(__t=objCount)?"":__t)+"</span>\n		"),__p+="\n	</div>\n	"),__p+="\n</div>\n</div>";return __p},this.JST["common/todo-composite"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div id="test" style="width : 200px;height :200px; border:1px solid red; background-color:#fff;">\n<form>\n	<input name="new-content" autocomplete=off />\n	<input type="submit" name="submit" />\n</form>\n<ul>\n</ul>\n</div>';return __p},this.JST["common/treeview/tree-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="title_tv" data-name="title">\r\n	',0==isEnd&&(__p+='\r\n	<span class="icon_tv" data-name="toggle"></span>\r\n	'),__p+='\r\n	<span class="text_tv">'+(null==(__t=Name)?"":__t)+"</span>\r\n</div>\r\n<ul></ul>\r\n";return __p},this.JST["common/uploader/uploader-item"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="uploader_container"></div>\n<div  class="error_container" style="padding-top: 8px; display: none;"></div>\n<div class="preview_container"></div>\n<div class="loading_view" style="padding-top: 8px; display: none;padding-left:75px;"></div> ';return __p},this.JST}),String.prototype.trim=function(){for(var a=this,b=0,c=a.length,d="",e=0;e<a.length;e++)d+=a.charCodeAt(e)+" ";for(var e=0;e<a.length;e++){var f=a.charCodeAt(e);if(f>=33){b=e;break}b++}for(var e=a.length;e>b;e--){var f=a.charCodeAt(e-1);if(f>=33){c=e;break}}return a.substring(b,c)};var clicked=!1,windowNameSeq=0,windows=new Array;define("views/common/onlineservice/jivelive",function(){}),define("views/common/onlineservice/onlineservice-view",["talent","views/common/onlineservice/jivelive","templates/common"],function(a,b,c){return a.View.extend({template:c["common/onlineservice/onlineservice"],className:"tt_right_suspend",events:{"click ":"clickRightSuspend"},initialize:function(){var b=this,c=a.Context.getGlobal("tenant_function");c.IsOpenCustomerService&&(setTimeout(function(){require(["http://wpa.b.qq.com/cgi/wpa.php"],function(){a.Context.getStaticUrl("images/onlineserver.jpeg");b.onlineServiceBtn=a.$('<div id="BizQQWAP" ></div>'),$("body").append(b.onlineServiceBtn),BizQQWPA.addCustom({aty:"0",a:"0",nameAccount:800013946,selector:"BizQQWAP"})})},3e3),a.app.vent.on("route",function(a){"daily"==a[0]||"plan"==a[0]||"widget"==a[0]?b.onlineServiceBtn&&b.onlineServiceBtn.length&&b.onlineServiceBtn.hide():b.onlineServiceBtn&&b.onlineServiceBtn.length&&b.onlineServiceBtn.show()}))},clickRightSuspend:function(a){a.stopPropagation(),a.preventDefault()}})}),define("templates/more",[],function(){return this.JST=this.JST||{},this.JST["more/apply/index-page"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="_tt_layout_tabnav">	\n	<div class="tt_side_subnav_wrap">\n		<div data-name="side-bar" class="side_bar">\n			<ul class="_tt_side_subnav">            \n	            <li ',"plan"==name&&(__p+='class="active"'),__p+='>\n	            	<a href="#more/apply?name=plan">团队'+(null==(__t=i18n.plan_1)?"":__t)+"审批</a>\n	            </li>\n	             <li ","work"==name&&(__p+='class="active"'),__p+='>\n	            	<a href="#more/apply?name=work">'+(null==(__t=i18n.work_1)?"":__t)+'审批</a>\n	            </li>\n        	</ul>\n        </div>\n    </div>	\n</div>\n<div class="_tt_layout_container">\n	<div class="tt_messagepage" style="padding:20px;">\n		<div class="pagetitle">\n			<h2 class="ms_pagetitle">\n				<span data-name="page-title">'+(null==(__t=pageTitle)?"":__t)+'</span>\n			</h2>\n		</div>\n		<div class="ms_tablist">\n			<ul>\n				<li state="1" ',1==state&&(__p+='class="current"'),__p+='>\n					<a data-trigger="false"  href="#more/apply?name='+(null==(__t=name)?"":__t)+'&state=1">待审批</a>\n				</li>\n				<li state="2" ',2==state&&(__p+='class="current"'),__p+='>\n					<a data-trigger="false" href="#more/apply?name='+(null==(__t=name)?"":__t)+'&state=2">已同意</a>\n				</li>\n				<li state="3" ',3==state&&(__p+='class="current"'),__p+='>\n					<a data-trigger="false" href="#more/apply?name='+(null==(__t=name)?"":__t)+'&state=3">已驳回</a>\n				</li>\n			</ul>\n		</div>\n		<div class="apply_list">\n			<div data-name="apply-betch"></div>\n			<div data-name="apply-common-list"></div>\n		</div>\n</div>\n<div class="tt_plan_detail_container"></div>';return __p},this.JST["more/archives/index-page"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='	<!-- side sub nav -->\n	<div class="_tt_layout_tabnav tu-col-3" data-tu-submenu="tu-submenu">\n	</div>\n	<!-- side sub nav end -->\n	<div class="_tt_layout_container  tu-col-13" data-name="container">\n		<div class="tt_iframe_container">\n			<div class="pagetitle">\n				<h2 class="app_pagetitle"></h2>\n			</div>\n			<div class="_tt_loading_m">努力加载中…</div>\n			<div class="tt_iframe_iframe"><iframe allowTransparency="true" src="" width="100%" height="100%" frameborder="0" scrolling="auto" id="italent_settings_iframe" wmode="transparent"> </iframe></div>\n		</div>\n	</div>';return __p},this.JST["more/archives/italent-settings-side-nav"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)"undefined"!=typeof items?(__p+='\r\n<div class="settings_avatar">\r\n	<a href="" class="avatar_sa" title=""><img class="radius_img50" src="'+(null==(__t=avatar)?"":__t)+'" width="50" height="50"></a>\r\n	<div class="name_sa">\r\n		'+(null==(__t=username)?"":__t)+'\r\n	</div>\r\n</div>\r\n<ul class="_tt_side_subnav">			\r\n	',_.each(items,function(a){__p+='\r\n		<li>\r\n			<a data-trigger="false" href="#more/archives?appid='+(null==(__t=routerData.appid)?"":__t)+"&apptype="+(null==(__t=routerData.apptype)?"":__t)+"&key="+(null==(__t=a.key)?"":__t)+'">'+(null==(__t=a.name)?"":__t)+"</a>\r\n		</li>\r\n	"}),__p+="\r\n</ul>\r\n"):__p+="\r\n	<li>加载中...</li>\r\n";return __p},this.JST["more/customizepage/index-page"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="customizepage" data-name="customize-page"></div>';return __p},this.JST["more/dailyinfo/index-page"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="tt_shareinfo">\n	<div class="pagetitle">\n		<h2 class="shareinfo_pagetitle">\n			<span class="ico_pt"></span>\n			<span>查看日报详情</span>\n		</h2>\n	</div>\n	<div class="feedlist">\n	</div>\n</div>\n';return __p},this.JST["more/due-to-remind/index-page"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="due_body_container">\n<div class="due_body">\n<div class="dont_hd">\n	尊敬的tita用户:\n		<p>感谢您使用企业级工作'+(null==(__t=i18n.plan_1)?"":__t)+"管理平台！</p>\n		",__p+=1==tenantAuthentication.ExpireType?'\n		<p>使用权限将在<span class="num_hd">'+(null==(__t=tenantAuthentication.Day)?"":__t)+'</span>天后<span class="date_hd">'+(null==(__t=tenantAuthentication.DeadLine)?"":__t)+"</span>到期</p>\n		":'\n		<p>使用权限已于<span class="date_hd">'+(null==(__t=tenantAuthentication.DeadLine)?"":__t)+'</span><span class="com-status2">到期</span> </p>\n		',__p+="\n</div>\n\n",1==tenantAuthentication.ExpireType&&(__p+='\n<div class="action_hd clearfix">\n	<div class="renew">\n		<a href="javascript:void(0);" link="#more/pay?package_id=F66281C3-A2E8-4429-8EE9-2830C74E4F0E&from=fromdue" class="renewal" target="_top" data-name="renewal">咨询续费</a>\n		<p>发送邮件给销售顾问尽快和您联系</p>\n	</div>\n	',2==loginUserInfo.Role&&(__p+="\n		",__p+=1==tenantAuthentication.Version?'\n		<div class="buy-tita">\n			<a href="javascript:void(0);" link="#more/pay?package_id=F66281C3-A2E8-4429-8EE9-2830C74E4F0E&from=fromdue" title="" class="buy-btn" target="_top" data-name="buy">立即购买</a>\n			<p>\n				为了不影响您的使用<br/>建议立即购买\n			</p>\n		</div>\n		':'\n		<div class="buy-tita">\n			<a href="javascript:void(0);" link="#more/pay?package_id=F66281C3-A2E8-4429-8EE9-2830C74E4F0E&from=fromdue" title="" class="buy-btn" target="_top" data-name="buy">立即续费</a>\n			<p>\n				为了不影响您的使用<br/>建议立即续费\n			</p>\n		</div>\n		',__p+="\n	"),__p+="\n	",__p+=1==tenantAuthentication.ExpireType?'\n	<div class="enter-tita">\n		<a href="javascript:void(0);"  link="#home?from=fromdue" title="" class="enter-btn" target="_top">进入tita</a>\n		<p>\n			开始'+(null==(__t=i18n.plan_1)?"":__t)+"管理\n			<br/>&nbsp;\n		</p>\n	</div>\n	":'\n	<div class="enter-tita">\n		<a href="/Account/Logout" title="" class="enter-tita" target="_top">退出登录</a>\n		<p>\n			回到tita首页\n			<br/>&nbsp;\n		</p>\n	</div>\n	',__p+="\n</div>\n"),__p+='\n<div class="tita-boy"></div>\n</div>\n\n</div>\n\n<div class="bottom_hd">\n	<span class="tip-telephone">\n		4006 503 180 \n	</span>\n	<span class="tip-email">\n		<a href="mailto:kefu@tita.com">kefu@tita.com</a>\n	</span>\n	<span class="tip-kefu" data-name="due-to-remind-keku">\n		在线客服\n	</span>\n	<span class="right-bottom">\n		<a href="'+(null==(__t=helpHost)?"":__t)+'/ProPrice/VersionPrice" title="">版本功能定价</a>　\n		<a href="'+(null==(__t=helpHost)?"":__t)+'/ProPrice/WhyChoiceUs" title="">为什么选我们？</a>\n	</span>\n</div>\n';return __p},this.JST["more/guide/all/content"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="box_bg">\n    <div class="mod_gb">\n        <div class="tt_guide_titaenter">\n            <ul class="intro_te">\n                <li class="why_ite"><a class="why_ite_s" href="//preview.tita.com/op/view.aspx?src=http%3A%2F%2Fdfiles.tita.com%2FPortal%2F110006%2F64734a0ce09248ba8b03daa94bb55241.pdf&tenantId=110006&userId=107937286" target="_blank"><span>产品介绍</span></a></li>\n                <li class="why_ite"><a  href="//service.tita.com/pages/viewpage.action?pageId=589846" target="_blank"><span>产品<br/>使用帮助</span></a></li>\n                <li class="why_ite"><a class="why_ite_s" href="//preview.tita.com/op/view.aspx?src=http%3A%2F%2Fdfiles.tita.com%2FPortal%2F110006%2Fabcf3671bdcb4aa5bbcc0d8678ed590e.pdf&tenantId=110006&userId=100055580" target="_blank"><span>典型场景</span></a></li>\n                <li class="why_ite"><a href="'+(null==(__t=helpHost)?"":__t)+'/ProPrice/WhyChoiceUs" target="_blank"><span>为什么<br/>选择我们</span></a></li>\n            </ul>\n            <div class="other_te">\n                您可能需要： <a href="javascript:void(0);" data-type="manager">超管入门</a>\n                <a href="javascript:void(0);" data-type="plan">\n                    '+(null==(__t=i18n.plan_1)?"":__t)+"入门</a>\n                ",IsUsePlanDaily&&(__p+='<a href="javascript:void(0);" data-type="daily">日报入门</a>\n                    '),__p+='<a href="javascript:void(0);" data-type="group">团队入门</a> <a href="javascript:void(0);" data-name="peixun" data-type="3">申请培训服务</a>\n            </div>\n            <div class="tel_te">\n                <a class="btn_bg online_te" href="javascript:void(0);" data-name="concat" data-type="1"><b class="icon-kefu"></b> <b>我要咨询</b></a><span class="other_tte">&nbsp;&nbsp;&nbsp;&nbsp;\n            <a href="http://wpa.qq.com/msgrd?v=1&uin=800013946&site=在线客服&menu=yes" target="_blank">QQ在线咨询</a>&nbsp;&nbsp;&nbsp;&nbsp;电话 400 650 3180&nbsp;&nbsp;&nbsp;&nbsp;邮箱 <a href="mailto:kefu@tita.com">kefu@tita.com </a>&nbsp;&nbsp;&nbsp;&nbsp;帮助 <a href="'+(null==(__t=helpHost)?"":__t)+'" target="_blank">'+(null==(__t=help)?"":__t)+"</a></span>\n            </div>\n        </div>\n    </div>\n</div>\n";return __p},this.JST["more/guide/daily/content"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="box_bg">\r\n			<dl class="mod_gb">\r\n				<dt>创建个人日报：</dt>\r\n				<dd>• 动态页、'+(null==(__t=i18n.plan_1)?"":__t)+'页、工作台都可快速创建日报，支持补交</dd>\r\n				<dd>• <a href="#daily" title="" target="_top" data-href="tita">查看我每天的日报</a>，回顾检查，及时修改</dd>\r\n			    <dd>• 系统帮您全面盘查日报历史，实时统计每月递交状况</dd>\r\n			</dl>\r\n\r\n			<dl class="mod_gb">\r\n				<dt>管理团队日报：</dt>\r\n				<dd>• 一键提醒团队写日报，<a href="#set?page_id=plan" title="" target="_top" data-href="tita">支持自动提醒</a>，强化管理</dd>\r\n			    <dd>• <a href="#daily?type=group" title="" target="_top" data-href="tita">查看团队日报</a>，酷炫报表完美呈现全员递交状况</dd>\r\n				<dd>• 融入绩效，领导批阅下属日报实现评价打分制</dd>\r\n			</dl>\r\n		</div>';return __p},this.JST["more/guide/group/content"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="box_bg">\n			<dl class="mod_gb">\n				<dt>团队管理，三步快速上手：</dt>\n				',__p+=IsUseSetOrg?'\n					<dd>1. 设置<a href="#set?page_id=plan">团队成员</a></dd>\n				':"\n					<dd>1. 设置团队成员</dd>\n				",__p+="\n				<dd>2. 通知大家写"+(null==(__t=i18n.plan_1)?"":__t)+"</dd>\n				<dd>3. 查看团队"+(null==(__t=i18n.plan_1)?"":__t)+'</dd>\n			</dl>\n\n			<dl class="mod_gb">\n				<dt>向上汇报，您可以：</dt>\n				<dd>• 提醒上级查看'+(null==(__t=i18n.plan_1)?"":__t)+"</dd>\n			</dl>\n		</div>";return __p},this.JST["more/guide/guide-concat"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+=isEdit?'\n<ul>\n	<li>\n		<div class="input-default" data-name="content"><textarea></textarea></div>\n	</li>\n</ul>\n':'\n<div class="apply_gc">\n	<p>需要tita工作人员<br>提供此项服务？</p>\n	<button class="btn btn-success" data-name=\'to-apply\'>立即申请</button>\n</div>\n';return __p},this.JST["more/guide/guide-sidebar"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="tit_gb">导览</div>\n<ul class="nav_gb">\n	<li class="active"><a href="javascript:void(0);" title=""><span class="filter_gb">P</span>'+(null==(__t=i18n.plan_1)?"":__t)+'</a></li>\n	<li><a href="javascript:void(0);" title=""><span class="filter_gb">D</span>执行</a></li>\n	<li><a href="javascript:void(0);" title=""><span class="filter_gb">C</span>检查</a></li>\n	<li><a href="javascript:void(0);" title=""><span class="filter_gb">A</span>处理</a></li>\n</ul>';
return __p},this.JST["more/guide/index-page"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='\n<a href="javascript:void(0);" title="" class="closed_guidebottom" data-name="closed"><span class="icon-closed "></span></a>\n<div class="guidebottom clearfix">\n	<div class="left_gb">\n		<div data-name="title" class="tit_gb"></div>\n		<div data-name="sidebar"></div>\n	</div>\n	<div class="right_gb" data-name="content">\n	</div>\n</div>\n\n';return __p},this.JST["more/guide/manager/content"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="box_bg">\n	<dl class="mod_gb">\n		<dt>超管入门，教你如何迅速添加员工：</dt>\n		',__p+=1==loginUser.Role||2==loginUser.Role||4==loginUser.Role?'\n			<dd>• 进入超管后台 <a href="'+(null==(__t=tmNewHost)?"":__t)+'#staff" title="" target="_blank">员工管理页</a> 新增员工</dd>\n		':"\n			<dd>• 进入超管后台 员工管理页 新增员工</dd>\n		",__p+='\n		<!-- <dd>• 你还可以发送群邮件 <a href="/u/'+(null==(__t=loginUser.Id)?"":__t)+'/Invite/InviteMoreIndex" title="" target="_blank">一键邀请</a> ，或者复制批量邀请链接</dd> -->\n		<dd>• 你还可以发送群邮件 <a href="'+(null==(__t=url)?"":__t)+'" title="" target="_blank">一键邀请</a> ，或者复制批量邀请链接</dd>\n		<dd>• @人的时候，输入邮箱姓名，如果ta尚未注册，可以点击“邀请ta加入”的提示链接</dd>\n	</dl>\n	<!-- <dl class="mod_gb">\n		<dd>• 想直接一次性导入全公司部门员工 <a href="javascript:void(0);" data-name="skip-to-onekey">点击这里</a> </dd>\n	</dl> -->\n</div>\n\n<div class="box_bg">\n	<dl class="mod_gb">\n		<dt>教你如何设置汇报关系：</dt>\n		',__p+=1==loginUser.Role||2==loginUser.Role||4==loginUser.Role?'\n			<dd>• 进入超管后台员工管理页新增员工，并给每个人 <a href="'+(null==(__t=tmNewHost)?"":__t)+'#staff" title="" target="_blank">设置上级</a></dd>\n		':"\n			<dd>• 进入超管后台员工管理页新增员工，并给每个人 设置上级</dd>\n		",__p+='\n		<!-- \n		<dd>• 如果需要个性化一点，还可以在后台员工管理页给BOSS、CEO、COO、CTO... 选择人员标识</dd>\n		<dd>• 需要开通隔级查看功能，请点击以下按钮 <a href="'+(null==(__t=helpHost)?"":__t)+'/ProIntro/BypassLeadership" title="" target="_blank">了解什么是隔级查看</a>\n			<div class="action_mag"><a href="javascript:void(0);" class="btn_bg" data-name="member-ship">申请开通隔级查看</a></div> \n		</dd>\n		<dd>• 想直接一次性导入全公司部门员工 <a href="javascript:void(0);" data-name="skip-to-onekey">点击这里</a> </dd> -->\n	</dl>\n</div>\n\n<div class="box_bg">\n	<dl class="mod_gb">\n		<dt>教你如何搭建组织架构：</dt>\n		',__p+=1==loginUser.Role||2==loginUser.Role||4==loginUser.Role?'\n			<dd>• 进入超管后台 <a href="'+(null==(__t=tmNewHost)?"":__t)+'#org" title="" target="_blank">组织架构管理</a> ，从最上层开始，逐个添加子部门</dd>\n			<dd>• 在后台员工管理页将人员逐个 <a href="'+(null==(__t=tmNewHost)?"":__t)+'#staff" title="" target="_blank">移动到部门</a>，这样组织架构就基本搭建好了</dd>\n		':"\n			<dd>• 进入超管后台 组织架构管理，从最上层开始，逐个添加子部门</dd>\n			<dd>• 在后台员工管理页将人员逐个 移动到部门，这样组织架构就基本搭建好了</dd>\n		",__p+='\n	</dl>\n	<!-- <dl class="mod_gb">\n		<dd>• 想直接一次性导入全公司部门员工 <a href="javascript:void(0);" data-name="skip-to-onekey">点击这里</a> </dd>\n	</dl> -->\n</div>\n\n<div class="box_bg">\n	<dl class="mod_gb">\n		<dt>教你如何公司一键部署：</dt>\n		<dd>• 请直接 <a href="'+(null==(__t=helpHost)?"":__t)+'/ProIntro/ImportUser" title="">下载公司部署模板</a>，填写后拨打400 650 3180，联系tita客服帮忙导入，一步完成所有部门、员工、组织架构、汇报关系的添加\n			<div class="action_mag"><a href="javascript:void(0);" class="btn_bg" data-name="concat" data-type="2">快速申请人工导入</a></div>\n		</dd>\n	</dl>\n</div>';return __p},this.JST["more/guide/plan/content"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="box_bg">\n			<dl class="mod_gb">\n				<dt>个人制定'+(null==(__t=i18n.plan_1)?"":__t)+'：</dt>\n				<dd><a href="#plan?plan_table_id='+(null==(__t=planTableId)?"":__t)+'" title="" target="_blank">• 写本月'+(null==(__t=i18n.plan_1)?"":__t)+'</a></dd>\n				<dd><a href="#plan" title="" target="_blank">• 写本周'+(null==(__t=i18n.plan_1)?"":__t)+"</a></dd>\n				<dd>• 写今日"+(null==(__t=i18n.plan_1)?"":__t)+'（在工作台页面“今日”页签下输入）</dd>\n			</dl>\n\n			<dl class="mod_gb">\n				<dt>团队通知大家写'+(null==(__t=i18n.plan_1)?"":__t)+"：</dt>\n				<dd>\n					",__p+=IsUseSetOrg?'\n						<a href="#set?page_id=plan" title="" target="_blank">• 设置团队成员</a>\n					':"\n						• 设置团队成员\n					",__p+="\n					</dd>\n				<dd>• 通知大家写本月"+(null==(__t=i18n.plan_1)?"":__t)+"</dd>\n				<dd>• 通知大家写本周"+(null==(__t=i18n.plan_1)?"":__t)+'</dd>\n			</dl>\n		</div>\n		<div class="box_bg">\n			<dl class="mod_gb">\n				<dt>个人执行'+(null==(__t=i18n.plan_1)?"":__t)+"：</dt>\n				<dd>• 查看今日"+(null==(__t=i18n.plan_1)?"":__t)+'并遵照执行（查看工作台页面的“今日”页签） </dd>\n			</dl>\n\n			<dl class="mod_gb">\n				<dt>团队推进执行：</dt>\n				<dd>• 在自己的'+(null==(__t=i18n.plan_1)?"":__t)+"中给下属派"+(null==(__t=i18n.task_1)?"":__t)+'</dd>\n			</dl>\n		</div>\n		<div class="box_bg">\n			<dl class="mod_gb">\n				<dt>个人自检回顾：</dt>\n				<dd>• 填写今天的工作日报</dd>\n			</dl>\n\n			<dl class="mod_gb">\n				<dt>团队跟踪处理：</dt>\n				<dd>• 一键提醒大家写日报</dd>\n				<dd>• 查看团队成员本周日报（在ta的本周'+(null==(__t=i18n.plan_1)?"":__t)+'表下切换至“工作日报”页签）</dd>\n				<dd><a href="#plan/histroy" title="" target="_blank">• 查看团队'+(null==(__t=i18n.plan_1)?"":__t)+'操作历史</a></dd>\n			</dl>\n		</div>\n		<div class="box_bg">\n			<dl class="mod_gb">\n				<dt>个人跟踪处理：</dt>\n				<dd>• 在具体的'+(null==(__t=i18n.plan_1)?"":__t)+'下反馈沟通</dd>\n			</dl>\n\n			<dl class="mod_gb">\n				<dt>团队跟踪处理：</dt>\n				<dd>• 一键提醒处理已过期的事情</dd>\n			</dl>\n		</div>';return __p},this.JST["more/index-page"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<h3>Edit your view and template files.</h3>\n<p class="lead">\n	<strong>View: </strong>\n	<small>app/scripts/views/more/index-page-view.js</small>\n</p>\n<p class="lead">\n	<strong>Template: </strong>\n	<small>app/templates/more/index-page.html</small>\n</p>\n<span>click me</span>\n<label style="position:relative" >\n<img width="50" height="50" src="//st-web.tita.com/titacn/tita/common/feed/skin_01/img/logo_work.gif" alt="图片">\n	<span style="position:absolute;top:0px;left:0px">aabb</span>\n</label>';return __p},this.JST["more/indicatormsg/index-page"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="tt_fromindicator">\n	<div class="pagetitle">\n		<h2 class="ms_pagetitle">\n			',__p+=13==indicatorType?'\n				<span class="ico_reward"></span>\n			':'\n				<span class="ico_pt"></span>\n			',__p+="\n			<span>"+(null==(__t=pagetitle)?"":__t)+'</span>\n		</h2>\n	</div>\n	<div class="feedlist">\n	</div>\n</div>\n';return __p},this.JST["more/messages/daiban-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="list_mlm '+(null==(__t=2==isRead?"has-read":"")?"":__t)+'">'+(null==(__t=title)?"":__t)+'</div>\n<div class="list_mll">\n   <div class="img_list">\n   		',User&&(__p+='\n   		<a href="/u/'+(null==(__t=User.userId)?"":__t)+'">\n   			'+(null==(__t=_.convertImage({className:"",src:User.avatar.Small,size:30,shape:"radius",name:User.name,bgColor:User.avatar.Color}))?"":__t)+"\n   		</a>\n   		"),__p+='\n   		\n   </div>\n   <div class="text_list">\n		<span>\n			',User&&(__p+='\n   			<a class="name_ml" href="/u/'+(null==(__t=User.userId)?"":__t)+'">'+(null==(__t=User.name)?"":__t)+"</a>\n   		"),__p+='\n         <span class="sub-title">'+(null==(__t=subTitle)?"":__t)+'</span>\n			<span class="content_ml daiban">'+(null==(__t=content)?"":__t)+"</span>\n         ",__p+=isPush?'\n         <a href="javascript:void(0);" data-name="push" task-id="'+(null==(__t=objId)?"":__t)+'">查看详情</a>\n         ':'\n         <a href="'+(null==(__t=url)?"":__t)+'" task-id="'+(null==(__t=objId)?"":__t)+'" target="_blank" >查看详情</a>\n         ',__p+='\n   	</span>\n   		<div class="date_ml">'+(null==(__t=createDate)?"":__t)+"</div>\n   </div>\n</div>\n\n";return __p},this.JST["more/messages/index-page"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="_tt_layout_subnav_fluid">\n	<div class="_tt_layout_tabnav" data-name="tt-sidebar">\n	</div>\n	<div class="_tt_layout_container" data-name="message-main">\n		\n	</div>\n</div>\n\n\n';return __p},this.JST["more/messages/message-compsite"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<ul class="list_ml"></ul>\n<div class="pagelist ">\n	<div class="pagination"></div>\n</div>\n		\n\n';return __p},this.JST["more/messages/message-layout"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="sub-tab-container">\n	<div class="sub-tab">\n		<div data-name="read-type" data-type="1" class="current tab-item '+(null==(__t=1==isRead?"active":"")?"":__t)+'">'+(null==(__t=1==messageType?"当前":"未读")?"":__t)+'</div>\n		<div data-name="read-type"  data-type="2" class="history tab-item '+(null==(__t=2==isRead?"active":"")?"":__t)+'">'+(null==(__t=1==messageType?"历史":"已读")?"":__t)+'</div>\n	</div>\n</div>\n\n<div class="list-container" data-name="list-container">\n</div>';return __p},this.JST["more/messages/message-list"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="list_mlm msg '+(null==(__t=2==isRead?"has-read":"")?"":__t)+'">'+(null==(__t=messageName)?"":__t)+'</div>\n<div class="list_mll">\n   <div class="img_list">\n   		',user&&(__p+='\n   		<a href="/u/'+(null==(__t=user.userId)?"":__t)+'">\n   			'+(null==(__t=_.convertImage({className:"",src:user.avatar.Small,size:30,shape:"radius",name:user.name,bgColor:user.avatar.Color}))?"":__t)+"\n\n   		</a>\n   		"),__p+='\n   </div>\n   <div class="text_list">\n		<span>\n			   ',user&&(__p+='\n   			<a class="name_ml" href="/u/'+(null==(__t=user.userId)?"":__t)+'">'+(null==(__t=user.name)?"":__t)+"</a>\n   			"),__p+="\n\n            ",7==objType?(__p+='\n               <span class="content_ml">'+(null==(__t=content)?"":__t)+"</span>\n               ",isNew&&(__p+="\n                  ",__p+=isPush&&28!=messageType&&55!=messageType?'\n                     <a href="javascript:void(0);" task-id="'+(null==(__t=objId)?"":__t)+'" data-name="push">查看详情</a>\n                  ':'\n                     <a href="'+(null==(__t=url)?"":__t)+'">查看详情</a>\n                  ',__p+="\n               "),__p+="\n               ",28==messageType&&(__p+='\n                  <button class="thk-btn" data-name="thk-reward">谢赏~</button>\n               '),__p+="\n            "):(__p+="\n      			",__p+=57==messageType?'\n      				<span class="content_ml">'+(null==(__t=content)?"":__t)+'</span> <span href="'+(null==(__t=lead_messageUrl)?"":__t)+'"  class="link-style enter_ml">查看</span>\n      			':58==messageType?'\n      				<span class="content_ml">'+(null==(__t=content)?"":__t)+'</span> <span href="'+(null==(__t=planDetailUrl)?"":__t)+'"  data-name="push"   class="link-style planDetail" planItemId="'+(null==(__t=objId)?"":__t)+'">查看</span>\n      			':62==messageType?'\n   				<span class="content_ml">'+(null==(__t=content)?"":__t)+'</span>\n   				<a href="'+(null==(__t=workUrl)?"":__t)+'">进入项目</a>\n      			':63==messageType?'\n      				<span class="content_ml">'+(null==(__t=content)?"":__t)+'</span>\n   				<a href="'+(null==(__t=workUrl)?"":__t)+'">重新创建</a>\n      			':64==messageType?'\n                  <span class="content_ml">'+(null==(__t=content)?"":__t)+'</span> <a href="#set?page_id=plan">查看</a>\n               ':41!=messageType||isNew?28==messageType?'\n                  <span class="content_ml">'+(null==(__t=content)?"":__t)+'</span> <button class="thk-btn" data-name="thk-reward">谢赏~</button>\n      			':'\n      				<span class="content_ml">'+(null==(__t=content)?"":__t)+"</span>\n      			":'\n      				<span class="content_ml">'+(null==(__t=content)?"":__t)+'</span> <a href="#set?page_id=plan">查看</a>\n\n               ',__p+="\n            "),__p+='\n   		</span>\n   		<div class="date_ml">'+(null==(__t=createDate)?"":__t)+"</div>\n   </div>\n</div>\n\n";return __p},this.JST["more/messages/message-main"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n\n<div class="tt_messagepage">\n	<div class="pagetitle">\n		<h2 class="ms_pagetitle">\n			<span>消息中心</span>\n		</h2>\n	</div>\n\n	<div class="msg-tab">\n		',950!=tabAppId&&(__p+='\n		<div class="daiban tab-item '+(null==(__t=1==messageType?"active":"")?"":__t)+'"  data-name="msg-tab" data-type="1">\n			<span class="lable">待办</span>\n			<span class="num" data-name="daiban-num">'+(null==(__t=Number(daibanNum)>0?daibanNum:"")?"":__t)+'</span>\n			<span class="border"></span>\n		</div>\n		'),__p+='\n		<div class="message tab-item '+(null==(__t=2==messageType?"active":"")?"":__t)+'"  data-name="msg-tab" data-type="2">\n			<span class="lable">通知</span>\n			<span class="num" data-name="msg-num">'+(null==(__t=Number(msgNum)>0?msgNum:"")?"":__t)+'</span>\n			<span class="border"></span>\n		</div>\n	</div>\n\n	<div class="meslist">\n	</div>\n</div>\n\n\n\n\n';return __p},this.JST["more/messages/sidebar-item"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<a  data-trigger="false"  class="worknavlist_wlsn" href="#more/messages?tabAppId='+(null==(__t=AppId)?"":__t)+"&tabAppType="+(null==(__t=AppType)?"":__t)+'"  data-name="router">\n	<i class="name_wlsn">'+__e(Name)+'</i>\n</a>\n<span class="unread red-remind-num" data-name="head-to-do-indicator">'+(null==(__t=total)?"":__t)+"</span>";return __p},this.JST["more/messages/sidebar"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='								\n<ul class="_tt_side_subnav">\n	<li class="li_parent '+(null==(__t=-1==tabAppId?"active":"")?"":__t)+'"> \n		<a data-trigger="false" href="#more/messages?tabAppId=-1&tabAppType=-1" data-name="router">全部</a>\n		<ul class="worklist_sidenav message_sidenav">\n		\n		</ul>\n	</li>\n</ul>';return __p},this.JST["more/pay/index-page"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="tt_buyingprocess"></div>\n';return __p},this.JST["more/pay/order/index-page"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="tt_payorderdetail"></div>\n';return __p},this.JST["more/pay/order/pay-order-pop"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\n<div class="tit_pp">登录网上银行支付</div>\n<dl class="contain_pp">\n	<dt>请在新窗口完成支付后选择：</dt>\n	<dd class="succ_pp">\n		<span class="icon-radius-success"></span><strong>支付成功</strong>　　<span>您可以选择：<a href="'+(null==(__t=tmUrl)?"":__t)+'" target="_blank">到超管后台查看购买记录</a></span>\n	</dd>\n	<dd class="error_pp">\n		<span class="icon-radius-error"></span><strong>支付失败</strong>　　<span>建议您选择：<a href="javascript:void(0);" title="" data-name="other-pay">其他支付方式</a></span>\n	</dd>\n</dl>\n';return __p},this.JST["more/pay/order/pay-order"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="tt_orderdetailwrap">\n<div class="tt_orderdetail">\n	<div class="tit_od">订单详情　('+(null==(__t=Id)?"":__t)+')</div>\n\n	<div class="cont_od">\n		<ul class="orderlist">\n			<li>企业名称：'+(null==(__t=TenantName)?"":__t)+"</li>\n			<li>时间："+(null==(__t=EffectiveTimeDescription)?"":__t)+"</li>\n			",__p+=isShowPayWay?'\n			<li class="mobile_ol"><span>手机号（必填）：</span>\n				<div class="input-default num_ol" data-name="mobile">\n					<input type="text" value="">\n				</div>\n				<div class="tip_ol">支付成功后将给该号码发送短信确认</div>\n			</li>\n			':"\n			<li>手机号："+(null==(__t=Mobile)?"":__t)+"</li>\n			",__p+='\n			<li class="product_list">\n				<div>产品清单</div>\n				<table>\n					<tr> \n						<th class="col_01">产品</th>\n						<th class="col_02">描述</th>\n						<th class="col_03">单价</th>\n						<th class="col_04">数量</th>\n						<th class="col_05">金额</th>\n					</tr>\n					',_.each(PayOrderItemModels,function(a){__p+="\n					<tr ",1==a.ProductType&&(__p+='class="original_pl"'),__p+='> \n						<td class="name_pl">'+(null==(__t=a.ProductName)?"":__t)+'</td>\n						<td class="intro_pl">'+(null==(__t=a.Description)?"":__t)+'</td>\n						<td class="price_pl">'+(null==(__t=a.BuyProductPrice)?"":__t)+'</td>\n						<td class="total_pl">'+(null==(__t=a.ProductNum)?"":__t)+'</td>\n						<td class="money_pl">'+(null==(__t=a.TotalPrice)?"":__t)+"</td>\n					</tr>\n					"}),__p+='\n				</table>\n				<div class="totaldeal_pl">\n					应付总额：<span class="total_pl">'+(null==(__t=TotalPrice)?"":__t)+"</span>元\n					",EconomizePrice&&EconomizePrice>0&&(__p+="\n					<p>（已帮您节省"+(null==(__t=EconomizePrice)?"":__t)+"元）</p>\n					"),__p+="\n				</div>\n			</li>\n		</ul>\n		",isShowPayWay&&(__p+='\n		<div class="paybank">\n			<div class="tit_pb">支付方式</div>\n			<div class="line_pb">\n				<div class="left_pb">线上支付</div>\n				<ul class="list_pb">\n					<li><input type="radio" name="bank" id="'+(null==(__t=AliModel.PayCode)?"":__t)+'" title="'+(null==(__t=AliModel.PayName)?"":__t)+'" checked="checked" data-name="'+(null==(__t=AliModel.PayCode)?"":__t)+'" /> <label for="'+(null==(__t=AliModel.PayCode)?"":__t)+'">支付宝付款</label></li>\n					<li><input type="radio" name="bank_bank" data-name="bank" id="bankpay" /><label for="bankpay">网银支付</label></li>\n				</ul>\n				\n			</div>\n			<ul class="banklist_pb" data-name="bankList">\n				',_.each(BankModels,function(a){__p+='\n				<li>\n					<input type="radio" name="bank" id="'+(null==(__t=a.PayCode)?"":__t)+'" title="'+(null==(__t=a.PayName)?"":__t)+'" />\n					<label for="'+(null==(__t=a.PayCode)?"":__t)+'">\n						<span class="sparkling_pb">'+(null==(__t=a.PayName)?"":__t)+'</span>\n						<span class="bank_pb bank-'+(null==(__t=a.PayCode)?"":__t)+'" title="'+(null==(__t=a.PayName)?"":__t)+'"></span>\n					</label>\n				</li>\n				'}),__p+='\n			</ul>\n			<div class="gopay_pb">\n				<!-- <a href="javascript:void(0);" title="" class="checkbox" data-name="is-need-invoice"><span class="ico"></span></a>\n				<span>索取发票合同（客服将尽快联系您）</span> -->\n				<a class="btn btn-warning" href="javascript:void(0);" target="_blank" data-name="gopay">去支付</a>\n				\n			</div>\n			<div class="unlinepay">\n				<strong>线下支付</strong>  <a href="javascript:void(0)" data-name="concat-service">客服协助付款</a>\n			</div>\n		</div>\n		'),__p+="\n	</div>\n</div>\n</div>";return __p},this.JST["more/pay/pay-buy-layout"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="tit_bp">购买流程</div>\n<div class="chart_bp">\n	<ul>\n		',__p+="renewal"==typeName||"message"==typeName?'\n			<li><span class="lv_bp">1</span><span class="lvt_bp">购买</span></li>\n			<li><span class="lv_bp">2</span><span class="lvt_bp">在线支付</span></li>\n			<li><span class="lv_bp">3</span><span class="lvt_bp">完成</span></li>\n		':'\n			<li><span class="lv_bp">1</span><span class="lvt_bp">购买</span></li>\n			<li><span class="lv_bp">2</span><span class="lvt_bp">在线支付</span></li>\n			<li><span class="lv_bp">3</span><span class="lvt_bp">快递发票</span></li>\n			<li><span class="lv_bp">4</span><span class="lvt_bp">签署合同</span></li>\n			<li><span class="lv_bp">5</span><span class="lvt_bp">完成</span></li>\n		',__p+="\n		\n	</ul>\n</div>\n",typeName||(__p+='\n	<div class="tit_bp">产品价格</div>\n	<div class="price_bp">\n		<dl class="standard_bp">\n			<dt>标准版</dt>\n			<dd>年费: <span>200</span>元 /人 <br/>(20元 /人/月)</dd>\n		</dl>\n		<dl class="custom_bp">\n			<dt>定制版</dt>\n			<dd>咨询客服<br/>400-650-3180</dd>\n		</dl>\n	</div>\n'),__p+='\n<div class="tit_bp">企业购买</div>\n<div data-name="enterprise-pay"></div>';return __p},this.JST["more/pay/pay-buy"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n<div class="denominated_bp">\n	',IsInProbation&&(__p+='\n	<div class="preferentialinfo_bp"><span>系统检测到您还在试用期，现在购买您将享受总价8.5折优惠</span></div>\n	'),__p+='\n	<ul class="buyform_bp">\n		<li>\n			<div class="left_bbp">\n				<strong>购买类型：</strong>\n			</div>\n			<div class="right_bbp">\n				 '+(null==(__t=OrderTypeDescription)?"":__t)+' 　　<!--<a href="javascript:void(0);" title="" class="checkbox" data-name="train"><span class="ico"></span></a>'+(null==(__t=TrainShowName)?"":__t)+" -->\n			</div>\n		</li>\n		",__p+=1==type?'\n			<li>\n				<div class="left_bbp">\n					<strong>您企业使用权限剩余<span class="nump_bp">'+(null==(__t=DaysLeft)?"":__t)+'</span>个月</strong> \n				</div>\n			</li>\n			<li class="purchasenotes_bbp">购买须知：购买时间限定为企业当前剩余时间（按月收费，不足整月也按整月收费）</li>\n			<li class="quota_bp">\n				<div class="left_bbp">\n					<strong>增加名额：</strong>\n				</div>\n				<div class="right_bbp">\n					<div class="input_qbp input-default" data-name="person-num">\n						<input type="text" value="" />\n					</div>\n				</div>\n			</li>\n			\n		':'\n			<li>\n				<div class="left_bbp">\n					<strong>企业在职人数：</strong> \n				</div>\n				<div class="right_bbp">\n					<span class="nump_bp">'+(null==(__t=OnJobUserNum)?"":__t)+'</span>\n				</div>\n			</li>\n			<li class="quota_bp">\n				<div class="left_bbp">\n					<strong>购买名额：</strong>\n				</div>\n				<div class="right_bbp">\n					<div class="input_qbp input-default" data-name="person-num">\n						<label>≥ 在职人数</label>\n						<input type="text" value="" />\n					</div>\n					<div class="errortip_qbp">不能小于在职人数</div>\n				</div>\n			</li>\n		',__p+='\n		<li>\n			<div class="left_bbp">\n				<strong>生效时间：</strong>\n			</div>\n			<div class="right_bbp">\n				'+(null==(__t=EffectiveStartTime)?"":__t)+" - "+(null==(__t=EffectiveEndTime)?"":__t)+'\n			</div>\n		</li>\n	</ul>\n	<div class="action_bp">\n		<button class="btn btn-warning" data-name="submit">提交</button>\n	</div>\n	\n</div>';return __p},this.JST["more/pay/pay-new-buy"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="renewal"==name?'\n	<div class="denominated_bp">\n		<ul class="buyform_bp">\n			<li>\n				<div class="left_bbp">\n					<strong>购买类型：</strong>\n				</div>\n				<div class="right_bbp">'+(null==(__t=Description)?"":__t)+'</div>\n			</li>\n			<li class="quota_bp">\n				<div class="left_bbp">\n					<strong>充值金额：</strong>\n				</div>\n				<div class="right_bbp">\n					<div class="input_qbp input-default" data-name="ren-amount">\n						<input type="text" value=""/>\n					</div>\n				</div>\n			</li>\n		</ul>\n		<div class="action_bp">\n			<button class="btn btn-warning" data-name="submit">提交</button>\n		</div>\n	</div>\n	<!-- <div class="recharge">\n		<div class="paytype">\n			<span class="tag">购买类型:</span>\n			<span class="type">'+(null==(__t=Description)?"":__t)+'</span>\n		</div>\n		<div class="choose">\n			<div>\n				<span class="tag">充值金额:</span>\n				<input type="text" class="ren-amount" data-name="ren-amount" />\n				<span class="unit">元</span>\n			</div>\n			<div class="errortip_qbp">金额格式不对，请重新填写！</div>\n		</div>\n		<button class="submit-btn" data-name="submit">提交</button>\n	</div> -->\n':'\n	<div class="denominated_bp">\n		<ul class="buyform_bp">\n			<li>\n				<div class="left_bbp">\n					<strong>购买类型：</strong>\n				</div>\n				<div class="right_bbp">'+(null==(__t=Description)?"":__t)+'</div>\n			</li>\n			<li>\n				<div class="left_bbp">\n					<strong>充值金额：</strong>\n				</div>\n				<div class="right_bbp">\n					<span class="item active" data-name="choose-price">100元</span>\n					<span class="item" data-name="choose-price">200元</span>\n					<span class="item" data-name="choose-price">500元</span>\n					<span class="item" data-name="choose-price">1000元</span>\n				</div>\n			</li>\n			<li>\n				<div class="left_bbp">\n					<strong>短信数量：</strong>\n				</div>\n				<div class="right_bbp">\n					<span class="item" data-name="msg-amount">1200条</span>\n					<span class="des item" data-name="average">(折合0.833元/条)</span>\n				</div>\n			</li>\n		</ul>\n		<div class="action_bp">\n			<button class="btn btn-warning" data-name="submit">提交</button>\n		</div>\n	</div>\n	<!-- <div class="recharge">\n		<div class="paytype">\n			<span class="tag">购买类型:</span>\n			<span class="type">'+(null==(__t=Description)?"":__t)+'</span>\n		</div>\n		<div class="choose">\n			<span class="tag">充值金额:</span>\n			<span class="item active" data-name="choose-price">100元</span>\n			<span class="item" data-name="choose-price">200元</span>\n			<span class="item" data-name="choose-price">500元</span>\n			<span class="item" data-name="choose-price">1000元</span>\n		</div>\n		<div class="amount">\n			<span class="tag item">短信数量:</span>\n			<span class="num item" data-name="msg-amount">1200条</span>\n			<span class="des item" data-name="average">(折合0.833元/条)</span>\n		</div>\n		<button class="submit-btn" data-name="submit">提交</button>\n	</div> -->\n',__p+="\n\n\n\n";return __p},this.JST["more/platformcustomize/index-page"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="platform_main platform_cus_wrapper"></div>';return __p},this.JST["more/platformcustomize/platform-hide-li"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="hide-div">\r\n	<span class="selected-status"></span>\r\n	<div class="platform-img" style="background-color:'+(null==(__t=data.background)?"":__t)+';max-width:105px;max-height:105px;line-height:105px;">\r\n		<div class="'+(null==(__t=data.icon)?"":__t)+'"></div>\r\n	</div>\r\n	<span style="font-size:15px;">'+(null==(__t=Name)?"":__t)+'</span>\r\n	<input type="hidden" name="appid" value="'+(null==(__t=AppId)?"":__t)+'">\r\n<div>';return __p},this.JST["more/platformcustomize/platform-hide-list"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<ul id="hide-ul"></ul>\r\n<button class="add-btn">\r\n	添加\r\n	<div class="callback-info">\r\n		<div class="info">请选择要添加的系统链接!</div>\r\n	</div>\r\n</button>\r\n';return __p},this.JST["more/platformcustomize/platform-layout"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="platformCus-body">\n	<div id="title"></div>\n	<div class="platformCus-show">\n		<div class="icon-big-back-img" style="position: relative;z-index:1;"></div>\n		<div id="data" class="platform-showData"></div>\n		<div class=\'platformCus-save\'>\n			<button class="save-btn">保 存</button>\n			<span class="callback-save-info"></span>\n		</div>\n		<div class="hide-box">\n			<div class="hide-background">\n				<div class="sysLinkNav">\n					<div class="sysLinkNav-font">添加系统链接</div>\n					<div class="sysLinkNav-close">\n						<div class=\'close-btn\' title="关闭">X</div>\n					</div>\n				</div>\n				<div class="hide-main"></div>\n			</div>\n		<div>\n	</div>\n</div>\n';return __p},this.JST["more/platformcustomize/platform-li"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)100!=AppId&&(__p+="\n	<div class='link-delete' flag=\""+(null==(__t=AppId)?"":__t)+"\">\n		<span class='delete'>删除</span>  <span class='cancle'>取消</span>\n	</div>\n\n	<div class=\"platform-img\" style=\"background-color:"+(null==(__t=data.background)?"":__t)+';">\n		<div class="'+(null==(__t=data.icon)?"":__t)+'"></div>\n	</div>\n\n	<div class="platform-font">\n		<font>'+(null==(__t=Name)?"":__t)+'</font>\n		<input class="editing edit-Name input-foucs" type="text" value=\''+(null==(__t=Name)?"":__t)+'\' placeholder="请输入名称">\n		<input class="editing edit-Href input-foucs" type="text" value=\''+(null==(__t=Href)?"":__t)+'\' placeholder="请输入地址">\n	</div>\n'),__p+="\n";return __p},this.JST["more/platformcustomize/platform-list"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<ul id="show-data" class="platform-ul  clearfix" style="clear:both">\n\n</ul>\n<li class="platform-li">\n	<div class="platform-add">\n		<div class="platform-add-font">\n			<span class=\'sys-link\'>+</span>\n		</div>\n	</div>\n	<div class="platform-font">\n		<font class="platform-cursor-add">\n			添加系统链接\n		</font>\n	</div>\n<li>\n';return __p},this.JST["more/platformcustomize/platform-title"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="platform-title-up">\n	<input class=\'text-edit\' type="text" value=\''+(null==(__t=title)?"":__t)+'\' placeholder="请输入标题" flag=\'title\'>\n</div>\n\n<div class="platform-title-hr"></div>\n\n<div class="platform-title-down">\n	<input class=\'text-edit\' type="text" value=\''+(null==(__t=description)?"":__t)+"' placeholder=\"请输入描述\" flag='description'>\n</div>\n";return __p},this.JST["more/shareinfo/index-page"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="tt_shareinfo">\n	<div class="pagetitle">\n		<h2 class="shareinfo_pagetitle">\n			<span class="ico_pt"></span>\n			<span>查看详情</span>\n		</h2>\n	</div>\n	<div class="feedlist">\n	</div>\n</div>\n';return __p},this.JST["more/taskinfo/index-page"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="tt_shareinfo">\n	<div class="pagetitle">\n		<h2 class="ts_pagetitle">\n			<span class="ico_pt"></span>\n			<span>'+(null==(__t=i18n.task_1)?"":__t)+'详情</span>\n		</h2>\n	</div>\n	<br/>\n	<div data-name="task-info-box">\n	</div>\n</div>\n';return __p},this.JST["more/tasks/index-page"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="tt_messagepage">\n	<div class="pagetitle">\n		<h2 class="ts_pagetitle">\n			<span class="ico_pt"></span>\n			<span>我的'+(null==(__t=i18n.task_1)?"":__t)+'</span>\n		</h2>\n	</div>\n	<div class="ms_tablist">\n	</div>\n	<div class="meslist">\n		<div class="_tt_loading_m">努力加载中…</div>\n	</div>\n	<div class="pagelist ">\n		<div class="pagination"></div>\n	</div>\n</div>\n';return __p},this.JST["more/tasks/task-compsite"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="task_list_container">\n	<ul data-name="task-list"></ul>\n</div>\n\n		\n\n';return __p},this.JST["more/tasks/task-list-compent"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="task_finish_time">'+(null==(__t=Month)?"":__t)+"月"+(null==(__t=Day)?"":__t)+'日</div>\n<div class="list_detail" data-name="task-list"></div>';return __p},this.JST["more/tasks/task-list"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div  class="task_item_left">\n	<a href="javascript:void(0);" class="task_status_icon tt_actionstatus_'+(null==(__t=Status)?"":__t)+(null==(__t=IsEditStatus?"":"_disable")?"":__t)+'" original-title="'+(null==(__t=StatusTip)?"":__t)+'" data-handler="'+(null==(__t=IsEditStatus?"1":"")?"":__t)+'"><span class="ico"></span></a>\n\n	<a href="#italent/home?appid=1&apptype=1&name=TalentProfile-record&to_user_id='+(null==(__t=PrincipalUser.UserId)?"":__t)+'" target="_blank">\n		'+(null==(__t=_.convertImage({src:PrincipalUser.Avatar.Small,size:30,name:PrincipalUser.Name,bgColor:PrincipalUser.Avatar.Color}))?"":__t)+"\n	</a>\n	",__p+=2==Status?'\n		<a href="/u/'+(null==(__t=PrincipalUser.UserId)?"":__t)+"/Home#more/taskinfo?id="+(null==(__t=FeedId)?"":__t)+'" title="'+(null==(__t=TaskName)?"":__t)+'" target="_blank" class="task_name task_name_done">'+(null==(__t=TaskName)?"":__t)+"</a>		\n	":'\n		<a href="/u/'+(null==(__t=PrincipalUser.UserId)?"":__t)+"/Home#more/taskinfo?id="+(null==(__t=FeedId)?"":__t)+'" title="'+(null==(__t=TaskName)?"":__t)+'" target="_blank" class="task_name">'+(null==(__t=TaskName)?"":__t)+"</a>\n	",__p+='\n</div> \n<div  class="task_item_right">\n\n	',CycleId>0&&(__p+='\n		<span class="icon-task-cycle"  data-handler="ShowTitle"></span>\n	'),__p+="\n\n	",__p+=""==Deadline||0!=IsDeadLine||"2"==Status&&2==Status?""==Deadline||1!=IsDeadLine||"2"==Status&&2==Status?'\n		<span class="item_time_empty"></span>\n	':'\n		<span class="task_time item_time_deadline">'+(null==(__t=Deadline)?"":__t)+"</span>\n	":'\n		<span class="task_time">'+(null==(__t=Deadline)?"":__t)+"</span>\n	",__p+="\n</div>\n\n";return __p},this.JST["more/tasks/task-tablist"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="ms_tablist">\n	<ul>\n		<li class="all current" data-type="1">\n			<a data-trigger="false" href="#more/tasks?relation=1">我负责的</a>\n		</li>\n		<li data-type="3">\n			<a data-trigger="false" href="#more/tasks?relation=3">给别人的</a>\n		</li>\n		<li data-type="2">\n			<a data-trigger="false" href="#more/tasks?relation=2">我参与的</a>\n		</li>\n		<li data-type="0">\n			<a data-trigger="false" href="#more/tasks?relation=0">已完成的</a>\n		</li>\n		<li data-type="4">\n			<a data-trigger="false" href="#more/tasks?relation=4">我代发的</a>\n		</li>\n		<li data-type="6">\n			<a data-trigger="false" href="#more/tasks?relation=6">我关注的</a>\n		</li>\n	</ul>\n</div>';return __p},this.JST}),define("views/more/guide/guide-sidebar-view",["talent","templates/more"],function(a){var b=a.ItemView.extend({template:a._.template('<li><a href="javascript:void(0);" title=""><%=name%></li>')});
return a.CollectionView.extend({tagName:"ul",template:a._.template("<ul/>"),className:"nav_gb",itemView:b,itemViewContainer:"ul",templateHelpers:function(){return{i18n:this.i18n}},initialize:function(){this.i18n=a.Context.getI18n(),this.model.set("index",0)},onRender:function(){var a=this.model.get("index");this.$el.find("li").eq(a).addClass("active")},events:function(){var a={};return a["click li"]="clickLiItem",a},clickLiItem:function(b){var c=a.$(b.currentTarget),d=this.$el.find("li").index(c);this.model.set("index",d),this.$el.find("li").removeClass("active"),c.addClass("active"),this.trigger("click:navItem",d)}})}),define("views/more/guide/guide-title-view",["talent","templates/more"],function(a){return a.ItemView.extend({template:a._.template('<%if(showBack){%><a href="javascript:void(0);" class="back_tgb" data-name="back">&lt;tita入门 </a><%}%><span><%=title%></span>'),title:"超管入门",showBack:!0,initialize:function(){this.model.set({title:this.title,showBack:this.showBack})},events:function(){var a={};return a["click a[data-name=back]"]="_clickGobackHandler",a},_clickGobackHandler:function(){this.model.set("index",0,{silent:!0}),this.model.set("type","all")}})}),define("views/more/guide/guide-content-view",["talent","templates/more"],function(a,b){return a.ItemView.extend({className:"tt_guide_manager",template:b["more/guide/manager/content"],itemBox:".box_bg",onRender:function(){var a=this.model.get("index"),b=this.$el.find(this.itemBox);b.eq(a).show()},showIndexBox:function(b){var c=a.$(this.itemBox);c.hide();var d=a.$(c.eq(b));d.show()}})}),define("tdialog",["talent","templates/common"],function(a,b){var c=a.ItemView.extend({template:b["common/plugins/tdialog/dialog"],defaults:{id:"tdialog",type:"tipsy",arrowPos:"top",sure:!1,sureText:"确定",sureLink:"",cancel:!1,cancelText:"取消",arrow:1,minHeight:"50",minWidth:"50",fixed:!1,zindex:1030,quirkTheme:!1,showClosed:!1,displayType:"global"},tagName:"div",className:"_tt_dialog",ui:{sure:".sure_dialog",sureText:".sure_dialog>span",closed:".closed_dialog"},events:{"click .sure_dialog":"onSure","click .cancel_dialog":"onCancel","click .closed_dialog":"onCancel"},initialize:function(){this.settings=a._.extend({},this.defaults,this.options),this.$el.attr("id",this.options.id),this.templateHelpers={settings:this.settings},this._init()},_init:function(){this.$el.css({"min-width":this.settings.minWidth,"min-height":this.settings.minHeight,"z-index":this.settings.zindex,position:this.settings.fixed?"fixed":"absolute"})},onSure:function(){$("#tdialog_mask").remove(),"function"==typeof this.options.sure&&(void 0!=this.activeNode&&null!=this.activeNode?this.options.sure(this.activeNode):this.options.sure())},onCancel:function(){this.trigger("hide"),$("#tdialog_mask").remove(),this.$el.hide(),"function"==typeof this.options.cancel&&this.options.cancel()},show:function(b,c,d){var e={className:"none",autoHide:!1,pos:"bottom",x:0,y:0,topBias:0,leftBias:0,arrowBias:0,zindex:1030,autoFrames:!1,arrow:!1},f=a._.extend({},e,d);if("tipsy"==this.settings.type){var g=a.$('<div class="tipsy_dialog '+f.className+'_dialog"><b class="ico"></b><span class="content"></span></div>');g.append(c),this.$el.find(".content_dialog").empty().append(g)}else this.$el.find(".content_dialog").empty().append(c);this.settings.quirkTheme&&(this.$el.find(".sure_dialog").removeClass("btn-sure").addClass("btn-cancel"),this.$el.find(".cancel_dialog").removeClass("btn-cancel").addClass("btn-sure")),b?this._showHere(b,f):($("body").append('<div class="mask" id="tdialog_mask"></div'),this.$el.css({top:"300px",left:"50%","margin-left":"-"+this.$el.width()/2})),this._autoHide(f),this.$el.show(),this.$el.find(".content_dialog").off("click")},hide:function(){this.$el.hide(),$("#tdialog_mask").remove()},onRender:function(){var a=this;this.$el.on("click",function(b){a.trigger("click"),b.stopPropagation()})},_autoHide:function(a){var b=this;1==a.autoHide&&setTimeout(function(){$("#tdialog_mask").remove(),b.$el.hide(),b.trigger("hide")},1e3),"number"==typeof a.autoHide&&setTimeout(function(){$("#tdialog_mask").remove(),b.$el.hide(),b.trigger("hide")},a.autoHide)},_showHere:function(b,c){a.Context.setPosition(b,this.$el,c)},onClose:function(){this.$el.find(".content_dialog").off("click"),a.$(document).off("click._tt_dialog"+this.cid)},changeSubmitBtn:function(a){1==a?(this.ui.sureText.text("确定"),this.ui.sure.removeClass("success_submint").removeClass("loading_submint")):2==a?(this.ui.sureText.text(""),this.ui.sure.removeClass("success_submint"),this.ui.sure.addClass("loading_submint")):(this.ui.sureText.text(""),this.ui.sure.removeClass("loading_submint"),this.ui.sure.addClass("success_submint"))}});return c}),define("views/more/guide/guide-concat-view",["talent","templates/more","tdialog"],function(a,b,c){return a.ItemView.extend({className:"tt_guide_concat",template:b["more/guide/guide-concat"],ui:{contentWrap:"div[data-name=content]",content:"div[data-name=content] textarea",toApplay:"button[data-name=to-apply]"},events:function(){var a={};return a["focus "+this.ui.content]="_telFocusHanderl",a["blur "+this.ui.content]="_telBlurHanderl",a["click "+this.ui.toApplay]="_toApplayHandler",a},initialize:function(){this.defaultValue="输入咨询内容和联系电话"},onRender:function(){this.ui.content.val(this.defaultValue)},onClose:function(){this.dialogView&&this.dialogView.close(),this.tipDialog&&this.tipDialog.close()},_telFocusHanderl:function(b){var c=(a.$(b.currentTarget),a.$.trim(this.ui.content.val()));c==this.defaultValue&&this.ui.content.val(""),this.ui.contentWrap.addClass("input-focus").removeClass("input-error")},_telBlurHanderl:function(b){var c=(a.$(b.currentTarget),a.$.trim(this.ui.content.val()));this.ui.contentWrap.removeClass("input-focus"),""!=c?this.ui.contentWrap.addClass("input-blur"):(this.ui.content.val(this.defaultValue),this.ui.contentWrap.addClass("input-error"))},_toApplayHandler:function(b){var c=(a.$(b.currentTarget),this.model.get("type"));this._submitData(c),this.dialogView&&this.dialogView.hide()},showDialog:function(b,d){var e=this;this.node=b;var f={pos:"topCenter",autoFrames:"body",isEdit:!1},d=a._.extend({arrow:!1,autoHide:!1},f,d);this.model.set({isEdit:d.isEdit,type:d.type});var g=this.render().el;this.dialogView=new c({type:"defaults",showClosed:!0,sureText:"请联系我",zindex:1001,sure:d.isEdit?function(){setTimeout(function(){e._submitData(d.type)},300)}:!1,cancel:!1}),this.dialogView.render().$el.appendTo("body"),this.dialogView.show(b,g,d)},hideDialog:function(){this.dialogView&&this.dialogView.close(),this.$el.remove()},_submitData:function(b){var c=this;if(this.model.get("isEdit")){var d=a.$.trim(this.ui.content.val());if(d==this.defaultValue&&(d=""),""==d)return this.ui.content.val(this.defaultValue),void this.ui.contentWrap.addClass("input-error")}else var d="";this.dialogView&&this.dialogView.changeSubmitBtn(2),a.$.ajax({url:a.Context.getApiUrl("account/AppAdvisoryAndImport")+"?type="+b,type:"Post",success:function(){c._tipDialog(c.node," 已提交申请，我们会尽快联系您！"),c.dialogView&&c.dialogView.hide()}})},_tipDialog:function(a,b){this.tipDialog=new c({type:"tipsy",sure:!1,cancel:!1,zindex:1001}),$("body").append(this.tipDialog.render().$el),this.tipDialog.show(a,b,{pos:"topCenter",className:"success",arrow:!1,autoHide:!0})}})}),define("views/more/guide/all/index-page-view",["talent","templates/more","views/more/guide/guide-sidebar-view","views/more/guide/guide-title-view","views/more/guide/guide-content-view","views/more/guide/guide-concat-view"],function(a,b,c,d,e,f){var g=a.Context.getI18n(),h=a.ItemView.extend({template:a._.template('<div class="tt_guide_all_sidebar"><img src="<%=imgUrl%>"/><p>微信公众号 tita-com</p></div> '),templateHelpers:function(){return{imgUrl:a.Context.getStaticUrl("images/home/qr_wx_v3.gif")}}}),i=d.extend({title:"tita入门",showBack:!1}),j=e.extend({template:b["more/guide/all/content"],ui:{manger:"a[data-type=manager]",plan:"a[data-type=plan]",daily:"a[data-type=daily]",group:"a[data-type=group]",concat:"a[data-name=concat]",peixun:"a[data-name=peixun]"},events:function(){var a={};return a["click "+this.ui.manger]="_changeModleType",a["click "+this.ui.plan]="_changeModleType",a["click "+this.ui.daily]="_changeModleType",a["click "+this.ui.group]="_changeModleType",a["mouseenter "+this.ui.concat]="_toggleConcatView",a["mouseleave "+this.ui.concat]="_toggleConcatView",a["click "+this.ui.concat]="_renderConcatView",a["click "+this.ui.peixun]="_renderPXView",a},templateHelpers:function(){var b=a.Context.getGlobal("tenant_function"),c=a.Context.getGlobal("helpHost");return{helpHost:c,help:c.split("//")[1],i18n:g,IsUsePlanDaily:b.IsUsePlanDaily}},_changeModleType:function(b){var c=a.$(b.currentTarget),d=c.attr("data-type");this.model.set("type",d)},_toggleConcatView:function(b){var c=a.$(b.currentTarget),d=c.find(".icon-kefu");d.hasClass("icon-kefu-hover")?d.removeClass("icon-kefu-hover"):d.addClass("icon-kefu-hover")},_renderConcatView:function(b){var c=a.$(b.currentTarget),d=c.attr("data-type");this.guideConcatView=new f,this.guideConcatView.showDialog(c,{type:d,isEdit:!0})},_renderPXView:function(b){var c=a.$(b.currentTarget),d=c.attr("data-type");this.guideConcatView=new f,this.guideConcatView.showDialog(c,{type:d})}});return a.Layout.extend({contViewClass:j,sideBarViewClass:h,titleViewClass:i})}),define("views/more/guide/manager/index-page-view",["talent","templates/more","views/more/guide/guide-sidebar-view","views/more/guide/guide-title-view","views/more/guide/guide-content-view","views/more/guide/guide-concat-view","tdialog"],function(a,b,c,d,e,f,g){var h=c.extend({initialize:function(){this.collection.reset([{name:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;添加公司员工"},{name:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;设置汇报关系"},{name:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;搭建组织架构"}])}}),i=d.extend({title:"超管入门"}),j=e.extend({className:"tt_guide_manager",template:b["more/guide/manager/content"],ui:{goOneKey:"a[data-name=skip-to-onekey]",concat:"a[data-name=concat]",memberShip:"a[data-name=member-ship]"},events:function(){var a={};return a["click "+this.ui.goOneKey]="_clickGoOneKeyHandler",a["click "+this.ui.concat]="_renderConcatView",a["click "+this.ui.memberShip]="_mebShipHandler",a},templateHelpers:function(){var b=Talent.Context.getGlobal("titaHost"),c=Talent.Context.getGlobal("loginUserInfo").Id,d=b+"/u/"+c+"/Invite/InviteMoreIndex",e="#widget/italent?iTalentFrameType=iframe&iTalentFrame="+encodeURIComponent(d);return{helpHost:a.Context.getGlobal("helpHost"),tmNewHost:a.Context.getGlobal("tmNewHost"),loginUser:a.Context.getUserInfo(),url:e}},onClose:function(){this.tipDialog&&this.tipDialog.close()},_clickGoOneKeyHandler:function(){this.model.set("index",3)},_renderConcatView:function(b){var c=a.$(b.currentTarget),d=c.attr("data-type");this.guideConcatView=new f,this.guideConcatView.showDialog(c,{type:d})},_mebShipHandler:function(b){var c=this,d=a.$(b.currentTarget);a.app.request("Membership:getOpenUserOrg",{}).done(function(){c._tipDialog(d,"已提交申请，我们会尽快联系您！")})},_tipDialog:function(a,b){this.tipDialog=new g({type:"tipsy",sure:!1,cancel:!1,zindex:1001}),$("body").append(this.tipDialog.render().$el),this.tipDialog.show(a,b,{pos:"topCenter",className:"success",arrow:!1,autoHide:!0})}});return a.Layout.extend({contViewClass:j,sideBarViewClass:h,titleViewClass:i})}),define("views/more/guide/plan/index-page-view",["talent","templates/more","views/more/guide/guide-sidebar-view","views/more/guide/guide-title-view","views/more/guide/guide-content-view","views/more/guide/guide-concat-view"],function(a,b,c,d,e){var f=a.Context.getI18n(),g=c.extend({initialize:function(){var a=f.plan_1;this.collection.reset([{name:'<span class="filter_gb">P</span>'+a+"</a>"},{name:'<span class="filter_gb">D</span>执行</a>'},{name:'<span class="filter_gb">C</span>检查</a>'},{name:'<span class="filter_gb">A</span>处理</a>'}])}}),h=d.extend({title:f.plan_1+"入门"}),i=e.extend({className:"tt_guide_manager",template:b["more/guide/plan/content"],templateHelpers:function(){var b=a.Context.getGlobal("tenant_function");return{helpHost:a.Context.getGlobal("helpHost"),tmHost:a.Context.getGlobal("tm"),loginUser:a.Context.getUserInfo(),i18n:f,IsUseSetOrg:b.IsUseSetOrg}}});return a.Layout.extend({contViewClass:i,sideBarViewClass:g,titleViewClass:h})}),define("views/more/guide/group/index-page-view",["talent","templates/more","views/more/guide/guide-sidebar-view","views/more/guide/guide-title-view","views/more/guide/guide-content-view","views/more/guide/guide-concat-view"],function(a,b,c,d,e){var f=a.Context.getI18n(),g=c.extend({initialize:function(){this.collection.reset([])}}),h=d.extend({title:"团队入门"}),i=e.extend({className:"tt_guide_manager",template:b["more/guide/group/content"],templateHelpers:function(){var b=a.Context.getGlobal("tenant_function");return{helpHost:a.Context.getGlobal("helpHost"),tmHost:a.Context.getGlobal("tm"),loginUser:a.Context.getUserInfo(),i18n:f,IsUseSetOrg:b.IsUseSetOrg}}});return a.Layout.extend({contViewClass:i,sideBarViewClass:g,titleViewClass:h})}),define("views/more/guide/daily/index-page-view",["talent","templates/more","views/more/guide/guide-sidebar-view","views/more/guide/guide-title-view","views/more/guide/guide-content-view","views/more/guide/guide-concat-view"],function(a,b,c,d,e){var f=a.Context.getI18n(),g=c.extend({initialize:function(){this.collection.reset([])}}),h=d.extend({title:"日报入门"}),i=e.extend({className:"tt_daily_manager",template:b["more/guide/daily/content"],templateHelpers:function(){return{helpHost:a.Context.getGlobal("helpHost"),tmHost:a.Context.getGlobal("tm"),loginUser:a.Context.getUserInfo(),i18n:f}}});return a.Layout.extend({contViewClass:i,sideBarViewClass:g,titleViewClass:h})}),define("views/more/guide/index-page-view",["talent","templates/more","views/more/guide/all/index-page-view","views/more/guide/manager/index-page-view","views/more/guide/plan/index-page-view","views/more/guide/group/index-page-view","views/more/guide/daily/index-page-view"],function(a,b){return a.Layout.extend({defaults:{type:"all",index:"0"},template:b["more/guide/index-page"],className:"tt_guidebottom",regions:{sideBar:"div[data-name=sidebar]",title:"div[data-name=title]",content:"div[data-name=content]"},ui:{close:"a[data-name=closed]",load:"div[data-name=load]"},modelEvents:{"change:type":"_renderModulesView","change:index":"_renderModulesView"},events:function(){var a={};return a["click "+this.ui.close]="_closedHandler",a},initialize:function(){this.status=0;var b=this;this.settings=a._.extend({},this.defaults,this.options),this.model.set(this.settings),a.app.vent.on("Guide:Guide-View:click",function(a){b.show(a)})},onRender:function(){this._renderModulesView()},onClose:function(){a.app.vent.off("Guide:Guide-View:click")},_renderModulesView:function(){var a=this,b=this.model.get("type"),c="views/more/guide/"+b+"/index-page-view";require([c],function(b){var c=new b,d=new c.contViewClass({model:a.model});a.content.show(d);var e=new c.sideBarViewClass({model:a.model});a.listenTo(e,"click:navItem",function(a){d.showIndexBox(a)}),a.sideBar.show(e);var f=new c.titleViewClass({model:a.model});a.title.show(f)})},show:function(a){a&&this.model.set("type",a),this._anmiate()},hide:function(){this._closedHandler()},_closedHandler:function(){var a=this;this.status=0,this.$el.stop().animate({bottom:-355},function(){a.model.set("type",a.defaults.type),a.model.set("index",a.defaults.index)})},_anmiate:function(){this.status=1,this.$el.stop().animate({bottom:0})}})}),define("views/common/page-regions/header-extention-view",["talent","templates/common","views/common/onlineservice/onlineservice-view","views/more/guide/index-page-view","moment"],function(a,b,c,d,e){return a.ItemView.extend({template:b["common/page-regions/header-tita-extention"],className:"tt-header-extention",ui:{guide:".guide_tthn",calendar:".calendar_tthn a",inviteMember:'[data-name="invite-member"]'},events:function(){var a={};return a["click "+this.ui.guide]="_showGuideView",a},initialize:function(){this.userInfo=a.Context.getUserInfo(),this.i18n=a.Context.getI18n(),this._getRouterData()},_getRouterData:function(){var b=this,c=a.app.request("history:getQueryObject"),d=new a.$.Deferred;return c.done(function(a){b.routerData=a||{},b.routerData.show_guide="true"==a.show_guide?!0:!1}),d},_getActiveData:function(b){var c=b;this.activeGroup=a._.findWhere(c,{Active:!0})||c[0];var d=this.activeGroup.PlanTableListModels,e=a._.findWhere(d,{Active:!0})||d[0];this.planTableId=e.PlanTableModels[0].PlanTableId},_getMockPageData:function(){var b=this;a.app.request("Plan:getMockDateData",{group_id:0,date:e().format("YYYY/MM/DD")}).done(function(c){var e=c&&c.Data&&c.Data.taglist?c.Data.taglist:[];b._getActiveData(e),b.guideIndexPageView=new d({planTableId:b.planTableId}),a.$("body").append(b.guideIndexPageView.render().$el),b.routerData.show_guide&&b.guideIndexPageView.show()})},onRender:function(){this._getMockPageData();new c;this.ui.calendar.tipsy({fallback:this.i18n.schedule_1,gravity:"n"}),this.ui.guide.tipsy({fallback:"tita入门",gravity:"n"}),this.ui.inviteMember.tipsy({fallback:"邀请同事",gravity:"n"})},templateHelpers:function(){var b=a.Context.getTenantInfo(),c=a.Context.customModuleIsShow(),d=Talent.Context.getGlobal("titaHost"),e=Talent.Context.getGlobal("loginUserInfo").Id,f=d+"/u/"+e+"/Invite/InviteMoreIndex",g="#widget/italent?iTalentFrameType=iframe&iTalentFrame="+encodeURIComponent(f);return{isShowInviteBtn:"103266"==b.Id?!1:!0,isShowCalendar:c.calendar,UserInfo:this.userInfo,url:g}},_showGuideView:function(){a.app.vent.trigger("Guide:Guide-View:click")}})}),define("views/common/system-upgrade-view",["talent","templates/common"],function(a){return a.ItemView.extend({template:_.template(["项目列表即将优化升级，届时将于2016年6月20日 20：00 - 次日07:00影响正常使用。请您提前做好工作安排。谢谢！&nbsp;&nbsp;&nbsp;",'<span class="icon-dialog-closed" data-name="upgrade-closed"></span>'].join("")),className:"tt-upgrade",events:{"click [data-name=upgrade-closed]":"_closeHandler"},initialize:function(a){this.settings=Talent._.extend({},this.defaults,a),this.$el.css({background:"#f8ecd1",color:"#555",padding:"3px 0","text-align":"center","font-size":"12px",position:"fixed",top:"0",left:"50%","margin-left":-450,width:700,zIndex:10010})},_closeHandler:function(){this.$el.hide()}})}),define("views/common/layouts/italent-layout",["talent","templates/common","tita-common","views/common/page-regions/header-extention-view","TitaWidget","iTalent-header","iTalent-sidebar","views/more/guide/index-page-view","moment","views/common/onlineservice/onlineservice-view","views/common/system-upgrade-view"],function(a,b,c,d,e,f,g,h,i,j,k){var l=a.BaseMasterLayout.extend({template:b["common/layouts/italent-layout"],regions:{header:"div[data-name=header-region]",sidebar:"div[data-name=nav-region]",subNav:"div[data-name=sub-nav-region]",rightSidebar:"div[data-name=rightbar-region]",rightView:"div[data-name=rightview-region]",mainInner:"div[data-name=main-container-innner-region]"},initialize:function(){var b=this;this.userInfo=a.Context.getUserInfo(),this.apiPath=BSGlobal.apiPath,this.__scrollBarWidth=null,this.headerHeight=41,this.rightbarWidth=0,this.isFirstRender=!0,this.model=new a.Model,this.model.on("change:messageRedCount",function(){b._updateMsgData()}),this.model.on("change:todoRedCount",function(){b._updateTodoData()});var c=a.Collection.extend({model:a.Model.extend({idAttribute:"type"})});this.indicatorCollection=new c,this.todoCollection=new a.Collection,this.navCollection=new a.Collection,window.iTalentSDK&&window.iTalentSDK.register()},className:"tu-page-layout tu-height-full",regionsClass:{header:f,sidebar:g},onShow:function(){var b=this;this.ui={pageContainer:this.$el.find(".tu-page-container"),rightSidebar:this.$el.find("div[data-name=rightbar-region]"),mainContainer:this.$el.find("div[data-name=main-container-region]"),mainInner:this.$el.find("div[data-name=main-container-innner-region]"),rightView:"div[data-name=rightview-region]"},$("html,body").css({height:"100%",overflow:"hidden"}),$("#bs_layout_container").css({height:"100%"}),this._getScrollBarWidth(),this._getRouterData(),this._renderGuideView(),this._listenRouterChange(),this._clearGlobalIndicator(),this._renderHeadView(),this._renderSidebarView(),this.refresh(),this._renderRightView(),this._renderMessage();var c=(new j,a._.debounce(function(){b._setMainInngerWidth(),b._setPageLinePos()},300));$(window).off("resize.Tita-Layout"),$(window).on("resize.Tita-Layout",c)},_renderSystemUpgrade:function(){var a=new k;this.$el.find(".tu-page-header").append(a.render().$el)},refresh:function(){var a=this.options,b=a.showRightSidebar;this.rightbarWidth=b?65:0,this.hideSidebar?(this.SidebarViewClass=null,this.$el.addClass("tu-page-hidesidebar")):this.$el.removeClass("tu-page-hidesidebar"),this._renderMainView(),this._renderSidebarRight(),this.trigger("refresh")},_getRouterData:function(){var b=this;a.app.request("history:getQueryObject").done(function(a){b.routerData=a})},_listenRouterChange:function(){var b=this;a.app.vent.on("route",function(){b.guideIndexPageView&&b.guideIndexPageView.close(),a.app.request("history:getQueryObject").done(function(a){var c=decodeURIComponent(location.hash),d=c.split("?")[0];"#bench"==d&&b._renderGuideView(),b.routerData=a,b.routerData.iTalentNavCode=b.routerData.iTalentNavCode||"",b.routerData.iTalentNavId=b.routerData.iTalentNavId||"",b.sidebarView&&b.sidebarView.highLightSet({code:b.routerData.iTalentNavCode,id:b.routerData.iTalentNavId})})})},_renderGuideView:function(){var b=this;a.app.request("Plan:getMockDateData",{group_id:0,date:i().format("YYYY/MM/DD")}).done(function(c){var d=c&&c.Data&&c.Data.taglist?c.Data.taglist:[];b._getActiveData(d),b.guideIndexPageView=new h({planTableId:b.planTableId}),b.ui.mainContainer.append(b.guideIndexPageView.render().$el),b._adjustGuideView(),b.routerData.show_guide&&"true"==b.routerData.show_guide&&(b.guideIndexPageView.show(),b.routerData.show_guide=!1,a.Context.changeHash(b.routerData))})},_adjustGuideView:function(){this.guideIndexPageView&&this.guideIndexPageView.$el.addClass("page-sidebar-anmite").css("paddingLeft",this.sidebarWidth)},_getActiveData:function(b){var c=b;this.activeGroup=a._.findWhere(c,{Active:!0})||c[0];var d=this.activeGroup.PlanTableListModels,e=a._.findWhere(d,{Active:!0})||d[0];this.planTableId=e.PlanTableModels[0].PlanTableId},_renderHeadView:function(){var b=a.Context.getTenantInfo(),c=this.userInfo,d=a.Context.getGlobal("titaHost"),e={},f=b.Logo;if(!f){var g=location.host;-1!=g.indexOf("italent")?f=a.Context.getStaticUrl("images/logo_italent.png"):-1!=g.indexOf("tita")&&(f=a.Context.getStaticUrl("images/logo_tita.png"))}this.todoBtn={type:"Todos",iconName:"header-icon-daiban",id:"",title:"待办",href:"#more/messages?messageType=1&isRead=1",reminds:{remindCount:0,viewAllHref:"#more/messages?messageType=1&isRead=1",remindList:[]}},this.messageBtn={type:"Message",iconName:"header-icon-xiaoxi",id:"",title:"通知",href:"#more/messages?messageType=2&isRead=2",reminds:{remindCount:0,viewAllHref:"#more/messages?messageType=2&isRead=2",remindList:[]}},this.headerBtn=[{type:"Search",iconName:"header-icon-sousuo",id:"",title:"搜索同事、动态、项目等",href:"javascript:void(0)",reminds:{remindCount:0,viewAllHref:"#",remindList:[]}},{type:"HomePage",iconName:"header-icon-chanpin",id:"",title:"回到首页",href:"#sitemap",reminds:{remindCount:0,viewAllHref:"#",remindList:[]}},{type:"Settings",iconName:"header-icon-shezhi",id:"",title:"设置",href:"#set?url="+d+"/u/"+c.Id+"/Setting/Avatar&page_id=avatar",reminds:{remindCount:0,viewAllHref:"",remindList:[]}},this.todoBtn,this.messageBtn],e=a._.extend({},e,{companyInfo:{logo:f,name:b.Abbreviation,href:d},userInfo:{name:c.Name,avatar:{color:c.UserAvatar.Color,hasAvatar:c.UserAvatar.HasAvatar,small:c.UserAvatar.Small}},oprBtn:this.headerBtn,userInfoDropDown:[{title:"个人主页",href:"#italent/home?name=TalentProfile-record",target:"_self",type:"header-mainPage"},{title:"编辑简档",href:"#more/archives",target:"_self",type:"header-editDoc"},{title:"个人设置",href:"#set?url="+d+"/u/"+c.Id+"/Setting/Avatar&page_id=avatar",target:"_self",type:"header-userSetting"},{title:"退出登录",href:"/Account/Logout",target:"_self",type:"header-logout"}]}),this.headerView=new this.regionsClass.header(e),this.listenTo(this.headerView,"iconClickEvent",function(a){switch(a.type){case"Todos":this._getTodoData()}}),this.listenTo(this.headerView,"iconOprEvents",function(a){switch(a.target){case"Search":this._search(a.exportData)}}),this.header.show(this.headerView);var h=this.headerView.$el.outerHeight();this.headerHeight!==h&&(this.headerHeight=h,this.ui.pageContainer.css({top:h}))},_search:function(b){var c=encodeURIComponent(this._searchEncode(b.searchValue)),d=a.Context.getGlobal("titaHost"),e=a.Context.getGlobal("loginUserInfo").Id,f=d+"/Search/"+e+"/Search/Home?search="+c,g="#widget/italent?iTalentFrameType=iframe&iTalentFrame="+encodeURIComponent(encodeURIComponent(f));window.location.href=g},_searchEncode:function(a){var b="";return 0==a.length?"":(b=a.replace(/&/g,"&amp;"),b=b.replace(/</g,"&lt;"),b=b.replace(/>/g,"&gt;"),b=b.replace(/    /g,"&nbsp;"),b=b.replace(/\'/g,"&apos;"),b=b.replace(/\"/g,"&quot;"),b=b.replace(/\n/g,""))},_parseUrl:function(){var a={},b=decodeURIComponent(location.hash).split("?");if(a.hash=b[0],b[1]&&""!==b[1])for(var c=b[1].split("&"),d=0;d<c.length;d++){var e=c[d].split("=");a[e[0]]=e[1]}return a},_renderSidebarView:function(){var b=this.sidebarViewClass?this.sidebarViewClass:this.regionsClass.sidebar;if(this.SidebarViewClass!==b||this.refreshSidebar){{var c=a.Context.getGlobal("newNavigation")||[];this._parseUrl()}if(!c.length)return;for(var d=0;d<c.length;d++){var e=c[d];if((e.code===this.routerData.iTalentNavCode||e.id==this.routerData.iTalentNavId)&&a.Context.setPageTitle(e.title),"tita-home"==e.code&&(e.indicatorType="feedIndicator"),"hash"==e.type){var f="iTalentNavId="+e.id+(e.code?"&iTalentNavCode="+e.code:"");e.href+=e.href.indexOf("?")>0?"&"+f:"?"+f}if(e.children.length)for(var g=0;g<e.children.length;g++){var h=e.children[g],i="iTalentNavId="+h.id+(h.code?"&iTalentNavCode="+h.code:"");(h.code===this.routerData.iTalentNavCode||h.id==this.routerData.iTalentNavId)&&a.Context.setPageTitle(h.title),"hash"==h.type&&(h.href+=h.href.indexOf("?")>0?"&"+i:"?"+i)}}this.navCollection.reset(c),this.SidebarViewClass=b,this.sidebarView=new this.SidebarViewClass({menuArry:c}),this.listenTo(this.sidebarView,"layoutChanged",function(a){this.sidebarWidth=this.hideSidebar?0:a.width,this.hideSidebar||(this._adjustSidebarView(),this._adjustGuideView())}),this.listenTo(this.sidebarView,"hashChanged",function(b){var c=b&&b.title||"italent";if(a.Context.setPageTitle(c),"iframe"==b.type){var d="widget/italent?iTalentNavId="+b.id+"&iTalentFrameType="+b.type+"&iTalentFrame="+encodeURIComponent(b.href);window.iTalentSDK.register({listenEvent:"__iTalentSDK_Close_Iframe",cb:function(){a.app.execute("history:navigate","#"+d,{trigger:!0,forceTrigger:!0})}}),window.iTalentSDK.recycleIframe("iTalentFrame")}var e=b.indicatorType||null;e&&b.newCount&&a.app.vent.trigger("GlobalIndicatorDelete",{indicatorType:e,messageType:0})}),this.sidebarWidth=this.sidebarView.getWidth().width,this.ui.pageContainer.css({paddingLeft:this.sidebarWidth}),this.sidebar.show(this.sidebarView),this.sidebarView.highLightSet({code:this.routerData.iTalentNavCode,id:this.routerData.iTalentNavId})}else this.ui.pageContainer.css({paddingLeft:this.sidebarWidth})},_updateNavData:function(){var a=this,b={feedIndicator:148};this.indicatorCollection.each(function(c){var d=c.get("type");if("feedAboutMeIndicator"==d){var e=b.feedIndicator,f=a.navCollection.get(e);if(!f)return;f.set("newCount",!0),a.sidebarView.setMsgNotice({id:f.get("id"),newCount:c.get("value")>0?!0:!1})}})},_adjustSidebarView:function(){this._setMainInngerWidth(),this.options.hideSubMenu||this._setPageLinePos(),this.ui.pageContainer.addClass("page-sidebar-anmite").css("paddingLeft",this.sidebarWidth)},_setMainInngerWidth:function(){var a=this.__scrollBarWidth.vertical||0,b=this.hideSidebar?0:this.sidebarWidth,c=this.$el.width();this.ui.mainInner.css({width:c-b-this.rightbarWidth-a})},_renderMainView:function(){var a=this.__scrollBarWidth.vertical||0,b=this.hideSidebar?0:this.sidebarWidth,c=this.$el.width(),d=this.$el.height();this.ui.mainInner.attr("style",""),this.ui.mainInner.css({marginRight:this.rightbarWidth,width:c-b-this.rightbarWidth-a,minHeight:d-this.headerHeight});var e=new this.mainViewClass(this.options);this.mainInner.show(e),this._adjustPagelinePos()},_renderSidebarRight:function(){var a=this.options,b=a.showRightSidebar,c=b&&b(),b=c&&c.showRightSidebar,d=c&&c.rightSidebarView,e=c&&c.refreshSidebarRight?c.refreshSidebarRight:!1;if(this._getFragments(e),b&&this.RightSidebarView){if(!this.refreshSidebarRight)return;this.RightSidebarView=c.rightSidebarView,this.rightSidebar.show(this.RightSidebarView),this._adjustSidebarRight()}else b&&!this.RightSidebarView?(this.ui.pageContainer.append(this.ui.rightSidebar),this.RightSidebarView=d,this.rightSidebar.show(this.RightSidebarView),this._adjustSidebarRight()):(this.rightSidebar.close(),this.RightSidebarView=null,this.ui.rightSidebar.detach())},_adjustSidebarRight:function(){var a=this.__scrollBarWidth.vertical||0;this.ui.rightSidebar.css({right:a}).show(),this.ui.rightSidebar.find(".membership_right").css({right:this.__scrollBarWidth.vertical})},_adjustPagelinePos:function(){return"undefined"==typeof this.options.hideSubMenu?void this.$el.addClass("tu-page-hidesubmenu").removeClass("tu-page-dividing").removeClass("tu-page-submenu"):void(this.options.hideSubMenu?this.$el.addClass("tu-page-hidesubmenu").removeClass("tu-page-submenu").removeClass("tu-page-dividing"):("undefined"!=typeof this.options.isDividing&&this.options.isDividing?this.$el.removeClass("tu-page-hidesubmenu").removeClass("tu-page-submenu").addClass("tu-page-dividing"):this.$el.removeClass("tu-page-hidesubmenu").removeClass("tu-page-dividing").addClass("tu-page-submenu"),this._setPageLinePos()))},_setPageLinePos:function(){var a=this.$el.find("[data-tu-submenu=tu-submenu]").width();this.ui.mainInner.css("undefined"!=typeof this.options.isDividing&&this.options.isDividing?{backgroundPosition:a-1+"px 0"}:{backgroundPosition:-(2e3-a)+"px 0"})},_renderRightView:function(){var a=new e.PullScreenView({topBias:this.headerHeight,showFullScreenButton:!0});this.listenTo(a,"open",function(a){this.ui.mainContainer.stop().animate({marginRight:a.width},a.duration)}),this.listenTo(a,"closed",function(a){this.ui.mainContainer.animate({marginRight:0},a.duration)}),this.rightView.show(a)},_getFragments:function(b){var c=this;a.app.request("history:getFragments").done(function(d){c.refreshSidebarRight=b?!0:!1,a._.difference(c.routerFragments,d).length&&(c.refreshSidebarRight=!0),c.routerFragments=d})},_getScrollBarWidth:function(){if(this.__scrollBarWidth)return this.__scrollBarWidth;var a=document.createElement("div");return a.setAttribute("class","tu-scroll"),a.style.cssText="overflow:scroll;width:100px;height:100px; position: absolute;top:-9999px;",document.body.appendChild(a),a&&(this.__scrollBarWidth={horizontal:a.offsetHeight-a.clientHeight-1,vertical:a.offsetWidth-a.clientWidth}),document.body.removeChild(a),this.__scrollBarWidth},_renderMessage:function(){var a=this;this._getAjaxObjRemindData(),this.Timer&&clearInterval(this.Timer),this.Timer=setInterval(function(){a._getAjaxObjRemindData()},15e3)},_getDate:function(){var a=new Date,b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate();return 10>c&&(c="0"+c),10>d&&(d="0"+d),b+"/"+c+"/"+d},_getAjaxObjRemindData:function(){{var b=this,c=this.model.get("time")||this._getDate(),d=location.host,e=decodeURIComponent(location.hash);e.split("?")[0]}if(this.apiPath.split("//")[1]===d)var f=window;else var f=$('iframe[src="'+this.apiPath+'/iframe.html"]')[0].contentWindow;var g=f.XMLHttpRequest?new f.XMLHttpRequest:f.ActiveXObject?new f.ActiveXObject("Microsoft.XMLHTTP"):new f.XMLHttpRequest;g.open("GET",a.Context.getApiUrl("RemindV2/Get?dateTime=")+c,!0),g.onreadystatechange=function(){if(4===g.readyState){if(200===g.status){{var c=JSON.parse(g.responseText),d=c.Data&&c.Data.indicators||[];
c.Data&&c.Data.reminds||[]}b.indicatorCollection.reset(d),b._setGlobalIndicator();var e=b.indicatorCollection.get("messageIndicator")&&b.indicatorCollection.get("messageIndicator").get("value")||0,f=b.indicatorCollection.get("todoIndicator")&&b.indicatorCollection.get("todoIndicator").get("value")||0;b.model.set({messageRedCount:e,todoRedCount:f}),b._renderRemindMeView(c),b._updateNavData()}if(401===g.status){{a.Context.getGlobal("logoutUrl")||"/Account/Logout"}location.reload()}}},g.setRequestHeader("Accept","*"),g.setRequestHeader("Content-Type","application/json;charset=utf-8"),g.setRequestHeader("X-Beisen-ts",(new Date).getTime()),g.setRequestHeader("X-XSRF-Token",a.Context.getGlobal("webApiToken")),g.send(null)},_renderRemindMeView:function(a){this.remindmeWidgetItemView?(this.remindmeWidgetItemView.model.set({time:a.Data.date||"",data:a.Data.reminds||[]}),this.remindmeWidgetItemView.modelDataChange()):(this.remindmeWidgetItemView=new c.RemindmeWidgetItemView,this.$el.append(this.remindmeWidgetItemView.render().$el),this.remindmeWidgetItemView.model.set({time:a.Data.date||"",data:a.Data.reminds||[]}))},_setGlobalIndicator:function(b){a.app.vent.trigger("GlobalIndicatorUpdate",this.indicatorCollection),window.BSGlobal||(window.BSGlobal={}),window.BSGlobal.indicator=b},_clearGlobalIndicator:function(){a.app.vent.on("GlobalIndicatorDelete",function(a){this._requestClearIndicator(a)},this)},_requestClearIndicator:function(b){var c={indicatorType:"",messageType:"",indicatorNum:0},d=this,b=a._.extend({},c,b);a.app.request("Indicator:indicatorClear",{messageType:b.messageType||0,indicatorType:b.indicatorType||""}).done(function(){if(""==b.indicatorType&&b.indicatorNum){var c=d.indicatorCollection.where({messageType:b.messageType});return d.indicatorCollection.remove(c),1==b.messageType&&d._reduce_messageIndicator(b.indicatorNum),void(2==b.messageType&&d._reduce_totoIndicator(b.indicatorNum))}for(var e=b.indicatorType.split(","),f=0;f<e.length;f++){var g=e[f],h=d.indicatorCollection.get(g);if(h){var i=Number(h.get("value"))||0;if(0!=i){d.indicatorCollection.remove(h);var j=["mCommentIndicator","mLeaveIndicator","mLeaveAllIndicator","mWorkIndicator","mfollowIndicator","mLeaveWorkIndicator","mLeaveDepartmentIndicator","mtitaIndicator","messageIndicator","mSuccessionIndicator","mRecruitIndicator","mEMPIndicator","mTalentReviewIndicator","mGoalIndicator","mApprove","mApprovalCentre","mtitadashang","mTaoShangIndicator"],k=["todotitaIndicator","todoIndicator","tSuccessionIndicator","tRecruitIndicator","tEMPIndicator","tTalentReviewIndicator","tGoalIndicator","tApprove"];if(a._.indexOf(j,g)>-1&&d._reduce_messageIndicator(i),a._.indexOf(k,g)>-1&&d._reduce_totoIndicator(i),"feedAboutMeIndicator"==g){var l=d.navCollection.get(148);if(!l)return;l.set("newCount",!0),d.sidebarView.setMsgNotice({id:l.get("id"),newCount:!1})}}}}})},_reduce_messageIndicator:function(b){var c=this.indicatorCollection.get("messageIndicator")||new a.Model,d=c.get("value")||0,e=0>d-b?0:d-b;c.set("value",e),this.model.set("messageRedCount",e)},_reduce_totoIndicator:function(){var b=this.indicatorCollection.get("todoIndicator")||new a.Model,c=b.get("value")||0,d=c-num<0?0:c-num;b.set("value",d),this.model.set("todoRedCount",d)},_getMessageListData:function(){var a=this.indicatorCollection.where({messageType:1})||[],b=[];if(!a.length)return[];for(var c=0;c<a.length;c++){var d=a[c],e=this._getMessageUrl(d);b.push({content:d.get("content"),date:"",length:d.get("value"),className:e.className,href:e.url})}return b},_getMessageUrl:function(a){var b=a.get("type"),c=a.get("indicatorType"),d=a.get("appId");appType=a.get("appType");var e={className:"header-icon-reply",url:"#more/messages?messageType=2&isRead=1&tabAppId="+d+"&tabAppType="+appType};switch(b){case"mCommentIndicator":e={className:"header-icon-reply",url:"#more/indicatormsg?indicatorType="+c};break;case"mLeaveIndicator":e={className:"header-icon-at-me",url:"#more/indicatormsg?indicatorType="+c};break;case"mTaoShangIndicator":e={className:"header-icon-ex-reward",url:"#more/messages?messageType=2&isRead=1&tabAppId="+d+"&tabAppType="+appType};break;case"mLeaveAllIndicator":e={className:"header-icon-at-notice",url:"#more/indicatormsg?indicatorType="+c};break;case"mWorkIndicator":e={className:"header-icon-work-notice",url:"#more/messages?messageType=2&isRead=1&tabAppId="+d+"&tabAppType="+appType};break;case"mfollowIndicator":e={className:"header-icon-fans",url:"#staff?name=fans"};break;case"mLeaveWorkIndicator":e={className:"header-icon-at-project",url:"#more/indicatormsg?indicatorType="+c};break;case"mLeaveDepartmentIndicator":e={className:"header-icon-at-department",url:"#more/indicatormsg?indicatorType="+c};break;case"mLeaveTeamIndicator":e={className:"header-icon-at-team",url:"#more/indicatormsg?indicatorType="+c};break;case"mtitadashang":e={className:"header-icon-in-reward",url:"#more/messages?messageType=2&isRead=1&tabAppId="+d+"&tabAppType="+appType};break;case"mTeamIndicator":e={className:"header-icon-work-notice",url:"#more/messages?messageType=2&isRead=1&tabAppId="+d+"&tabAppType="+appType}}return e},_updateMsgData:function(){var b=this._getMessageListData();this.messageBtn.reminds=a._.extend({},this.messageBtn.reminds,{remindCount:this.model.get("messageRedCount"),remindList:b||[]}),this.headerView.reloadMessage(this.messageBtn)},_getTodoData:function(){var b=this;a.app.request("Todo:getTodoData:",{pageNum:1,page_size:50,status:1}).done(function(a){var c=[];a.todos&&(c=a.todos.length>5?a.todos.slice(0,5):a.todos),b.todoCollection.reset(c),b._updateTodoData(c)}).fail(function(){})},_updateTodoData:function(b){if(b){var c=this._getRemindListData();this.todoBtn.reminds=a._.extend({},this.todoBtn.reminds,{remindList:c})}else this.todoBtn.reminds=a._.extend({},this.todoBtn.reminds,{remindCount:this.model.get("todoRedCount"),remindList:[]});this.headerView.reloadMessage(this.todoBtn)},_getRemindListData:function(){for(var a=this.todoCollection.toJSON(),b=[],c=this,d=0;d<a.length;d++){var e=a[d];b.push({userName:e.User.name,userPic:e.User.avatar.Medium,teskName:e.subTitle,data:e.createDate,taskContent:e.content,href:c._getUrl(e),avatar:{color:e.User.avatar.Color,hasAvatar:e.User.avatar.HasAvatar,medium:e.User.avatar.Medium}})}return b},_getUrl:function(a){var b=a.todoType,c="//"+location.host+location.pathname,d=c+"#more/messages?messageType=1",e=a.isPush;return a.objUrl&&""!=a.objUrl?a.objUrl:(1==b?e?d+="&pullScreeId="+a.objId+'&pullScreenOpen=true&pullScreenType=task"':d=a.objUrl:2==b?d=c+"#more/apply?name=plan":3==b?d=c+"#more/apply?name=work":4==b&&(d=a.objUrl),d)}});return new l}),define("views/common/layouts/master-layout",["talent","templates/common","tita-common","views/common/page-regions/header-extention-view","TitaWidget","views/common/layouts/italent-layout","views/common/system-upgrade-view"],function(a,b,c,d,e,f,g){c.MasterLayout.onViewShowAfter=function(){var b=a.Context.getGlobal("webPath"),c=(a.Context.getGlobal("env"),"italent.cn"),f=new e.PullScreenView({topBias:40,showFullScreenButton:!0});if(this.pullScreen.show(f),a.app.vent.on("route",function(){a.app.request("history:getQueryObject").done(function(a){!a.pullScreenOpen})}),b!=c){var h=new d;this.$('[data-name="head-nav"]').prepend(h.render().$el);var i=new g;$("body").find("#header-region").append(i.render().$el)}};var h=a.Context.getGlobal("usingNewMenu")||!1;return h?f:c.MasterLayout}),define("views/common/layouts/empty-layout",["talent","templates/common","TitaWidget"],function(a,b,c){var d=a.BaseEmptyLayout.extend({template:b["common/layouts/empty-layout"],regions:{main:"#main-region",pullScreen:"#pull-screen-region"},initialize:function(){window.top!=window&&window.iTalentSDK&&window.iTalentSDK.register()},refresh:function(){this.main.show(new this.mainViewClass(this.options)),this.trigger("refresh")},onShow:function(){var a=this;this.refresh(),this._adjustPagelinePos(),this._renderPullScreenLayoutView();var b=Talent._.debounce(function(){a._setPageLinePos()},300);$(window).off("resize.Tita-Layout"),$(window).on("resize.Tita-Layout",b)},onClose:function(){this.t&&clearInterval(this.t)},_adjustPagelinePos:function(){return"undefined"==typeof this.options.hideSubMenu?void this.$el.addClass("tu-page-hidesubmenu").removeClass("tu-grid-3-13"):void(this.options.hideSubMenu?this.$el.addClass("tu-page-hidesubmenu").removeClass("tu-grid-3-13"):(this.$el.removeClass("tu-page-hidesubmenu").addClass("tu-grid-3-13"),this._setPageLinePos()))},_setPageLinePos:function(){var a=this.$el.find(".tu-col-3").width();$(this.regions.main).css({backgroundPosition:a-1+"px 0"})},_renderPullScreenLayoutView:function(){var a=new c.PullScreenView({topBias:0,showFullScreenButton:!0});this.pullScreen.show(a),Talent.app.vent.on("route",function(){Talent.app.request("history:getQueryObject").done(function(a){a.pullScreenOpen||Talent.app.vent.trigger("global-pull-screen","closed")})})}});return new d});