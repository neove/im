/*! tita-web-v4 - v0.4.0 - 2016-07-08 18:31 */define("templates/home",[],function(){return this.JST=this.JST||{},this.JST["home/apply-open-meetting"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="tt_applyOpenMeetting">\r\n	<div class="app_aom" data-name="apply-open">\r\n		<div class="tip_aom">\r\n			您的企业尚未开通<br>'+(null==(__t=tipTxt)?"":__t)+'功能\r\n		</div>\r\n		<p><a href="'+(null==(__t=whyMeettingUrl)?"":__t)+'" title="" class="link_aom" target="_blank">什么是'+(null==(__t=tipTxt)?"":__t)+'？</a></p>\r\n		<span class="btn btn-success" data-name="apply-open-button">立即申请开通</span>\r\n	</div>\r\n	<div class="success_aom" data-name="apply-open-success">\r\n		<p class="tiptext"><span class="ico"></span><span>已经提交申请</span></p>\r\n		<p class="comfort">我们会尽快审核，审核通过后，<br/>tita客服会联系帮您开通，请耐心等待！</p>\r\n	</div>\r\n</div>';return __p},this.JST["home/index-page"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="_tt_layout_home_right"></div>\n<div class="_tt_layout_home_container">\n	<ul class="tt_pubtab" data-name="pub-tab">\n		<li class="active">\n			<a href="javascript:void(0);" title="">'+(null==(__t=i18n.publishshare_1)?"":__t)+'</a>\n			<i class="ico_cp"></i>\n		</li>\n		',0==inNew&&(__p+="\n			",isShowTask&&(__p+='\n			<li>\n				<a href="javascript:void(0);" title="">'+(null==(__t=i18n.publishtask_1)?"":__t)+'</a>\n				<i class="ico_cp"></i>\n			</li>\n			'),__p+='\n			<li>\n				<a href="javascript:void(0);" title="">写日报</a>\n			\n			</li>\n		'),__p+='\n	</ul>\n	<div data-name=\'pub-tab-box\'>\n		<div class="pubblog_home pub_home" data-name="pub-blog"></div>\n		',isShowTask&&(__p+='<div class="pubtask_home pub_home"  data-name="pub-task"></div>'),__p+='\n		<div class="pubdaily_home pub_home" data-name="pub-daily"></div>\n	</div>\n	<div class="feed_home"><div class="_tt_loading_m">努力加载中…</div></div>\n</div>\n\n<div class="_tt_pagebottomline"></div> \n';return __p},this.JST["home/online-colleagues-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<a href="/u/'+(null==(__t=Id)?"":__t)+'">\r\n\r\n	',__p+=0==UserAvatar.HasAvatar?"\r\n								\r\n		"+(null==(__t=_.convertImage({className:"",src:UserAvatar.Medium,size:30,shape:"radius",name:Name,bgColor:UserAvatar.Color}))?"":__t)+"\r\n\r\n		\r\n	":'\r\n		<img class="radius_img30" alt="'+(null==(__t=Name)?"":__t)+'" src="'+(null==(__t=UserAvatar.Small)?"":__t)+'" width="30" height="30">\r\n\r\n		\r\n	',__p+="\r\n\r\n</a>";return __p},this.JST["home/online-colleagues"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="title clearfix">\r\n	<span class="name_os">在线同事</span>\r\n	<a class="total_os" href="#staff?name=online">\r\n		<span>在线'+(null==(__t=onLineTotal)?"":__t)+"人 共"+(null==(__t=total)?"":__t)+'人</span>\r\n		<b class="icon-arrow-right"></b>\r\n	</a>\r\n	\r\n</div>\r\n<ul class="list_os">\r\n	<li class="more_os" data-name="more"><a href="#staff?name=online">更多</a>\r\n</ul>\r\n';return __p},this.JST["home/pubplan/pub-plan-date"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\r\n<div class="day_pplan" year="'+(null==(__t=date.year)?"":__t)+'">\r\n	<dl>\r\n		<dd>\r\n			<strong>'+(null==(__t=date.day)?"":__t)+'</strong>\r\n			<span class="month_pplan">'+(null==(__t=date.month)?"":__t)+'</span>月<span class="ri_pplan">'+(null==(__t=date.date)?"":__t)+'</span>日\r\n		</dd>\r\n		<dt class="year_pplan"><b>'+(null==(__t=date.year)?"":__t)+'</b>年</dt>\r\n	</dl>\r\n</div>\r\n<div class="tt_datepicker"></div>\r\n';return __p},this.JST["home/pubplan/pub-plan-list-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="\n ",__p+=7==ScheduleType?'\n 	<span data-name="push" href="'+(null==(__t=Url)?"":__t)+'" class="item '+(null==(__t=2==Status||3==Status||4==Status?"disable":"")?"":__t)+'" title="'+(null==(__t=Name)?"":__t)+'"> '+(null==(__t=Name)?"":__t)+"</span>\n ":'\n 	<a  class="item '+(null==(__t=2==Status||3==Status||4==Status?"disable":"")?"":__t)+'" href="'+(null==(__t=Url)?"":__t)+'" target="_blank" title="'+(null==(__t=Name)?"":__t)+'">'+(null==(__t=Name)?"":__t)+"</a>\n ";return __p},this.JST["home/pubplan/pub-plan-new-list"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<form>\r\n	<!-- <div class="newitem">\r\n		<div class="input-default input-middle">\r\n			<label name="label-content">今天要做的事</label><input name="new-content" type="text" autocomplete="off">\r\n		</div>\r\n\r\n		<a href="javascript:void(0)" class="plan_submint submint" name="submit-content" original-title="点击添加"><span></span></a>\r\n	</div> -->\r\n	<div class="list_newlist" name=\'list-content\'>\r\n		<ul></ul>\r\n		<div class="more_newlist"><a href="#plan" title="">更多本周'+(null==(__t=i18n.plan_1)?"":__t)+"</a></div>\r\n	</div>\r\n</form>";return __p},this.JST["home/pubplan/pub-plan"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="datewrap_pplan"></div>\r\n<div class="rightcont_pplan"></div>\r\n';return __p},this.JST["home/right"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="tt_top_notice">\r\n    <div class="title">置顶公告</div>\r\n    <div data-name="top-notice"></div>\r\n</div>\r\n\r\n',Talent.Context.getGlobal("loginUserInfo").IsShowPopularLinks&&(__p+='\r\n<div class="tt_incommonlink">\r\n    <div class="title">'+(null==(__t=i18n.href_1)?"":__t)+'</div>\r\n    <div class="list_icl">\r\n        <!-- <a href="/u/'+(null==(__t=UserInfo.Id)?"":__t)+'/Invite/InviteMoreIndex" title="" class="btn btn-cancel">'+(null==(__t=i18n.invitemate_1)?"":__t)+'</a> -->\r\n		<a href="'+(null==(__t=url)?"":__t)+'" title="" class="btn btn-cancel">'+(null==(__t=i18n.invitemate_1)?"":__t)+'</a>\r\n		<a href="'+(null==(__t=HelpUrl)?"":__t)+'" title="" class="btn btn-cancel" target="_blank">'+(null==(__t=i18n.helpcenter_1)?"":__t)+"</a>\r\n		",__p+="undefined"!=typeof meeting&&meeting?'\r\n		<a target="_blank" href="'+(null==(__t=meeting.Href)?"":__t)+'" title="" class="btn btn-cancel">会议预定</a>\r\n		':'\r\n		<a href="javascript:void(0);" class="btn btn-cancel" data-name="meeting-link">会议预定</a>\r\n		',__p+="\r\n        ",__p+=hasOpenApply?'\r\n             <a href="//sp.tita.com/" class="btn btn-cancel" target="_blank" >快速审批</a>\r\n        ':'\r\n             <a href="javascript:void(0);" class="btn btn-cancel"  data-name="apply-link">快速审批</a>\r\n        ',__p+="\r\n\r\n\r\n        ","103239"==Talent.Context.getTenantInfo().Id&&(__p+='\r\n            <a href="/u/'+(null==(__t=UserInfo.Id)?"":__t)+'/Home#more/pay?package_id=9F93899F-BE0D-41EB-8069-17687EDD9964&from=fromdue" title="" class="btn btn-cancel">GCDF培训费支付</a>\r\n        '),__p+="\r\n	</div>\r\n</div>\r\n"),__p+='\r\n<div class="tt_onlinestaff"></div>\r\n<div class="tt_downloadmobile">\r\n    <div class="title">微信公众号tita-com</div>\r\n    <div class="weixin"><img src="'+(null==(__t=weixinUrl)?"":__t)+'" alt="" /></div>\r\n</div>\r\n<div class="tt_downloadmobile" data-name="download-mobile">\r\n    <div class="title">手机客户端下载</div>\r\n    <a href="'+(null==(__t=ClientApple)?"":__t)+'" title="" class="cont_dlm cont_dlm_apple" target="_blank" data-type="apple"></a>\r\n    <a href="'+(null==(__t=ClientAndroid)?"":__t)+'" title="" class="cont_dlm cont_dlm_android" target="_blank" data-type="android"></a>\r\n    <a href="'+(null==(__t=ClientWinPhone)?"":__t)+'" title="" class="cont_dlm cont_dlm_wp" target="_blank" data-type="window"></a>\r\n</div>\r\n';return __p},this.JST["home/start/index-page"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\n	<dl class="head_bc">\n		<dt>欢迎来到工作'+(null==(__t=i18n.plan_1)?"":__t)+'管理平台</dt>\n		<dd><a href="javascript:void(0);" class="btn btn-success" data-name="enter">开始我的'+(null==(__t=i18n.plan_1)?"":__t)+'管理</a></dd>\n	</dl>\n	<div class="cont_bc">\n		<img src="'+(null==(__t=imgUrl)?"":__t)+'" alt="" />\n	</div>\n	<div class="foot_bc">\n		\n	</div>\n	<div class="_tt_pagebottomline"></div> \n';return __p},this.JST["home/top-notice-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="basic_tn">\r\n	<a href="'+(null==(__t=UserHomeUrl)?"":__t)+'" title="" class="avatar_tn">\r\n\r\n		',__p+=0==PublishUser.Avatar.HasAvatar?"\r\n								\r\n			"+(null==(__t=_.convertImage({className:"",src:PublishUser.Avatar.Small,size:30,shape:"radius",name:PublishUser.Name,bgColor:PublishUser.Avatar.Color}))?"":__t)+"\r\n\r\n			\r\n		":'\r\n			<img class="radius_img30" alt="'+(null==(__t=PublishUser.Name)?"":__t)+'" src="'+(null==(__t=PublishUser.Avatar.Small)?"":__t)+'">\r\n		',__p+='\r\n\r\n	</a>\r\n	<div class="intro_tn">\r\n		<a href="'+(null==(__t=UserHomeUrl)?"":__t)+'" title="" class="name_tn">'+(null==(__t=PublishUser.Name)?"":__t)+"</a>\r\n		","undefined"!=typeof PublishUser.UserMark&&PublishUser.UserMark&&(__p+='\r\n			\r\n			<img src="'+(null==(__t=PublishUser.UserMark.logo)?"":__t)+'" original-title="'+(null==(__t=PublishUser.UserMark.mark_name)?"":__t)+'" class="mark_fed"  />\r\n\r\n		'),__p+="\r\n		<p>"+(null==(__t=CreateDate)?"":__t)+'</p>\r\n	</div>\r\n</div>\r\n<p class="box_tn">\r\n	<span class="icon-quotes-left"></span>\r\n	<a href="'+(null==(__t=Url)?"":__t)+'" title="" class="cont_tn">'+(null==(__t=Content)?"":__t)+'</a>\r\n	<span class="icon-quotes-right"></span>\r\n</p>\r\n';return __p},this.JST}),define("views/home/online-colleagues-view",["talent","templates/home","$.tipsy"],function(a,b){var c=a.ItemView.extend({tagName:"li",template:b["home/online-colleagues-item"],events:{"mouseenter a":"onEnterFun"},initialize:function(){this.$el.tipsy({fallback:this.model.get("Name"),gravity:"s"})}});return a.CompositeView.extend({template:b["home/online-colleagues"],className:"onlinestaff",itemView:c,itemViewContainer:".list_os",appendHtml:function(a,b){a.$el.find("li:last").before(b.el)},onRender:function(){this.model.get("onLineTotal")>30?this.$el.find("li[data-name=more]").show():this.$el.find("li[data-name=more]").hide()}})}),define("views/common/enter-admin-center-view",["talent","templates/common","$.tipsy"],function(a,b){return a.ItemView.extend({template:b["common/enter-admin-center"],className:"tt_entertms",templateHelpers:function(){var b=a.Context.getUserInfo(),c="bench",d=a.Context.getGlobal("WebHead"),e=a.Context.getGlobal("IsUseTitaManage")||!1,f=a._.extend({},a.Context.getGlobal("tenantAuthentication")),g=f.DeadLine;if(g){var h=g.split("-");f.DeadLine=h[0]+"年"+h[1]+"月"+h[2]+"日"}var i=Talent.Context.getGlobal("titaHost"),j=Talent.Context.getGlobal("loginUserInfo").Id,k=i+"/u/"+j+"/Invite/InviteMoreIndex",l="#widget/italent?iTalentFrameType=iframe&iTalentFrame="+encodeURIComponent(k),m={TmUrl:a.Context.getGlobal("tmNewHost"),ReportUrl:"#more/iframe?url="+a.Context.getGlobal("reporthost"),IsManager:2==b.Role||1==b.Role||4==b.Role?!0:!1,IsShow:this.curPageId==c?!0:!1,IsUseTitaManage:e,IsShowDueRemind:0!=f.TenantId&&1==f.Version&&1==f.ExpireType&&2==b.Role?!0:!1,tenantAuthentication:f,Role:b.Role,IsBose:b.IsBoss,url:l};m.ReportRole=!1;for(var n=0;n<d.AppHead.length;n++)910==d.AppHead[n].AppId&&(m.ReportRole=!0);return m},ui:{guide:"a[data-name=guide]"},initialize:function(){this._routerData()},onRender:function(){this.ui.guide.tipsy({gravity:"s"})},onClose:function(){a.$(".tipsy").remove()},_routerData:function(){var b=this,c=a.app.request("history:getFragments");c.done(function(a){b.curPageId=a})}})}),define("views/common/empty-view",["talent","templates/common"],function(a,b){return a.ItemView.extend({defaults:{emptyContext:""},template:b["common/empty"],className:"tt_common_emptyinit",initialize:function(a){this.settings=Talent._.extend({},this.defaults,a)},templateHelpers:function(){var a=this.settings.emptyContext?this.settings.emptyContext:this.model.get("emptyContext"),b=0;return a&&(b=a.replace(/<[^>].*?>/g,"").replace(/[&nbsp;]/g,"").length),{emptyContext:a,className:b>24?"small_content_emptyinit":"content_emptyinit"}}})}),define("views/home/top-notice-view",["talent","templates/home","$.tipsy","views/common/empty-view"],function(a,b,c,d){var e=a.ItemView.extend({tagName:"li",template:b["home/top-notice-item"],_routerData:function(){var b=this,c=a.app.request("history:getQueryObject"),d=new a.$.Deferred;return c.done(function(a){b.routerData=a,b.routerData.appId=a.appId||1,b.routerData.appType=a.appType||1}),d},templateHelpers:function(){this._routerData();var b=this.model.get("Content")||"";b=b.replace(/<[^>].*?>/g,""),b=b.replace(/(!%nr%!)/g,"");var c=a.Context.getPageUrl("profile",{appId:this.routerData.appId,appType:this.routerData.appType,userId:this.model.get("PublishUser").UserId});return{Content:a.Context.subString(b,56,!0),UserHomeUrl:c}},onRender:function(){this.$el.find(".mark_fed").tipsy({gravity:"s"})}});return a.CollectionView.extend({className:"topnotice",itemView:e,itemViewContainer:"ul",tagName:"ul",emptyView:d,itemViewOptions:function(){return{emptyContext:"暂无置顶公告，企业超级管理员可在“所有动态”中对单条动态进行置顶操作"}}})}),define("views/home/apply-open-meetting-view",["talent","templates/home"],function(a,b){return a.ItemView.extend({template:b["home/apply-open-meetting"],ui:{applyOpenButton:"span[data-name=apply-open-button]",applyOpen:"div[data-name=apply-open]",applyOpenSuccess:"div[data-name=apply-open-success]"},defaults:{tipTxt:"会议室预订",type:1,whyMeettingUrl:a.Context.getGlobal("helpHost")+"/ProIntro/MettingScheduled"},initialize:function(b){this.settings=a._.extend({},this.defaults,b)},templateHelpers:function(){return this.settings},events:function(){var a={};return a["click "+this.ui.applyOpenButton]="_applyOpenRequrest",a},_applyOpenRequrest:function(b){var c=a.$(b.currentTarget),d=this;c.html("正在发送申请"),a.app.request("Home:postApplyOPenMeetting",{type:this.settings.type}).done(function(){d.ui.applyOpen.hide(),d.ui.applyOpenSuccess.show()})}})}),define("views/home/right-view",["talent","templates/home","views/home/online-colleagues-view","views/common/enter-admin-center-view","tdialog","views/home/top-notice-view","views/home/apply-open-meetting-view"],function(a,b,c,d,e,f,g){return a.Layout.extend({template:b["home/right"],regions:{onLineStaff:".tt_onlinestaff",pubplan:".cont_pplan",topNotice:"div[data-name=top-notice]"},ui:{mobile:"div[data-name=download-mobile]",mobileItem:"div[data-name=download-mobile] a",meetingLink:"a[data-name=meeting-link]",applyLink:"a[data-name=apply-link]"},events:function(){var a={};return a["mouseenter "+this.ui.mobileItem]="_overDownloadMobileEventHander",a["mouseleave "+this.ui.mobile]="_leaveDownloadMobileEventHander",a["click "+this.ui.meetingLink]="_applyOPenMeetingHandler",a["click "+this.ui.applyLink]="_applyOPenApplyHandler",a},templateHelpers:function(){var b=a.Context.getUserInfo(),c=a.Context.getGlobal("Header"),d=a.Context.getGlobal("tenantAuthentication"),e=a.Context.getGlobal("WebHead").AppHead,f=a._.findWhere(e,{AppId:"901"})?!0:!1,g=a.Context.customModuleIsShow(),h=g.plan,i=Talent.Context.getGlobal("titaHost"),j=Talent.Context.getGlobal("loginUserInfo").Id,k=i+"/u/"+j+"/Invite/InviteMoreIndex",l="#widget/italent?iTalentFrameType=iframe&iTalentFrame="+encodeURIComponent(k);return g.calendar||(h=!1),{ClientApple:a.Context.getGlobal("helpHost")+"/App/IPhone",ClientAndroid:a.Context.getGlobal("helpHost")+"/App/Android",ClientWinPhone:a.Context.getGlobal("helpHost")+"/App/WinPhone",TenantInfo:a.Context.getTenantInfo(),UserInfo:b,HelpUrl:a.Context.getGlobal("helpHost"),i18n:a.Context.getI18n(),weixinUrl:a.Context.getStaticUrl("images/home/qr_wx_v3.gif"),meeting:a._.findWhere(c,{Code:"700"}),inviteMemberUrl:a.Context.getStaticUrl("images/invite_member.png"),Version:d.Version,hasOpenApply:f,newyearpage:a.Context.getGlobal("titaHost")+"/survey/home/index",url:l}},initialize:function(){},onShow:function(){var b=this;this.renderOnLineUsers(),this.enterAdminCenterView||(this.enterAdminCenterView=new d,this.$el.prepend(this.enterAdminCenterView.render().$el)),a.app.request("Feed:getTopData",{feed_count:5,comment_count:0,type:27}).done(function(a){b.renderTopNotice(a)})},renderTopNotice:function(b){this.topNoticeView||(this.topNoticeView=new f({collection:new a.Collection(b)}),this.topNotice&&this.topNotice.show(this.topNoticeView))},renderOnLineUsers:function(){{var b=this;a.app.request("User:getOnlineUserData",{}).done(function(d){if(d.Total&&0!=d.Total){var e=new c({model:new a.Model({onLineTotal:d.Total,total:d.TotalUserCount})});b.onLineStaff&&b.onLineStaff.show(e.render()),e.collection.reset(d.Users)}})}},_leaveDownloadMobileEventHander:function(){this.tipDialog&&this.tipDialog.hide()},_overDownloadMobileEventHander:function(b){var c=a.$(b.currentTarget),d=c.attr("data-type"),e={apple:a.Context.getStaticUrl("images/home/qr_apple.gif"),android:a.Context.getStaticUrl("images/home/qr_android_v2.gif"),window:a.Context.getStaticUrl("images/home/qr_window.gif")},f={apple:{pos:"top",arrowBias:10},android:{pos:"topCenter"},window:{pos:"topRight",arrowBias:-40}};this.ui.mobile.find("span[data-name=qrcode]").show();var g='<img src="'+e[d]+'" alt="" />';this.showTipDialog(c,g,f[d])},showTipDialog:function(a,b,c){this.tipDialog||(this.tipDialog=new e({minWidth:181}),this.tipDialog.render(),$("body").append(this.tipDialog.$el)),this.tipDialog.show(a,b,c)},_applyOPenMeetingHandler:function(b){var c=a.$(b.currentTarget);this.meetingLinkDialog||(this.meetingLinkDialog=new e({minWidth:181,showClosed:!0,type:"default"}),this.meetingLinkDialog.render(),$("body").append(this.meetingLinkDialog.$el));var d=new g,f=d.render().el;this.meetingLinkDialog.show(c,f,{arrow:!1,pos:"topRight",topBias:38})},_applyOPenApplyHandler:function(b){var c=a.$(b.currentTarget);this.meetingLinkDialog||(this.meetingLinkDialog=new e({minWidth:181,showClosed:!0,type:"default"}),this.meetingLinkDialog.render(),$("body").append(this.meetingLinkDialog.$el));var d=new g({tipTxt:"快速审批",whyMeettingUrl:"http://service.tita.com/pages/viewpage.action?pageId=590388",type:2}),f=d.render().el;this.meetingLinkDialog.show(c,f,{arrow:!1,pos:"topRight",topBias:38})},onClose:function(){this.meetingLinkDialog&&this.meetingLinkDialog.close()}})}),define("views/common/send-notice/send-notice-user-list-view",["talent","templates/common","$.tipsy","tdialog"],function(a,b,c,d){var e=a.ItemView.extend({tagName:"li",template:b["common/send-notice/send-notice-user-list-item"],initialize:function(){this.isDisableSelect=this.options.isDisableSelect||!1},onRender:function(){var b=this;a.$(this.el).addClass("active"),this.model.set("isActive",!0),a.$(this.el).attr("Id",this.model.get("userId")),$(".tipsy").hide(),this.$el.tipsy({gravity:"s",title:function(){return b.model.get("name")}})},onClose:function(){$(".tipsy").hide()},modelEvents:{"change:isActive":"_toggleStatus"},_toggleStatus:function(){var b=this.model.get("isActive");b?a.$(this.el).addClass("active"):a.$(this.el).removeClass("active")}});return a.CompositeView.extend({template:a._.template("<ul/>"),itemViewContainer:"ul",itemView:e,events:function(){var a={};return a["click li"]="_selectUser",a},onRender:function(){this.selectUsers=this.collection.toJSON(),this.model.set("selectUsers",a._.pluck(this.selectUsers,"userId")),1==this.collection.length&&this.$el.find("li:first").addClass("disable")},_selectUser:function(b){if(1!=this.collection.length){var c=a.$(b.currentTarget),e=c.index(),f=this.collection.at(e);this.selectUserTipView&&this.selectUserTipView.$el.remove(),f.get("isActive")?f.set("isActive",!1):f.set("isActive",!0);var g=a._.filter(this.collection.toJSON(),function(a){return a.isActive?a.isActive:void 0});return 0==g.length?(f.set("isActive",!0),this.selectUserTipView=new d({fixed:!1,type:"modal",cancel:!1,sure:!1}),this.selectUserTipView.render().$el.appendTo("body"),void this.selectUserTipView.show(c,'<div class="innerhtml_dialog">请至少选择一个通知对象</div>',{arrow:!1,autoHide:!0,pos:"bottomCenter"})):void this.model.set("selectUsers",a._.pluck(g,"userId"))}},addAttr:function(a){for(var b=0;b<a.length;b++)a[b].isActive=!0;return a},reset:function(){this.collection.reset(this.addAttr(this.userListData))}})}),define("views/common/send-notice/send-notice-auto-user-list-view",["talent","templates/common","UserSelector","collections/smember-group-collection","$.tipsy","tdialog"],function(a,b,c,d,e,f){var g=a.ItemView.extend({template:b["common/send-notice/add-user"],tagName:"li",ui:{uxUserArea:".ux_user_area"},initialize:function(){},onRender:function(){this.model.has("UserAvatar")?(this.userAvatar=this.model.get("UserAvatar"),this.userAvatar.HasAvatar&&this.$el.find("img").addClass("radius_img30")):this.userAvatar="",this.$el.find("a").tipsy({gravity:"s"})},events:function(){var a={};return a["mouseover "+this.ui.uxUserArea]="changeHideNode",a["mouseout "+this.ui.uxUserArea]="changeShowNode",a["click "+this.ui.uxUserArea]="deleteUser",a},deleteUser:function(){this.trigger("deleteUser",this.model)},changeHideNode:function(b){var c=a.$(b.currentTarget);this.userAvatar.HasAvatar?c.find("img").hide():c.find("span").hide()},changeShowNode:function(b){var c=a.$(b.currentTarget);this.userAvatar.HasAvatar?c.find("img").show():c.find("span").show()}}),h=a.CompositeView.extend({itemView:g,itemViewContainer:"ul",template:b["common/send-notice/add-user-list"],className:"add_user_list",ui:{addUserBtn:".ux_add_btn"},initialize:function(){},modelEvents:{change:"render"},onRender:function(){var a=this;this.on("itemview:deleteUser",function(b){a.collection.remove(b.model),$("body .tipsy").remove()}),this.userSelectorView=new c({collection:new d}),this.userSelectorView.addNode(this.$el.find(".ux_add_btn"),this.addUserSelectonOptions),this.$el.find(".ux_add_btn").on("submit",function(b,c){b.stopPropagation(),a.smemberSelect(c)})},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a),d=Marionette.getOption(this,"itemViewOptions");_.isFunction(d)&&(d=d.call(this,a,c));var e=this.buildItemView(a,b,d);this.addChildViewEventForwarding(e),this.children.add(e),e.render(),this.$el.find(this.itemViewContainer).find("li:first-child").length?this.$el.find(this.itemViewContainer).find("li:first-child").before(e.el):this.$el.find(this.itemViewContainer).append(e.el),this._isShown&&Marionette.triggerMethod.call(e,"show"),this.triggerMethod("after:item:added",e)},smemberSelect:function(a){var a=a||{},b=this.collection.where({Id:a.Id});b.length>0?this.showDialogArrow(this.ui.addUserBtn,"该联系人已存在","warn"):this.collection.add(a)},showDialogArrow:function(b,c,d){var e=this;e.tDialogViewError||(e.tDialogViewError=new f({fixed:!1,type:"tipsy",cancel:!1,sure:!1}),e.tDialogViewError.render().$el.appendTo("body")),e.tDialogViewError.show(a.$(b),c,{arrow:1,pos:"bottomCenter",height:300,topBias:8,leftBias:0,arrowBias:10,className:d,autoHide:!0})}});return h}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(require("../moment")):"function"==typeof define&&define.amd?define("momentZH",["moment"],b):b(a.moment)}(this,function(a){var b=a.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm分",LTS:"Ah点m分s秒",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(a,b){return 12===a&&(a=0),"凌晨"===b||"早上"===b||"上午"===b?a:"下午"===b||"晚上"===b?a+12:a>=11?a:a+12},meridiem:function(a,b){var c=100*a+b;return 600>c?"凌晨":900>c?"早上":1130>c?"上午":1230>c?"中午":1800>c?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var b,c;return b=a().startOf("week"),c=this.unix()-b.unix()>=604800?"[下]":"[本]",0===this.minutes()?c+"dddAh点整":c+"dddAh点mm"},lastWeek:function(){var b,c;return b=a().startOf("week"),c=this.unix()<b.unix()?"[上]":"[本]",0===this.minutes()?c+"dddAh点整":c+"dddAh点mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(日|月|周)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"日";case"M":return a+"月";case"w":case"W":return a+"周";default:return a}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}});return b}),define("views/common/send-notice/send-notice-component",["talent","templates/common","views/common/send-notice/send-notice-user-list-view","views/common/send-notice/send-notice-auto-user-list-view","moment","momentZH","tdialog"],function(a,b,c,d,e,f,g){return a.Layout.extend({defaults:{title:"提醒大家写日报",isMailEdit:"true",mailContent:"",checkedSendMail:!0,isEditCopySelf:!0,checkedCopySelf:!0,isShowWithStatistics:!1,checkedWidthStatistics:!0,isShowSystemNotice:!0,isShowFormalNotice:!1,autoSubShow:!1,editFormalNotice:!1},className:"noticemessage",template:b["common/send-notice/send-notice-component"],regions:{userList:"div[data-name=user-list]"},ui:{item:"li",title:"div[data-name=title]",inputWrap:"div[data-name=mail-cont]",input:"div[data-name=mail-cont] textarea",copyMy:"a[data-name=copy-my]",withStatistics:"a[data-name=with-statistics]"},events:function(){var a={};return a["click "+this.ui.item]="_selectUser",a["keyup "+this.ui.input]="_keyupInputHandler",a["click "+this.ui.copyMy]="_clickCopyMyHandler",a["click "+this.ui.withStatistics]="_clickWidthStatistics",a},initialize:function(){var b=this;this.settings=a._.extend({},this.defaults,this.options),this.model.set(this.settings),this.loginUser=a.Context.getUserInfo(),this.model.set("user",this.loginUser);var d=e().format("YYYY年M月D日");this.model.set("SendTime",d),this.settings.autoSubShow||(this.collection.each(function(a){a.set("Id",a.get("userId"))}),this.sendNoticeUserListView=new c({collection:this.collection})),a.$(document).off("click.Send-Notice-Componet-View"),a.$(document).on("click.Send-Notice-Componet-View",function(){b.hideDialog()})},templateHelpers:function(){return{isShowFormalNotice:this.settings.isShowFormalNotice,isShowSystemNotice:this.settings.isShowSystemNotice}},onRender:function(){var a=this;this.ui.input.val(this.model.get("mailContent")),this.settings.autoSubShow?(_.map(this.collection.models,function(b){var c=a._returnImgTemplate(b.toJSON());b.set("imgTemplate",c)}),this.collection.each(function(a){a.set("Id",a.get("userId"))}),this.sendNoticeAutoUserListView=new d({collection:this.collection}),this.userList.show(this.sendNoticeAutoUserListView)):this.userList.show(this.sendNoticeUserListView)},_returnImgTemplate:function(a){var b="";if(a.avatar.HasAvatar)var b='<img class="radius_img30" width="30" height="30" src="'+a.avatar.Small+'" />';else var b='<span class="radius_img30" style="background-color:'+a.avatar.Color+'">'+_.substring(a.name,2,!1)+"</span>";return b},onClose:function(){a.$(document).off("click.Send-Notice-Componet-View")},showDialog:function(b,c,d){var e=this;this.dialogView=new g({type:"defaults",sure:function(){var a=e.model.get("checkedCopySelf");if(e.settings.autoSubShow)var b=_.map(e.sendNoticeAutoUserListView.collection.models,function(a){return a.get("Id")});else var b=e.sendNoticeUserListView.model.get("selectUsers");if(a)if(b)b.push(e.loginUser.Id);else{var b=[];b.push(e.loginUser.Id)}var c=e.model.toJSON();c.selectUsers=b,e.dialogView.hide(),e.trigger("submit",c)},cancel:function(){e.hideDialog()}});var f="";f=d?d:$("body"),this.dialogView.render().$el.appendTo(f);var h=this.render().el,i={pos:"bottom",x:0,y:0,title:"提醒大家写日报"};c.title&&this.ui.title.html(c.title),this.dialogView.show(b,h,a._.extend({arrow:!1,autoHide:!1,autoFrames:f,container:f},i,c))},hideDialog:function(){this.dialogView&&this.dialogView.close(),this.$el.remove()},_keyupInputHandler:function(b){var c=a.$(b.currentTarget),d=$.trim(c.val());this.model.set("mailContent",d)},_clickCopyMyHandler:function(b){if(this.model.get("checkedSendMail")){var c=a.$(b.currentTarget),d=this.model.get("checkedCopySelf");d?(this.model.set("checkedCopySelf",!1),c.removeClass("checkbox-checked")):(this.model.set("checkedCopySelf",!0),c.addClass("checkbox-checked"))}},_clickWidthStatistics:function(b){var c=a.$(b.currentTarget),d=this.model.get("checkedWidthStatistics");d?(this.model.set("checkedWidthStatistics",!1),c.removeClass("checkbox-checked")):(this.model.set("checkedWidthStatistics",!0),c.addClass("checkbox-checked"))}})}),define("views/common/plugins/pubdaily/pubdaily-view",["talent","templates/common","tdialog","views/common/send-notice/send-notice-component","TitaWidget"],function(a,b,c,d,e){return a.CompositeView.extend({defaults:{inputDefatutValue:"",shape:"defaults",dialogTilte:"工作日报",autoSubShow:!1,report_type:8,dailyType:1},template:b["common/pubdaily/pubdaily"],className:"tt_daily_pub_view",ui:{pubDailyArea:"div[data-name=pub-daily-form]",buttonGenerate:"button[data-name=generate]",buttonClosed:"span[data-name=closed]",buttonAutoSend:'button[data-name="auto-send"]'},templateHelpers:function(){return this.settings},modelEvents:{},events:function(){var a={};return a["click "+this.ui.buttonGenerate]="_clickButtonGenHandler",a["click "+this.ui.buttonClosed]="_closedHandler",a["click "+this.ui.buttonAutoSend]="_clickButtonAutoSend",a},initialize:function(b){var c=this;this.options=b||{},this.settings=a._.extend({},this.defaults,this.options),this.userInfo=a.Context.getUserInfo(),this.i18n=a.Context.getI18n(),this.model.set("generateType",[1,2]),"dialog"==this.settings.shape&&(a.$(document).off("click.Pubdaily-View"),a.$(document).on("click.Pubdaily-View",function(){c.close()}),this.$el.on("click",function(a){a.stopPropagation()}))},onClose:function(){"dialog"==this.settings.shape&&a.$(document).off("click.Pubdaily-View")},onShow:function(){var b=(this._rendBlogView(),this);"dialog"==b.settings.shape?(a.$(b.ui.pubDailyArea).append(b.mBlogView.render().$el),b.$el.addClass("tt_dialog_daily_pub")):a.$(b.ui.pubDailyArea).append(b.mBlogView.render().$el)},_clickButtonAutoSend:function(b){{var c=this,c=this;new a.$.Deferred}a.app.request("UserSubordinate:getDirectSuperior").done(function(e){var f=a._.pluck(e,"parentUser");c.superiorUser=a._.filter(f,function(b){return b&&b.userId?b.userId!=a.Context.getUserInfo().Id:void 0});var g=a.$(b.currentTarget);c.sendNoticeComponent&&c.sendNoticeComponent.hideDialog();var h="发送邮件",i=c.model.get("date"),j=c.model.get("generateType");a.app.request("Daily:getAutoDaily",{types:j.join(","),date:i,report_type:c.settings.report_type,plan_table_id:c.model.get("plan_table_id")}).done(function(b){return b?(c.sendNoticeComponent&&c.sendNoticeComponent.close(),c.sendNoticeComponent=new d({collection:new a.Collection(c.superiorUser),mailContent:b,isShowWithStatistics:!1,title:h,isShowSystemNotice:!1,autoSubShow:c.settings.autoSubShow}),c.sendNoticeComponent.showDialog(g,{title:h}),void c.listenTo(c.sendNoticeComponent,"submit",function(b){var d=c.settings.dailyType;return 1==b.selectUsers.length&&b.selectUsers[0]==c.userInfo.Id||0==b.selectUsers.length?void c._tipDialog(g,"通知对象不能为空"):void a.app.request("PlanCommmon:postSendNotice",{UserIds:b.selectUsers.join(","),EmailContent:1==b.checkedSendMail?b.mailContent:"",Date:c.model.get("date"),MessageContent:"",MessageType:1==d?15:18,PlanTableId:this.model.get("plan_table_id")}).done(function(){c._tipDialog(g,"发送邮件成功","success")}).fail(function(a){c._tipDialog(g,a)})})):void c._tipDialog(g,"您还没有工作汇总，工时汇总")})})},setPosition:function(a){var b=a.offset(),c=a.outerWidth(),d=(a.outerHeight(),this.$el.outerWidth());this.$el.css({position:"absolute",left:b.left-d+c,top:b.top})},_clickButtonGenHandler:function(b){var c=a.$(b.currentTarget),d=this.model.get("generateType");d.length&&this._requestAutoDialy(c)},_closedHandler:function(){this.close()},_rendBlogView:function(){var b={publicOptions:{name:"公开",des:"所有人可见"},privateOptions:{name:"私密",des:"仅我的上级可见"},departmentOptions:{name:"部门可见",des:"仅我的部门可见"}},c=this,d=a.Context.getGlobal("tenantBehavior").TaskPushlishPrivateType||3,f="";
f=1==d?"公开":2==d?"私密":"部门可见";var g=this.settings.dailyType,h=this.model.get(1==g?"date":"plan_table_id");this.mBlogView=new e.PublistMblogView({id:"Daily"+h,type:"feed",maxlength:"4000",isLimit:!0,defaultValue:this.settings.inputDefatutValue,value:"",submitText:"发布",shape:"default",defaultHide:!1,inFocus:!0,isShowAtAll:!1,atAllText:"所有同事",atAllValue:"@[所有同事:all_members] ",atAllTipText:"所有同事将收到本条消息",privateDropDownOptions:b,isShowAt:!0,atText:"同事",atTipText:"想确保谁看到就@这个成员",isShowAttachment:!0,isShowEmotion:!1,isShowRange:!0,privateText:f,privateValue:d,isShowRangeDropDown:!0,isShowSendSms:!1,submitRequest:function(b,d){var e=new Talent.$.Deferred;return a.app.request("Daily:planDialyAdd",{content:d.context,visibility:d.visibility||1,fileUrls:d.files.join(","),objId:d.privateObjId,objType:d.privateObjType,dateTime:c.settings.model.get("date"),reportType:c.settings.report_type,planTableId:c.settings.model.get("plan_table_id"),otherDocuments:d.YFYDocuments}).done(function(a){c.trigger("submitSuccess",b,a),e.resolve(a)}).fail(function(a){e.reject(a)}),e}})},requestDailyData:function(b){var c=new a.$.Deferred;return a.app.request("Daily:postAddDailyData",{content:b.content,fileUrls:b.FileUrls,dateTime:self.routerData.date,visibility:b.visibility||1,objId:b.ObjId,objType:b.ObjType}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c},_requestAutoDialyContent:function(){},_requestAutoDialy:function(b){var c=this.model.get("date"),d=this,e=this.model.get("generateType");a.app.request("Daily:getAutoDaily",{types:e.join(","),date:c,report_type:d.settings.report_type,plan_table_id:d.model.get("plan_table_id")}).done(function(a){if(!a)return void d._tipDialog(b,"您还没有工作汇总，工时汇总");var c=d.mBlogView.ui.input;c.val(a).trigger("keyup").autosize(),d._cursorMoveEnd(c)})},_cursorMoveEnd:function(a){var b=$(a).val().length,c=$(a)[0];if($.browser.msie){var d=c.createTextRange();d.moveStart("character",b),d.collapse(!0),d.select()}else c.setSelectionRange(b,b),c.focus()},_tipDialog:function(a,b,d){this.tipDialog=new c({type:"tipsy",sure:!1,cancel:!1}),$("body").append(this.tipDialog.render().$el),this.tipDialog.show(a,b,{pos:"topRight",className:d||"warn",arrow:!1,autoHide:!0})}})}),define("views/home/index-page-view",["talent","templates/home","views/home/right-view","tdialog","views/common/plugins/pubdaily/pubdaily-view","moment","momentZH","TitaWidget"],function(a,b,c,d,e,f,g,h){var i=a.Layout.extend({template:b["home/index-page"],className:"_tt_layout_home",regions:{pubTask:"div[data-name=pub-task]",feed:".feed_home",right:"._tt_layout_home_right",container:"._tt_layout_home_container",pubBlog:"div[data-name=pub-blog]"},ui:{pubTab:"ul[data-name=pub-tab]",pubTabLi:"ul[data-name=pub-tab] li",pubDaily:"div[data-name=pub-daily]",pubTabBox:"div[data-name=pub-tab-box]",pubHome:".pub_home",pubtask:"div[data-name=pub-task]",pubBlog:"div[data-name=pub-blog]",feed:".feed_home"},templateHelpers:function(){var b=a.Context.customModuleIsShow(),c=a.Context.getGlobal("tenantInfo");return{i18n:this.i18n,isShowTask:b.task,inNew:c.IsNew}},events:function(){var a={};return a["mouseenter "+this.ui.pubTabLi]="_overPubTabEventHandler",a["mouseleave "+this.ui.pubTabLi]="_leaverPubTabEventHandler",a},initialize:function(){this.i18n=a.Context.getI18n(),this.tenantInfo=a.Context.getTenantInfo(),a.Layout.prototype.initialize.apply(this,arguments),a.Context.setPageTitle("tita-"+this.i18n.home_1),this.tabT=null,this.tAddTaskAjax=null,this.$el.on("click",function(){a.$(".wrap_noticesetting_tita").hide()}),this.privacy=a.Context.getGlobal("tenantBehavior").TaskPushlishPrivateType||1;var b=a.app.request("history:getQueryObject"),c=new a.$.Deferred;return b.done(function(b){b.from&&"fromdue"==b.from&&a.app.request("Pay:tenantAuthorizeSet").done(function(){a.Context.setGlobal("deadLineRemind",!1)}),c.resolve(b)}),c},onShow:function(){var b=a.Context.getGlobal("hasReadPlanHelp");if(0==b)return void a.app.execute("history:navigate","home/start",!0);var d=this;if(a.$("#pos_notice_tita").length){var e=a.$("#pos_notice_tita").find(".total_nt").text();parseInt(e)>0&&$("#pos_notice_tita").show()}this.reghtView||(this.reghtView=new c,this.right.show(this.reghtView)),this._custom();var f=a.Context.customModuleIsShow();f.task&&this._renderPubTask(),a.app.request("Daily:getTodayDoneDaiy",{}).done(function(a){d.today=a.Date,a.HasPlanDaily?d._hasDoneDaily():d._renderDaily()}),this._renderFeedList(),a._.splash("home"),a.$("#BizQQWAP").show()},_renderFeedList:function(){this.$el.find("._tt_feedlist").remove(),this.feedTabListView=new h.FeedTabListView({}),this.feed.show(this.feedTabListView)},_custom:function(){var b=a.Context.getGlobal("tenant_function");b.social?this._renderPubblog():(this.ui.pubHome.eq(0).remove(),this.ui.pubTabLi.eq(0).remove()),this.ui.pubTabBox.find(".pub_home").first().show(),this.ui.pubTab.find("li:first").addClass("active")},_overPubTabEventHandler:function(b){var c=this;this.tabT=setTimeout(function(){var d=a.$(b.currentTarget),e=a.$(c.ui.pubTabLi).index(d);if(a.$(c.ui.pubTabLi).removeClass("active"),d.addClass("active"),c.ui.pubHome.hide(),c.ui.pubHome.eq(e).show(),c.taskCreateView&&c.taskCreateView.close(),0==e&&c.taskCreateView.$el.find(".ux_task_content").trigger("focus"),1==e){var f=a.Context.customModuleIsShow();f.task&&c._renderPubTask()}2==e&&c.pubDailyView&&c.pubDailyView.mBlogView.ui.input.trigger("input.autosize")},500)},_leaverPubTabEventHandler:function(){clearTimeout(this.tabT)},_renderPubblog:function(){var b=this,c=new h.PublistMblogView({privateText:"公开",id:"home-publish-mlog",shape:"line",isShowAtAll:2==a.Context.getUserInfo().Role||1==a.Context.getUserInfo().Role?!0:!1,submitRequest:function(c,d){var e=new a.$.Deferred;return Talent.app.request("Feed:feedAddShare",{Content:d.context,ObjType:d.privateObjType,ObjId:d.privateObjId,FileUrls:d.files.join(","),Visibility:d.visibility,IsSendSMS:d.isSendSMS,otherDocuments:d.YFYDocuments}).done(function(a){b._addItemViewFeed(a),e.resolve(a)}).fail(function(a){b._tipMessage(c,a),e.reject(a)}),e}});this.pubBlog.show(c)},_addItemViewFeed:function(a){var b=this.feedTabListView.addNewItemFeed(a);b.hide(),this.feedTabListView.$el.find("[data-name=feed-list-box]").prepend(b),b.slideDown()},_tipMessage:function(a,b,c){this.delDialog||(this.delDialog=new d({type:"tipsy"}),$("body").append(this.delDialog.render().$el)),this.delDialog.show(a,b,{pos:"topCenter",arrow:!1,autoHide:!0,className:c||"warn"})},_replaceFirstUper:function(a){return a=a,a.replace(/\b(\w)|\s(\w)/g,function(a){return a.toLowerCase()})},_renderPubTask:function(){var b=this;this.taskCreateView=new h.TaskCreateView({id:"Home-Index-Page",privateRangeOptions:{privateValue:this.privacy},requestSubmit:function(c){var d=new Talent.$.Deferred;return a.app.request("Task:saveTaskFeed",c).done(function(c){new a.Model(c);b._addItemViewFeed(c),d.resolve()}).fail(function(a){d.reject(a)}),d.promise()}}),this.pubTask.show(this.taskCreateView)},_renderDaily:function(){var b=this;this.pubDailyView=new e({inputDefatutValue:b.today+"日报",model:new a.Model({date:f().format("YYYY/MM/DD")}),autoSubShow:!0}),this.ui.pubDaily.html(this.pubDailyView.render().el),this.pubDailyView.onShow(),this.listenTo(this.pubDailyView,"submitSuccess",function(a,c){b._addItemViewFeed(c),b._hasDoneDaily(),b._tipDialog(this.pubDailyView.button_submit,"日报已提交")})},_hasDoneDaily:function(){this.$el.find("div[data-name=pub-daily]").html('<div class="publish_daily_done">'+this.today+'已写日报 &nbsp;&nbsp;&nbsp;&nbsp;<a href="#daily">查看</a></div>')},_tipDialog:function(a,b){this.tipDialog=new d({type:"tipsy",sure:!1,cancel:!1}),$("body").append(this.tipDialog.render().$el),this.tipDialog.show(a,b,{pos:"topCenter",className:"warn",arrow:!1,autoHide:!0})},onClose:function(){this.tipDialog&&this.tipDialog.close()}});return a.BasePageView.extend({mainViewClass:i,layout:window.top==window?"master-layout":"empty-layout"})});